{"version":3,"sources":["components/HomeViewControl/index.js","components/Map/index.js","assets/js/config.js","components/Search/index.js","components/App/index.js","index.js"],"names":["HomeViewControl","options","setAlignment","position","map","center","zoom","el","doc","innerHTML","addEventListener","this","setHomeView","bind","setCenter","setZoom","window","H","ui","Control","Map","props","mapRef","React","createRef","state","M","Platform","DefaultLayers","TileService","TileLayer","Behavior","UI","Settings","lat","lng","pixelRatio","engineType","render","p2d","InfoControl","ZoomControl","MapSettingsControl","DistanceMeasurement","ZoomRectangle","ScaleBar","ServicesLabelControl","Hospitals","service","apikey","createDefaultLayers","getMapTileService","type","createTileLayer","lg","current","mapevents","MapEvents","disable","Feature","FRACTIONAL_ZOOM","fractionalZoom","alignment","addControl","getViewPort","resize","setState","dispose","removeObjects","getObjects","className","ref","Component","config","Search","suggestions","searchText","result","geocoderResults","centerPos","getCenter","params","apiKey","q","at","lang","politicalView","in","axios","get","then","res","data","items","style","background","placeholder","onChange","e","onChangeSearch","currentTarget","value","display","undefined","length","height","width","maxWidth","i","key","onClick","zoomTo","title","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.509ca452.chunk.js","sourcesContent":["export class HomeViewControl extends window.H.ui.Control {\n\n    constructor (options) {\n        super()\n        this.setAlignment(options.position)\n        this.map = options.map\n        this.center = options.center\n        this.zoom = options.zoom\n    }\n    renderInternal (el, doc) {\n        el.innerHTML = `\n            <div id=\"ctrl-homeview\">\n                <div class=\"H_btn H_el\">\n                    <svg class=\"H_icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><title>LUI-icon-pd-building_home-solid-24</title><g id=\"Layer_2\" data-name=\"Layer 2\"><g id=\"LUI-icon-pd-building_home-solid-24\"><g id=\"LUI-icon-pd-building_home-solid-24-2\" data-name=\"LUI-icon-pd-building_home-solid-24\"><rect width=\"24\" height=\"24\" fill=\"none\"/><path d=\"M11.17,2.36a1.16,1.16,0,0,1,1.66,0L22,11V22H15V15H9v7H2V11Z\"/></g></g></g></svg>\n                </div>\n            </div>\n        `\n\n        el.addEventListener ('click', this.setHomeView.bind(this), false)\n        \n        super.renderInternal(el, doc)\n    }\n    \n    setHomeView () {\n        this.map.setCenter(this.center)\n        this.map.setZoom(this.zoom)\n    }\n}","import React, { Component } from 'react'\nimport { HomeViewControl } from '../HomeViewControl'\n\n\nexport default class Map extends Component {\n\n  constructor(props) {\n    super (props)\n\n    this.mapRef = React.createRef()\n    \n    this.state = {\n      M: null,\n      H: null,\n    }\n  }\n\n    \n  async componentDidMount () {\n\n    const H = window.H\n\n    const M = {\n      Platform: {},\n      DefaultLayers: {},\n      Map: {},\n      TileService: {},\n      TileLayer: {},\n      Behavior: {},\n      UI: {},\n      Settings: {\n        center: { lat: 53.17592824927136, lng: 53.78906249999999  },\n        zoom: 4,\n        pixelRatio: window.pixelRatio || 1,\n        engineType: H.map.render.p2d\n      },\n      HomeViewControl: {},\n      InfoControl: {},\n      ZoomControl: {},\n      MapSettingsControl: {},\n      DistanceMeasurement: {},\n      ZoomRectangle: {},\n      ScaleBar: {},\n      ServicesLabelControl: {},\n      Hospitals: null,\n    }\n\n    // Initialize paltform\n    M.Platform = new H.service.Platform({ apikey: this.props.apikey })\n    M.DefaultLayers = M.Platform.createDefaultLayers()\n      \n    // Customize type of basemap\n    \n    M.TileService = M.Platform.getMapTileService({type: 'base'})\n    \n    M.TileLayer = M.TileService.createTileLayer('maptile', 'normal.day', 256, 'png8', {lg: \"rus\"})\n\n    M.Map = new H.Map( this.mapRef.current, M.TileLayer, M.Settings )\n    \n    // Behavior\n    M.Behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(M.Map))\n    M.Behavior.disable(H.mapevents.Behavior.Feature.FRACTIONAL_ZOOM)\n    \n    //  User Interface\n    M.UI = new H.ui.UI(M.Map)\n\n    // Zoom Control\n    M.ZoomControl = new H.ui.ZoomControl({fractionalZoom: false, alignment: \"right-middle\"})\n    M.UI.addControl('zoom', M.ZoomControl)\n\n    // Home Control\n    M.HomeViewControl = new HomeViewControl({\n      map: M.Map,\n      position:'right-middle',\n      center: {\n        lat: 59.17592824927136, lng: 53.78906249999999\n      },\n      zoom: 4\n    })\n    M.UI.addControl('home-control', M.HomeViewControl)\n\n\n    // DZoom rectange\n    M.ZoomRectangle = new H.ui.ZoomRectangle({alignment: \"right-middle\"})\n    M.UI.addControl('zoomrectange', M.ZoomRectangle)\n\n\n    // Resize map on window size change\n    window.addEventListener('resize', function() {\n        M.Map.getViewPort().resize()\n    })\n\n    window.map = M.Map\n    this.setState({ ...M, H: H })\n  }\n\n  componentWillUnmount() {\n      this.state.map.dispose()\n  }\n\n\n\n  render() {\n    const { Map } = this.state\n    \n    if (Map != null) {\n      Map.removeObjects(Map.getObjects())\n    }\n\n    return <div className=\"map\" ref={this.mapRef} />\n  }\n}","export const config = {\n    apikey: \"UjNuFEnljA0mA3LsZxwXIBf_MR0Dr9o2cUc-F1-8wHs\", // JavaScript API_KEY from Developer's account https://developer.here.com\n    token: \"AGNjdAWKRUiLFDvPtnVM-AA\",                      // ACCESS_TOKEN from HERE Data Hub Manage Tokens \n    spaces: {\n        german_hospitals: \"v6fbBS5z\",                      // SPACE_ID of the layer from HERE Data Hub Manage Tokens \n        german_warehouses: \"hoCxTKFb\"                      // SPACE_ID of the layer from HERE Data Hub Manage Tokens \n    }\n}","import React, { Component } from 'react'\nimport axios from 'axios'\n\nimport { config } from '../../assets/js/config'\nimport './style.css'\n\nexport class Search extends Component {\n    \n    constructor (props) {\n        super(props)\n\n        this.state = {\n            suggestions:[],\n            searchText:\"\",\n        }\n    }\n\n    zoomTo (result) {\n        let lat = result.position.lat\n        let lng = result.position.lng\n    \n        window.map.setCenter({lat: lat,lng: lng})\n        window.map.setZoom(18)\n    \n        this.setState({searchText: \"\", geocoderResults: [], suggestions:[]})\n    }\n\n    onChangeSearch(searchText){\n        this.setState({searchText: searchText})\n    \n        let centerPos = window.map.getCenter()\n\n        let baseUrl = \"https://autosuggest.search.hereapi.com/v1/autosuggest\"\n        \n        let params = {\n            apiKey: config.apikey,\n            q: searchText,\n            at: `${centerPos.lat},${centerPos.lng}`,\n            lang: \"ru\",\n            politicalView: \"RUS\",\n            in: \"countryCode:RUS\"\n        }\n        \n        if (searchText !== '') {\n            axios.get(baseUrl, {params: params}).then(res => {\n                this.setState({suggestions: res.data.items})\n            })  \n        }\n    }\n\n    render () {\n\n        let { \n            searchText, \n            suggestions, \n        } = this.state\n\n        return <div className=\"search-container\">\n            <lui-default-theme>\n                <div style={{background: \"#fff\"}}>\n                    <lui-search \n                        placeholder=\"Search\" >\n                        <input onChange={e => this.onChangeSearch(e.currentTarget.value)} type=\"text\" value={searchText}></input>  \n                    </lui-search>\n                        \n                </div>\n\n                <div className=\"suggestions-list\">\n                    <lui-menu  style={{display: (suggestions !== undefined && suggestions.length !== 0) ? \"block\" : \"none\", height: \"auto\", width: \"400px\", maxWidth: \"400px\"}}>\n                        {\n                            (suggestions !== undefined ? \n                                suggestions.map((result, i) => {\n                                    return  <lui-menuitem \n                                                key={i}  \n                                                onClick={() => this.zoomTo(result)}>\n                                                    {result.title}\n                                            </lui-menuitem>\n                                }) \n                                \n                                : \n\n                                <div></div>\n                            )\n                        }\n                    </lui-menu>\n                </div>\n\n            </lui-default-theme>\n        </div>   \n    } \n}","import React, { Component } from 'react'\n\n// Components\nimport Map from '../Map'\nimport { Search  } from '../Search'\n\n// Config\nimport { config } from '../../assets/js/config'\n\nexport default class App extends Component {\n\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      apikey: config.apikey,\n    }\n  }\n\n  render () {\n\n    let { apikey } = this.state\n\n    return (\n      <lui-default-theme>\n        <Map \n          apikey={apikey}\n        />\n        <Search />\n      </lui-default-theme>\n    )\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\n\nimport '@here/lui-init/dist/lui-init.min'\n// import '@here/lui-webfont/dist/lui-webfont.min'\nimport '@here/lui-layer-theme/dist/lui-layer-theme.min'\nimport '@here/lui-button/dist/lui-button.min'\nimport '@here/lui-navigation/dist/lui-navigation.min'\nimport '@here/lui-tabbar/dist/lui-tabbar.min'\nimport '@here/lui-checkbox/dist/lui-checkbox.min'\nimport '@here/lui-logo/dist/lui-logo.min'\nimport '@here/lui-spinner/dist/lui-spinner.min'\nimport '@here/lui-search/dist/lui-search.min'\nimport '@here/lui-menu/dist/lui-menu.min'\nimport '@here/lui-label/dist/lui-label.min'\nimport '@here/lui-radiobutton/dist/lui-radiobutton.min'\nimport '@here/lui-overlay/dist/lui-overlay.min'\nimport '@here/lui-notification/dist/lui-notification.min'\nimport '@here/lui-modal/dist/lui-modal.min'\n\nimport './assets/css/index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}