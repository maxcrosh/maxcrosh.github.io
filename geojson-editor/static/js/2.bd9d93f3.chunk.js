/*! For license information please see 2.bd9d93f3.chunk.js.LICENSE.txt */
(this["webpackJsonpgeojson-editor"]=this["webpackJsonpgeojson-editor"]||[]).push([[2],[function(t,e,n){"use strict";t.exports=n(23)},function(t,e,n){"use strict";t.exports=n(30)},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,module){(function(){var n,aa=[];function ba(t){return function(){return aa[t].apply(this,arguments)}}function ca(t,e){return aa[t]=e}function da(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function ea(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:da(t)}}var ha="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},ia="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ja(t,e){if(e){var n=ia;t=t.split(".");for(var i=0;i<t.length-1;i++){var r=t[i];r in n||(n[r]={}),n=n[r]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&ha(n,t,{configurable:!0,writable:!0,value:e})}}function ka(){ka=function(){},ia.Symbol||(ia.Symbol=la)}function ma(t,e){this.a=t,ha(this,"description",{configurable:!0,writable:!0,value:e})}ma.prototype.toString=function(){return this.a};var la=function(){var t=0;return function e(n){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new ma("jscomp_symbol_"+(n||"")+"_"+t++,n)}}(),qa;function na(){ka();var t=ia.Symbol.iterator;t||(t=ia.Symbol.iterator=ia.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&ha(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return oa(da(this))}}),na=function(){}}function oa(t){return na(),(t={next:t})[ia.Symbol.iterator]=function(){return this},t}function pa(t,e){na(),t instanceof String&&(t+="");var n=0,i={next:function(){if(n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}if(ja("Array.prototype.keys",(function(t){return t||function(){return pa(this,(function(t){return t}))}})),"function"==typeof Object.setPrototypeOf)qa=Object.setPrototypeOf;else{var ra;t:{var sa={Sg:!0},ta={};try{ta.__proto__=sa,ra=ta.Sg;break t}catch(a){}ra=!1}qa=ra?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var ua=qa;ja("Object.setPrototypeOf",(function(t){return t||ua})),ja("Promise",(function(t){function e(t){this.A=0,this.b=void 0,this.a=[];var e=this.c();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var r=ia.setTimeout;n.prototype.c=function(t){r(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(i){this.f(i)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.c=function(){function t(t){return function(i){n||(n=!0,t.call(e,i))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.f)}},e.prototype.m=function(t){if(t===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.aa(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.o(t):this.g(t)}},e.prototype.o=function(t){var e=void 0;try{e=t.then}catch(n){return void this.f(n)}"function"==typeof e?this.u(e,t):this.g(t)},e.prototype.f=function(t){this.i(2,t)},e.prototype.g=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.A)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.A);this.A=t,this.b=e,this.j()},e.prototype.j=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)o.b(this.a[t]);this.a=null}};var o=new n;return e.prototype.aa=function(t){var e=this.c();t.Hf(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.c();try{t.call(e,n.resolve,n.reject)}catch(i){n.reject(i)}},e.prototype.then=function(t,n){function i(t,e){return"function"==typeof t?function(e){try{r(t(e))}catch(n){o(n)}}:e}var r,o,s=new e((function(t,e){r=t,o=e}));return this.Hf(i(t,r),i(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Hf=function(t,e){function n(){switch(i.A){case 1:t(i.b);break;case 2:e(i.b);break;default:throw Error("Unexpected state: "+i.A)}}var i=this;null==this.a?o.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=ea(t),o=r.next();!o.done;o=r.next())i(o.value).Hf(e,n)}))},e.all=function(t){var n=ea(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Hf(o(s.length-1),e),r=n.next()}while(!r.done)}))},e})),ja("Array.prototype.fill",(function(t){return t||function(t,e,n){var i=this.length||0;for(0>e&&(e=Math.max(0,i+e)),(null==n||n>i)&&(n=i),0>(n=Number(n))&&(n=Math.max(0,i+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}}));var va="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};ja("Object.assign",(function(t){return t||va})),ja("Math.log2",(function(t){return t||function(t){return Math.log(t)/Math.LN2}}));var xa=this||self;function ya(t,e,n){t=t.split("."),n=n||xa,t[0]in n||"undefined"==typeof n.execScript||n.execScript("var "+t[0]);for(var i;t.length&&(i=t.shift());)t.length||void 0===e?n=n[i]&&n[i]!==Object.prototype[i]?n[i]:n[i]={}:n[i]=e}function za(){}function Aa(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function Ba(t){var e=Aa(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Ca(t){return"function"==Aa(t)}function Da(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ea="closure_uid_"+(1e9*Math.random()>>>0),Fa=0;function Ga(t,e,n){return t.call.apply(t.bind,arguments)}function Ha(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ia(t,e,n){return(Ia=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ga:Ha).apply(null,arguments)}function Ja(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function t(t,e){ya(t,e,void 0)}function u(t,e){function n(){}n.prototype=e.prototype,t.l=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.up=function(t,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.prototype[n].apply(t,r)}}function Ka(t){if(Error.captureStackTrace)Error.captureStackTrace(this,Ka);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function La(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Ma(){this.b=this.a=null}u(Ka,Error),Ka.prototype.name="CustomError",La.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t},La.prototype.put=function(t){this.f(t),100>this.b&&(this.b++,t.next=this.a,this.a=t)};var Oa=new La((function(){return new Na}),(function(t){t.reset()}));function Na(){this.next=this.b=this.a=null}Ma.prototype.add=function(t,e){var n=Oa.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ma.prototype.remove=function(){var t=null;return this.a&&(t=this.a,this.a=this.a.next,this.a||(this.b=null),t.next=null),t},Na.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Na.prototype.reset=function(){this.next=this.b=this.a=null};var Pa=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Qa(t,e){return-1!=t.indexOf(e)}function Ra(t,e){return t<e?-1:t>e?1:0}function Sa(t,e){for(var n in t)if(e.call(void 0,t[n],n,t))return!0;return!1}function Ta(t){for(var e in t)return!1;return!0}function Ua(t){var e,n={};for(e in t)n[e]=t[e];return n}var Va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Xa;function Wa(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<Va.length;o++)n=Va[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}t:{var Ya=xa.navigator;if(Ya){var Za=Ya.userAgent;if(Za){Xa=Za;break t}}Xa=""}function $a(t){return Qa(Xa,t)}var ab=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function bb(t,e){this.b=t===cb&&e||"",this.a=db}var db={},cb={},eb=new bb(cb,"");function fb(t,e){this.b=t===gb&&e||"",this.a=hb}fb.prototype.wc=function(){return 1};var hb={},gb={};function ib(){this.b="",this.c=jb,this.a=null}function kb(){var t=lb;return t instanceof ib&&t.constructor===ib&&t.c===jb?t.b:(Aa(t),"type_error:SafeHtml")}ib.prototype.wc=function(){return this.a};var jb={};function mb(t){var e=new ib;return e.b=t,e.a=0,e}mb("<!DOCTYPE html>");var lb=mb("");function nb(t){var e=new fb(gb,eb instanceof bb&&eb.constructor===bb&&eb.a===db?eb.b:"type_error:Const");e instanceof fb&&e.constructor===fb&&e.a===hb?e=e.b:(Aa(e),e="type_error:TrustedResourceUrl"),t.src=e.toString()}function ob(t){return ob[" "](t),t}function pb(t,e){var n=qb;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}mb("<br>"),ob[" "]=za;var rb=$a("Opera"),tb=$a("Trident")||$a("MSIE"),ub=$a("Edge"),vb=$a("Gecko")&&!(Qa(Xa.toLowerCase(),"webkit")&&!$a("Edge"))&&!($a("Trident")||$a("MSIE"))&&!$a("Edge"),wb=Qa(Xa.toLowerCase(),"webkit")&&!$a("Edge"),yb;function xb(){var t=xa.document;return t?t.documentMode:void 0}t:{var zb="",Ab=function(){var t=Xa;return vb?/rv:([^\);]+)(\)|;)/.exec(t):ub?/Edge\/([\d\.]+)/.exec(t):tb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):wb?/WebKit\/(\S+)/.exec(t):rb?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Ab&&(zb=Ab?Ab[1]:""),tb){var Bb=xb();if(null!=Bb&&Bb>parseFloat(zb)){yb=String(Bb);break t}}yb=zb}var qb={},Db,Gb,Jb;function Cb(t){return pb(t,(function(){for(var e=0,n=Pa(String(yb)).split("."),i=Pa(String(t)).split("."),r=Math.max(n.length,i.length),o=0;0==e&&o<r;o++){var s=n[o]||"",a=i[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Ra(e=0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Ra(0==s[2].length,0==a[2].length)||Ra(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}function Eb(t){var e=document;return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function Fb(t){xa.setTimeout((function(){throw t}),0)}function Hb(){var t=xa.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!$a("Presto")&&(t=function(){var t=Eb("IFRAME");t.style.display="none",nb(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(kb()),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=Ia((function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),"undefined"!==typeof t&&!$a("Trident")&&!$a("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).tj;n.tj=null,t()}},function(t){i.next={tj:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in Eb("SCRIPT")?function(t){var e=Eb("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){xa.setTimeout(t,0)}}function Ib(t,e){Jb||Kb(),Lb||(Jb(),Lb=!0),Mb.add(t,e)}function Kb(){if(xa.Promise&&xa.Promise.resolve){var t=xa.Promise.resolve(void 0);Jb=function(){t.then(Nb)}}else Jb=function(){var t=Nb;!Ca(xa.setImmediate)||xa.Window&&xa.Window.prototype&&!$a("Edge")&&xa.Window.prototype.setImmediate==xa.setImmediate?(Gb||(Gb=Hb()),Gb(t)):xa.setImmediate(t)}}Db=xa.document&&tb?xb():void 0,!vb&&!tb||tb&&9<=Number(Db)||vb&&Cb("1.9.1"),tb&&Cb("9");var Lb=!1,Mb=new Ma;function Nb(){for(var t;t=Mb.remove();){try{t.a.call(t.b)}catch(e){Fb(e)}Oa.put(t)}Lb=!1}function Ob(t){if(this.A=Pb,this.i=void 0,this.c=this.a=this.b=null,this.f=this.g=!1,t!=za)try{var e=this;t.call(void 0,(function(t){Qb(e,Rb,t)}),(function(t){Qb(e,Sb,t)}))}catch(n){Qb(this,Sb,n)}}var Pb=0,Rb=2,Sb=3;function Ub(){this.next=this.c=this.b=this.f=this.a=null,this.g=!1}Ub.prototype.reset=function(){this.c=this.b=this.f=this.a=null,this.g=!1};var Vb=new La((function(){return new Ub}),(function(t){t.reset()}));function Wb(t,e,n){var i=Vb.get();return i.f=t,i.b=e,i.c=n,i}function Xb(t){if(t instanceof Ob)return t;var e=new Ob(za);return Qb(e,Rb,t),e}function Yb(t){return new Ob((function(e,n){n(t)}))}function Zb(){var t,e;return new $b(new Ob((function(n,i){t=n,e=i})),t,e)}function cc(t,e){if(t.A==Pb)if(t.b){var n=t.b;if(n.a){for(var i=0,r=null,o=null,s=n.a;s&&(s.g||(i++,s.a==t&&(r=s),!(r&&1<i)));s=s.next)r||(o=s);r&&(n.A==Pb&&1==i?cc(n,e):(o?((i=o).next==n.c&&(n.c=i),i.next=i.next.next):ec(n),fc(n,r,Sb,e)))}t.b=null}else Qb(t,Sb,e)}function gc(t,e){t.a||t.A!=Rb&&t.A!=Sb||hc(t),t.c?t.c.next=e:t.a=e,t.c=e}function ac(t,e,n,i){var r=Wb(null,null,null);return r.a=new Ob((function(t,o){r.f=e?function(n){try{var r=e.call(i,n);t(r)}catch(s){o(s)}}:t,r.b=n?function(e){try{var r=n.call(i,e);void 0===r&&e instanceof bc?o(e):t(r)}catch(s){o(s)}}:o})),r.a.b=t,gc(t,r),r.a}function Qb(t,e,n){if(t.A==Pb){t===n&&(e=Sb,n=new TypeError("Promise cannot resolve to itself")),t.A=1;t:{var i=n,r=t.o,o=t.m;if(i instanceof Ob){gc(i,Wb(r||za,o||null,t));var s=!0}else{if(i)try{var a=!!i.$goog_Thenable}catch(c){a=!1}else a=!1;if(a)i.then(r,o,t),s=!0;else{if(Da(i))try{var l=i.then;if(Ca(l)){ic(i,l,r,o,t),s=!0;break t}}catch(c){o.call(t,c),s=!0;break t}s=!1}}}s||(t.i=n,t.A=e,t.b=null,hc(t),e!=Sb||n instanceof bc||jc(t,n))}}function ic(t,e,n,i,r){function o(t){s||(s=!0,i.call(r,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(r,t))}),o)}catch(a){o(a)}}function hc(t){t.g||(t.g=!0,Ib(t.j,t))}function ec(t){var e=null;return t.a&&(e=t.a,t.a=e.next,e.next=null),t.a||(t.c=null),e}function fc(t,e,n,i){if(n==Sb&&e.b&&!e.g)for(;t&&t.f;t=t.b)t.f=!1;if(e.a)e.a.b=null,kc(e,n,i);else try{e.g?e.f.call(e.c):kc(e,n,i)}catch(r){lc.call(null,r)}Vb.put(e)}function kc(t,e,n){e==Rb?t.f.call(t.c,n):t.b&&t.b.call(t.c,n)}function jc(t,e){t.f=!0,Ib((function(){t.f&&lc.call(null,e)}))}Ob.prototype.then=function(t,e,n){return ac(this,Ca(t)?t:null,Ca(e)?e:null,n)},Ob.prototype.$goog_Thenable=!0,Ob.prototype.cancel=function(t){if(this.A==Pb){var e=new bc(t);Ib((function(){cc(this,e)}),this)}},Ob.prototype.o=function(t){this.A=Pb,Qb(this,Rb,t)},Ob.prototype.m=function(t){this.A=Pb,Qb(this,Sb,t)},Ob.prototype.j=function(){for(var t;t=ec(this);)fc(this,t,this.A,this.i);this.g=!1};var lc=Fb;function bc(t){Ka.call(this,t)}function $b(t,e,n){this.Zk=t,this.resolve=e,this.reject=n}u(bc,Ka),bc.prototype.name="cancel";var x=this;function mc(){return Object.create(y,void 0)}var A=Ia,nc=String,oc=x.Object.freeze||function(t){return t};function pc(t){for(var e,n=Object.keys(t),i=n.length;i--;)Da(e=t[n[i]])&&pc(e);return oc(t)}function qc(t){var e=Aa(t);if("object"==e||"array"==e){if(Ca(t.clone))return t.clone();for(var n in e="array"==e?[]:{},t)t.hasOwnProperty(n)&&(e[n]=qc(t[n]));return e}return t}var B=self.eval("undefined"),y=self.eval("null");function rc(t,e){return nc(t).split(e!==B?e:" ")}var sc="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(t,e,n,i,r){if(!(e=t instanceof e)&&n)throw new D(n,i,tc(r)?r:t);return e}function uc(t,e){if(!0===(C(t,e)&&t.constructor===e))throw new TypeError("Illegal constructor "+vc(e))}function wc(t,e,n,i,r){if(!(e=xc(t)===e)&&n)throw new D(n,i,tc(r)?r:t);return e}function yc(t,e,n,i){return wc(t,"Array",e,n,i)}function tc(t){return t!==B}function zc(t){return"string"===typeof t}t("H.lang.isArray",yc),t("H.lang.isString",zc);var Ac=parseInt,Bc=parseFloat,E=isNaN;function Cc(t){return t===+t}function Dc(t){return!E(+t)}function xc(t){var e=Object[sc[0]][sc[6]].call(t).match(/^\[object (\w+)\]$/);return e?e[1]:typeof t}t("H.lang.isNumber",Cc),t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(t){return"number"===typeof t&&0===t%1});var Ec=[];function Fc(t){0>Ec.indexOf(t)&&Ec.push(t)}function vc(t,e,n,i){var r,o="",s=2>arguments.length;return s&&(e={H:x.H},n="",i=Ec.slice()),Gc(e,!0,(function(e,s){try{if(s=Hc(e,r=e[s]),!(Da(r)&&r.window===r&&r.self===r||Da(r)&&0<r.nodeType&&Ca(r.cloneNode))&&Da(r)){if(r===t)return o=n+"."+s,!0;if(0>i.indexOf(r)&&(i.push(r),o=vc(t,r,n+"."+s,i)))return!0}}catch(a){}})),s&&(o=o?o.substr(1).replace("."+sc[0]+".","#"):"~"+(Ca(t)?Ic(t)+"()":xc(t))),o}function Hc(t,e){var n=[];return Gc(t,!1,(function(t,i){t[i]===e&&n.push(i)})),n.sort(Jc)[0]}function Jc(t,e){return e.length-t.length}Fc(Ec);var Kc=Object[sc[0]][sc[2]];function Gc(t,e,n){var i;if(t){for(r in t)if((!e||Kc.call(t,r))&&n(t,r,!0))return;for(i=sc.length;i--;){var r=sc[i];if((!e||Kc.call(t,r))&&n(t,r,!1))break}}}function Ic(t){return(t=/^\s*function ([^\( ]+)/.exec(t))?t[1]:"anonymous"}function Lc(t,e,n){n[e]="#"+e}var Mc=!!x.__karma__;function Nc(){throw Error("unimplemented method")}function Oc(t,e){"status"in(e=e||{})&&(this.status=+e.status),"statusText"in e&&(this.statusText=e.statusText),this.ok=200<=this.status&&300>this.status,this.bodyUsed=!1,t?"string"===typeof t?this.c=t:ArrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||t.buffer)?this.a=t.buffer||t:Blob.prototype.isPrototypeOf(t)&&(this.b=t):this.c=""}function Pc(t){if(t.bodyUsed)return Yb(new TypeError("Already read"));t.bodyUsed=!0}function Qc(t){var e=new FileReader;return e.readAsText(t),new Ob((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function Rc(t,e,n){var i,r,o,s=n&&n.headers||{},a={},l=this;if(!Ca(e))throw new D(Rc,1,"function required");Wa(s,Uc.headers,s),Wa(a,Uc,n||{}),a.headers=s,this.b=e,this.T=i=new XMLHttpRequest,e=a.method;try{for(r in i.open(e,t,!0),s)s.hasOwnProperty(r)&&(o=s[r])&&i.setRequestHeader(r,o);i.withCredentials=!!a.withCredentials,function(){var t=A(l.a,l),e=+a.timeout||0;Sc?(Tc(l,"timeout",t),i.timeout=e):e&&(l.c=setTimeout((function(){i.abort(),l.a({type:"timeout"})}),e)),Tc(l,"error",t),Tc(l,"load",t),i.send(a.data)}()}catch(c){this.a({type:"cors"})}}t("H.net.Response",Oc),Oc.prototype.type="default",Oc.prototype.type=Oc.prototype.type,Oc.prototype.status=200,Oc.prototype.status=Oc.prototype.status,Oc.prototype.statusText="OK",Oc.prototype.statusText=Oc.prototype.statusText,Oc.error=function(){return Oc.a||(Oc.a=new Oc(null,{status:0,statusText:""}),Oc.a.type="error"),Oc.a},Oc.error=Oc.error,Oc.prototype.text=function(){var t=Pc(this);if(!t)if(this.c)t=Xb(this.c);else if(this.a){var e,n=(t=new Uint8Array(this.a)).length,i=Array(n);for(e=0;e<n;e++)i[e]=String.fromCharCode(t[e]);t=Xb(i.join(""))}else t=this.b?Qc(this.b):Yb("Unsupported response body");return t},Oc.prototype.json=function(){return this.text().then(x.JSON.parse)},Oc.prototype.blob=function(){var t,e=Pc(this);return e||(this.b?t=this.b:this.a&&(t=new Blob([this.a],{type:"application/octet-stream"}))),e||Xb(t)},Oc.prototype.arrayBuffer=function(){return this.a?Pc(this)||Xb(this.a.slice(0)):this.blob().then(Oc.b)},Oc.b=function(t){var e=new FileReader;return e.readAsArrayBuffer(t),new Ob((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))},!Mc&&x.Response&&x.Response.error&&(Oc=x.Response,Fc(Oc.prototype)),t("H.net.Xhr",Rc);var Uc={method:"GET",headers:{},data:null},Vc="withCredentials"in new XMLHttpRequest,Sc="timeout"in new XMLHttpRequest,Yc,$c,ad,cd,dd;function Tc(t,e,n){Vc?t.T.addEventListener(e,n):t.T["on"+e]=n}function Wc(t,e,n){Vc?t.T.removeEventListener(e,n):t.T["on"+e]=null}function Xc(t,e){var n=[];return t&&n.push(vc(t)),1<arguments.length&&n.push(""+e),n=Error(n.join(" ")),Object.setPrototypeOf(n,Xc.prototype),n}function D(t,e,n){var i=arguments.length;if((e=e!==B?+e:e)!==B){var r=(r=/^.*?\(([^\)]+)/.exec((""+t).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?rc(r[1].replace(/\s+/g,""),","):[];r.forEach(Lc),r=r[e]||"#"+e}var o=t?vc(t):"";return i=2<i?nc(n):"",(r||i)&&(o+=" (Argument "+(r||"")+(i?" "+i:"")+")"),i=Error(o),Object.setPrototypeOf(i,D.prototype),i}function bd(){if(!zc("STATIC_DB"))throw new D(this.constructor,0);if(this.g=x.indexedDB||x.mp||x.Co||x.Do,!this.g)throw new Xc(this.constructor,"This browser does not support IndexedDB");this.a=[],this.c=[],this.pi=A(this.pi,this)}function jd(t,e,n){if(t.b)t.a?(t.a.push(e),n&&t.c.push(n)):t.f?n&&n(t.f):e(t.b.result);else{t.b=t.g.open(kd+"STATIC_DB",1),t.b.onupgradeneeded=t.pi;var i=t.b.onerror=function(){clearTimeout(t.i),t.f=this.error,t.c.forEach((function(e){e(t.f)})),t.a=t.c=null};t.i=setTimeout((function(){i.call({error:Error("DbOpenTimeoutError")})}),500),t.b.onsuccess=function(){clearTimeout(t.i),t.a?(t.a.forEach((function(t){t(this.result)}),this),t.a=t.c=null):(t.b=t.f=null,t.a=[],t.c=[])},t.a.push(e),n&&t.c.push(n)}}function fd(t,e,n){jd(t,(function(t){t=t.transaction(["data"],"readwrite"),e(t.objectStore("data"))}),n)}function gd(t,e,n){e&&(t.onsuccess=function(){e(this.result)}),n&&(t.onerror=function(){n(this.error)})}function ed(t){var e=Object.prototype.toString.call(t);return"[object Blob]"===e||"[object ArrayBuffer]"===e||zc(t)||Da(t)}function ld(){return cd||(cd=new bd),cd}Rc.prototype.abort=function(){this.T&&(this.T.abort(),this.T&&this.a({type:"abort"}))},Rc.prototype.abort=Rc.prototype.abort,Rc.prototype.a=function(t){var e,n,i=t.type;t=this.T,this.c&&clearTimeout(this.c),"load"===i?t instanceof XMLHttpRequest&&200!==t.status&&(e="network"):e=4===t.readyState&&0===t.status&&"error"==i?"cors":"error"!=i?i:"network",Wc(this,"timeout",i=this.a),Wc(this,"error",i),Wc(this,"load",i),n=0===t.status||e&&"network"!==e?Oc.error():new Oc(t.responseText||null,t),e=this.b,delete this.a,delete this.b,delete this.T,e(n)},u(Xc,Error),t("H.lang.IllegalOperationError",Xc),Xc.prototype.name="IllegalOperationError",u(D,Error),t("H.lang.InvalidArgumentError",D),D.prototype.name="InvalidArgumentError",n=bd.prototype,n.put=function(t,e,n,i){if(!zc(t)&&!Cc(t))throw new D(this.put,0);if(!ed(e))throw new D(this.put,1);fd(this,(function(r){gd(r.put(e,t),n,i)}),i)},n.get=function(t,e,n){var i;if(!zc(t)&&!Cc(t))throw new D(this.get,0);if(!Ca(e))throw new D(this.get,1);return fd(this,(function(r){gd(i=r.get(t),e,n)}),n),{cancel:function(){i&&(i.onsuccess=hd)}}},n.remove=function(t,e,n){if(!zc(t)&&!Cc(t))throw new D(this.remove,0);fd(this,(function(i){gd(i.delete(t),e,n)}),n)},n.clear=function(t,e){fd(this,(function(n){gd(n.clear(),t,e)}),e)},n.pi=function(){var t=this.b.result;t.objectStoreNames.contains("data")||t.createObjectStore("data")},t("H.util.IndexedDBStorage.getInstance",ld);var kd="H_";function md(){if(!tc(dd))if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)dd=!1;else{var t=x.indexedDB||x.mp||x.Co||x.Do,e=kd+"TEST_DB";try{var n=t&&t.open(e,1)}catch(i){}dd=!!n&&null===n.onupgradeneeded,n&&t.deleteDatabase&&t.deleteDatabase(e)}return dd}function nd(){0!=od&&(pd[this[Ea]||(this[Ea]=++Fa)]=this),this.Kd=this.Kd,this.rb=this.rb}t("H.util.IndexedDBStorage.isSupported",md);var od=0,pd={};function qd(t){t&&"function"==typeof t.B&&t.B()}function rd(t,e){this.type=t,this.currentTarget=this.target=e,this.f=this.a=!1,this.il=!0}function sd(t,e,n){sd.l.constructor.call(this,t,n),this.data=e}function td(t,e,n){td.l.constructor.call(this,t,n),this.message=e}nd.prototype.Kd=!1,nd.prototype.B=function(){if(!this.Kd&&(this.Kd=!0,this.s(),0!=od)){var t=this[Ea]||(this[Ea]=++Fa);if(0!=od&&this.rb&&0<this.rb.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete pd[t]}},nd.prototype.xb=function(t,e){this.Kd?void 0!==e?t.call(e):t():(this.rb||(this.rb=[]),this.rb.push(void 0!==e?Ia(t,e):t))},nd.prototype.s=function(){if(this.rb)for(;this.rb.length;)this.rb.shift()()},rd.prototype.stopPropagation=function(){this.a=!0},rd.prototype.preventDefault=function(){this.f=!0,this.il=!1},t("H.util.Event",rd),rd.prototype.stopPropagation=rd.prototype.stopPropagation,rd.prototype.stopPropagation=rd.prototype.stopPropagation,rd.prototype.CAPTURING_PHASE=1,rd.prototype.CAPTURING_PHASE=rd.prototype.CAPTURING_PHASE,rd.prototype.AT_TARGET=2,rd.prototype.AT_TARGET=rd.prototype.AT_TARGET,rd.prototype.BUBBLING_PHASE=3,rd.prototype.BUBBLING_PHASE=rd.prototype.BUBBLING_PHASE,rd.prototype.eventPhase=0,rd.prototype.eventPhase=rd.prototype.eventPhase,u(sd,rd),t("H.util.DataEvent",sd),u(td,rd),t("H.util.ErrorEvent",td);var ud=Math,vd=ud.min,wd=ud.max,xd=ud.round,yd=ud.floor,zd=ud.ceil,Ad=ud.abs,Bd=ud.log,Cd=ud.sqrt,Dd=ud.pow,Ed=ud.exp,Fd=ud.sin,Gd=ud.asin,Hd=ud.cos,Id=ud.tan,Jd=ud.atan,Kd=ud.atan2,Ld=ud.LN2,Md=ud.PI,Nd=Md/2,Od=Md/4,Pd=2*Md,Qd=3*Md,Rd=Md/180,Sd=180/Md,Td=1/0,Ud=Dd(-2,53),Vd=Vd||function(t){return Bd(t)/Ld};function Wd(t,e){var n;return 0>(n=t%e)===0>e?n:n+e}function Xd(t,e,n){return e-=n=n||0,(t-=n)-yd(t/e)*e+n}function Yd(t,e,n){return t>n?n:t<e?e:t}function Zd(t,e,n,i){return i||(i=0),e<n?t>=e-i&&t<=n+i:t>=n-i&&t<=e+i}function $d(t,e,n,i,r,o){return Cd(Dd((t-r)*(i-o)-(e-o)*(n-r),2)/(Dd(n-r,2)+Dd(i-o,2)))}t("H.math.normalize",Xd),t("H.math.clamp",Yd);var ae={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function be(t,e,n,i,r,o){var s=n.length,a=s,l=n[0],c=0,u=0,h=0;i=i/2||0;var f=o||2;o=f*(r?0:1)+1;for(var p=f-2;1!=c&&a>o;){a-=p;var d=n[--a];f=n[--a];var g=n[a?a-p-1:(s+(a-p-1))%s],m=n[a?a-p-2:(s+(a-p-2))%s];f>=t-i&&f<=t+i&&d>=e-i&&d<=e+i||m>=t-i&&m<=t+i&&g>=e-i&&g<=e+i?c=1:c||f!==t?!c&&Zd(t,f,m,i)&&((f<t&&m>t||f>t&&m<t)&&(u+=(l=d+(t-f)/(m-f)*(g-d))>e,h+=l<e),c=Zd(e,d,g,i)&&$d(t,e,f,d,m,g)<=i?2:0):(m===t&&(d<e&&g>e||d>e&&g<e)||(l<=t&&m>t||l>=t&&m<t)&&(d>=e?++u:++h),c=Zd(e,d,g,i)&&$d(t,e,f,d,m,g)<=i?2:0),l=f}return!c&&r&&0!==h&&0!==u%2&&(c=3),c}function ce(t,e){return be(t.x,t.y,e,0,!0)!==ae.NONE}function de(t){for(var e=t.length,n=new Float64Array(2*e),i=e&&tc(t[0].x);e--;){var r=t[e],o=e<<1;n[o]=i?r.x:r[0],n[o+1]=i?r.y:r[1]}return n}function ee(t,e,n){this.type=t,this.data=e,this.f=Zb(),this.resolve=A(this.resolve,this),this.reject=A(this.reject,this),this.priority=fe,n!==B&&(this.priority=n),this.xh().add(this)}t("H.math.CoverType",ae),t("H.math.isPointInsidePolygon",ce),t("H.math.flatten",de);var fe=1,ge={qp:0,tp:fe,pp:2};function he(t){var e;for(e in this.a={},ge)this.a[ge[e]]=[];this.sf=t,this.sf.addEventListener("allocatable",A(this.b,this))}n=ee.prototype,n.then=function(t,e,n){return this.f.Zk.then(t,e,n)},n.resolve=function(t){this.me=3,this.f.resolve(t)},n.reject=function(t){this.me=5,this.f.reject(t)},n.me=0,n.cancel=function(){3>this.me&&(this.Ge(),this.xh().remove(this),this.me=4)},t("H.util.JobManager",he);var ie=Object.keys(ge).map((function(t){return ge[t]})).sort().reverse();function je(t,e,n){var i=[],r=arguments.length;return t&&i.push(vc(t)),1<r&&(r=2<r&&yc(n)?" out of ["+n[0]+"..."+n[1]+"]":"",i.push("("+e+r+")")),i=Error(i.join(" ")),Object.setPrototypeOf(i,je.prototype),i}he.prototype.add=function(t){C(t,ee,this.add,0),this.a[t.priority].push(t),this.b()},he.prototype.contains=function(t){return-1<this.a[t.priority].indexOf(t)},he.prototype.remove=function(t){var e=t.priority,n=this.a[e].indexOf(t);return-1<n?(this.a[e].splice(n,1),!0):(t.cj&&this.sf.Pf(t.cj),!1)},he.prototype.b=function(){ie.forEach((function(t){this.a[t]=this.a[t].filter((function(t){var e;if((e=this.sf.Xg(t))===y)return!0;var n=A(this.sf.Pf,this.sf,e,t);t.cj=e,t.then(n,n),t.me=t.Ij(e)?1:5}),this)}),this)},u(je,Error),t("H.lang.OutOfRangeError",je),je.prototype.name="OutOfRangeError";var ke="closure_listenable_"+(1e6*Math.random()|0);function le(t){return!(!t||!t[ke])}var me=0;function ne(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.dg=r,this.key=++me,this.pe=this.Gf=!1}function oe(t){t.pe=!0,t.listener=null,t.proxy=null,t.src=null,t.dg=null}function pe(t){this.src=t,this.a={},this.b=0}function re(t,e){var n=e.type;if(!(n in t.a))return!1;var i,r=t.a[n],o=ab(r,e);return(i=0<=o)&&Array.prototype.splice.call(r,o,1),i&&(oe(e),0==t.a[n].length&&(delete t.a[n],t.b--)),i}function se(t,e){var n=void 0!==e,i=n?e.toString():"";return Sa(t.a,(function(t){for(var e=0;e<t.length;++e)if(!n||t[e].type==i)return!0;return!1}))}function qe(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.pe&&o.listener==e&&o.capture==!!n&&o.dg==i)return r}return-1}pe.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=qe(t,e,i,r);return-1<s?(e=t[s],n||(e.Gf=!1)):((e=new ne(e,this.src,o,!!i,r)).Gf=n,t.push(e)),e},pe.prototype.remove=function(t,e,n,i){if(!((t=t.toString())in this.a))return!1;var r=this.a[t];return-1<(e=qe(r,e,n,i))&&(oe(r[e]),Array.prototype.splice.call(r,e,1),0==r.length&&(delete this.a[t],this.b--),!0)},pe.prototype.pa=function(t){t=t&&t.toString();var e,n=0;for(e in this.a)if(!t||e==t){for(var i=this.a[e],r=0;r<i.length;r++)++n,oe(i[r]);delete this.a[e],this.b--}return n};var te=!tb||9<=Number(Db),ue=tb&&!Cb("9");!wb||Cb("528"),vb&&Cb("1.9b")||tb&&Cb("8")||rb&&Cb("9.5")||wb&&Cb("528"),vb&&!Cb("8")||tb&&Cb("9");var ve=function(){if(!xa.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{xa.addEventListener("test",za,e),xa.removeEventListener("test",za,e)}catch(n){}return t}();function we(t,e){if(rd.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.b=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=e,e=t.relatedTarget){if(vb){t:{try{ob(e.nodeName);var r=!0;break t}catch(o){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:xe[t.pointerType]||"",this.b=t,t.defaultPrevented&&this.preventDefault()}}u(we,rd);var xe={2:"touch",3:"pen",4:"mouse"};we.prototype.stopPropagation=function(){we.l.stopPropagation.call(this),this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0},we.prototype.preventDefault=function(){we.l.preventDefault.call(this);var t=this.b;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ue)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ye="closure_lm_"+(1e6*Math.random()|0),ze={},Ae=0;function Be(t,e,n,i,r){if(i&&i.once)return Ce(t,e,n,i,r);if("array"==Aa(e)){for(var o=0;o<e.length;o++)Be(t,e[o],n,i,r);return null}return n=De(n),le(t)?t.aa.add(String(e),n,!1,Da(i)?!!i.capture:!!i,r):Ee(t,e,n,!1,i,r)}function Ee(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var s=Da(r)?!!r.capture:!!r,a=Fe(t);if(a||(t[ye]=a=new pe(t)),(n=a.add(e,n,i,s,o)).proxy)return n;if(i=Ge(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)ve||(r=s),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(He(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return Ae++,n}function Ge(){var t=Ie,e=te?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}function Ce(t,e,n,i,r){if("array"==Aa(e)){for(var o=0;o<e.length;o++)Ce(t,e[o],n,i,r);return null}return n=De(n),le(t)?t.aa.add(String(e),n,!0,Da(i)?!!i.capture:!!i,r):Ee(t,e,n,!0,i,r)}function Je(t,e,n,i,r){if("array"==Aa(e)){for(var o=0;o<e.length;o++)Je(t,e[o],n,i,r);return null}return i=Da(i)?!!i.capture:!!i,n=De(n),le(t)?t.aa.remove(String(e),n,i,r):!!t&&(!!((t=Fe(t))&&(e=t.a[e.toString()],t=-1,e&&(t=qe(e,n,i,r)),n=-1<t?e[t]:null))&&Ke(n))}function Ke(t){if("number"===typeof t||!t||t.pe)return!1;var e=t.src;if(le(e))return re(e.aa,t);var n=t.type,i=t.proxy;return e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(He(n),i):e.addListener&&e.removeListener&&e.removeListener(i),Ae--,(n=Fe(e))?(re(n,t),0==n.b&&(n.src=null,e[ye]=null)):oe(t),!0}function He(t){return t in ze?ze[t]:ze[t]="on"+t}function Le(t,e,n,i){var r=!0;if((t=Fe(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.pe&&(o=Me(o,i),r=r&&!1!==o)}return r}function Me(t,e){var n=t.listener,i=t.dg||t.src;return t.Gf&&Ke(t),n.call(i,e)}function Ie(t,e){if(t.pe)return!0;if(!te){if(!e)t:{e=["window","event"];for(var n=xa,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}if(e=new we(i=e,this),n=!0,!(0>i.keyCode||void 0!=i.returnValue)){t:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(s){r=!0}(r||void 0==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=e.currentTarget;r;r=r.parentNode)i.push(r);for(t=t.type,r=i.length-1;!e.a&&0<=r;r--){e.currentTarget=i[r];var o=Le(i[r],t,!0,e);n=n&&o}for(r=0;!e.a&&r<i.length;r++)e.currentTarget=i[r],o=Le(i[r],t,!1,e),n=n&&o}return n}return Me(t,new we(e,this))}function Fe(t){return(t=t[ye])instanceof pe?t:null}var Ne="__closure_events_fn_"+(1e9*Math.random()>>>0);function De(t){return Ca(t)?t:(t[Ne]||(t[Ne]=function(e){return t.handleEvent(e)}),t[Ne])}function F(){nd.call(this),this.aa=new pe(this),this.Xn=this,this.ih=null}function Pe(t){var e=(t=t||{}).callback;this.a=t.label,Ca(e)&&(this.callback=e),this.b=!!t.disabled,Pe.l.constructor.call(this)}u(F,nd),F.prototype[ke]=!0,n=F.prototype,n.Pb=function(){return this.ih},n.ka=function(t){this.ih=t},n.addEventListener=function(t,e,n,i){Be(this,t,e,n,i)},n.removeEventListener=function(t,e,n,i){Je(this,t,e,n,i)},n.dispatchEvent=function(t){var e,n=this.Pb();if(n)for(e=[];n;n=n.Pb())e.push(n);n=this.Xn;var i=t.type||t;if("string"===typeof t)t=new rd(t,n);else if(t instanceof rd)t.target=t.target||n;else{var r=t;Wa(t=new rd(i,n),r)}if(r=!0,e)for(var o=e.length-1;!t.a&&0<=o;o--){var s=t.currentTarget=e[o];r=s.sd(i,!0,t)&&r}if(t.a||(r=(s=t.currentTarget=n).sd(i,!0,t)&&r,t.a||(r=s.sd(i,!1,t)&&r)),e)for(o=0;!t.a&&o<e.length;o++)r=(s=t.currentTarget=e[o]).sd(i,!1,t)&&r;return r},n.s=function(){F.l.s.call(this),this.aa&&this.aa.pa(void 0),this.ih=null},n.sd=function(t,e,n){if(!(t=this.aa.a[String(t)]))return!0;t=t.concat();for(var i=!0,r=0;r<t.length;++r){var o=t[r];if(o&&!o.pe&&o.capture==e){var s=o.listener,a=o.dg||o.src;o.Gf&&re(this.aa,o),i=!1!==s.call(a,n)&&i}}return i&&0!=n.il},t("H.util.EventTarget",F),F.prototype.ka=F.prototype.ka,F.prototype.setParentEventTarget=F.prototype.ka,F.prototype.Pb=F.prototype.Pb,F.prototype.getParentEventTarget=F.prototype.Pb,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.B=F.prototype.B,F.prototype.dispose=F.prototype.B,F.prototype.xb=F.prototype.xb,F.prototype.addOnDisposeCallback=F.prototype.xb,F.prototype.ho=F.prototype.sd,F.prototype.sd=function(t,e,n){var i,r,o=!0,s=n[n.currentTarget===n.target?"AT_TARGET":e?"CAPTURING_PHASE":(i=!0,"BUBBLING_PHASE")];return(!i||"pointerenter"!==(r=n.type)&&"pointerleave"!==r)&&(n.eventPhase=s,o=F.prototype.ho.apply(this,arguments),i&&this.Pb&&null===this.Pb()&&delete n.eventPhase),o},u(Pe,F),t("H.util.ContextItem",Pe),Pe.prototype.We=function(){return this.a},Pe.prototype.getLabel=Pe.prototype.We,Pe.prototype.Oc=function(t){return this.a!==t&&(this.a=t,this.dispatchEvent("update")),this},Pe.prototype.setLabel=Pe.prototype.Oc,Pe.prototype.jc=function(){return this.b},Pe.prototype.isDisabled=Pe.prototype.jc,Pe.prototype.Ca=function(t){return t^this.b&&(this.b=t,this.dispatchEvent("update")),this},Pe.prototype.setDisabled=Pe.prototype.Ca;var Qe=new Pe;function Re(){if(x.document){var t=document.createElement("canvas");return t.width=t.height=1,t.getContext("2d")}return null}function Se(){return window.devicePixelRatio||1}Pe.SEPARATOR=Qe,t("H.util.getPixelRatio",Se);var Te=/^rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)$/;function Ue(t){var e=Ve[t],n=x.RegExp;return e||(x.Uint8ClampedArray||(x.Uint8ClampedArray=function(t){return t instanceof Number?Array(t):t.map((function(t){return Yd(xd(t),0,255)}))}),"none"===t?e=new Uint8ClampedArray([0,0,0,0]):(We.fillStyle="black",We.fillStyle=t,Te.test(We.fillStyle)?e=new Uint8ClampedArray([n.$1,n.$2,n.$3,255*n.$4]):(We.clearRect(0,0,1,1),We.fillRect(0,0,1,1),e=We.getImageData(0,0,1,1).data)),Ve[t]=e),e}function Xe(t){return"none"!==t&&0<Ue(t)[3]}var Ve=mc(),Ye=!!x.VBArray;function Ze(t,e){return t!==B?t:e}function $e(t){return/^<svg/.test(t)?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t):t}function af(t){this.lc=0<t?ud.round(t):0}t("H.util.eval",(function(a){return eval(a)})),t("H.util.provide",(function(t){var e=xa.$jscomp;if(e&&"function"==typeof e.Gm&&e.Gm())throw Error("goog.provide cannot be used within a module.");ya(t,void 0)})),af.prototype.next=function(t){if(9007199254740992===this.lc)throw new je(t,this.lc,[0,9007199254740991]);return this.lc++};var bf=new af,cf=A(bf.next,bf);function df(){return!0}function ef(){return!1}function hd(){}var ff=oc([]),gf=oc({});function hf(t){return"CANVAS"===t.tagName?[t]:t.getElementsByTagName("CANVAS")}function jf(t,e,n){var i;if(e=t.ownerDocument===e?t.cloneNode(!0):e.importNode(t,!0),n)for(t=hf(t),i=(n=hf(e)).length;i--;)n[i].getContext("2d").drawImage(t[i],0,0);return e}var We=Re(),kf=Re();function lf(t){var e=t.complete,n=0<t.naturalWidth;if(e&&!n&&Ye)try{kf.drawImage(t,0,0),n=!0}catch(i){}return e&&n}var mf=x.BlobBuilder||x.WebKitBlobBuilder||x.MozBlobBuilder;function nf(t,e){if(e=e||"",mf){var n=new mf;n.append(t),t=n.getBlob(e)}else t=new Blob([t],{type:e});return t}var of=x.navigator;function pf(){var t=pf.a;return t||(t=this,pf.a=t,Fc(pf.a),F.call(t),qf(this)),t}function qf(t){t.g=10,t.i=6,t.a=mc(),t.b=mc(),t.c=0}function rf(t,e,n,i){if(!this.b[t])throw new D(rf,0,"Mime type is not supported");this.g=t,"crossOrigin"in(t=i?Ua(i):{})||(t.crossOrigin="anonymous"),this.a=t,sf.href=e.toString(),ee.call(this,sf.protocol+"//"+sf.hostname,e,n)}$c=/Edge\/\d+/.test(of.appVersion),ad=/(A|a)ndroid/.test(of.appVersion),u(pf,F),pf.prototype.s=function(){pf.l.s.call(this),qf(this)},pf.prototype.Xg=function(t){t=t.type;var e=this.a[t]||0;if(this.c<this.g&&e<this.i){var n=++this.f;return this.c++,this.a[t]=e+1,this.b[n+""]=t,n}return y},pf.prototype.Pf=function(t){var e=this.b[t];if(!tc(e)||!this.a[e])throw new Xc(this.Pf,"Unknown requestId");this.c--,this.a[e]--,this.a[e]||delete this.a[e],delete this.b[t],this.dispatchEvent("allocatable")},pf.prototype.f=-1,u(rf,ee),rf.prototype.Ij=function(){return this.c=this.b[this.g].call(this),!0},rf.prototype.Ge=function(){this.c&&(this.c.abort(),this.c=null)},rf.prototype.b={"application/json":function(){var t=this,e=tf(this.a),n=e.headers;return e.headers=n=n?Ua(n):{},n.Accept="application/json",new Rc(this.data,(function(e){200<=e.status&&300>e.status?t.resolve(e.json()):t.reject(e)}),e)},"text/plain":function(){var t=this;return new Rc(this.data,(function(e){200<=e.status&&300>e.status?t.resolve(e.text()):t.reject(e)}),tf(this.a))},image:function(){var t=x.document.createElement("img"),e=this,n=this.data;return t.onload=A(this.resolve,this,t),t.onerror=function(){e.reject(Oc.error())},t.crossOrigin=this.a.crossOrigin,t.src=n,{abort:function(){t.onerror=t.onload=null,Ye&&lf(t)||t.removeAttribute("src")}}}},function(){try{var t=new XMLHttpRequest;t.open("get","/",!0)}catch(e){t={}}"response"in t&&(rf.prototype.b.arraybuffer=function(){var t,e=new XMLHttpRequest,n=this,i=this.a,r=i.headers;if(e.open("GET",this.data),uf(e,i),e.responseType="arraybuffer",r)for(t in r)e.setRequestHeader(t,r[t]);return e.onerror=e.ontimeout=function(){n.reject(Oc.error())},e.onload=function(){n.resolve(new Oc(e.response))},e.send(),e})}();var vf=new he(new pf);rf.prototype.xh=function(){return vf};var sf=x.document.createElement("a");function tf(t){var e=Ua(t);return delete e.crossOrigin,uf(e,t),e}function uf(t,e){t.withCredentials="use-credentials"===e.crossOrigin}function I(t,e){this.x=+t,this.y=+e}function wf(t){if(!t)throw Error("invalid argument");return t instanceof I?t:new I(t.x,t.y)}function xf(t){var e=yf[t];if(!e)if(t in zf)e=yf[t]=t;else{e=Af.length;var n="",i=t.charAt(0).toUpperCase()+t.substr(1),r="",o=!1;Bf&&(o=(r=Bf+i)in zf);for(;e--&&!o;)o=(r=(n=Af[e])+i)in zf;if(o&&(Bf=n),!(e=o?r:null))throw Error("Could not find any variant of CSS property ["+t+"]");yf[t]=e}return e}t("H.math.Point",I),I.prototype.set=I,I.prototype.set=I.prototype.set,I.prototype.clone=function(t){return t?(t.x=this.x,t.y=this.y):t=new I(this.x,this.y),t},I.prototype.clone=I.prototype.clone,I.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},I.prototype.add=I.prototype.add,I.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},I.prototype.sub=I.prototype.sub,I.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0===e?t:e,this},I.prototype.scale=I.prototype.scale,I.prototype.round=function(){return this.x=xd(this.x),this.y=xd(this.y),this},I.prototype.round=I.prototype.round,I.prototype.floor=function(){return this.x=yd(this.x),this.y=yd(this.y),this},I.prototype.floor=I.prototype.floor,I.prototype.ceil=function(){return this.x=zd(this.x),this.y=zd(this.y),this},I.prototype.ceil=I.prototype.ceil,I.prototype.na=function(t){return!(!t||this.x!==t.x||this.y!==t.y)},I.prototype.equals=I.prototype.na,I.prototype.Tj=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=t;if(n||i){var o=((this.x-t.x)*n+(this.y-t.y)*i)/(n*n+i*i);r=0>=o?t:1<=o?e:new I(t.x+o*n,t.y+o*i)}return r},I.prototype.getNearest=I.prototype.Tj,I.prototype.Za=function(t){return Cd(Dd(this.x-t.x,2)+Dd(this.y-t.y,2))},I.prototype.distance=I.prototype.Za,I.fromIPoint=wf,t("H.dom.cssPrefixer.prefix",xf);var Af=["O","Ms","ms","Moz","Webkit"],yf={},Bf="",zf=document.createElement("span").style;function Cf(t,e,n,i){if(!t||!e||!n)throw new D(Cf,null,"Must specify name, version and revision parameter");this.name=t,this.version=e,this.revision=n,i&&Wa(this,i)}t("H.util.BuildInfo",Cf),Cf.prototype.toString=function(){var t,e=[];for(t in this)zc(this[t])&&e.push(this[t]);return e.join(";")};var Df={};function Ef(t,e,n,i){if(!t)throw new D(Ef,1,"Must specify a name parameter");return Df[t]||(Df[t]=new Cf(t,e,n,i))}function Ff(){Ff.l.constructor.call(this),this.a=Gf(this),this.f=mc(),this.c=A(this.c,this),this.a.addEventListener("message",this.c),this.b={}}Cf.get=Ef,u(Ff,F),Ff.prototype.s=function(){this.a.terminate()},Ff.prototype.i=function(t){var e=t.type,n=!!this.f[e],i=t.data,r=Hf++,o=i&&i.jp?i.jp:B,s=!0;return n?(this.b[r]=t,If(this,e,r,i&&i.message,o)):(t.reject(new D(this.i,0,"processor_not_found")),s=!1),s},Ff.prototype.c=function(t){t=t.data;var e=this.b[t.taskId],n=t.taskId,i=t.data,r=this;if(2===t.type)new rf("arraybuffer",i).then((function(t){return t.arrayBuffer()})).then((function(t){r.a.postMessage(["3",n,[t]],[t])}),(function(){r.a.postMessage(["3",n,[null,"ERROR"]])}));else{if(e){switch(t.type){case 1:e.resolve(i);break;case 0:e.reject(i)}delete this.b[n]}this.dispatchEvent(new rd(this.g.IDLE))}};var Hf=0,Nf,Qf;function Jf(t,e,n){var i,r=Hf++;return t.b[r]=i=Zb(),If(t,e,r,n),i.Zk}function If(t,e,n,i,r){i===B||Ba(i)||(i=[i]);try{t.a.postMessage([e,n,i],r)}catch(o){(t=t.b[n]).reject(o.message)}}function Gf(a){var b=x.H.__bootstrap__;if(b=Ca(b)?(""+b).replace(/^[^{]+{((.|[\r\n])+?)}\s*$/,"$1"):""+b,x.Worker&&x.URL)try{var c=new x.Worker(x.URL.createObjectURL(nf(b,"application/javascript")))}catch(d){}return c||(a=new Kf(a),function(){eval("var self = arguments[0];"+b)}(a),c=new Lf(a)),c}function Lf(t){F.call(this),this.a=t}function Kf(a){F.call(this),this.a=a,this.addEventListener=A(this.addEventListener,this),this.removeEventListener=A(this.removeEventListener,this),this.postMessage=A(this.postMessage,this),this.eval=A(eval,this)}function Mf(){var t=Nf;return t||(t=Nf=this,F.call(t),Of(this)),t}function Of(t){var e,n=t.b;if(n)for(e=n.length;e--;)n[e].B();t.b=[],Fc(t.b),t.c=mc(),t.f=mc()}function Pf(t,e,n){ee.call(this,t,e,n)}function Rf(t,e,n){var i=Yd(+t,-90,90);if(e&&E(i))throw new D(e,n,t);return i}function Sf(t,e,n){var i=+t;if((-180>i||180<i)&&(i=Wd(i+180,360)-180),e&&E(i))throw new D(e,n,t);return i}function Tf(t,e,n){var i;if(t!==B&&E(i=+t)&&e)throw new D(e,n,t);return i}function Uf(t,e){return 0!==(0>t^0>e)&&180<Ad(e-t)}function Wf(){uc(this,Wf)}function Xf(t,e,n){this.lat=Rf(t,Xf,0),this.lng=Sf(e,Xf,1),n!==B&&(this.alt=Tf(n,Xf,2))}function Yf(t,e,n){var i=Da(t)&&!(E(t.lat=Rf(t.lat))||E(t.lng=Sf(t.lng))||t.alt!==B&&E(t.alt=Tf(t.alt)));if(!i&&e)throw new D(e,n,t);return i}function Zf(t){if(!t)throw new D(Zf,0,t);return new Xf(t.lat,t.lng,t.alt)}function K(t,e,n,i){$f(this,Rf(t,K,0),Sf(e,K,1),Rf(n,K,2),Sf(i,K,3))}function $f(t,e,n,i,r){return t.ca=n,t.ia=r,e<i&&(n=e,e=i,i=n),t.la=e,t.ma=i,t.c=t.a=t.b=null,t}function bg(t,e){return(t=e-t)+(0>t?360:0)}function ag(t,e){return(t+=e/2)-(180<t?360:0)}function cg(t,e,n,i,r,o,s,a,l){n=vd(n,s),t=wd(t,r);var c=ag(e,r=bg(e,i)),u=ag(o,s=bg(o,a))-c;if(180>(u+=0>u-1e-6?360:0)-1e-6){c=e;var h=a}else u=360-u,c=o,h=i;return 360<=(u=u+r/2+s/2)+5e-7?(c=-180,h=180):u-5e-7<r?(c=e,h=i):u-5e-7<s&&(c=o,h=a),l?$f(l,t,c,n,h):new K(t,c,n,h)}function dg(t,e,n){return n||(Yf(t,dg,0),Yf(e,dg,1)),new K(t.lat,t.lng,e.lat,e.lng)}function eg(t,e){var n=1,i=t.length,r=null;if(!Ba(t))throw new D(eg,0,t);if(0<i){var o=t[0];for(r=dg(o,o,e);n<i;n++)o=t[n],r.gd(o.lat,o.lng,e,r)}return r}function fg(t,e){var n,i=3,r=t.length;if(!(e||t&&null!=t.length))throw new D(fg,0,t);if(0<r)for(n=new K(t[0],t[1],t[0],t[1]);i<r;i+=3)n.gd(t[i],t[i+1],e,n);return n}function gg(t,e){var n,i=1,r=t.length;if(e&&(!t||null==t.length))throw new D(gg,0,t);if(0<r)for(n=new K(t[0].la,t[0].ca,t[0].ma,t[0].ia);i<r;i++)n.kc(t[i],e,n);return n}function hg(t,e,n,i,r,o){uc(this,hg),this.c=t||10,this.b=this.a=null,this.f=i||0,this.g=r||0,this.i=e||1,this.j=n||1,this.m=!!o,this.flush()}function ig(t){var e=t.b;if(t.m&&!e){var n=t.head;(n.entries||n[0]||n[1]||n[2]||n[3])&&(e=jg([e=[n],e,e,e],[n[6],n[7],n[4],n[5]]),t.b=e)}return e}function jg(t,e){var n,i,r,o,s=0;for(n=3;0<=n;n--){var a=n+4,l=0<n%3,c=[],u=e[n],h=t[n];for(i=h.length;i--;){var f=h[i];if(r=f.entries)for(o=r.length;o--;){var p=r[o].vd(n);(l?p>u:p<u)&&(u=p)}for(o=4;o--;)(r=f[o])&&(l?r[a]>u:r[a]<u)&&c.push(r)}s+=c.length,e[n]=u,t[n]=c}return s&&(e=jg(t,e)),e}function kg(t,e,n){var i,r;if(t.m&&(i=t.b))for(r=3;0<=r;r--){var o=e.vd(r);if(r%3?o>=i[r]:o<=i[r]){if(!n){t.b=null;break}i[r]=o}}}function mg(t,e){var n,i=t.head;if(e){var r=e;if(r!==i)for(i=r;r=r.parent;)(r.entries||1<r.a)&&(i=r)}else for(;!i.entries&&2>(n=i.a)&&n;)i=r;t.head=i}function ng(t,e,n,i,r,o,s,a,l){var c,u=e.entries,h=e[7],f=e[4],p=e[5],d=e[6],g=e[8],m=e[9];if(u){var v=u.length;if(r>f||i>h||s<d||o<p)for(;v--;){f=(h=u[v]).vd(3),p=h.vd(0),d=h.vd(1),h.vd(2)>=r&&d>=i&&(p<s||a&&p==s)&&(f<o||l&&f==o)&&n.push(h)}else for(;v--;)n.push(u[v])}(o>g||l&&o==g)&&(r<m&&(c=e[1])&&ng(t,c,n,i,r,o,s,a,l),(s>m||a&&s==m)&&(c=e[3])&&ng(t,c,n,i,r,o,s,a,l)),i<g&&(r<m&&(c=e[0])&&ng(t,c,n,i,r,o,s,a,l),(s>m||a&&s==m)&&(c=e[2])&&ng(t,c,n,i,r,o,s,a,l))}Ff.prototype.g={IDLE:"idle",fj:"error"},Ff.prototype.j=function(t,e){var n=this.o||(this.o=new rd(this.g.fj));n.data=e,delete this.f[t],this.dispatchEvent(n)},u(Lf,F),Lf.prototype.postMessage=function(t){x.setTimeout(A(this.b,this,t),0)},Lf.prototype.b=function(t){var e=new rd("message");e.data=t,this.a.dispatchEvent(e)},Lf.prototype.terminate=function(){this.a.B(),this.B()},u(Kf,F),Kf.prototype.postMessage=function(t){var e=new rd("message");e.data=t,x.setTimeout(A(this.a.c,this.a,e),0)},u(Mf,F),Mf.prototype.s=function(){Mf.l.s.call(this),Of(this)},Mf.prototype.Xg=function(t){var e;if(t=t.type,!(e=this.f[t]))throw new Xc(this.Xg,'Unknown type "'+t+'"');var n=this.b,i=n[0];return i||(i=n[0]=new Ff,this.xb(Ja(qd,i)),Ta(this.c)||Jf(i,"0",n=x.Object.keys(this.c))),(n=i).f[t]||(n.f[t]=e,Jf(n,"1",[t,Ca(e)?e+"":e]).then(hd,A(n.j,n,t))),i},Mf.prototype.Pf=function(){},Mf.prototype.a=function(t,e){var n=this.f,i=n[t];if(i){if(e!==i)throw new Xc(this.a,'Type "'+t+'" is already registered')}else n[t]=e},u(Pf,ee),Pf.prototype.xh=function(){return Qf||(Qf=new he(new Mf)),Qf},Pf.prototype.Ge=function(){},Pf.prototype.Ij=function(t){return t.i(this)},t("H.geo.isDBC",Uf),t("H.geo.AbstractGeometry",Wf),Wf.prototype.getBoundingBox=Wf.prototype.I,Wf.prototype.equals=Wf.prototype.na,Wf.prototype.qb="",Wf.prototype.Lb="",Wf.prototype.toString=function(){return this.Sc([this.qb.toUpperCase()," "]).join("")},Wf.prototype.toString=Wf.prototype.toString,Wf.prototype.Rc=function(){return{type:this.Lb,coordinates:this.md()}},Wf.prototype.toGeoJSON=Wf.prototype.Rc,Wf.prototype.W=function(){return{type:this.qb,coordinates:this.vc(),boundingBox:this.I().W()}},Wf.prototype.forWorkerMessage=Wf.prototype.W,u(Xf,Wf),t("H.geo.Point",Xf),Xf.prototype.na=function(t){return this===t||!!t&&this.lat===t.lat&&this.lng===t.lng&&(this.alt||0)===(t.alt||0)},Xf.prototype.equals=Xf.prototype.na,Xf.prototype.Za=function(t){if(this===t||this.lat===t.lat&&this.lng===t.lng)t=0;else{var e=this.lat*Rd,n=t.lat*Rd;t=12742001.58*Gd(vd(1,Cd(Dd(Fd((e-n)/2),2)+Hd(e)*Hd(n)*Dd(Fd((this.lng*Rd-t.lng*Rd)/2),2))))}return t},Xf.prototype.distance=Xf.prototype.Za,Xf.prototype.Lg=function(t,e,n){if(n){if(e/=6371000.79){t*=Rd;var i=Rd*this.lat,r=Fd(i),o=Fd(e),s=Hd(e),a=Rd*this.lng,l=Hd(i);i=Gd(l*Hd(t)*o+r*s),l=(t=(a+(t=Kd(Fd(t)*l*o,s-r*Fd(i)))+Md)%(2*Md)-Md)*Sd}return e?new Xf(i*Sd,(l+540)%360-180):this}if(0===((t=(t%360+360)%360)+90)%180)return i=this.lng+e/(6371000.79*Pd*Hd(this.lat*Rd))*(270===t?-360:360),new Xf(this.lat,(i+540)%360-180);if(e/=6371000.79){t*=Rd,a=this.lat*Rd,r=this.lng*Rd,s=(o=a+e*Hd(t))-a,i=Bd(Id(o/2+Od)/Id(a/2+Od)),i=E(s/i)?Hd(a):s/i;var c=e*Fd(t)/i;Ad(o)>Nd&&(o=0<o?Md-o:-(Md+o))}return e?new Xf(o*Sd,((r+c+Qd+(Ad(a+s)>Nd?Md:0))%Pd-Md)*Sd):this},Xf.prototype.walk=Xf.prototype.Lg,Xf.prototype.I=function(){return new K(this.lat,this.lng,this.lat,this.lng)},Xf.prototype.getBoundingBox=Xf.prototype.I,Xf.validate=Yf,Xf.fromIPoint=Zf,n=Xf.prototype,n.qb="Point",n.Sc=function(t){return t.push("(",this.lng," ",this.lat,")"),t},n.Lb="Point",n.md=function(){return[this.lng,this.lat,this.alt||0]},n.vc=function(){return[this.lat,this.lng,this.alt||0]},u(K,Wf),t("H.geo.Rect",K),K.prototype.qb="Polygon",K.prototype.Sc=function(t){var e=this.la,n=this.ca,i=this.ma,r=this.ia;return t.push("(","(",n," ",e,",",r," ",e,",",r," ",i,",",n," ",i,",",n," ",e,")",")"),t},K.prototype.na=function(t){return this===t||!!t&&this.la===t.la&&this.ca===t.ca&&this.ma===t.ma&&this.ia===t.ia},K.prototype.equals=K.prototype.na,K.prototype.clone=function(){return new K(this.la,this.ca,this.ma,this.ia)},K.prototype.clone=K.prototype.clone,K.prototype.Qb=function(){return this.c||(this.c=new Xf(this.la,this.ca)),this.c},K.prototype.getTopLeft=K.prototype.Qb,K.prototype.Mb=function(){return this.a||(this.a=new Xf(this.ma,this.ia)),this.a},K.prototype.getBottomRight=K.prototype.Mb,K.prototype.Kn=function(){return this.la},K.prototype.getTop=K.prototype.Kn,K.prototype.Am=function(){return this.ma},K.prototype.getBottom=K.prototype.Am,K.prototype.dn=function(){return this.ca},K.prototype.getLeft=K.prototype.dn,K.prototype.An=function(){return this.ia},K.prototype.getRight=K.prototype.An,K.prototype.kb=function(){return this.b||(this.b=new Xf(this.ma+(this.la-this.ma)/2,ag(this.ca,this.Db()))),this.b},K.prototype.getCenter=K.prototype.kb,K.prototype.Db=function(){return bg(this.ca,this.ia)},K.prototype.getWidth=K.prototype.Db,K.prototype.Zd=function(){return this.la-this.ma},K.prototype.getHeight=K.prototype.Zd,K.prototype.Eb=function(){return this.ca>this.ia},K.prototype.isCDB=K.prototype.Eb,K.prototype.gg=function(){return!this.Db()&&!this.Zd()},K.prototype.isEmpty=K.prototype.gg,K.prototype.I=function(){return new K(this.la,this.ca,this.ma,this.ia)},K.prototype.getBoundingBox=K.prototype.I,K.prototype.Lf=function(t,e,n){var i=this.kb();return n||(t=Rf(t,this.Lf,0),e=Sf(e,this.Lf,1)),(t=(e=this.gd(t,e,n)).kb()).lat===i.lat&&t.lng===i.lng&&this.Zd()===e.Zd()&&this.Db()===e.Db()},K.prototype.containsLatLng=K.prototype.Lf,K.prototype.Pd=function(t,e){return e||Yf(t,this.Pd,0),this.Lf(t.lat,t.lng,e)},K.prototype.containsPoint=K.prototype.Pd,K.prototype.fh=function(t,e){var n=this.kb();if(!e&&!C(t,K))throw new D(this.fh,0,t);return(t=(e=this.kc(t,e)).kb()).lat===n.lat&&t.lng===n.lng&&this.Zd()===e.Zd()&&this.Db()===e.Db()},K.prototype.containsRect=K.prototype.fh,K.prototype.gd=function(t,e,n,i){if(!n){if(E(t=Rf(t)))throw new D(this.gd,0,t);if(E(e=Sf(e)))throw new D(this.gd,1,e)}return cg(this.la,this.ca,this.ma,this.ia,t,e,t,e,i)},K.prototype.mergeLatLng=K.prototype.gd,K.prototype.Ik=function(t,e,n){return e||Yf(t,this.Ik,0),this.gd(t.lat,t.lng,e,n)},K.prototype.mergePoint=K.prototype.Ik,K.prototype.kc=function(t,e,n){if(!e&&!C(t,K))throw new D(this.kc,0,t);return cg(this.la,this.ca,this.ma,this.ia,t.la,t.ca,t.ma,t.ia,n)},K.prototype.mergeRect=K.prototype.kc,K.prototype.Gc=function(t,e,n,i,r,o){return r||(t=Rf(t,this.Gc,0),e=Sf(e,this.Gc,1),n=Rf(n,this.Gc,2),i=Sf(i,this.Gc,3)),cg(this.la,this.ca,this.ma,this.ia,t,e,n,i,o)},K.prototype.mergeTopLeftBottomRight=K.prototype.Gc,K.prototype.zd=function(t,e){var n=this.ca<=this.ia,i=t.ca<=t.ia,r=this.ca<t.ia,o=t.ca<this.ia;if(!e&&!C(t,K))throw new D(this.zd,0,t);return this.ma<=t.la&&t.ma<=this.la&&(!n&&(!i||r||o)||!i&&(r||o)||r&&o)},K.prototype.intersects=K.prototype.zd,K.merge=cg,K.fromPoints=dg,K.coverPoints=eg,K.coverLatLngAlts=fg,K.coverRects=gg,K.prototype.hl=function(t,e){var n=this.ca,i=this.la,r=this.ia,o=this.ma,s=this.kb().lng;Yf(t,this.hl,0);var a=t.lat-o-(i-o)/2,l=t.lng-s;return t=-180>(t=n+(0>(l=180<l||-180>l?-(s+t.lng):l)?2*l:0))?360+t:t,r=180<(r+=0<l?2*l:0)?r-360:r,90<=(i=0<a?i+2*a:i)&&(i=90),-90>=(o=0>a?o+2*a:o)&&(o=-90),e?$f(e,i,t,o,r):new K(i,t,o,r)},K.prototype.resizeToCenter=K.prototype.hl,K.prototype.Lb="Polygon",K.prototype.md=function(){return[[this.ca,this.la,0],[this.ia,this.la,0],[this.ia,this.ma,0],[this.ca,this.ma,0],[this.ca,this.la,0]]},K.prototype.W=function(){return this.vc()},K.prototype.vc=function(){return[this.la,this.ca,this.ma,this.ia]},hg.prototype.remove=function(t){var e,n,i,r=!1;return t&&(e=t.node)&&e.b===this&&(n=e.entries)&&0<=(i=n.indexOf(t))&&(n.splice(i,1),this.o(e),kg(this,t,!1),r=!0),r},hg.prototype.flush=function(){var t=new lg(null,NaN,this.f-this.i,this.g-this.j,this.f+this.i,this.g+this.j);t.b=this,this.head=this.a=t,this.b=null},hg.prototype.ab=function(t,e,n,i,r,o){var s=[],a=this.head,l=this.a;return t<=a[5]&&e<=a[6]&&(r?n>=a[7]:n>a[7])&&(o?i>=a[4]:i>a[4])&&ng(this,a,s,t,e,n,i,o||i>=l[6],r||n>=l[5]),s},hg.prototype.Tc=ba(1);var og=0;function lg(t,e,n,i,r,o){this.c=e,t&&(this.parent=t,this.b=t.b,1&e?(n=t[8],r=t[5]):(n=t[7],r=t[8]),2&e?(i=t[9],o=t[6]):(i=t[4],o=t[9])),this[7]=n,this[5]=r,this[8]=(n+r)/2,this[4]=i,this[6]=o,this[9]=(i+o)/2}function pg(t,e){return t[e]||(++t.a,t[e]=new lg(t,e))}function qg(t,e){(t.entries||(t.entries=[])).push(e),e.node=t}function rg(t,e,n,i,r){var o=t[5],s=t[6];return t[7]<=e&&t[4]<=n&&(o>i||o===i&&o===t.b.a[5])&&(s>r||s===r&&s===t.b.a[6])}function sg(t,e,n,i,r,o){sg.l.constructor.apply(this,arguments)}function tg(t,e,n,i,r){if(rg(t.a,e,n,i,r))return ug(t,t.a,e,n,i,r,t.c);throw Error("Coordinates out of bounds")}function ug(t,e,n,i,r,o,s){var a,l,c=e[8],u=e[9];return s&&(r<c||(a=n>=c))&&(o<u||(l=i>=u))?n=ug(t,pg(e,a|l<<1),n,i,r,o,s-1):(qg(e,n=new vg(n,i,r,o)),kg(t,n,!0),mg(t,e)),n}function vg(t,e,n,i){this.id=og++,this[0]=e,this[1]=n,this[2]=i,this[3]=t}function wg(t){this.f=new sg(+t||10,180,90,0,0,!0),this.c=[],this.g=!1,this.a=this.b=this.P=null}function xg(t,e,n,i,r,o){return o?(o=new vg(r,-e,n+360,-i),t.c.push(o),t.g=!0,t.a&&t.a.Gc(e,n,i,r,!0,t.a)):(o=tg(t.f,n,-e,r,-i),t.b&&t.b.Gc(e,n,i,r,!0,t.b)),++t.Wh,t.P=null,o}function yg(t,e,n,i,r,o,s){var a,l=(t=t.c).length,c=[];if(l){var u=n+360;for(a=r+360;l--;){var h=t[l];(zg(h,e,n,i,r,o,s)||zg(h,e,u,i,a,o,s))&&c.push(h)}}return c}function zg(t,e,n,i,r,o,s){var a=t[3],l=t[0],c=t[1];return t=t[2],(o?l<=i:l<i)&&(s?a<=r:a<r)&&t>=e&&c>=n}function Ag(t,e){var n,i,r;if(n=e.length){var o=t.length;for(i={};o--;)i[t[o].id]=1;for(;n--;)(r=e[n]).id in i||t.push(r)}}function Bg(t){return x.H.gl.flexpolyline.encode(t)}function Cg(t){return x.H.gl.flexpolyline.decode(t)}function L(t){L.l.constructor.call(this),t&&Dg(t,L,0),this.X=t||[],this.a=Eg(this,0,this.X.length)}function Eg(t,e,n){t=t.X;var i=0;for(e=wd(e,0),n=vd(n,t.length),n-=2,e+=1;e<n;)i+=Uf(t[e],t[e+=3]);return i}function Fg(t,e,n,i,r){var o=t.X.length;e=Rf(e,r),n=Sf(n,r),t.X.push(Rf(e,r),Sf(n,r),i===B?0:Tf(i,r)),o&&(t.a+=Uf(t.X[o-2],n)),delete t.P,delete t.b}function Dg(t,e,n){for(var i,r=t.length,o=!(r%3);o&&r;)o=!(E(t[--r]=Tf((i=t[r])===B?0:i))||E(t[--r]=Sf(t[r]))||E(t[--r]=Rf(t[r])));if(!o&&e)throw new D(e,n,t)}function Gg(t){var e=new L,n=0,i=t.length;if(i%2)throw new D(Gg,0,t);for(;n<i;)Fg(e,t[n++],t[n++],0,Gg);return e}function Hg(t,e){return t.a-e.a}function Ig(t,e){var n,i=t.X,r=-2,o=[],s=t.b;if(!s){s=t.b=new wg;var a=0,l=t.X,c=l.length;for(n=0;n<c;n+=3){var u=l[n],h=l[n+1];if(n){if(p<h)var f=p,p=h;else f=h;if(g<u)var d=u;else{d=g;var g=u}(f=xg(s,d,f,g,p,180<p-f)).a=a++}g=u,p=h}}for(l=(s=s.fg(e).sort(Hg)).length,e=0;e<l;e++){if(c=3*(a=(a=s[e]).a),a>r+1){var m=[i[c],i[c+1]];o.push(m)}r=a,m.push(i[c+3],i[c+4])}if(t.a){for(i=[],r=o.length,e=0;e<r;e++)if(s=(m=o[e]).length){for(l=[],t=0;t<s;t+=2)a=m[t],c=m[t+1],l.push(a,c),n=m[t-1],t&&Uf(c,n)&&(i.push(l),n+=0>n?360:-360,(l=[]).push(m[t-2],n,a,c));i.push(l)}o=i}return o}function Jg(t){var e=Cg(t);t=e.polyline;var n=e.thirdDim;if(e=2===n||3===n,n=0===n,!t)throw new D(Jg,0,"data");if(e||n){n=t.length;for(var i=Array(3*n),r=0,o=0;r<n;r++){var s=t[r];i[o++]=s[0],i[o++]=s[1],i[o++]=e?s[2]:0}}if(!i)throw new D(Jg,0,"only ABSENT, ALTITUDE or ELEVATION are supported as type of the 3rd dimension");return new L(i)}function Kg(t){Kg.l.constructor.call(this),void 0!==t&&(this.data=t)}function Lg(){}lg.prototype.a=0,lg.prototype.removeChild=function(t){var e=t.c;this[e]===t&&(delete this[e],delete t.parent,--this.a)},lg.prototype.Tc=ba(0),u(sg,hg),sg.prototype.o=function(t){for(var e,n,i=this.head;t;)(e=t.entries)&&e.length||(e&&delete t.entries,t.a||!(n=t.parent))?t=y:(n.removeChild(t),i===t&&(i=n),t=n);this.head!==i&&(this.head=i,mg(this))},sg.prototype.Dc=function(t,e){return tg(this,t,e,t,e)},vg.prototype.vd=function(t){return this[t]},t("H.geo.QuadTree",wg),n=wg.prototype,n.Wh=0,n.bd=function(){return this.Wh},n.Eb=function(){return this.g},n.I=function(){var t,e;if(!this.P){var n,i,r,o=[];if(!this.b&&(t=ig(this.f))&&(this.b=new K(-t[0],t[3],-t[2],t[1])),(e=this.b)&&o.push(e),!this.a&&(r=(i=this.c).length)){t=90;var s=360,a=-90;for(n=0;r--;){var l=i[r];t=vd(t,l[0]),s=vd(s,l[3]),a=wd(a,l[2]),n=wd(n,l[1])}this.a=new K(-t,s,-a,n-360)}(e=this.a)&&o.push(e),(e=o[0])&&(o[1]&&(e=e.kc(o[1],!0)),this.P=e)}return this.P},n.Dc=function(t){var e=t.lng;return xg(this,t=t.lat,e,t,e,!1)},n.hk=function(t){var e=t.Qb(),n=t.Mb();return(t=t.Eb())?xg(this,e.lat,n.lng,n.lat,e.lng,t):xg(this,e.lat,e.lng,n.lat,n.lng,t)},wg.prototype.insertBoundingBox=wg.prototype.hk,wg.prototype.remove=function(t){var e;if(t.node){var n=this.f.remove(t);this.b=null}else(n=0<=(t=(e=this.c).indexOf(t)))&&(e.splice(t,1),this.g=0<e.length,this.a=null);return n&&(--this.Wh,this.P=null),n},wg.prototype.remove=wg.prototype.remove,wg.prototype.fg=function(t,e,n){var i=this.f,r=t.Qb(),o=t.Mb(),s=-r.lat;r=r.lng;var a=-o.lat;return o=o.lng,!e&&s===a||!n&&r===o?t=[]:t.Eb()?(Ag(t=i.ab(-180,s,o,a,n,e),i.ab(r,s,180,a,!1,e)),Ag(t,yg(this,s,o,a,r+360,e,n))):Ag(t=i.ab(r,s,o,a,n,e),yg(this,s,r,a,o,e,n)),t},wg.prototype.intersectBoundingBox=wg.prototype.fg,t("H.util.flexiblePolyline.encode",Bg),t("H.util.flexiblePolyline.decode",Cg),u(L,Wf),t("H.geo.LineString",L),L.prototype.xi=function(t,e,n){Fg(this,t,e,n,this.xi)},L.prototype.pushLatLngAlt=L.prototype.xi,L.prototype.yf=function(t,e,n){n&&Dg(n,this.yf,2),void 0===e&&(e=this.X.length),e&&(this.a-=Eg(this,t-3,t+e+3));var i=n?this.X.splice.apply(this.X,[t,e].concat(n)):this.X.splice(t,e);return n&&(this.a+=Eg(this,t-3,t+n.length+3)),e&&!n&&(this.a+=Eg(this,t-3,t-3)),delete this.P,delete this.b,i},L.prototype.spliceLatLngAlts=L.prototype.yf,L.prototype.ik=function(t,e,n,i){this.yf(t,0,[e,n,i])},L.prototype.insertLatLngAlt=L.prototype.ik,L.prototype.cl=function(t){this.yf(t,3)},L.prototype.removeLatLngAlt=L.prototype.cl,L.prototype.Dd=function(t){Fg(this,t.lat,t.lng,t.alt,this.Dd)},L.prototype.pushPoint=L.prototype.Dd,L.prototype.Dc=function(t,e){this.ik(3*t,e.lat,e.lng,e.alt)},L.prototype.insertPoint=L.prototype.Dc,L.prototype.pf=function(t){this.cl(3*t)},L.prototype.removePoint=L.prototype.pf,L.prototype.Oe=function(t,e){var n=this.X,i=3*t;t=n[i];var r=n[i+1];return n=n[i+2],e&&(e.lat=t,e.lng=r,e.alt=n),e||new Xf(t,r,n)},L.prototype.extractPoint=L.prototype.Oe,L.prototype.om=function(t,e,n){var i=this.X;e=e||0,n=Ze(n,i.length/3);for(var r=3*e;e<n;)t(i[r++],i[r++],i[r++],e++)},L.prototype.eachLatLngAlt=L.prototype.om,L.isDBC=Uf,L.prototype.vh=function(t){var e=this.a;return t&&(e+=Uf((t=this.X)[t.length-2],t[1])),e},L.prototype.getDBCs=L.prototype.vh,L.prototype.Xe=function(){return this.X.length/3},L.prototype.getPointCount=L.prototype.Xe,L.prototype.bn=function(){return this.X},L.prototype.getLatLngAltArray=L.prototype.bn,L.prototype.P=y,L.prototype.I=function(){var t;if(!(t=this.P)){var e,n,i=(t=this.X).length,r=3,o=y;if(3<=i){var s=e=t[0],a=n=t[1];for(o=new K(s,a,e,n);r<i;r+=3){if(s=t[r-3],a=t[r-2],e=t[r],a>(n=t[r+1])&&180<n-a||a<n&&-180>a-n||n<a&&180>Ad(n-a)){var l=a;a=n,n=l}s<e&&(l=s,s=e,e=l),cg(o.la,o.ca,o.ma,o.ia,s,a,e,n,o)}}t=this.P=o}return t},L.prototype.getBoundingBox=L.prototype.I,L.prototype.Vn=function(){return this.P!==y},L.prototype.hasBoundingBox=L.prototype.Vn,L.fromLatLngArray=Gg,L.prototype.na=function(t){var e,n=this===t;if(!n&&(n=C(t,L))){var i=this.X;for(t=t.X,n=(e=i.length)===t.length;n&&e--;)n=i[e]==t[e]}return n},L.prototype.equals=L.prototype.na,n=L.prototype,n.qb="LineString",n.Sc=function(t,e){var n,i=this.X,r=i.length;if(r){for(t.push("("),n=0;n<r;n+=3)n&&t.push(","),t.push(i[n+1]," ",i[n]);e&&(i[0]!==i[r-3]||i[1]!==i[r-2])&&t.push(",",i[1]," ",i[0]),t.push(")")}else t.push("EMPTY");return t},n.Lb="LineString",n.md=function(){var t,e=[],n=this.X,i=n.length;for(t=0;t<i;t+=3)e.push([n[t+1],n[t],n[t+2]]);return e},n.vc=function(){var t,e=this.X;if(this.I().Eb()){var n=1;for(t=(e=e.slice()).length;n<t;n+=3)0>e[n]&&(e[n]+=360)}return e},n.hp=function(t){t=void 0===t?5:t;for(var e=this.X,n=e.length,i=[],r=0;r<n;r+=3)i.push([e[r],e[r+1],e[r+2]]);return Bg({polyline:i,precision:t,thirdDim:2,thirdDimPrecision:t})},L.prototype.toFlexiblePolyline=L.prototype.hp,L.fromFlexiblePolyline=Jg,u(Kg,F),t("H.map.Feature",Kg),Kg.prototype.getData=function(){return this.data},Kg.prototype.getData=Kg.prototype.getData,Kg.prototype.s=function(){Kg.l.s.call(this),delete this.data},t("H.map.provider.Invalidations",Lg),Lg.MARK_INITIAL=Ud,Lg.prototype.update=function(t,e){e!==Mg.NONE&&(this.a=t,e&Mg.SPATIAL&&(this.f=t),e&Mg.VISUAL&&(this.g=t),e&Mg.ADD&&(this.b=t),e&Mg.REMOVE&&(this.c=t),e&Mg.Z_ORDER&&(this.j=t),e&Mg.VOLATILITY&&(this.i=t))},Lg.prototype.update=Lg.prototype.update,Lg.prototype.hn=function(){return this.a},Lg.prototype.getMark=Lg.prototype.hn,Lg.prototype.a=Ud,Lg.prototype.$n=function(t){return this.a>t},Lg.prototype.isAny=Lg.prototype.$n,Lg.prototype.g=Ud,Lg.prototype.je=function(t){return this.g>t},Lg.prototype.isVisual=Lg.prototype.je,Lg.prototype.f=Ud,Lg.prototype.Ph=function(t){return this.f>t},Lg.prototype.isSpatial=Lg.prototype.Ph,Lg.prototype.b=Ud,Lg.prototype.jk=function(t){return this.b>t},Lg.prototype.isAdd=Lg.prototype.jk,Lg.prototype.c=Ud,Lg.prototype.hg=function(t){return this.c>t},Lg.prototype.isRemove=Lg.prototype.hg,Lg.prototype.j=Ud,Lg.prototype.Qh=function(t){return this.j>t},Lg.prototype.isZOrder=Lg.prototype.Qh,Lg.prototype.i=Ud,Lg.prototype.fo=function(t){return this.i>t},Lg.prototype.isVolatility=Lg.prototype.fo;var Mg={NONE:0,VISUAL:1,SPATIAL:2,ADD:4,REMOVE:8,Z_ORDER:16,VOLATILITY:32};function Ng(t,e,n){Ng.l.constructor.call(this,t),this.oldValue=n,this.newValue=e}function M(t){if(uc(this,M),M.l.constructor.call(this,t?t.data:B),this.S=Og.next(),t){var e="min";Cc(t[e])&&(this.v=t[e]),Cc(t[e="max"])&&(this.u=t[e]),(e="visibility")in t&&(this.c=!!t[e]),(e="volatility")in t&&(this.D=!!t[e]),(e="zIndex")in t&&(this.m=+t[e]||0),(e="provider")in t&&!C(t[e],N)&&(this.a=t[e],this.xa(Mg.ADD))}}Lg.Flag=Mg,u(Ng,rd),t("H.util.ChangeEvent",Ng),u(M,Kg),t("H.map.Object",M);var Og=new af(1),Pg={ANY:31,OVERLAY:1,SPATIAL:2,MARKER:4,DOM_MARKER:8,GROUP:16};function Qg(t,e,n){var i,r;if(!n||t[0]|e[0]){var o=t.length,s=e.length,a=vd(o,s),l=1;for(r=1+n;l<a;l+=r)if(i=t[l]-e[l])return i}return n?0:o-s}function Rg(t,e){return t.uj(e)}function Sg(t,e,n){if(null===e||e===B)return null;if(0<=Object.keys(e).length&&"[object Object]"!==Object.prototype.toString.call(e))throw Error(Tg(t,n));try{return JSON.stringify(e),e}catch(i){throw Error(Tg(t,n))}}function Tg(t,e){return"Object Remote-Id: "+t.o+" - "+(e?"The value returned by the callback is not a valid JSON object and cannot be set as Feature properties.":"The given object data is not a valid JSON object and cannot be set as Feature properties.")}function O(t){var e;if(t){var n=Ug;for(e=C(t,O);n--;){var i=Vg[n];if(t.hasOwnProperty(i)){var r=t[i];if(e)this[i]=r;else{if((r=Wg[n](r))===Xg)throw new D(O,0,i+": "+t[i]);r!==this[i]&&r!==B&&(this[i]=r)}}}(n=e?t.af:this.lineWidth&&Xe(this.strokeColor))||(this.af=n),(n=e?t.Rb:Xe(this.fillColor))||(this.Rb=n),(n=e?t.$e:"none"!==this.strokeColor&&this.lineWidth)||(this.$e=n)}oc(this)}M.Type=Pg,M.prototype.fb=function(){return this.S},M.prototype.getId=M.prototype.fb,M.prototype.Oi=function(t){if(!Cc(t)&&!zc(t))throw new D(this.Oi,0,"id must be a number or a string");return this.o=t,this},M.prototype.setRemoteId=M.prototype.Oi,M.prototype.zn=function(){return this.o},M.prototype.getRemoteId=M.prototype.zn,M.prototype.v=-1/0,M.prototype.u=1/0,M.prototype.jn=function(){return this.u},M.prototype.getMax=M.prototype.jn,M.prototype.ln=function(){return this.v},M.prototype.getMin=M.prototype.ln,M.prototype.c=!0,M.prototype.vb=function(t){return(t=!!t)^this.c&&(this.c=t,this.invalidate(Mg.VISUAL)),this},M.prototype.setVisibility=M.prototype.vb,M.prototype.Bc=function(t){for(var e,n=this;(e=n.c)&&t&&(n=n.Wa););return e},M.prototype.getVisibility=M.prototype.Bc,M.prototype.D=!1,M.prototype.cg=function(t){for(var e,n=this;!(e=n.D)&&t&&(n=n.Wa););return e},M.prototype.getVolatility=M.prototype.cg,M.prototype.zl=function(t){var e=this.D;return e^t&&(this.D=!e,this.invalidate(Mg.VOLATILITY)),this},M.prototype.setVolatility=M.prototype.zl,M.prototype.m=B,M.prototype.ak=function(){return this.m},M.prototype.getZIndex=M.prototype.ak,M.prototype.we=function(t){return t!==this.m&&(this.rf(),this.m=t,this.invalidate(Mg.Z_ORDER)),this},M.prototype.setZIndex=M.prototype.we,M.prototype.L=B,M.prototype.ed=function(){var t,e,n=this.L;if(!n){var i=(t=this.m)!==B;(n=this.Wa)?(n=n.ed().slice())[0]|=i:n=[0|i],n.push(t||0,0>(e=this.Ri)?this.S:e),this.L=n}return n},M.prototype.getZInfo=M.prototype.ed,M.prototype.rf=function(){this.L=B},M.compareZInfo=Qg,M.compareZOrder=Rg,M.prototype.uj=function(t){return this.Mg-t.Mg||Qg(this.ed(),t.ed(),!1)},M.prototype.compareZOrder=M.prototype.uj,n=M.prototype,n.previousSibling=y,n.nextSibling=y,n.Ri=-1,n.Wa=y,n.on=function(){return this.Wa},M.prototype.getParentGroup=M.prototype.on,M.prototype.hc=function(){for(var t,e=this;t=e.Wa;)e=t;return e},M.prototype.getRootGroup=M.prototype.hc,M.prototype.contains=function(t){return this===t},M.prototype.contains=M.prototype.contains,M.prototype.ka=function(t){if(this.Wa)throw new Xc(this.ka,"Not allowed for a child of a group");M.l.ka.call(this,t)},M.prototype.setParentEventTarget=M.prototype.ka,M.prototype.a=y,M.prototype.ga=function(){return this.a},M.prototype.getProvider=M.prototype.ga,M.prototype.ve=function(t,e){var n,i=this.a;if(n=i!==t){if(e&&(i&&!C(i,N)||t&&!C(t,N)))throw new Xc(e,"Only LocalObjectProvider allows an object transfers");e=this.type!==Pg.GROUP,i&&(this.invalidate(Mg.REMOVE),e&&i.Ha(this)),(this.a=t)&&(e&&t.ea(this),this.wa=y,this.invalidate(Mg.ADD))}return n},M.prototype.Ob=function(){return this.wa||(this.wa=new Lg)},M.prototype.getInvalidations=M.prototype.Ob,M.prototype.xa=function(t){var e,n=this.ga();return(e=!!n)&&n.invalidateObject(this,t),e},M.prototype.invalidate=M.prototype.xa,M.prototype.s=function(){this.Wa&&this.Wa.Ha(this),M.l.s.call(this)},M.prototype.setData=function(t){return this.data=t,this},M.prototype.setData=M.prototype.setData,M.prototype.Rc=function(t){if(t&&!Ca(t))throw new D(M.prototype.Rc,0,"opt_callback must be a function");return t={type:"Feature",properties:Sg(this,t?t(this.data):this.data,!!t),geometry:this.ba().Rc()},this.o&&(t.id=this.o),t},M.prototype.toGeoJSON=M.prototype.Rc,M.prototype.W=function(){return{id:this.S,properties:{min:this.v,max:this.u,zIdx:this.m,sIdx:this.Ri,parent:this.Wa?this.Wa.fb():0,visible:this.Bc(),volatile:this.cg()},type:"Feature"}},M.prototype.forWorkerMessage=M.prototype.W,t("H.map.SpatialStyle",O),O.prototype.Rb=!0,O.prototype.af=!0,O.prototype.$e=!0;var Vg="strokeColor fillColor lineWidth lineCap lineJoin miterLimit lineDash lineDashOffset lineHeadCap lineTailCap".split(" ");O.prototype.strokeColor="rgba(0,85,170,.6)",O.prototype.strokeColor=O.prototype.strokeColor,O.prototype.fillColor="rgba(0,85,170,.4)",O.prototype.fillColor=O.prototype.fillColor,O.prototype.lineWidth=2,O.prototype.lineWidth=O.prototype.lineWidth,O.prototype.lineCap="round",O.prototype.lineCap=O.prototype.lineCap,O.prototype.lineJoin="miter",O.prototype.lineJoin=O.prototype.lineJoin,O.prototype.miterLimit=1,O.prototype.miterLimit=O.prototype.miterLimit,O.prototype.lo=ff,O.prototype.lineDash=O.prototype.lo,O.prototype.lineDashOffset=0,O.prototype.lineDashOffset=O.prototype.lineDashOffset,O.prototype.mo=B,O.prototype.lineHeadCap=O.prototype.mo,O.prototype.no=B,O.prototype.lineTailCap=O.prototype.no;var Ug=Vg.length;O.prototype.na=function(t){var e=this===t;if(!e&&t){for(e=0;e<Ug;e++){var n=Vg[e];if(this[n]!==t[n])break}e=e===Ug}return e},O.prototype.equals=O.prototype.na,O.prototype.Oj=function(t){if(t){var e={};Wa(e,this,t)}else e=this;return new O(e)},O.prototype.getCopy=O.prototype.Oj;var Xg=oc({}),Wg=[function(t){return t?nc(t):Xg},function(t){return t?nc(t):Xg},function(t){return 0<=t&&100>=t?+t:Xg},function(t){return"butt"===(t=nc(t))||"square"===t||"round"===t||"arrow-head"===t||"arrow-tail"===t?t:Xg},function(t){return"round"===t||"bevel"===t||"miter"===t?t:Xg},function(t){return 0<t&&100>=t?+t:Xg},function(t){return t&&t.every&&t.every(Dc)?t:Xg},function(t){return E(+t)?Xg:+t},function(t){return tc(t)?Wg[3](t):B},function(t){return tc(t)?Wg[3](t):B}];O.MAX_LINE_WIDTH=100;var Yg=new O;O.DEFAULT_STYLE=Yg;var Zg="fillColor strokeColor lineWidth lineCap lineJoin miterLimit lineDashOffset lineDash lineTailCap lineHeadCap".split(" ");function $g(t){var e;if(t){var n=C(t,$g);for(e in t)if(e in this){var i=t[e];i!==this[e]&&("fillColor"===e||0<(i=+i))&&(this[e]=i)}(t=n?t.Rb:!!(Xe(this.fillColor)&&this.width&&this.width))||(this.Rb=t)}oc(this)}function ah(t,e){var n;ah.l.constructor.call(this,e),e&&this.oc(e.style),t&&(this.j=!0),e&&(n=e.arrows)&&this.ol(n)}function bh(t,e){var n,i=!1,r=!1;if(e.length){for(i=0;i<e.length;i++)if(e[i]!==ch){r=!0;break}e=t.style,i=r?e.af||e.Rb&&t.j||(n=t.g||!1)&&e.$e&&n.Rb:e.Rb}return i&&t.Bc(!0)}function dh(t,e){dh.l.constructor.call(this,t,e)}function eh(t,e,n,i){var r,o=[],s=e.length;for(r=0;r<s;r++){var a=e[r];a.length&&o.push(fh(t,a,n,i))}return o}function fh(t,e,n,i){var r,o=[],s=e.length,a=0;for(t.sa=0,r=r||0;a<s;)o.push(gh(t,e[a++],e[a++],r,i));return n&&o.push(gh(t,e[0],e[1],r,i)),o}function gh(t,e,n,i,r){var o=t.sa;return o&&180<Ad(o-n)&&(n+=0>o?-360:360),t.sa=n,r.Rh(e,n+i)}function hh(t,e,n){for(var i,r,o,s=e,a=t.length+e;s--;){for(r=(e=t[s]).length,i=Array(r);r--;)o=e[r],i[r]=new I(o.x+n,o.y);t[--a]=i}}O.prototype.W=function(){for(var t,e={},n=Zg.length;n--;)e[t=Zg[n]]=this[t];return e},O.prototype.forWorkerMessage=O.prototype.W,t("H.map.ArrowStyle",$g),$g.prototype.Rb=!0,$g.prototype.fillColor="rgba(255,255,255,.75)",$g.prototype.width=1.2,$g.prototype.length=1.6,$g.prototype.frequency=5,$g.prototype.Nj=function(){return new $g(this)},$g.prototype.na=function(t){var e=this===t;return!e&&t&&(e=t.width===this.width&&t.fillColor===this.fillColor&&t.length===this.length&&t.frequency===this.frequency),e},$g.prototype.equals=$g.prototype.na,u(ah,M),t("H.map.Spatial",ah),ah.prototype.type=Pg.SPATIAL,ah.prototype.Mg=0,ah.prototype.style=Yg,ah.prototype.ua=function(){return this.style},ah.prototype.getStyle=ah.prototype.ua,ah.prototype.oc=function(t){var e=!0;return t?this.style=C(t,O)?t:new O(t):this.style?delete this.style:e=!1,e&&this.invalidate(Mg.VISUAL),this},ah.prototype.setStyle=ah.prototype.oc,ah.prototype.xm=function(){return this.g},ah.prototype.getArrows=ah.prototype.xm,ah.prototype.ol=function(t){var e=this.g,n=!1;return!t&&e?(delete this.g,n=!0):!t||e&&e.na(t)||(this.g=new $g(t),n=!0),n&&"none"!==this.style.strokeColor&&this.xa(1),this},ah.prototype.setArrows=ah.prototype.ol,ah.prototype.j=!1,ah.prototype.bo=function(){return this.j},ah.prototype.isClosed=ah.prototype.bo,ah.prototype.getGeometriesForTile=ah.prototype.Yd,ah.prototype.yh=function(){return y},ah.prototype.getLabels=ah.prototype.yh,u(dh,ah),t("H.map.GeoShape",dh),dh.prototype.getBoundingBox=dh.prototype.I;var ih=new L([0,0,0,0,0,0,0,0,0]),rh;function jh(t){uc(this,jh),jh.l.constructor.call(this),this.oa=kh(this,t,this.constructor,0)}function kh(t,e,n,i){var r,o=[];if(!yc(e))throw new D(n,i);for(r=0;r<e.length;r++){if(!t.a(e[r]))throw new D(n,i);o.push(t.b(e[r]))}return o}function lh(t){lh.l.constructor.call(this,t)}function mh(t,e){mh.l.constructor.call(this,!1,e),this.da(t)}function nh(t,e){if(!C(t,L)||2>t.Xe())throw new D(e,0)}function oh(t,e,n,i){var r=Ig(e,n.Yf());if(r.length&&(r=(t=eh(t,r,!1,e=n.$f())).length)){var o=n.Ze();e=e.w,n.x||hh(t,r,-e),n.x===(1<<n.z)-1&&hh(t,r,e),(n=ph(t,o.left,o.top,o.right,o.bottom,!1)).length&&i.push(new qh(n))}}function sh(t,e){if(x.URL)return new x.URL(t,e).toString();if(!t||!th(t))return t;if(!e||th(e))throw new TypeError("Failed to construct 'URL': Invalid base URL");rh||Fc(rh=document.createElement("a"));var n=rh;return n.href=e,"/"!==t[0]?t=n.href.replace(/\/[^\/]*$/,"/")+t:((e=n.origin)||(e=n.protocol+"//"+n.host),t=e+t),t}function th(t){var e=!1;return"string"===typeof t&&(e=!(-1<t.search(/^(http|https|data|blob):/)||"//"===t.substr(0,2))),e}function uh(t,e){var n,i,r,o=arguments.length;for(n=1;n<o;n++)if((i=arguments[n])&&i!==t&&i!==s){var s=i;for(r in i){var a=i[r];t[r]!==a&&(vh(a)?vh(t[r])?t[r]=uh(t[r],a):t[r]=qc(a):void 0!==a&&(t[r]=qc(a)))}}return t}u(jh,Wf),t("H.geo.MultiGeometry",jh),jh.prototype.splice=function(t,e,n){return t=[t],e!==B&&t.push(e),n&&(e=kh(this,n,this.splice,2),t=t.concat(e)),this.P=y,this.oa.splice.apply(this.oa,t)},jh.prototype.splice=jh.prototype.splice,jh.prototype.mc=function(t){var e=this.oa.length;if(!(0<=t&&t<e))throw new je(this.mc,t,[0,e-1]);return this.P=y,this.oa.splice(t,1)[0]},jh.prototype.removeAt=jh.prototype.mc,jh.prototype.remove=function(t){if(0<=(t=this.oa.indexOf(t))){var e=this.oa.splice(t,1)[0];this.P=y}return e||y},jh.prototype.remove=jh.prototype.remove,jh.prototype.Um=function(){return this.oa},jh.prototype.getGeometries=jh.prototype.Um,jh.prototype.push=function(t){var e=kh(this,[t],this.push,0)[0];this.P&&(this.P=this.P.kc(t.I())),this.oa.push(e)},jh.prototype.push=jh.prototype.push,jh.prototype.I=function(){var t,e,n;if(!(t=this.P)&&(t=y,this.oa.length))for(t=this.oa[0].I(),n=1;n<this.oa.length;n++)(e=this.oa[n].I())&&(t=t?t.kc(e):e);return this.P=t},jh.prototype.getBoundingBox=jh.prototype.I,jh.prototype.P=y,jh.prototype.b=function(t){return t},jh.prototype.na=function(t){var e,n=this===t;if(!n&&(n=C(t,this.constructor))){var i=this.oa;for(t=t.oa,n=(e=i.length)===t.length;n&&e--;)n=i[e].na(t[e])}return n},jh.prototype.equals=jh.prototype.na,n=jh.prototype,n.Sc=function(t){var e,n,i=this.oa,r=i.length,o=!1;if(r){for(t.push("("),e=0;e<r;e++)(n=0<e&&o)&&t.push(","),i[e].Sc(t),"EMPTY"===t[t.length-1]?t.splice(-1-n,1+n):o=!0;o?t.push(")"):t.splice(-1,1,"EMPTY")}else t.push("EMPTY");return t},n.toString=function(){return this.Sc([this.qb.toUpperCase()," "]).join("")},n.vc=function(){for(var t=[],e=this.oa,n=e.length;n--;)t[n]=e[n].vc();return t},n.W=function(){var t=jh.l.W.call(this);return t.type=this.qb,t},n.md=function(){for(var t=[],e=this.oa,n=e.length;n--;)t[n]=e[n].md();return t},u(lh,jh),t("H.geo.MultiLineString",lh),lh.prototype.a=function(t){return C(t,L)},lh.prototype.qb="Multi"+L.prototype.qb,lh.prototype.Lb="Multi"+L.prototype.Lb,u(mh,dh),t("H.map.Polyline",mh),mh.prototype.I=function(){return this.eb.I()},mh.prototype.getBoundingBox=mh.prototype.I,mh.prototype.eb=y,mh.prototype.da=function(t){var e,n,i=this.da;if(C(t,lh)){var r=t.oa;if(!(e=r.length))throw new D(i,0);for(n=0;n<e;n++)nh(r[n],i)}else nh(t,i);return this.yd=!!r,this.eb=t,this.xa(Mg.SPATIAL),this},mh.prototype.setGeometry=mh.prototype.da,mh.prototype.ba=function(){return this.eb},mh.prototype.getGeometry=mh.prototype.ba,mh.prototype.clip=function(t){var e=this.eb;return Ig(this.yd?e.oa[0]:e,t)},mh.prototype.clip=mh.prototype.clip,mh.prototype.Yd=function(t){var e,n=this.eb,i=[];if(this.yd)for(e=(n=n.oa).length;e--;)oh(this,n[e],t,i);else oh(this,n,t,i);return i.length?i:B},mh.prototype.getGeometriesForTile=mh.prototype.Yd,mh.prototype.W=function(){var t=mh.l.W.call(this),e=t.properties;return t.geometry=this.ba().W(),e.style=this.ua().W(),e.height=0,t},mh.prototype.forWorkerMessage=mh.prototype.W,t("H.util.webgl.mergeObjects",uh);var wh=mc();function xh(t,e,n){var i=n[t];return e&&i in e&&0>sc.indexOf(i)?(e=e[i],++t<n.length?xh(t,e,n):e):wh}var yh=xh.bind(null,0),zh={polygons:1,lines:1,"pattern-lines":1,points:1,text:1,raster:1,custom_icons:1,overlays:1},Ah={data:1,draw:1,enabled:1,filter:1,properties:1},Bh=Object.keys(Ah);function Ch(t,e,n,i,r,o){var s=i[t],a=n[s];if(++t<i.length){var l=e[s]||{};for(n=Bh.length;n--;){var c=Bh[n];if("draw"!==c||!o){var u=a[c];u!==B&&(l[c]=qc(u))}}Ch(t,l,a,i,r,o)}else r?l=qc(a):(l=a,delete n[s]);e[s]=e[s]?uh(e[s],l):l}var Dh=Ch.bind(null,0);function Eh(t,e){t in zh&&(e[t]=1)}function Fh(t,e,n){var i,r,o;for(i in t)if(Ah[i]){if("draw"===i){var s=t[i];for(r in s){var a=s[r];(o=a.style)?(a.style=e+o,Eh(o,n)):(delete s[r],s[e+r]=a,Eh(r,n))}}}else Fh(t[i],e,n)}function Gh(t,e){var n,i,r,o,s={};if(e+="_",n=(t=uh({},t)).styles)for(i in n){var a=n[i];if(delete n[i],n[e+i]=a,r=a.mix)for(zc(r)&&(r=[r]),o=r.length;o--;)Eh(r[o],s),r[o]=e+r[o];(o=a.base)&&(r||(r=a.mix=[]),r.unshift(e+o),delete a.base,Eh(o,s)),Eh(i,s)}else n=t.styles={};if(a=t.layers)for(i in a)r=a[i],delete a[i],(o=r.data)&&!o.layer&&(o.layer=i),a[e+i]=r,Fh(r,e,s);for(i in s)n[e+i]={base:i};return t}function Hh(t,e){var n,i=t.sources,r=Object.keys(i)[0],o=uh(i[r],{uid:e});for(n in i=t.layers,t.sources={},t.sources[e]=o,i)(t=i[n]).data?t.data.source===r&&(t.data.source=e):t.data={source:e}}function Ih(t,e){var n,i=t.textures,r=t.fonts;for(n in i){var o=i[n];o.url&&(o.url=sh(o.url,e))}for(n in r)if(yc(i=r[n]))for(o=0;o<i.length;o++){var s=i[o];s.url=s.url&&sh(s.url,e)}else(s=t.fonts[n]).url=s.url&&sh(s.url,e)}function Jh(t,e){return"function(){return feature."+t+(e||"")+";}"}function Kh(t){return Jh("style."+t,void 0)}function Lh(t,e,n,i){return t={base:t,blend:e,blend_order:n},i&&(t.clean_depth=!!i),t}function Mh(t){var e={};return e["translucent-"+(t?"extruded-":"")+"polygons"]={color:Kh("fillColor"),order:1,interactive:!0,extrude:t},e}function Nh(t,e,n,i){return t={data:{source:t,layer:e}},n&&(t.draw=n),i&&(t.filter=i),t}function vh(t){return Da(t)&&!yc(t)}function Oh(t,e){if(Oh.l.constructor.call(this),e&&th(e))throw new D(Oh,1,"Base URL must be absolute");this.A=Ph.INIT,this.a=null,this.c=e}u(Oh,F),t("H.map.render.Style",Oh),Oh.prototype.load=Oh.prototype.load,Oh.prototype.getState=function(){return this.A},Oh.prototype.getState=Oh.prototype.getState,Oh.prototype.O=function(t){this.A=t},Oh.prototype.setState=Oh.prototype.O,Oh.prototype.fc=function(){return this.c},Oh.prototype.getBaseUrl=Oh.prototype.fc,Oh.prototype.ud=function(){return qc(this.a)},Oh.prototype.getConfig=Oh.prototype.ud,Oh.prototype.Em=function(){return this.a},Oh.prototype.getConfigReference=Oh.prototype.Em,Oh.prototype.Jd=function(t){this.a=t},Oh.prototype.setConfig=Oh.prototype.Jd,Oh.prototype.Kb=function(t){this.a=null,this.O(Ph.ERROR);var e=Qh;se(this.aa,void 0!==e?String(e):void 0)?this.dispatchEvent(new td(Qh,t,this)):console.error(t)},Oh.prototype.dispatchError=Oh.prototype.Kb,Oh.prototype.s=function(){Oh.l.s.call(this),this.a=null};var Qh="error",Rh={nd:"change",fj:Qh},Ph={ERROR:-1,INIT:0,LOADING:1,READY:2};function Sh(t,e){if(Sh.l.constructor.call(this,t,e),zc(t))Th.test(t)&&-1===t.indexOf("import:")?(this.f=t,e||(this.j=th(this.f)?B:this.f)):this.g=t;else{if(!Da(t))throw new D(Sh,0,Uh);this.Jd(qc(t))}}function $h(t){var e,n=t.a;if(Da(n)){var i;if(i=t.i){for(var r in i=!1,n=n&&n.sources)if(n[r].type===t.i){i=!0;break}i=!(!n||i)}i&&(e="invalid source, the only valid type is "+t.i)}else e=Uh;return e&&t.Kb(e),!e}function Yh(t){t.dispatchEvent(new rd("change",t))}function Wh(t){if(t.getState()!==Ph.READY)throw new Xc(t.ff,"style is not ready yet")}function Xh(t,e,n,i){var r,o,s=[],a=yc(e)?e:[e];for(void 0===i&&(i=!0),a=a.sort().reverse();r=a.pop();){e=String(r).split(".");for(var l=t.a,c=e.length;c--&&!Ah[e[c]];);if(l&&0>c&&vh(l=yh(l.layers,e))||(l=wh),l===wh)throw new D(n,0,'Unresolvable layer ID "'+r+'"');if(s.push({id:e,gb:l}),i)for(o in l)!Ah[o]&&vh(l[o])&&a.push(r+"."+o)}return s}function Zh(t,e){var n,i=0;for(n=e.length;i!==n;){var r=e[i++],o=t;if(!(t=o[r]))break}return i===n?{node:t,parent:o,ug:r}:void 0}Oh.State=Ph,u(Sh,Oh),t("H.map.render.webgl.Style",Sh),Sh.prototype.load=function(){var t=this,e=this.fc();this.f?(this.O(Ph.LOADING),new rf("text/plain",this.f).then((function(t){var n={};return Vh(t,e,!1,(n[e]=!0,n))})).then((function(e){return t.Jd(e)}),(function(e){return t.Kb(e.message)})),this.f=null):this.g&&(this.O(Ph.LOADING),Vh(this.g,e).then((function(e){return t.Jd(e)}),(function(e){return t.Kb(e.message)})),this.g=null)},Sh.prototype.ul=function(t,e,n){var i;for(Wh(this),t=Xh(this,t,this.ul,n),n=0;n<t.length;n++){var r=t[n].gb.draw;for(i in r){var o=r[i];vh(o)&&(o.interactive=!!e)}}Yh(this)},Sh.prototype.setInteractive=Sh.prototype.ul,Sh.prototype.setProperty=function(t,e,n){var i,r=t.split("."),o=0,s=r.length;if(Wh(this),!tc(e))throw new D(this.setProperty,1,"value");if(i=Zh(this.a,r)){if(!(i.parent instanceof Object)||i.parent instanceof Array){if(!n)throw new D(this.setProperty,0,t+" property is not primitive type");r.pop(),r=Zh(this.a,r),i.parent=r.parent[r.ug]={}}i.parent[i.ug]=e}else{for(i=this.a;o!==s-1;)i[r[o]]={},i=i[r[o++]];i[r[o]]=e}$h(this)&&Yh(this)},Sh.prototype.setProperty=Sh.prototype.setProperty,Sh.prototype.Dh=function(t){return Wh(this),(t=Zh(this.a,t.split(".")))?qc(t.node):void 0},Sh.prototype.getProperty=Sh.prototype.Dh,Sh.prototype.removeProperty=function(t){Wh(this),(t=Zh(this.a,t.split(".")))&&t.parent&&t.parent.hasOwnProperty(t.ug)&&(delete t.parent[t.ug],$h(this)&&Yh(this))},Sh.prototype.removeProperty=Sh.prototype.removeProperty,Sh.prototype.Ne=function(t,e,n){var i;Wh(this);var r=this.a,o=r.layers,s=Xh(this,t,this.Ne,!1);for(t=s.length,i={};t--;)Dh(i,o,s[t].id,!!e,!!n);for(n={},t=(s=Object.keys(r)).length;t--;){var a=s[t],l=r[a];n[a]=l===o?i:qc(l)}return e||Yh(this),n},Sh.prototype.extractConfig=Sh.prototype.Ne,Sh.prototype.ff=function(t){if(Wh(this),!Da(t))throw new D(this.ff,0,"config");this.Jd(uh(this.a,t))},Sh.prototype.mergeConfig=Sh.prototype.ff,Sh.prototype.b=ba(2),Sh.prototype.toString=function(){return this.getState()===Ph.READY?x.H.gl.yaml.safeDump(this.a,{lineWidth:120}):""},Sh.prototype.s=function(){Sh.l.s.call(this),this.g=this.f=null};var Th=/^(http[s]?)?.*\.ya?ml/i,Uh="invalid style configuration";function Vh(t,e,n,i){n=void 0!==n&&n,i=void 0===i?{}:i;try{var r=x.H.gl.yaml.safeLoad(t,{json:!0})}catch(o){return Promise.reject(o)}return r&&(zc(t=r.import)&&(t=[t]),n&&e&&ai(r,e),delete r.import,yc(t)&&t.length)?(n=t.reduce((function(t,n){var r=e?sh(n,e):n;return i[r]||(i[r]=!0,t.push(new rf("text/plain",r).then((function(t){return Vh(t,r,!0,i)})))),t}),[]),Promise.all(n).then((function(t){var e={};return t.forEach((function(t){return t&&uh(e,t)})),uh(e,r),e}))):Promise.resolve(r)}function ai(t,e){function n(t){t.url&&(t.url=sh(t.url,e))}var i=t&&t.fonts;if(i)for(var r in i)yc(i[r])?i[r].forEach(n):n(i[r]);if(t=t&&t.textures)for(var o in t)n(t[o])}function ph(t,e,n,i,r,o){var s,a,l,c,u=t.length;if(u)for(s=[];u--;){var h=t[u],f=h.length,p=0;for(l=1;l<f;l++)if(c=bi(h[l-1],h[l],n,e,i,r)){var d=c[0],g=c[1];p&&p.na(d)?a.push(g):s.push(a=c),p=g,o&&(l=f,u=0)}}else s=t;return s}function bi(t,e,n,i,r,o){var s=t.x;t=-t.y;var a=e.x;if(e=-e.y,n=-n,o=-o,s>a){if(a>r||s<i)return;var l=s,c=t;s=a,t=e,a=l,e=c,l=1}else if(s>r||a<i)return;if(t>e){if(e>n||t<o)return;var u=1;t=-t,e=-e,c=o,o=-n,n=-c}else if(t>n||e<o)return;if(s<i){if((t+=(i-s)*(e-t)/(a-s))>n)return;s=i}if(t<o){if((s+=(o-t)*(a-s)/(e-t))>r)return;t=o}return a>r&&(e=t+(r-s)*(e-t)/(a-s),a=r),e>n&&(a=s+(n-t)*(a-s)/(e-t),e=n),u&&(t=-t,e=-e),l?[new I(a,-e),new I(s,-t)]:[new I(s,-t),new I(a,-e)]}function ci(t,e,n){var i,r;t=di(t,!0),e=di(e,!1);var o={},s=i=1;switch(~~(n||0)){case 1:s=i=0;break;case 2:i=0,s=1;break;case 3:i=1,s=0}n=i;var a=s;if(e&&t){for(e.Nf=ei(e.x,e.y,null,fi(e)),t.Nf=ei(t.x,t.y,null,fi(t)),s=e;s.next;s=s.next)if(!s.ab)for(i=t;i.next;i=i.next)if(!i.ab){var l=gi(s.next),c=gi(i.next);if(r=hi(s,l,i,c,o)){r=o.Yl;var u=o.Zl,h=o.np,f=o.op;ii(r=ei(h,f,null,null,null,null,!0,0,0,r),s,l),ii(l=ei(h,f,null,null,null,null,!0,0,0,u),i,c),r.ji=l,l.ji=r}}for(o=ce(e,ji(t)),n&&(o=!o),s=e;s;s=s.next)s.ab&&(s.nh=o,o=!o);for(o=ce(t,ji(e)),a&&(o=!o),i=t;i.next;i=i.next)i.ab&&(i.nh=o,o=!o);for(ki(e),ki(t);(t=li(e))!=e;){for(n=null;!t.Kg;t=t.ji){for(o=t.nh;(n=ei(t.x,t.y,n)).artificial=t.ab||t.ao,t.Kg=1,t=o?t.next:t.Tb;)if(t.ab){t.Kg=1;break}if(!t)break}n.ki=p;var p=n}return p}}function ei(t,e,n,i,r,o,s,a,l,c){return t={x:t,y:e,next:n||null,Tb:i||null,ki:r||null,ji:o||null,ab:!!s,nh:a||0,Kg:l||0,alpha:c||0},i&&(t.Tb.next=t),n&&(t.next.Tb=t),t}function gi(t){for(;t&&t.ab;)t=t.next;return t}function fi(t){if(t)for(;t.next;)t=t.next;return t}function li(t){var e=t;if(e)do{e=e.next}while(e!=t&&(!e.ab||e.ab&&e.Kg));return e}function ki(t){var e=fi(t);e.Tb.next=t,t.Tb=e.Tb}function hi(t,e,n,i,r,o){var s,a=e.x-t.x,l=e.y-t.y,c=i.x-n.x,u=i.y-n.y,h=a*u-l*c;return h?(c=((n.x-t.x)*u-(n.y-t.y)*c)/h,h=(l*(n.x-t.x)-a*(n.y-t.y))/h,0>c||1<c||0>h||1<h?0:(0===c?s=t:1===c?s=e:0===h?s=n:1===h&&(s=i),s&&!o?(s.x+=2480549651603763e-20,s.y+=7321997314118067e-20,s.Nf&&(s.Nf.x=s.x,s.Nf.y=s.y),hi(t,e,n,i,r)):(r.np=t.x+c*a,r.op=t.y+c*l,r.Yl=c,r.Zl=h,1))):0}function ji(t){for(var e=[];t;)e.push(t.x,t.y),t=t.next;return e}function ii(t,e,n){for(e=e.next;e!==n&&e.alpha<=t.alpha;)e=e.next;t.next=e,t.Tb=e.Tb,t.next.Tb=t,t.Tb.next=t}function di(t,e){for(var n,i=null,r=0,o=t.length;r<o;r++)(n=ei(t[r].x,t[r].y,i)).ao=e,(n.next=i)&&(i.Tb=n),i=n;return i}function P(t,e){var n;if(P.l.constructor.call(this),C(t,L,P,0),e!==B&&yc(e,P,1)){for(n=0;n<e.length;n++)C(e[n],L,P,1,"index "+n);this.Oa=e}else this.Oa=[];this.cb=t,this.a=[]}function mi(t){var e=P,n=L,i=t.la,r=t.ca,o=t.ma,s=t.ia;return r=[i,r,B,i,s,B,o,s,B,o,r,B],180<=t.Db()&&(r.splice(9,0,o,t=t.kb().lng,B),r.splice(3,0,i,t,B)),new e(new n(r))}Sh.normalize=ai,Sh.prototype.Jd=function(t){Sh.l.Jd.call(this,t),$h(this)&&(this.O(Ph.READY),Yh(this))},Sh.prototype.ud=function(){return Sh.l.ud.call(this)},Sh.prototype.fc=function(){return this.j||Sh.l.fc.call(this)},t("H.map.Style",Sh),Sh.State=Ph,t("H.math.clipping.clipStrips",ph),t("H.math.clipping.clipPolygon",ci),u(P,Wf),t("H.geo.Polygon",P),P.fromRect=mi;var ni={NORTH:90,SOUTH:-90};function oi(t,e){var n,i,r;return(r=t.I())&&((n=t.vh(!0))&&(i=t.Xe())&&(r=r.kc(eg([t.Oe(0),t.Oe(i-1)],!0),!0)),360===r.Db()&&1===n%2&&(r=r.gd(e,0))),r}function pi(t,e,n,i){i=void 0===i||i;var r=t.Oa,o=qi.bind(null,e,n);return be(e,n,t.cb.X,0,!0,3)!==ae.NONE&&(!i||!r.some(o))}function qi(t,e,n){return be(t,e,n.X,0,!0,3)===ae.SURFACE}function ri(t,e){e=e.X,t=t.cb.X;var n,i,r=e.length-3,o=t.length-3,s={};for(n=0;n<r;n+=3){var a=e[n],l=e[n+1],c=e[n+3],u=e[n+4];for(i=0;i<o;i+=3){var h=t[i],f=t[i+1],p=t[i+3];if(hi({x:l,y:a},{x:u,y:c},{x:f,y:h},{x:t[i+4],y:p},s,!0))return!0}}return!1}function si(t,e){var n=e.cb,i=e.Oa,r=i.length,o=n.X,s=o.length,a=t.cb.X,l=a.length;if(ri(t,n))return!0;for(n=0;n<s;n+=3)if(pi(t,o[n],o[n+1]))return!0;for(n=0;n<l;n+=3)if(pi(e,a[n],a[n+1]))return!0;for(n=0;n<r;n++)if(ri(t,i[n]))return!0;return!1}function ti(t){ti.l.constructor.call(this,t)}function qh(t,e,n){this.paths=this.a=t,e!==B&&(this.interiorsIndex=this.b=e),n!==B&&(this.outlinesIndex=this.c=n)}P.Direction=ni,P.prototype.Bd=ni.NORTH,P.prototype.vl=function(t){return this.Bd!==t&&(this.P=y,this.a.length=0,this.Bd=t),this},P.prototype.setPoleCovering=P.prototype.vl,P.prototype.tn=function(){return this.Bd},P.prototype.getPoleCovering=P.prototype.tn,P.prototype.Om=function(){return this.cb},P.prototype.getExterior=P.prototype.Om,P.prototype.sl=function(t){if(!C(t,L))throw new D(this.sl,0,t);this.cb=t,this.P=y},P.prototype.setExterior=P.prototype.sl,P.prototype.Zm=function(){return this.Oa},P.prototype.getInteriors=P.prototype.Zm,P.prototype.Jg=function(t,e,n){var i,r=arguments.length;for(i=2;i<r;i++)C(arguments[i],L,this.Jg,i);var o=this.Oa.splice.apply(this.Oa,arguments);for(i=2;i<r;i++)arguments[i]=B;return this.a.splice.apply(this.a,arguments),o},P.prototype.spliceInteriors=P.prototype.Jg,P.prototype.Ro=function(t){return this.Jg(t,1)[0]},P.prototype.removeInteriorAt=P.prototype.Ro,P.prototype.Qo=function(t){return 0>(t=this.Oa.indexOf(t))?B:this.Jg(t,1)[0]},P.prototype.removeInterior=P.prototype.Qo,P.prototype.$k=function(t){if(!C(t,L))throw new D(this.$k,0,t);this.Oa.push(t)},P.prototype.pushInterior=P.prototype.$k,P.prototype.I=function(){var t=this.P;return t||(this.P=t=oi(this.cb,this.Bd)),t},P.prototype.getBoundingBox=P.prototype.I,n=P.prototype,n.Mj=function(t){var e=this.Oa.length;if(0>t||t>=e)throw new je(this.Mj,t,[0,e-1]);return(e=this.a[t])||(this.a[t]=e=oi(this.Oa[t],this.Bd)),e},n.cb=y,n.Oa=[],n.qb="Polygon",n.Sc=function(t){var e,n=this.Oa,i=n.length;if(this.cb.Xe()){for(t.push("("),this.cb.Sc(t,!0),e=0;e<i;e++)n[e].Xe()&&(t.push(","),n[e].Sc(t,!0));t.push(")")}else t.push("EMPTY");return t},n.Lb="Polygon",n.md=function(){var t,e=[],n=this.Oa,i=this.cb.md();for(i[0].toString()!==i[i.length-1].toString()&&i.push(i[0]),e.push(i),t=0;t<n.length;t++)(i=n[t].md())[0].toString()!==i[i.length-1].toString()&&i.push(i[0]),e.push(i);return e},n.W=function(){var t=P.l.W.call(this);return this.I().Eb()&&(t.type="Multi"+t.type),t},n.vc=function(){var t=[],e=this.Oa,n=e.length;for(t.push(this.cb.vc());n--;)t[n+1]=e[n].vc();return this.I().Eb()?[t]:t},n.na=function(t){var e=!1;if(C(t,P)){var n=t.Oa,i=this.Oa.length;e=n.length;var r=0;for(e=this.cb.na(t.cb)&&i===e;e&&r<i;)e=e&&this.Oa[r].na(n[r]),r++}return e},u(ti,jh),t("H.geo.MultiPolygon",ti),ti.prototype.a=function(t){return C(t,P)},ti.prototype.qb="Multi"+P.prototype.qb,ti.prototype.Lb="Multi"+P.prototype.Lb,qh.prototype.interiorsIndex=qh.prototype.b=Td,qh.prototype.outlinesIndex=qh.prototype.c=Td;var ch=pc(new qh([])),vi=oc([]);function wi(t,e){var n=e&&(+e.extrusion||+e.extrude),i=e&&+e.elevation,r=0;if(wi.l.constructor.call(this,!0,e),0<i&&(r+=i,this.f=i),0<n&&(r+=n,this.i=n),r>xi)throw new je(wi,r,[0,xi]);C(t,L)?this.da(new P(t)):this.da(t)}u(wi,dh),t("H.map.Polygon",wi),wi.prototype.i=0,wi.prototype.f=0,wi.prototype.eb=y;var xi=2047;function yi(t,e,n,i){var r,o,s=0,a=!0;if(r=zi(t,e.cb,n,i,e.I())){var l=new qh(r),c=e.Oa;if(o=c.length)for(l.b=l.a.length;s<o;s++)(r=zi(t,c[s],n,i,e.Mj(s)))&&(l.a=l.a.concat(r));for(o=l.a.length,s=0;s<o;s++)if(l.a[s]!==vi){a=!1;break}a&&(l=s%2?ch:B)}return l}function zi(t,e,n,i,r){var o,s=n.Ze(),a=r,l=a.Db(),c=[[]],u=e.X,h=[],f=u.length,p=!1;for(o=0;o<f;o+=3){var d=u[o],g=u[o+1];p||180!=Ad(g)||(h.push(d),h.push(g),h.push(d),h.push(-g),p=!0),h.push(d),h.push(g)}if(u=h,360>l&&-180==a.ca&&(a=new K(a.la,180,a.ma,a.ia)),360>l&&180==a.ia&&(a=new K(a.la,a.ca,a.ma,-180)),a.Eb()){for(d=(l=u).length,u=-1,h=0;h<d-2;h+=2)if(Uf(l[h+1],l[h+3])){u=h+2;break}-1===u&&Uf(l[d-1],l[1])&&(u=d),-1!==u&&(f=l[u-2],h=l[u-1],o=l[u%d],p=l[(u+1)%d],180!==Ad(f)&&180!==Ad(o)&&(g=Ad(o-f),d=Ad(p-h),d+=180<d?-360:0,p=Ad(180-p),p+=180<p?-360:0,d&&p&&(g/=Ad(d)/Ad(p),f=o+(o>f?-g:g),h=0<h?180:-180,l.splice(u,0,f,h,f,-h)))),u=l}if(c[0]=Ai([].concat(u),a.ca),360>a.Db()&&a.Pd(new Xf(a.la,180))&&(u=Ai([].concat(u),a.ia),c.push(u)),t=eh(t,c,!0,a=n.$f()),360===r.Db()&&1===e.vh(!0)%2){for(e=t,t=n.Ze(),e[0][1].x>e[0][e[0].length-1].x&&(e[0]=e[0].reverse()),u=[],l=e[0].length-1,c=0;c<l;c++)h=e[0][c],u[c]=new I(h.x-2*a.w,h.y),u[c+l]=new I(h.x-a.w,h.y),u[c+2*l]=new I(h.x,h.y),u[c+3*l]=new I(h.x+a.w,h.y),u[c+4*l]=new I(h.x+2*a.w,h.y);e[0]=u,(c=a.Rh(i,0)).y=2*t[i===ni.NORTH?"top":"bottom"],i=c.clone(),c.x=e[0][e[0].length-1].x+1,i.x=e[0][0].x-1,e[0].push(c,i),t=e}if(ph(t,i=s.left,e=s.top,c=s.right,s=s.bottom,!0).length){if(!n.Yf().fh(r)){for(n=t,r=[new I(i,e),new I(c,e),new I(c,s),new I(i,s)],s=[],t=n.length;t--;)if(i=ci(r,n[t]))for(e=Bi(i),s.push(e);i.ki;)e=Bi(i=i.ki),s.push(e);t=s}}else n=Ci(i,e,t[0]),t[1]&&(n^=Ci(i,e,t[1])),t=n?[vi]:B;return t}function Ci(t,e,n){var i,r,o,s=i=n[0].x,a=r=n[0].y,l=1;for(o=n.length;l<o;l++){var c=n[l].x,u=n[l].y;c>i?i=c:c<s&&(s=c),u>r?r=u:u<a&&(a=u)}return s<=t&&t<=i&&a<=e&&e<=r&&ce({x:t,y:e},de(n.concat(n[0])))}function Bi(t){var e=[],n=t;do{var i=xd(100*(n.Io?n.Io:n.x))/100,r=xd(100*(n.Jo?n.Jo:n.y))/100;if(!o||.01<Cd(Dd(o.x-i,2)+Dd(o.y-r,2))){var o=new I(i,r);e.push(o)}n=n.next}while(n&&n!==t);return e}function Ai(t,e){var n,i=Number.POSITIVE_INFINITY,r=-1,o=t.length;for(n=0;n<o;n+=2){var s=Ad(t[n+1]-e);(s+=180<s?360-s:s)<i&&(i=s,r=n)}return 0<n?(e=t.splice(r,t.length-r)).concat(t):t}function Di(t,e,n){Di.l.constructor.call(this,ih,n),this.Fg(t),this.Ni(e),n&&"precision"in n&&this.Li(n.precision)}function Ei(t){t.eb!==y&&Di.l.da.call(t,Fi(t))}function Fi(t){var e=t.b,n=e.lat,i=t.fa,r=0,o=new L;if(90===Ad(n))for(n=e.Lg(0,i,!0).lat;360>r;r+=120)o.xi(n,r-180,B);else for(t=360/(t=t.F);360>r;r+=t)o.Dd(e.Lg(r,i,!0));return e=new P(o),0>n&&e.vl(ni.SOUTH),e}function Gi(t,e){if(!C(t,Element)){if(Hi.innerHTML=t,!(t=Hi.firstElementChild))throw new D(Gi,0,"No element data");Hi.removeChild(t);var n=!0;Hi.innerHTML=""}this.a=0!==hf(t).length,this.c=n?t:jf(t,x.document,this.a),e&&((n="onAttach")in e&&wc(t=e[n],"Function",Gi,1,n)&&(this.li=t),(n="onDetach")in e&&wc(t=e[n],"Function",Gi,1,n)&&(this.b=t))}wi.MAX_EXTRUDE_HEIGHT=xi,wi.prototype.Ei=function(t){var e=+t;if(e!==t)throw new D(this.Ei,0,t);if(0>e||this.f+e>xi)throw new je(this.Ei,this.f+e,[0,xi]);this.i=e,this.xa(Mg.SPATIAL)},wi.prototype.setExtrusion=wi.prototype.Ei,wi.prototype.Pm=function(){return this.i},wi.prototype.getExtrusion=wi.prototype.Pm,wi.prototype.Di=function(t){var e=+t;if(e!==t)throw new D(this.Di,0,t);if(0>e||this.i+e>xi)throw new je(this.Di,this.i+e,[0,xi]);this.f=e,this.xa(Mg.SPATIAL)},wi.prototype.setElevation=wi.prototype.Di,wi.prototype.Nm=function(){return this.f},wi.prototype.getElevation=wi.prototype.Nm,wi.prototype.ba=function(){return this.eb},wi.prototype.getGeometry=wi.prototype.ba,wi.prototype.da=function(t){if(t===y||C(t,P))var e=!1;else C(t,ti,this.da,0),e=!0;return this.yd=e,e=this.eb,this.eb=t,e!==y&&this.xa(Mg.SPATIAL),this},wi.prototype.setGeometry=wi.prototype.da,wi.prototype.I=function(){return this.ba().I()},wi.prototype.getBoundingBox=wi.prototype.I,wi.prototype.Yd=function(t){var e,n,i,r=this.ba();if(this.yd){var o=0;for(i=(r=r.oa).length;o<i;o++)(n=yi(this,r[o],t,r[o].Bd))&&(e||(e=[]),e.push(n))}else(n=this.Da)===B&&(n=this.yd?ni.NORTH:this.ba().Bd),(n=yi(this,r,t,n))&&(e=[n]);return e},wi.prototype.getGeometriesForTile=wi.prototype.Yd,wi.prototype.V=y,wi.prototype.W=function(){var t,e=wi.l.W.call(this),n=this.ba(),i=this.yd?n.oa:[n],r=e.properties,o=e.geometry=n.W();if(r.style=this.ua().W(),r.height=this.i+this.f,r.min_height=this.f,this.I().Eb()&&(o.type="MultiPolygon",this.yd)){var s=[];i.forEach((function(e,n){t=o.coordinates[n],e.I().Eb()?s=s.concat(t):s.push(t)})),o.coordinates=s}return e},wi.prototype.forWorkerMessage=wi.prototype.W,u(Di,wi),t("H.map.Circle",Di),Di.prototype.Fg=function(t){(t=Zf(t)).na(this.b)||(this.b=t,Ei(this))},Di.prototype.setCenter=Di.prototype.Fg,Di.prototype.kb=function(){return this.b},Di.prototype.getCenter=Di.prototype.kb,Di.prototype.Ni=function(t){if(E(t=Yd(t,0,6371000.79*Md/2)))throw new D(this.Ni,0,t);this.fa!==t&&(this.fa=t,Ei(this))},Di.prototype.setRadius=Di.prototype.Ni,Di.prototype.yn=function(){return this.fa},Di.prototype.getRadius=Di.prototype.yn,Di.prototype.F=60,Di.prototype.Li=function(t){if(!Cc(t))throw new D(this.Li,0,t);this.F!==(t=Yd(xd(t),4,360))&&(this.F=t,Ei(this))},Di.prototype.setPrecision=Di.prototype.Li,Di.prototype.vn=function(){return this.F},Di.prototype.getPrecision=Di.prototype.vn,Di.prototype.da=function(){return this},Di.prototype.setGeometry=Di.prototype.da,Di.prototype.ba=function(){return this.eb||Di.l.da.call(this,Fi(this)),this.eb},Di.prototype.getGeometry=Di.prototype.ba,t("H.map.DomIcon",Gi);var Hi=document.createElement("DIV");function Ii(t){Ii.l.constructor.call(this,t)}function Ji(t,e){this.w=+t,this.h=+e}function Ki(t,e){var n,i=t,r=e||[];if(t!==Li.NONE){if(e=n=r.length,-1===this.b.indexOf(i))throw new D(Ki,0,t);if(!r)throw new D(Ki,1,r);for(;n--;)if(E(r[n]))throw new D(Ki,1,r);if(i===Li.RECT&&3<e&&(r=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]],i=Li.POLYGON),i===Li.CIRCLE&&2<e&&0<(t=r[2])){i=r[0];var o=r[1],s=360/(n=vd(2*zd(t),40));for(r=[];n--;){var a=s*n*Rd;r.push(i+Fd(a)*t,o+Hd(a)*t)}i=Li.POLYGON}if(i!==Li.POLYGON||!e||r.length%2)throw new D(Ki,1,r);this.a=r}}Gi.prototype.li=null,Gi.prototype.b=null,Gi.prototype.Nj=function(t){return jf(this.c,t,this.a)},Gi.prototype.a=!1,u(Ii,jh),t("H.geo.MultiPoint",Ii),Ii.prototype.a=function(t){return Yf(t)},Ii.prototype.b=function(t){return C(t,Xf)?t:Zf(t)},Ii.prototype.qb="Multi"+Xf.prototype.qb,Ii.prototype.Lb="Multi"+Xf.prototype.Lb,t("H.math.Size",Ji),t("H.map.HitArea",Ki);var Li={NONE:0,RECT:1,CIRCLE:2,POLYGON:3};function Mi(t,e){var n;uc(this,Mi),Mi.l.constructor.call(this,e),this.da(t),e&&"icon"in e&&(n=e.icon),this.Nc(n||Ni(this))}function Ni(t){var e=t.g;return e||(e=t.constructor.prototype.g=t.f(Oi)),e}Ki.ShapeType=Li,Ki.prototype.b=[Li.RECT,Li.CIRCLE,Li.POLYGON],Ki.prototype.eg=function(t,e,n){return this.a?be(t,e,this.a,n,!0):ae.NONE},Ki.prototype.hitTest=Ki.prototype.eg,u(Mi,M),t("H.map.AbstractMarker",Mi),Mi.prototype.ba=function(){return this.b},Mi.prototype.getGeometry=Mi.prototype.ba,Mi.prototype.da=function(t){var e=this.b;return C(t,Xf)||C(t,Ii)?this.b=t:(Yf(t,this.da,0),this.b=Zf(t)),e&&this.xa(Mg.SPATIAL),this},Mi.prototype.setGeometry=Mi.prototype.da,Mi.prototype.I=function(){return this.b.I()},Mi.prototype.Ab=function(){return this.icon},Mi.prototype.getIcon=Mi.prototype.Ab,Mi.prototype.Nc=function(t){var e=this.icon,n=!e;if(e!==t){if(!this.mk(t)){if(n)throw new D(this.constructor,1,t);throw new D(this.Nc,0,t)}this.icon=t,n||this.xa(Mg.VISUAL)}return this},Mi.prototype.setIcon=Mi.prototype.Nc;var Oi={svg:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="47" viewBox="0 0 38 47"><g fill="none"><path fill="#0F1621" fill-opacity=".4" d="M15 46c0 .317 1.79.574 4 .574s4-.257 4-.574c0-.317-1.79-.574-4-.574s-4 .257-4 .574z"></path><path fill="#01b6b2" d="M33.25 31.652A19.015 19.015 0 0 0 38 19.06C38 8.549 29.478 0 19 0S0 8.55 0 19.059c0 4.823 1.795 9.233 4.75 12.593L18.975 46 33.25 31.652z"></path><path fill="#6A6D74" fill-opacity=".5" d="M26.862 37.5l4.714-4.77c3.822-3.576 5.924-8.411 5.924-13.62C37.5 8.847 29.2.5 19 .5S.5 8.848.5 19.11c0 5.209 2.102 10.044 5.919 13.614l4.719 4.776h15.724zM19 0c10.493 0 19 8.525 19 19.041 0 5.507-2.348 10.454-6.079 13.932L19 46 6.079 32.973C2.348 29.495 0 24.548 0 19.04 0 8.525 8.507 0 19 0z"></path></g></svg>',size:new Ji(38,47),anchor:new I(19,45),hitArea:new Ki(Li.POLYGON,[19,46,2,27,0,18,5,6,19,0,32,5,38,15,36,27,19,47])};function Pi(t,e){Pi.l.constructor.call(this,t,e)}function Qi(t,e,n,i){Qi.l.constructor.call(this,t,e,n),this.modifiers=i}Mi.prototype.W=function(){var t=Mi.l.W.call(this),e=this.Ab(),n=e.Bb(),i=e.td();return t.geometry=this.ba().W(),n&&((e=t.properties.icon={id:e.uid}).size={w:n.w,h:n.h},e.offset=[n.w/2-(i?i.x:0),n.h/2-(i?i.y:0)]),t},Mi.prototype.forWorkerMessage=Mi.prototype.W,u(Pi,Mi),t("H.map.DomMarker",Pi),Pi.prototype.type=Pg.DOM_MARKER,Pi.prototype.Mg=2,Pi.prototype.f=function(t){var e=new Gi(t.svg,t);return t=t.anchor,e.c.style.margin=-t.y+"px 0 0 -"+t.x+"px",e},Pi.prototype.mk=function(t){return C(t,Gi)},u(Qi,Ng),t("H.map.ChangeEvent",Qi);var Ri={SIZE:1,POSITION:2,HEADING:4,TILT:8,INCLINE:16,ZOOM:32,BOUNDS:64};function Si(){this.a=[],Si.l.constructor.call(this)}function Ti(t,e,n){if(t=t.a.length,n)var i=t;else if(E(i=0>(i=+e)?wd(0,t+i):vd(t,i)))throw new je(Si,e,[0,t-1]);return i}function Vi(t,e){var n=t.a.splice(e,1)[0];return t.dispatchEvent(new Ui(t,t.b.Be,e,null,n,null)),n}function Ui(t,e,n,i,r,o){Ui.l.constructor.call(this,e,t),this.idx=n,this.added=i,this.removed=r,this.moved=o}Qi.Type=Ri,Qi.prototype.Ul=Ri.SIZE,Qi.prototype.SIZE=Qi.prototype.Ul,Qi.prototype.mj=Ri.POSITION,Qi.prototype.POSITION=Qi.prototype.mj,Qi.prototype.gj=Ri.HEADING,Qi.prototype.HEADING=Qi.prototype.gj,Qi.prototype.oj=Ri.TILT,Qi.prototype.TILT=Qi.prototype.oj,Qi.prototype.hj=Ri.INCLINE,Qi.prototype.INCLINE=Qi.prototype.hj,Qi.prototype.pj=Ri.ZOOM,Qi.prototype.ZOOM=Qi.prototype.pj,Qi.prototype.dj=Ri.BOUNDS,Qi.prototype.BOUNDS=Qi.prototype.dj,u(Si,F),t("H.util.OList",Si),Si.prototype.add=function(t,e){e=Ti(this,e,E(e)),this.a.splice(e,0,t),this.dispatchEvent(new Ui(this,this.b.ze,e,t,null,null))},Si.prototype.add=Si.prototype.add,Si.prototype.mc=function(t){return this.get(t),Vi(this,t)},Si.prototype.removeAt=Si.prototype.mc,Si.prototype.remove=function(t){return 0<=(t=this.indexOf(t))&&(Vi(this,t),!0)},Si.prototype.remove=Si.prototype.remove,Si.prototype.set=function(t,e){if(0!==this.a.length||0!==t){this.get(t),t=Ti(this,t,!1);var n=this.a[t]}return this.a[t]=e,this.dispatchEvent(new Ui(this,this.b.Ce,t,e,n,null)),n},Si.prototype.set=Si.prototype.set,Si.prototype.indexOf=function(t){return this.a.indexOf(t)},Si.prototype.indexOf=Si.prototype.indexOf,Si.prototype.get=function(t){var e=Ti(this,t,!1),n=this.a;if(e>=n.length)throw new je(this.get,t,[0,n.length-1]);return n[e]},Si.prototype.get=Si.prototype.get,Si.prototype.en=function(){return this.a.length},Si.prototype.getLength=Si.prototype.en,Si.prototype.Ma=function(){return[].concat(this.a)},Si.prototype.asArray=Si.prototype.Ma,Si.prototype.flush=function(){for(var t=this.a.length;t--;)Vi(this,t)},Si.prototype.flush=Si.prototype.flush,Si.prototype.s=function(){this.flush(),Si.l.s.call(this)},Si.prototype.b={ze:"add",Be:"remove",Ce:"set",sp:"move"},u(Ui,rd);var Wi={};function Xi(t,e){this.projection=t||Wi,this.b=0,this.a=this.exp=Bd(e||256)/Ld,Yi(this),this.y=this.x=0}t("H.geo.mercator",Wi),Wi.a=function(t){return vd(1,wd(0,.5-Bd(Id(Od+Nd*t/180))/Md/2))},Wi.b=function(t){return t/360+.5},Wi.ig=function(t,e,n){return n?(n.x=Wi.b(e),n.y=Wi.a(t)):n=new I(Wi.b(e),Wi.a(t)),n},Wi.latLngToPoint=Wi.ig,Wi.$c=function(t,e){return Wi.ig(t.lat,t.lng,e)},Wi.geoToPoint=Wi.$c,Wi.f=function(t){return 0>=t?90:1<=t?-90:Sd*(2*Jd(Ed(Md*(1-2*t)))-Nd)},Wi.c=function(t){return 360*(1===t?1:Wd(t,1))-180},Wi.Ra=function(t,e,n){return n?(n.lat=Wi.f(e),n.lng=Wi.c(t)):n=new Xf(Wi.f(e),Wi.c(t)),n},Wi.xyToGeo=Wi.Ra,Wi.sg=function(t,e){return Wi.Ra(t.x,t.y,e)},Wi.pointToGeo=Wi.sg,t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0),t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22),t("H.geo.PixelProjection",Xi);var Zi=Ad(24)+Ad(-8);function Yi(t){t.a>Zi&&(t.a=Zi),t.w=Dd(2,t.a),t.h=Dd(2,t.a)}function $i(t){t=t||{},$i.l.constructor.call(this),this.min=0,this.max=22,this.im=this.dark=!!t.dark,t.min&&this.Ii(t.min),t.max&&this.Gi(t.max),this.pixelProjection=new Xi(t.projection,t.minWorldSize),t.provider&&(this.a=t.provider,this.g=A(this.g,this),this.a.addEventListener(aj.prototype.g.Ea,this.g,!1,this),this.i=A(this.i,this),this.a.addEventListener(aj.prototype.g.Ae,this.i,!1,this))}function bj(t,e,n){var i=t[e],r="min"===e,o=r?t.Ii:t.Gi;if(n!==i){if(!(r?n<=t.max:n>=t.min))throw new D(o,0,"Invalid condition min <= max");t[e]=n,t.g(),t.i(),t.dispatchEvent(new Ng(r?t.b.lj:t.b.kj,n,i))}return t}function cj(t){var e;if(cj.l.constructor.call(this),this.dispatchEvent=A(this.dispatchEvent,this),t){var n=t.length;for(e=0;e<n;e++)this.add(t[e])}}function dj(t,e){var n=e.getProvider&&e.getProvider();n&&(ej[n.uid]=n),e.ka(t)}function fj(t){var e=t.getProvider&&t.getProvider();e&&delete ej[e.uid],t.ka(null)}Xi.prototype.Yk=Wi,Xi.prototype.projection=Xi.prototype.Yk,Xi.prototype.x=0,Xi.prototype.x=Xi.prototype.x,Xi.prototype.y=0,Xi.prototype.y=Xi.prototype.y,Xi.prototype.lp=Dd(2,Zi),Xi.prototype.w=Xi.prototype.lp,Xi.prototype.Tn=Dd(2,Zi),Xi.prototype.h=Xi.prototype.Tn,Xi.prototype.Pa=function(t){if(E(t))throw new D(this.Pa,0,t);var e=this.x/this.w,n=this.y/this.h;this.b=t,this.a=this.exp+t,Yi(this),this.x=e*this.w,this.y=n*this.h},Xi.prototype.rescale=Xi.prototype.Pa,Xi.prototype.bk=function(){return this.b||0},Xi.prototype.getZoomScale=Xi.prototype.bk,Xi.prototype.jb=function(t,e){return(t=this.projection.ig(t.lat,t.lng,e)).x=t.x*this.w-this.x,t.y=t.y*this.h-this.y,t},Xi.prototype.geoToPixel=Xi.prototype.jb,Xi.prototype.jf=function(t,e){return this.projection.Ra((t.x+this.x)/this.w,(t.y+this.y)/this.h,e)},Xi.prototype.pixelToGeo=Xi.prototype.jf,Xi.prototype.Ra=function(t,e,n){return this.projection.Ra((t+this.x)/this.w,(e+this.y)/this.h,n)},Xi.prototype.xyToGeo=Xi.prototype.Ra,Xi.prototype.Rh=function(t,e,n){return(t=this.projection.ig(t,e,n)).x=t.x*this.w-this.x,t.y=t.y*this.h-this.y,t},Xi.prototype.latLngToPixel=Xi.prototype.Rh,Xi.prototype.ne=function(t){return new I(t.x*this.w-this.x,t.y*this.h-this.y)},Xi.prototype.pointToPixel=Xi.prototype.ne,u($i,F),t("H.map.layer.Layer",$i),$i.prototype.min=0,$i.prototype.min=$i.prototype.min,$i.prototype.max=22,$i.prototype.max=$i.prototype.max,$i.prototype.qa=y,$i.prototype.pixelProjection=$i.prototype.qa,$i.prototype.b={Ea:"update",Ae:"configchange",lj:"minchange",kj:"maxchange"},$i.prototype.ga=function(){return this.a},$i.prototype.getProvider=$i.prototype.ga,$i.prototype.eo=function(t){return this.min<=t&&t<=this.max},$i.prototype.isValid=$i.prototype.eo,$i.prototype.Ii=function(t){return bj(this,"min",+t)},$i.prototype.setMin=$i.prototype.Ii,$i.prototype.Gi=function(t){return bj(this,"max",+t)},$i.prototype.setMax=$i.prototype.Gi,$i.prototype.g=function(){this.dispatchEvent(this.b.Ea)},$i.prototype.i=function(){this.dispatchEvent(this.b.Ae)},$i.prototype.s=function(){$i.l.s.call(this)},$i.prototype.ta=function(){return null},$i.prototype.getCopyrights=$i.prototype.ta,u(cj,Si),t("H.map.DataModel",cj),cj.prototype.add=function(t,e){C(t,$i,this.add,0),dj(this,t),cj.l.add.call(this,t,e)},cj.prototype.add=cj.prototype.add,cj.prototype.set=function(t,e){return C(e,$i,this.set,0),dj(this,e),(t=cj.l.set.call(this,t,e))&&fj(t),t},cj.prototype.set=cj.prototype.set,cj.prototype.mc=function(t){var e;return(e=cj.l.mc.call(this,t))&&fj(e),e},cj.prototype.removeAt=cj.prototype.mc,cj.prototype.remove=function(t){var e;return(e=cj.l.remove.call(this,t))&&fj(t),e},cj.prototype.remove=cj.prototype.remove,cj.prototype.flush=function(){for(var t=this.a.length;t--;)this.mc(t);cj.l.flush.call(this)},cj.prototype.flush=cj.prototype.flush;var ej={};function gj(t,e,n){if(t=ej[t])return C(t[e],Function,gj,1,"invalid method"),t[e].apply(t,n)}function hj(t,e){Ca(t)&&(this.i=t),Cc(e)&&(this.a=e)}Fc(ej),cj.invoke=gj,t("H.util.Request",hj),hj.State={PENDING:0,PROCESSING:1,COMPLETE:2,CANCELLED:3,ERROR:4};var ij=[0,1,2,3,4],qj;function jj(t,e){t.b<t.a&&(tc(e)||(e=2),0===e||1===e||0!==t.A&&1!==t.A||(t.b++,2!==e&&t.g++,t.O(t.b<t.a?1:2)))}function kj(){}function lj(t,e){var n=t.N(),i=n.ownerDocument;lj.l.constructor.call(this),this.a=t,this.R=n=n.appendChild(mj(i,"DIV","position:absolute;bottom:0;right:0;left:0px;z-index:1;direction:ltr;pointer-events:none;height:40px-webkit-touch-callout: none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:none;",null,"H_imprint")),this.Ff=mj(i,"DIV","margin: 0 0 "+nj+"px "+nj+"px;display:inline-block;",oj,"H_logo"),n.appendChild(this.Ff),n=n.appendChild(mj(i,"DIV","right:0;bottom:0;position:absolute;background-color:rgba(255,255,255,.8);color:#0F1621;padding:2px 16px",null,"H_copyright")),this.g=n.appendChild(mj(i,"A","color:inherit; margin:0px 8px; text-decoration:none; pointer-events:all;","Terms of use")),this.g.target="_blank",this.f=n.appendChild(mj(i,"SPAN","margin:0px 8px")),this.j=Ua(pj),this.Ji(e),this.c=A(this.c,this),this.b=A(this.b,this),this.a.addEventListener(this.a.m.jj,this.c),this.a.a.addEventListener("add",this.b),this.a.a.addEventListener("remove",this.b),this.a.a.addEventListener("set",this.b),this.b()}hj.prototype.A=0,hj.prototype.getState=function(){return this.A},hj.prototype.getState=hj.prototype.getState,hj.prototype.O=function(t){if(0>ij.indexOf(t))throw new D(this.O,0,t);(this.A!==t||1===t&&1<this.a)&&(this.A=t,this.i&&this.i(this))},hj.prototype.a=1,hj.prototype.Ln=function(){return this.a},hj.prototype.getTotal=hj.prototype.Ln,hj.prototype.b=0,hj.prototype.wn=function(){return this.b},hj.prototype.getProcessed=hj.prototype.wn,hj.prototype.g=0,hj.prototype.Qm=function(){return this.g},hj.prototype.getFailed=hj.prototype.Qm,hj.prototype.Ge=function(){},hj.prototype.cancel=function(){3!==this.A&&(this.Ge(),this.O(3))},hj.prototype.cancel=hj.prototype.cancel,t("H.util.ICapturable",kj),kj.prototype.capture=function(){},kj.prototype.capture=kj.prototype.capture,t("H.util.Disposable",nd),nd.prototype.xb=nd.prototype.xb,nd.prototype.addOnDisposeCallback=nd.prototype.xb,t("H.util.dispose",qd),nd.prototype.B=nd.prototype.B,nd.prototype.dispose=nd.prototype.B,nd.prototype.s=nd.prototype.s,u(lj,nd),t("H.map.Imprint",lj);var nj=16,pj={font:'11px "Lucida Grande", Arial, Helvetica, sans-serif',href:"https://legal.here.com/{LN}/terms/serviceterms/{CN}",invert:!1,reportHref:"https://wego.here.com/",locale:"en-US"};function mj(t,e,n,i,r){return t=t.createElement(e),n&&(t.style.cssText=n),i&&(t.innerHTML=i),r&&(t.className=r),t}lj.prototype.Ji=function(t){var e,n=this.Ff.firstChild.firstChild.childNodes;t||(this.j=Ua(pj));var i=this.j;for(e in i)t&&e in t&&(i[e]=t[e]);t=(this.Nh=t=i.invert)?rj:sj,n[0].style.fill=t.Al,n[0].style.fillOpacity=t.Bl,n[1].style.fill=t.Fl,n[1].style.fillOpacity=t.Gl,t=i.locale,tj[t]||(t="en-US",i.locale=t),this.g.innerHTML=tj[t],t=t.split("-"),this.g.href=i.href.replace("{LN}",t[0]).replace("{CN}",t[1].toLowerCase()),this.R.style.font=i.font},lj.prototype.setOptions=lj.prototype.Ji,lj.prototype.N=function(){return this.R},lj.prototype.c=function(){this.f.innerHTML=this.i+" "+this.ta()},lj.prototype.b=function(){this.c(),setTimeout(this.c,5e3)};var oj='<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>',sj={Fl:"#0F1621",Gl:.3,Al:"#fff",Bl:.6},rj={Fl:"#fff",Gl:1,Al:"#0F1621",Bl:.7},uj="1987&ndash;"+wd(2015,(new Date).getFullYear())+" HERE";function vj(t,e,n,i){wj(A((function(t){t?this.Nh?n("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAADNklEQVRYR82XW6hVVRSGv7+rmJfSMKSnSkMEfY7EogcJC7tilGRopBAiSaI+SBARQSCIIqgFISih2YW0oAgLCsKXojA0RB+81VugZEFZv/yHuWTt7d7Hfc4+6+h4OWefNfcc3xlj/v+YS1zjoab5bE8DZgGngB8keSg5GwO0PQ54F3i2BnQIWCLpx14hGwG0fT3wOfBwB5DzwOOSDvQC2RTgM8Ae4D/gaeA3YDdwN5AWvyxp+6gD2r4OmAq8AbwInAMmA/OAT4CbgBWStvYClzUjWkHbrwHLgF8LVHJ8DDxah7P9JHCil7M40oA/A7OBC8ANtSqlrQOVs30/8CWQat8r6cxg1RwRQNvPA88Bk4D7gJzBV4A5teSp5MlS4VuA/ZIeu1Kr+wa0/QTwIRDlRhT5eTswBvi2CKOd42AULilndNAYCcA7gK+BmbVMiyXtsh3Qt4FFBTgW8w6wXtLfV4LrSyS2FwAvAWOBX+JtwF0laUDmS/oun23fDNwJnJb0Ty9g1ZphVdB2qrK2LdFfBbb685/AIxXkUKDqa4cMaDs2kjalRe8Fola57J3qRQSJviGHA3gMuAdYI2lDUfDOArQLWAd8VTuTOW9vjUoFy6TIGYpS9wKfAjuK5wVuSfn91iKcvZJeHy5ci0hsZwzNk5Qh3xIFbLyks7aPAtPLgv+L4VZwDwLvA6uKz6XdfcVAi22PBz4q4+lVSRurXW2vKYKIZfwEHCmmXC35HngAyITYD0ys2t8XWflyBfhmvKm24QCk7aVFCPVc7WMszzKucknI+NoHPCUppt13VICZm2nNwjoksByY0SXL72Vi3FieZ97mgrpyqF432H9xScW2O0H+W6oSE/4D2FYuA9kzlUzVTwO3Ad9IOtx3ydo2aLGZLpABm5KW2Z4AfAbMLfsEcpGkKLqRuMwHu0CukrSpCCrvGlF6hBEVL5MUw24kOhp1B8gc+FTqgxpkFLuzSbjk6jpJOkC2tDPeKCkVbDRkO67fDTTC2VK7vgfyBUlfNEpV2zyAK4HNXRLmZfshScdHC6g9T+WDGU2XpkdZdNXhWs6g7dXAhmsJ7jKR2M77bG4kV7Wt9TZfBLgYEC7PSpcIAAAAAElFTkSuQmCC"):n("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIMSURBVFiFzdZPiE1RGADwXzPTTPIMQoodVpbKgpoUG5qExUi8DSVJQv4slJJsbNjYWFhNETWLUUosRDRLUVLCYhIiojFojHkW997uvefNGIuZc99Xp/fOO6/Or++c75xDi0d7hDlWYQNqeB9hvv+OGq6jUWjPsKZKVBbtuKOMy9p3bKqOlsROCWYc27AWr9PfJnCgKlgbluNqivmGDmzBrxR3sCocnMEw7sqXdEAzboeK9uLTFPVbed8VcesxglFJtqNEHbcxlIL68ChADuCSpEgauBULt11SDI3C5yJJdrLCCNsQumMBl+J5AKinY4slBfNTfsRcxJwYsK0YxD3J0r1RPut6Cv/twgp0xoDBBc3LNhr0RwJktNifAn7gsnLmsuxVinyVTn4i7dcLoH4sU96Tp2Pi2uSVehN75Gdev+QO7pIXztmZnLwTvf+AzU+/v5Rn50+A24gP2IW5M4mbJ7+ejgVjJ/EpHXuCa8p77nGK68FX5eWfsTgfTJoh92qu1vAaa+CtPJuDZuEh3CHZUyHyxSSYrL3DWKE/gStm8aybDDkmKYperJM/BrJMnsJuHMLq2YJNh/wsX7JuPAyQfTFg0yGPFMZreCCv4n2xgTQjxyXP+CxquK8iXBYhMlzOtliQBVg4RVuCG/iSto/YHAuWxWFTHyXDWBkbNFkc1cK4LI5rYVwW57QY7i/pZeJv8QQJRQAAAABJRU5ErkJggg=="):((t=this.Ff.cloneNode(!0)).firstChild.setAttribute("style","font:"+e),n($e(t.innerHTML)))}),t),i)}function wj(t,e){var n="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(oj),i=qj;tc(i)?t(i):new rf("image",n).then((function(e){We.drawImage(e,0,0);try{We.getImageData(0,0,1,1),i=!1}catch(n){i=18===n.code}finally{qj=i,t(i)}}),e)}lj.prototype.ta=function(){var t,e,n,i=this.a,r=i.ub(),o=i.b.lb().bounds,s=(i=i.a).a.length,a={},l=0,c=[uj];if(o)for(;l<s;l++)if(e=i.get(l).getCopyrights(o.I(),r))for(t=0;t<e.length;t++)a[n=e[t].label]||(c.push(n),a[n]=1);return c.join(", ")},lj.prototype.getCopyrights=lj.prototype.ta,lj.prototype.ua=function(){return this.R.style},lj.prototype.i=String.fromCharCode(169),lj.prototype.s=function(){if(this.a.removeEventListener(this.a.m.jj,this.c),this.a.a.removeEventListener("add",this.b),this.a.a.removeEventListener("remove",this.b),this.a.a.removeEventListener("set",this.b),this.R.parentNode){var t=this.R;t.parentNode.removeChild(t)}},lj.prototype.capture=function(t,e,n,i){var r,o=t.getContext("2d"),s=window.getComputedStyle(this.f.parentElement),a=2*Ac(s.paddingLeft,10),l=(this.f.offsetWidth+2*a)*e,c=this.f.offsetHeight*e,u=Bc(s.getPropertyValue("font-size")),h=this.R.ownerDocument,f=+t.width,p=+t.height,d=nj*e,g=this.Ff.childNodes[0].getBoundingClientRect(),m=g.width*e,v=g.height*e,y=hd;Ca(i)&&(y=function(){i("capture_error")}),o.fillStyle=s.backgroundColor,o.fillRect(f-l,p-c,l,c),l=this.i+" "+(r=this.ta(),(r=mj(h,"div",null,r)).textContent||r.innerText||""),o.font=u*e+"px "+s.getPropertyValue("font-family"),o.fillStyle=s.getPropertyValue("color"),o.textBaseline="bottom",o.textAlign="right",o.fillText(l,f-a*e,p),vj(this,o.font,(function(e){new rf("image",e).then((function(e){o.drawImage(e,d,p-(v+d),m,v),n(t)}),y)}),y)},lj.prototype.capture=lj.prototype.capture,lj.prototype.Nh=!1;var tj={"de-DE":"Nutzungsbedingungen","en-US":"Terms of use","en-GB":"Terms of use","es-ES":"Condiciones de uso","fi-FI":"Palveluehdot","fr-FR":"Conditions d'utilisation","it-IT":"Condizioni di utilizzo","nl-NL":"Dienstvoorwaarden","pl-PL":"Warunki \u015bwiadczenia us\u0142ugi","pt-BR":"Termos de servi\xe7o","pt-PT":"Termos do servi\xe7o","ru-RU":"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","tr-TR":"Servis Ko\u015fullar\u0131","zh-CN":"\u4f7f\u7528\u6761\u6b3e"};function Q(t){var e={};this.i=e.previousSibling=e.nextSibling=e,this.j=new af,Q.l.constructor.call(this,t),t&&"objects"in t&&this.dc(t.objects)}function xj(t,e,n){t.ve(n.a)}function yj(t){t.rf()}function zj(t,e,n){t.xa(n.g)}function Aj(t){this.push(t)}function Bj(t,e){for(var n,i,r=0,o=e.length,s=[];r<o;r++)i={},(n=e[r])instanceof Q?(i.type="GeometryCollection",i.geometries=Bj(t,n.Va())):i=n.ba().Rc(),s.push(i);return s}function Cj(t,e,n,i,r){switch(e&&(this.b=e),tc(n)&&(this.Yg=!!n),this.Yg&&i&&(this.$g=new Ji(i.w,i.h)),tc(r)&&(this.c={crossOrigin:r}),Dj[xc(t)]){case 2:this.Cd=t,Ej(this,1);break;case 1:if(lf(t)){this.Cd=t,Fj(this),Ej(this,1);break}t=t.src;case 0:if(t){t=$e(t),this.a=new rf("image",t,B,this.c),this.a.then(A(this.Fo,this),A(this.Eo,this));break}default:throw Ej(this,-1),new D(Cj,0,"No image data")}}function Ej(t,e){t.A=e,delete t.a,t.b&&t.b(e,t)}function Fj(t){if(t.Yg){var e=t.Cd,n=Gj(t),i=n&&n.w||+e.width,r=n&&n.h||+e.height,o=Se();if(C(e,x.HTMLCanvasElement))n=e;else{(n=e.ownerDocument.createElement("canvas")).width=zd(i*o),n.height=zd(r*o);var s=n.getContext("2d");s.scale(o,o),s.drawImage(e,0,0,i,r),$c&&(s.clearRect(0,0,i,r),s.drawImage(e,0,0,i,r))}t.Cd=n}}u(Q,M),t("H.map.Group",Q),Q.prototype.type=Pg.GROUP,Q.prototype.ve=function(t,e){return this.f=!0,t=Q.l.ve.call(this,t,e),this.f=!1,t&&this.forEach(xj,!0),t},Q.prototype.setProvider=Q.prototype.ve,Q.prototype.contains=function(t){var e=this===t;if(!e&&this.b&&C(t,M))for(;!e&&t;)t===this?e=!0:t=t.Wa;return e},Q.prototype.contains=Q.prototype.contains,Q.prototype.rf=function(){this.L=B,this.forEach(yj,!0)},Q.prototype.resetZInfo=Q.prototype.rf,Q.prototype.f=!1,Q.prototype.xa=function(t){var e=Q.l.xa.call(this,t);return e&&!this.f&&(this.g=t,this.forEach(zj,!0),delete this.g),e},Q.prototype.invalidate=Q.prototype.xa,Q.prototype.forEach=function(t,e,n){var i;if(this.b){var r=this.i,o=r.nextSibling;for(i=0;o!==r;){var s=o.nextSibling;t.call(n,o,i++,this),e&&C(o,Q)&&o.forEach(t,e,n),o=s}}},Q.prototype.forEach=Q.prototype.forEach,Q.prototype.Va=function(t){var e=[];return this.forEach(Aj,t,e),e},Q.prototype.getObjects=Q.prototype.Va,Q.prototype.I=function(){var t=null;return this.b&&this.forEach((function(e){(e=e.I())&&(t=t?t.kc(e):e)})),t},Q.prototype.getBoundingBox=Q.prototype.I,Q.prototype.b=0,Q.prototype.Cm=function(){return this.b},Q.prototype.getChildCount=Q.prototype.Cm,Q.prototype.ea=function(t){var e=this.i,n=e.previousSibling;if(C(t,M,this.ea,0),t.contains(this))throw new Xc(this.ea,"The new object contains the parent group");var i=t.cg(!0),r=t.Wa;if(r!==this){if(r){r=t.previousSibling;var o=t.nextSibling;r.nextSibling=o,o.previousSibling=r}t.Wa=this,M.l.ka.call(t,this),n.nextSibling=t,t.previousSibling=n,t.nextSibling=e,e.previousSibling=t,this.b++}return t.Ri=this.j.next(),t.rf(),e=t.ve(this.a,this.ea),t.cg(!0)^i&&t.xa(Mg.VOLATILITY),e||t.xa(Mg.Z_ORDER),t},Q.prototype.addObject=Q.prototype.ea,Q.prototype.dc=function(t){var e;yc(t,this.dc,0);var n=t.length;for(e=0;e<n;e++)this.ea(t[e])},Q.prototype.addObjects=Q.prototype.dc,Q.prototype.Ha=function(t){if(!t||t.Wa!==this)throw new Xc(this.Ha,"object not found");var e=t.previousSibling,n=t.nextSibling;return e.nextSibling=n,n.previousSibling=e,t.Wa=null,M.l.ka.call(t,null),delete t.previousSibling,delete t.nextSibling,C(t.a,N)&&t.ve(null,this.Ha),this.b--,t},Q.prototype.removeObject=Q.prototype.Ha,Q.prototype.Ed=function(t){var e;yc(t,this.Ed,0);var n=t.length;for(e=0;e<n;e++)this.Ha(t[e])},Q.prototype.removeObjects=Q.prototype.Ed,Q.prototype.pa=function(){var t=this.Va();this.Ed(t)},Q.prototype.removeAll=Q.prototype.pa,Q.prototype.Rc=function(t){for(var e,n,i,r=this.Va(),o=0,s=r.length,a=[];o<s;o++)(i=r[o])instanceof Q?(n=Sg(this,e=t?t(i.getData()):i.getData(),!!t),(e={type:"Feature"}).properties=n,i.o&&(e.id=i.o),e.geometry={},e.geometry.type="GeometryCollection",e.geometry.geometries=Bj(this,i.Va()),a.push(e)):a.push(i.Rc(t));return{type:"FeatureCollection",features:a}},Q.prototype.toGeoJSON=Q.prototype.Rc,Q.prototype.W=function(){var t=Q.l.W.call(this);return t.type="Group",t},Q.prototype.forWorkerMessage=Q.prototype.W,n=Cj.prototype,n.A=0,n.getState=function(){return this.A},n.Yg=!0,n.Cd=y,n.getData=function(){return this.Cd};var Dj={String:0,HTMLImageElement:1,HTMLCanvasElement:2};function Gj(t){var e,n=t.$g;if(!n){var i=t.Cd;if(0===(n=i.naturalWidth||i.width)&&Ye&&1===Dj[xc(i)]){var r=!0;if(e=i.parentNode)var o=i.nextSibling;document.body.appendChild(i)}t.$g=n=new Ji(i.naturalWidth||i.width,i.naturalHeight||i.height),r&&(e?e.insertBefore(i,o):document.body.removeChild(i))}return n}function Hj(t,e){var n,i="anonymous";if(this.uid=Ij.next(),Hj.l.constructor.call(this),e){var r="size";if(r in e){var o=e[r];if(!o||isNaN(o.w)||isNaN(o.h))throw new D(Hj,1,r);this.c=new Ji(o.w,o.h)}if((r="anchor")in e){if(!(o=e[r])||isNaN(o.x)||isNaN(o.y))throw new D(Hj,1,r);this.b=new I(o.x,o.y)}(r="hitArea")in e&&(C(o=e[r],Ki,Hj,1),this.g=e[r]),(r="asCanvas")in e&&(n=e[r]),(r="crossOrigin")in e&&(i=e[r]),(o=e.stickHeight)===+o&&0<o&&(this.cp=o),o=e[r="stickColor"],r in e&&zc(o)&&(this.bp=o)}t=new Cj(t,A(this.i,this),n,this.c,i),0!==(e=this.A=t.getState())?this.i(e,t):this.f=t}n=Cj.prototype,n.$g=y,n.Bb=function(){return 1===this.A?Gj(this):y},n.Fo=function(t){this.Cd=t,Fj(this),Ej(this,1)},n.Eo=function(){Ej(this,-1)},n.cancel=function(){this.a&&this.a.cancel()},u(Hj,F),t("H.map.Icon",Hj);var Ij=new af;function Jj(t,e,n,i,r,o){Jj.l.constructor.call(this,isNaN(t)?15:t,e,n,i,r,o)}function Kj(t,e,n,i,r){var o=e.entries;if(r)if(e.a)o=Lj(t,e,n,i,r);else if(o){var s=pg(e,(o=o[0])[1]>=e[8]|(o[0]>=e[9])<<1);s.entries=e.entries,delete e.entries,o.node=s,mg(t,s),o=Lj(t,e,n,i,r)}else qg(e,o=new Mj(n,i)),mg(t,e),kg(t,o,!0);else o||mg(t,e),qg(e,o=new Mj(n,i)),kg(t,o,!0);return o}function Lj(t,e,n,i,r){return Kj(t,pg(e,n>=e[8]|(i>=e[9])<<1),n,i,r-1)}function Mj(t,e){this.id=og++,this[0]=e,this[1]=t}function Nj(){this.a=new Jj(10,180,90,0,0,!0)}function Oj(t,e,n){this.c=t,this.a=e,this.g=n,this.f=1&this.c?"function(){return sources[$source].isInMinMaxRange(feature, $zoom) && feature.ref.effectiveVisibility;}":B,this.b={}}function Pj(t,e,n,i){this.a=t,this.b=e,this.c=n,this.Af=i}function Qj(t,e,n,i){return t={type:e,uid:t.b,tiled:n,max_zoom:t.c},i&&Wa(t,i),t}function Rj(t){this.a=t}function Sj(t,e,n,i,r){this.a=t,this.b=e,this.c=n,this.f=i,this.Af=r}function Tj(t){if(32&t.a&&!(16&t.a))return{};var e=new Pj(t.a,t.b,t.c,t.Af),n=new Rj(t.a);t=new Oj(t.a,t.b,t.f);var i={},r=e.b;if(e=1&e.a?Qj(e,"ObjectSource",!1,{progressiveUpdate:!0,has_volatile_data:!!(256&e.a)}):2&e.a?Qj(e,"RemoteRasterTileSource",!0,{url:""}):Qj(e,"ObjectTileSource",!0,{tile_size:e.Af}),i[r]=e,e={},2&n.a&&(e={"translucent-raster":Lh("raster","inlay",1)}),28&n.a){r=!!(64&n.a);var o={"translucent-polygons":Lh("polygons","inlay",2),"translucent-extruded-polygons":Lh("polygons","translucent",3),"translucent-pattern-lines":Lh("pattern-lines","translucent",4),"translucent-overlays":Lh("overlays","inlay",5),markers:Lh("custom_icons","overlay",6,!1)};o["translucent-polygons"].crop_by_tile=!!(128&n.a),o["translucent-pattern-lines"].crop_by_tile=r,o.markers.suppress_fade=!0,o.markers.stick=!0,Wa(e,o)}if(2&t.c&&(t.b["tile_layer_"+t.a]=Nh(t.a,"_default",{"translucent-raster":{color:[1,1,1,t.g],order:0}})),4&t.c){n={"translucent-pattern-lines":{color:Kh("strokeColor"),width:Kh("lineWidth * $meters_per_pixel"),join:Kh("lineJoin"),cap:Kh("lineCap"),tail_cap:Kh("lineTailCap"),head_cap:Kh("lineHeadCap"),miter_limit:Kh("miterLimit"),order:"function() { return 2 + feature.effectiveZIdx / 2; }",interactive:!0,dash:Kh("lineDash"),extrude:!0,dash_phase:Kh("lineDashOffset")}},r=t.b,o="polygon_layer_"+t.a;var s=Nh(t.a,"polygons",void 0,t.f);s.flat={filter:"function(){return !feature.height && !feature.min_height;}",draw:Mh(!1)},s.extruded={filter:"function(){return feature.height || feature.min_height;}",draw:Mh(!0)},r[o]=s,t.b["outline_layer_"+t.a]=Nh(t.a,"outlines",n,t.f),t.b["polyline_layer_"+t.a]=Nh(t.a,"polylines",n,t.f)}return 8&t.c&&(t.b["overlay_layer_"+t.a]=Nh(t.a,"overlays",{"translucent-overlays":{color:[1,1,1,t.g],order:8190,interactive:!0}})),16&t.c&&(t.b["marker_layer_"+t.a]=Nh(t.a,"markers",{markers:{sprite:Jh("icon.id"),offset:Jh("icon.offset"),collide:!1,priority:8191,elevate_by_altitude:!0,interactive:!0,stick:{color:Jh("icon.stick_color"),height:Jh("icon.stick_height")}}},t.f)),{sources:i,styles:e,layers:t.b}}function aj(t){var e,n=""+cf();if(aj.l.constructor.call(this),t=t||{},this.min=t.min||0,this.max=t.max||22,e=t.uri){if(/_/.test(e))throw new D(aj,0,"uri "+e)}else e=n;this.uri=e||n,this.uid=n,t.getCopyrights&&wc(t.getCopyrights,"Function",aj)&&(this.getCopyrights=t.getCopyrights),this.f=this.f.bind(this),this.sa=!0}function Uj(t,e,n){t.dispatchEvent(new sd(t.g.Ea,n,e))}function Vj(t,e){e=Yd(e,0,1),E(e)&&(e=1),t.i!==e&&(t.i=e,t.sa&&Wj(t),t.f(),Uj(t))}function Wj(t){var e=new Sj(t.getCapabilities(),t.uid,t.max,t.i,t.tileSize);t.b=new Sh(Tj(e)),t.sa=!0}function ak(t){var e;for(e in uc(this,ak),ak.l.constructor.call(this,t),this.Da=t=[],Pg)t[Pg[e]]=new Lg}function N(t){t=t||{},N.l.constructor.call(this,t),this.c=t=new Q({min:t.min,max:t.max}),t.a=this,t.ka(this),t.xa(Mg.ADD),this.v=new wg,this.j=new wg,this.m=new Nj,this.u=new wg,this.D=new Nj,this.S=new wg}function bk(t,e,n,i,r,o,s){if(s=s||[],e.bd())for(t=e!==t.m&&e!==t.u,r=!r,n=(e=e.fg(n,o,o)).length,o=0;o<n;o++){var a,l=e[o].bj;if(a=void 0!==i){for(var c=yd(i),u=l;(a=u.v<=c&&u.u>=c)&&(u=u.Wa););a=!a}a||!r&&!l.Bc(!0)||(t||1===l.Ab().getState())&&s.push(l)}return s}function ck(t,e,n,i,r){var o=bk(t,t.m,e,n,i,r);return bk(t,t.u,e,n,i,r,o),o}function dk(t,e,n,i,r){var o=bk(t,t.D,e,n,i,r);return bk(t,t.S,e,n,i,r,o),o}function ek(t,e,n){var i,r=n.ba(),o=fk.bind(null,t);t=gk.bind(null,t),C(n,mh)?i=C(r,L)?o(r):r.oa.some(o):C(n,wi)?i=C(r,P)?t(r):r.oa.some(t):C(n,hk)&&(i=t(mi(r))),i&&e.push(n)}function fk(t,e){t:{var n=e.X,i=ri(t,e);if(!i){e=e.X.length;for(var r=0;r<e;r+=3)if(pi(t,n[r],n[r+1])){t=!0;break t}}t=i}return t}function gk(t,e){return si(t,e)}function ik(t,e,n){for(var i=t.length;i--;){var r=t[i],o=r.ba();if(C(o,Ii)){for(var s,a=(o=o.oa).length;a--;)if(pi(e,(s=o[a]).lat,s.lng)){n.push(r);break}}else pi(e,o.lat,o.lng)&&n.push(r)}}Hj.State={ERROR:-1,LOADING:0,READY:1},Hj.prototype.getState=function(){return this.A},Hj.prototype.getState=Hj.prototype.getState,Hj.prototype.i=function(t,e){if(this.a=e.getData(),1===t){var n=this.c;n||(n=this.c=e.Bb()),this.b||(this.b=new I(n.w/2|0,n.h))}this.f&&(this.A=t,delete this.f,this.dispatchEvent("statechange"))},Hj.prototype.a=y,Hj.prototype.ad=function(){return this.a},Hj.prototype.getBitmap=Hj.prototype.ad,Hj.prototype.c=y,Hj.prototype.Bb=function(){return this.c},Hj.prototype.getSize=Hj.prototype.Bb,Hj.prototype.b=y,Hj.prototype.td=function(){return this.b},Hj.prototype.getAnchor=Hj.prototype.td,Hj.prototype.g=y,Hj.prototype.Vm=function(){return this.g},Hj.prototype.getHitArea=Hj.prototype.Vm,Hj.prototype.s=function(){Hj.l.s.call(this),this.a?(this.a.removeAttribute("src"),delete this.a):(this.f.cancel(),delete this.f)},u(Jj,hg),Jj.prototype.o=function(t){for(var e,n,i,r=this.head;t;){if(e=t.entries)if(n=e.length){if(2>n&&(i=t.parent)&&1===i.a){i.removeChild(t),r===t&&(r=i),i.entries=e,t=e[0].node=i;continue}}else if(delete t.entries,(i=t.parent)&&(i.removeChild(t),r===t&&(r=i),1===i.a)){t=i.a?i[0]||i[1]||i[2]||i[3]:null;continue}t=y}this.head!==r&&(this.head=r,mg(this))},Jj.prototype.Dc=function(t,e){if(rg(this.a,t,e,t,e))return Kj(this,this.a,t,e,this.c);throw Error("Coordinates out of bounds")},Mj.prototype.vd=function(t){return this[t%2]},n=Nj.prototype,n.Vh=0,n.bd=function(){return this.Vh},n.P=null,n.I=function(){var t,e=this.P;return!e&&(t=ig(this.a))&&(this.P=e=new K(-t[0],t[3],-t[2],t[1])),e},n.Dc=function(t){return++this.Vh,this.P=null,this.a.Dc(t.lng,-t.lat)},n.remove=function(t){return(t=this.a.remove(t))&&(--this.Vh,this.P=null),t},n.fg=function(t,e,n){var i=this.a,r=t.Qb(),o=t.Mb(),s=-r.lat;r=r.lng;var a=-o.lat;return o=o.lng,t.Eb()?i.ab(-180,s,o,a,n,e).concat(i.ab(r,s,180,a,n,e)):i.ab(r,s,o,a,n,e)},u(aj,F),t("H.map.provider.Provider",aj),aj.prototype.g={Ae:"configchange",Ea:"update"},aj.prototype.f=function(){this.dispatchEvent(this.g.Ae)},aj.prototype.s=function(){F.prototype.s.call(this),this.b&&(this.b.removeEventListener("change",this.f),this.b=null)},aj.prototype.ta=function(){return null},aj.prototype.getCopyrights=aj.prototype.ta,aj.prototype.getCapabilities=function(){var t=0;return this.vi()&&(t|=1),this.providesRasters()&&(t|=2),this.providesSpatials()&&(t|=4),this.providesOverlays()&&(t|=8),this.providesMarkers()&&(t|=16),this.providesDomMarkers()&&(t|=32),t},aj.prototype.vi=ef,aj.prototype.lf=ef,aj.prototype.providesRasters=aj.prototype.lf,aj.prototype.Hc=ef,aj.prototype.providesSpatials=aj.prototype.Hc,aj.prototype.wi=ef,aj.prototype.providesOverlays=aj.prototype.wi,aj.prototype.Vb=ef,aj.prototype.providesMarkers=aj.prototype.Vb,aj.prototype.Ub=ef,aj.prototype.providesDomMarkers=aj.prototype.Ub,aj.prototype.tg=hd,aj.prototype.preprocessData=aj.prototype.tg,aj.prototype.i=1,aj.prototype.nn=function(){return this.i},aj.prototype.getOpacityInternal=aj.prototype.nn,aj.prototype.Pc=function(t,e){this.b&&(this.b.removeEventListener("change",this.f),this.b.removeEventListener(Qh,this.f)),this.b=t,this.b.addEventListener("change",this.f),this.b.addEventListener(Qh,this.f),e||this.f(),this.sa=!1},aj.prototype.setStyleInternal=aj.prototype.Pc,aj.prototype.tb=function(){return this.b||Wj(this),this.b},aj.prototype.getStyleInternal=aj.prototype.tb,aj.prototype.Wj=function(){var t=this.getCapabilities(),e=Xj;return 1&t?e=Yj:2&t?e=null:28&t&&(e=Zj),e},aj.prototype.getPickingMode=aj.prototype.Wj,aj.prototype.Rm=function(){return!1},aj.prototype.getFeatureProxy=aj.prototype.Rm,u(ak,aj),t("H.map.provider.ObjectProvider",ak),ak.prototype.vi=df,ak.prototype.providesByViewport=ak.prototype.vi,ak.prototype.Ob=function(t){return this.Da[t||Pg.ANY]},ak.prototype.getInvalidations=ak.prototype.Ob,ak.prototype.he=function(t,e){if(e!==Mg.NONE){var n=this.Da[Pg.ANY],i=n.a+1;n.update(i,e),(n=this.Da[t.type]).update(i,e),t.Ob().update(i,e),Uj(this,t)}},ak.prototype.invalidateObject=ak.prototype.he,ak.prototype.requestOverlays=ak.prototype.Fd,ak.prototype.requestSpatials=ak.prototype.yg,ak.prototype.requestSpatialsByTile=ak.prototype.zg,ak.prototype.Ja=!1,ak.prototype.requestMarkers=ak.prototype.Jc,ak.prototype.requestDomMarkers=ak.prototype.Ic,u(N,ak),t("H.map.provider.LocalObjectProvider",N),N.prototype.getCapabilities=function(){return 125},N.prototype.tb=function(){if(!this.V){this.V=N.l.tb.call(this);var t=new Sj(256|this.getCapabilities(),this.uid+"_vol",this.max,this.i,this.tileSize);this.V.ff(Tj(t))}return this.V},N.prototype.hc=function(){return this.c},N.prototype.getRootGroup=N.prototype.hc,N.prototype.he=function(t,e){e&Mg.SPATIAL&&this.ea(t),N.l.he.call(this,t,e)},N.prototype.invalidateObject=N.prototype.he,N.prototype.ea=function(t){var e;if(C(t,M,this.ea,0),t.a!==this)throw new Xc(this.ea,"foreign object");this.Ha(t);var n=t.type;if(n===Pg.MARKER)if((e=t.ba())instanceof Xf){var i=!0;n=this.m}else n=this.u;else n===Pg.DOM_MARKER?(e=t.ba())instanceof Xf?(i=!0,n=this.D):n=this.S:n=n===Pg.OVERLAY?this.v:this.j;(i=i?n.Dc(e):n.hk(t.I())).bj=t,t.$=i},N.prototype.Ha=function(t){var e;if(t)if(t.a!==this){if(C(t,M))throw new Xc(this.Ha,"foreign object")}else if(e=t.$){var n=t.type;n===Pg.MARKER?this.m.remove(e)||this.u.remove(e):n===Pg.DOM_MARKER?this.D.remove(e)||this.S.remove(e):n===Pg.OVERLAY?this.v.remove(e):this.j.remove(e),delete e.bj,delete t.$}},N.prototype.removeObject=N.prototype.Ha,N.prototype.wi=function(){return 0<this.v.bd()},N.prototype.providesOverlays=N.prototype.wi,N.prototype.Fd=function(t,e,n){return bk(this,this.v,t,e,n,!1).filter((function(t){return t.ad()}))},N.prototype.requestOverlays=N.prototype.Fd,N.prototype.Hc=function(){return 0<this.j.bd()},N.prototype.providesSpatials=N.prototype.Hc,N.prototype.yg=function(t,e,n){return bk(this,this.j,t,e,n,!1)},N.prototype.requestSpatials=N.prototype.yg,N.prototype.zg=function(t,e){return bk(this,this.j,t.Yf(),t.zL,e,!1)},N.prototype.requestSpatialsByTile=N.prototype.zg,N.prototype.Vb=function(){return 0<this.m.bd()+this.u.bd()},N.prototype.providesMarkers=N.prototype.Vb,N.prototype.Jc=function(t,e,n){return ck(this,t,e,n,!1)},N.prototype.requestMarkers=N.prototype.Jc,N.prototype.Ub=function(){return 0<this.D.bd()+this.S.bd()},N.prototype.providesDomMarkers=N.prototype.Ub,N.prototype.Ic=function(t,e,n){return dk(this,t,e,n,!1)},N.prototype.requestDomMarkers=N.prototype.Ic,N.prototype.Va=function(t,e,n,i,r){for(var o=this,s=t.I(),a=[],l=Xb(),c=1;c&Pg.ANY;){if(c&i)switch(c){case Pg.MARKER:l=l.then((function(){return ck(o,s,n,e,!0)})).then((function(e){return ik(e,t,a)}));break;case Pg.DOM_MARKER:l=l.then((function(){return dk(o,s,n,e,!0)})).then((function(e){return ik(e,t,a)}));break;case Pg.SPATIAL:l=l.then((function(){return bk(o,o.j,s,n,e,!0)})).then((function(e){e.forEach(ek.bind(null,t,a))}));break;case Pg.OVERLAY:l=l.then((function(){return bk(o,o.v,s,n,e,!0)})).then((function(e){e.forEach(ek.bind(null,t,a))}))}c<<=1}l.then((function(){return r(a)}))},N.prototype.s=function(){N.l.s.call(this),this.c.pa()};var jk={PENDING:0,ACTIVE:1,DONE:2};function kk(t,e){var n;if(e=e||{},!C(t,Element))throw new D(kk,0,t);var i=t.ownerDocument.createElement("div");this.R=t,kk.l.constructor.call(this),this.padding=new lk(0,0,0,0),this.center=new I(0,0),this.margin=0,this.element=i,i.style.zIndex=0,i.style.height=i.style.width="100%",i.style.position="relative"===t.style.position?"absolute":"relative",this.resize(),t.appendChild(i),(n=e.padding)!==B&&this.Ki(n.top,n.right,n.bottom,n.left),this.Fi((n=e.margin)!==B?n:0)}function mk(t){var e=t.padding;t.center.set((t.width+e.left-e.right)/2<<0,(t.height+e.top-e.bottom)/2<<0)}function nk(t,e,n,i,r,o){var s;for(s=[];i<=r;i++)s=s.concat(ok(t,n,i));for(t=s.length,hj.call(this,o,t),this.j=n=[],this.f=A(this.f,this),this.c=A(this.c,this),this.O(1);t--;)o=s[t],n.push(pk(e,o[0],o[1],o[2],this.f,this.c))}function qk(){}function rk(t,e){var n=this;if(!Ca(e))throw new D(sk,1,e);if(!Ca(t.next||Ca(t.cycle)))throw new D(rk,2,'Argument "mode" must implement H.util.AsyncQueue.Mode');this.b=[],this.c=[],this.g=t,this.i=e,this.j=function(){tk(n)},this.a=null,this.f=function(){n.a||(n.a=x.setTimeout(n.j,1))}}function tk(t){var e=t.c,n=0,i=t.g;for(i.a(),t.a=null;n<e.length;){var r=e[n];r.lk?e.splice(n,1):n++}for(;r=i.next(t.b,t.c);)r.cancelled?r.done(null,"cancelled"):(e.push(r),t.i(r,r.data))}function vk(){uk(this,null,null,null)}function uk(t,e,n,i){return t.data=e,t.cancelled=!1,t.lk=!1,t.b=n,t.c=i,t.a=null,t}function wk(){}function xk(t,e){xk.l.constructor.call(this,new yk(t),e)}function yk(t){if(isNaN(t)||0>t)throw new D(xk,1,'Argument "maxTime" must be a positive number');this.b=t,this.Qc=zk()}function Ak(t){if(uc(this,Ak),Ak.l.constructor.call(this,t),t&&"tileSize"in t){var e=Bd(+t.tileSize)/Ld;if(isNaN(e)||e%1||0>e||30<e)throw new D(Ak,0,"tileSize: "+t.tileSize);this.tileSize=+t.tileSize}}function Bk(t,e){return Vd(t)-8-xd(Vd(e))}function Ck(){}function Dk(t,e,n){if(this.g=[],e&&this.oe(e),n&&!Ca(n))throw new D(Dk,2,n);this.b=0,this.filter=n,this.a={},this.f=this.c=null,this.Hi(t)}function Fk(t,e){return e&&(t.c=Gk(t,e,t.c)),e}function Hk(t){for(;t.b>t.i&&t.f;)Ik(t,t.f,!0)}function Gk(t,e,n){return n!==e&&((e.lc||e.jd)&&Ik(t,e,!1),(e.lc=n)&&(e.jd=n.jd,n.jd=e),e.jd||(t.c=e),e.lc||(t.f=e),t.b+=e.size),e}function Ik(t,e,n){var i=e.jd,r=e.lc;(i||r||e==t.c&&e==t.f)&&(i?i.lc=r:t.c=r,r?r.jd=i:t.f=i,t.b-=e.size,n&&(delete t.a[e.id],Ek(t,e))),e.lc=e.jd=null}function Ek(t,e){for(var n=t.g.length;n--;)t.g[n].call(t,e.id,e.data,e.size)}t("H.map.render.RenderState",jk),u(kk,F),t("H.map.ViewPort",kk),kk.prototype.a={Ea:"update",De:"sync"},kk.prototype.Fi=function(t){if(this.margin!==+t){if(E(this.margin=+t))throw new D(this.Fi,0,t);mk(this),this.dispatchEvent(this.a.Ea)}},kk.prototype.setMargin=kk.prototype.Fi,kk.prototype.Ki=function(t,e,n,i){var r=this.padding;if(r.top!==t||r.right!==e||r.bottom!==n||r.left!==i){if(E(t+e+n+i))throw new D(this.Ki);r.top=t,r.right=e,r.bottom=n,r.left=i,mk(this),this.dispatchEvent(this.a.Ea)}},kk.prototype.setPadding=kk.prototype.Ki,kk.prototype.resize=function(){var t=this.R.offsetWidth,e=this.R.offsetHeight;this.width===t&&this.height===e||(this.c=new Ji(this.width,this.height),this.width=t,this.height=e,mk(this),this.dispatchEvent(this.a.Ea))},kk.prototype.resize=kk.prototype.resize,kk.prototype.bb=function(t){this.dispatchEvent(new Qi(this.a.De,this.c,t,Ri.SIZE))},kk.prototype.synchronize=kk.prototype.bb,kk.prototype.s=function(){x.clearTimeout(this.b),this.b=null,this.R.removeChild(this.element),this.element=this.R=null,kk.l.s.call(this)},kk.prototype.rc=Nc,kk.prototype.startInteraction=kk.prototype.rc,kk.prototype.ic=Nc,kk.prototype.interaction=kk.prototype.ic,kk.prototype.zb=Nc,kk.prototype.endInteraction=kk.prototype.zb,u(nk,hj),nk.prototype.f=function(){jj(this,2)},nk.prototype.c=function(){jj(this,4)},nk.prototype.Ge=function(){for(var t=this.j,e=t.length;e--;)t[e].cancel();this.j=y},t("H.util.ICancelable",qk),qk.prototype.cancel=function(){},qk.prototype.cancel=qk.prototype.cancel,t("H.util.AsyncQueue",rk),rk.prototype.push=function(t,e){if(!Ca(e))throw new D(this.push,1,e);return t=uk(new vk,t,this.f,e),this.b.push(t),this.f(),t},rk.prototype.push=rk.prototype.push,rk.Task=vk,vk.prototype.done=function(t,e){this.lk=!0,this.b(),this.c(this,t,e)},vk.prototype.done=vk.prototype.done,vk.prototype.cancel=function(){this.a&&this.a(),this.cancelled=!0},vk.prototype.cancel=vk.prototype.cancel,vk.prototype.Wo=function(t){return this.a=t,this},vk.prototype.setCancelFn=vk.prototype.Wo,rk.Mode=wk,wk.prototype.next=function(){},wk.prototype.a=function(){},u(xk,rk),t("H.util.SequentialQueue",xk),yk.prototype.next=function(t){return t.length&&zk()-this.Qc<this.b?t=t.shift():null},yk.prototype.a=function(){this.Qc=zk()},u(Ak,aj),t("H.map.provider.TileProvider",Ak),Ak.getZoomLevelOffset=Bk,Ak.prototype.xd=function(t,e,n){return this.uri.concat("_",t,"_",e,"_",n)},Ak.prototype.getTileKey=Ak.prototype.xd,Ak.prototype.Af=256,Ak.prototype.tileSize=Ak.prototype.Af,t("H.util.ICache",Ck),Ck.prototype.add=function(){},Ck.prototype.add=Ck.prototype.add,Ck.prototype.get=function(){},Ck.prototype.get=Ck.prototype.get,Ck.prototype.Qf=function(){},Ck.prototype.drop=Ck.prototype.Qf,Ck.prototype.forEach=function(){},Ck.prototype.forEach=Ck.prototype.forEach,Ck.prototype.pa=function(){},Ck.prototype.removeAll=Ck.prototype.pa,Ck.prototype.oe=function(){},Ck.prototype.registerOnDrop=Ck.prototype.oe,Ck.prototype.kh=function(){},Ck.prototype.deRegisterOnDrop=Ck.prototype.kh,t("H.util.Cache",Dk),Dk.prototype.add=function(t,e,n){var i,r;if(!Cc(n=+n)||0>n)throw new D(this.add,2,n);return t=String(t),(r=!this.filter||this.filter(t,e,n))&&((i=this.a[t])?(i.data!==e&&Ek(this,i),this.b+=n-i.size,i.size=n,i.data=e,Fk(this,i)):this.a[t]=Gk(this,{id:t,data:e,size:n,lc:null,jd:null},this.c),Hk(this)),r},Dk.prototype.add=Dk.prototype.add,Dk.prototype.oe=function(t){if(!Ca(t))throw new D(this.oe,0,t);this.g.push(t)},Dk.prototype.registerOnDrop=Dk.prototype.oe,Dk.prototype.kh=function(t){this.g=this.g.filter((function(e){return e!==t}))},Dk.prototype.deRegisterOnDrop=Dk.prototype.kh,Dk.prototype.get=function(t,e){return(t=e?this.a[t]:Fk(this,this.a[t]))&&t.data},Dk.prototype.get=Dk.prototype.get,Dk.prototype.Qf=function(t){var e;(e=this.a[t])&&Ik(this,e,!0)},Dk.prototype.drop=Dk.prototype.Qf,Dk.prototype.forEach=function(t,e,n){var i;for(i in this.a){var r=this.a[i];(!n||n(i,r.data,r.size))&&t.call(e,i,r.data,r.size)}},Dk.prototype.forEach=Dk.prototype.forEach,Dk.prototype.pa=function(t){var e;for(e in this.a){var n=this.a[e];(!t||t(e,n.data,n.size))&&Ik(this,this.a[e],!0)}},Dk.prototype.removeAll=Dk.prototype.pa,Dk.prototype.Hi=function(t){if(!(0<+t))throw new D(Dk.prototype.Hi,0,t);return this.i=+t,Hk(this),this},Dk.prototype.setMaxSize=Dk.prototype.Hi,Dk.prototype.kn=function(){return this.i},Dk.prototype.getMaxSize=Dk.prototype.kn,Dk.prototype.Im=function(){return this.b},Dk.prototype.getCurrentSize=Dk.prototype.Im;var Jk,Kk=function(){function t(){}for(var e,n,i,r=rc("o ms moz webkit "),o=5;o--&&!e;)e=r[o],e=(n=x[e+(e?"R":"r")+"equestAnimationFrame"])&&!E(n.call(window,t))&&(i=x[e+(e?"C":"c")+"ancelAnimationFrame"]);return Jk=e?function(t){return n.call(x,t)}:function(t){return x.setTimeout(t,25)},e?function(t){return i.call(x,t)}:function(t){return x.clearTimeout(t)}}(),zk=x.performance&&x.performance.now?function(){return x.performance.now()}:function(){return x.Date.now()};function Lk(t,e,n,i){this.key="",this.x=t,this.y=e,this.z=n,this.data=i,this.valid=!0}function Mk(t,e,n,i){return(t-=n)*t+(e-=i)*e}function Nk(t,e,n){return Ok(t,e*e,n||0,0,t.length-1)}function Ok(t,e,n,i,r){var o=0,s=i,a=t[i].x,l=t[i].y,c=t[r].x,u=t[r].y,h=i+1,f=Mk(a,l,c,u);if(f)for(;h<r;){var p=t[h++],d=p.x,g=((d-a)*(c-a)+((p=p.y)-l)*(u-l))/f;(d=0>g?Mk(d,p,a,l):1<g?Mk(d,p,c,u):Mk(d,p,a+g*(c-a),l+g*(u-l)))>o&&(o=d,s=h-1)}else for(;h<r;)(d=Mk(d=(p=t[h++]).x,p=p.y,a,l))>o&&(o=d,s=h-1);return o>=e||0<n&&s-i?(--n,1<s-i?(i=Ok(t,e,n,i,s)).splice(i.length-1,1):i=[t[i]],i=1<r-s?i.concat(Ok(t,e,n,s,r)):i.concat(t.slice(s,r+1))):i=[t[i],t[r]],i}function Pk(t,e,n,i,r,o,s,a){Pk.l.constructor.call(this,e,n,i,null),this.key=t,this.aa=a,this.a=r,this.g=o,this.i={},this.zL=s,this.m=zd(O.MAX_LINE_WIDTH/2*this.g+1)}function Qk(t){return t.aa.getInvalidations(Pg.SPATIAL)}function Rk(t){var e,n=Qk(t),i=n.a,r=t.c,o=r===i;if(!(o||n.jk(r)||n.Ph(r))){o=t.f;var s=t.i;if(n.hg(r))for(e=o.length;e--;){var a=o[e];if(a.Ob().hg(r)){o.splice(e,1);var l=l||Sk(t,a.fb())}}if(n.Qh(r)){for(e=o.length;e--;)if((a=o[e]).Ob().Qh(r)){var c=1;if((a=s[a.fb()])&&a.a){l=1;break}}c&&o.sort(Tk)}if(!l&&n.je(r))for(e=o.length;e--;)if(o[e].Ob().je(r)){var u=1;break}t.u!==r||u||(t.u=i,t.b!==r||l||(t.b=i)),t.c=i,o=!0}return o}function Uk(t,e){this.b=t,this.a=e}function Sk(t,e){var n=(t=t.i)[e];if(n)return delete t[e],n.a}function Vk(t){var e,n=Qk(t),i=t.c,r=t.f;if(!Rk(t)){for(e=r.length;e--;){var o=r[e],s=o.Ob();(s.hg(i)||s.Ph(i))&&Sk(t,o.fb())}t.f=t.aa.requestSpatialsByTile(t,!1,!1).sort(Tk),t.c=n.a}}function Tk(t,e){return Qg(t.ed(),e.ed(),!1)}t("H.map.provider.Tile",Lk),t("H.math.simplifyDP",Nk),u(Pk,Lk),t("H.map.provider.SpatialTile",Pk),Pk.prototype.c=Ud,Pk.prototype.u=Ud,Pk.prototype.b=Ud,Pk.prototype.ie=function(){var t=Qk(this),e=t.a,n=this.b,i=n===e;return i||(this.aa.Ja&&!t.je(n)?i=!0:Rk(this)&&(i=this.b===e)),i},Pk.prototype.isCanvasValid=Pk.prototype.ie,Object.defineProperty(Pk.prototype,"valid",{get:function(){return this.ie()},set:hd,configurable:!0}),Pk.prototype.f=ff,Pk.prototype.Va=function(){return this.f},Pk.prototype.getObjects=Pk.prototype.Va,Pk.prototype.In=function(){return this.a},Pk.prototype.getTileSize=Pk.prototype.In;var Wk={};function Yk(t,e,n,i,r,o,s,a,l){var c=t.a,u=-s;if(s=o+s,a=a||0,l===B&&(l=c.length),r&&t===ch)e.fillRect(0,0,o,o);else if(l>a){for(e.beginPath(),o=a;o<l;o++){var h=c[o],f=h.length;if(h===vi)e.moveTo(u,u),e.lineTo(u,s),e.lineTo(s,s),e.lineTo(s,u);else{var p=h[0];for(e.moveTo(p.x,p.y),a=1;a<f;a++)p=h[a],e.lineTo(p.x,p.y)}n&&e.closePath()}n&&r&&e.fill(t.b!==Td?"evenodd":"nonzero"),i&&e.stroke()}}function Xk(t,e,n){var i;t.strokeStyle=e.strokeColor,t.lineWidth=e.lineWidth*n,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.setLineDash&&(i=e.lineDash)!==ff&&(t.setLineDash(i),t.lineDashOffset=e.lineDashOffset)}function Zk(t,e){t.fillStyle=e.fillColor}function $k(t,e,n,i,r,o){var s=r*i.width/2,a=(r=r*i.length/2)/2;i=2*r*i.frequency;var l=Cd(Dd(r,2)+Dd(s,2));t=new lk(l,l,t=t.a-l,t),n=n.a;var c,u,h,f,p,d,g,m=Md/2;for(o=o||0,l=n.length;l-- >o;){var v=0,y=n[l];if(u=c=y.length){var b=y;for(u=b.length,h=0;--u;)h+=b[u].Za(b[u-1]);u=(b=h)>=i}if(u)for(h=(u=b/((u=vd(yd(b/i),1e3))+1))/2;--c;){for(f=(p=y[c]).Za(d=y[c-1]);h<=v+f;){var _=p.x+(d.x-p.x)*(g=(h-v)/f);g=p.y+(d.y-p.y)*g,t.Mf(_,g)&&(e.save(),e.translate(_,g),e.rotate(-Jd((d.y-p.y)/(p.x-d.x))+(p.x<d.x?m:-m)),e.beginPath(),e.moveTo(-s,-r),e.lineTo(0,r),e.lineTo(s,-r),e.lineTo(0,-a),e.closePath(),e.fill(),e.restore()),h+=u}v+=f}}}Pk.prototype.Ze=function(){var t=this.a+"_"+this.g,e=Wk[t];if(!e){e=-this.m;var n=this.a-e;e=Wk[t]=new lk(e,e,n,n)}return e},Pk.prototype.getPxClipRect=Pk.prototype.Ze,Pk.prototype.Yf=function(){var t=this.rb;if(!t){var e=this.$f();t=0;var n=this.a;this.z&&(n-=t+=this.Ze().top),t=this.rb=dg(e.jf(new I(t,t)),e.jf(new I(n,n)))}return t},Pk.prototype.getGeoClipRect=Pk.prototype.Yf,Pk.prototype.$f=function(){var t=this.v;if(!t){var e=this.a;(t=this.v=new Xi(B,e)).Pa(this.z),t.x=this.x*e,t.y=this.y*e}return t},Pk.prototype.getPxProj=Pk.prototype.$f,Pk.prototype.$a=function(){return this.g},Pk.prototype.getPixelRatio=Pk.prototype.$a,Pk.prototype.vg=function(){var t=this.data;return this.data=null,this.b=Ud,t},Pk.prototype.releaseCanvas=Pk.prototype.vg,Pk.prototype.wg=function(){this.i={},delete this.f,this.c=Ud},Pk.prototype.releaseData=Pk.prototype.wg,Pk.prototype.U=function(t){var e,n,i,r,o=t.getContext("2d"),s=0;if(Vk(this),this.b<this.c){var a=this.f;if(e=a.length){t.width=t.height=this.a,o.clearRect(0,0,this.a,this.a);var l=this.i;for(n=0;n<e;n++){var c=a[n],u=c.fb();if(r=(i=l[u])?i.b:c.getGeometriesForTile(this)){if(i)c.Ob().je(this.b)&&(i.a=bh(c,r)),i=i.a;else{var h;i=bh(c,r);for(var f=r,p=c.j?2:0,d=f.length;d--;){var g=f[d];if(g!==ch){var m=g.a;for(h=m.length;h--;)4<(g=m[h]).length&&(m[h]=Nk(g,.6,p))}}this.i[u]=new Uk(r,i)}if(i){for(o.save(),f=c.j?this.F:this.D,u=0;u<r.length;u++)f.call(this,c,r[u],c.ua(),o);if(r=c.getLabels(this))for(c=o,u=r.length;u--;)for(f=(p=r[u]).size,c.font=f+"px "+p.font,c.fillStyle=p.color,c.textAlign="center",c.translate(p.x,p.y),c.rotate(p.angle),f=p.lineHeight||1.375*f,p=(d=p.lines).length;p--;)c.fillText(d[p],0,p*f);o.restore()}s|=i}}}this.data=s?t:null,this.u=this.b=this.c}else this.data&&(s=1);return 0<s},Pk.prototype.render=Pk.prototype.U,Pk.prototype.D=function(t,e,n,i){var r;n.af&&(Xk(i,n,this.g),Yk(e,i,!1,!0,!1,this.a,this.m)),n.$e&&(r=t.g)&&r.Rb&&(Zk(i,r),$k(this,i,e,r,n.lineWidth))},Pk.prototype.F=function(t,e,n,i){var r,o=n.Rb,s=n.af,a=this.a,l=this.m;if(e===ch)o&&(Zk(i,n),i.fillRect(0,0,a,a));else{if(s&&Xk(i,n,this.g),n.$e&&(r=t.g)){var c=n.lineWidth;r.Rb||(r=null)}(t=e.c)===Td?((s||o)&&(Zk(i,n),Yk(e,i,!0,s,o,a,this.m)),r&&(Zk(i,r),$k(this,i,e,r,c,0))):(o&&(Zk(i,n),Yk(e,i,!0,!1,o,a,l,0,t)),s&&Yk(e,i,!1,s,!1,a,l,t),r&&(Zk(i,r),$k(this,i,e,r,c,t)))}};var al=[];function bl(t,e){var n;bl.l.constructor.call(this,e),this.F=t,this.L=t=e.pixelRatio,this.tileSize=n=1<<xd(Vd((e.tileSize||256)*t)),this.S=Bk(n,t),this.Yh=A(this.Yh,this),this.mi=A(this.mi,this),this.Zh=A(this.Zh,this),this.Xh=A(this.Xh,this),this.u=A(this.u,this),this.F.addEventListener(aj.prototype.g.Ea,this.u,!1,this),this.c=[],this.j=new Dk(e.tileCacheSize||256,this.Yh),this.m=new Dk(e.dataCacheSize||512,this.mi),this.D=new xk(20,this.Zh),this.a={},this.v=zk()}function cl(t,e){if(e=e||{},!t)throw new D(cl,0,t);this.tileSize=t.tileSize,this.c={},$i.call(this,{min:void 0!==e.min?e.min:t.min,max:void 0!==e.max?e.max:t.max,minWorldSize:this.tileSize,projection:e.Yk,dark:e.dark,provider:t})}function el(t,e,n,i,r){i=yd(i);var o=Dd(2,i),s=e.left,a=e.top,l=e.right;n=l+(n?o+(l===e.left?0:1):1);var c=e.bottom,u=[];if(r)var h=s+(1+l-s)/2+r.x/t.tileSize-.5,f=a+(1+c-a)/2+r.y/t.tileSize-.5;for(;s<n;){for(a=e.top;a<=c;)t=s%o,u.push([t,a,i,r?Ad(h-s)+Ad(f-a):0]),a++;s++}return u}function ok(t,e,n){n=yd(n),t.pixelProjection.Pa(n),e=t.Re(e);var i=t.ge(e,n);return el(t,i,e.left>e.right,n)}function fl(t,e){return e[3]-t[3]}function R(t){uc(this,R),R.l.constructor.call(this,t),this.cc=new gl,this.ec=A(this.ec,this),this.S=hl,this.createTileInternal=this.qd.bind(this)}Pk.prototype.Ga=function(t,e,n){for(var i,r,o,s,a,l,c,u=this.f,h=u.length,f=ff,p=this.g;h--;)if((r=u[h]).Bc(!0)&&(o=this.i[r.fb()])&&(s=o.b)){for(l="none"!==(i=r.ua()).fillColor&&r.j,c="none"===i.strokeColor?0:i.lineWidth*p,i=s.length;i--;){var d;if(a=s[i],!(d=l&&a===ch)&&(d=l||c)){var g;d=t;var m=e,v=l,y=c,b=a.b,_=a.c,w=_!==Td,x=a.a,k=x.length,S=0,A=0,E=!1;for(a=0;a<k;a++){var T=x[a],C=a>=_,M=!C&&a>=b;if(T===vi&&v)M?S++:A++;else{var L=T.length;for(al.length=2*L,g=0;g<L;g++){var R=T[g];al[2*g]=R.x,al[2*g+1]=R.y}if(g=v&&!C,C=w&&!C?0:y,g||C){if((C=be(d,m,al,C,g))===ae.EDGE||C===ae.VERTEX){E=!0;break}if(C===ae.SURFACE)if(M)S++;else if(A++,b===Td)break}}}d=E||0<A&&!(S%2)}if(d){f===ff&&(f=[]),f.push(r);break}}if(n&&f.length)break}return f},u(bl,Ak),bl.prototype.u=function(t){t.target.type===Pg.SPATIAL&&Uj(this,t.target)},bl.prototype.ib=function(t,e,n,i){var r,o=this.getTileKey(t,e,n);if(r=this.j.get(o,i)){if(i||r.ie())return r;i||this.j.Qf(o)}if((r=this.m.get(o,i))&&(i||Rk(r)))return t=this.c.pop()||document.createElement("canvas"),r.U(t)||this.c.push(t),this.j.add(o,r,1),r;i||((r=this.a[o])?r.count++:((r=this.D.push([o,t,e,n],this.Xh)).count=1,this.a[o]=r))},bl.prototype.requestTile=bl.prototype.ib,bl.prototype.qd=function(){},bl.prototype.Wc=function(t,e,n){this.If(this.getTileKey(t,e,n))},bl.prototype.cancelTile=bl.prototype.Wc,bl.prototype.If=function(t){var e;(e=this.a[t])&&(e.count--,e.count||(e.cancel(),delete this.a[t]))},bl.prototype.cancelTileByKey=bl.prototype.If,n=bl.prototype,n.Zh=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3];i=(n=this.j.get(n)||new Pk(n,i,r,o,this.tileSize,this.L,o+this.S,this.F)).data||this.c.pop()||document.createElement("canvas"),n.U(i)||this.c.push(i),e.push(n),t.done(n)},n.Xh=function(t,e){t=t.data[0],e&&this.j.add(t,e,1),delete this.a[t],Uj(this)},n.Yh=function(t,e){e.data&&this.c.push(e.vg()),this.m.add(t,e,1)},n.mi=function(t,e){e.wg()},n.s=function(){for(var t in this.a)this.a[t].cancel();this.j.pa(),this.m.pa(),this.c.length=0,bl.l.s.call(this)},u(cl,$i),t("H.map.layer.BaseTileLayer",cl),cl.prototype.Re=function(t,e){var n=this.pixelProjection;if(!C(t,K))throw new D(this.Re,0,t);if(!E(e)){var i=n.bk();n.Pa(e)}return t=dl(n.jb(t.Qb()),n.jb(t.Mb())),!E(i)&&n.Pa(i),t},cl.prototype.geoRectToRect=cl.prototype.Re,cl.prototype.ge=function(t,e){var n=Dd(2,yd(e)),i=this.tileSize;if(!C(t,lk))throw new D(this.ge,0,t);if(E(e=+e))throw new D(this.ge,1,e);(e=yd(t.left/i))===n&&--e;var r=yd(t.right/i);return r===n&&--r,new lk(e,Yd(yd(t.top/i),0,n-1),r,Yd(yd(t.bottom/i),0,n-1))},cl.prototype.getTileBounds=cl.prototype.ge,cl.prototype.ib=function(t,e,n,i){return this.a.requestTile(t,e,n,i)},cl.prototype.Wc=function(t,e,n){this.a.cancelTile(t,e,n)},cl.prototype.cancelTile=cl.prototype.Wc,cl.prototype.ta=function(t,e){return this.a.getCopyrights?this.a.getCopyrights(t,e):null},cl.prototype.getCopyrights=cl.prototype.ta,cl.prototype.Ye=function(t,e,n,i,r,o){var s,a,l=[],c=this.a;o=null!=o?o:"__default__";var u=c.requestTile;if(!C(t,lk))throw new D(this.Ye,0,t);if(E(n=+n))throw new D(this.Ye,1,n);if(i||(s={}),t=(e=el(this,t,e,n,r)).length)for(i||e.sort(fl),n=t;n--;)r=e[n],i||(s[c.xd.apply(c,r)]=!0),r[3]=+i,(a=u.apply(c,r))&&l.push(a);if(!i){var h;for(h in i=s,s=this.c[o]||{})s.hasOwnProperty(h)&&s[h]&&!i[h]&&this.a.cancelTileByKey(h);this.c[o]=i}return{total:t,tiles:l}},cl.prototype.getProviderTiles=cl.prototype.Ye,u(R,Ak),t("H.map.provider.RemoteTileProvider",R),R.prototype.Wd=function(){return 1},R.prototype.getEntryWeight=R.prototype.Wd;var hl=new Dk(65536);function pk(t,e,n,i,r,o){return i=~~i,t.requestInternal(e,n,i,(function(s,a){t.ee().put(t.xd(e,n,i),{raw:a&&a.raw||s,timestamp:x.Date.now()},r,o)}),o,0)}function jl(t,e){delete t.j[e],delete t.V[e]}function il(t){for(var e in t.j)t.ec(e)&&t.cancelTileByKey(e)}R.prototype.j={},R.prototype.V={},R.prototype.Nb=function(){return this.S},R.prototype.getCache=R.prototype.Nb,R.prototype.v=ba(3),R.prototype.ec=function(t){var e=this.uri;return!t.indexOf(e)&&"_"===t.charAt(e.length)},R.prototype.cacheFilter=R.prototype.ec,R.prototype.wa=function(t,e){e.valid=!1},R.prototype.reload=function(t){var e=this.getCache();t?e.pa(this.ec):e.forEach(this.wa,this,this.ec),il(this),Uj(this,this,{isReload:!0})},R.prototype.reload=R.prototype.reload,R.prototype.dh=function(){return!1},R.prototype.MAX_STORE_TIME=1/0,R.prototype.ee=function(){return this.cc},R.prototype.fa=function(t,e){e(t)},R.prototype.requestInternal=R.prototype.K,R.prototype.ib=function(t,e,n,i){var r=this,o=this.getCache();if(E(t=+t))throw new D(this.ib,0,t);if(E(e=+e))throw new D(this.ib,0,e);if(E(n=+n))throw new D(this.ib,0,n);n=~~n;var s=this.getTileKey(t,e,n);return(o=o.get(s))&&o.valid||i||this.j[s]||(o=B,this.requestTileAsPromise(t,e,n,i).then((function(t){Uj(r,t)}),hd)),o},R.prototype.requestTile=R.prototype.ib,R.prototype.fl=function(t,e,n,i){var r,o=this,s=this.getCache(),a=this.getTileKey(t,e,n),l=this.j,c=this.V,u=this.ee();return c[a]?c[a]:(c[a]=c=new Ob((function(c,h){function f(r){var f,p,d=function(i,r){(p=o.createTileInternal(t,e,n,i,r)).key=a,s.add(a,p,o.Wd(i)),c(p),jl(o,a)};r&&(f=x.Date.now()-r.timestamp),r&&f<o.MAX_STORE_TIME?o.fa(r.raw,d):(f&&u.remove(a),(p=s.get(a))&&p.valid||i?c(p||null):l[a]=o.requestInternal(t,e,n,d,h))}r=u.get(a,f,f)})),l[a]||(l[a]=r),c.then((function(){jl(o,a)}),(function(){jl(o,a)})),c)},R.prototype.requestTileAsPromise=R.prototype.fl,R.prototype.el=function(t,e){var n=this,i=t.id,r=t.tile.coords;return new Ob((function(t,o){n.fl(r.x,r.y,r.z,e).then((function(e){for(var n,r=y,o=(e=e.Va?e.Va():e.data).length;o--;)if((n=e[o]).fb()===i){r=n;break}t(r)}),o)}))},R.prototype.requestObjectAsPromise=R.prototype.el;var kl={cancel:function(){}};function gl(){}function sk(t){if(sk.l.constructor.call(this,t),t&&(this.F={crossOrigin:t.crossOrigin||"anonymous",headers:t.headers||{}},this.u=t.getURL),!Ca(this.u))throw new D(sk,0,"getURL");if(Vj(this,t.opacity),this.c=x.URL||x.webkitURL,!(t="anonymous"===(t=this.F.crossOrigin)||"use-credentials"===t)){t=this.u(0,0,0);var e=window.location,n=document.createElement("a");n.href=t,t=n.hostname===e.hostname&&n.port===e.port&&n.protocol===e.protocol}(this.L=t&&!!rf.prototype.b.arraybuffer&&!!this.c)&&this.Nb().oe(A(this.Da,this))}function lk(t,e,n,i){this.left=+t,this.top=+e,this.right=+n,this.bottom=+i}function dl(t,e){return new lk(t.x,t.y,e.x,e.y)}function ll(t,e){cl.call(this,t,e)}function ml(t,e){(e=e?Ua(e):{}).tileSize=e.tileSize||256,e.pixelRatio=e.pixelRatio||Se(),e.max=24,this.c=new bl(t,e),this.f=new ll(this.c),e.minWorldSize=this.c.tileSize,e.provider=t,ml.l.constructor.call(this,e),this.tileSize=this.f.tileSize,this.j=A(this.j,this),this.c.addEventListener(this.c.g.Ea,this.j),t.addEventListener(t.g.Ea,this.j)}R.prototype.qd=function(t,e,n,i){return new Lk(t,e,n,i)},R.prototype.If=function(t){var e=this.j[t];e&&(e.cancel(),jl(this,t))},R.prototype.cancelTileByKey=R.prototype.If,R.prototype.Wc=function(t,e,n){this.cancelTileByKey(this.getTileKey(t,e,n))},R.prototype.cancelTile=R.prototype.Wc,R.prototype.s=function(){R.l.s.call(this),this.getCache().pa(this.ec),il(this)},R.NullStorage=gl,gl.prototype.get=function(t,e){return e(),kl},gl.prototype.get=gl.prototype.get,gl.prototype.put=function(t,e,n){n&&n()},gl.prototype.put=gl.prototype.put,gl.prototype.clear=function(t){t&&t()},gl.prototype.clear=gl.prototype.clear,gl.prototype.remove=function(t,e){e&&e()},gl.prototype.remove=gl.prototype.remove,u(sk,R),t("H.map.provider.ImageTileProvider",sk),sk.prototype.nc=function(t){Vj(this,t)},sk.prototype.setOpacity=sk.prototype.nc,sk.prototype.dd=function(){return this.i},sk.prototype.getOpacity=sk.prototype.dd,sk.prototype.lf=df,sk.prototype.providesRasters=sk.prototype.lf,sk.prototype.Wd=function(){return this.tileSize},sk.prototype.getEntryWeight=sk.prototype.Wd,sk.prototype.K=function(t,e,n,i,r,o){var s,a=this,l=this.u(t,e,n);if(t=null,l){var c=x.setTimeout((function(){a.L?(s=new rf("arraybuffer",l,o,a.F)).then((function(t){return t.blob()})).then((function(t){var e=new Image;e.onload=A(i,null,e,{raw:t}),e.onerror=A(r,null,"bad url");try{e.src=a.c.createObjectURL(t)}catch(n){}}),r):(s=new rf("image",l,o,a.F)).then(i,r)}),150);t={cancel:function(){s?s.cancel():x.clearTimeout(c)}}}else i(null);return t},sk.prototype.requestInternal=sk.prototype.K,sk.prototype.fa=function(t,e){var n=new Image;n.onload=function(){e(this)},n.src=this.c.createObjectURL(t)},sk.prototype.Da=function(t,e){(t=e.data)&&t instanceof HTMLImageElement&&this.c.revokeObjectURL(t.src)},t("H.math.Rect",lk),lk.prototype.set=lk,lk.prototype.set=lk.prototype.set,lk.prototype.Qb=function(){return this.c||(this.c=new I(this.left,this.top))},lk.prototype.getTopLeft=lk.prototype.Qb,lk.prototype.Mb=function(){return this.a||(this.a=new I(this.right,this.bottom))},lk.prototype.getBottomRight=lk.prototype.Mb,lk.prototype.Mf=function(t,e){return this.left<=t&&this.right>=t&&this.top<=e&&this.bottom>=e},lk.prototype.containsXY=lk.prototype.Mf,lk.fromPoints=dl,lk.prototype.clone=function(){return new lk(this.left,this.top,this.right,this.bottom)},lk.prototype.clone=lk.prototype.clone,u(ll,cl),t("H.map.layer.TileLayer",ll),ll.prototype.Gd=function(t,e,n,i,r){if(!C(t,K))throw new D(this.Gd,0,t);if(E(e=+e))throw new D(this.Gd,1,e);e=yd(e),this.pixelProjection.Pa(e),t=this.Re(t);var o=this.ge(t,e);return this.Ye(o,t.left>t.right,e,n,i,r)},ll.prototype.requestTiles=ll.prototype.Gd,u(ml,$i),t("H.map.layer.ObjectLayer",ml),ml.prototype.j=function(t){t.currentTarget!==this.c&&t.target.type===Pg.SPATIAL||this.g()};var nl={markers:ff,total:0};ml.prototype.Jc=function(t,e,n){var i,r=this.a;return r.providesMarkers()&&(i=r.requestMarkers(t,e,!0,n)).length?{markers:i,total:i.length}:nl},ml.prototype.requestMarkers=ml.prototype.Jc,ml.prototype.Ic=function(t,e,n){var i,r=this.a;return r.providesDomMarkers()&&(i=r.requestDomMarkers(t,e,!0,n)).length?{markers:i,total:i.length}:nl},ml.prototype.requestDomMarkers=ml.prototype.Ic;var ol={tiles:ff,total:0};ml.prototype.Gd=function(t,e,n,i){if(this.a.providesSpatials()){var r=this.f.Gd(t,e,n,i);n||(n=this.c,33<(r=zk())-n.v&&(tk(n.D),n.v=r),r=this.f.Gd(t,e,!0,i))}else r=ol;return r},ml.prototype.requestTiles=ml.prototype.Gd,ml.prototype.ib=function(t,e,n,i){return this.f.ib(t,e,n,i)},ml.prototype.requestTile=ml.prototype.ib,ml.prototype.Wc=function(t,e,n){this.f.Wc(t,e,n)},ml.prototype.cancelTile=ml.prototype.Wc;var pl={overlays:ff,total:0};function ql(t,e,n,i){var r=new lk(0,0,0,0);if(ql.l.constructor.call(this),!t)throw new D(ql,0,t);if(!e)throw new D(ql,1,e);if(!n)throw new D(ql,2,n);if("object"!==typeof i)throw new D(ql,3,i+" is not an object");if("number"!==typeof i.pixelRatio)throw new D(ql,3,i.pixelRatio+" is not a number");this.ra=i.pixelRatio,this.zoom=0,this.hb=Bd(this.ra)/Ld,this.qa=new Xi,this.Gb={1:r.clone(),2:r.clone(),4:r.clone()},this.o=new I(.5,.5),this.g=t,rl(this,this.ra),this.rc=A(this.rc,this),this.ic=A(this.ic,this),this.zb=A(this.zb,this),t.startInteraction=this.rc,t.interaction=this.ic,t.endInteraction=this.zb,t.addEventListener(t.a.Ea,this.V,!1,this),this.getCapabilities=this.getCapabilities,this.capture=this.capture,this.zoomAt=this.ye,this.relaunch=this.ha,this.dispose=this.B,this.screenToGeo=this.Xa,this.geoToScreen=this.Fa,this.screenToLookAtData=this.Cg,this.F=e,this.qc=A(this.qc,this),this.control=A(this.control,this),this.yb=A(this.yb,this),e.startControl=this.qc,e.control=this.control,e.endControl=this.yb,e.addEventListener(e.a.Ea,this.ah,!1,this),this.c=n,this.ng=A(this.ng,this),this.cf=A(this.cf,this),this.df=A(this.df,this),this.mg=A(this.mg,this),n.addEventListener($i.prototype.b.Ea,this.ng,!1,this),n.addEventListener(n.b.ze,this.cf,!1,this),n.addEventListener(n.b.Be,this.df,!1,this),n.addEventListener(n.b.Ce,this.mg,!1,this)}function rl(t,e){var n=t.g,i=n.width,r=n.height,o=n.padding,s=o.top,a=o.left,l=o.bottom;o=o.right,n=n.margin;var c=-(i+a-o)/2<<0,u=-(r+s-l)/2<<0;i+=c,r+=u,(t=t.Gb)[1].set((c-n)*e,(u-n)*e,(i+n)*e,(r+n)*e),t[2].set(c*e,u*e,i*e,r*e),t[4].set((c+a)*e,(u+s)*e,(i-o)*e,(r-l)*e)}function tl(t,e){t.style.transition="opacity 1.5s",Ce(t,"transitionend",e,!1),t.style.opacity=0}ml.prototype.Fd=function(t,e,n){var i=this.a,r=pl;return i.providesOverlays&&i.providesOverlays()&&(e=(t=i.requestOverlays(t,e,!0,n)).length)&&(r={overlays:t,total:e}),r},ml.prototype.requestOverlays=ml.prototype.Fd,ml.prototype.s=function(){this.c.B(),this.f.B(),this.a.dispose(),ml.l.s.call(this)},u(ql,F),t("H.map.render.RenderEngine",ql),ql.prototype.V=function(){rl(this,this.ra)},ql.prototype.s=function(){var t=this.g,e=this.F,n=this.c;t.removeEventListener(t.a.Ea,this.V,!1,this),t.startInteraction===this.rc&&(t.startInteraction=kk.prototype.rc),t.interaction===this.ic&&(t.interaction=kk.prototype.ic),t.endInteraction===this.zb&&(t.endInteraction=kk.prototype.zb),e.removeEventListener(e.a.Ea,this.ah,!1,this),e.startControl===this.qc&&(e.startControl=sl.prototype.qc),e.control===this.control&&(e.control=sl.prototype.control),e.endControl===this.yb&&(e.endControl=sl.prototype.yb),n.removeEventListener($i.prototype.b.Ea,this.ng,!1,this),n.removeEventListener(n.b.ze,this.cf,!1,this),n.removeEventListener(n.b.Be,this.df,!1,this),n.removeEventListener(n.b.Ce,this.mg,!1,this)},ql.prototype.Bi=function(t){this.Qg=t},ql.prototype.setAnimationCallback=ql.prototype.Bi,ql.prototype.yi=function(){this.Qg=void 0},ql.prototype.resetAnimationCallback=ql.prototype.yi,ql.prototype.control=function(){},ql.prototype.capture=function(){return Yb(Error("not implemented"))};var ul={ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16};function xl(t,e){return e.tilt=yl(t,e.tilt),e.heading=zl(t,e.heading),e.incline=t.getCapabilities().lookAt.incline.min,e}function wl(t,e){var n=t.getCapabilities().lookAt.zoom;return Yd(e,wd(n.min,t.Ng),vd(n.max,t.Rg))}function yl(t,e){return Yd(e,(t=t.getCapabilities().lookAt.tilt).min,t.max)}function zl(t,e){return Yd((e%360+360)%360,(t=t.getCapabilities().lookAt.heading).min,t.max)}function vl(t,e,n){(n=n?e.addEventListener:e.removeEventListener).call(e,e.b.lj,t.oi,!1,t),n.call(e,e.b.kj,t.oi,!1,t)}ql.InteractionModifiers=ul,n=ql.prototype,n.uk={nj:"render"},n.ng=function(t){this.Mk(t),this.ha()},n.cf=function(t){this.gf(t.idx,t.added)},n.df=function(t){this.ni(t.idx,t.removed,t.type===this.c.b.Ce)},n.mg=function(t){t.removed&&this.df(t),this.cf(t)},n.Mk=hd,n.gf=function(t,e){this.Lh(t,e),0===t&&this.Ib(),C(e,$i)&&vl(this,e,!0),this.qe(),this.ha()},n.Ib=function(){var t=this.c.Ma();if(0<t.length){var e=t[0].max;this.Ng=t[0].min,this.Rg=e}else e=(t=this.getCapabilities().lookAt.zoom).max,this.Ng=t.min,this.Rg=e;(t=wl(this,this.zoom))!==this.zoom&&(this.zoom=t,this.qa.Pa(t),this.bb())},n.bb=function(t){this.L=this.lb(),t&&(this.L.position=t),this.L.zoom=this.zoom-this.hb,this.L.position.alt=0},n.Il=0,n.heading=180,n.lb=function(){return xl(this,{position:this.qa.projection.sg(this.o),zoom:this.zoom,tilt:this.Il,heading:this.heading})},n.Lh=hd,n.ni=hd,n.Xo=function(t,e){this.D={before:t,after:e}},ql.prototype.setOnRenderCallbacks=ql.prototype.Xo;var Al={P2D:0,WEBGL:1,HARP:2};ql.EngineType=Al;var Bl={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:85},incline:{min:0,max:0},heading:{min:0,max:360}},interaction:{ZOOM:ul.ZOOM,COORD:ul.COORD},capture:!0};function Cl(t){var e,n=this,i=x.H.gl;Cl.l.constructor.call(this),this.a=e=i.Scene.create(x.URL.createObjectURL(nf(JSON.stringify(Dl))),{viewport:t.viewport,container:t.sc,disableRenderLoop:!0,devicePixelRatio:t.devicePixelRatio,logLevel:"error"}),t.Go&&e.subscribe({load:t.Go}),e.subscribe({view_complete:function(){n.g=!0,t.Ok()}});var r=e.requestRedraw;e.requestRedraw=function(){r.apply(e),t.Ok()},this.i=A(this.i,this),this.f=A(this.f,this),this.j=0,this.c={},this.b={}}function El(t){var e;for(e in t=t.a.sources){var n=t[e];if(n.hasPendingCommands&&n.hasPendingCommands())return!0}return x.H.gl.Task.hasPendingTasks()}function Fl(t){t.g=!1,t.a.resetViewComplete()}function Gl(t){return t.a.view}function Hl(t,e){function n(){var n,r,o,s,a,l=e.Ma(),c={},u={},h=++t.j;for(uh(u,Dl),r=0;r<l.length;r++){var f=l[r];if(n=f.ga()){var p=n.tb();if(p.getState()===Ph.READY){var d=p.ud();if(!Ta(d)){for(o in delete d.cameras,delete d.camera,c[r]=d=Gh(d,r),!C(f,ml)&&d.sources&&Hh(d,n.uid),d.sources){var g=d.sources[o];g.max_zoom=vd(n.max,Bl.lookAt.zoom.max),g.max_display_zoom=f.max,g.min_display_zoom=f.min,(a=n.tileSize)&&(2<=i&&256<a&&n instanceof sk&&(a/=2),g.tile_size=a)}(s=p.fc())&&Ih(d,s),uh(u,d)}}}}return uh(u.layers.skybox.draw.skybox.color,u.scene.sky),t.a.config=u,t.a.updateConfig().then((function(){var e,n,i={};if(h!==t.j)return!1;for(n in t.j=0,c){f=l[+n];var r=c[n].sources;for(e in r)(r=t.a.sources[e])&&(i[e]=r,r.initialize&&f.getProvider()&&r.initialize(f.getProvider(),t.i,t.a.getWorkers().length,r.tiled?B:t.a.tile_manager.getWorkerForTile(y,r)))}for(e in t.c)!i[e]&&t.c[e].dispose&&t.c[e].dispose();return t.c=i,!0}))}var i=t.a.pixelRatio();t.a.initialized?n():t.a.load(y,{blocking:!1}).then(n)}t("H.map.render.webgl.capabilities",Bl),u(Cl,nd),Cl.prototype.g=!1,Cl.prototype.U=function(){var t=x.H.gl.Task;return this.a.immediateRedraw(),t.setState({user_moving_view:this.a.view.user_input_active}),t.processAll(),this.g&&!this.a.dirty&&!this.a.building&&!El(this)&&!Object.keys(this.b).length},Cl.prototype.i=function(t,e,n){var i=this,r=this.a.sources[t],o=n&&n.isReload;e?!0!==this.b[t]&&(this.b[t]||(this.b[t]={Hl:{},Zg:[]}),C(e,Lk)?this.b[t].Hl[e.x+"/"+e.y+"/"+e.z]=!0:(e=e.boundingBox,this.b[t].Zg.push(new K(e[0],e[1],e[2],e[3])))):this.b[t]=!0,r&&r.has_volatile_data?Il(this,o):(x.clearTimeout(this.o),this.o=x.setTimeout((function(){return Il(i,o)}),Jl))};var Jl=100;function Il(t,e){var n=t.a.tile_manager;n.removeTiles(t.f),n.updateTilesForView(),e&&n.removeCachedTiles(t.f),Fl(t),t.b={}}function Kl(t,e,n,i){t.a.getFeatureAt(e,n,i),t.a.update()}function Ll(t){return t.a.screenshot(void 0).then((function(t){return new Ob((function(e,n){new Cj(URL.createObjectURL(t.blob),(function(t,i){1===t?e(i.getData()):n()}),!1)}))}))}Cl.prototype.f=function(t){var e=!1,n=this.b[t.source.name],i=x.H.gl;if(n)if(!0===n)e=!0;else{var r=i.Tile.coord(i.Geo.wrapTile(t.coords));if(!(e=!!n.Hl[r.key]))for(t=dg((t=i.Geo.getTileBoundingBox(r,t.source.tile_size,O.MAX_LINE_WIDTH/2)).getTopLeft(),t.getBottomRight()),i=0;i<n.Zg.length;i++)if(n.Zg[i].zd(t,!0)){e=!0;break}}return e},Cl.prototype.ud=function(){return this.a.config},Cl.prototype.$a=function(){return this.a.pixelRatio()},Cl.prototype.s=function(){var t=this.c;Cl.l.s.call(this),this.a.destroy(),this.b={},t&&Object.keys(t).forEach((function(e){t[e].dispose()})),x.clearTimeout(this.o),this.c=this.a=null};var Dl={scene:{background:{color:"#FFFFFF"},sky:{zenith:"#347BC0",horizon:"#EDF2F9",fog:"#FFFFFF"}},lights:{default_light:{type:"directional",name:"default_light",visible:!0}},camera:{type:"perspective"},styles:{},fonts:{},sources:{skybox:{type:"SkyBox"}},layers:{skybox:{data:{source:"skybox"},draw:{skybox:{color:{}}}}},global:{}},Xj=1,Yj=2,Zj=3;function Ml(t){return t}function Nl(t){return-t*(t-2)}function Ol(t){return 1-Math.sqrt(1-t*t)}function Pl(t){return Cd(2*t-t*t)}function Ql(t){return 1-Math.cos(t*Math.PI/2)}function Rl(t){return Math.sin(t*Math.PI/2)}function Sl(t,e){this.a={tilt:Tl(t.tilt,e.tilt),heading:Tl(t.heading,e.heading),zoom:e.zoom-t.zoom};var n=this.b=Zf(t.position),i=e.position;t=i.lat*Rd;var r=n.lat*Rd;i=i.lng*Rd-n.lng*Rd,n=Fd(i)*Hd(t),t=Hd(r)*Fd(t)-Fd(r)*Hd(t)*Hd(i),t=Math.atan2(n,t),this.j=(0<=t?t:Pd+t)*Sd,this.c=this.b.Za(e.position),e=this.a.zoom,this.i=0===e?this.f:Object.assign({},this.f,{zoom:0>e?Pl:Ol,position:0>e?Ql:Rl}),this.g=Object.assign({},{tilt:0,heading:0,zoom:0})}function Tl(t,e){return-180<(t=e-t)&&180>=t?t:180<t?t-360:t+360}function Ul(t,e){if(E(this.x=+t))throw new D(Ul,0,t);if(E(this.y=+e))throw new D(Ul,1,e)}function Vl(t){return Cd(t.a(t))}function Wl(t){t=t||gf,this.rb=tc(t.Bo)?t.Bo:3,this.aa=tc(t.zo)?t.zo:300,this.u=tc(t.kp)?t.kp:3,this.v=tc(t.gp)?t.gp:50,this.f=[],this.clear()}function Zl(t,e){t.i^=t.i&e}t("H.map.provider.PickingMode",{FEATURE:Xj,SOURCE:Yj,PROVIDER:Zj}),t("H.util.animation.ease.LINEAR",Ml),t("H.util.animation.ease.EASE_IN_QUAD",(function(t){return t*t})),t("H.util.animation.ease.EASE_OUT_QUAD",Nl),t("H.util.animation.ease.EASE_IN_OUT_QUINT",(function(t){return 1>(t*=2)?Dd(t,5)/2:Dd(t-=2,5)/2+1})),t("H.util.animation.ease.EASE_OUT_CIRC",Pl),Sl.prototype.f={tilt:Ml,heading:Ml,zoom:Ml,position:Ml},Ul.prototype.add=function(t){return new Ul(this.x+t.x,this.y+t.y)},Ul.prototype.a=function(t){if(!C(t,Ul))throw new D(this.a,0,t);return(t=this.b(t)).x+t.y},Ul.prototype.b=function(t){if(!C(t,Ul))throw new D(this.b,0,t);return new Ul(this.x*t.x,this.y*t.y)},Ul.prototype.Pa=function(t){return new Ul(this.x*t,this.y*t)},t("H.map.render.InteractionUtils",Wl),Wl.prototype.co=function(){return this.c},Wl.prototype.isGestureDetected=Wl.prototype.co,Wl.prototype.start=function(t,e){var n=ul.HEADING,i=ul.TILT;this.a&&this.clear(),this.i=t,this.o=!!e,this.a=!0,this.c=!(t&(n|i))||t===n||t===i},Wl.prototype.start=Wl.prototype.start,Wl.prototype.store=function(t,e,n,i,r){var o=!1;if(this.a){if(o=(t=new Xl(t,e,n,i,r)).c,this.m=this.b,this.b=t,this.g){if(this.j=!0,o){e=this.i;var s=this.c;if(!s&&this.j){r=ul.HEADING;var a=ul.TILT;n=ul.COORD,i=ul.ZOOM;var l=e&(n|a)?this.ae(!0):Yl,c=e&i?this.Tf(!0):1,u=e&r?Ad(this.th(!0)):0,h=Ad(l.x),f=Ad(l.y);l=10<h||10<f,h=10<f&&f>3*h,c=.8>c||1.2<c,u=7<u,e&a&&(u||c||l&&!h?Zl(this,a):h&&(Zl(this,~a>>>0),s=!0)),!s&&e&r&&e&(n|i)&&(c||l?(Zl(this,r),s=!0):u&&(Zl(this,a),s=!0)),this.c=s}}}else this.g=t,o||(this.c=!0);this.o&&this.f.push(t)}return o},Wl.prototype.store=Wl.prototype.store,Wl.prototype.clear=function(){this.f.length=0,this.a=this.o=this.j=this.c=!1,this.g=this.m=this.b=void 0},Wl.prototype.clear=Wl.prototype.clear,Wl.prototype.Fc=function(t){return 0<(this.i&t)},Wl.prototype.isModifierEnabled=Wl.prototype.Fc,Wl.prototype.va=function(){return this.a},Wl.prototype.isRunning=Wl.prototype.va;var Yl=oc(new Ul(0,0));function Xl(t,e,n,i,r){this.a=new I(t,e),n!==B&&(this.b=new I(n,i),this.c=!0),this.timestamp=r!==B?r:zk()}function am(t){var e=t.a;return(t=t.b)?new I(e.x-(e.x-t.x)/2,e.y-(e.y-t.y)/2):B}function cm(t,e){var n=t.a;return(t=t.b)&&t.Za(e)<n.Za(e)?t:n}function $l(t,e){var n=t.b,i=e.b;return i&&n?(e=am(e),t=am(t)):n?t=cm(t,e=e.a):i?e=cm(e,t=t.a):(e=e.a,t=t.a),new Ul(e.x-t.x,e.y-t.y)}function bm(t){var e=t.b;return e?t.a.Za(e):0}function dm(){F.call(this),this.reset()}function fm(t){fm.l.constructor.call(this,dm.prototype.g.Pg),this.c=t}function gm(t){return x.Object.create(t.f)}function em(t,e,n,i,r,o){this.mb=t,this.nb=e,this.ob=n,this.re=i,this.se=r,this.tf=o}function hm(t,e,n,i){hm.l.constructor.call(this),this.sc=t,this.ra=i,this.a=t.appendChild(this.createElement(t.ownerDocument)),this.vf(e,n)}function im(t,e,n,i){im.l.constructor.apply(this,arguments)}function jm(t,e,n,i,r,o){var s=r||"2d";jm.l.constructor.apply(this,arguments),this.b=this.a.getContext(s,o),this.c="2d"===s,this.f=s,this.qo=o}function km(t){this.gb=t}function lm(t){var e="dom";lm.l.constructor.call(this,t),C(this.gb,mm)&&(e="2d"===t.Vd()?"2d":"webgl"),this.a=e}function nm(t,e,n,i,r){if(!Ca(t.Bi)||!Ca(t.yi))throw new D(nm,0,t);if(this.b=t,!Ca(this.i=e))throw new D(nm,1,e);if(E(this.g=+n))throw new D(nm,2,n);if(!Ca(this.f=i)&&null!=i)throw new D(nm,3,i);if(!Ca(this.c=r)&&null!=r)throw new D(nm,4,r);this.id=(new af).next(),this.a=!1}function om(t,e){om.l.constructor.call(this,t),this.uc=!(!e||!e.uc),this.f={}}Wl.prototype.wc=function(){var t;if(this.o){var e=this.f,n=e.length,i=0;for(t=new Ul(0,0);--n&&i<this.u;)t=t.add($l(e[n-1],e[n])),i++}else t=this.ae();return 0!==(n=Vl(e=t))?new Ul(e.x/n,e.y/n):e},Wl.prototype.getDirection=Wl.prototype.wc,Wl.prototype.Cb=function(t){var e,n;if(t=t||zk(),this.o){var i=this.f,r=this.f.length,o=this.f[r-1];for(n=e=0;--r&&e<this.u;)n+=Vl($l(i[r],i[r-1])),e++;i=n/e}else o=this.b,i=Vl(this.ae());return i>=this.rb&&t-o.timestamp<=this.v?i>this.aa?this.aa:i:0},Wl.prototype.getSpeed=Wl.prototype.Cb,Wl.prototype.Sf=function(){return this.b?am(this.b):B},Wl.prototype.getBifocalCenter=Wl.prototype.Sf,Wl.prototype.ae=function(t){return(t=t?this.g:this.m)?$l(t,this.b):new Ul(0,0)},Wl.prototype.getMoveVector=Wl.prototype.ae,Wl.prototype.Tf=function(t){var e=1;if(this.j){var n=this.b;(t=bm(t=t?this.g:this.m))&&(n=bm(n))&&(e=n/t)}return e},Wl.prototype.getBifocalScaling=Wl.prototype.Tf,Wl.prototype.th=function(t){if(this.j){var e=t?this.g:this.m,n=this.b;t=e.b;var i=n.b,r=0;t&&i&&(e=e.a,n=n.a,r-=Kd(i.y-n.y,i.x-n.x)*Sd-Kd(t.y-e.y,t.x-e.x)*Sd),t=r}else t=0;return t},Wl.prototype.getBifocalRotation=Wl.prototype.th,Xl.prototype.c=!1,u(dm,F),dm.prototype.start=function(t,e){this.a&&this.reset(),E(t-e)||(this.b=+t,this.c=+e),this.a=!0},dm.prototype.reset=function(){this.a=!1,this.b=this.c=null,this.f=new em(0,0,0,0,0,0)},dm.prototype.va=function(){return this.a},dm.prototype.g={Pg:"animationupdate"},u(fm,rd),dm.prototype.set=function(t,e,n,i,r,o){var s=this.f;this.a&&(t=new em(t/1e3,e/1e3,n/1e3,i/1e3,r/1e3,o/1e3),s.na(t)||(this.f=t,this.dispatchEvent(new fm(gm(this)))))},dm.prototype.Cb=function(){return gm(this).Cb()},dm.prototype.wc=function(){var t=gm(this),e=this.Cb()||1;return new em(t.mb/e,t.nb/e,t.ob/e,t.re,t.se,t.tf)},dm.prototype.s=function(){this.reset(),dm.l.s.call(this)},em.prototype.Cb=function(){return Cd(this.mb*this.mb+this.nb*this.nb+this.ob*this.ob)},em.prototype.wc=function(){var t=this.Cb()||1;return new em(this.mb/t,this.nb/t,this.ob/t,this.re,this.se,this.tf)},em.prototype.na=function(t){return!!t&&this.mb===t.mb&&this.nb===t.nb&&this.ob===t.ob&&this.re===t.re&&this.se===t.se&&this.tf===t.tf},u(hm,nd),hm.prototype.N=function(){return this.a},hm.prototype.vf=function(t,e){this.size?(this.size.w=t,this.size.h=e):this.size=new Ji(t,e),this.yl(this.a,this.a.style,t,e,this.ra)},hm.prototype.setSize=hm.prototype.vf,n=hm.prototype,n.Bb=function(){return this.size},n.$a=function(){return this.ra},n.nk=!0,n.vb=function(t){t!==this.nk&&(this.a.style.display=t?"block":"none",this.nk=t)},n.$h=1,n.nc=function(t){this.$h!==t&&(this.vk(t),this.$h=t)},n.dd=function(){return this.$h},n.we=function(t){this.a.style.zIndex=t},hm.prototype.setZIndex=hm.prototype.we,n=hm.prototype,n.ak=function(){return+this.a.style.zIndex},n.Zc=function(){},n.clear=function(){},n.s=function(){this.clear(),this.sc.removeChild(this.a),this.vf(0,0),this.a=this.sc=null,hm.l.s.call(this)},n.bl=0,n.Bg=function(){++this.bl},n.release=function(){--this.bl||this.B()},u(im,hm),t("H.map.render.dom.Surface",im),n=im.prototype,n.Vd=function(){return"dom"},n.createElement=function(t){return(t=t.createElement("DIV")).style.position="absolute",t.style.pointerEvents="none",t},n.yl=function(t,e,n,i){e.width=n+"px",e.height=i+"px"},n.vk=function(t){this.a.style.opacity=t},n.Zc=function(t,e,n){var i=this.ra,r=t.style;r[xf("transform")]="matrix(1,0,0,1,"+e/i+","+n/i+")",t.parentNode!==this.a&&(r.position="absolute",this.a.appendChild(t),this.a.style.pointerEvents="auto","auto"===getComputedStyle(t).pointerEvents&&(t.style.pointerEvents="all"),this.a.style.pointerEvents="none")},n.clear=function(t){t?this.a.removeChild(t):this.a.innerHTML=""},u(jm,hm),n=jm.prototype,n.createElement=function(t){var e=(t=t.createElement("canvas")).style;return e.position="absolute",e.top=e.left="0",t},n.yl=function(t,e,n,i,r){t.width=wd(n,1),t.height=wd(i,1),e.width=xd(n/r)+"px",e.height=xd(i/r)+"px"},n.vk=function(t){this.b.globalAlpha=t},n.Zc=function(t,e,n,i,r){this.c&&this.b.drawImage(t,e,n,i,r)},n.Vd=function(){return this.f},n.clear=function(t){var e,n;this.c&&(t?this.b.clearRect(e=t.left,n=t.top,t.right-e,t.bottom-n):this.a.width=this.size.w)},n.s=function(){this.a.width=this.a.height=0,this.b=y,jm.l.s.call(this)},u(km,nd),km.prototype.sb=function(){return this.gb},km.prototype.getLayer=km.prototype.sb,km.prototype.Gn=function(){return this.wb},km.prototype.getSurface=km.prototype.Gn,km.prototype.ld=function(t){var e=this.wb;t!==e&&(this.wb=t,t.Bg(),e&&e.release())},km.prototype.setSurface=km.prototype.ld,km.prototype.s=function(){this.wb.release()},km.prototype.fe=function(){},km.prototype.render=km.prototype.U,u(lm,km),lm.prototype.U=function(t,e,n,i,r,o,s,a){s=this.gb;var l=this.wb,c=!(C(l,jm)&&"2d"===l.Vd());return i>=s.min&&i<=s.max?(c&&l.vb(!0),s.U(l.N(),{boundingBox:t,zoom:i,screenCenter:e,priorityCenter:o,projection:n,cacheOnly:r,size:l.Bb(),pixelRatio:l.$a(),cameraMatrix:a})):(c&&l.vb(!1),jk.DONE)},lm.prototype.fe=function(){return this.a},t("H.util.animation.Animation",nm),nm.prototype.start=function(){var t=this;this.Qc=zk(),this.a=!0;var e=this.Qc;this.b.Bi((function(){if(t.a){var n=zk(),i=n-t.Qc,r=i/t.g,o=!1;1<=r&&(r=1,o=!0),t.i(t.c?t.c(r):r,i,n-e,n),e=n,o&&t.stop()}else t.stop()}))},nm.prototype.start=nm.prototype.start,nm.prototype.stop=function(t){this.a=!1,this.b.yi(),t||this.f&&this.f(this)},nm.prototype.stop=nm.prototype.stop,nm.prototype.va=function(){return this.a},nm.prototype.isRunning=nm.prototype.va,u(om,km),om.prototype.ld=function(t){om.l.ld.call(this,t),this.g=t.sc.ownerDocument},om.prototype.setSurface=om.prototype.ld;var pm=function(t,e){return C(e=e.ba(),jh)?e.oa:(t[0]=e,t)}.bind(null,[]);function qm(t,e){var n=t[1].ed(),i=e[1].ed();return Qg(n,i,!0)||t[5]-e[5]||Qg(n,i,!1)}function rm(t,e){rm.l.constructor.apply(this,arguments),this.c=0,this.a=[],this.b=A(this.b,this)}om.prototype.U=function(t,e,n,i,r,o,s){var a,l,c,u,h=this.gb;if(this.o=e=this.f,this.f=n={},i>=h.min&&i<=h.max){var f=this.Kj(t,i,r,o),p=f.markers;if(t=p.length){for(i=[],r=this.wb,o=0;o<t;o++){h=p[o];var d=pm(h);for(a=d.length;a--;)(l=s(d[a]))&&((u=e[c=h.fb()+"_"+a])?delete e[c]:u={Hk:h},n[c]=u,i.push([u,h,h.Ab(),r,l.x,l.y]))}for(i.sort(qm),t=i.length,o=0;o<t;o++)this.dl.apply(this,i[o])}}return!f||f.requested&&f.requested===f.total||!f.requested&&p.length===f.total?jk.DONE:jk.PENDING},om.prototype.render=om.prototype.U,om.prototype.Ga=function(){},om.prototype.getObjectsAt=om.prototype.Ga,u(rm,om),t("H.map.render.dom.MarkerRenderer",rm),rm.prototype.Kj=function(){return this.gb.Ic.apply(this.gb,arguments)},rm.prototype.U=function(t,e,n,i,r,o,s){this.b(),this.j=0;var a,l=rm.l.U.apply(this,arguments),c=this.wb,u=this.o;for(a in u)sm(this,c,u[a]);return 0===this.a.length&&l?jk.DONE:jk.PENDING},rm.prototype.render=rm.prototype.U,rm.prototype.ld=function(t){rm.l.ld.call(this,t),this.i=t.$a()},rm.prototype.setSurface=rm.prototype.ld,rm.prototype.b=function(){for(var t,e,n,i=this.a.length;i--;)t=(n=this.a[i]).Bf,(e=n.Bf.Ab()).li(n,e,t);this.a.length=0},rm.prototype.dl=function(t,e,n,i,r,o){var s,a=i.$a(),l=e.Ob();r*=a,o*=a,this.uc||(r=xd(r),o=xd(o)),t.detail&&(l.je(t.Zn)?sm(this,i,t):s=t.detail),s||(t.detail=s=n.Nj(this.g),this.c++,Ca(n.li)&&this.a.push(s)),t.Zn=l.a,s.style.zIndex=this.j++,s.Bf=e,i.Zc(s,r,o,0,0)};var tm,um="pointer-events",vm,wm;Ye&&(Ye&&Yc!==y&&(Yc=(wm=/(MSIE\s+|rv:)([^\);]+)(\)|;)/.exec(navigator.userAgent))?+wm[2]:y),vm=Yc,9===vm?um="display":10===vm&&(um="visibility"));function sm(t,e,n){e.clear(e=n.detail),delete e.Bf,t.c--,(n=(t=n.Hk).Ab()).b&&n.b(e,n,t)}function mm(t,e){var n=e||{},i=n.contextType;if(n=n.contextAttributes,mm.l.constructor.call(this,e),wc(t,"Function",mm,0,"invalid render callback"),i){if(-1===xm.indexOf(i))throw new D(mm,1,"invalid context type");this.f=i}n&&(this.o=n),this.j=t}tm=um,rm.prototype.Ga=function(t,e,n){var i,r,o,s,a,l=this.i,c=ff;if(this.c){t/=l,e/=l;var u=(l=this.g).documentElement,h=this.wb.N(),f=h.getBoundingClientRect();for(t+=f.left,e+=f.top;(r=o=l.elementFromPoint(t,e))&&r!==h&&r!==u&&o!==p;){for(;(s=r.parentNode)&&(!Ca(s.contains)||!s.contains(h));)r=s;if(s===h&&(r!==o||"svg"!==r.nodeName)&&0>c.indexOf(a=r.Bf)&&(c===ff&&(c=[]),c.push(a),n))break;i||(i=[]);var p=r.style;i.push({xj:p.getPropertyValue(tm),Yn:p.getPropertyPriority(tm),style:p}),p.setProperty(tm,"visibility"===tm?"hidden":"none","important"),p=o}if(i)for(e=i.length;e--;)(t=i[e]).style.removeProperty(tm),zc(t.xj)&&t.style.setProperty(tm,t.xj,t.Yn)}return c},rm.prototype.getObjectsAt=rm.prototype.Ga,rm.prototype.fe=function(){return"dom"},rm.prototype.s=function(){this.a.length=0;var t,e=this.wb,n=this.f;for(t in n)sm(this,e,n[t]);this.wb.B(),rm.l.s.call(this)},u(mm,$i),t("H.map.layer.CanvasLayer",mm);var xm=["2d","webgl","webgl2","experimental-webgl"];function ym(t,e){ym.l.constructor.call(this,e),wc(t,"Function",ym,0,"invalid render callback"),this.c=t}function zm(t,e){if(E(this.b=+t))throw new D(zm,0,t);this.a=0,e&&this.tl(e)}function Am(t,e){this.a=t,this.b=e}function Bm(t,e,n){var i=[],r={sc:t.a,width:e.w,height:e.h,ra:t.b};for(t=0;t<n.length;t++){var o=(e=n[t]).fe(),s={};Wa(s,r);var a=e.wb;switch(o){case"2d":if(C(e.sb(),mm)&&(s.gh=e.sb().o),o=u&&"2d"===u.Vd()){o=s.gh;var l=u.qo;o=l===o||(l&&!o?!l.alpha&&!l.willReadFrequently:o&&!l?!o.alpha&&!o.willReadFrequently:!o.alpha===!o.alpha&&!l.willReadFrequently===!o.willReadFrequently)}if(o)var c=!1;else if(a&&!c){var u=a;c=!1}else u=new jm(s.sc,s.width,s.height,s.ra,"2d",s.gh),c=!0;break;case"dom":u=a||new im(s.sc,s.width,s.height,s.ra),c=!a;break;default:u=a||new jm(s.sc,s.width,s.height,s.ra,e.sb().Vd(),s.gh),c=!a}i[i.length-1]!==u&&(u.we(i.length),i.push(u)),e.ld(u)}return i}mm.prototype.f="2d",mm.prototype.Vd=function(){return this.f},mm.prototype.U=function(t,e){return this.c&&this.c.canvas===t||(this.c=t.getContext(this.f,this.o)),this.j(this.c,e)},mm.prototype.s=function(){mm.l.s.call(this),this.c=B},u(ym,$i),t("H.map.layer.DomLayer",ym),ym.prototype.U=function(t,e){return this.c(t,e)},t("H.util.kinetics.KineticMove",zm),zm.prototype.tl=function(t){return this.a=t,this},zm.prototype.setInitialSpeed=zm.prototype.tl,zm.prototype.Mm=function(){return Math.abs(this.a/this.b)},zm.prototype.getDuration=zm.prototype.Mm,zm.prototype.Ue=function(t){return this.a+this.b*t},zm.prototype.getCurrentSpeed=zm.prototype.Ue,zm.prototype.Hm=function(t){return this.a*t+this.b*t*t/2},zm.prototype.getCurrentPath=zm.prototype.Hm,t("H.util.events.listenOnce",Ce),t("H.util.events.dispatchEvent",(function(t,e){return t.dispatchEvent(e)})),t("H.util.events.fireListeners",(function(t,e,n,i){return le(t)?t.sd(e,n,i):Le(t,e,n,i)})),t("H.util.events.listen",Be),t("H.util.events.unlisten",Je);var Cm=Me;function sl(){sl.l.constructor.call(this),this.c={},this.b={position:new Xf(0,0),zoom:0,heading:180,incline:0,tilt:0,bounds:new P(Gg([90,-180,90,0,90,180,-90,180,-90,-180]))}}Me=function(t,e){var n,i,r=!0,o=e[e.currentTarget===e.target?"AT_TARGET":t.capture?"CAPTURING_PHASE":(n=!0,"BUBBLING_PHASE")];return(!n||"pointerenter"!==(i=e.type)&&"pointerleave"!==i)&&(e.eventPhase=o,r=Cm(t,e),n&&t.src&&t.src.Pb&&null===t.src.Pb()&&delete e.eventPhase),r},u(sl,F),t("H.map.ViewModel",sl),sl.prototype.a={Ea:"update",De:"sync"},sl.prototype.Zb=function(t,e){if(!t)throw new D(this.Zb,0,t);var n=t[Dm];if(tc(n)&&!Yf(n))throw new D(this.Zb,0,Dm);if(tc(n=t[Em])&&E(+n))throw new D(this.Zb,0,Em);if(tc(n=t[Fm])&&!C(n,Wf))throw new D(this.Zb,0,Fm);return n=Gm(t=x.Object.assign({},t),this.c,this.b),Hm(this,this.c,t),this.dispatchEvent(new Im(this.c,n,e)),this},sl.prototype.setLookAtData=sl.prototype.Zb,sl.prototype.lb=function(){var t={};return t[Dm]=Zf(this.b[Dm]),Hm(this,t,this.b,!0),t},sl.prototype.getLookAtData=sl.prototype.lb;var Dm="position",Em="zoom",Fm="bounds",Jm={mj:Dm,pj:Em,gj:"heading",oj:"tilt",hj:"incline",dj:Fm},Km=Object.keys(Jm).map((function(t){return Jm[t]}));function Hm(t,e,n,i){t.i={},t.g={},t.f=[];for(var r,o,s,a=t.o,l=t.j,c=Km.length;c--;)if(s=n[r=Km[c]],null==(o=e[r])||!i)if(null!=s){tc(a)&&a.call(t,r,o,s);var u,h=r;if((u="position"!==r)||(u=!(!(u=s)||E(u.lat)||E(u.lng))),e[h]=u?s:Zf(s),tc(l)){switch(r){case"position":o=s&&o&&(s.lat!==o.lat||s.lng!==o.lng);break;case"bounds":o=s&&o&&!s.na(o);break;default:o=s!==o}o&&l.call(t,r)}}else delete e[r]}sl.prototype.o=function(t,e,n){this.i[t]=e,this.g[t]=n},sl.prototype.j=function(t){this.f.push(Lm[t])};var Lm=Km.reduce((function(t,e){return t[e]=Ri[e.toUpperCase()],t}),{});function Gm(t,e,n){var i=0;return["tilt","incline","heading",Em].forEach((function(r){if(E(t[r])){var o=E(e[r])?n[r]:e[r];t[r]=o}else i|=Lm[r]})),[Dm,Fm].forEach((function(r){t[r]?i|=Lm[r]:t[r]=e[r]||n[r]})),i}function Mm(t,e){return t|e}function Im(t,e,n){Im.l.constructor.call(this,sl.prototype.a.Ea,t,null,e),this.b=this.animate=!!n}function S(t,e,n,i){if(S.l.constructor.call(this,t,e,n,i),this.Ja=new Dk(100),this.fa=new I(0,0),this.Le=!!i.enableSubpixelRendering,this.bc=Nm,this.m=new Wl,this.i=i=new dm,this.cc=A(this.cc,this),i.addEventListener(i.g.Pg,this.cc),i=t.element,this.S=t=i.ownerDocument.createElement("div"),t.style.position="absolute",t.style.width=t.style.height="100%",t.style.zIndex=0,i.insertBefore(t,i.firstChild),this.Md=new Am(this.S,this.ra),this.$=e.lb().position,!(e=x.H.gl))throw new Xc(S,'"H-webgl" module is missing');for(this.a=new Cl({viewport:this.g,sc:this.S,devicePixelRatio:this.ra,Ok:A(this.ha,this)}),e.WorkerBroker.addTarget("model",cj),t=0,i=(e=this.c.Ma()).length,this.j={Yc:[],ja:[]},this.f=e;t<i;t++){var r=e[t];this.gf(t,r),vl(this,r,!0)}this.Ib(),this.Uc=A(this.Uc,this),this.bi=A(this.bi,this),this.Fa=A(this.Fa,this),n.addEventListener($i.prototype.b.Ae,this.Uc),this.A=Om,this.zoom=wl(this,this.F.ub()),this.Ib(),this.V()}sl.prototype.bb=function(t){var e={},n={};Hm(this,this.b,t),this.c={},e.lookAt=this.g,n.lookAt=this.i,t=(t=this.f).length?t.reduce(Mm):0,this.dispatchEvent(new Qi(this.a.De,e,n,t))},sl.prototype.synchronize=sl.prototype.bb,sl.prototype.wf=function(t,e){if(E(t=+t))throw new D(this.wf,0,Em);this.Zb({zoom:t},e)},sl.prototype.ub=function(){return this.b.zoom},sl.prototype.qc=Nc,sl.prototype.startControl=sl.prototype.qc,sl.prototype.control=Nc,sl.prototype.control=sl.prototype.control,sl.prototype.yb=Nc,sl.prototype.endControl=sl.prototype.yb,u(Im,Qi),u(S,ql),t("H.map.render.webgl.RenderEngine",S),S.prototype.lb=function(){var t=this.$;return xl(this,{position:{qk:t.qk,sk:t.sk},zoom:this.zoom,tilt:this.Il,heading:this.heading})},S.prototype.Uc=function(t){((t=(t=t.target.ga())&&t.tb())&&t.getState())===Ph.INIT?t.load():(Fl(this.a),Hl(this.a,this.c),this.ha())},S.prototype.type=Al.WEBGL,S.prototype.type=S.prototype.type;var Om=2;function Pm(t,e,n){return(e=n-e)<(t=Dd(2,8+t.zoom))/2?e:e-t*n/Ad(n)}function Qm(t,e,n){function i(t){return r[t]+Tl(r[t],e[t])/2}if(!(n&Ri.POSITION||n&Ri.BOUNDS))return null;var r=Gl(t.a).getLookAtData();n=r.position;var o=e.position,s=e.bounds;return pi(r.bounds,o.lat,o.lng,!1)||s&&pi(s,n.lat,n.lng,!1)?null:((n=Rm(t,{tilt:i("tilt"),heading:i("heading"),incline:0,bounds:eg([n,o])})).zoom=wl(t,n.zoom-.5),delete n.bounds,n)}function Sm(t,e,n,i){return t=(t=t.getCapabilities().lookAt[i]).max-t.min,Ad("zoom"===i?n[i]-e[i]:Tl(e[i],n[i]))/t||0}function Tm(t,e,n){return Yd(3e3*(t=wd(8*Sm(t,e,n,"zoom"),Sm(t,e,n,"heading"),Sm(t,e,n,"tilt")/2)),300,4e3)}function Rm(t,e){return Xm(e),Gl(t.a).getBestLookAtData(e)}function Xm(t){var e=t.bounds;!e||e instanceof P||(t.bounds=mi(e.I()))}function Zm(t,e,n){Gl(t.a).setLookAtData(e),Fl(t.a),Ym(t),t.ha(),n&&setTimeout(n,0)}function Wm(t,e,n,i){var r=Gl(t.a).getLookAtData(),o=new Sl(r,e);0!==o.a.tilt+o.a.heading+o.a.zoom+o.c?$m(t,(function(e){for(var n in o.a)if(0!==o.a[n]){var i=o.i[n](e);r[n]+=o.a[n]*(i-o.g[n]),o.g[n]=i}return 0!==o.c&&(r.position=o.b.Lg(o.j,o.c*o.i.position(e),!0)),Zm(t,r)}),n,(function(){return Zm(t,e,i)})):Zm(t,e,i)}function an(t,e){t.Ja.pa((function(t,n){return n.Pb()===e}))}function bn(t){return!(C(t,ym)||C(t,mm))}function Vm(t,e){var n=e.position;return xl(t,{zoom:wl(t,e.zoom),position:new Xf(n.lat,n.lng),tilt:e.tilt,heading:e.heading,bounds:e.bounds})}function Ym(t){var e=Gl(t.a).getLookAtData();t.zoom=e.zoom,t.$=e.position}function dn(t,e){return new I((t=Gl(t.a).geoToMeters(e)).x/40075016.68557849+.5,1-(t.y/40075016.68557849+.5))}function en(t,e){return e.sub(dn(t,t.$)).scale(Dd(2,8+t.zoom))}function fn(t,e,n,i,r,o,s,a){var l,c,u,h=0,f=function(){0===--h&&o(r)};if(a&&a.features)for(h=c=a.features.length,u=0;u<c;u++){var p=a.features[u],d=p.id;if(l=t.a.a.sources[p.source_name]){var g=l.provider,m=g.Wj();if(m===Yj){var v=p.source_layer;if("overlays"===v)gn(t,e,n,i,r,l,p.properties.overlays_config);else if(l=l.getMapObjectById(d))if("markers"!==v)r.push(l);else if(hn(t,e,n,l))r.push(l);else if(i&&!s){var y=!0;Kl(t.a,{x:e,y:n},{radius:jn,top_most_only:!1},(function(s){fn(t,e,n,i,r,o,!0,s)}))}h--}else m===Xj?(v=p.tile.coords,(y=g.getFeatureProxy(p.properties,v,(function(t){if(t){for(var e,n=t;n&&(e=n.Pb())&&e!==g;)n=e;e||n.ka(g),r.push(t)}f()})))||((l=t.Ja.get(d))||((l=new Kg(p)).ka(g),t.Ja.add(d,l,1)),r.push(l),h--)):m===Zj&&(y=!0,g.el(p,!1).then((function(t){t&&(!(t instanceof Mi)||hn(this,e,n,t))&&r.push(t),f()}),(function(){f()}),t))}}m&&(y||0!==h)||o(r)}function gn(t,e,n,i,r,o,s){var a;for(t=t.Xa(e,n),e=s.length;e--&&(!(a=o.getMapObjectById(s[e].id))||0<=r.indexOf(a)||!a.ba().Pd(t)||(r.push(a),!i)););}function hn(t,e,n,i){var r,o=i.Ab(),s=o.g,a=!s;if(s)if(e+=(o=o.td()).x,n+=o.y,C(o=i.ba(),Ii))for(r=(i=o.oa).length;r--&&!a;)o=t.Fa(i[r]),a=s.eg(e-o.x,n-o.y,0)!==ae.NONE;else o=t.Fa(o),a=s.eg(e-o.x,n-o.y,0)!==ae.NONE;return a}function kn(t,e,n,i,r){for(var o,s=e.length;s--&&!((o=e[s])&&o.Ga&&(t=t.concat(o.Ga(n,i,r)),t.length&&r)););return t}function cn(t){return{w:(t=t.Gb[2]).right-t.left,h:t.bottom-t.top}}function ln(t){t.b&&t.b.va()||(El(t.a)||zk()-t.Da<t.bc)&&!t.v?t.Td||(t.Td=Jk(t.bi)):(t.v&&(t.qe(),mn(t)),t.A=Om)}function mn(t,e){t.od||setTimeout(A(t.dispatchEvent,t,{type:t.uk.nj,target:e||t}),1)}function on(t,e,n){Gl(t.a).applyPxOffset([e,n]),Ym(t),t.fa.set(0,0),Fl(t.a),t.ha()}function pn(t,e,n,i){Gl(t.a).setLookAtData({zoom:e},Cc(n)&&Cc(n)?[n,i]:B),Ym(t),Fl(t.a),t.ha()}function Um(t){nn(t),t.i.va()&&t.yb(!0),t.m.va()&&t.zb(!0)}function qn(t,e){if(e){var n={};n.kf=e.power,n.Me=e.ease,n.duration=e.duration,t.u=n}}function sn(t,e){var n=en(t,dn(t,e.position)),i=n.y;n=n.x;var r=e.zoom,o=en(t,dn(t,t.$));e=o.y;var s=o.x;o=t.zoom;var a=t.i.Cb(),l=t.i.b,c=t.i.c,u=0;if(n=Pm(t,s,n),e=Cd((n-=s)*n+(i-=e)*i+(o=r-o)*o),0!==a&&0!==e){var h=n/e,f=i/e,p=o/e,d=a*a/(2*e);$m(t,(function(e,n){var i;1!==e?((i=p*(n=(e=a*n-d*n*n/2)-u))&&(i=wl(t,t.zoom+i),pn(t,i,l,c)),on(t,xd(h*n),xd(f*n)),u=e):(pn(t,wl(t,r),l,c),t.ha())}),2*e/a)}}function rn(t,e,n){n=n||0;var i=t.i,r=Gl(t.a),o=r.getLookAtData();e.ob&&pn(t,wl(t,o.zoom+e.ob*n),i.b,i.c),r.setLookAtData({heading:zl(t,o.heading+e.se*n),tilt:yl(t,o.tilt+e.re*n)}),Ym(t),on(t,e.mb*n,e.nb*n)}function $m(t,e,n,i,r){t.b&&t.b.va()&&t.b.stop(!0),t.b=new nm(t,e,n,i,r),t.b.start()}function nn(t){t.b&&t.b.va()&&t.b.stop(!0)}S.prototype.getState=function(){return this.A},S.prototype.getState=S.prototype.getState,S.prototype.od=!1,S.prototype.ah=function(t){var e=this,n=t.newValue,i=t.modifiers,r=Gl(this.a);Um(this),this.fa.set(0,0);var o=Vm(this,n);if(Km.forEach((function(e){i&t[e.toUpperCase()]||delete o[e]})),t.b){r=Gl(this.a).getLookAtData();var s=Rm(this,o);n=Qm(this,s,i);var a=function(){return e.od=!1};if(delete s.bounds,this.od=!0,n){r=Tm(this,r,n);var l=Tm(this,n,s);Wm(this,n,r,(function(){return Wm(e,s,l,a)}))}else n=Tm(this,r,s),Wm(this,s,n,a)}else Xm(o),r.setLookAtData(o);Ym(this),Fl(this.a),this.ha()},S.prototype.Dg=function(){},S.prototype.setAnimationDuration=S.prototype.Dg,S.prototype.rh=function(){},S.prototype.getAnimationDuration=S.prototype.rh,S.prototype.Eg=function(){},S.prototype.setAnimationEase=S.prototype.Eg,S.prototype.sh=function(){},S.prototype.getAnimationEase=S.prototype.sh,S.prototype.Ag=function(){},S.prototype.resetAnimationDefaults=S.prototype.Ag,n=S.prototype,n.Mk=function(t){an(this,t.target.ga()),Fl(this.a),this.ha()},n.gf=function(t,e){S.l.gf.call(this,t,e),bn(e)&&(Fl(this.a),(t=(t=e.ga())&&t.tb())&&t.getState()===Ph.INIT&&t.load())},n.ni=function(t,e,n){var i;if(this.Da=zk(),an(this,e.ga()),e.requestDomMarkers||C(e,mm)||C(e,ym)){var r=this.j.ja;for(i=r.length;i--;){var o=r[i];if(o.sb()===e){r.splice(i,1),o.B();break}}}bn(e)&&Hl(this.a,this.c),this.f=this.c.Ma(),0===t&&(vl(this,e,!1),this.Ib()),Bm(this.Md,cn(this),this.j.ja.filter(tc)),this.qe(),n||this.ha()},n.oi=function(){this.Ib()},n.Ib=function(){S.l.Ib.call(this);var t=this.getCapabilities().lookAt.zoom;Gl(this.a).setZoomConstraints(wd(t.min,this.Ng),vd(t.max,this.Rg))},n.Lh=function(t,e){var n;if(e){if(t={uc:this.Le,hb:this.hb},e.U?(C(e,mm)||C(e,ym))&&(n=new lm(e)):e.requestDomMarkers&&(n=new rm(e,t)),n){this.j.ja.push(n);var i=this.c.Ma();this.j.ja.sort((function(t,e){return i.indexOf(t.gb)-i.indexOf(e.gb)})),Bm(this.Md,cn(this),this.j.ja.filter(tc))}bn(e)&&Hl(this.a,this.c)}this.f=this.c.Ma()},n.Fa=function(t){return Gl(this.a).geoToPixel(t)},S.prototype.geoToScreen=S.prototype.Fa,S.prototype.Xa=function(t,e){return Gl(this.a).xyToGeo(t,e)},S.prototype.screenToGeo=S.prototype.Xa,S.prototype.Cg=function(t,e){return t=this.Xa(t,e),(e=this.F.lb()).position=t,e},S.prototype.Ga=function(t,e,n,i){var r=this,o=[];o=kn(o,this.j.ja,t*this.ra,e*this.ra,n),n&&o.length?i(o):this.a.a.initialized?Kl(this.a,{x:t,y:e},{radius:jn,top_most_only:n},(function(s){fn(r,t,e,n,o,i,!1,s)})):i(o)},S.prototype.getObjectsAt=S.prototype.Ga,S.prototype.sa=y,S.prototype.V=function(){var t=this.j.ja.length;rl(this,this.ra),this.fa.set(0,0);var e=cn(this),n=e.w,i=e.h;for(this.a.a.handleViewportUpdate();t--;){var r=(e=this.j.ja[t].wb).Bb();r.w===n&&r.h===i||e.vf(n,i)}this.sa=new Ji(n,i),Fl(this.a),this.ha()},S.prototype.getCapabilities=function(){return Bl},S.prototype.getCapabilities=S.prototype.getCapabilities,n=S.prototype,n.Td=0,n.qe=function(){this.j.Yc.length=0},n.bi=function(){this.Td=0,this.D&&this.D.before();var t=Gl(this.a),e=t.getLookAtData(!1),n=t.getLookAtData(!0);t=this.g.center.clone(),n=n.bounds.I();var i=this.zoom,r=this.fa,o=this.f,s=o.length;for(this.bc=Nm;s--;){var a=o[s];C(a,$i)&&a.ga()&&a.ga().tg(n,i)}this.v=this.a.U(),this.F.bb(e),e=this.v,s=(o=this.j).ja.length;var l,c=!0;for(l=0;l<s;l++){a=o.ja[l];var u=o.Yc;if(a){var h=a.U(n,t,void 0,i,!1,r,this.Fa,this.a.a.getCameraMatrix());h===jk.ACTIVE&&(this.bc=1/0),h!==jk.DONE||u[l]||(mn(this,a.sb()),u[l]=!0),u[l]||(c=!1)}}this.v=e&c,this.sa&&(this.g.bb(this.sa),this.sa=y),this.b&&this.b.va()&&this.Qg(),this.D&&this.D.after(),ln(this)},n.s=function(){var t=this.c.Ma()[0],e=this.g;Kk(this.Td),nn(this),t&&vl(this,t,!1),this.j.ja.filter(tc).forEach((function(t){t.B()})),e.element&&e.element.removeChild(this.S),this.S=null,this.A=3,this.a.B(),S.l.s.call(this)},n.ha=function(){this.Da=zk(),this.A===Om&&(this.v=!1,this.A=1,ln(this))},n.ye=function(t,e,n){pn(this,t=wl(this,wl(this,t)),e,n)},S.prototype.zoomAt=S.prototype.ye,S.prototype.rc=function(t,e){var n=!!(e||t&(ul.HEADING|ul.TILT));Um(this),qn(this,e),this.m.start(t,n),Gl(this.a).setPanning(!0)},S.prototype.startInteraction=S.prototype.rc,S.prototype.ic=function(t,e,n,i,r){var o=this.m,s=!1;if(o.va()){var a=Gl(this.a),l=a.getLookAtData(),c=this.g.center;c=[c.x,c.y],e=o.store(t,e,n,i,r),n=o.Sf(),t=o.ae(),r=this.m.Tf(),i=this.m.th(),o.c&&(o.Fc(ul.TILT)&&(a.setLookAtData({tilt:yl(this,l.tilt+t.y/this.g.height*-180)},c),s=!0),e&&1!==r&&o.Fc(ul.ZOOM)&&(s=o.Sf(),pn(this,wl(this,r=Bd(Dd(2,this.zoom)*r)/Ld),s.x,s.y),s=!0),o.Fc(ul.COORD)&&0<Vl(t)&&(on(this,-t.x,-t.y),s=!0),o.Fc(ul.HEADING)&&(e?a.setLookAtData({heading:l.heading+zl(this,i)},[n.x,n.y]):t.x&&a.setLookAtData({heading:zl(this,l.heading+t.x/this.g.width*360)},c),s=!0),s&&(Fl(this.a),this.ha()))}},S.prototype.interaction=S.prototype.ic,S.prototype.zb=function(t){var e=this;if(this.m.va()&&!t){if(this.u){t=this.m.Cb();var n=this.m.wc(),i=this.u.duration,r=(this.u.kf||1)*t,o=new zm(-r/(0<i?i:1),r);!E(n.x)&&!E(n.y)&&0<r&&e.m.Fc(ul.COORD)&&$m(this,(function(t){r=o.Ue(t*i),E(r)||on(e,xd(-n.x*r),xd(-n.y*r))}),i,void 0,this.u.Me)}this.u=null,this.m.clear()}Gl(this.a).setPanning(!1),this.ha()},S.prototype.endInteraction=S.prototype.zb,S.prototype.qc=function(t,e,n){Um(this),this.i.start(e,n),qn(this,t),Gl(this.a).setPanning(!0)},S.prototype.startControl=S.prototype.qc,S.prototype.control=function(t,e,n,i,r,o){for(var s,a=0;a<arguments.length;a++)if((s=+arguments[a])!==s)throw new D(this.control,a,s);this.i.va()&&this.i.set(t,e,n,i,r,o)},S.prototype.control=S.prototype.control,S.prototype.yb=function(t,e){var n,i=this;if(this.i.va()){nn(this);var r=zk(),o=r-this.wa;if(1<=o)rn(this,gm(this.i),o);if(!this.u||t||e)"function"===typeof e&&(e(t=(t=Gl(this.a)).getLookAtData()),sn(this,t));else{e=this.i.Cb();var s=this.i.wc(),a=this.u.duration,l=(this.u.kf||1)*e,c=new zm(-l/(0<a?a:1),l);!E(s.mb)&&!E(s.nb)&&0<l&&$m(this,(function(t,e,o,u){r&&(o=u-r,r=0),l=c.Ue(t*a)*o,E(l)||((n=s.ob*l)&&pn(i,wl(i,i.zoom+n),i.i.b,i.i.c),on(i,xd(s.mb*l),xd(s.nb*l)))}),a,void 0,this.u.Me)}this.i.reset(),Gl(this.a).setPanning(!1),this.ha()}},S.prototype.endControl=S.prototype.yb,S.prototype.cc=function(t){var e=this,n=t.c;this.fa.set(0,0),n.mb||n.nb||n.ob||n.re||n.se||n.tf?(this.wa=zk(),$m(this,(function(t,i,r,o){e.wa=o,rn(e,n,r)}),Td),this.ha()):nn(this)},S.prototype.mh=function(){},S.prototype.enter=S.prototype.mh,S.prototype.Rf=function(t){tl(this.S,t)},S.prototype.exit=S.prototype.Rf,S.prototype.capture=function(t,e,n,i){var r=this;return Ll(r.a).then((function(o){var s=r.S.ownerDocument.createElement("canvas"),a=r.ra,l=s.getContext("2d"),c=r.a.$a()/a,u=(n-t)*a;return a*=i-e,s.width=u,s.height=a,l.drawImage(o,t*c,e*c,u*c,a*c,0,0,u,a),s}))},S.prototype.tm=function(t){return Gl(this.a).geoToMeters(t)},S.prototype.geoToMeters=S.prototype.tm,S.prototype.Ao=function(t){return Gl(this.a).metersToGeo(t)},S.prototype.metersToGeo=S.prototype.Ao;var Nm=5e3,jn=3.5;function T(t,e,n){var i={};if(T.l.constructor.call(this),this.L=A(T.prototype.L,this),this.i=tn(n,T),this.b=n=new sl,this.S=!1,n.addEventListener(n.a.De,this.wa,!1,this),!C(t,Element))throw new D(T,0,t);var r=(n=this.R=t.ownerDocument.createElement("div")).style;if(r.position="relative",r.height=n.style.width="100%",r.overflow="hidden",r.webkitTapHighlightColor="transparent","transparent"!==r.webkitTapHighlightColor&&(r.webkitTapHighlightColor="rgba(0,0,0,0)"),t.appendChild(n),this.za=new kk(this.R,this.i),this.za.addEventListener(this.za.a.De,this.wa,!1,this),(t=this.a=new cj(this.i.layers)).addEventListener(t.b.Ce,this.V,!1,this),t.addEventListener(t.b.ze,this.V,!1,this),t.addEventListener(t.b.Be,this.V,!1,this),!this.f&&un(this),this.c=null,this.a.add(e,0),this.g=this.F(null!=this.i.engineType?this.i.engineType:vn.WEBGL,this.i),this.v=A(this.v,this),this.D=A(this.D,this),(e=this.i.imprint)!==B&&"object"!==typeof e)throw new D(T,1,"imprint");this.o=null===e?e:new lj(this,e),e=this.i.autoColor,this.fa=e===B||!!e,wn(this),(e=this.i.zoom)&&(i.zoom=e),(e=this.i.bounds)&&(i.bounds=e),(e=this.i.center)&&(i.position=e),this.b.Zb(i)}function tn(t,e){if(t){var n=t.pixelRatio;if(n===B)t.pixelRatio=Se();else if(!(0<n))throw new D(e,0,"pixelRatio: "+n)}else(t={}).pixelRatio=Se();return t.renderBaseBackground||(t.renderBaseBackground={lower:3,higher:2}),t}function wn(t){t.o&&t.fa&&t.o.Ji({invert:t.c&&t.c.im})}function xn(t,e,n){t.dispatchEvent(n?new Qi(t.m.ij,n.newValue,n.oldValue,n.modifiers):t.m.ij+e)}function yn(t){hj.call(this,t)}function un(t){t.j=new N({max:24}),t.f=new ml(t.j,t.i),t.a.add(t.f)}u(T,F),t("H.Map",T),T.prototype.s=function(){this.fa=!1,this.o&&this.o.B(),this.g.dispose(),this.b.B(),this.za.B(),this.f.B(),this.j.B(),this.a.B();var t=this.R;t.parentNode.removeChild(t),this.R=null,F.prototype.s.call(this)},T.prototype.N=function(){return this.R},T.prototype.getElement=T.prototype.N,T.prototype.$a=function(){return this.i.pixelRatio},T.prototype.getPixelRatio=T.prototype.$a,T.prototype.V=function(t){var e=t.added,n=t.removed;e&&e.ga()&&e.ga().ka(this),n&&n.ga()&&n.ga().ka(null),n===this.f&&(this.j=this.f=null),n===this.c&&(this.c=null),0===t.idx&&(this.dispatchEvent(new Ng(this.m.Cf,this.c=t.type!==this.a.b.Be?e:0<this.a.a.length?this.a.get(0):y,t.type!==this.a.b.ze?n:1<this.a.a.length?this.a.get(1):y)),wn(this))},T.prototype.wa=function(t){t.modifiers&&(this.S||(xn(this,"start"),this.S=!0),xn(this,"",t),this.sa&&x.clearTimeout(this.sa),this.sa=x.setTimeout(this.D,333))},T.prototype.D=function(){xn(this,"end"),this.S=!1},T.prototype.Fg=function(t,e){return this.g.getCapabilities().lookAt&&this.b.Zb({position:t},!!e),this},T.prototype.setCenter=T.prototype.Fg,T.prototype.kb=function(){var t=this.b.lb();return t?t.position:y},T.prototype.getCenter=T.prototype.kb,T.prototype.wf=function(t,e){return this.b.wf(t,!!e),this},T.prototype.setZoom=T.prototype.wf,T.prototype.ub=function(){return this.b.ub()},T.prototype.getZoom=T.prototype.ub,T.prototype.ye=function(t,e,n){this.g.zoomAt(t,e,n)},T.prototype.zoomAt=T.prototype.ye,T.prototype.Qn=function(){return this.za},T.prototype.getViewPort=T.prototype.Qn,T.prototype.Pn=function(){return this.b},T.prototype.getViewModel=T.prototype.Pn,T.prototype.cn=function(){return this.a},T.prototype.getLayers=T.prototype.cn,T.prototype.Ym=function(){return this.o},T.prototype.getImprint=T.prototype.Ym,T.prototype.capture=function(t,e,n,i,r,o){function s(t,e){d?t.cancel():(c.save(),e.capture(l,f,(function(e){c.restore(),t.done(e)}),(function(e){t.done(null,e),a(null)})))}function a(e){d||(d=!0,t(e))}var l,c,u=this.gc(),h=u.getCapabilities(),f=this.i.pixelRatio,p=this.za,d=!1,g=this;if(!Ca(t))throw new D(this.capture,0,t);n=n||0,i=i||0,r=r||p.width,o=o||p.height;var m=wd(0,vd(n,r)),v=wd(0,vd(i,o));n=vd(p.width,wd(n,r)),i=vd(p.height,wd(i,o)),h.capture?u.capture(m,v,n,i).then((function(t){var n=g.o,i=e||[];c=(l=t).getContext("2d"),l.style.width=l.width/f+"px",l.style.height=l.height/f+"px";var r=new xk(10,s);(i=i.concat(n).filter((function(t){return Ca(t&&t.capture)}))).length?(t=i.pop(),i.forEach((function(t){r.push(t,hd)})),r.push(t,A(a,g,l)),tk(r)):a(l)}),(function(){a(y)})):t(null)},T.prototype.capture=T.prototype.capture,T.prototype.gc=function(){return this.u||this.g},T.prototype.getEngine=T.prototype.gc,T.prototype.rl=function(t){return this.g.type===t||this.$||(this.$=!0,this.u=this.F(t),this.u.addEventListener("render",this.v)),this},T.prototype.setEngineType=T.prototype.rl,T.prototype.v=function(t){t.target===this.u&&(this.u.removeEventListener("render",this.v),this.g.Rf(this.L))},T.prototype.L=function(){var t=this.g.type;this.g.B(),this.g=this.u,this.u=B,this.$=!1,this.dispatchEvent(new Ng(this.m.Ql,this.g.type,t))},T.prototype.F=function(t,e){if(e=e?tn(e,this.F):this.i,wn(this),t===vn.P2D)return new x.H.map.render.p2d.RenderEngine(this.za,this.b,this.a,e);if(t===vn.WEBGL)return new S(this.za,this.b,this.a,e);if(t===vn.HARP)return new x.H.harp.RenderEngine(this.za,this.b,this.a,e);throw new D(this.rl,0,t)},T.prototype.zf=function(t,e,n,i,r){if(e=tc(e)?C(e,K,this.zf,1,e)&&e:this.b.lb().bounds.I(),!C(r=r||this.c,cl))throw new D(this.zf,4);var o=r.ga(),s=this.$a(),a=r.tileSize;if(2<=s&&256<a&&o instanceof sk&&(a/=2),s=this.ub(),a=Math.log2(a)-8,!((n=tc(n)?+n:s)<=(i=tc(i)?+i:s)))throw new D(this.zf,B,"!(min <= max)");s=o.min;var l=o.max,c=this.gc().type===vn.WEBGL?yd:xd;if(n=Yd(c(n)-a,s,l),i=Yd(c(i)-a,s,l),!(o&&C(o,R)&&md()&&o.dh()))throw new Xc(this.zf,"Storing is not supported");return new nk(r,o,e,n,i,t)},T.prototype.storeContent=T.prototype.zf,u(yn,hj),yn.prototype.f=function(){jj(this,2)},yn.prototype.c=function(){jj(this,4)},T.prototype.hm=function(t){return t=new yn(t),ld().clear(A(t.f,t),A(t.c,t)),t},T.prototype.clearContent=T.prototype.hm,T.prototype.Vg=function(t,e){var n=this.a,i=n.indexOf(t),r=e!==+e;return e=r?n.a.length-1:e,0>i?n.add(t,e):i-e&&(n.mc(i),n.add(t,r?e-1:e)),this},T.prototype.addLayer=T.prototype.Vg,T.prototype.nf=function(t){var e=this.a.indexOf(t);return t!==this.c&&t!==this.f&&-1!==e&&this.a.mc(e),this},T.prototype.removeLayer=T.prototype.nf,T.prototype.Id=function(t){return this.c!==t&&(this.a.a.length&&this.a.get(0)!==this.f?this.a.set(0,t):this.a.add(t,0),this.c=t),this},T.prototype.setBaseLayer=T.prototype.Id,T.prototype.zm=function(){return this.c},T.prototype.getBaseLayer=T.prototype.zm,T.prototype.Fa=function(t){if(!Yf(t))throw new D(this.Fa,0,t);return(t=this.g.geoToScreen(t))?wf(t):y},T.prototype.geoToScreen=T.prototype.Fa,T.prototype.Xa=function(t,e){var n;if(n=+E(t)||2*E(e))throw new D(this.Xa,n-1,arguments[n-1]);return(n=this.g.screenToGeo(t,e))?Zf(n):y},T.prototype.screenToGeo=T.prototype.Xa,T.prototype.Cg=function(t,e){return this.g.screenToLookAtData(t,e)},T.prototype.screenToLookAtData=T.prototype.Cg,T.prototype.ea=function(t){if(!C(t,M))throw new D(this.ea,0,t);return!this.f&&un(this),this.j.hc().ea(t),t},T.prototype.addObject=T.prototype.ea,T.prototype.Ha=function(t){if(!C(t,M))throw new D(this.Ha,0,t);return!this.f&&un(this),this.j.hc().Ha(t),t},T.prototype.removeObject=T.prototype.Ha,T.prototype.Va=function(t){return!this.f&&un(this),this.j.hc().Va(t)},T.prototype.getObjects=T.prototype.Va,T.prototype.dc=function(t){var e;yc(t,this.dc,0,t),!this.f&&un(this);var n=t.length;for(e=0;e<n;e++)this.ea(t[e]);return this},T.prototype.addObjects=T.prototype.dc,T.prototype.Ed=function(t){var e;yc(t,this.Ed,0,t),!this.f&&un(this);var n=t.length;for(e=0;e<n;e++)this.Ha(t[e]);return this},T.prototype.removeObjects=T.prototype.Ed,T.prototype.be=function(t,e,n){var i;if(i=+E(t)||2*E(e))throw new D(this.be,i-1,arguments[i-1]);this.g.getObjectsAt(t,e,!0,(function(t){n(t[0])}))},T.prototype.getObjectAt=T.prototype.be,T.prototype.Ga=function(t,e,n){var i;if(i=+E(t)||2*E(e))throw new D(this.be,i-1,arguments[i-1]);this.g.getObjectsAt(t,e,!1,n)},T.prototype.getObjectsAt=T.prototype.Ga,T.prototype.Ah=function(t,e,n){var i=n||gf;n=i.visiblesOnly;var r=i.zoom;i=i.types;var o=Pg.ANY;C(t,P,this.Ah,0,"area"),wc(e,"Function",this.Ah,1,"callback"),this.j.Va(t,!tc(n)||!!n,tc(r)?+r:this.b.ub(),tc(i)?i&o:o,e)},T.prototype.getObjectsWithin=T.prototype.Ah;var vn={P2D:Al.P2D,WEBGL:Al.WEBGL};function zn(t,e){zn.l.constructor.call(this,t,e)}function An(t,e){An.l.constructor.call(this,ih,e),this.te(t)}function hk(t,e,n){var i="anonymous",r=1;this.f=A(this.f,this),M.call(this,n),this.da(t),n&&((t="crossOrigin")in n&&(i=n[t]),(t="opacity")in n&&(r=n[t])),this.ql(e,i),this.nc(r)}function Bn(t){if(!t||!Ca(t.requestData))throw new D(Bn,0,"options.requestData");Bn.l.constructor.call(this,t),this.L=t.requestData,this.D=!!t.providesDomMarkers}function Cn(t,e){Cn.l.constructor.call(this,t,e)}T.EngineType=vn,vn.HARP=Al.HARP,T.prototype.m={rp:"mapviewchangestart",ij:"mapviewchange",jj:"mapviewchangeend",Cf:"baselayerchange",Ql:"enginechange"},u(zn,Mi),t("H.map.Marker",zn),n=zn.prototype,n.type=Pg.MARKER,n.Mg=1,n.xa=function(t){if(t!==Mg.VISUAL||1===this.Xk||1===this.icon.getState())var e=zn.l.xa.call(this,t);return e||!1},n.Xk=0,n.mk=function(t){return C(t,Hj)},n.Oh=!1,n.Lk=function(){this.xa(Mg.VISUAL)},n.Nc=function(t){var e=this.icon;return this.Oh&&(e.removeEventListener("statechange",this.Lk,!1,this),delete this.Oh),e&&(this.Xk=e.getState()),zn.l.Nc.call(this,t),0===t.getState()&&(this.Oh=!0,Ce(t,"statechange",this.Lk,!1,this)),this},zn.prototype.setIcon=zn.prototype.Nc,zn.prototype.f=function(t){return new Hj(t.svg,t)},zn.prototype.W=function(){var t=this.getIcon(),e=t.cp||0,n=zn.l.forWorkerMessage.call(this),i=n.properties.icon;return i&&0<e&&Wa(i,{stick_color:t.bp,stick_height:e}),n},zn.prototype.forWorkerMessage=zn.prototype.W,u(An,wi),t("H.map.Rect",An),An.prototype.te=function(t){if(!C(t,K))throw new D(this.te,0,t);t.na(this.V)||(this.V=this.P=t,this.eb!==y&&An.l.da.call(this,mi(t)))},An.prototype.setBoundingBox=An.prototype.te,An.prototype.I=function(){return this.P},An.prototype.getBoundingBox=An.prototype.I,An.prototype.da=function(){return this},An.prototype.setGeometry=An.prototype.da,An.prototype.ba=function(){return this.eb||An.l.da.call(this,mi(this.V)),this.eb},An.prototype.getGeometry=An.prototype.ba,u(hk,M),t("H.map.Overlay",hk),hk.prototype.type=Pg.OVERLAY,hk.prototype.I=function(){return this.P},hk.prototype.getBoundingBox=hk.prototype.I,hk.prototype.te=function(t){return C(t,K,this.te,0,t),this.da(t)},hk.prototype.setBoundingBox=hk.prototype.te,hk.prototype.ba=function(){return this.P},hk.prototype.getGeometry=hk.prototype.ba,hk.prototype.da=function(t){var e=this.P,n=!e;return C(t,K,this.da,0,t),!n&&e.na(t)||(this.P=t,n||this.xa(Mg.SPATIAL)),this},hk.prototype.setGeometry=hk.prototype.da,hk.prototype.ad=function(){return this.b.getData()},hk.prototype.getBitmap=hk.prototype.ad,hk.prototype.ql=function(t,e){var n=this.b;return n&&1!==n.getState()&&n.cancel(),this.b=new Cj(t,this.f,!0,B,e),this},hk.prototype.setBitmap=hk.prototype.ql,hk.prototype.f=function(t,e){this.b=e,1===t&&this.xa(Mg.VISUAL)},hk.prototype.dd=function(){return this.g},hk.prototype.getOpacity=hk.prototype.dd,hk.prototype.nc=function(t){var e=this.g,n=2>e;if(!(0<=t&&1>=t))throw new D(this.nc,0);return t!==e&&(this.g=t,n&&this.xa(Mg.VISUAL)),this},hk.prototype.setOpacity=hk.prototype.nc,hk.prototype.W=function(){var t=hk.l.W.call(this);return t.geometry=mi(this.P).W(),t.properties.overlay=!0,t},hk.prototype.forWorkerMessage=hk.prototype.W,u(Bn,R),t("H.map.provider.MarkerTileProvider",Bn),Bn.prototype.Wd=function(t){return t?t.length+1:1},Bn.prototype.getEntryWeight=Bn.prototype.Wd,Bn.prototype.K=function(t,e,n,i,r){var o=this;return this.L(t,e,n,(function(r){for(var s,a,l=[],c=r.length;c--;)(a=r[c]).fp=o.getTileKey(t,e,n),a.ka(o),s=a.Ab(),(C(a,Pi)||1===s.getState())&&l.push(r[c]);i(l)}),r)},Bn.prototype.requestInternal=Bn.prototype.K,Bn.prototype.he=function(t,e){e===Mg.VISUAL&&(t=this.Nb().get(t.fp))&&(t.valid=!1,Uj(this,t))},Bn.prototype.invalidateObject=Bn.prototype.he,Bn.prototype.Ub=function(){return this.D},Bn.prototype.providesDomMarkers=Bn.prototype.Ub,Bn.prototype.Vb=df,Bn.prototype.providesMarkers=Bn.prototype.Vb,u(Cn,cl),t("H.map.layer.MarkerTileLayer",Cn);var Dn={markers:[],total:0,requested:0};function En(t,e,n,i,r){var o,s=yd(n);for(t.pixelProjection.Pa(s),e=t.ge(t.Re(e),s),n=t.Ye(e,e.left>e.right,~~n,i,r),t=n.tiles,n=n.total,i=t.length,r=[],o=0;o<i;o++)for(s=(e=t[o]).data.length;s--;)r.push(e.data[s]);return{markers:r,total:t.length,requested:n}}function Fn(t,e,n){var i,r=6;if(e){for(i=' expected close to: "'+e;r--;)-1!==(e=t.a.next())&&(i+=String.fromCharCode(e));i+='"'}throw new D(Gn,0,"- Malformed WKT: "+(i?n+i:"unexpected end of stream"))}Cn.prototype.Jc=function(t,e,n,i){return this.a.providesDomMarkers()?Dn:En(this,t,e,n,i)},Cn.prototype.requestMarkers=Cn.prototype.Jc,Cn.prototype.Ic=function(t,e,n,i){return this.a.providesDomMarkers()?En(this,t,e,n,i):Dn},Cn.prototype.requestDomMarkers=Cn.prototype.Ic;var Hn={Vl:" ",Sl:"(",Tl:")",Pl:",",Rl:""};function In(t,e){var n=t.next();n!==(e=e?")":"(")&&Fn(t,n,'"'+e+'"')}function Jn(t){return","===Kn(t)&&(t.next(),!0)}function Ln(t,e,n,i,r){var o,s,a=2+e+n;for(s=1;s<=a;s++)(n=t.next())?(o=+n)!==o?Fn(t,n,"number"):1===s?i[r+1]=o:2===s?i[r]=o:3===s&&(i[r+2]=o):Fn(t,n);e||(i[r+2]=0)}Object.keys(Hn).reduce((function(t,e){return t[Hn[e]]=!0,t}),mc());var Mn=[];function Nn(t,e,n,i){return i||In(t,0),Ln(t,e,n,Mn,0),i||In(t,1),new Xf(Mn[0],Mn[1],e?Mn[2]:B)}function On(t,e,n){var i=[];In(t,0);do{Ln(t,e,n,i,i.length)}while(Jn(t));return In(t,1),new L(i)}function Pn(t,e,n){In(t,0);var i=On(t,e,n);if(Jn(t)){var r=[];do{r.push(On(t,e,n))}while(Jn(t))}return In(t,1),new P(i,r)}var Qn=[],Rn=[Pn],Sn=[Nn],Tn={POINT:Sn,LINESTRING:[On],POLYGON:Rn,MULTIPOINT:[Nn,Ii],MULTILINESTRING:[On,lh],MULTIPOLYGON:[Pn,ti],GEOMETRY:Qn,GEOMETRYCOLLECTION:Qn,CIRCULARSTRING:Qn,COMPOUNDCURVE:Qn,CURVEPOLYGON:Qn,MULTICURVE:Qn,MULTISURFACE:Qn,CURVE:Qn,SURFACE:Qn,POLYHEDRALSURFACE:Qn,TIN:Qn,TRIANGLE:Qn},Un={Z:1,M:2,ZM:3};function Gn(t){var e,n=(t=new Vn(t)).next();if((e=Tn[n.toUpperCase()])||Fn(t,n,"type name"),e!==Qn){n=Kn(t);var i=1&(n=Un[n.toUpperCase()]),r=n>>1;if(i|r&&t.next(),"EMPTY"===(n=Kn(t)))if(t.next(),i=e[1])var o=new i([]);else e!==Sn&&(o=new L([]),e===Rn&&(o=new P(o)));else if("("===n){if(o=e[0],e=e[1]){var s=[];if(In(t,0),o===Nn){var a="("!==Kn(t);do{s.push(o(t,i,r,a))}while(Jn(t))}else do{s.push(o(t,i,r))}while(Jn(t));In(t,1),i=new e(s)}else i=o(t,i,r);o=i}else Fn(t,n,'"Z", "M", "ZM", "(" or "EMPTY"');t.next()&&Fn(t,n,"end of stream")}return o||y}function Vn(t){this.a=t}function Kn(t){var e=t.b;if(e===B){for(e=t.a;e.Sb()===Wn;)e.next();if(Xn[e.Sb()])e=(e=e.next())===Yn?"":String.fromCharCode(e);else{e.xe();do{e.next()}while(!Xn[e.Sb()]);e=String.fromCharCode.apply(null,e.Sd())}t.b=e}return e}Vn.prototype.next=function(){var t=Kn(this);return""!==t&&delete this.b,t};var Wn=32,Yn=-1,Zn={Vl:Wn,Sl:40,Tl:41,Pl:44,Rl:Yn},Xn=Object.keys(Zn).reduce((function(t,e){return t[Zn[e]]=!0,t}),mc());function $n(){}function ao(t){this.c=String(t),this.f=0,this.a=[],this.b=!1}t("H.util.ICharStream",$n),$n.prototype.next=function(){},$n.prototype.xe=function(){},$n.prototype.Sd=function(){},$n.prototype.Sb=function(){},t("H.util.CharStream",ao),ao.prototype.next=function(){var t=this.c.charCodeAt(this.f++);return t=isNaN(t)?-1:t,this.b&&this.a.push(t),t},ao.prototype.xe=function(){this.b=!0,this.a=[]},ao.prototype.Sd=function(){var t=this.a.slice();return this.b=!1,this.a=[],t},ao.prototype.Sb=function(){var t=this.c.charCodeAt(this.f);return isNaN(t)?-1:t},t("H.util.wkt.toGeometry",(function(t){return Gn(new ao(t))})),t("H.buildInfo",(function(){return Ef("H-core","1.27.0","8813857e")}));var bo=function(){var a="maps"+eval('"js-"'),b=x.document.querySelector('script[src*="'+a+'"]');if(!b){var c=x.document.getElementsByTagName("script"),d=new RegExp("^.*"+a),e=0;for(a=c.length;e<a;e++)if(d.test(c[e].src)){b=c[e];break}}return b?b.src.replace(/\/[^\/]*$/,"/"):""}();function co(t,e){if(!t)throw new D(co,0,t);co.l.constructor.call(this,t),this.b={},this.c=e&&e.uc,this.f=eo++}t("H.getScriptPath",(function(){return bo})),u(co,km);var eo=0;function fo(t,e){e=e||{},C(t,ml,fo,0),fo.l.constructor.call(this,t),this.uc=!!e.uc,this.c=e.hb||0,this.a=[],this.b={}}co.prototype.U=function(t,e,n,i,r,o){var s=xd(i),a=this.gb,l=s+(n.exp-a.pixelProjection.exp),c=a.min,u=a.max;i=a.tileSize;var h=a.ga().i,f=this.wb,p=f.dd(),d=f.Bb().w,g=n.w,m=n.x,v=n.y,y={};if(s<c||s>u)return jk.DONE;for(t=(r=a.requestTiles(t,l,r,o,this.f)).total,o=(r=r.tiles).length,this.g=n,this.j=e,this.a=l,p!==h&&f.nc(h),n=i=i*g/(Dd(2,l)*i),this.c||(i%1&&(m/=g=n/(i=yd(i)),v/=g,g=Dd(2,l)*i),m=yd(m),v=yd(v)),this.i=n,l=-i,s=d+i,a=0;a<o;a++){if((c=(d=r[a]).data)&&c.tagName){for(n=e.x-(m-d.x*i),h=e.y-(v-d.y*i),f.Zc(c,n,h,i,i),p=n;(p-=g)>l;)f.Zc(c,p,h,i,i);for(p=n;(p+=g)<s;)f.Zc(c,p,h,i,i)}y[this.a+"_"+d.x+"_"+d.y]=d}return this.b=y,o===t?jk.DONE:jk.PENDING},co.prototype.Ga=function(t,e,n){var i,r=this.i,o=r/this.gb.tileSize,s=this.g,a=this.j;if(tc(this.a)&&s){t=s.x+(t-a.x),e=s.y+(e-a.y);var l=yd(s.w/r),c=s=yd(t/r);a=yd(e/r),Ad(c)>=l&&(c%=l),0>c&&(c=l+c),(l=this.b[this.a+"_"+c+"_"+a])&&l.Ga&&(i=l.Ga((t-r*s)/o,(e-r*a)/o,n))}return i||ff},co.prototype.fe=function(){return"2d"},u(fo,km),fo.prototype.U=function(t,e,n,i,r,o){var s,a,l=this.gb;i-=this.c,this.a.length=0;var c=this.b;if(this.b=s={},i>=l.min&&i<=l.max){var u=l.Fd(t,i,r,o),h=u.overlays;if(t=h.length)for(h.sort(Rg),i=this.wb,r=this.uc,o=0;o<t;o++){var f=(l=h[o]).I(),p=n.jb(f.Qb()),d=n.jb(f.Mb());f=n.w,p.x>=d.x&&(p.x-=f),f=-((p.x+d.x)/f>>1)*f,p.x+=f,p.add(e),d.x+=f,d.add(e),r||(p.round(),d.round()),(f=c[a=l.fb()])?delete c[a]:f={Ko:l},s[a]=f;var g=p.x;p=p.y;var m=d.x,v=m-g,y=(d=d.y)-p;i.nc(l.dd()),i.Zc(l.ad(),g,p,v,y),f.lh?f.lh.set(g,p,m,d):f.lh=new lk(g,p,m,d),this.a.push(f)}}return!u||u.requested&&u.requested===u.total||!u.requested&&h.length===u.total?jk.DONE:jk.PENDING},fo.prototype.Ga=function(t,e,n){for(var i,r,o=this.a,s=o.length;s--;)if((i=o[s]).lh.Mf(t,e))if(i=i.Ko,r)r.push(i);else if(r=[i],n)break;return r||ff},fo.prototype.fe=function(){return"2d"},fo.prototype.s=function(){this.a=null,fo.l.s.call(this)};var go={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:ul.ZOOM,COORD:ul.COORD},capture:!0};function ho(t,e){this.a=[],ho.l.constructor.apply(this,arguments)}function U(t,e,n,i){U.l.constructor.call(this,t,e,n,i),this.S=new I(0,0),(n=i.renderBaseBackground)&&(this.po=n.lower,this.jo=n.higher),this.io=!!i.enableSubpixelRendering,this.od=io,this.Lj=0,this.Le=this.Jj=!1,this.i=new Wl,this.a=i=new dm,this.Md=A(this.Md,this),i.addEventListener(i.g.Pg,this.Md),this.Fa=A(this.Fa,this),i=t.element,this.Ja=t=i.ownerDocument.createElement("div"),t.style.position="absolute",t.style.width=t.style.height="100%",t.style.zIndex=0,i.insertBefore(t,i.firstChild),this.dk=new Am(this.Ja,this.ra),this.m=[],jo(this),this.ai=A(U.prototype.ai,this),this.A=ko,this.Ag(),this.zoom=lo(this,this.F.ub()+this.hb),this.Ib(),mo(this,e.lb().position,this.zoom),this.bb(),this.V()}t("H.map.render.p2d.capabilities",go),u(ho,om),n=ho.prototype,n.Kj=function(){return this.gb.Jc.apply(this.gb,arguments)},n.U=function(t,e,n,i,r,o,s){return this.a=[],ho.l.U.apply(this,arguments)},n.xk=1,n.dl=function(t,e,n,i,r,o){var s=this.xk=i.$a();r*=s,o*=s;var a=n.Bb();e=a.w*s,a=a.h*s;var l=n.td();this.uc?(r-=l.x*s,o-=l.y*s):(r=xd(r-l.x*s),o=xd(o-l.y*s)),i.Zc(n.ad(),r,o,e,a),t.detail?t.detail.set(r,o,r+e,o+a):t.detail=new lk(r,o,r+e,o+a),this.a.push(t)},n.Ga=function(t,e,n){for(var i,r,o,s=this.a,a=s.length,l=ff,c=this.xk;a--&&!((r=(i=s[a]).detail).Mf(t,e)&&(i=i.Hk,(!(o=i.Ab().g)||o.eg((t-r.left)/c,(e-r.top)/c,0))&&0>l.indexOf(i)&&(l===ff&&(l=[]),l.push(i),n))););return l},n.fe=function(){return"2d"},n.s=function(){this.a=null,ho.l.s.call(this)},u(U,ql),t("H.map.render.p2d.RenderEngine",U),U.prototype.type=Al.P2D,U.prototype.type=U.prototype.type;var ko=2;function no(t,e,n){return Ad(e=n-e)<t.qa.w/2?e:e-t.qa.w*n/Ad(n)}function jo(t){var e=t.c.Ma(),n=0,i=e.length;for([t.fa={},t.u={},t.sa={},t.$={}].forEach((function(t){t.Yc=[],t.ja=[]})),t.f=t.c.Ma();n<i;n++)t.gf(n,e[n]);t.Ib()}function wo(t){var e=[];return(e=(e=(e=(e=e.concat(t.u.ja)).concat(t.fa.ja)).concat(t.sa.ja)).concat(t.$.ja)).filter(tc)}function qo(t,e){var n=wl(t,wl(t,e.zoom)+t.hb);return(t=xl(t,e)).zoom=n,t}function mo(t,e,n){var i=t.qa;i.Pa(n),t.o=i.projection.$c(e),i.x=i.w*t.o.x,i.y=i.h*t.o.y}function vo(t){return{w:(t=t.Gb[2]).right-t.left,h:t.bottom-t.top}}function xo(t){t.b&&t.b.va()||zk()-t.Da<t.od&&!t.v?t.Td=Jk(t.ai):(t.v&&(t.qe(),yo(t)),t.A=ko)}function yo(t,e){t.dispatchEvent({type:t.uk.nj,target:e||t})}function Co(t,e,n){so(t,e*t.ra,n*t.ra),t.S.set(0,0),t.bb(),t.ha()}function so(t,e,n){var i=t.qa;t=t.o,i.x=Wd(i.x+e,i.w),i.y=wd(0,vd(i.w,i.y+n)),t.x=i.x/i.w,t.y=i.y/i.h}function to(t,e,n,i){var r=t.ra,o=t.g.center;n===+n&&i===+i?(n=(n-o.x)*r,i=(i-o.y)*r,t.S.set(n,i),so(t,n,i),t.qa.Pa(e),so(t,-n,-i)):(t.S.set(0,0),t.qa.Pa(e)),t.zoom=e,t.bb(),t.ha()}function oo(t,e,n,i){var r=t.getCapabilities().lookAt.zoom.max,o=e.kb(),s=i||o;if(e.gg()||n&&i)n=n===B?r:n;else{var a=new Xi(t.qa.projection);a.Pa(r);var l=a.jb(e.Qb()).round(),c=a.jb(e.Mb()).round();r=a.w,e.Eb()&&(l.x-=r),i?(o=a.jb(s),e=2*wd(o.x-l.x,c.x-o.x),l=2*wd(o.y-l.y,c.y-o.y)):(e=c.x-l.x,l=c.y-l.y,s=o),n===B&&(n=(o=t.Gb[4]).right-o.left,o=o.bottom-o.top,n=wl(t,n=-8+vd(Bd(n/e*r)/Ld,Bd(o/l*r)/Ld)-t.hb))}return{zoom:yd(n),position:s}}function po(t){uo(t,!0),t.a.va()&&t.yb(!0),t.i.va()&&t.zb(!0),uo(t,!0)}function Do(t,e){if(e){var n={};n.kf=e.power,n.Me=e.ease,n.duration=e.duration,t.j=n}}function lo(t,e){return wl(t,wl(t,e-t.hb)+t.hb)}function Fo(t,e){var n=t.o,i=t.qa.projection.$c(e.position),r=t.qa.ne(i),o=r.y;r=r.x;var s=e.zoom;e=(n=t.qa.ne(n)).y;var a=n.x;n=t.zoom;var l=t.a.Cb(),c=t.a.b,u=t.a.c,h=0;if(r=no(t,a,r),e=Cd((r-=a)*r+(o-=e)*o+(n=s-n)*n),0!==l&&0!==e){var f=r/e,p=o/e,d=n/e,g=l*l/(2*e);ro(t,(function(e,n){var r;1!==e?((r=d*(n=(e=l*n-g*n*n/2)-h))&&(r=lo(t,t.zoom+r),to(t,lo(t,r),c,u)),Co(t,xd(f*n),xd(p*n)),h=e):(t.o=i,to(t,lo(t,s),c,u),t.bb(),t.ha())}),2*e/l)}}function Eo(t,e,n){n=n||0,e.ob&&to(t,lo(t,t.zoom+e.ob*n),t.a.atX,t.a.atY),Co(t,e.mb*n,e.nb*n)}function ro(t,e,n,i,r){t.b&&t.b.va()&&t.b.stop(!0),t.b=new nm(t,e,n,i,r),t.b.start()}function uo(t,e){t.b&&t.b.va()&&t.b.stop(e)}U.prototype.getState=function(){return this.A},U.prototype.getState=U.prototype.getState,U.prototype.ah=function(t){var e=this,n=t.b,i=t.newValue,r=t.modifiers;t=i.position;var o,s=i.bounds,a=this.zoom,l=this.o,c=0;if(r&Ri.POSITION&&(o=e.qa.jb(t)),r&Ri.BOUNDS)i=oo(this,s.I(),r&Ri.ZOOM?i.zoom:B,r&Ri.POSITION?t:B),this.F.Zb(i,n);else{r&Ri.POSITION||(o=e.qa.jb(i.position));var u=o.x,h=o.y;po(this),this.S.set(0,0);var f=(i=qo(this,i)).zoom,p=i.position;if(n){var d=f-a,g={x:l.x,y:l.y};n=this.qa.ne(g).x;var m=this.qa.projection.$c(t);m.x===this.o.x&&m.y===this.o.y&&f===this.zoom||(u=no(this,n,u),ro(this,(function(t){var n=t-c;if(f!==a){o=e.qa.ne(m);var i=e.qa.ne(g);u=no(e,i.x,o.x),h=o.y-i.y}c=t,so(e,u*n,h*n),to(e,a+=d*n),e.bb(),e.ha()}),this.bc,(function(){mo(e,p,f),to(e,f),e.bb(p),e.ha()}),this.cc))}else uo(this),mo(this,p,f),to(this,f),this.bb(p);this.ha()}},U.prototype.bc=300,U.prototype.Dg=function(t){var e=Cc(t);if(!e||e&&0>t)throw new D(this.Dg,1,"positive number required");this.bc=t},U.prototype.setAnimationDuration=U.prototype.Dg,U.prototype.rh=function(){return this.bc},U.prototype.getAnimationDuration=U.prototype.rh,U.prototype.cc=Nl,U.prototype.Eg=function(t){if(!Ca(t))throw new D(this.Eg,1,"function required");this.cc=t},U.prototype.setAnimationEase=U.prototype.Eg,U.prototype.sh=function(){return this.cc},U.prototype.getAnimationEase=U.prototype.sh,U.prototype.Ag=function(){this.cc=Nl,this.bc=300},U.prototype.resetAnimationDefaults=U.prototype.Ag,U.prototype.ni=function(t,e,n){var i;this.Da=zk(),(i=this.fa.ja.splice(t,1)[0])&&i.B&&i.B(),(i=this.u.ja.splice(t,1)[0])&&i.B&&i.B(),(i=this.sa.ja.splice(t,1)[0])&&i.B&&i.B(),(i=this.$.ja.splice(t,1)[0])&&i.B&&i.B(),this.f=this.c.Ma(),0===t&&(vl(this,e,!1),this.Ib()),this.m=Bm(this.dk,vo(this),wo(this)),this.qe(),n||this.ha()},U.prototype.oi=function(){this.Ib(),this.ha()},U.prototype.Lh=function(t,e,n){var i,r,o,s;if(e){var a={uc:this.io,hb:this.hb};e.U?C(e,mm)?r=new lm(e):C(e,ym)&&(s=new lm(e)):(e.requestOverlays&&(i=new fo(e,a)),e.requestTiles&&(r=new co(e,a)),e.requestMarkers&&(o=new ho(e,a)),e.requestDomMarkers&&(s=new rm(e,a)))}n=n||0,this.fa.ja.splice(t,n,i),this.u.ja.splice(t,n,r),this.sa.ja.splice(t,n,o),this.$.ja.splice(t,n,s),this.f=this.c.Ma(),this.m=Bm(this.dk,vo(this),wo(this))},U.prototype.Xa=function(t,e){var n=this.g.center,i=this.ra;return this.qa.Ra((t-n.x)*i,(e-n.y)*i)},U.prototype.screenToGeo=U.prototype.Xa,U.prototype.Cg=function(t,e){return t=this.Xa(t,e),(e=this.F.lb()).position=t,e},U.prototype.Fa=function(t){var e=this.ra,n=this.g.center,i=n.x*e;n=n.y*e,t=this.qa.jb(t);var r=this.qa.w;return new I(xd((t.x-xd(t.x/r)*r+i)/e),xd((t.y+n)/e))},U.prototype.geoToScreen=U.prototype.Fa,U.prototype.I=function(t,e){var n=this.Gb[t||4];t=this.qa;var i=n.left-e,r=t.Ra(i,n.top-e),o=n.right+e;return e=t.Ra(o,n.bottom+e),o-i>=t.w&&(r.lng=-(e.lng=180)),dg(r,e)},U.prototype.Ga=function(t,e,n,i){var r,o=[],s=this.ra;for(t*=s,e*=s,r=(s=[this.fa,this.u,this.sa,this.$]).length;r--&&(!n||!o.length);){for(var a=o,l=s[r].ja,c=t,u=e,h=n,f=l.length;f--&&!((o=l[f])&&o.Ga&&(a=a.concat(o.Ga(c,u,h)),a.length&&h)););o=a}i(o)},U.prototype.getObjectsAt=U.prototype.Ga,U.prototype.Uc=y,U.prototype.V=function(){var t,e=this.m.length;U.l.V.call(this);var n=vo(this);this.S.set(0,0);var i=n.w;for(t=n.h;e--;){var r=(n=this.m[e]).Bb();r.w===i&&r.h===t||n.vf(i,t)}this.Uc=new Ji(i,t),this.ha()},U.prototype.getCapabilities=function(){return go},U.prototype.getCapabilities=U.prototype.getCapabilities,n=U.prototype,n.qe=function(){this.fa.Yc.length=0,this.u.Yc.length=0,this.sa.Yc.length=0,this.$.Yc.length=0},n.ai=function(){var t;this.D&&this.D.before();var e=this.u.ja,n=this.g.center.clone().scale(this.ra).round(),i=this.I(1,0),r=this.I(1,zo),o=this.zoom,s=o-this.hb,a=this.qa,l=this.po,c=this.jo,u=e[0];e=this.S;var h=this.m.length,f=this.f;for(t=f.length;h--;){var p=this.m[h];C(p,jm)&&p.clear()}if(u){if(l)for(;l;)h=o-l,u.U(i,n,a,h,!0,e),--l;if(c&&this.Le)for(p=1;p<=c&&(h=o+p,a.Pa(h),l=this.I(2,0),a.Pa(o),!u.U(l,n,a,h,!0,e));p++);}for(this.od=io;t--;)C(a=f[t],$i)&&a.ga()&&a.ga().tg(r,s);i=this.wk(i,n,o,!1,e,Ao,this.u,this.fa),n=this.wk(r,n,s,!1,e,Bo,this.sa,this.$),this.v=i&&n,this.b&&this.b.va()&&this.Qg(),this.L||(this.L=this.F.lb()),this.L.bounds=this.I(4,0),this.F.bb(this.L),this.L=null,this.Uc&&(this.g.bb(this.Uc),this.Uc=y),o<this.Lj?this.Le=!0:this.Jj&&(this.Le=!1),this.Lj=o,this.Jj=i,this.D&&this.D.after(),xo(this)},n.wk=function(t,e,n,i,r,o,s){var a,l=Array.prototype.slice.call(arguments,6),c=l.length,u=l[0].ja.length,h=c*u,f=!!h;for(a=0;a<h;a++){if(o===Ao)var p=a%c,d=Math.floor(a/c);else p=Math.floor(a/u),d=a%u;var g=l[p].ja[d];p=l[p].Yc,g&&((g=g.U(t,e,this.qa,n,i,r,this.Fa))===jk.ACTIVE&&(this.od=1/0),g!==jk.DONE||p[d]||(yo(this,this.f[d]),p[d]=!0),p[d]||(f=!1))}return f},n.s=function(){var t=this.c.Ma()[0],e=this.g;Kk(this.Td),uo(this,!0),t&&vl(this,t,!1),wo(this).forEach((function(t){t.B()})),e.element&&e.element.removeChild(this.Ja),this.Ja=null,this.A=3,U.l.s.call(this)},n.ha=function(){this.Da=zk(),this.A===ko&&(this.v=!1,this.A=1,xo(this))},n.ye=function(t,e,n){to(this,t=wl(this,wl(this,t)+this.hb),e,n)},U.prototype.zoomAt=U.prototype.ye,U.prototype.rc=function(t,e){po(this),Do(this,e),this.i.start(t,!!e)},U.prototype.startInteraction=U.prototype.rc,U.prototype.ic=function(t,e,n,i,r){var o=!1;this.i.va()&&(e=this.i.store(t,e,n,i,r),this.i.Fc(ul.COORD)&&(0<Vl(t=this.i.ae())&&(Co(this,-t.x,-t.y),o=!0)),e&&this.i.Fc(ul.ZOOM)&&(t=this.i.Sf(),e=this.i.Tf(),(e=Bd(Dd(2,this.zoom)*e)/Ld)!==this.zoom&&(to(this,e=lo(this,e),t.x,t.y),o=!0)),o&&this.ha())},U.prototype.interaction=U.prototype.ic,U.prototype.zb=function(t){var e=this;if(this.i.va()&&!t){if(this.j){t=this.i.Cb();var n=this.i.wc(),i=this.j.duration,r=(this.j.kf||1)*t,o=new zm(-r/(0<i?i:1),r);!E(n.x)&&!E(n.y)&&0<r&&e.i.Fc(ul.COORD)&&ro(this,(function(t){r=o.Ue(t*i),E(r)||Co(e,xd(-n.x*r),xd(-n.y*r))}),i,void 0,this.j.Me)}this.j=null,this.i.clear()}},U.prototype.endInteraction=U.prototype.zb,U.prototype.qc=function(t,e,n){po(this),this.a.start(e,n),Do(this,t)},U.prototype.startControl=U.prototype.qc,U.prototype.control=function(t,e,n){if(E(+n))throw new D(this.control,2,n);if(E(t))throw new D(this.control,0,t);if(E(e))throw new D(this.control,1,e);this.a.va()&&this.a.set(t,e,n,0,0,0)},U.prototype.control=U.prototype.control,U.prototype.yb=function(t,e){var n,i=this;if(this.a.va()){uo(this,!0);var r=zk(),o=r-this.wa;if(1<=o)Eo(this,gm(this.a),o);if(!this.j||t||e)"function"===typeof e&&((t=this.lb()).zoom=this.zoom-this.hb,e(t),t.zoom+=this.hb,Fo(this,t));else{e=this.a.Cb();var s=this.a.wc(),a=this.j.duration,l=(this.j.kf||1)*e,c=new zm(-l/(0<a?a:1),l);!E(s.mb)&&!E(s.nb)&&0<l&&ro(this,(function(t,e,o,u){r&&(o=u-r,r=0),l=c.Ue(t*a)*o,E(l)||((n=s.ob*l)&&to(i,lo(i,i.zoom+n),i.a.b,i.a.c),Co(i,xd(s.mb*l),xd(s.nb*l)))}),a,void 0,this.j.Me)}this.a.reset()}},U.prototype.endControl=U.prototype.yb,U.prototype.Md=function(t){var e=this,n=t.c;this.S.set(0,0),n.mb||n.nb||n.ob?(this.wa=zk(),ro(this,(function(t,i,r,o){e.wa=o,Eo(e,n,r)}),Number.POSITIVE_INFINITY),this.ha()):uo(this,!0)},U.prototype.mh=function(){},U.prototype.enter=U.prototype.mh,U.prototype.Rf=function(t){tl(this.Ja,t)},U.prototype.exit=U.prototype.Rf,U.prototype.capture=function(t,e,n,i){var r=this.Ja.ownerDocument.createElement("canvas"),o=r.getContext("2d"),s=this.ra;for(r.width=(n-t)*s,r.height=(i-e)*s,n=0;n<this.m.length;n++)C(i=this.m[n],jm)&&o.drawImage(i.N(),-t*s,-e*s);return Xb(r)};var Bo=0,Ao=1,io=1e3,zo=256;function Go(t){var e=t.ownerDocument;e=e.documentElement||e.body.parentNode||e.body;try{var n=t.getBoundingClientRect()}catch(i){n={top:0,right:0,bottom:0,left:0,height:0,width:0}}return{x:n.left+("number"===typeof window.pageXOffset?window.pageXOffset:e.scrollLeft),y:n.top+("number"===typeof window.pageYOffset?window.pageYOffset:e.scrollTop)}}var Ho=Function("return this")();function Io(t,e,n,i,r,o,s){Io.l.constructor.call(this,t),this.pointers=e,this.changedPointers=n,this.targetPointers=i,this.currentPointer=r,this.originalEvent=s,this.target=o}function Jo(t,e,n,i,r,o){if(isNaN(t))throw Error("x needs to be a number");if(isNaN(e))throw Error("y needs to be a number");if(isNaN(n))throw Error("pointer must have an id");this.viewportX=t,this.viewportY=e,this.target=null,this.id=n,this.type=i,this.dragTarget=null,this.button=tc(r)?r:-1,this.buttons=tc(o)?o:0,this.a=this.button}function Ko(t,e,n){if(isNaN(e))throw Error("x needs to be a number");if(isNaN(n))throw Error("y needs to be a number");t.viewportX=e,t.viewportY=n}function Lo(t,e){t.a=e,t.buttons|=Jo.prototype.b[+e]||0}function Mo(t,e){t.a=e,t.buttons&=~(Jo.prototype.b[+e]||0)}u(Io,rd),t("H.mapevents.Event",Io),t("H.mapevents.Pointer",Jo),Jo.prototype.an=function(){return this.a},Jo.prototype.getLastChangedButton=Jo.prototype.an,Jo.prototype.b=[1,4,2];var No={NONE:-1,LEFT:0,MIDDLE:1,RIGHT:2};function Oo(t){this.a=t instanceof Array?t.slice(0):[]}function Po(t,e){return-1!==(e=t.indexOf(e))?t.a[e]:null}function Qo(t,e){for(var n=t.a.length,i=[];n--;)t.a[n].type!==e&&i.push(t.a[n]);t.a=i}function Ro(t,e){for(var n=t.a.length;n--;)if(t.a[n].dragTarget===e)return!0;return!1}function So(t,e,n){if(n=n||{},!(t instanceof T))throw Error("events: map instance required");if(!(e instanceof Array))throw Error("events: map array required");nd.call(this),this.jh=n.jh||300,this.yj=n.yj||50,this.Dl=n.Dl||50,this.El=n.El||500,this.Uh=n.Uh||900,this.Th=n.Th||8,this.map=t,this.m=this.map.za,this.j=this.m.element,this.F=e,this.a=new Oo,this.b=new Oo,this.i={},this.c=null,this.u=!0,this.aa={},this.f={},this.o=null,this.Je=A(this.Je,this),this.D={pointerdown:this.lm,pointermove:this.mm,pointerup:this.nm,pointercancel:this.km},To(this)}function To(t,e){var n,i=t.F.length;for(n=0;n<i;n++){var r=t.F[n],o=r.listener;"function"===typeof o&&(e?(r.target||t.j).removeEventListener(r.Ta,o):(r.target||t.j).addEventListener(r.Ta,o))}}function Uo(t,e,n){var i;if("function"===typeof t.D[e]){"pointermove"!==e&&(t.u=!0);var r=0;for(i=t.b.length();r<i;r++){var o=t.b.a[r];t.j.contains(n.composedPath()[0])?Vo(t,o,t.Fj.bind(t,n,e,o)):t.Fj(n,e,o,null)}}t.b.clear()}function Vo(t,e,n){if(t.c===e)n(e.target);else{var i=t.m,r=e.viewportX;if(e=e.viewportY,0>r||0>e||r>=i.width||e>=i.height)n(y);else{var o=t.map;o.be(r,e,(function(t){n(t||o)}))}}}function Xo(t,e,n){e===t.c&&(Yo(t,e.dragTarget,"dragend",n,e),t.c=null,Wo(e.id,t.aa)),e.dragTarget=null}function Wo(t,e){e[t]&&(e[t].timeout?clearTimeout(e[t].timeout):clearTimeout(e[t]),delete e[t])}function Zo(t,e,n){var i=e.target,r=new I(e.viewportX,e.viewportY),o=e.id;Wo(o,t.f);var s=setTimeout((function(){i&&i===e.target&&r.Za({x:e.viewportX,y:e.viewportY})<t.Th&&(Yo(t,i,"longpress",n,e),delete t.i[e.id])}),t.Uh);t.f[o]={timeout:s,Fe:r}}function Yo(t,e,n,i,r){if(e&&"function"===typeof e.dispatchEvent){var o,s=Io,a=t.a.Ma(),l=t.b.Ma(),c=(t=t.a).a.length,u=[];for(o=0;o<c;o++)t.a[o].target===e&&u.push(t.a[o]);s=new s(n,a,l,u,r,e,i),r.button=/^(?:longpress|(?:dbl)?tap|pointer(?:down|up))$/.test(n)?r.a:No.NONE,e.dispatchEvent(s)}return s}function $o(t){this.g=A(this.g,this),So.call(this,t,[{Ta:"touchstart",listener:this.g},{Ta:"touchmove",listener:this.g},{Ta:"touchend",listener:this.g},{Ta:"touchcancel",listener:this.g}]),this.L={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},this.v=(t=(t=t.o)?t.N():null)?Array.prototype.slice.call(t.querySelectorAll("a"),0):[]}function ap(t){var e=bp(this);(window.PointerEvent||window.MSPointerEvent)&&e.push({Ta:"MSHoldVisual",listener:"prevent"}),So.call(this,t,e)}function bp(t){var e,n,i=!!window.PointerEvent,r=[];return t.g=A(t.g,t),"MSPointerDown MSPointerMove MSPointerUp MSPointerCancel MSPointerOut MSPointerOver".split(" ").forEach((function(o){e=o.toLowerCase().replace(/ms/g,""),n=i?e:o,r.push({Ta:n,listener:t.g,target:/^pointer(up|move)$/.test(e)?window:null})})),r}Jo.Button=No,n=Oo.prototype,n.clear=function(){this.a.splice(0,this.a.length)},n.length=function(){return this.a.length},n.indexOf=function(t){for(var e=this.a.length;e--;)if(this.a[e].id===t)return e;return-1},n.remove=function(t){return-1!==(t=this.indexOf(t))?this.a.splice(t,1)[0]:null},n.push=function(t){if(t instanceof Jo)return this.a.push(t);throw Error("list needs a pointer")},n.Ma=function(){return this.a},n.clone=function(){return new Oo(this.a)},u(So,nd),n=So.prototype,n.Fj=function(t,e,n,i){Wo(n.id,this.aa),this.D[e].call(this,n,i,t)},n.nm=function(t,e,n){var i=t.id;t.target=e,Xo(this,t,n),Yo(this,e,"pointerup",n,t),"mouse"!==t.type&&Yo(this,e,"pointerleave",n,t),e=this.i[t.id];var r={x:t.viewportX,y:t.viewportY},o=n.timeStamp,s=t.target,a=this.o;e&&e.target===s&&e.Fe.Za(r)<this.Dl&&o-e.Wi<this.El?(Yo(this,s,"tap",n,t),a&&a.target===s&&o-a.Wi<this.jh?a.Fe.Za({x:t.viewportX,y:t.viewportY})<this.yj&&(Yo(this,s,"dbltap",n,t),this.o=null):this.o={target:s,Fe:new I(t.viewportX,t.viewportY),Wi:n.timeStamp}):this.o=null,this.i={},Wo(i,this.f)},n.Je=function(t,e){var n=this;Yo(this,t.dragTarget,"drag",e,t),Wo(t.id,this.aa),this.aa[t.id]=setTimeout((function(){n.Je(t,e)}),150)},n.mm=function(t,e,n){var i=t.dragTarget,r=t.id,o=t.target;t.target=e,o!==e&&(Yo(this,o,"pointerleave",n,t),Yo(this,e,"pointerenter",n,t)),i?this.c?(this.Je(t,n),this.f[r]&&this.f[r].Fe.Za({x:t.viewportX,y:t.viewportY})>this.Th&&Wo(r,this.f)):this.u?this.u=!1:(this.c=t,Yo(this,i,"dragstart",n,t),this.Je(t,n),delete this.i[r],this.u=!0):(!this.c||this.c&&this.c.dragTarget!==e&&this.c.dragTarget!==this.map)&&Yo(this,e,"pointermove",n,t)},n.lm=function(t,e,n){var i=!(/^(?:mouse|pen)$/.test(t.type)&&0!==n.button);if(e){t.target=e,this.i[t.id]={Fe:new I(t.viewportX,t.viewportY),target:t.target,Wi:n.timeStamp},"mouse"!==t.type&&Yo(this,e,"pointerenter",n,t);var r=Yo(this,e,"pointerdown",n,t);!this.c&&i&&(e.draggable&&!Ro(this.a,e)?t.dragTarget=e:!this.map.draggable||r.defaultPrevented||Ro(this.a,this.map)||(t.dragTarget=this.map)),Zo(this,t,n)}},n.km=function(t,e,n){var i=t.id;t.target=null,e?(Yo(this,e,"pointerleave",n,t),Yo(this,e,"pointercancel",n,t)):Yo(this,this.map,"pointercancel",n,t),Xo(this,t,n),this.i={},Wo(i,this.f)},n.s=function(){To(this,!0),this.a.clear(),this.b.clear();var t,e=this.aa;for(t in e)Wo(t,e);for(var n in e=this.f)Wo(n,e);this.c=this.i=this.o=this.map=this.b=this.a=this.F=this.R=null,nd.prototype.s.call(this)},u($o,So),$o.prototype.g=function(t){var e,n=t.touches,i=this.a.length();if("touchstart"===t.type&&i>=n.length){for(i=this.a.clone(),e=n.length;e--;)i.remove(n[e].identifier);for(e=i.length();e--;)this.a.remove(i.a[e].id);this.b=i,Uo(this,"pointercancel",t),this.b.clear()}if(this.L[t.type]){n=Go(this.m.element),i=t.type;var r,o=(e=t.changedTouches).length;for(this.b.clear(),r=0;r<o;r++){var s=e[r],a=Po(this.a,s.identifier),l=s.pageX-n.x,c=s.pageY-n.y;if(a)if("touchmove"===i){s=Math.abs(a.viewportX-l);var u=Math.abs(a.viewportY-c);(1<s||1<u||1===s&&1===u)&&(Ko(a,l,c),this.b.push(a))}else"touchend"===i&&(this.a.remove(a.id),this.b.push(a),Mo(a,No.LEFT));else a=new Jo(l,c,s.identifier,"touch",No.LEFT,1),this.a.push(a),this.b.push(a)}Uo(this,this.L[t.type],t),-1===this.v.indexOf(t.target)&&t.preventDefault()}},$o.prototype.s=function(){this.v=null,So.prototype.s.call(this)},u(ap,So);var cp={2:"touch",3:"pen",4:"mouse"};function dp(t,e,n,i){dp.l.constructor.call(this,"contextmenu"),this.items=[],this.viewportX=t,this.viewportY=e,this.target=n,this.originalEvent=i}function ep(t){this.Gh=A(this.Gh,this),this.Ih=A(this.Ih,this),this.Hh=A(this.Hh,this),this.v=!1,this.g=-1,this.L=0,ep.l.constructor.call(this,t,[{Ta:"contextmenu",listener:this.Gh},{target:t,Ta:"longpress",listener:this.Ih},{target:t,Ta:"dbltap",listener:this.Hh}])}function fp(t,e,n,i,r){var o=t.map,s=Date.now()-t.L;r?!t.v&&s>t.Uh&&(t.v=!0,r.dispatchEvent(new dp(e,n,r,i)),Ce(o.N(),t.ej,t.Ej,!1,t)):o.be(e,n,t.ro.bind(t,e,n,i))}function gp(t,e,n,i,r){gp.l.constructor.call(this,"wheel"),this.delta=t,this.viewportX=e,this.viewportY=n,this.target=i,this.originalEvent=r}function hp(t){var e="onwheel"in document;this.S=e,this.L=(e?"d":"wheelD")+"elta",this.g=A(this.g,this),hp.l.constructor.call(this,t,[{Ta:(e?"":"mouse")+"wheel",listener:this.g}]),this.v=this.map.za}function ip(t){this.g=A(this.g,this),So.call(this,t,[{Ta:"mousedown",listener:this.g},{Ta:"mousemove",listener:this.g,target:window},{Ta:"mouseup",listener:this.g,target:window},{Ta:"mouseover",listener:this.g},{Ta:"mouseout",listener:this.g},{Ta:"dragstart",listener:this.v}])}function jp(t){var e=t.za.element.style;if(-1!==kp.indexOf(t))throw Error("InvalidArgument: map is already in use");this.a=t,kp.push(t),e.msTouchAction=e.touchAction="none",ad||!window.PointerEvent&&!window.MSPointerEvent?(this.c=new $o(this.a),this.b=new ip(this.a)):this.c=new ap(this.a),this.g=new hp(this.a),this.f=new ep(this.a),this.a.xb(this.B,this),nd.call(this)}ap.prototype.g=function(t){var e=window.PointerEvent?t.type:t.type.toLowerCase().replace(/ms/g,""),n=Go(this.j),i=Po(this.a,t.pointerId),r=t.pageX-n.x;n=t.pageY-n.y;var o=cp[t.pointerType]||t.pointerType;if($c&&"rtl"===x.getComputedStyle(this.m.element).direction&&(r-=(x.devicePixelRatio-1)*this.m.width),!(i||/^pointer(up|out|cancel)$/.test(e)||"touch"===o&&"pointerdown"!==e)){i={x:r,y:n};var s=t.pointerType;"number"===typeof s&&(s=cp[s]),i=new Jo(i.x,i.y,t.pointerId,s,t.button,t.buttons),this.a.push(i)}i&&(/^pointer(up|cancel)$/.test(e)?("touch"===o&&this.a.remove(i.id),Mo(i,t.button)):"pointerdown"===e&&("touch"===t.pointerType&&(Qo(this.a,"mouse"),Qo(this.a,"pen")),Lo(i,t.button)),this.b.push(i),"pointermove"!==e?(Ko(i,r,n),Uo(this,/^pointer(over|out)$/.test(e)?"pointermove":e,t)):i.viewportX===r&&i.viewportY===n||(Ko(i,r,n),Uo(this,e,t))),this.b.clear()},u(dp,rd),t("H.mapevents.ContextMenuEvent",dp),u(ep,So),n=ep.prototype,n.Ih=function(t){var e=t.currentPointer;"touch"===e.type&&1===t.pointers.length&&fp(this,e.viewportX,e.viewportY,t.originalEvent,t.target)},n.Hh=function(t){"touch"===t.currentPointer.type&&(this.L=Date.now())},n.Gh=function(t){var e=this;-1===this.g?this.g=setTimeout((function(){var n=Go(e.j),i=t.pageX-n.x;n=t.pageY-n.y,e.g=-1,fp(e,i,n,t)}),this.jh):(clearInterval(this.g),this.g=-1),t.preventDefault()},n.ro=function(t,e,n,i){fp(this,t,e,n,i=i&&Ca(i.dispatchEvent)?i:this.map)},n.ej=["mousedown","touchstart","pointerdown","wheel"],n.Ej=function(){this.v&&(this.v=!1,this.map.dispatchEvent(new rd("contextmenuclose",this.map)))},n.s=function(){var t=this.map.N();clearInterval(this.g),t&&Je(t,this.ej,this.Ej,!1,this),So.prototype.s.call(this)},u(gp,rd),t("H.mapevents.WheelEvent",gp),u(hp,So),hp.prototype.g=function(t){if(!t.Ol){var e=Go(this.j),n=t.pageX-e.x;e=t.pageY-e.y;var i,r=this.L,o=t[r+(r+"Y"in t?"Y":"")];if($c&&"rtl"===x.getComputedStyle(this.v.element).direction&&(n-=(x.devicePixelRatio-1)*this.v.width),o){var s=Math.abs,a=s(o);o=(!(i=t[r+"X"])||3<=a/s(i))&&(!(i=t[r+"Z"])||3<=a/s(i))?((0<o)-(0>o))*(this.S?1:-1):0}(n=new gp(o,n,e,null,t)).delta&&(t.stopImmediatePropagation(),t.preventDefault(),this.map.be(n.viewportX,n.viewportY,this.V.bind(this,n)))}},hp.prototype.V=function(t,e){var n,i,r=t.target=e||this.map;setTimeout((function(){r.dispatchEvent(t),t.f||(n=t.originalEvent,(i=new x.WheelEvent("wheel",n)).Ol=1,n.target.dispatchEvent(i))}),0)},u(ip,So),ip.prototype.g=function(t){var e,n=t.type,i=Go(this.j);i={x:t.pageX-i.x,y:t.pageY-i.y},(e=this.a.a[0])||(e=new Jo(i.x,i.y,1,"mouse"),this.a.push(e)),this.b.push(e),Ko(e,i.x,i.y),/^mouse(?:move|over|out)$/.test(n)?Uo(this,"pointermove",t):(/^mouse(down|up)$/.test(n)&&(i=t.which-1,"up"===Ho.RegExp.$1?Mo(e,i):Lo(e,i)),Uo(this,n.replace("mouse","pointer"),t)),this.b.clear()},ip.prototype.v=function(t){t.preventDefault()},u(jp,nd),t("H.mapevents.MapEvents",jp),jp.prototype.c=null,jp.prototype.b=null,jp.prototype.g=null,jp.prototype.f=null;var kp=[];function lp(t,e){var n;if(e=void 0===e?{}:e,lp.l.constructor.call(this),-1!==mp.indexOf(t))throw new D(lp,0,"events are already used");this.a=n=t.a,this.j=t,mp.push(t),n.draggable=!0,this.i=e.kinetics||{duration:600,ease:Nl},this.o=e.modifierKey||"Alt",this.enable(e.enabled),this.c=n.za,this.f=this.c.element,this.g=0,n.addEventListener("dragstart",this.di,!1,this),n.addEventListener("drag",this.zk,!1,this),n.addEventListener("dragend",this.ci,!0,this),n.addEventListener("wheel",this.Pk,!1,this),n.addEventListener("dbltap",this.Kk,!1,this),n.addEventListener("pointermove",this.Ak,!1,this),Be(this.f,"contextmenu",this.yk,!1,this),t.xb(this.B,this)}Fc(kp),jp.prototype.B=function(){this.a=null,this.c.B(),this.g.B(),this.f.B(),this.b&&this.b.B(),kp.splice(kp.indexOf(this.a),1),nd.prototype.B.call(this)},jp.prototype.dispose=jp.prototype.B,jp.prototype.ym=function(){return this.a},jp.prototype.getAttachedMap=jp.prototype.ym,u(lp,nd),t("H.mapevents.Behavior",lp);var mp=[];Fc(mp),lp.prototype.b=0;var np={PANNING:1,PINCH_ZOOM:2,WHEEL_ZOOM:4,DBL_TAP_ZOOM:8,FRACTIONAL_ZOOM:16,TILT:32,HEADING:64};lp.Feature=np;var op=np.PANNING,pp=np.PINCH_ZOOM,qp=np.WHEEL_ZOOM,rp=np.DBL_TAP_ZOOM,sp=np.FRACTIONAL_ZOOM,tp=np.TILT,up=np.HEADING,vp=op|pp|qp|rp|sp|tp|up;function wp(t,e){if(t!==+t||t%1||0>t||2147483647<t)throw new D(e,0,"integer in range [0...0x7FFFFFFF] required")}function xp(t,e,n){var i,r="touch"===e.currentPointer.type,o=0;if(i=!r){i=t.o;var s,a=e.originalEvent;s=a.getModifierState?a.getModifierState(i):!!a[i.replace(/^Control$/,"ctrl").toLowerCase()+"Key"],i=s}return i?o|=tp|up:(o|=op,r&&(2===(e=e.pointers).length&&(o|=pp|up,n?55>Ad(e[0].viewportY-e[1].viewportY)&&(o|=tp):t.Mh&ul.TILT&&(o|=tp)))),((o&=t.b)&tp?ul.TILT:0)|(o&up?ul.HEADING:0)|(o&pp?ul.ZOOM:0)|(o&op?ul.COORD:0)}function yp(t){var e=t.pointers;return t=e[0],e=e[1],t=[t.viewportX,t.viewportY],e&&t.push(e.viewportX,e.viewportY),t}function zp(t,e,n,i,r){var o=+n-+e;if(t=t.a.b,isNaN(+e))throw Error("start zoom needs to be a number");if(isNaN(+n))throw Error("to zoom needs to be a number");0!==o&&(t.startControl(null,i,r),t.control(0,0,6,0,0,0),t.endControl(!0,(function(t){t.zoom=n})))}function Ap(t,e){return Wa.apply(null,arguments),t}function Bp(t,e){if(e=void 0===e?{}:e,!t.kk)throw new Xc(t);Bp.l.constructor.call(this);var n=Cp(this,e);if(!n.baseUrl&&!n.platformBaseUrl)throw new D(t,0,'either "baseUrl" or "platformBaseUrl" must be specified');this.c=(n.baseUrl?n.baseUrl:n.platformBaseUrl).clone(),(t=n.baseUrl?e:n).host&&this.c.Gg(t.host),t.subDomain&&this.c.Sa(t.subDomain),t.path&&this.c.ue(t.path),Dp(this.c),this.ef=n.headers||{}}function Cp(t,e){return t=t.a(),e?Ap({},t,e):t}function Ep(t,e,n){return function(i){return"function"!==typeof i.json?Promise.reject(n(Fp(e,i))):i.json().then((function(e){return n(t.b(e))}),(function(){return n(Fp(e,i))}))}}function Fp(t,e){return Error((e.statusText?"["+e.statusText+"] ":"")+t+" request failed")}function X(t,e,n,i,r,o){if(!t||!e)throw Error('Parameters "scheme" and "host" must be specified');this.xl(t),this.Gg(e),this.ue(n),this.wl(r),this.ml(o),this.Mi(i)}function Gp(t,e){var n,i=x.document,r=i&&i.createElement("a"),o="";if(i){if(e){var s=(n=i.getElementsByTagName("base")[0])&&n.href,a=i.head,l=n||a.appendChild(i.createElement("base"));l.href=e}r.href=t,o=r.href,e&&(n?n.href=s:a.removeChild(l))}else/[\w]+:\/\//.test(t)&&(o=t);if(t=(s=/(?:(\w+):\/\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\/[^?#]*)?(\?[^#]+)?(#.*)?/.exec(o))[1],l=s[4],e=s[5],a=s[6],i=s[7],n=s[8],!s[2]&&l&&/@/.test(l)&&(l=l.split("@")[1]),s=l,a=a&&0<a.length?a.substr(1):"",l={},i)for(r=/([?&]?([^=&+]+))(=([^&]+))?/g;o=r.exec(i);)l[decodeURIComponent(o[2])]=o[4]?decodeURIComponent(o[4]):void 0;return new X(t,s,a,l,isNaN(+e)?void 0:+e,n&&0<n.length?n.substr(1):"")}lp.DRAGGING=op,lp.WHEELZOOM=qp,lp.DBLTAPZOOM=rp,lp.FRACTIONALZOOM=sp,lp.prototype.disable=function(t){var e=this.b;t!==B?(wp(t,this.disable),e^=e&t):e=0,this.c.endInteraction(!0),this.b=e,this.a.draggable=0<(e&(op|tp|up|pp))},lp.prototype.disable=lp.prototype.disable,lp.prototype.enable=function(t){var e=this.b;t!==B?(wp(t,this.enable),e|=t&vp):e=vp,this.b=e,this.a.draggable=0<(e&(op|tp|up|pp))},lp.prototype.enable=lp.prototype.enable,lp.prototype.isEnabled=function(t){return wp(t,this.isEnabled),t===(this.b&t)},lp.prototype.isEnabled=lp.prototype.isEnabled,n=lp.prototype,n.Mh=0,n.di=function(t){var e=xp(this,t,!0);if(this.Mh=e){var n=this.c;if(t=yp(t),n.startInteraction(e,this.i),n.interaction.apply(n,t),this.b&qp&&!(this.b&sp)&&(e=t[0],n=t[1],this.g)){t=this.a.ub();var i=(0>this.g?zd:yd)(t);t!==i&&(this.g=0,zp(this,t,i,e,n))}}},n.zk=function(t){var e=xp(this,t,!1);if(e!==this.Mh)"pointerout"!==t.originalEvent.type&&"pointerover"!==t.originalEvent.type&&(this.ci(t),this.di(t));else if(e){e=this.c;var n=yp(t);e.interaction.apply(e,n),t.originalEvent.preventDefault()}},n.ci=function(t){xp(this,t,!1)&&this.c.endInteraction(!this.i)},n.Pk=function(t){if(!t.defaultPrevented&&this.b&qp){var e=t.delta,n=this.a.ub(),i=this.a,r=i.gc().type;i=this.b&sp?n-e:(0>-e?zd:yd)(n)-e,r!==vn.P2D&&r!==vn.WEBGL&&r!==vn.HARP||(zp(this,n,i,t.viewportX,t.viewportY),this.g=e),t.preventDefault()}},n.Ak=function(){},n.Kk=function(t){var e=t.currentPointer,n=this.a.ub(),i=t.currentPointer.type,r=this.a.gc().type;(r===vn.P2D||r===vn.WEBGL||r===vn.HARP)&&this.b&rp&&(t="mouse"===i?0===t.originalEvent.button?-1:1:0<t.pointers.length?1:-1,zp(this,n,t=this.b&sp?n-t:(0>-t?zd:yd)(n)-t,e.viewportX,e.viewportY))},n.yk=function(t){return!(this.b&rp)||(t.preventDefault(),!1)},n.B=function(){var t=this.a;t&&(t.draggable=!1,t.removeEventListener("dragstart",this.di,!1,this),t.removeEventListener("drag",this.zk,!1,this),t.removeEventListener("dragend",this.ci,!0,this),t.removeEventListener("wheel",this.Pk,!1,this),t.removeEventListener("dbltap",this.Kk,!1,this),t.removeEventListener("pointermove",this.Ak,!1,this),this.a=null),this.f&&(this.f.style.msTouchAction="",Je(this.f,"contextmenu",this.yk,!1,this),this.f=null),this.i=this.c=null,mp.splice(mp.indexOf(this.j),1),nd.prototype.B.call(this)},lp.prototype.dispose=lp.prototype.B,t("H.mapevents.buildInfo",(function(){return Ef("H-mapevents","1.27.0","a2dc7f9")})),R.prototype.v=ca(3,(function(t){var e=this.getCache(),n=this;if(t!==y){C(t,Dk,R.prototype.v,0);var i=t}else i=hl;i!==e&&e.pa((function(t,e,r){return!!n.ec(t)&&(i.add(t,e,r),!0)})),this.S=i})),Sh.prototype.b=ca(2,(function(t){this.i=t,(t=this.getState())!==Ph.INIT&&t!==Ph.LOADING&&$h(this)})),u(Bp,F),t("H.service.Service",Bp),Bp.prototype.a=function(){return{}},Bp.prototype.C=function(){return this.c},Bp.prototype.getUrl=Bp.prototype.C,Bp.prototype.K=function(t,e,n,i){return(i=new rf(void 0===i?"application/json":i,t.toString(),fe,{headers:this.ef})).then(e,Ep(this,t,n)),i},Bp.prototype.b=function(t){return Error(t.message)},t("H.service.Url",X),X.parse=Gp;var Hp=0;function Jp(t){function e(t,e){return encodeURIComponent(t)+(void 0===e?"":"="+encodeURIComponent(e).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16)})))}var n,i=[],r=t.a;for(n in r)if(r.hasOwnProperty(n)&&"function"!==typeof r[n]){var o=t.a[n];C(o,Kp)?o.Ml.forEach((function(t){i.push(e(n,t))})):i.push(e(n,o))}return 0<i.length?"?"+i.join("&"):""}function Dp(t){var e=Ef("H-service","1.27.0","8a5a710");return t.a.xnlp="CL_JSMv3."+e.version,t}function Ip(t){var e,n=0;for(e in t.a)if(t.a.hasOwnProperty(e)&&"function"!==typeof t.a[e]&&0<++n)break;return!n}function Kp(t){var e;if(!yc(t))throw new D(Kp,0,t);for(e=0;e<t.length;e++){var n=t[e];if(!zc(n)&&!Cc(n))throw new D(Kp,0,"The array can only contain strings and numbers")}this.Ml=t}function Y(t){var e=(t=Ap({},this.b,t)).apikey||t.apiKey,n=t.baseUrl;if(n=e?n?0:"baseUrl":"apikey")throw new D(Y,0,'"'+n+'" must be specified');this.pl(t.baseUrl),this.a=e,this.c.J({apikey:e}),this.f=t.headers||{},this.g=Ua(t.servicesConfig||{})}X.prototype.clone=function(){Hp++;var t,e={};for(t in this.a)e[t]=this.a[t];return new X(this.m,this.f,this.c,e,this.g,this.b)},X.prototype.clone=X.prototype.clone,X.prototype.xl=function(t){if(!t||"string"!==typeof t)throw Error('The "scheme" parameter must be a non-empty string.');return this.m=t,this},X.prototype.setScheme=X.prototype.xl,X.prototype.Dn=function(){return this.m},X.prototype.getScheme=X.prototype.Dn,X.prototype.Gg=function(t){if(!t||"string"!==typeof t||"-"===t.charAt(0)||"."===t.charAt(0)||"."===t.charAt(t.length-1))throw Error('The "host" parameter is not a valid host name.');return this.f=t,this},X.prototype.setHost=X.prototype.Gg,X.prototype.Wm=function(){return this.f},X.prototype.getHost=X.prototype.Wm,X.prototype.ue=function(t){return this.c=t||void 0,this},X.prototype.setPath=X.prototype.ue,X.prototype.qn=function(){return this.c},X.prototype.getPath=X.prototype.qn,X.prototype.Mi=function(t){if(t){if("object"!=typeof t)throw Error('Parameter "params" must be an object.');this.a=t}else this.a={};return this},X.prototype.setQuery=X.prototype.Mi,X.prototype.ek=function(){return!Ip(this)},X.prototype.hasQuery=X.prototype.ek,X.prototype.getQuery=function(){return this.a},X.prototype.getQuery=X.prototype.getQuery,X.prototype.wl=function(t){if(t&&isNaN(parseInt(t,10)))throw Error('Parameter "port" must be a number or undefined');return this.g=+t||void 0,this},X.prototype.setPort=X.prototype.wl,X.prototype.un=function(){return this.g},X.prototype.getPort=X.prototype.un,X.prototype.ml=function(t){return this.b=t||void 0,this},X.prototype.setAnchor=X.prototype.ml,X.prototype.td=function(){return this.b},X.prototype.getAnchor=X.prototype.td,X.prototype.J=function(t){if("object"!==typeof t)throw Error('Parameter "other" must be an object.');var e,n=this.a;for(e in t)t.hasOwnProperty(e)&&"function"!==typeof t[e]&&(n[e]=t[e]);return this},X.prototype.mergeQuery=X.prototype.J,X.prototype.Sa=function(t){if(!t||"string"!==typeof t)throw Error('Parameter "subDomain" must be a non-empty string');return"."===t.substr(t.length-1)&&(t=t.substr(0,t.length-1)),this.Gg(t+"."+this.f)},X.prototype.addSubDomain=X.prototype.Sa,X.prototype.G=function(t){if(!t||"string"!==typeof t)throw Error('Parameter "subPath" must be a non-empty string');return this.ue((this.c?this.c+"/":"")+t)},X.prototype.addSubPath=X.prototype.G,X.prototype.toString=function(){return[this.m+"://",this.f,this.g?":"+this.g:"",this.c||!Ip(this)||this.b?"/":"",this.c?encodeURI(this.c):"",Jp(this),this.b?"#"+encodeURIComponent(this.b):""].join("")},X.prototype.toString=X.prototype.toString,X.MultiValueQueryParameter=Kp,Kp.prototype.On=function(){return this.Ml},Kp.prototype.getValues=Kp.prototype.On,t("H.service.Platform",Y),Y.prototype.b={apikey:null,baseUrl:new X("https","hereapi.com")},Y.prototype.pl=function(t){this.c=Dp(t.clone()),this.a=t=this.a,this.c.J({apikey:t})},Y.prototype.setBaseUrl=Y.prototype.pl,Y.prototype.fc=function(){return this.c},Y.prototype.getBaseUrl=Y.prototype.fc,Y.prototype.Ya=function(t,e){try{return t.kk=!0,new t(Ap({platformBaseUrl:this.fc(),headers:this.f},this.g[t.CONFIG_KEY]||{},e||{}))}finally{delete t.kk}},Y.prototype.createService=Y.prototype.Ya;var Lp=Function("return this")();function Mp(){}rc("monospace serif"),Mp.prototype.pop=function(t){return this[t]||(this[t]=[]),this[t].pop()||Lp.document.createElement("canvas")},Mp.prototype.push=function(t,e){this[e]||(this[e]=[]),this[e].push(t)};var Np=new Mp;function Op(){var t=decodeURIComponent(x.H.getScriptPath());return Gp(t=t?"/"===t[t.length-1]?t.substring(0,t.length-1):t:"https://js.api.here.com/v3/3.1.27.0").G("styles")}function Pp(t,e,n){var i=this,r=+(n=n||{}).min,o=+n.max;n.tileSize=n.tileSize||512,n.min=r?Yd(r,1,17):1,n.min+=Bk(n.tileSize,1),n.max=o?Yd(o,1,17):17,Pp.l.constructor.call(this,n),C(t,Qp,Pp,0),C(e,Oh,Pp,1),this.o=t,e.b&&e.b("OMV"),this.Pc(e,!0),this.m=function(){Rp(i),i.reload(!1)},t.addEventListener("versionupdate",this.m),Rp(this),Pp.prototype.D=function(){var e=/^v2\/vectortiles\/(.+)\/mc$/.exec(t.C().c);return e?e[1]:B+""}()}function Rp(t){var e=t.xd("_#-;,:","_#-;,:","_#-;,:");t.u=new RegExp("^"+e.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&").replace(/_#-;,:/g,"\\d+")+"$")}function Tp(t,e,n){var i=t.tb().getState()===Ph.READY,r=zc(e),o=zc(n);r&&(t.c=e),o&&(t.a=n),(r||o)&&(t.F=!0,i&&t.f())}function Qp(t){Qp.l.constructor.call(this,Qp,t),t=Cp(this,t).mapVersion,this.bf=tc(t)?t:Wp[this.C().toString()],tc(this.bf)||Xp(this)}t("H.service.util.eval",(function(a){return eval(a)})),u(Pp,R),t("H.service.omv.Provider",Pp),Pp.prototype.ec=function(t){return this.u.test(t)},Pp.prototype.cacheFilter=Pp.prototype.ec,Pp.prototype.xd=function(t,e,n){return Sp(this.o,t,e,n).toString()},Pp.prototype.getTileKey=Pp.prototype.xd,Pp.prototype.Nb=function(){return this.L},Pp.prototype.getCache=Pp.prototype.Nb,Pp.prototype.MAX_STORE_TIME=2592e6,Pp.prototype.dh=function(){return md()},Pp.prototype.ee=function(){return md()?ld():Pp.l.ee.call(this)},Pp.prototype.K=function(t,e,n,i,r){return this.o.ib(t,e,n,i,r)},Pp.prototype.requestInternal=Pp.prototype.K,Pp.prototype.oc=function(t){t.b&&t.b("OMV"),this.Pc(t)},Pp.prototype.setStyle=Pp.prototype.oc,Pp.prototype.ua=function(){return Pp.l.tb.apply(this)},Pp.prototype.getStyle=Pp.prototype.ua,Pp.prototype.tb=function(){var t,e=Pp.l.tb.apply(this);return this.F&&(e.getState()===Ph.READY?(t=e.ud())&&t.global&&(this.c&&(t.global.ux_language=this.c),this.a&&(t.global.ux_language_fallback=this.a),e=new Sh(t,e.fc())):e.load()),e},Pp.prototype.s=function(){Pp.l.s.call(this),this.o.removeEventListener("versionupdate",this.m)},Pp.prototype.L=new Dk(256),Pp.prototype.ta=function(t,e){return Up(this.o.ta(),this.D,e,t)},Pp.prototype.getCopyrights=Pp.prototype.ta,u(Qp,Bp),t("H.service.omv.Service",Qp),Qp.prototype.a=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}},Qp.CONFIG_KEY="omv";var Wp={};function Xp(t){t.K(t.C().clone().G("../../info"),(function(e){e=e.mapVersion;var n=t.C().toString();t.bf=e,e!==Wp[n]&&(Wp[n]=e,t.dispatchEvent("versionupdate"))}),(function(){}))}function Sp(t,e,n,i){return e=t.C().clone().G(i+"/"+e+"/"+n+"/omv"),tc(t.bf)&&e.J({mv:t.bf}),e}function Yp(){this.a={}}function Zp(t,e){for(var n in e)if(e.hasOwnProperty(n)){var i,r=e[n],o=t.a[n]||(t.a[n]=[]),s=r.length;for(i=0;i<s;i++)o.push(new $p(r[i]))}}function Up(t,e,n,i){var r=(t=t.a[e])?t.length:0,o=[];for(e=0;e<r;e++)t[e].zd(n,i)&&o.push(t[e]);return o}function $p(t){var e,n=t.boxes;if(this.label=t.label,this.min=t.minLevel,this.max=t.maxLevel,this.b=[],n&&(e=n.length)){var i=n[0],r=new K(i[0],i[1],i[2],i[3]);for(this.b.push(r),this.a=new K(i[0],i[1],i[2],i[3]),t=1;t<e;t++)r=new K((i=n[t])[0],i[1],i[2],i[3]),this.b.push(r),this.a.kc(r,!1,this.a)}}function aq(t,e,n,i,r,o,s){var a=this;s=s||{},o=o||{};var l=t.C().clone().G(e+"/"+t.Ac()+"/"+n).J(o),c=t.Eh();this.D=t,this.$=l,sk.call(this,{tileSize:i,max:512===i?19:20,min:512===i?2:0,getURL:function(t,e,n){var o=a.$.clone();return c&&o.Sa(c[(n+e+t)%c.length]),o.G(n+"/"+t+"/"+e+"/"+i+"/"+r),o.toString()},crossOrigin:s.crossOrigin,headers:s.headers,uri:l.toString().replace(/_/g,"")+i}),this.Gb=e,this.m=n,this.a=o,this.Ja=n.split(".")[0],this.jg=A(this.jg,this),this.getCopyrights=this.ta,t.addEventListener("versionupdate",this.jg)}function bq(t){bq.l.constructor.call(this,bq,t),t=Cp(this,t),this.$b=t.shards,(this.Qa=t.ignoreTypes?null:t.type)&&this.C().Sa(this.Qa),this.ac=t.version,this.Xc=new Yp,this.ui={},this.Of=0,"newest"===this.ac&&this.oh()}function cq(t,e){for(var n={},i=t[e+"s"][e],r=i.length;r--;)n[i[r].id]=i[r];t[e+"s"]=n}function dq(){this.a={}}Fc(Wp),Qp.prototype.gn=function(){return this.bf},Qp.prototype.getMapVersion=Qp.prototype.gn,Qp.prototype.pd=function(t,e){return new ll(new Pp(this,t,e),{max:22})},Qp.prototype.createLayer=Qp.prototype.pd,Qp.prototype.ib=function(t,e,n,i,r){return this.K(Sp(this,t,e,n),(function(t){return t.arrayBuffer().then(i,r)}),r,"arraybuffer")},Qp.prototype.bg=function(t){return Op().G("omv/"+t+".yaml")},Qp.prototype.Bh=function(t,e){if(!Ca(t))throw new D(this.Bh,0,'"onResult" must be a function');if(!Ca(e))throw new D(this.Bh,1,'"onError" must be a function');return this.K(this.C().clone().ue("v2/vectortiles/pviews"),t,e)},Qp.prototype.getPoliticalViews=Qp.prototype.Bh,Y.prototype.Vj=function(t){return this.Ya(Qp,t)},Y.prototype.getOMVService=Y.prototype.Vj,Qp.prototype.Pe=function(){this.Xc=new Yp,this.K(this.C().clone().G("../../copyrights"),A(this.Xi,this),hd)},Qp.prototype.Xi=function(t){Zp(this.Xc,t),this.dispatchEvent("copyrightupdate")},Qp.prototype.ta=function(){return this.Xc||this.Pe(),this.Xc},Qp.prototype.getCopyrights=Qp.prototype.ta,$p.prototype.zd=function(t,e){if(t>=this.min&&t<=this.max){if(!(t=this.b.length)||!this.a)return!0;if(this.a.zd(e))for(;t--;)if(this.b[t].zd(e))return!0}return!1},u(aq,sk),aq.prototype.MAX_STORE_TIME=2592e6,n=aq.prototype,n.s=function(){sk.prototype.s.call(this),this.D.removeEventListener("versionupdate",this.jg)},n.ta=function(t,e){return Up(this.D.ta(),this.Ja,e,t)},n.jg=function(){var t=this.D;this.$=t.C().clone().G(this.Gb+"/"+t.Ac()+"/"+this.m).J(this.a),this.reload(!1)},n.dh=function(){return md()},n.ee=function(){return md()?ld():aq.l.ee.call(this)},u(bq,Bp),t("H.service.MapTileService",bq),bq.prototype.a=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}},bq.CONFIG_KEY="maptile",bq.prototype.Eh=function(){return this.$b},bq.prototype.$j=function(){return this.Qa},bq.prototype.getType=bq.prototype.$j,bq.prototype.Ac=function(){return this.ac},bq.prototype.getVersion=bq.prototype.Ac,bq.prototype.Qi=function(t){this.ac=t},bq.prototype.ta=function(){return this.Of||(this.ac&&"newest"!==this.ac||"traffic"===this.Qa)&&this.Pe(),this.Xc},bq.prototype.getCopyrights=bq.prototype.ta,n=bq.prototype,n.Yi=function(t){var e;if(cq(t=t.response,"map"),cq(t,"scheme"),cq(t,"tiletype"),cq(t,"format"),cq(t,"resolution"),cq(t,"language"),"newest"===this.ac&&"traffic"!==this.Qa)for(e in t.maps)t.maps[e].hash&&t.maps[e].newest&&(this.Qi(t.maps[e].hash),this.dispatchEvent("versionupdate"));this.Kh=t,this.dispatchEvent("infoupdate")},n.Xi=function(t){Zp(this.Xc,t),this.dispatchEvent("copyrightupdate")},n.oh=function(){var t=this,e=this.C().clone().G("info").J({output:"json"});this.$b&&e.Sa(this.$b[0]),this.K(e,(function(e){t.Yi(e)}),(function(t){throw t}))},n.Pe=function(){var t=this,e=this.C().clone().G("copyright").G(t.Ac()).J({output:"json"});this.$b&&e.Sa(this.$b[0]),this.Of=1,this.K(e,(function(e){t.Of=2,t.Xi(e)}),(function(e){throw t.Of=-1,e}))},n.wh=function(){return this.Kh},bq.prototype.getInfo=bq.prototype.wh,bq.prototype.Ke=function(t,e,n,i,r,o){var s,a=this.C().clone().G(t+"/"+this.Ac()+"/"+e+"/"+n+"/"+i).J(r||{}).toString(),l=0,c=a.length;if(0!==c)for(s=0;s<c;s++){l=(l<<5)-l+a.charCodeAt(s),l|=0}return a=l,(l=this.ui[a])||(l=new aq(this,t,e,n,i,r,Ap({headers:this.ef},o||{})),this.ui[a]=l),l},bq.prototype.createTileProvider=bq.prototype.Ke,bq.prototype.tc=function(t,e,n,i,r,o,s,a){return new ll(t=this.Ke(t,e,n,i,r,a),{opacity:o,dark:!!s})},bq.prototype.createTileLayer=bq.prototype.tc,Y.prototype.zh=function(t){return this.Ya(bq,t)},Y.prototype.getMapTileService=Y.prototype.zh,Y.prototype.hh=function(t,e,n,i,r,o){var s=this.zh(),a=this.zh({type:"aerial"}),l=this.Zj(),c=this.Vj(),u={},h={crossOrigin:"anonymous"};Da(t)&&("crossOrigin"in(o=t)&&(h.crossOrigin=o.crossOrigin),t=o.tileSize,e=o.ppi,n=o.lg,i=o.lg2,r=o.style,o=o.pois);var f=t||512;if(0>[72,250,320,500].indexOf(+e)){if(e!==B)throw new D(this.hh,1,e)}else u.ppi=+e;return n&&(u.lg=n),i&&(u.lg2=i),r&&(u.style=r),o&&(u.pois=o),t=function(t,e,n,i,r){return t.tc(e,n,f,i,u,1,r,h)},Tp((e=c.pd(new Sh(c.bg("miami/normal.day").toString()))).ga(),u.lg,u.lg2),Tp((n=c.pd(new Sh(c.bg("miami/truck.day").toString()))).ga(),u.lg,u.lg2),c=l.wj(u.lg?{lg:u.lg,i18n:!0}:void 0),{vector:{normal:{map:e,truck:n,traffic:l.vj(),trafficincidents:c}},raster:{normal:{xbase:t(s,"xbasetile","normal.day","png8",!1),xbasenight:t(s,"xbasetile","normal.night","png8",!0),base:t(s,"basetile","normal.day","png8",!1),basenight:t(s,"basetile","normal.night","png8",!0),map:t(s,"maptile","normal.day","png8",!1),mapnight:t(s,"maptile","normal.night","png8",!0),trafficincidents:c,transit:t(s,"maptile","normal.day.transit","png8",!1),labels:t(s,"labeltile","normal.day","png",!1)},satellite:{xbase:t(a,"xbasetile","hybrid.day","jpg",!0),base:t(a,"basetile","hybrid.day","jpg",!0),map:t(a,"maptile","hybrid.day","jpg",!0),labels:t(a,"labeltile","hybrid.day","png",!0)},terrain:{xbase:t(a,"xbasetile","terrain.day","jpg",!1),base:t(a,"basetile","terrain.day","jpg",!1),map:t(a,"maptile","terrain.day","jpg",!1),labels:t(a,"labeltile","terrain.day","png",!1)}}}},Y.prototype.createDefaultLayers=Y.prototype.hh,dq.prototype.Ab=function(t,e){var n,i=t+e;return(n=this.a[i])?n:(t=(t=eq.MARKER.replace("{{icon}}",fq[t]||fq.OTHER)).replace("{{color}}",gq[e]||gq.BLOCKING),e={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Ki(Li.POLYGON,hq.MARKER)},this.a[i]=new Hj(t,e))};var eq={MARKER:'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>'},fq={CONGESTION:'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>',ROADWORKS:'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>',ACCIDENT:'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>',OTHER:'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>'},gq={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},hq={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function iq(t,e,n){(n=n||{}).criticality||(n.criticality="major,critical"),C(t,jq,iq,0),Bn.call(this,{max:20,min:8,requestData:A(this.$,this)}),this.m=new dq,this.F=t,this.a=n,this.reload=A(this.reload,this),this.u=setInterval(this.reload,e||18e4)}u(iq,Bn),t("H.service.traffic.incidents.Provider",iq),iq.prototype.c={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"},iq.prototype.$=function(t,e,n,i,r){var o=this,s=this.c,a=this.m;return this.F.requestIncidentsByTile(t,e,n,(function(t){var e,n=[];if(t=t.TRAFFIC_ITEMS)for(e=(t=t.TRAFFIC_ITEM).length;e--;){var r=t[e],l=r.TRAFFIC_ITEM_TYPE_DESC;switch(l){case"ACCIDENT":case"CONGESTION":var c=l;break;case"CONSTRUCTION":c="ROADWORKS";break;default:c="OTHER"}c=a.Ab(c,s[r.CRITICALITY.DESCRIPTION]),(l=new zn({lat:(l=r.LOCATION.GEOLOC.ORIGIN).LATITUDE,lng:l.LONGITUDE},{provider:o,icon:c})).setData(r),n.push(l)}i(n)}),r,this.a)},iq.prototype.B=function(){Bn.prototype.B.call(this),clearInterval(this.u)};var kq="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function lq(t,e){var n={};this.a=t,Wa(n,e||n),ak.call(this,n),this.xg={},(t=this.Ob(Pg.SPATIAL)).update(t.a+1,Mg.ADD)}function mq(t){return t.Bc(!0)}function nq(t,e,n){var i,r=e.j&&e.j[n];return!r&&(i=e.o)&&(delete e.o,(e.j=t=t.a.parse(t,e,i))&&(r=t[n])),r||ff}u(lq,ak),t("H.service.remote.ObjectProvider",lq),lq.prototype.B=function(){ak.prototype.B.call(this)},lq.prototype.Jc=function(){return ff},lq.prototype.requestMarkers=lq.prototype.Jc,lq.prototype.Ic=function(){return ff},lq.prototype.requestDomMarkers=lq.prototype.Ic,lq.prototype.Fd=function(){return ff},lq.prototype.requestOverlays=lq.prototype.Fd,lq.prototype.Vb=df,lq.prototype.providesMarkers=lq.prototype.Vb,lq.prototype.Ub=df,lq.prototype.providesDomMarkers=lq.prototype.Ub,lq.prototype.Hc=df,lq.prototype.providesSpatials=lq.prototype.Hc,lq.prototype.yg=function(){return ff},lq.prototype.requestSpatials=lq.prototype.yg,lq.prototype.zg=function(t,e){return t=nq(this,t,oq),e&&(t=t.filter(mq)),t},lq.prototype.requestSpatialsByTile=lq.prototype.zg,lq.prototype.ea=function(t){var e=t.fb();if(this.xg[e])throw new Xc(this.ea,"Remote object "+e+" already added");return this.xg[e]=t},lq.prototype.Ha=function(t){delete this.xg[t.fb()]};var oq="spatials";function pq(t,e,n){pq.l.constructor.call(this,{min:qq,max:rq}),C(t,jq,pq,0),this.m=t,this.a=n||sq,this.a.responseattributes="sh,fc",this.c=setInterval(A(this.reload,this),e||18e4),this.Pc(new Sh(t.bg().toString()),!0)}u(pq,R),t("H.service.traffic.flow.Provider",pq),pq.prototype.ua=function(){return this.tb()},pq.prototype.getStyle=pq.prototype.ua,pq.prototype.oc=function(t){t.b&&t.b("GeoJSONTileSource"),this.Pc(t)},pq.prototype.setStyle=pq.prototype.oc;var sq={locationreferences:"tmc,shp"};pq.prototype.s=function(){pq.l.s.call(this),clearInterval(this.c)},pq.prototype.K=function(t,e,n,i,r){return this.m.requestFlowByTile(t,e,n,(function(t){t.type&&-1!==t.type.indexOf("Error")?r(t.Details):i(t)}),r,this.a)},pq.prototype.requestInternal=pq.prototype.K,pq.prototype.qd=function(t,e,n,i,r){var o,s,a,l,c,u={type:"FeatureCollection",features:[]},h=i.RWS.length;for(o=0;o<h;o++){var f=i.RWS[o],p=f.RW,d=p.length,g=-1!==kq.indexOf(f.EXTENDED_COUNTRY_CODE+f.EBU_COUNTRY_CODE);for(f=0;f<d;f++){var m=p[f].FIS,v=m.length;for(m=0;m<v;m++){var y=p[f].FIS[m].FI,b=y.length;for(s=0;s<b;s++){var _=y[s],w=[],x=_.CF[0],k=!!x.SSS,S={type:"Feature",properties:x,geometry:{type:"MultiLineString",coordinates:w}};for(S.properties.LHT=g,_.SHP.length&&(S.properties.FC=_.SHP[0].FC),k&&(c=[]),x=0;x<_.SHP.length;x++){var A=_.SHP[x].value,E=A.length;for(a=0;a<E;a++){var T=k?c:void 0,C=new ao(A[a].trim()),M=[],L={};for(C.xe();-1!==(l=C.Sb());)l===tq?(L.lat=+String.fromCharCode.apply(pq,C.Sd()),C.next(),C.xe()):l===uq?(L.lng=+String.fromCharCode.apply(pq,C.Sd()),M.push([L.lng,L.lat]),T&&T.push(Zf(L)),L=[],C.next(),C.xe()):C.next();L.lng=+String.fromCharCode.apply(pq,C.Sd()),M.push([L.lng,L.lat]),T&&T.push(Zf(L)),l=M,w.push(l)}}u.features.push(S)}}}}return pq.l.qd.call(this,t,e,n,u,r)},pq.prototype.createTileInternal=pq.prototype.qd;var rq=21,qq=10,uq=32,tq=44;function vq(t){function e(e){i.contains(r)&&i.removeChild(r),c&&clearTimeout(c),delete vq.a[o],e&&t.Hj&&t.Hj.call(l,e)}if(!t.url||!t.bh)throw Error('Parameter "options" must specify at least a URL and a callback.');if("function"!==typeof t.bh)throw Error("Parameters options.callback must be a function");var n=t.wp||document,i=n.getElementsByTagName("head")[0],r=n.createElement("script");n=t.url instanceof X?t.url:Gp(t.url,t.vp);var o=vq.b++,s=t.em||"callback",a=t.bh,l={},c=null;return l.id=o,l.cancel=function(){e("cancelled")},0!==t.timeout&&(c=x.setTimeout((function(){e("timeout")}),t.timeout||3e4)),vq.a[o]=function(t){e(),a.call(l,t)},r.type="text/javascript",r.src=n.toString()+(n.ek()?"&":"?")+s+"="+(t.xp?"H.service.jsonp.handleResponse("+o+")":encodeURI("H.service.jsonp.handleResponse("+o+")")),i.appendChild(r),l}function jq(t){jq.l.constructor.call(this,jq,t),this.fm=Cp(this,t).callbackKey}function wq(t,e,n,i){return vq({url:e,bh:n,Hj:function(t){i(Error("["+t+"] "+e+" request failed"))},em:t.fm})}function xq(t){xq.l.constructor.call(this,xq,t),this.jl=Cp(this,t).reverseSubDomain}function yq(t){yq.l.constructor.call(this,yq,t)}function zq(t){zq.l.constructor.call(this,zq,t),this.f=t.getToken}function Hq(t,e,n,i){return t.C().clone().G(e+"/layers/"+n+"/features").J(i||{})}function Fq(t,e,n,i,r){return Hq(t,n,i,e=Object.assign({},r,{id:new Kp(e)}))}function Dq(t,e,n,i,r){return t.C().clone().G(n+"/layers/"+i+"/features/"+e).J(r||{})}function Aq(t,e,n,i){wc(n,"String",t,e,"must be a string"),wc(i,"String",t,e+1,"must be a string")}function Cq(t,e){wc(e,"String",t,0,"must be a string")}function Eq(t,e){if(!Array.isArray(e)||0===e.length||e.some((function(t){return"string"!==typeof t})))throw new D(t,0,"must be a non-empty array of strings")}function Gq(t,e,n){if(!Da(n))throw new D(t,e,"must be a GeoJSON object")}function Bq(t,e,n,i){if(!Ca(n))throw new D(t,e,"must be a function");if(!Ca(i))throw new D(t,e+1,"must be a function")}function Iq(t,e,n,i){if(Iq.l.constructor.call(this,i?{min:i.min,max:i.max}:void 0),C(t,zq,Iq,0),!zc(e))throw new D(Iq,1,'"catalogHrn" must be a string');if(!zc(n))throw new D(Iq,2,'"layerId" must be a string');this.u=t,this.a=e,this.c=n,this.m=Da(i)&&Da(i.parameters)?i.parameters:{},this.Pc(new Sh({sources:{iml:{type:"MVT"}},layers:{iml:{data:{source:"iml",layer:this.a+":"+this.c},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#0258AE",width:"2px",join:"round",cap:"round"}}}}}}))}function Jq(t){Jq.l.constructor.call(this,Jq,t)}function Kq(t){Kq.l.constructor.call(this,Kq,t)}function Lq(t){Lq.l.constructor.call(this,Lq,t)}function Mq(){}function Nq(){}function Oq(t,e){this.a=t,this.b=e}function Pq(){}function Qq(t,e){this.b=t,this.a=e}function Rq(t,e,n){var i;if(e=e||(t&&t.length?Object.keys(t[0]):B),this.Fb=t,e)for(this.Od=e,this.eh=t=mc(),i=e.length;i--;)t[e[i]]=!0;n!==B&&(this.ii=n)}function Sq(t,e){return t.Fb?t.Fb.push(e):t.Fb=[e],t.Fb.length-1}function Tq(t){var e=Uq;if(!t||!zc(Ze(t.layerId,t.layer))||!Cc(t.level)||tc(t.rowFilter)&&!Ca(t.rowFilter)||tc(t.rowFilterContext)&&!Da(t.rowFilterContext))throw new D(e,1,tc("invalid layer config")?"invalid layer config":t)}function Vq(t,e,n,i){i=i||Wq,this.qf={},i.provider=t,this.invalidate=ef,Vq.l.constructor.call(this,e,i),delete this.invalidate,n&&(this.b=n),this.xa(Mg.ADD)}t("H.service.jsonp",vq),vq.Un=function(t){return(t=vq.a[t])?t:function(){}},vq.handleResponse=vq.Un,vq.b=0,vq.a={},u(jq,Bp),t("H.service.traffic.Service",jq),jq.prototype.a=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}},jq.CONFIG_KEY="traffic",jq.prototype.vj=function(t){return new ll(new pq(this,void 0,t),{max:22})},jq.prototype.createFlowLayer=jq.prototype.vj,jq.prototype.wj=function(t){return new Cn(new iq(this,void 0,t))},jq.prototype.createIncidentsLayer=jq.prototype.wj,jq.prototype.To=function(t,e,n){return wq(this,t=this.C().clone().G("incidents.json").J(t),e,n)},jq.prototype.requestIncidents=jq.prototype.To,jq.prototype.So=function(t,e,n,i,r,o){return wq(this,t=this.C().clone().G(["flow/json",n,t,e].join("/")).J(o||{}),i,r)},jq.prototype.requestFlowByTile=jq.prototype.So,jq.prototype.Uo=function(t,e,n,i,r,o){return wq(this,t=this.C().clone().G(["incidents/json",n,t,e].join("/")).J(o||{}),i,r)},jq.prototype.requestIncidentsByTile=jq.prototype.Uo,jq.prototype.bg=function(){return Op().G("traffic/flow.yaml")},Y.prototype.Zj=function(t){return this.Ya(jq,t)},Y.prototype.getTrafficService=Y.prototype.Zj,u(xq,Bp),t("H.service.GeocodingService",xq),xq.prototype.a=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}},xq.CONFIG_KEY="geocoding",xq.prototype.b=function(t){return Error(t.Details||t.message||t.error)},xq.prototype.qh=function(t,e,n){return t=this.C().clone().G("geocode.json").J(t),this.K(t,e,n)},xq.prototype.geocode=xq.prototype.qh,xq.prototype.zi=function(t,e,n){return t=this.C().clone().G("reversegeocode.json").J(t),this.jl&&t.Sa(this.jl),this.K(t,e,n)},xq.prototype.reverseGeocode=xq.prototype.zi,xq.prototype.search=function(t,e,n){return t=this.C().clone().G("search.json").J(t),this.K(t,e,n)},xq.prototype.search=xq.prototype.search,Y.prototype.Sm=function(t){return this.Ya(xq,t)},Y.prototype.getGeocodingService=Y.prototype.Sm,u(yq,Bp),t("H.service.PlacesService",yq),yq.prototype.a=function(){return{subDomain:"places.ls",path:"places/v1"}},yq.CONFIG_KEY="places",yq.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"},yq.prototype.request=function(t,e,n,i){return this.T(t,e,n,i)},yq.prototype.T=function(t,e,n,i){return t=this.C().clone().G(t).J(e||{}),this.K(t,n,i)},yq.prototype.search=function(t,e,n){return this.T("discover/search",t,e,n)},yq.prototype.search=yq.prototype.search,yq.prototype.ep=function(t,e,n){return this.T("suggest",t,e,n)},yq.prototype.suggest=yq.prototype.ep,yq.prototype.pm=function(t,e,n){return this.T("discover/explore",t,e,n)},yq.prototype.explore=yq.prototype.pm,yq.prototype.$l=function(t,e,n){return this.T("discover/around",t,e,n)},yq.prototype.around=yq.prototype.$l,yq.prototype.Wn=function(t,e,n){return this.T("discover/here",t,e,n)},yq.prototype.here=yq.prototype.Wn,yq.prototype.gm=function(t,e,n){return this.T("categories/places",t,e,n)},yq.prototype.categories=yq.prototype.gm,yq.prototype.rm=function(t,e,n,i){return t=Gp(t).J(this.C().getQuery()).J(i||{}),this.K(t,e,n)},yq.prototype.follow=yq.prototype.rm,Y.prototype.rn=function(t){return this.Ya(yq,t)},Y.prototype.getPlacesService=Y.prototype.rn,u(zq,Bp),t("H.service.iml.Service",zq),zq.prototype.a=function(){return{host:"interactive.data.api.platform.here.com",path:"interactive/v1/catalogs"}},zq.prototype.b=function(t){var e=[{keys:["code","title","cause","action"],format:function(){return t.code+": "+t.title+"; cause: "+t.cause+"; action: "+t.action}},{keys:["error","error_description"],format:function(){return t.error+": "+t.error_description}},{keys:["error","errorMessage"],format:function(){return t.error+": "+t.errorMessage}}];return Error(Da(t)?function(){for(var n=ea(e),i=n.next();!i.done;i=n.next()){var r=(i=i.value).format;if(i.keys.every((function(e){return t[e]})))return r()}return JSON.stringify(t)}():t)},zq.prototype.de=function(t,e,n,i,r){var o=this.de;return Aq(o,0,t,e),Bq(o,2,n,i),t=this.C().clone().G(t+"/layers/"+e+"/statistics").J(r||{}),this.T(t,"GET",n,i)},zq.prototype.getStatistics=zq.prototype.de,zq.prototype.Wf=function(t,e,n,i,r,o,s,a,l){var c=l?"":".mvtf";return t=this.C().clone().G(i+"/layers/"+r+"/tile/web/"+n+"_"+t+"_"+e+c).J(Object.assign({clip:!0},a)),this.T(t,"GET",l?o:function(t){return t.arrayBuffer().then(o)},s,void 0,l?"application/json":"arraybuffer")},zq.prototype.getFeaturesByTile=zq.prototype.Wf,zq.prototype.Pj=function(t,e,n,i,r,o){var s=this.Pj;return Cq(s,t),Aq(s,1,e,n),Bq(s,3,i,r),t=Dq(this,t,e,n,o),this.T(t,"GET",i,r)},zq.prototype.getFeatureById=zq.prototype.Pj,zq.prototype.cd=function(t,e,n,i,r,o){var s=this.cd;return Eq(s,t),Aq(s,1,e,n),Bq(s,3,i,r),t=Fq(this,t,e,n,o),this.T(t,"GET",i,r)},zq.prototype.getFeaturesById=zq.prototype.cd,zq.prototype.Xd=function(t,e,n,i,r){var o=this.Xd;if(!Da(t)||!(t.bbox||t.north&&t.east&&t.south&&t.west))throw new D(o,0,'must be an object with either "bbox" or a full set of "north", "east", "south" and "west"');return Aq(o,1,e,n),Bq(o,3,i,r),t=this.C().clone().G(e+"/layers/"+n+"/bbox").J(t),this.T(t,"GET",i,r)},zq.prototype.getFeaturesByBoundingBox=zq.prototype.Xd,zq.prototype.Rj=function(t,e,n,i,r){var o=this.Rj;if(!(Da(t)&&t.radius&&(t.lat&&(t.lng||t.lon)||t.refCatalogHrn&&t.refLayerId&&t.refFeatureId)))throw new D(o,0,'must be an object with "radius" and a combination of either "lat"+"lng" or "refCatalogHrn"+"refLayerId"+"refFeatureId"');return Aq(o,1,e,n),Bq(o,3,i,r),t=this.C().clone().G(e+"/layers/"+n+"/spatial").J(t),this.T(t,"GET",i,r)},zq.prototype.getFeaturesByPointAndRadius=zq.prototype.Rj,zq.prototype.Qj=function(t,e,n,i,r,o){var s=this.Qj;if(!Da(t)||!t.radius)throw new D(s,0,'must be an object with "radius"');return Gq(s,1,e),Aq(s,2,n,i),Bq(s,4,r,o),t=this.C().clone().G(n+"/layers/"+i+"/spatial").J(t),this.T(t,"POST",r,o,e)},zq.prototype.getFeaturesByGeometryAndRadius=zq.prototype.Qj,zq.prototype.kl=function(t,e,n,i,r){var o=this.kl;return Aq(o,0,t,e),Bq(o,2,n,i),t=this.C().clone().G(t+"/layers/"+e+"/search").J(r||{}),this.T(t,"GET",n,i)},zq.prototype.searchFeatures=zq.prototype.kl,zq.prototype.pk=function(t,e,n,i,r){var o=this.pk;return Aq(o,0,t,e),Bq(o,2,n,i),t=this.C().clone().G(t+"/layers/"+e+"/iterate").J(r||{}),this.T(t,"GET",n,i)},zq.prototype.iterateFeatures=zq.prototype.pk,zq.prototype.kd=function(t,e,n,i,r,o){var s=this.kd;return Gq(s,0,t),Aq(s,1,e,n),Bq(s,3,i,r),e=Hq(this,e,n,o),this.T(e,"PUT",i,r,t)},zq.prototype.putFeatures=zq.prototype.kd,zq.prototype.hd=function(t,e,n,i,r,o){var s=this.hd;return Gq(s,0,t),Aq(s,1,e,n),Bq(s,3,i,r),e=Hq(this,e,n,o),this.T(e,"POST",i,r,t)},zq.prototype.postFeatures=zq.prototype.hd,zq.prototype.rd=function(t,e,n,i,r){var o=this.rd;return Eq(o,t),Aq(o,1,e,n),Bq(o,3,i,r),t=Fq(this,t,e,n),this.T(t,"DELETE",i,r)},zq.prototype.deleteFeatures=zq.prototype.rd,zq.prototype.al=function(t,e,n,i,r,o,s){var a=this.al;return Cq(a,t),Gq(a,1,e),Aq(a,2,n,i),Bq(a,4,r,o),t=Dq(this,t,n,i,s),this.T(t,"PUT",r,o,e)},zq.prototype.putFeature=zq.prototype.al,zq.prototype.Uk=function(t,e,n,i,r,o,s){var a=this.Uk;return Cq(a,t),Gq(a,1,e),Aq(a,2,n,i),Bq(a,4,r,o),t=Dq(this,t,n,i,s),this.T(t,"PATCH",r,o,e)},zq.prototype.patchFeature=zq.prototype.Uk,zq.prototype.Aj=function(t,e,n,i,r){var o=this.Aj;return Cq(o,t),Aq(o,1,e,n),Bq(o,3,i,r),t=Dq(this,t,e,n),this.T(t,"DELETE",i,r,void 0,"text/plain")},zq.prototype.deleteFeature=zq.prototype.Aj,zq.prototype.T=function(t,e,n,i,r,o){return o=void 0===o?"application/json":o,e={method:e,headers:Object.assign({},r?{"Content-Type":"application/geo+json"}:void 0,"function"===typeof this.f?{Authorization:"Bearer "+this.f()}:void 0,this.ef)},r&&(e.data=JSON.stringify(r)),(r=new rf(o,t.toString(),fe,e)).then(n,Ep(this,t,i)),r},zq.CONFIG_KEY="iml",Y.prototype.Xm=function(t){return this.Ya(zq,t)},Y.prototype.getIMLService=Y.prototype.Xm,u(Iq,R),t("H.service.iml.Provider",Iq),Iq.prototype.K=function(t,e,n,i,r){return this.u.Wf(t,e,n,this.a,this.c,i,r,this.m)},Iq.prototype.requestInternal=Iq.prototype.K,Iq.prototype.ua=function(){return this.tb()},Iq.prototype.getStyle=Iq.prototype.ua,Iq.prototype.oc=function(t){t.b("MVT"),this.Pc(t)},Iq.prototype.setStyle=Iq.prototype.oc,u(Jq,Bp),t("H.service.publicTransit.Service",Jq),Jq.prototype.a=function(){return{subDomain:"transit.router",path:"v8"}},Jq.CONFIG_KEY="publicTransit",Jq.prototype.Bn=function(t,e,n){return t=this.C().clone().G("routes").J(t),this.K(t,e,n)},Jq.prototype.getRoutes=Jq.prototype.Bn,Jq.prototype.Lm=function(t,e,n){return t=this.C().clone().G("departures").J(t),this.K(t,e,n)},Jq.prototype.getDepartures=Jq.prototype.Lm,Jq.prototype.Fn=function(t,e,n){return t=this.C().clone().G("stations").J(t),this.K(t,e,n)},Jq.prototype.getStations=Jq.prototype.Fn,Jq.prototype.b=function(t){return Error(JSON.stringify(t))},Y.prototype.xn=function(t){return this.Ya(Jq,t)},Y.prototype.getPublicTransitService=Y.prototype.xn,u(Kq,Bp),t("H.service.RoutingService",Kq),Kq.prototype.a=function(){return{subDomain:"route.ls",path:"routing/7.2"}},Kq.prototype.b=function(t){return Error(t.details)},Kq.CONFIG_KEY="routing",Kq.prototype.Nd=function(t,e,n){return t=this.C().clone().G("calculateroute.json").J(t),this.K(t,e,n)},Kq.prototype.calculateRoute=Kq.prototype.Nd,Kq.prototype.dm=function(t,e,n){return t=this.C().clone().Sa("isoline").G("calculateisoline.json").J(t),this.K(t,e,n)},Kq.prototype.calculateIsoline=Kq.prototype.dm,u(Lq,Bp),t("H.service.RoutingService8",Lq),Lq.CONFIG_KEY="routing_v8",Lq.prototype.a=function(){return{subDomain:"router",path:"v8/routes"}},Lq.prototype.b=function(t){return Error(t.error)},Lq.prototype.Nd=function(t,e,n){return t=this.C().clone().J(t),this.K(t,e,n)},Lq.prototype.calculateRoute=Lq.prototype.Nd,Y.prototype.Xj=function(t,e){if(7===(e=+e||7))e=Kq;else{if(8!==e)throw new D(this.Xj,1,"allowed values are 7 and 8");e=Lq}return this.Ya(e,t)},Y.prototype.getRoutingService=Y.prototype.Xj,t("H.service.extension.dataView.ITable",Mq),Mq.prototype.$d=function(){},Mq.prototype.getMeta=Mq.prototype.$d,Mq.prototype.ce=function(){},Mq.prototype.getRowCount=Mq.prototype.ce,Mq.prototype.zc=function(){},Mq.prototype.getRow=Mq.prototype.zc,Mq.prototype.Ua=function(){},Mq.prototype.getColumnNames=Mq.prototype.Ua,Mq.prototype.Se=function(){},Mq.prototype.getColumn=Mq.prototype.Se,Mq.prototype.ya=function(){},Mq.prototype.getCell=Mq.prototype.ya,Mq.prototype.concat=function(){},Mq.prototype.concat=Mq.prototype.concat,t("H.service.extension.dataView.IRow",Nq),Nq.prototype.Ua=function(){},Nq.prototype.getColumnNames=Nq.prototype.Ua,Nq.prototype.ya=function(){},Nq.prototype.getCell=Nq.prototype.ya,Nq.prototype.wd=function(){},Nq.prototype.getTable=Nq.prototype.wd,t("H.service.extension.dataView.ObjRow",Oq),Oq.prototype.Ua=function(){return this.a.Ua()},Oq.prototype.getColumnNames=Oq.prototype.Ua,Oq.prototype.ya=function(t){return this.a.ya(this.b,t)},Oq.prototype.getCell=Oq.prototype.ya,Oq.prototype.wd=function(){return this.a},Oq.prototype.getTable=Oq.prototype.wd,t("H.service.extension.dataView.IColumn",Pq),Pq.prototype.ya=function(){},Pq.prototype.getCell=Pq.prototype.ya,t("H.service.extension.dataView.ObjColumn",Qq),Qq.prototype.ya=function(t){return this.b.ya(t,this.a)},Qq.prototype.getCell=Qq.prototype.ya,t("H.service.extension.dataView.ObjTable",Rq),n=Rq.prototype,n.ii=B,n.Fb=B,n.Od=B,n.eh=B,n.$d=function(){return this.ii},Rq.prototype.getMeta=Rq.prototype.$d,Rq.prototype.ce=function(){return this.Fb?this.Fb.length:0},Rq.prototype.getRowCount=Rq.prototype.ce,Rq.prototype.zc=function(t){var e=this.Fb;return e&&e[t]?new Oq(this,t):B},Rq.prototype.getRow=Rq.prototype.zc,Rq.prototype.Ua=function(){return this.Od||ff},Rq.prototype.getColumnNames=Rq.prototype.Ua,Rq.prototype.Se=function(t){return this.eh[t]?new Qq(this,t):B},Rq.prototype.getColumn=Rq.prototype.Se,Rq.prototype.ya=function(t,e){var n=this.Fb;return(t=n&&this.eh[e]&&n[t])&&t[e]},Rq.prototype.getCell=Rq.prototype.ya,Rq.prototype.concat=function(){var t,e=arguments.length,n=this.Od,i=""+this.Od,r=(this.Fb||[]).slice();for(t=0;t<e;t++){var o=arguments[t];if(!(o instanceof Rq))throw new D(this.concat,t);if(o.Fb){if(n&&""+o.Od!==i)throw new D(this.concat,t,"Incompatible columns!");r=r.concat(o.Fb)}}return new Rq(r,this.Od,this.ii)},Rq.prototype.concat=Rq.prototype.concat,u(Vq,ah),t("H.service.remote.Spatial",Vq);var Wq={};function Xq(t,e){this.a=t,e&&(this.b=e)}Vq.prototype.fb=function(){return this.b||ah.prototype.fb.call(this)},Vq.prototype.getId=Vq.prototype.fb,Vq.prototype.Bg=Function(),Vq.prototype.retain=Vq.prototype.Bg,Vq.prototype.release=Function(),Vq.prototype.release=Vq.prototype.release;var Yq=new Xq([]);function Zq(t,e,n){t.qf[e.key]=new Xq(n,void 0)}function $q(t,e,n,i,r,o){ar($q,1,e,n),ar($q,2,i,r),(this.f=t.length)?(this.u=t,this.aa=e,this.i=n,this.b=0,this.c=A(this.c,this),this.m=i,this.j=r,this.a=mc(),Wa(this.a,br,o||{}),this.g={},x.setTimeout(this.c,0)):e(ff,!0)}Vq.prototype.Yd=function(t){return(this.qf[t.key]||Yq).a},Vq.prototype.getGeometriesForTile=Vq.prototype.Yd,Vq.prototype.yh=function(t){return(this.qf[t.key]||Yq).b},Vq.prototype.getLabels=Vq.prototype.yh;var br={duration:100,vm:"geometry",um:"WKT",Vo:"searchAttributes",zj:B};function ar(t,e,n,i){if(!Ca(n))throw new D(t,e,"has invalid type");if(!Ca(i))throw new D(t,e+1,"has invalid type")}function cr(t,e,n){var i=8===t;this.b=e,this.c=n||hd,(this.a=4===t||i)?this.j=i:this.g=1===t,this.f=this.a?"$HProjGeometry":"geometry"}function dr(t,e,n,i,r){var o=[],s=r.paths,a=s.length,l=0,c=t.b&&t.b(i);for(t=new Vq(e,t.j,B,{style:c||t.i,data:i});l!==a;)o.push(fr(s[l++]));return Zq(t,n,[new qh(o,r.interiorsIndex,r.outlinesIndex)]),t}function er(t,e,n,i){i=new Xf(i[0],i[1]);var r=t.b&&t.b(n);return t.g?t=new zn(i,t={icon:r,data:n,provider:e}):t=new Pi(i,t={icon:r,data:n,provider:e}),t}function fr(t){for(var e=0,n=t.length,i=[];e<n;)i.push(new I(t[e++],t[e++]));return i}function gr(t){var e=(t=t||{}).tileCacheSize||1024,n=t.resultType,i=t.styleCallback;if(tc(t.min)||(t.min=12),gr.l.constructor.call(this,t),-1===hr.indexOf(n))throw new D(gr,2,"invalid resultType");if(this.a=n,i&&!Ca(i))throw new D(gr,2,"invalid style callback");this.Da=i,this.$=t.pixelRatio||Se(),this.Kb=A(this.Kb,this),this.v(new Dk(e,A(this.bc,this))),this.createTileInternal=A(4===n||8===n?this.L:this.D,this)}function ir(t){var e=t.Ja;return e||(t.u||(t.u=t.m(t.a,t.Da,t.Kb)),(e=t.Ja=new lq(t.u)).ka(t),e.addEventListener(t.g.Ea,A(t.Gb,t)),e.Ja=!0),e}$q.prototype.c=function(){for(var t,e=[],n=!1,i=zk();this.b<this.f;){var r=this.u[this.b];if(n=r.attributes,t=r.layerId||this.a.zj,r.distance&&(n[this.a.Vo]={nearest:new Xf(r.nearestLat,r.nearestLon),distance:r.distance}),r=r[this.a.vm]){try{var o=Gn(new ao(r))}catch(s){this.i(new x.Error(s.message)),n=!0;break}n[this.a.um]=o}if((r=this.g[t])||(r=this.g[t]=this.m({layerId:t,columnNames:Object.keys(n)})),n=this.j(r,n),e.push(n),this.b++,(n=this.b===this.f)||zk()-i>=this.a.duration){this.aa(e,n);break}}n?this.g=y:this.o=x.setTimeout(this.c,0)},$q.prototype.cancel=function(){x.clearTimeout(this.o),this.b<this.f&&this.i(new x.Error("parsing canceled"))},$q.prototype.cancel=$q.prototype.cancel,cr.prototype.parse=function(t,e,n){var i,r,o,s,a={},l=[],c=0;for(o=n.length;c<o;c++){var u=n[c],h=u.Rows;if(u=h.length){var f=Object.keys(h[0]).filter((function(t){return"geometry"!==t&&"$HProjGeometry"!==t}));for(f=new Rq(h,f),s=0;s<u;s++){var p=h[s];if(r=p[this.f]){if(delete p[this.f],p=f.zc(s))try{(i=this.a?dr(this,t,e,p,r):er(this,t,p,r.path)).ka(t),l.push(i)}catch(d){this.c(d.message)}}else this.c("Layer must contain geometries")}}}return a[this.a?"spatials":this.g?"markers":"domMarkers"]=l,a},u(gr,R),t("H.service.extension.TileProvider",gr),gr.prototype.c=!1,gr.prototype.getCapabilities=function(){return 192|gr.l.getCapabilities.call(this)},gr.prototype.ib=function(t,e,n,i){return this.c?gr.l.ib.call(this,t,e,n,i):B},gr.prototype.requestTile=gr.prototype.ib,gr.prototype.Kb=function(t){this.dispatchEvent(new td("error",zc(t)?t:t+"",this))},gr.prototype.Vb=function(){return 1===this.a},gr.prototype.providesMarkers=gr.prototype.Vb,gr.prototype.Ub=function(){return 2===this.a},gr.prototype.providesDomMarkers=gr.prototype.Ub,gr.prototype.Hc=function(){return 4===this.a||8===this.a},gr.prototype.providesSpatials=gr.prototype.Hc,gr.prototype.D=function(t,e,n,i){var r=this.getTileKey(t,e,n);r=this.Nb().get(r);var o=2==this.a,s=[],a=ir(this);for(r?r.valid=!0:(delete(t=r=new Lk(t,e,n,y)).j,t.o=i),e=(i=nq(a,r,o?"domMarkers":"markers")).length;e--;)(t=i[e]).Zi=r,(o||1===t.Ab().getState())&&s.push(t);return r.data=s,r},gr.prototype.Gb=function(t){(t=t.target.Zi)&&(t.valid=!1)},gr.prototype.Zo=function(t){this.F=!!t},gr.prototype.setTileCanvasRendering=gr.prototype.Zo,gr.prototype.F=!0,gr.prototype.L=function(t,e,n,i){var r=ir(this),o=this.getTileKey(t,e,n),s=this.tileSize,a=this.Nb().get(o);return a||(delete(t=a=new Pk(o,t,e,n,s,this.$,n,r)).j,t.o=i),this.F?(i=Np.pop(s),a.U(i)||Np.push(i,s)):Vk(a),a},gr.prototype.bc=function(t,e){var n;if(4===this.a||8===this.a){for(n=(t=e.Va()).length;n--;)delete t[n].qf[e.key];e.data&&(Np.push(e.vg(),this.tileSize),e.wg())}else for(n=(t=e.data).length;n--;)delete t[n].Zi},gr.prototype.s=function(){gr.l.s.call(this),ir(this).B()};var jr={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};gr.ResultType=jr;var hr=[1,2,4,8];function Uq(t,e,n){var i=this,r=e&&e.rowFilter,o=n.resultType;Uq.l.constructor.call(this,n),C(t,kr,Uq,0),Tq(e),r?(n=Ua(e)).rowFilter=r.toString():n=Ua(e),delete n.layer,n.layerId=Ze(e.layerId,e.layer),(new Mf).a("pde","H.service.extension.worker.processor"),t=t.C().clone().G(lr+"."+mr).J({meta:1}),new Pf("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===o,serverUrl:t.toString(),layerConfigs:[n],horizontalMargin:1}]}).then((function(){i.c=!0,Uj(i)}),this.Kb)}u(Uq,gr),t("H.service.extension.platformData.TileProvider",Uq),Uq.prototype.m=function(t,e,n){return(t=new cr(t,e,n)).i=nr,t};var nr=new O({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});function or(t){this.a=t}function kr(t){kr.l.constructor.call(this,kr,t)}Uq.prototype.K=function(t,e,n,i,r){var o,s=this,a=this.getTileKey(t,e,n);a=this.Nb().get(a);var l={cancel:hd},c=!0,u=this.a;if(a&&(4===u||8===u?a.ie()||(i(Np.pop(this.tileSize),null),c=!1):(i(y),c=!1)),c){var h=Lp.setTimeout((function(){(o=new Pf("pde",{message:[s.uid,1,[t,e,n]]})).then(i,r)}),500);l.cancel=function(){o?o.cancel():Lp.clearTimeout(h)}}return l},Uq.prototype.requestInternal=Uq.prototype.K,Uq.prototype.s=function(){Uq.l.s.call(this),new Pf("pde",{message:[this.uid,3]})},Uq.ResultType=jr,or.prototype.cancel=function(){for(var t=this.a,e=t.length;e--;)t[e].cancel();t.length=0},u(kr,Bp),t("H.service.extension.platformData.Service",kr),kr.prototype.a=function(){return{subDomain:"s.fleet.ls",path:"1"}},kr.CONFIG_KEY="platformData",kr.prototype.request=function(t,e,n,i,r){return this.T(t,e,n,i,r)},kr.prototype.T=function(t,e,n,i,r){var o="text/plain";if(!t)throw new D(this.request,0,t);if(!e)throw new D(this.request,1,e);if(!i)throw new D(this.request,3,i);if(!r)throw new D(this.request,4,r);return t=this.C().clone().G(t+"."+e).J(n),e===pr.JSON&&(o="application/json"),this.K(t,i,r,o)};var lr="tiles";kr.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:lr,FILE:"file",INDEX:"index"};var mr="json",pr={TXT:"txt",JSON:mr,HTML:"html",BIN:"bin"};function qr(t,e,n){if(!yc(t))throw new D(n,0,"has invalid type");if(!yc(e))throw new D(n,1,"has invalid type");if(t.length!==e.length||!t.length)throw new D(n,1,"specify one key attribute for each given layer id in the same order")}function rr(t){rr.l.constructor.call(this,rr,t)}function sr(t){var e=tr;if(!t||!zc(t.layerId)||tc(t.rowFilter)&&!Ca(t.rowFilter)||tc(t.rowFilterContext)&&!Da(t.rowFilterContext))throw new D(e,1,tc("invalid layer config")?"invalid layer config":t)}function ur(t){return zc(t)&&/^[A-Z][A-Z0-9_]*$/.test(t)}function vr(t){for(var e=t&&t.length,n=2<=e&&"WKT"===t[--e]&&"GEOMETRY_ID"===t[--e];n&&e--;)n=ur(t[e]);return n}function wr(t,e){var n,i,r="",o=[];if(e){if(t.geometries&&t.geometries.length)for(r=r+"Meta:\t"+e+"\n"+(i=Object.keys(t.geometries[0].attributes)).join("\t"),r+="\tWKT\n",n=0;n<t.geometries.length;n++){var s=t.geometries[n].attributes;for(a=t.geometries[n].geometry,e=0;e<i.length;e++)o.push(s[i[e]]);r+=o.join("\t"),r+="\t"+a+"\n",o=[]}}else{var a={};if(o=[],t.geometries)for(i=0;i<t.geometries.length;i++)a[(e=t.geometries[i]).layerId]||(a[e.layerId]=[]),a[e.layerId].push(e);for(n in a)o.push({layerId:n,geometries:a[n]});for(n=0;n<o.length;n++)r+=wr(o[n],o[n].layerId)}return r}function tr(t,e,n){var i,r=this,o=e&&e.rowFilter;tr.l.constructor.call(this,n),C(t,xr,tr,0);var s=n.resultType;if(sr(e),o){var a=Ua(e);a.rowFilter=o.toString()}else a=e;(new Mf).a("cle","H.service.extension.worker.processor");var l=e.layerId;t.request(yr,zr,{detail_level:"all",layer_id:l},(function(e){var n;for(e=e.layers,n=0;n<e.length;n++)if(e[n].layerId===l){a.level=e[n].level;break}i=t.C().clone().G(Ar+"."+zr).J({meta:1}),new Pf("cle",{message:[r.uid,0,{tileSize:r.tileSize,projected:!0,onlyOutline:4===s,serverUrl:i.toString(),layerConfigs:[a],batchTiles:!1,horizontalMargin:1}]}).then((function(){r.c=!0,Uj(r)}),r.Kb)}),(function(t){r.Kb(t.message)}))}function Br(){if(Cr)throw new Xc(Br)}kr.EntryPointType=pr,kr.prototype.tc=function(t,e){var n=e&&e.resultType;return t=new Uq(this,t,e),1==n||2===n?new Cn(t):new ll(t)},kr.prototype.createTileLayer=kr.prototype.tc,kr.prototype.Hd=function(t,e,n,i){var r,o=[],s=e.layer_id||e.layer_ids;return t=this.request(t,mr,e,(function(t){r=new $q(t.geometries,n,i,(function(t){return new Rq([],t.columnNames,t)}),(function(t,e){return t.zc(Sq(t,e))}),{zj:s}),o.push(r)}),(function(t){i(new x.Error(t))})),o.push(t),new or(o)},kr.prototype.Kc=function(t,e,n,i,r,o){function s(t,e){e&&a--,i(t,!a)}var a,l=[];for(qr(t,e,this.Kc),ar(this.Kc,3,i,r),C(n,K,this.Kc,2),n={bbox:n.la+","+n.ca+";"+n.ma+","+n.ia},o&&Wa(n,o),t=n.layer_id?[n.layer_id]:t,o=0,a=t.length;o<a;o++)n.layer_id=t[o],n.key_attribute=e[o],l.push(this.Hd("search/bbox",n,s,r));return new or(l)},kr.prototype.searchByBoundingBox=kr.prototype.Kc,kr.prototype.Xb=function(t,e,n,i,r,o,s){if(qr(t,e,this.Xb),C(n,Xf,this.Xb,2,"has invalid type"),!Cc(i))throw new D(this.Xb,3,"has invalid type");return ar(this.Xb,4,r,o),t={layer_ids:t.join(","),key_attributes:e.join(","),proximity:n.lat+","+n.lng+","+i},s&&Wa(t,s),this.Hd("search/proximity",t,r,o)},kr.prototype.searchByProximity=kr.prototype.Xb,kr.prototype.Wb=function(t,e,n,i,r,o,s){var a="";if(qr(t,e,this.Wb),!zc(n)&&!C(n,L))throw new D(this.Wb,1,"has invalid type");if(!Cc(i))throw new D(this.Wb,2,"has invalid type");if(ar(this.Wb,4,r,o),t={layer_ids:t.join(","),key_attributes:e.join(","),radius:i},zc(n))t.route_id=n;else{for(i=n.X,n=0,e=i.length;n<e;n+=3)a+=i[n]+","+i[n+1],n<e-3&&(a+=";");t.corridor=a}return s&&Wa(t,s),this.Hd("search/corridor",t,r,o)},kr.prototype.searchByCorridor=kr.prototype.Wb,Y.prototype.sn=function(t){return this.Ya(kr,t)},Y.prototype.getPlatformDataService=Y.prototype.sn,u(rr,Bp),t("H.service.extension.geofencing.Service",rr),rr.prototype.a=function(){return{subDomain:"fleet.ls",path:"2"}},rr.CONFIG_KEY="geofencing",rr.prototype.request=function(t,e,n,i){return this.T(t,e,n,i)},rr.prototype.b=function(t){return Error(t.issues&&t.issues.length?t.issues.map((function(t){return t.message})).join(". "):t.message||t.response_code)},rr.prototype.T=function(t,e,n,i){if(!t)throw new D(this.request,0,t);if(!Ca(n))throw new TypeError("onResult must be a function");if(!Ca(i))throw new TypeError("onError must be a function");return t=this.C().clone().G(t+".json").J(e),this.K(t,n,i)},rr.EntryPoint={SEARCH_PROXIMITY:"search/proximity"},Y.prototype.Tm=function(t){return this.Ya(rr,t)},Y.prototype.getGeofencingService=Y.prototype.Tm,t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"}),t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"}),u(tr,gr),t("H.service.extension.customLocation.TileProvider",tr),tr.prototype.m=function(t,e,n){return new cr(t,e,n)},tr.prototype.K=function(t,e,n,i,r){var o,s=this,a=this.getTileKey(t,e,n);a=this.Nb().get(a);var l={cancel:hd},c=!0,u=this.a;if(a&&(4===u||8===u?a.ie()||(i(Np.pop(this.tileSize),null),c=!1):(i(y),c=!1)),c){var h=Lp.setTimeout((function(){(o=new Pf("cle",{message:[s.uid,1,[t,e,n]]})).then(i,r)}),500);l.cancel=function(){o?o.cancel():Lp.clearTimeout(h)}}return l},tr.prototype.requestInternal=tr.prototype.K,tr.prototype.s=function(){tr.l.s.call(this),new Pf("cle",{message:[this.uid,3]})},t("H.service.extension.customLocation.Table",Br);var Cr=!0;function Dr(t,e){var n;Cr=!1;var i=new Br;Cr=!0,i.c=pc(x.JSON.parse(x.JSON.stringify(t))),t=t.columnNames;var r=mc();for(n=t.length;n--;)r[t[n]]=n;if(i.f=r,i.b=t.length,e){if(e.length%t.length)throw new D(Dr,1,"Invalid number of cells")}else e=[];return i.a=e,i}Br.prototype.$d=function(){return this.c},Br.prototype.getMeta=Br.prototype.$d,Br.prototype.ce=function(){return this.a.length/this.b},Br.prototype.getRowCount=Br.prototype.ce,Br.prototype.zc=function(t){return t<this.a.length/this.b?new Er(this,t):B},Br.prototype.getRow=Br.prototype.zc,Br.prototype.Cn=function(){var t,e=this.a.length/this.b,n=new x.Array(e);for(t=0;t<e;t++)n[t]=new Er(this,t);return n},Br.prototype.getRows=Br.prototype.Cn,Br.prototype.Ug=function(t){var e=this.b,n=this.a,i=n.length/this.b;if(!t||t.length%e)throw new D(this.Ug,0,"Invalid number of cells");return this.a=n.concat(t),i},Br.prototype.addCells=Br.prototype.Ug,Br.prototype.Xl=function(){for(var t=this.b,e=this.a,n=this.a.length/this.b;t--;)e.push(y);return this.zc(n)},Br.prototype.addRow=Br.prototype.Xl,Br.prototype.Ua=function(){return this.c.columnNames},Br.prototype.getColumnNames=Br.prototype.Ua,Br.prototype.Se=function(t){return this.f[t]===B?B:new Fr(this,t)},Br.prototype.getColumn=Br.prototype.Se,Br.prototype.ya=function(t,e){return this.a[t*this.b+this.f[e]]},Br.prototype.getCell=Br.prototype.ya,Br.prototype.Lc=function(t,e,n){if(e=this.f[e],t>=this.a.length/this.b)throw new D(this.Lc,0,"Row index out of bounds");if(e===B)throw new D(this.Lc,0,"Column unknown");this.a[t*this.b+e]=n},Br.prototype.setCell=Br.prototype.Lc,Br.prototype.concat=function(t){var e,n=arguments.length,i=""+this.Ua(),r=this.a?this.a.slice():[];for(e=0;e<n;e++){var o=arguments[e];if(!(o instanceof Br))throw new D(this.concat,e);if(""+o.Ua()!==i)throw new D(this.concat,e,"Incompatible columns!");o.a&&(r=r.concat(o.a))}return Dr(this.c,r)},Br.prototype.concat=Br.prototype.concat;var Gr=/(\n|\t|\r|")/;function Hr(t,e,n,i,r,o,s,a){var l;for(l=0;l<s;l++){l&&e.push("\t");var c=n[i*r+o[l]];if(l!==a){if(c!==y){if(c=String(c),Gr.test(c))throw new D(t.Vi,0,'Invalid character (\\n, \\r, \\t, or ") in row '+i+" column "+t.c.columnNames[o[l]]);e.push(c)}}else e.push(c)}}function Fr(t,e){this.b=t,this.a=e}function Er(t,e){this.a=t,this.fi=e}function Ir(t){if(t===B)t="\t";else if(!/^[^"\r\n]$/.test(t))throw new D(Ir,0);this.b=String(t).charCodeAt(0),this.gi=A(this.gi,this),this.A=Jr}Br.prototype.Vi=function(t,e){var n,i=this.b,r=this.Ua(),o=[],s=[],a=this.a,l=-1;for(n=0;n<i;n++)t&&!t.test(r[n])||("WKT"===r[n]&&(l=o.length),o.push(n));if(!(t=o.length))throw new D(this.Vi,1,"No columns filtered");if(Hr(this,s,r,0,i,o,t,l),e){var c=e.length;for(n=0;n<c;n++)s.push("\n"),Hr(this,s,a,r=e[n],i,o,t,l)}else for(c=this.ce(),r=0;r<c;r++)s.push("\n"),Hr(this,s,a,r,i,o,t,l);return s.join("")},Br.Column=Fr,Fr.prototype.ya=function(t){return this.b.ya(t,this.a)},Fr.prototype.getCell=Fr.prototype.ya,Fr.prototype.Lc=function(t,e){this.b.Lc(t,this.a,e)},Fr.prototype.setCell=Fr.prototype.Lc,Br.Row=Er,Er.prototype.Ua=function(){return this.a.Ua()},Er.prototype.getColumnNames=Er.prototype.Ua,Er.prototype.ya=function(t){return this.a.ya(this.fi,t)},Er.prototype.getCell=Er.prototype.ya,Er.prototype.Lc=function(t,e){this.a.Lc(this.fi,t,e)},Er.prototype.setCell=Er.prototype.Lc,Er.prototype.wd=function(){return this.a},Er.prototype.getTable=Er.prototype.wd;var Jr=0;function Kr(t,e,n){var i=t.A;if(i!==e)throw 1===i&&(t.A=Jr),new Xc(n,"Requires state: "+["READY","PARSE","PAUSE"][e]+" but found "+["READY","PARSE","PAUSE"][i])}function Lr(t,e){var n=[];return t.parse(e,(function(t,e,i){return 1>t&&(n[e]=i),0<t})),t.A=Jr,n}function Mr(t,e,n){this.c=new ao(t),this.o=e,this.g=!0,this.Kf=this.j=this.b=0,Nr(this),this.a=n,this.f=[],this.i=!1}function Nr(t){var e=t.c.Sb();t.m=!1,(t.aa=34===e)&&t.c.next()}function Or(t,e){var n=t.c;switch(t.m=!0,e){case t.o:t.b++;break;case 13:n.next(),10!==n.Sb()&&t.a("CR without LF");case 10:t.b=0,t.j++;break;case-1:t.g=!1;break;default:t.a("End of field expected")}return n.next(),-1}function Pr(t,e,n,i){if(i=i||{},!e)throw new D(Pr,1,"has to be a function");if(!n)throw new D(Pr,2,"has to be a function");for(this.c=e,this.g=n,this.a=[],this.i=i.duration||Qr,this.b=A(this.b,this),this.f={},t=t.split("Meta:\t").slice(1),e=0;e<t.length;e++){n=(i=t[e].split("\n"))[0].split("\t")[0],i=i.slice(1).join("\n"),this.Rd[n]=new Ir,this.ei[n]=Lr(this.Rd[n],i);var r={layerId:n,columnNames:this.ei[n]};this.Sh.push(n),this.f[n]=Dr(r),this.Qc[n]=zk(),Rr(this,i,n),this.b(n)}}n=Ir.prototype,n.getState=function(){return this.A},n.abort=function(){Kr(this,2,Ir.prototype.abort),this.A=Jr},n.gi=function(t){throw this.A=Jr,new D(Ir.prototype.parse,0,"Malformed DSV at row "+this.a.j+" column "+this.a.b+": "+t)},n.parse=function(t,e,n){Kr(this,Jr,Ir.prototype.parse),t=t.trim(),this.a=new Mr(t,this.b,this.gi),this.c=e,this.Jk=n||ef,this.A=2,this.resume()},n.Jk=ef,n.resume=function(){var t=this.a,e=[];Kr(this,2,Ir.prototype.resume),this.A=1;do{if(!t.g){this.A=Jr;break}if(r>t.b){if(void 0!==n&&n!==r)return void this.a.a("The number of columns must be the same for all rows");var n=r}var i=t.j,r=t.b,o=t.Kf,s=this.Jk(i,r,t);if(t.Kf>o)for(;-1!==t.next(););else{for(;-1!==(o=t.next());)e.push(o);s=String.fromCharCode.apply(y,e),e.length=0}Nr(t),this.c(i,r,s)&&(this.A=t.g?2:Jr)}while(1===this.A);2!=this.A&&void 0!==n&&0<r&&n!==r&&this.a.a("The number of columns must be the same for all rows")},n=Mr.prototype,n.Kf=0,n.Sb=function(){if(this.m)var t=-1;else{var e=this.c;if(t=e.Sb(),this.aa)switch(t){case 34:e.next(),34!==(t=e.Sb())&&(t=Or(this,t));break;case-1:this.a("Closing quotation mark expected")}else switch(t){case 34:this.a("Unexpected quotation mark");case this.o:case 13:case 10:case-1:t=Or(this,t)}}return t},n.xe=function(){this.i=!0,this.f=[]},n.Sd=function(){var t=this.f.slice();return this.i=!1,this.f=[],t},n.next=function(){var t=this.Sb();return-1!==t&&this.c.next(),this.i&&this.f.push(t),this.Kf++,t};var Qr=100;function Rr(t,e,n){var i=[],r=t.ei[n].length-1,o=t.f[n];try{t.Rd[n].parse(e,(function(e,s,a){var l=!1;return 0<e&&(i[s]=a,s===r&&(t.a.push(o.zc(o.Ug(i))),zk()-t.Qc[n]>t.i&&(l=!0))),l}),(function(t,e,n){if(0<t&&e===r)return Gn(n)}))}catch(s){t.g(s)}}function xr(t){xr.l.constructor.call(this,xr,t)}function Sr(t,e,n,i){var r,o=e[t=t===Tr?"changes":"file"],s=zc(o),a=!s&&C(o,Blob);if(!s&&!a)throw new D(i,0,"Invalid "+t+" parameter");if(Ur)r=a?o:nf(o,"text/plain"),(i=new x.FormData).append(t,r,r.name||t+".wkt"),n.method="POST",n.data=i,delete e[t];else if(a)throw new D(i,0,"Sending Blob data is not supported by the browser")}n=Pr.prototype,n.ei={},n.Sh=[],n.Rd={},n.Qc={},n.Ui={},n.cancel=function(){for(var t in this.Ui)x.clearTimeout(this.Ui[t])},Pr.prototype.cancel=Pr.prototype.cancel,Pr.prototype.b=function(t){var e,n,i=this;this.Ui[t]=x.setTimeout((function(){if(2===i.Rd[t].getState())i.Qc[t]=zk(),i.c(i.a,!1),i.a=[],i.Rd[t].resume(),i.b(t);else{for(e=!0,n=0;n<i.Sh.length;n++)if(i.Rd[i.Sh[n]].getState()!==Jr){e=!1;break}e&&(0<i.a.length&&i.c(i.a,!0),i.a=[])}}),0)},u(xr,Bp),t("H.service.extension.customLocation.Service",xr),xr.prototype.a=function(){return{subDomain:"fleet.ls",path:"2"}},xr.CONFIG_KEY="customLocation",xr.prototype.tc=function(t,e){var n=e&&e.resultType;return t=new tr(this,t,e),1===n||2===n?new Cn(t):new ll(t)},xr.prototype.createTileLayer=xr.prototype.tc;var Ur=x.FormData&&!!x.FormData.prototype.append;xr.prototype.request=function(t,e,n,i,r){return this.T(t,e,n,i,r)},xr.prototype.T=function(t,e,n,i,r){var o="text/plain",s=t===Vr.LAYERS_UPLOAD||t===Vr.LAYERS_MODIFY||t===Vr.LAYERS_IMPORT,a=n,l={data:B,method:"GET",headers:this.ef};if(!t)throw new D(this.request,0,t);if(!e)throw new D(this.request,1,e);ar(this.request,3,i,r),s&&(C(n,Object,this.request,2,"Invalid request parameters"),Sr(t,a=Ua(n),l,this.request));var c=this.C().clone().G(t+"."+e).J(a);return e===Wr.JSON&&(o="application/json"),(t=new rf(o,c.toString(),fe,l)).then((function(t){var e=t.issues;e&&t.error_id&&t.response_code?r(Error(e[0].message)):i(t)}),(function(t){"error"===t.type||404===t.status?r(Error(t.statusText||"Unable to load data")):t.json().then((function(t){r(Error("["+t.issues[0].message+"] "+c+" request failed"))}),(function(){r(Error("["+t.statusText+"] "+c+" request failed"))}))})),t};var yr="layers/list",Tr="layers/modify",Ar="tiled/tile",Vr={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:yr,LAYERS_MODIFY:Tr,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:Ar};xr.EntryPoint=Vr;var zr="json",Wr={TXT:"txt",JSON:zr};xr.EntryPointType=Wr,xr.prototype.sb=function(t,e,n){var i=this;return this.request("search/all","txt",{filter:'WKT==""',layer_id:t},(function(r){var o=r.replace(/[\r\n]+$/g,"").split("\t");i.request(yr,zr,{layer_id:t,detail_level:"all"},(function(t){(t=t.layers[0]).columnNames=o,e(Dr(t))}),n)}),n)},xr.prototype.getLayer=xr.prototype.sb,xr.prototype.ck=function(t,e,n,i){var r=e&&e.length,o=-1,s=this;return function a(){return++o<r?s.request("layers/access/grant",zr,{layer_id:t,granted_app_id:e[o].grantedAppId,permissions:e[o].permissions.join(",")},a,i):s.sb(t,n,i)}()},xr.prototype.grantAccess=xr.prototype.ck,xr.prototype.Bj=function(t,e,n){return this.request("layers/delete",zr,{layer_ids:t},e,n)},xr.prototype.deleteLayer=xr.prototype.Bj,xr.prototype.pd=function(t,e,n){function i(){setTimeout((function(){l.sb(s,(function(t){setTimeout(r.bind(null,t),u)}),(function(){64e3>c?(c+=u,i()):n(x.Error("Timeout"))}))}),u),u*=2}function r(i){var r=JSON.stringify(i.Ua()),o=t.grants;if(r!==JSON.stringify(a)){var c="Results into different column names on the backend: "+r;setTimeout((function(){l.Bj(s,(function(){n(x.Error(c))}),(function(t){n(x.Error(c+". "+t.message))}))}),u)}else o&&o.length?l.ck(s,o,e,n):e(i)}var o,s,a,l=this,c=0,u=1e3,h=!t||!ur(s=t.layerId)&&(o="layerId")||!vr(a=t.columnNames)&&(o="columnNames")?0:Ca(e)?Ca(n)?-1:2:1;if(0<=h)throw new D(l.pd,h,o||arguments[h]);return l.sb(s,(function(){n(x.Error("Layer exists already"))}),(function(){var e={layer_id:s,file:a.join("\t")},r=t.level,o=t.storage;r!==B&&(e.level=r),o!==B&&(e.storage=o),l.request("layers/upload",zr,e,i,n)}))},xr.prototype.createLayer=xr.prototype.pd,xr.prototype.Hd=function(t,e,n,i){var r,o=[];return t=this.request(t,zr,e,(function(t){t.geometries.length?(t=wr(t,e.layer_id),r=new Pr(t,n,i),o.push(r)):n(ff,!0)}),i),o.push(t),new or(o)},xr.prototype.Xb=function(t,e,n,i,r,o){if(!yc(t))throw new D(this.Xb,0,"has invalid type");if(C(e,Xf,this.Xb,1,"has invalid type"),!Cc(n))throw new D(this.Xb,2,"has invalid type");return ar(this.Xb,3,i,r),t={layer_ids:t.join(","),proximity:e.lat+","+e.lng+","+n},o&&Wa(t,o),this.Hd("search/proximity",t,i,r)},xr.prototype.searchByProximity=xr.prototype.Xb,xr.prototype.Wb=function(t,e,n,i,r,o){var s="";if(!yc(t))throw new D(this.Wb,0,"has invalid type");if(!zc(e)&&!C(e,L))throw new D(this.Wb,1,"has invalid type");if(!Cc(n))throw new D(this.Wb,2,"has invalid type");if(ar(this.Wb,3,i,r),t={layer_ids:t.join(","),radius:n},zc(e))t.route_id=e;else{var a=e.X;for(e=0,n=a.length;e<n;e+=3)s+=a[e]+","+a[e+1],e<n-3&&(s+=",");t.corridor=s}return o&&Wa(t,o),this.Hd("search/corridor",t,i,r)},xr.prototype.searchByCorridor=xr.prototype.Wb,xr.prototype.Kc=function(t,e,n,i,r){function o(t,e){e&&s--,n(t,!s)}var s,a=[];if(!yc(t))throw new D(this.Kc,0,"has invalid type");for(C(e,K,this.Kc,1,"has invalid type"),ar(this.Kc,2,n,i),e={bbox:e.la+","+e.ca+";"+e.ma+","+e.ia},r&&Wa(e,r),t=e.layer_id?[e.layer_id]:t,r=0,s=t.length;r<s;r++)e.layer_id=t[r],a.push(this.Hd("search/bbox",e,o,i));return new or(a)},xr.prototype.searchByBoundingBox=xr.prototype.Kc,xr.prototype.Ai=function(t,e,n,i){var r,o=[];if(!zc(t))throw new D(this.Ai,0,"has invalid type");ar(this.Ai,1,e,n);var s={layer_id:t};return i&&Wa(s,i),i=this.request("search/all",zr,s,(function(i){i.geometries.length?(i=wr(i,t),r=new Pr(i,e,n),o.push(r)):e(ff,!0)}),n),o.push(i),new or(o)},xr.prototype.searchAll=xr.prototype.Ai;var Xr={delete:/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};function Yr(t,e,n,i,r,o){function s(){d++,i(this,d===f)}function a(t){d++,r(t,this,d===f)}var l,c="append"!==e,u={},h=mc(),f=0,p=[],d=0;if(!yc(n))throw new D(o,0,n);for(ar(o,1,i,r),l=n.length;l--;){var g=n[l];if(C(g,Er)){var m=g.wd().$d().layerId,v=g.ya("GEOMETRY_ID");if(c){if(v===y||""===String(v))var b='GEOMETRY_ID must not be null or ""';u[v=m+"_"+v]&&(b="same GEOMETRY_ID for multiple rows"),u[v]=g}else v!==y&&""!==String(v)&&(b='GEOMETRY_ID must be null or ""')}else b="Invalid type";if(b)throw new D(o,0,"- Invalid row at index "+l+", "+b);(v=h[m])||(v=h[m]=[],f++),v.push(g)}for(m in h){for(n=[],l=(v=h[m]).length;l--;)n.push(v[l].fi);p.push(t.request(Tr,zr,{layer_id:m,action:e,changes:v[0].wd().Vi(Xr[e]||null,n)},A(s,v),A(a,v)))}return new or(p)}function Zr(t){yq.l.constructor.call(this,Zr,t)}function $r(t){$r.l.constructor.call(this,$r,t)}function as(t){if(this.g=!!t.toBypassToken,!this.g&&!t.token)throw new D(as,0,'"token" must be specified');as.l.constructor.call(this,as,t),this.j=t.token,this.i={},this.f={}}function es(t,e,n,i,r,o,s){return r={method:r,headers:Object.assign(t.g?{}:{authorization:"Bearer "+t.j},{"Content-Type":"application/geo+json"},t.ef)},o&&(r.data=JSON.stringify(o)),(o=new rf("application/json",(e=cs(t.C().clone().G(e+"/features").J(s||{}))).toString(),fe,r)).then(n,Ep(t,e,i)),o}function ds(t,e){return t.g?e:cs(e).J({access_token:t.j})}function cs(t){var e=Object.assign({},t.getQuery());return delete e.apikey,t.Mi(e)}xr.prototype.sj=function(t,e,n){return Yr(this,"append",t,e,n,this.sj)},xr.prototype.appendRows=xr.prototype.sj,xr.prototype.Ll=function(t,e,n){return Yr(this,"update",t,e,n,this.Ll)},xr.prototype.updateRows=xr.prototype.Ll,xr.prototype.Cj=function(t,e,n){return Yr(this,"delete",t,e,n,this.Cj)},xr.prototype.deleteRows=xr.prototype.Cj,Y.prototype.Jm=function(t){return this.Ya(xr,t)},Y.prototype.getCustomLocationService=Y.prototype.Jm,u(Zr,Bp),t("H.service.extension.customRoute.Service",Zr),Zr.prototype.a=function(){return{subDomain:"s.fleet.ls",path:"2"}},Zr.CONFIG_KEY="customRoute",Zr.prototype.b=function(t){return Error(t.issues&&t.issues.length?t.issues.map((function(t){return t.message})).join(". "):t)},Zr.prototype.Nd=function(t,e,n){return ar(this.Nd,1,e,n),t=this.C().clone().G("calculateroute.json").J(t),this.K(t,e,n)},Zr.prototype.calculateRoute=Zr.prototype.Nd,Y.prototype.Km=function(t){return this.Ya(Zr,t)},Y.prototype.getCustomRoutingService=Y.prototype.Km,u($r,Bp),t("H.service.SearchService",$r),$r.CONFIG_KEY="search",$r.prototype.a=function(){return{subDomain:"search",path:"v1"}},$r.prototype.b=function(t){return t=[t.title,t.action,t.cause].filter((function(t){return t})),Error(t.join(". "))},$r.prototype.qh=function(t,e,n){return t=this.C().clone().Sa("geocode").G("geocode").J(t),this.K(t,e,n)},$r.prototype.geocode=$r.prototype.qh,$r.prototype.zi=function(t,e,n){return t=this.C().clone().Sa("revgeocode").G("revgeocode").J(t),this.K(t,e,n)},$r.prototype.reverseGeocode=$r.prototype.zi,$r.prototype.am=function(t,e,n){return t=this.C().clone().Sa("autosuggest").G("autosuggest").J(t),this.K(t,e,n)},$r.prototype.autosuggest=$r.prototype.am,$r.prototype.jm=function(t,e,n){return t=this.C().clone().Sa("discover").G("discover").J(t),this.K(t,e,n)},$r.prototype.discover=$r.prototype.jm,$r.prototype.oo=function(t,e,n){return t=this.C().clone().Sa("lookup").G("lookup").J(t),this.K(t,e,n)},$r.prototype.lookup=$r.prototype.oo,$r.prototype.cm=function(t,e,n){return t=this.C().clone().Sa("browse").G("browse").J(t),this.K(t,e,n)},$r.prototype.browse=$r.prototype.cm,Y.prototype.En=function(t){return this.Ya($r,t)},Y.prototype.getSearchService=Y.prototype.En,u(as,Bp),t("H.service.xyz.Service",as),as.prototype.a=function(){return{host:"xyz.api.here.com",path:"hub/spaces"}},as.prototype.b=function(t){return Error(t.errorMessage||t.message)},as.prototype.Ch=function(t,e,n){return wc(t,"String",this.Ch,0,'"projectId" must be a string'),bs(this.Ch,1,e,n),t=cs(this.C().clone().ue("project-api/projects/"+t)),this.K(t,e,n)},as.prototype.getProject=as.prototype.Ch,as.prototype.Yj=function(t,e,n){return bs(this.Yj,0,t,e),n=ds(this,this.C().clone().J(n||{})),this.K(n,t,e)},as.prototype.getSpaces=as.prototype.Yj,as.prototype.ag=function(t,e,n){return wc(t,"String",this.ag,0,'"spaceId" must be a string'),bs(this.ag,1,e,n),t=ds(this,this.C().clone().G(t)),this.K(t,e,n)},as.prototype.getSpace=as.prototype.ag,as.prototype.de=function(t,e,n){return wc(t,"String",this.de,0,'"spaceId" must be a string'),bs(this.de,1,e,n),t=ds(this,this.C().clone().G(t+"/statistics")),this.K(t,e,n)},as.prototype.getStatistics=as.prototype.de,as.prototype.Wf=function(t,e,n,i,r,o,s){return t=ds(this,this.C().clone().G(i+"/tile/web/"+n+"_"+t+"_"+e+".mvtf").J(Object.assign({clip:!0},s))),this.K(t,(function(t){return t.arrayBuffer().then(r)}),o,"arraybuffer")},as.prototype.search=function(t,e,n,i){return wc(t,"String",this.search,0,'"spaceId" must be a string'),bs(this.search,1,e,n),t=ds(this,this.C().clone().G(t+"/search").J(i||{})),this.K(t,e,n)},as.prototype.search=as.prototype.search,as.prototype.cd=function(t,e,n,i){if(wc(t,"String",this.cd,0,'"spaceId" must be a string'),!Da(e))throw new D(this.cd,1,'"params" must be an object');return bs(this.cd,2,n,i),t=ds(this,this.C().clone().G(t+"/features").J(e)),this.K(t,n,i)},as.prototype.getFeaturesById=as.prototype.cd,as.prototype.Xd=function(t,e,n,i){if(wc(t,"String",this.Xd,0,'"spaceId" must be a string'),!Da(e))throw new D(this.cd,1,'"params" must be an object');return bs(this.Xd,2,n,i),t=ds(this,this.C().clone().G(t+"/bbox").J(e)),this.K(t,n,i)},as.prototype.getFeaturesByBoundingBox=as.prototype.Xd,as.prototype.ta=function(t){var e=this.i[t];return e||(this.f[t]||this.Pe(t),null)},as.prototype.kd=function(t,e,n,i,r){if(wc(t,"String",this.kd,0,'"spaceId" must be a string'),!Da(e))throw new D(this.kd,1,'"geojsonObject" must be an object');if(bs(this.kd,2,n,i),r&&!Da(r))throw new D(this.kd,4,'"opt_params" must be an object');return es(this,t,n,i,"PUT",e,r)},as.prototype.putFeatures=as.prototype.kd,as.prototype.hd=function(t,e,n,i,r){if(wc(t,"String",this.hd,0,'"spaceId" must be a string'),!Da(e))throw new D(this.hd,1,'"featureCollection" must be an object');if(bs(this.hd,2,n,i),r&&!Da(r))throw new D(this.hd,4,'"opt_params" must be an object');return es(this,t,n,i,"POST",e,r)},as.prototype.postFeatures=as.prototype.hd,as.prototype.rd=function(t,e,n,i){if(wc(t,"String",this.rd,0,'"spaceId" must be a string'),!Da(e))throw new D(this.rd,1,'"params" must be an object');return bs(this.rd,2,n,i),es(this,t,n,i,"DELETE",B,e)},as.prototype.deleteFeatures=as.prototype.rd,as.prototype.Pe=function(t){var e=this;this.f[t]=fs,this.ag(t,(function(n){e.f[t]=gs,e.i[t]=n.copyright,e.dispatchEvent("copyrightupdate")}),(function(n){throw e.f[t]=hs,n}))},as.CONFIG_KEY="xyz";var fs=1,gs=2,hs=-1,ks;function bs(t,e,n,i){if(!Ca(n))throw new D(t,e,'"onResult" must be a function');if(!Ca(i))throw new D(t,e+1,'"onError" must be a function')}function is(t,e,n){var i;if(is.l.constructor.call(this,n?{min:n.min,max:n.max}:void 0),C(t,as,is,0),!zc(e))throw new D(is,1,'"spaceId" must be a string');if(this.m=t,this.c=e,this.a={},n&&(["limit","simplificationLevel","tags"].forEach((function(t){t in n&&(this.a[t]=n[t])}),this),t=n.parameters))for(i in t)this.a[i]=t[i];this.Pc(new Sh({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.c},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}))}function js(t){var e;if(t)for(this.a={},e=t.length;e--;)this.a[t[e]]=!0;this.Cl={}}Y.prototype.Rn=function(t){return this.Ya(as,t)},Y.prototype.getXYZService=Y.prototype.Rn,u(is,R),t("H.service.xyz.Provider",is),is.prototype.K=function(t,e,n,i,r){return this.m.Wf(t,e,n,this.c,i,r,this.a)},is.prototype.requestInternal=is.prototype.K,is.prototype.ta=function(){return this.m.ta(this.c)},is.prototype.getCopyrights=is.prototype.ta,is.prototype.ua=function(){return this.tb()},is.prototype.getStyle=is.prototype.ua,is.prototype.oc=function(t){t.b("MVT"),this.Pc(t)},is.prototype.setStyle=is.prototype.oc,t("H.service.buildInfo",(function(){return Ef("H-service","1.27.0","8a5a710")})),js.prototype.a={},js.prototype.parse=function(t,e,n){var i,r,o,s,a;ks=!1;try{n=Lp.JSON.parse(n)}catch(u){ks=!0}if(n&&(i=n.metadata)){var l={spatials:[]};for(r in i)if((n=!this.a[r]&&(o=ls[r]))&&((s=i[r])||(ks=!0,s=void 0),n=s),n)for(n=s.length;n--;){var c;(c=s[n])||(ks=!0,c=void 0),(a=c)&&o(e,t,this,r,a,l)}}else ks=!0;return ks?void 0:l},js.prototype.parse=js.prototype.parse;var ls={"street labels":function(t,e,n,i,r,o){var s;if((s=r.vertices)||(ks=!0,s=void 0),s){var a,l,c=s.length;if((l=0<c)||(ks=!0,l=void 0),l)for(a=Array(c/2);c;){var u=s[--c];l=s[--c],a[c/2]=new I(l,u)}a=a?{a:[a]}:B,c=+r["font size"]/t.$a(),(s=n.Cl[c])||(ms.lineWidth=c,s=n.Cl[c]=n.Qd.Oj(ms)),ns(t,e,a,!1,s,r,i,o)}delete r.vertices},"city center labels":function(t,e,n,i,r,o){ns(t,e,os(r,new qh([])),!0,n.Qd,r,i,o)},labels:function(t,e,n,i,r,o){var s;if((s=r["bounding boxes"])||(ks=!0,s=void 0),s){for(var a,l=s.length,c=new qh([]);l--;){var u;(u=s[l])||(ks=!0,u=void 0),(a=u)&&os(a,c)}ns(t,e,c,!0,n.Qd,r,i,o)}delete r["bounding boxes"]},buildings:function(t,e,n,i,r,o){var s,a,l,c,u=r.id,h=e.xg[u],f=[],p=[];((s=r)||(ks=!0,s=void 0),s&&((a=s.vertices)||(ks=!0,a=void 0),a))&&((c=s.polygons)||(ks=!0,c=void 0),(l=c)&&f.push.apply(f,ps(a,l)),(s=s.outlines)||(ks=!0,s=void 0),(l=s)&&p.push.apply(p,ps(a,l)));l=f.length,f.push.apply(f,p),p=new qh(f,Td,l),(f=f.length)||(ks=!0,f=void 0),f&&(h?(Zq(h,t,[p]),o.spatials.push(h)):(h=ns(t,e,p,!0,n.Qd,r,i,o,u),e.ea(h)))}};ls["transit stops"]=ls.POIs=ls.labels;var qs=["box 2","box 1","annotation box","icon box"];function os(t,e){for(var n,i,r=qs.length;r--;)if(i=t[n=qs[r]]){var o=i[0],s=i[1],a=i[2];i=i[3],e.a.push([new I(o,s),new I(o+a,s),new I(o+a,s+i),new I(o,s+i)]),delete t[n]}return e}function ps(t,e){var n,i,r,o=e.length;if(0<o)for(i=Array(o);o--;)if((n=e[o])||(ks=!0,n=void 0),n){var s=n.length;if(0<s)for(i[o]=r=Array(s);s--;){var a=2*n[s];r[s]=new I(t[a],t[a+1])}}return i||[]}var rs={};function ns(t,e,n,i,r,o,s,a,l){return rs.style=r,i=new Vq(e,i,l,rs),n&&Zq(i,t,[n]),ss(o),o.category=s,i.setData(o),a.spatials.push(i),i.ka(e),i}js.prototype.Qd=new O({strokeColor:"transparent",fillColor:"transparent",lineWidth:0});var ms={};function ss(t){var e,n=!1;switch(typeof t){case"object":if(t instanceof Array)for(e=t.length;e--;)ss(t[e])?n=!0:delete t[e];else if(t)for(e in t)ss(t[e])?n=!0:delete t[e];break;case"number":n=!0;break;default:n=!!t}return n}function ts(t,e,n){e=e||{};var i=(n=n||{}).tileType||"maptile",r=n.scheme||"normal.day";if(R.call(this,{min:0,max:20}),!0===e.pois&&(e.pois="!F"),this.a=e,!(t&&t instanceof us))throw Error("InvalidArgument: service required");this.F=t,this.u=A(this.u,this),this.F.addEventListener("versionupdate",this.u),this.c=t.C().clone().G(i+"/"+t.Ac()+"/"+r).J(this.L).J(e),this.$b=t.Eh()||null,this.$=n.pixelRatio||n.pixelratio||Se(),this.tileSize=n.tileSize||256,this.tileType=i,this.scheme=r,this.m=new lq(new js(n.categoryFilter)),this.m.ka(this),this.D=A(this.D,this),this.m.addEventListener("update",this.D),R.call(this,{min:0,max:20}),this.v(new Dk(n.tileCacheSize||256,A(this.Da,this)))}function us(t){us.l.constructor.call(this,us,t),t=Cp(this,t),this.$b=t.shards,(this.Qa=t.ignoreTypes?null:t.type)&&this.C().Sa(this.Qa),this.ac=t.version,this.ui={},this.Xc=new Yp,"newest"===this.ac&&this.oh()}function vs(t,e){for(var n={},i=t[e+"s"][e],r=i.length;r--;)n[i[r].id]=i[r];t[e+"s"]=n}function ws(t,e,n,i,r){1&r&&xs(t,t,e,n,i,0),2&r&&xs(t,t,e,n,i,1),4&r&&xs(t,t,e,n,i,2),8&r&&xs(t,t,e,n,i,3)}function xs(t,e,n,i,r,o){for(var s,a,l,c,u=(n+1)*(n+1),h=4*i,f=n+1,p=[{r:0,sm:0,bm:0,Sg:0,next:null}],d=1,g=["r","g","b","a"][o],m=2*n+1;d<m;d++)p[d]={r:0,sm:0,bm:0,Sg:0,next:null},p[d-1].next=p[d];p[2*n].next=p[0];var v=4*(i-1);for(s=0;s<r;s++){var y=s*h,b=t[y+o],_=b*f*(n+2)/2;for(m=b*f,d=0;d<=n;d++)p[d][g]=b;var w=0;for(d=1;d<=n;d++){var x=d<i?y+4*d:y+v;_+=(x=t[x+o])*(f-d),w+=x,p[n+d][g]=x}x=p[0],l=p[f],d=y,c=4*f;var k=y+v;for(b=0;b<i;b++){e[d+o]=_/u,_-=m;var S=b+f<i?d+c:k;if(_+=w+=S=t[S+o],m-=x[g],m+=l[g],w-=l[g],x[g]=S,x=x.next,l=l.next,d+=4,!_)for(;(a=4*(b+f))<h&&0===t[y+o+a];)b++,d+=4}}for(y=(r-1)*h,b=0;b<i;b++){for(_=(s=e[(t=4*b)+o])*f*(n+2)/2,m=s*f,d=0;d<=n;d++)p[d][g]=s;for(w=0,d=1;d<=n;d++)_+=(x=e[(x=d<r?t+d*h:t+y)+o])*(n-d+1),w+=x,p[n+d][g]=x;for(x=p[0],l=p[f],d=t,k=f*h,v=t+y,s=0;s<r;s++)if(e[d+o]=_/u,_-=m,_+=w+=S=e[(S=s+f<r?d+k:v)+o],m-=x[g],m+=l[g],w-=l[g],x[g]=S,x=x.next,l=l.next,d+=h,!_)for(;(a=s+f)<r&&0===e[a*h+o+t];)s++,d+=h}}function ys(t,e,n){this.f=e=t>>e,this.j=Math.log(e)*Math.LOG2E,this.i=t=document.createElement("CANVAS"),this.a=t.getContext("2d"),this.b=t.width=t.height=3*e;var i=document.createElement("canvas");t=n.a;var r,o=n.b;for(s in e=[],i.width=256,i.height=1,i=i.getContext("2d"),o)o.hasOwnProperty(s)&&e.push({stop:parseFloat(s),value:o[s]});o=e.length,e.sort(this.o),0<e[0].stop&&e.unshift({stop:0,value:e[0].value}),1>e[o-1].stop&&e.push({stop:1,value:e[o-1].value}),o=e.length;var s=i.createLinearGradient(0,0,256,0);for(r=0;r<o;r++){if(!t&&l){var a=l.stop+(e[r].stop-l.stop)/2;s.addColorStop(a,l.value),s.addColorStop(a,e[r].value)}s.addColorStop(e[r].stop,e[r].value);var l=e[r]}i.fillStyle=s,i.fillRect(0,0,256,1),this.c=i.getImageData(0,0,256,1).data,this.g=n.a}function zs(t,e){this.canvas=t,this.size=e}function As(t,e,n){this.a=t=Yd(t,0,30),this.Qa=e,this.i=n,this.o=[],this.b=[];do{this.b[t]=[],this.o[t]=new Bs}while(t--);e===Cs?(this.m=Ds,this.j=Es):(this.m=Fs,this.j=Gs),this.c=1/0,this.f=-1/0}u(ts,R),t("H.service.metaInfo.TileProvider",ts),ts.prototype.Da=function(t,e){for(var n,i=(t=e.Va()).length;i--;)delete(n=t[i]).qf[e.key],n.release();e.data&&(Np.push(e.vg(),this.tileSize),e.wg())},ts.prototype.D=function(){this.dispatchEvent("update")},ts.prototype.K=function(t,e,n,i,r){var o,s=this.c.clone(),a=this.$b,l=this.tileSize,c=this.getTileKey(t,e,n);if((c=this.Nb().get(c))&&!c.ie()){i(Np.pop(this.tileSize),null);var u={cancel:function(){}}}else{a&&s.Sa(a[(n+e+t)%a.length]),s.G(n+"/"+t+"/"+e+"/"+l+"/png8");var h=Lp.setTimeout((function(){(o=new rf("text/plain",s.toString())).then((function(t){i(null,t)}),r)}),500)}return u||{cancel:function(){o?o.cancel():Lp.clearTimeout(h)}}},ts.prototype.requestInternal=ts.prototype.K,ts.prototype.qd=function(t,e,n,i,r){var o=this.m,s=i||Np.pop(this.tileSize);if(i)(t=this.Nb().get(this.getTileKey(t,e,n))).U(i);else if(delete(i=t=new Pk(this.xd(t,e,n),t,e,n,this.tileSize,this.$,n,o)).j,i.o=r,t.U(s))for(s=(r=t.Va()).length;s--;)r[s].Bg();else Np.push(s,this.tileSize);return t},ts.prototype.createTileInternal=ts.prototype.qd,ts.prototype.B=function(){this.m.B(),this.F.removeEventListener("versionupdate",this.u),R.prototype.B.call(this)},ts.prototype.u=function(){var t=this.F;this.c=t.C().clone().G(this.tileType+"/"+t.Ac()+"/"+this.scheme).J(this.L).J(this.a),this.reload(!1)},ts.prototype.L={metadata:"metaonly",mgen:"2"},u(us,Bp),t("H.service.metaInfo.Service",us),us.prototype.a=function(){return{type:"base",version:"newest",subDomain:"maps.ls",path:"maptile/2.1",shards:["1","2","3","4"]}},us.CONFIG_KEY="metaInfo",us.prototype.Eh=function(){return this.$b},us.prototype.$j=function(){return this.Qa},us.prototype.Ac=function(){return this.ac},us.prototype.getVersion=us.prototype.Ac,us.prototype.Qi=function(t){this.ac=t},us.prototype.ta=function(){return this.Xc},us.prototype.getCopyrights=us.prototype.ta,us.prototype.Yi=function(t){var e;if(vs(t=t.response,"map"),vs(t,"scheme"),vs(t,"tiletype"),vs(t,"format"),vs(t,"resolution"),vs(t,"language"),"newest"===this.ac&&"traffic"!==this.Qa)for(e in t.maps)t.maps[e].hash&&t.maps[e].newest&&(this.Qi(t.maps[e].hash),this.dispatchEvent("versionupdate"));this.Kh=t,this.dispatchEvent("infoupdate")},us.prototype.oh=function(){var t=this,e=this.C().clone().G("info").J({output:"json"});this.$b&&e.Sa(this.$b[0]),this.K(e,(function(e){t.Yi(e)}),(function(t){throw t}))},us.prototype.wh=function(){return this.Kh},us.prototype.getInfo=us.prototype.wh,us.prototype.Ke=function(t,e,n,i,r,o){return new ts(this,i,{tileSize:t,pixelRatio:e,categoryFilter:n,tileType:r,scheme:o})},us.prototype.createTileProvider=us.prototype.Ke,us.prototype.tc=function(t,e,n,i,r,o){return new ll(this.Ke(t,e,n,i,r,o))},us.prototype.createTileLayer=us.prototype.tc,Y.prototype.Sj=function(t){return this.Ya(us,t)},Y.prototype.getMetaInfoService=Y.prototype.Sj,function(){var t=Y.prototype.createDefaultLayers;Y.prototype.createDefaultLayers=function(e,n,i,r,o,s){var a=t.call(this,e,n,i,r,o,s),l={},c=this.Sj();"object"===typeof e&&(e=(s=e).tileSize,n=s.ppi,i=s.lg,r=s.lg2,o=s.style,s=s.pois),e=e||256;var u=320===n?2:1;if(0>[72,250,320,500].indexOf(+n)){if(n!==B)throw new D(this.hh,1,n)}else l.ppi=+n;return i&&(l.lg=i),r&&(l.lg2=r),o&&(l.style=o),s&&(l.pois=s),a.raster.normal.metaInfo=c.tc(e,u,["buildings"],l),a}}(),ys.prototype.o=function(t,e){return t.stop-e.stop};var Hs=Math.log(.5);function Es(t){return this.g?Math.round((t-this.c)/this.g*255):127}function Gs(t){return void 0===this.aa?127:Math.round(255*Math.pow(t,this.aa))}function Is(t,e,n,i,r){var o,s,a=1<<e;return i=Xd(i,a),!(a=0<=n&&n<a&&(o=t.b[e])&&(s=o[n])&&(a=s[i])||null)&&r&&0<=e&&(a=Is(t,e-1,n>>1,i>>1,r)),a}function Js(t,e,n,i,r,o){for(var s,a=[];n<=i;n++)for(s=r;s<=o;s++)a.push(Is(t,e,n,s,!1));return a}function Ks(t,e){var n,i=0,r=0,o=Is(t,0,0,0,!1);return!0===e.c||(e.z===t.a?e.f=e.a:(Ls(t,e,(function(e){var s=Ms(t,e),a=4-s.length;if(e.z!==t.a){for(n=0;n<s.length;n++)i+=s[n].a,r++;i+=a*o.a,r+=a}})),e.f=i/r),e.c=!0),e.f}function Ls(t,e,n){e=[e];for(var i,r;0<e.length;)i=Ms(t,r=e.shift()),n(r),e.push.apply(e,i)}function Ms(t,e){var n,i,r,o=[];for(i=0;1>=i;i++)for(r=0;1>=r;r++)(n=Is(t,e.z+1,2*e.x+i,2*e.y+r,!1))&&o.push(n);return o}function Fs(){this.a=this.b=this.g=0}function Ds(){this.a=this.b=this.g=0,this.c=!1}function Bs(){this.f=this.c=1/0,this.a=this.b=-1/0}function Ns(t,e){var n,i=0;if(!Da(t)||Ta(t))throw new D(Ns,0,t);for(n in t){var r=+n;if(i++,!(Cc(r)&&0<=r&&1>=r&&zc(t[n])))throw new D(Ns,0,t)}if(2>i)throw new D(Ns,0,"Specify at least 2 stops");this.b=t,this.a=!!e}As.prototype.Hb=function(t){var e,n,i=t.value;void 0===i&&(i=1),i>this.f&&(this.f=i,this.g=this.f-this.c),i<this.c&&(this.c=i,this.g=this.f-this.c);var r=Wi.$c(t).scale(1073741823).floor();i=this.a;var o=r.x>>30-i;for(r=r.y>>30-i,n=this.m;-1<i;){this.b[i][r]||(this.b[i][r]=[]),(e=this.b[i][r][o])||(e=this.b[i][r][o]=new n),e.Hb(t,i);var s=this.o[i];s.f>e.b&&(s.f=e.b),s.a<e.b&&(s.a=e.b),s.c>e.a&&(s.c=e.a),s.b<e.a&&(s.b=e.a),i--,o>>=1,r>>=1}},As.prototype.clear=function(){As.call(this,this.a,this.Qa,this.i)},Fs.prototype.Hb=function(t,e){this.g++,this.b+=t.value||1,this.a=this.b/Math.pow(2,2*(30-e))},Ds.prototype.Hb=function(t){t=t.value,this.b+=void 0!==t?t:1,this.a=this.b/++this.g,this.c=!1},t("H.data.heatmap.Colors",Ns);var Os=new Ns({0:"#008",.2:"#0b0",.5:"#ff0",.7:"#f00"},!0);function Ps(t){var e=t||{},n=+e.sampleDepth;t=+e.coarseness;var i=e.colors,r={min:e.min,max:e.max},o=e.tileSize,s=+e.dataMax;if(e.tileSize&&(r.tileSize=o),R.call(this,r),Vj(this,e.opacity),this.Qa="value"===e.type?Cs:Qs,this.sampleDepth_=Cc(n)?Yd(Math.round(n),1,8):4,this.u=!!e.assumeValues,e=this.max,this.F=Cc(s)?Yd(Math.round(s),this.min,e+this.sampleDepth_):e,t=Cc(t)?Yd(Math.round(t),0,3):1,i&&!C(i,Ns))throw new D(Ps,0,"colors");this.a=new As(e+this.sampleDepth_,this.Qa,this.F),this.L=new ys(this.tileSize,t,i||Os),this.m=A(this.m,this),this.c=A(this.c,this),this.D=new xk(20,this.m)}function Rs(t,e,n,i){var r=document.createElement("canvas"),o=t.tileSize,s=r.getContext("2d");r.width=r.height=o;var a,l,c=t.L,u=t.a,h=t.u,f=t.Qa,p=c.f,d=c.a,g=f===Qs?2:1,m=g;t=Math.min(t.sampleDepth_+g,c.j),g=c.b;var v=u.a;if(h&&f===Cs){for(l=-1;1>=l;l++)for(h=-1;1>=h;h++){var y=(y=Is(u,i,n+l,e+h,!0))?u.j(Ks(u,y)):128;d.fillStyle="rgba("+y+",128,0,1)",d.fillRect((h+1)*p,(l+1)*p,p,p)}h=p-Math.floor(p/10),l=3,ws((y=d.getImageData(0,0,g,g)).data,h,g,g,l),d.putImageData(y,0,0)}else d.fillStyle=h?"#080":"#000",d.fillRect(0,0,g,g);for(;m<=t&&i+m<=v;m++){l=p-(h=p>>m);var b=f===Qs?127+Math.floor(128/(1<<t-m)):255;y=2+(1<<m);var _=1<<m,w=e<<m,x=n<<m;for(w=(_=Js(u,i+m,x-1,x+_,w-1,w+_)).length;w--;){x=w%y;var k=w/y<<0;(a=_[w])&&(a=u.j(a.a),d.fillStyle="rgba("+a+","+b+",0,1)",d.fillRect(x*h+l,k*h+l,h,h))}y=d,b=h,_=l,w=p+2*h,h=p+2*h,x=x=3,ws((k=d.getImageData(_,l,w,h)).data,b,w,h,x),y.putImageData(k,_,l)}for(e=d.getImageData(0,0,g,g),n=c.c,i=c.g,t=0,g=(u=e.data).length;t<g;t+=4)f=u[t],m=u[t+1],4===n.length&&(f=0),u[t]=n[4*f],u[t+1]=n[4*f+1],u[t+2]=n[4*f+2],u[t+3]=n[4*f+3]*(i?m/255:10>m?0:1);return d.putImageData(e,0,0),p=(c=new zs(c.i,p)).size,s.drawImage(c.canvas,p,p,p,p,0,0,o,o),r}Ns.DEFAULT=Os,u(Ps,R),t("H.data.heatmap.Provider",Ps),Ps.prototype.nc=function(t){Vj(this,t)},Ps.prototype.setOpacity=Ps.prototype.nc,Ps.prototype.dd=function(){return this.i},Ps.prototype.getOpacity=Ps.prototype.dd,Ps.prototype.lf=df,Ps.prototype.providesRasters=Ps.prototype.lf,Ps.prototype.K=function(t,e,n,i,r){var o,s,a=this.u;if(Is(this.a,0,0,0,!1)){if(!a){var l=Js(this.a,n,e-1,e+1,t-1,t+1);for(o=l.length;o--&&!a;)if(null!==l[o]){a=!0;break}}a&&(s=this.D.push([t,e,n,i,r],this.c))}return a||i(null),s},Ps.prototype.requestInternal=Ps.prototype.K,Ps.prototype.m=function(t,e){t.done(Rs(this,e[0],e[1],e[2]))},Ps.prototype.c=function(t,e,n){var i=t.data;t=i[3],i=i[4],n?i():t(e)},Ps.prototype.rj=function(t,e){var n;if(!yc(t))throw new D(this.rj,0,t);if(n=t.length){for(;n--;)this.a.Hb(t[n]);var i;n=(t=this.a).o;var r=t.a,o=0;if(t.Qa===Qs){var s=n[t.a].a;for(i=t.a;0<=i&&n[i].a===s;i--)o=i;for(s=n[0].a,i=0;i<=o&&s===n[i].a;i++)r=i;o>t.i&&(o=t.i),s=Math.round(r+(o-r)/2),t.aa=Hs/Math.log(n[s].b)}this.reload(!!e)}},Ps.prototype.addData=Ps.prototype.rj,Ps.prototype.clear=function(){this.a.clear(),this.reload(!0)},Ps.prototype.clear=Ps.prototype.clear;var Qs=0,Cs=1;function Ss(){}function Ts(){this.a={4:function(t){return["#",t.charAt(1),t.charAt(1),t.charAt(2),t.charAt(2),t.charAt(3),t.charAt(3),"ff"].join("")},5:function(t){return["#",t.charAt(1),t.charAt(1),t.charAt(2),t.charAt(2),t.charAt(3),t.charAt(3),t.charAt(4),t.charAt(4)].join("")},7:function(t){return t+"ff"},9:function(t){return t}},this.b={4:function(t){return[Us(t.charAt(1)),Us(t.charAt(2)),Us(t.charAt(3)),255]},5:function(t){return[Us(t.charAt(1)),Us(t.charAt(2)),Us(t.charAt(3)),Us(t.charAt(4))]},7:function(t){return[(t=parseInt(t.substring(1),16))>>16&255,t>>8&255,255&t,255]},9:function(t){return[(t=parseInt(t.substring(1),16))>>24&255,t>>16&255,t>>8&255,255&t]}}}function Us(t){return((t=parseInt(t,16))<<4)+t}function Vs(t){return 16>t?"0"+Math.round(t).toString(16):Math.round(t).toString(16)}function Ws(t,e,n){return/^(#|rgb).*/.test(e)?(n||(n="","#"===e.charAt(0)?n=t.a[e.length]?e:"":"rgb"===e.substr(0,3)&&(n=2<(n=(e=e.match(/\d+(\.\d+)?/g)).length)&&5>n?["#",Vs(+e[0]),Vs(+e[1]),Vs(+e[2]),3<n?Vs(255*+e[3]):"ff"].join(""):""),e=n),(t=t.b[e.length](e))[3]=Math.round(t[3]/255*100)/100,t):[0,0,0,255]}function Xs(t){for(var e,n=(t=t.attributes).length;n--;)switch((e=t[n]).name){case"x":this.x=parseFloat(e.value);break;case"y":this.y=parseFloat(e.value);break;case"xunits":this.fd="fraction"===Ss.prototype.Na(e);break;case"yunits":this.Ec="fraction"===Ss.prototype.Na(e)}}function Ys(t){var e=t.childNodes,n=new Ss;for(t=e.length;t--;){var i=e[t];switch(i.nodeName){case"href":this.href=n.Na(i)}}}function Zs(t){var e;if(t){var n=(t=t.childNodes).length;for(e=new Ss;n--;){var i=t[n];switch(i.nodeName){case"scale":this.scale=e.Xf(i);break;case"Icon":this.icon=i=new Ys(i);break;case"hotSpot":this.fk=i=new Xs(i)}}}}function $s(t){for(var e,n=(t=t.childNodes).length,i=new Ss,r=new Ts;n--;)switch((e=t[n]).nodeName){case"color":this.color=i.Vf(e);break;case"colorMode":this.a=i.Na(e)}"random"===this.a&&(this.color="#"+r.Jl(this.color,!1))}function at(t){var e=t.childNodes,n=e.length,i=new Ss;for(this.outline=this.fill=!0,this.Jf=new $s(t);n--;)switch((t=e[n]).nodeName){case"fill":this.fill=i.Ud(t);break;case"outline":this.outline=i.Ud(t)}}function bt(t){var e=t.childNodes,n=e.length,i=new Ss;for(this.Jf=new $s(t);n--;)"width"===(t=e[n]).nodeName&&(this.width=i.Xf(t))}function ct(t){for(var e,n=(t=t.childNodes).length,i=new Ss;n--;)switch((e=t[n]).nodeName){case"bgColor":this.bgColor=i.Vf(e);break;case"textColor":this.textColor=i.Vf(e);break;case"text":this.text=i.Na(e);break;case"displayMode":this.displayMode=i.Na(e)}}function dt(t){var e=t.childNodes,n=e.length;for(this.id=t.getAttribute("id");n--;)switch((t=e[n]).nodeName){case"IconStyle":this.gk=t=new Zs(t);break;case"LineStyle":this.ke=t=new bt(t);break;case"PolyStyle":this.Wk=t=new at(t);break;case"BalloonStyle":this.Ef=t=new ct(t)}}function et(t,e){var n=(t=t.childNodes).length,i=new Ss;for(this.b=e;n--;)switch((e=t[n]).nodeName){case"key":this.key=i.Na(e);break;case"styleUrl":this.a=i.Na(e)}}function ft(t,e){var n=t.childNodes,i=n.length;for(this.b=e,this.id=t.getAttribute("id"),this.a=[];i--;)"Pair"===(t=n[i]).nodeName&&(t=new et(t,this.b),this.a.push(t))}function gt(){this.a={}}function ht(t,e){var n=t&&t.childNodes||[],i=new Ss;if(!t||!e)throw Error("Node or stylesContainer is not defined");for(this.visibility=!0,this.Mo=t,t=n.length;t--;){var r=n[t];switch(r.nodeName){case"name":this.name=i.Na(r);break;case"description":this.description=i.Na(r);break;case"visibility":this.visibility=i.Ud(r);break;case"open":this.open=i.Ud(r);break;case"styleUrl":(this.a=i.Na(r))&&(r=this.a.substr(1),this.qm=e.Fh(r,!1));break;case"Style":this.tk=r=new dt(r)}}}function it(t){for(var e,n=(t=t.childNodes).length,i=null,r=new Ss;n--;)"coordinates"===(e=t[n]).nodeName&&(i=r.Na(e));this.a=null,i&&(this.a=r.ri(i)||null)}function jt(t){for(var e,n=(t=t.childNodes).length,i=new Ss;n--;)if("coordinates"===(e=t[n]).nodeName){e=i.Na(e);var r=[],o=new Ss;try{r=o.Tk(e)}catch(s){r=[]}this.a=2>r.length?[]:r}}function kt(t){for(var e=new L,n=t.a?t.a.length:0;n--;)e.Dd(t.a[n]);return e}function lt(){}function mt(t){var e=t.childNodes,n=e.length;for(this.a=new L,this.c=[];n--;){var i=e[n],r=i.nodeName;if("outerBoundaryIs"===r||"innerBoundaryIs"===r){var o=i.childNodes;for(i=o.length;i--;){var s=o[i];if("LinearRing"===s.nodeName){var a=new jt(s);if("outerBoundaryIs"===r){this.a=kt(a);var l=void 0,c=t,u=a.a;a=new Ss;var h=c.querySelector("altitudeMode");if(h&&h.parentNode===c&&!/^\s*clampTo/.test(a.Na(h))&&u){h=u.length;for(var f=0;f<h&&0!==l;f++){var p=u[f].alt;p?l?p!==l&&(l=0):l=p:l=0}(u=c.querySelector("*|altitudeOffset"))&&u.parentNode===s&&"http://www.google.com/kml/ext/2.2"===u.namespaceURI&&(s=a.Xf(u))&&(l+=s),l&&(l=vd(xi,l),(s=c.querySelector("extrude"))&&s.parentNode===c&&a.Ud(s)?this.b=l:this.f=l)}}else this.c.push(kt(a))}}}}}function nt(t,e){var n=document.createElement("CANVAS");n.width=1,n.height=1,this.i=t,this.b={},this.f={},this.g=new Hj(n),this.c=e||""}function ot(t,e,n){for(var i,r,o=(e=e.childNodes).length,s={};o--;){var a=e[o];switch(a.nodeName){case"Point":i=new it(a),r=pt(t,"Marker"),i=new zn(i.a,r),r.si&&Ce(r.si,"statechange",A(t.j,t,r.si,i,r),!1);break;case"LineString":case"LinearRing":i=new jt(a),r=pt(t,"Polyline"),i=new mh(kt(i),r);break;case"Polygon":i=new mt(a),(r=pt(t,"Polygon")).elevation=i.f,r.extrusion=i.b,i=new wi(new P(i.a,i.c),r);break;case"MultiGeometry":i=ot(t,a,i=new Q)}i&&(t.a.name&&(s.name=t.a.name),t.a.description&&(s.description=t.a.description),r&&r.Ef&&(s.balloonStyle=r.Ef),s.kmlNode=t.a.Mo,i.setData(s),n&&n.ea(i))}return n&&(i=n),i}function pt(t,e){var n=t.a,i={visibility:n.visibility},r=new Ts,o=1,s={x:0,y:0,fd:!1,Ec:!1},a=qt(t,n.qm);switch(n.tk&&(a=qt(t,n.tk,a)),e){case"Marker":if(a&&a.gk){if((r=a.gk).scale&&(o=r.scale),r.fk){var l=r.fk;s={x:l.x,y:l.y,fd:l.fd,Ec:l.Ec}}r.icon&&r.icon.href?(e=r.icon.href,rt.test(e)||(e=t.c+e),r=o+"_"+s.x+s.y+s.fd+s.Ec+"_"+e,(l=t.b[r]||t.f[r])||(l=new Hj(e),t.f[r]=l),0===l.getState()?(i.icon=t.g,i.si=l,i.href=e,i.anchor=s,i.scale=o):1===l.getState()&&(i.icon=l)):1!==o&&(l||(s={x:14,y:4,fd:!1,Ec:!1}),o={size:new Ji((t={w:28*o,h:36*o}).w,t.h),anchor:new I(s.fd?t.w*s.x:s.x*o,s.Ec?t.h*(1-s.y):t.h-s.y*o),hitArea:new Ki(Li.POLYGON,[0*o,16*o,0*o,7*o,8*o,0*o,18*o,0*o,26*o,7*o,26*o,16*o,18*o,34*o,8*o,34*o])},i.icon=new Hj('<svg xmlns="http://www.w3.org/2000/svg" width="28px" height="36px"><path d="M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z" fill="#000" fill-opacity=".2"/><path d="M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z" fill="#fff"/><path d="M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z" fill="#18d"/></svg>',o))}break;case"Polyline":i.style={},a&&a.ke&&(o=a.ke,i.style.strokeColor="rgba("+Ws(r,o.Jf.color,!0)+")",0<=o.width&&(i.style.lineWidth=o.width));break;case"Polygon":i.style={},a&&(a.ke&&(o=a.ke,i.style.strokeColor="rgba("+Ws(r,o.Jf.color,!0)+")",0<=o.width&&(i.style.lineWidth=o.width)),a.Wk&&(o=a.Wk,i.style.fillColor=o.fill?"rgba("+Ws(r,o.Jf.color,!0)+")":"rgba(0,0,0,0)",o.outline||(i.style.lineWidth=0)))}return i.Ef=a.Ef,i}function qt(t,e,n){for(var i in n=n||{},e)e.hasOwnProperty(i)&&(n[i]="object"===typeof e[i]?qt(t,e[i],n[i]):e[i]);return n}t("H.data.utils.Dom",Ss),Ss.prototype.Ud=function(t){return!!t&&/^\s*(1|true)\s*$/i.test(this.Na(t))},Ss.prototype.getBoolean=Ss.prototype.Ud,Ss.prototype.Na=function(t){var e;try{if(t.nodeType===Node.ATTRIBUTE_NODE)return t.value;var n="",i=0,r=t.childNodes;for(e=r.length;i<e;i++)r[i].nodeType!==Node.COMMENT_NODE&&(n+=r[i].nodeValue.replace(/^\s+|\s+$/g,""))}catch(o){}return n||""},Ss.prototype.getString=Ss.prototype.Na,Ss.prototype.Xf=function(t){return parseFloat(this.Na(t))||0},Ss.prototype.getFloat=Ss.prototype.Xf,Ss.prototype.Tk=function(t){var e,n=t.split(/\s+/),i=n.length,r=!(n&&1==i),o=r?1:3,s=[];for(r||(i=(n=t.split(",")).length),e=0;e<i;e+=o){if(!(t=this.ri(r?n[e]:e+3>n.length?null:n.slice(e,e+3))))return[];s.push(t)}return s},Ss.prototype.parseCoords=Ss.prototype.Tk,Ss.prototype.ri=function(t){if(!t)return null;var e=t instanceof Array&&0<t.length&&4>t.length?t:t.split(",");t=parseFloat(e[0]);var n=parseFloat(e[1]);return e=parseFloat(e[2]),isNaN(n)||isNaN(t)?null:new Xf(n,t,isNaN(e)?void 0:e)},Ss.prototype.parseCoord=Ss.prototype.ri,Ss.prototype.Vf=function(t){return t=this.Na(t),/^[0-9a-fA-F]{8}$/.test(t)?"#"+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)+t.substr(0,2):"#000000ff"},Ss.prototype.getColor=Ss.prototype.Vf,t("H.data.utils.ColorHelper",Ts),Ts.prototype.Jl=function(t,e){var n="";if(!/^(#|rgb).*/.test(t)){var i;for(n="",i=0;6>i;i++)n+="ABCDEF0123456789".charAt(Math.floor(16*Math.random()));return n+"ff"}for(t=Ws(this,t,e),e=0;4>e;e++)n+=Vs(i=3>e?Math.floor(Math.random()*(t[e]+1)):255*t[e]);return n},Ts.prototype.toRandomRGBA=Ts.prototype.Jl,t("H.data.kml.HotSpot",Xs),t("H.data.kml.Icon",Ys),t("H.data.kml.IconStyle",Zs),t("H.data.kml.ColorStyle",$s),t("H.data.kml.PolyStyle",at),t("H.data.kml.LineStyle",bt),t("H.data.kml.BalloonStyle",ct),t("H.data.kml.Style",dt),t("H.data.kml.Pair",et),et.prototype.ua=function(){if(this.a){var t="highlight"===this.key;t=this.b.Fh(this.a.substr(1),t)}return t},et.prototype.getStyle=et.prototype.ua,t("H.data.kml.StyleMap",ft),ft.prototype.ua=function(t){var e=null;t=t?"highlight":"normal";for(var n=this.a.length;n--;)this.a[n].key===t&&(e=this.a[n].ua());return e},ft.prototype.getStyle=ft.prototype.ua,t("H.data.kml.StyleContainer",gt),gt.prototype.Wg=function(t){t&&t.id&&(this.a["style_"+t.id]=t)},gt.prototype.addStyle=gt.prototype.Wg,gt.prototype.Fh=function(t,e){return(t=this.a["style_"+t])instanceof ft&&(t=t.ua(e)),t},gt.prototype.getStyleById=gt.prototype.Fh,t("H.data.kml.Feature",ht),t("H.data.kml.Point",it),t("H.data.kml.Line",jt),lt.prototype.f=0,lt.prototype.b=0,u(mt,lt),t("H.data.kml.Polygon",mt),nt.prototype.create=function(t){return this.a=new ht(t,this.i),ot(this,t,null)},nt.prototype.j=function(t,e,n){var i=n.anchor,r=n.scale;n=r+"_"+i.x+i.y+i.fd+i.Ec+"_"+n.href;var o={};if(1===t.getState()){var s=this.b[n];if(!s){var a=i.x,l=i.y;(s=t.Bb())&&(s={w:s.w*r,h:s.h*r},o.size=s),a=i.fd&&s?s.w*a:a*r,l=i.Ec&&s?s.h*(1-l):!i.Ec&&s?s.h-l*r:l*r,o.anchor={x:a,y:l},s=new Hj(t.ad(),o),this.b[n]=s}e.Nc(s)}delete this.f[n]};var rt=/^[^:\/]+:/;function st(t){uc(this,st),this.url=t,this.b=[],this.a=y,this.c=A(this.c,this),F.call(this)}u(st,F),t("H.data.AbstractReader",st);var tt={ERROR:-1,LOADING:0,VISIT:1,READY:2};function ut(t,e,n,i){ut.l.constructor.call(this,e,t),this.state=n,this.message=i}function vt(t){var e=t?t.lastIndexOf("/"):B;this.g=[],st.call(this,t),0<=e&&(this.i=t.substr(0,e)+"/")}function xt(t,e,n){n?n.ea(e):(t.a&&t.a.hc().ea(e),t.b.push(e),t.O(tt.VISIT,e))}function wt(t,e){for(var n,i=t.length,r=[];i--;)(n=t[i]).nodeName===e&&r.push(n);return r}function yt(t,e){this.b=t,this.a=e}function zt(t){return new Xf(t[1],t[0])}function Bt(t){for(var e,n=At(t[0]),i=[],r=1,o=t.length;r<o;r++)e=At(t[r]),i.push(e);return new P(n,i)}function At(t){for(var e=0,n=t.length,i=new L;e<n;e++)i.Dd(zt(t[e]));return i}function Ct(t,e){e=e||{},this.i=e.style||this.Qd,(this.g=!!e.disableLegacyMode)||window.console.warn("H.data.geojson.Reader: Legacy parser is enabled in GeoJSON Reader. Features like Multi-Geometries, Polygon interiors and GeoJSON feature properties might not work as expected. To maximise compatibility with the remote services it is recommended to set the `disableLegacyMode` flag to true."),st.call(this,t)}function Et(t){var e={};if(t.geometry){var n=t.geometry;e.type=n.type,e.properties=t.properties,n.coordinates&&(e.coordinates=n.coordinates),n.geometries&&(e.geometries=n.geometries),t.id&&(e.id=t.id)}return e}function Dt(t,e){t.a&&t.a.hc().ea(e),t.b.push(e),t.O(tt.VISIT,e)}function Ft(t,e,n){this.f=this.c=n,this.ti=[],this.a=0,this.P=dg(t,e,!0)}function Ht(t){var e;nd.call(this),this.a=[],t?Wa(e={},It,t):e=It,this.g=e,nd.call(this)}st.State=tt,st.prototype.f=tt.READY,st.prototype.j={Wl:"statechange"},st.prototype.sb=function(){this.a||(this.a=new N,this.a.hc().dc(this.b));return new ml(this.a)},st.prototype.getLayer=st.prototype.sb,st.prototype.pn=function(){return this.b.concat([])},st.prototype.getParsedObjects=st.prototype.pn,st.prototype.C=function(){return this.url},st.prototype.getUrl=st.prototype.C,st.prototype.$o=function(t){if(this.f===tt.LOADING||this.f===tt.VISIT)throw Error("InvalidState: state "+this.f);return this.b=[],this.a=y,this.url=t,this},st.prototype.setUrl=st.prototype.$o,st.prototype.getState=function(){return this.f},st.prototype.getState=st.prototype.getState,st.prototype.O=function(t,e,n){this.f=t,this.dispatchEvent(new ut(e||this,this.j.Wl,t,n||""))},st.prototype.parse=function(){var t=this;tc(this.url)?(this.O(tt.LOADING),new rf("text/plain",this.url).then((function(e){try{t.c(e)}catch(n){t.O(tt.ERROR,y,n.message)}}),(function(){t.O(tt.ERROR,y,"Error loading file")}))):t.O(tt.ERROR,y,"File url was not set")},st.prototype.parse=st.prototype.parse,u(ut,rd),u(vt,st),t("H.data.kml.Reader",vt),vt.prototype.c=function(t){var e,n=null;if(t&&""!=t.trim()){try{var i=(new DOMParser).parseFromString(t,"text/xml")}catch(a){return void this.O(tt.ERROR,void 0,"Error parsing KML document")}if(i.getElementsByTagName("parsererror").length)this.O(tt.ERROR,void 0,"Error parsing KML document");else if((t=i.childNodes&&"kml"===i.childNodes[0].nodeName?i.childNodes[0]:void 0)&&(e=wt(t.childNodes,"Document")[0]),e=e||t){i=new gt;for(var r=wt(e.childNodes,"Style"),o=wt(e.childNodes,"StyleMap"),s=r.length;s--;)t=new dt(r[s]),i.Wg(t);for(s=o.length;s--;)t=new ft(o[s],i),i.Wg(t);for(this.m=i,this.o=new nt(this.m,this.i),e=(t=e.childNodes).length;e--;)i=n,"Placemark"===(r=t[e]).nodeName?(r=this.o.create(r))&&xt(this,r,i):"Folder"===r.nodeName&&(xt(this,(r={group:new Q,node:r}).group,i),this.g.push(r)),!e&&(i=this.g.shift())&&(t=i.node.childNodes,n=i.group,e=t.length);this.O(tt.READY)}else this.O(tt.ERROR,void 0,"Invalid KML document")}else this.O(tt.ERROR,void 0,"Unable to create objects from the empty data")},yt.prototype.create=function(t,e){var n=t.coordinates;switch(t.type){case"Point":var i=new zn(zt(n));break;case"LineString":i=new mh(At(n));break;case"Polygon":i=new wi(Bt(n));break;case"MultiPoint":var r=0,o=n.length;if(i=[],this.a){for(;r<o;r++)i.push(zt(n[r]));n=new zn(new Ii(i))}else{for(;r<o;r++)i.push(new zn(zt(n[r])));(n=new Q).dc(i)}i=n,o="multiPoint";break;case"MultiLineString":if(r=0,o=n.length,i=[],this.a){for(;r<o;r++)i.push(At(n[r]));n=new mh(new lh(i))}else{for(;r<o;r++)i.push(new mh(At(n[r])));(n=new Q).dc(i)}i=n,o="multiLineString";break;case"MultiPolygon":if(i=[],r=0,o=n.length,this.a){for(;r<o;r++)i.push(Bt(n[r]));n=new wi(new ti(i))}else{for(;r<o;r++)i.push(new wi(Bt(n[r])));(n=new Q).dc(i)}i=n,o="multiPolygon";break;case"GeometryCollection":n=i=new Q,o=0;for(var s=(r=t.geometries).length;o<s;o++)this.create(r[o],n);o="geometryCollection"}return i&&(n=i,r=t.properties,t=t.id,s={},r&&(this.a?s=r:s.properties=r),o&&!this.a&&(s[o]=!0),t&&n.Oi(t),n.setData(s),this.b(i)),e&&i&&e.ea(i),i},yt.prototype.create=yt.prototype.create,u(Ct,st),t("H.data.geojson.Reader",Ct),Ct.prototype.c=function(t){var e,n;try{var i="string"===typeof t?JSON.parse(t):t;if("object"===typeof i){var r=new yt(this.i,this.g);switch(i.type){case"FeatureCollection":if(e=i.features){var o=new Q;for(Dt(this,o),n=0;n<e.length;n++){var s=Et(e[n]);(s=r.create(s))&&o.ea(s)}}break;case"Feature":s=Et(i),(s=r.create(s))&&Dt(this,s);break;default:(s=r.create(i))&&Dt(this,s)}this.O(tt.READY)}else this.O(tt.ERROR,void 0,"Invalid syntax")}catch(a){this.O(tt.ERROR,void 0,"Parse error. "+a.message)}},Ct.prototype.Lo=function(t){this.O(tt.LOADING),this.c(t)},Ct.prototype.parseData=Ct.prototype.Lo,Ct.prototype.Qd=function(){},t("H.data.buildInfo",(function(){return Ef("H-data","1.27.0","abfe236")})),hg.prototype.Tc=ca(1,(function(t,e){this.a.Tc(t,Cc(e)?e:this.c)})),lg.prototype.Tc=ca(0,(function(t,e){var n,i=0;if(!t(this)&&e--)for(;3>=i;i++)(n=this[i])&&n.Tc(t,e)})),t("H.clustering.grid.Cluster",Ft),Ft.prototype.Ee=function(t){this.b||(this.b=Zf(t)),this.a+=t.wt||1,this.ti.push(t)},Ft.prototype.Ba=function(){return this.b},Ft.prototype.getPosition=Ft.prototype.Ba,Ft.prototype.Cc=function(){return this.a},Ft.prototype.getWeight=Ft.prototype.Cc,Ft.prototype.Ad=df,Ft.prototype.isCluster=Ft.prototype.Ad,Ft.prototype.yc=function(){return this.c},Ft.prototype.getMinZoom=Ft.prototype.yc,Ft.prototype.Zf=function(){return this.f},Ft.prototype.getMaxZoom=Ft.prototype.Zf,Ft.prototype.I=function(){return this.P},Ft.prototype.getBoundingBox=Ft.prototype.I,Ft.prototype.ph=function(t){this.Qe(t)},Ft.prototype.forEachEntry=Ft.prototype.ph,Ft.prototype.Qe=function(t){var e=this;if(!Ca(t))throw new D(this.Qe,0,t);this.ti.forEach((function(n){t(new Gt(n,e.c+1))}))},Ft.prototype.forEachDataPoint=Ft.prototype.Qe,u(Ht,nd);var Jt={clusters:[],noisePoints:[]},It={projection:Wi,min:0,max:22,eps:32,minWeight:2};function Gt(t,e){this.a=t,this.b=e}function Kt(t){Ht.call(this,t)}function Lt(t){this.a=t;var e=(t=document.createElement("canvas")).getContext("2d"),n=this.a,i=14*n;t.width=i,t.height=i,e.scale(n,n),e.beginPath(),e.strokeStyle="#FFFFFF",e.fillStyle="#1080DD",e.arc(7,7,6,0,2*Math.PI,!1),e.fill(),e.lineWidth=1,e.stroke(),this.f=new Hj(t,{size:{w:14,h:14},anchor:{x:7,y:7}}),this.b={},this.c={}}function Mt(t,e,n){var i,r=document.createElement("canvas"),o=r.getContext("2d"),s=t.a,a=e*s;return r.width=a,r.height=a,o.scale(s,s),s=e+":"+n,(i=t.b[s])?o.putImageData(i,0,0):(e/=2,o.beginPath(),o.strokeStyle="rgba("+n+",0.2)",o.fillStyle="rgba("+n+",1)",o.arc(e,e,e/5*3,0,2*Math.PI,!1),o.fill(),o.lineWidth=e/5*4,o.stroke(),t.b[s]=o.getImageData(0,0,a,a)),r}function Nt(t){if(Ht.call(this,t),(t=this.g).projection!==Wi)throw new D(Nt,0,"Other projection than mercator not supported yet");this.o=t.projection,this.f=t.eps,this.v=t.minWeight,this.m=new Xi(this.o),(new Mf).a("cluster","H.clustering.dynamicgrid.worker"),this.i=A(this.i,this),this.j=A(this.j,this)}n=Ht.prototype,n.Mc=function(t){this.a=t,this.b=!0},n.Hb=function(t){this.a.push(t),this.b=!0},n.Df=function(t){this.a=this.a.concat(t),this.b=!0},n.mf=function(t){this.a=this.a.filter((function(e){return e!==t})),this.b=!0},n.s=function(){Ht.l.s.call(this),this.a=null},n.nl=hd,t("H.clustering.grid.NoisePoint",Gt),Gt.prototype.Ba=function(){return Zf(this.a)},Gt.prototype.getPosition=Gt.prototype.Ba,Gt.prototype.Cc=function(){return this.a.wt},Gt.prototype.getWeight=Gt.prototype.Cc,Gt.prototype.Ad=ef,Gt.prototype.isCluster=Gt.prototype.Ad,Gt.prototype.yc=function(){return this.b},Gt.prototype.getMinZoom=Gt.prototype.yc,Gt.prototype.getData=function(){return this.a.data},Gt.prototype.getData=Gt.prototype.getData,u(Kt,Ht),Kt.prototype.Si=function(t){var e,n=this.g,i=n.min,r=n.max,o=[],s=[];if(this.b){for(e=this.a;i<=r;i++){for(var a,l,c,u,h,f,p,d,g=void 0,m=i,v=e,y=o,b=s,_=n.eps,w=n.projection,x=n.minWeight,k=v.length,S=Math.pow(2,m+8),A=[];d=v[--k];)if(!d.aj){for(p=S,f=(c=w.$c(d).scale(S).floor()).x,h=c.y,l=A.length;l--;)u=(a=A[l]).Ba(),a.$i||(a.$i=w.$c(u).scale(S).floor()),(u=(u=a.$i).Za(c))<p&&(p=u,g=a);g&&g.I().Pd(d)||(g=new Ft(w.sg({x:(f-_)/S,y:(h-_)/S}),w.sg({x:(f+_)/S,y:(h+_)/S}),m),A.push(g)),g.Ee(d),g=null}for(k=A.length;k--;)if((l=(a=A[k]).Cc())<x)for(l=(a=a.ti).length;d=a[--l];)b.push(new Gt(d,m)),d.aj=!0;else y.push(a)}for(i=0,r=e.length;i<r;i++)delete e[i].aj;this.b=!1,t({clusters:o,noisePoints:s})}},t("H.clustering.theme.Circular",Lt),Lt.prototype.Dm=function(t){var e=t.Cc(),n=this.c[e];if(!n){if(10>e){n=Mt(this,28,"118,209,0");var i={x:11,y:18}}else 25>e?(n=Mt(this,38,"255,105,0"),i={x:13,y:23}):50>e?(n=Mt(this,38,"240,60,0"),i={x:13,y:23}):100>e?(n=Mt(this,38,"181,0,21"),i={x:13,y:23}):1e3>e?(n=Mt(this,48,"181,0,21"),i={x:15,y:28}):(n=Mt(this,66,"181,0,21"),i={x:20,y:38});var r=n.getContext("2d");r.fillStyle="#FFFFFF",r.font="bold 11px Arial",r.fillText(e,i.x,i.y),n=new Hj(n,{size:{w:i=n.width/this.a,h:i},anchor:{x:i/2,y:i/2}}),this.c[e]=n}return(e=new zn(t.Ba(),{icon:n,min:t.yc(),max:t.Zf()})).setData(t),e},Lt.prototype.getClusterPresentation=Lt.prototype.Dm,Lt.prototype.mn=function(t){var e=new zn(t.Ba(),{icon:this.f,min:t.yc()});return e.setData(t),e},Lt.prototype.getNoisePresentation=Lt.prototype.mn,u(Nt,Ht),Nt.prototype.nl=function(t,e){this.aa=t,this.u=yd(e)},Nt.prototype.Si=function(t,e){var n=this.c,i=this.aa,r=this.u||0,o=!n||!(n.zoom===r&&n.b.na(i));if(i&&(this.b||o)){if(n&&3>n.me&&n.cancel(),this.b=!1,(n=this.f)>=128*Dd(2,r))var s=Ot;else{(o=this.m).Pa(r);var a=o.jb(i.Qb());s=o.jb(i.Mb()),a.y-=n,s.y+=n,a=o.jf(a);var l=o.jf(s);s=new K(a.lat,a.lng,l.lat,l.lng),n=o.Ra(n,0).lng+180,s=s.Gc(a.lat,a.lng-n,l.lat,a.lng).Gc(a.lat,l.lng,l.lat,l.lng+n)}for(n=s,s=[],o=(a=this.a).length;o--;)n.Pd(a[o])&&s.push(a[o]);0<s.length?(this.c=new Pt(i,r,s,this.f,this.v,this.o!==Wi,t,e),this.c.then(this.i,this.j)):t(Jt)}},Nt.prototype.i=function(t){Ba(t)||(t=new x.Uint32Array(t)),this.c.g(Qt(this,t))},Nt.prototype.j=function(t){zc(t)&&this.c.c(t)};var Ot=new K(90,-180,-90,180);function Qt(t,e){for(var n=0,i=e[n++],r=Array(i),o=0,s=[],a=e.length,l=t.c.a,c=t.c.zoom;i--;)r[o++]=new Gt(l[e[n++]],c);for(;n<a;){i=e[n++],o=l[e[n]];var u=t.m,h=t.f;u.Pa(t.c.zoom);var f=u.jb(o);for(o=u.Ra(f.x-h,f.y-h),u=u.Ra(f.x+h,f.y+h),o=new Ft((o=new K(o.lat,o.lng,u.lat,u.lng)).Qb(),o.Mb(),c);i--;)o.Ee(l[e[n++]]);s.push(o)}return{clusters:s,noisePoints:r}}function Pt(t,e,n,i,r,o,s,a){this.b=t,this.zoom=e,this.a=n,this.g=s,this.c=a,s=3*(t=n.length),a=new(x.Float64Array||Array)(s);for(var l;t--;)l=n[t],a[--s]=l.lat,a[--s]=l.lng,a[--s]=l.wt;ee.call(this,"cluster",{message:[a,i,r,e,o]},void 0)}function Rt(t,e,n){this.c=t,this.a=e,this.f=n}function St(t,e,n,i){this.c=t,this.a=e,this.j=n,this.m=i,this.g=Ia(this.g,this),this.f=Ia(this.f,this)}function Tt(t,e,n,i,r,o){this.g=e,t&&(this.parent=t,1&e?(n=t[8],r=t[5]):(n=t[7],r=t[8]),2&e?(i=t[9],o=t[6]):(i=t[4],o=t[9])),this[7]=n,this[5]=r,this[8]=(n+r)/2,this[4]=i,this[6]=o,this[9]=(i+o)/2}function Ut(t,e){return t[e]||(++t.le,t[e]=new Tt(t,e))}function Vt(t,e,n,i){var r,o;if(!e(t,i)&&n--)for(++i,r=0;4>r;r++)(o=t[r])&&Vt(o,e,n,i)}function Wt(t){this.b=t||10,this.a=null,Xt(this)}function Xt(t){t.head=t.a=new Tt(null,NaN,0,0,4294967296,4294967296)}function Yt(t,e){var n,i;for(n=0;4>n;n++)(i=e[n])&&(Yt(t,i),delete e[n]);delete e.parent,delete e.entries}function Zt(t,e){var n,i=t.head;if(e){var r=e;if(r!==i)for(i=r;r=r.parent;)(r.entries||1<r.le)&&(i=r)}else for(;!i.entries&&2>(n=i.le)&&n;)i=r;t.head=i}function $t(t,e,n,i,r,o,s){var a=e.entries;if(o)if(e.le)a=$t(t,Ut(e,n>=e[8]|(i>=e[9])<<1),n,i,r,o-1,s);else if(a){var l=Ut(e,(a=a[0])[1]>=e[8]|(a[0]>=e[9])<<1);l.entries=e.entries,l.He=e.He,l.Ie=e.Ie,l.Jb=e.Jb,l.a=e.a,l.f=e.f,l.b=e.b,l.c=e.c,delete e.entries,a.node=l,Zt(t,l),a=$t(t,Ut(e,n>=e[8]|(i>=e[9])<<1),n,i,r,o-1,s)}else o=a=new au(n,i,r,s),(e.entries||(e.entries=[])).push(o),Zt(t,e);else a||Zt(t,e),t=a=new au(n,i,r,s),(e.entries||(e.entries=[])).push(t);return e.He+=n*r,e.Ie+=i*r,e.Jb+=r,e.a===B?(e.a=e.b=n,e.f=e.c=i):(n<e.a?e.a=n:n>e.b&&(e.b=n),i<e.f?e.f=i:i>e.c&&(e.c=i)),a}function au(t,e,n,i){this[0]=e,this[1]=t,this.a=n,this.data=i}function bu(t){Ht.call(this,t),t=this.g,this.j=t.projection,this.m=t.min,this.f=t.max,this.o=t.minWeight,this.c=7-xd(Bd(wd(1,t.eps))/Ld),this.i=new Wt(wd(this.m,this.f+this.c))}function cu(t,e,n,i,r,o,s){var a,l=e.Jb;if(s&&(s.node.Jb!==l?(o.clusters.push(new St(t,s.node,s.depth,n-1)),s=null):r++),s||(l>=t.o?(s={node:e,depth:n},r=n):du(t,e,r+1,o)),e.le&&i--)for(n++,l=0;4>l;l++)(a=e[l])&&(cu(t,a,n,i,r,o,s),s=null);s&&o.clusters.push(new St(t,s.node,s.depth,t.f+t.c))}function du(t,e,n,i){var r;if(e=e.entries){var o=e.length;for(i=i.noisePoints,r=0;r<o;r++)i.push(new Rt(t,e[r],n))}else for(r=0;4>r;r++)(o=t[r])&&du(t,o,n,i)}function eu(t,e,n,i){this.lat=t,this.lng=e,this.wt=n===+n?n:1,this.data=i}function fu(t,e){var n={},i=(e=e||{}).min||0;switch(i={min:i,max:wd(i,e.max||22)},fu.l.constructor.call(this,i),this.Gb=e.pixelRatio||Se(),Wa(n,It,i,e.clusteringOptions||{}),n.minWeight=wd(It.minWeight,n.minWeight),n.strategy){case gu.DYNAMICGRID:if(n.projection!==Wi)throw new D(fu,1,"Unsupported projection");this.a=new Nt(n);break;case gu.GRID:this.a=new Kt(n);break;default:this.a=new bu(n)}this.a.Mc(t),this.F=e.theme||new Lt(this.Gb),this.fa=A(this.fa,this),this.wa=A(this.wa,this),hu(this)}Nt.prototype.s=function(){Nt.l.s.call(this)},u(Pt,Pf),t("H.clustering.fastgrid.NoisePoint",Rt),Rt.prototype.Ba=function(){return this.b||(this.b=this.c.Ra(this.a[1],this.a[0],1)),this.b},Rt.prototype.getPosition=Rt.prototype.Ba,Rt.prototype.Cc=function(){return this.a.a},Rt.prototype.getWeight=Rt.prototype.Cc,Rt.prototype.Ad=ef,Rt.prototype.isCluster=Rt.prototype.Ad,Rt.prototype.yc=function(){return this.f-this.c.c},Rt.prototype.getMinZoom=Rt.prototype.yc,Rt.prototype.getData=function(){return this.a.data},Rt.prototype.getData=Rt.prototype.getData,t("H.clustering.fastgrid.Cluster",St),St.prototype.Ba=function(){return this.b||(this.b=this.c.Ra(this.a.He,this.a.Ie,this.a.Jb)),this.b},St.prototype.getPosition=St.prototype.Ba,St.prototype.Cc=function(){return this.a.Jb},St.prototype.getWeight=St.prototype.Cc,St.prototype.Ad=df,St.prototype.isCluster=St.prototype.Ad,St.prototype.yc=function(){return this.j?this.j-this.c.c:-1/0},St.prototype.getMinZoom=St.prototype.yc,St.prototype.Zf=function(){return this.m-this.c.c},St.prototype.getMaxZoom=St.prototype.Zf,St.prototype.I=function(){return this.P||(this.P=dg(this.c.Ra(this.a.a,this.a.f,1),this.c.Ra(this.a.b,this.a.c,1),!0)),this.P},St.prototype.getBoundingBox=St.prototype.I,St.prototype.ph=function(t){this.i=t,this.a.Tc(this.g,Td)},St.prototype.forEachEntry=St.prototype.ph,St.prototype.g=function(t,e){var n,i,r=!1;if(t.Jb>=this.c.o&&t!==this.a&&t.Jb!==this.a.Jb&&(this.i(new St(this.c,t,0,e)),r=!0),!r&&(n=t.entries))for(t=n.length,i=0;i<t;i++)this.i(new Rt(this.c,n[i],e));return r},St.prototype.Qe=function(t){this.o=t,this.a.Tc(this.f,Td)},St.prototype.forEachDataPoint=St.prototype.Qe,St.prototype.f=function(t,e){var n;if(t=t.entries){var i=t.length;for(n=0;n<i;n++)this.o(new Rt(this.c,t[n],e))}return!1},n=Tt.prototype,n.le=0,n.removeChild=function(t){var e=t.g;this[e]===t&&(delete this[e],delete t.parent,--this.le)},n.Tc=function(t,e){for(var n=0,i=this;i=i.parent;)++n;Vt(this,t,e,n)},n.He=0,n.Ie=0,n.Jb=0,Wt.prototype.Dc=function(t,e,n,i){var r=this.a;if(!(t>=r[7]&&e>=r[4]&&t<=r[5]&&e<=r[6]))throw Error("Coordinates out of bounds");return $t(this,this.a,t,e,n,this.b,i)},Wt.prototype.Tc=function(t,e){Vt(this.a,t,e===+e?e:this.b,0)},u(bu,Ht),n=bu.prototype,n.Mc=function(t){var e,n=0,i=t.length,r=new I(0,0),o=this.j,s=this.i;for(bu.l.Mc.call(this,t),Yt(s,s.a),Xt(s);n<i;n++)o.$c(e=t[n],r).scale(4294967296).floor(),s.Dc(r.x,r.y,e.wt,e.data);this.b=!0},n.Hb=function(t){bu.l.Hb.call(this,t),this.Mc(this.a)},n.Df=function(t){for(var e=t.length,n=bu.l.Hb;e--;)n.call(this,t[e]);this.Mc(this.a)},n.mf=function(t){bu.l.mf.call(this,t),this.Mc(this.a)},n.Ra=function(t,e,n,i){return this.j.Ra(t/n/4294967296,e/n/4294967296,i)},n.Si=function(t){if(this.b){var e={clusters:[],noisePoints:[]};cu(this,this.i.a,0,this.f+this.c,-1/0,e,null),this.b=!1,t(e)}},n.s=function(){bu.l.s.call(this),this.i=null},t("H.clustering.DataPoint",eu),eu.prototype.qk=NaN,eu.prototype.sk=NaN,u(fu,N),t("H.clustering.Provider",fu),fu.prototype.s=function(){fu.l.s.call(this),this.c.pa(),this.a.B(),this.F=this.L=this.a=null,x.clearTimeout(this.$)};var gu={FASTGRID:0,GRID:1,DYNAMICGRID:2};function hu(t,e,n){t.$&&x.clearTimeout(t.$),e&&t.a.nl(e,n),t.$=x.setTimeout(t.fa,150)}function iu(t){var e=t.L.clusters,n=t.L.noisePoints,i=e.length,r=n.length,o=0<i+r;for(t.c.pa();r--;){var s=n[r];t.c.ea(t.F.getNoisePresentation(s))}for(;i--;)n=e[i],t.c.ea(t.F.getClusterPresentation(n));o&&Uj(t)}function ju(t,e){t:{for(var n=t.length,i="string"===typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}fu.Strategy=gu,fu.prototype.fa=function(){this.dispatchEvent("start"),this.a.Si(this.wa,hd)},fu.prototype.wa=function(t){this.dispatchEvent("end"),this.L=t,iu(this)},fu.prototype.Mc=function(t){this.a.Mc(t),hu(this)},fu.prototype.setDataPoints=fu.prototype.Mc,fu.prototype.Hb=function(t){this.a.Hb(t),hu(this)},fu.prototype.addDataPoint=fu.prototype.Hb,fu.prototype.Df=function(t){this.a.Df(t),hu(this)},fu.prototype.addDataPoints=fu.prototype.Df,fu.prototype.mf=function(t){this.a.mf(t),hu(this)},fu.prototype.removeDataPoint=fu.prototype.mf,fu.prototype.Hn=function(){return this.F},fu.prototype.getTheme=fu.prototype.Hn,fu.prototype.Yo=function(t){this.F=t,this.L&&(this.c.pa(),iu(this))},fu.prototype.setTheme=fu.prototype.Yo,fu.prototype.Ub=function(){return!0},fu.prototype.providesDomMarkers=fu.prototype.Ub,fu.prototype.Vb=function(){return!0},fu.prototype.providesMarkers=fu.prototype.Vb,fu.prototype.Hc=function(){return!0},fu.prototype.providesSpatials=fu.prototype.Hc,fu.prototype.tg=function(t,e){hu(this,t,e)},t("H.clustering.buildInfo",(function(){return Ef("H-clustering","1.27.0","74b1698")}));var ku={};function lu(t){var e=t.ownerDocument,n=e.documentElement;e=e.defaultView;var i=t.getBoundingClientRect();return t=i.left,i=i.top,isNaN(e.pageXOffset)?(t+=n.scrollLeft,i+=n.scrollTop):(t+=e.pageXOffset,i+=e.pageYOffset),new I(t,i)}function mu(t,e,n){e=Cc(e)?e+"px":e,n=Cc(n)?n+"px":n,t.style[xf("transform")]="translate("+e+","+n+")"}var nu={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_MIDDLE:"left-middle",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_MIDDLE:"right-middle",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"};function ou(t,e){var n={},i={};n["top-left"]=pu(e,"div",[qu,ru].join(" ")),n["top-center"]=pu(e,"div",[qu,su,tu,ru].join(" ")),n["top-right"]=pu(e,"div",[qu,ru].join(" ")),n["left-top"]=pu(e,"div",[qu,uu].join(" ")),n["left-middle"]=pu(e,"div",[qu,vu,wu,uu].join(" ")),n["left-bottom"]=pu(e,"div",[qu,uu].join(" ")),n["right-top"]=pu(e,"div",[qu,uu].join(" ")),n["right-middle"]=pu(e,"div",[qu,xu,wu,uu].join(" ")),n["right-bottom"]=pu(e,"div",[qu,uu].join(" ")),n["bottom-left"]=pu(e,"div",[qu,ru].join(" ")),n["bottom-center"]=pu(e,"div",[qu,yu,tu,ru].join(" ")),n["bottom-right"]=pu(e,"div",[qu,ru].join(" ")),i["top-left"]=pu(e,"div",[su,vu].join(" ")),i["top-right"]=pu(e,"div",[su,xu].join(" ")),i["bottom-left"]=pu(e,"div",[yu,vu].join(" ")),i["bottom-right"]=pu(e,"div",[yu,xu].join(" ")),zu(i["top-left"],n["top-left"],n["left-top"]),zu(i["top-right"],n["top-right"],n["right-top"]),zu(i["bottom-left"],n["left-bottom"],n["bottom-left"]),zu(i["bottom-right"],n["right-bottom"],n["bottom-right"]),zu(t,i["top-left"],i["top-right"],i["bottom-left"],i["bottom-right"],n["top-center"],n["left-middle"],n["right-middle"],n["bottom-center"]),this.a=n}t("H.ui.LayoutAlignment",nu);var su="H_l_top",yu="H_l_bottom",vu="H_l_left",xu="H_l_right",tu="H_l_center",wu="H_l_middle",ru="H_l_horizontal",uu="H_l_vertical",qu="H_l_anchor";function Au(t,e){e?(e=t.offsetWidth,t.style.marginLeft=-Math.round(.5*e)+"px"):(e=t.offsetHeight,t.style.marginTop=-Math.round(.5*e)+"px")}ou.prototype.update=function(){var t=this.a;Au(t["top-center"],!0),Au(t["bottom-center"],!0),Au(t["left-middle"],!1),Au(t["right-middle"],!1)},ou.prototype.put=function(t,e){t=t?t.N():null;var n=e?this.a[e]:null;t&&n&&(t.parentElement&&t.parentElement.removeChild(t),n.insertBefore(t,/(bottom|right)$/.test(e)||/(center|middle)/.test(e)&&n.childNodes.length%2?n.firstChild:null)),this.update()};var Bu={IMPERIAL:"imperial",METRIC:"metric"};function Cu(){this.a=this.Dj()}t("H.ui.UnitSystem",Bu),Cu.prototype.Dj=function(){var t=Function("return this;")(),e=t.navigator,n=[];return e&&(e.msPointerEnabled?n.push(Du):e.pointerEnabled&&n.push(Eu)),1>n.length&&("TouchEvent"in t&&n.push(Fu),n.push(Gu)),n},Cu.prototype.detectEventSets=Cu.prototype.Dj,Cu.prototype.addEventListener=function(t,e,n,i){for(var r,o=this.a,s=o.length,a=!1;s--;)(r=o[s][e])&&(a=!0,t.addEventListener(r,n,i||!1));a||t.addEventListener(e,n,i||!1)},Cu.prototype.removeEventListener=function(t,e,n,i){for(var r,o=this.a,s=o.length,a=!1;s--;)(r=o[s][e])&&(a=!0,t.removeEventListener(r,n,i||!1));a||t.removeEventListener(e,n,i||!1)};var Eu={start:"pointerdown",end:"pointerup",move:"pointermove",cancel:"pointercancel",over:"pointerover",out:"pointerout",hover:"pointerhover"},Du={start:"MSPointerDown",end:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel",over:"MSPointerOver",out:"MSPointerOut",hover:"MSPointerHover"},Fu={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Gu={start:"mousedown",end:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout",hover:"mousehover"};function pu(t,e,n,i){return t=t.createElement(e),n&&(t.className=n),i&&(t.innerHTML=i),t}function zu(t,e){for(var n=1,i=arguments.length;n<i;n++)t.appendChild(arguments[n])}var Hu=new Cu;function Iu(t,e,n){Hu.addEventListener(t,e,n,void 0)}function Ju(t,e,n){Hu.removeEventListener(t,e,n,void 0)}var Ku=[];t("H.ui.i18n.defaultLocales",Ku);var Lu={},Mu=[];function Nu(t,e){Lu[t]=e,-1===Ku.indexOf(t)&&Ku.push(t),Mu.length?Ou(t,e):Mu=Object.keys(e)}function Ou(t,e){for(var n,i=Mu,r=i.length;r--;)if(!e[n=i[r]])throw Error("'"+n+"' key missing in translation map for "+t)}function Pu(t,e){if(!zc(t))throw new TypeError("string locale code required");if(Da(e))Ou(t,e);else{if(-1===Ku.indexOf(t))throw Error("Default locale '"+t+"' does nto exist.");e=Lu[t]}this.a=e||{},this.b=t}function Z(t,e){F.call(this),this.Qa=t||"div",this.g=e?e.split(" "):[],this.L=!1,this.g.push("H_el")}function Qu(t){(t=t.N())&&t.parentNode&&t.parentNode.removeChild(t)}function Ru(t,e,n){Z.call(this,t,e),this.b=n?n.concat():[]}function Su(t){C(t,Pe,Su,1),Z.call(this,"div","H_context_menu_item"),this.b=t,this.f=A(this.f,this),this.a=A(this.a,this),this.b.addEventListener("update",this.a)}function Uu(t){C(t,Array,Uu,1),Ru.call(this,"div","H_context_menu"),this.f=t,this.a=null}function Vu(t,e){e=e||{};var n=this;Z.call(this,"div","H_ib H_ib_top"),this.v=A((function(t){n.jc()||(n.close(),t.preventDefault())}),this),this.update=A(this.update,this),this.i=A(this.i,this),this.setPosition(t),this.uf(e.content),e.onStateChange&&this.addEventListener("statechange",e.onStateChange),this.O(Wu.OPEN)}Nu("nl-NL",{"layers.normal":"Kaartweergave","layers.satellite":"Satelliet","layers.terrain":"Terrein","layer.transit":"Openbaar vervoer","layer.traffic":"Verkeerssituatie","layer.incidents":"Toon verkeersincidenten","layers.choose":"Weergave kiezen",minimap:"Minimap","scale.switchToImperial":"Overgaan naar mijlen","scale.switchToMetric":"Wijzigen naar km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Uitzoomen","zoom.in":"Inzoomen","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Openbaar vervoer","traffic.MISCELLANEOUS":"Diversen","traffic.ACCIDENT":"Ongeval","traffic.OTHER_NEWS":"Meer informatie","traffic.PLANNED_EVENT":"Geplande afzetting","traffic.ROAD_HAZARD":"Gevaar op de weg","traffic.WEATHER":"Weer","traffic.CONGESTION":"Verkeersopstopping","traffic.CONSTRUCTION":"Wegwerkzaamheden","traffic.DISABLED_VEHICLE":"Voertuig met pech","traffic.from":"Begintijd:","traffic.until":"Geschatte eindtijd:","distance.measurement":"Measure distance"}),Nu("pt-PT",{"layers.normal":"Vista do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transportes p\xfablicos","layer.traffic":"Condi\xe7\xf5es de tr\xe2nsito","layer.incidents":"Mostrar incidentes de tr\xe2nsito","layers.choose":"Escolher vista",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Diminuir","zoom.in":"Aumentar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transportes p\xfablicos","traffic.MISCELLANEOUS":"Diversos","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planeado","traffic.ROAD_HAZARD":"Perigo na estrada","traffic.WEATHER":"Meteorologia","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo avariado","traffic.from":"Hora de in\xedcio:","traffic.until":"Hora de fim prevista:","distance.measurement":"Measure distance"}),Nu("ru-RU",{"layers.normal":"\u0420\u0435\u0436\u0438\u043c \u043a\u0430\u0440\u0442\u044b","layers.satellite":"\u0421\u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432\u0430\u044f","layers.terrain":"\u041c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u044c","layer.transit":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","layer.traffic":"\u0414\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f","layer.incidents":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f","layers.choose":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434",minimap:"Minimap","scale.switchToImperial":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043b\u0438","scale.switchToMetric":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440\u044b","scale.km":"\u043a\u043c","scale.m":"\u043c","scale.mi":"\u043c\u0438\u043b\u044c","scale.ft":"\u0444\u0443\u0442","zoom.out":"\u041e\u0442\u0434\u0430\u043b\u0438\u0442\u044c","zoom.in":"\u041f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u044c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","traffic.MISCELLANEOUS":"\u041f\u0440\u043e\u0447\u0435\u0435 \u0414\u0422\u041f","traffic.ACCIDENT":"\u0414\u0422\u041f","traffic.OTHER_NEWS":"\u0414\u0440\u0443\u0433\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438","traffic.PLANNED_EVENT":"\u041f\u043b\u0430\u043d\u043e\u0432\u043e\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435","traffic.ROAD_HAZARD":"\u0414\u043e\u0440\u043e\u0436\u043d\u0430\u044f \u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","traffic.WEATHER":"\u041f\u043e\u0433\u043e\u0434\u0430","traffic.CONGESTION":"\u041f\u0440\u043e\u0431\u043a\u0430","traffic.CONSTRUCTION":"\u0420\u0435\u043c\u043e\u043d\u0442","traffic.DISABLED_VEHICLE":"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c","traffic.from":"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430:","traffic.until":"\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f:","distance.measurement":"\u0418\u0437\u043c\u0435\u0440\u0438\u0442\u044c \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435"}),Nu("fi-FI",{"layers.normal":"Karttan\xe4kym\xe4","layers.satellite":"Satelliitti","layers.terrain":"Maasto","layer.transit":"Julkinen liikenne","layer.traffic":"Liikenneolosuhteet","layer.incidents":"N\xe4yt\xe4 liikennetapahtumat","layers.choose":"Valitse n\xe4kym\xe4",minimap:"Minimap","scale.switchToImperial":"Vaihda maileihin","scale.switchToMetric":"Vaihda kilometreihin","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Loitonna","zoom.in":"L\xe4henn\xe4","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Julkinen liikenne","traffic.MISCELLANEOUS":"Erittelem\xe4t\xf6n syy","traffic.ACCIDENT":"Onnettomuus","traffic.OTHER_NEWS":"Muu tapahtuma","traffic.PLANNED_EVENT":"Suunniteltu tapahtuma","traffic.ROAD_HAZARD":"Vaara tiell\xe4","traffic.WEATHER":"S\xe4\xe4","traffic.CONGESTION":"Ruuhka","traffic.CONSTRUCTION":"Rakennusty\xf6","traffic.DISABLED_VEHICLE":"Pys\xe4htynyt ajoneuvo","traffic.from":"Alkamisaika:","traffic.until":"Arvioitu p\xe4\xe4ttymisaika:","distance.measurement":"Measure distance"}),Nu("pt-BR",{"layers.normal":"Exibi\xe7\xe3o do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Condi\xe7\xf5es do tr\xe2nsito","layer.incidents":"Mostrar incidentes no tr\xe2nsito","layers.choose":"Escolher exibi\xe7\xe3o",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"milhas","scale.ft":"p\xe9s","zoom.out":"Menos zoom","zoom.in":"Mais zoom","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Miscel\xe2nea","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planejado","traffic.ROAD_HAZARD":"Risco na estrada","traffic.WEATHER":"Clima","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo incapacitado","traffic.from":"Hora de in\xedcio:","traffic.until":"Tempo final estimado:","distance.measurement":"Measure distance"}),Nu("zh-CN",{"layers.normal":"\u5730\u56fe\u89c6\u56fe","layers.satellite":"\u536b\u661f","layers.terrain":"\u5730\u5f62","layer.transit":"\u516c\u5171\u4ea4\u901a","layer.traffic":"\u4ea4\u901a\u60c5\u51b5","layer.incidents":"\u663e\u793a\u4ea4\u901a\u4e8b\u4ef6","layers.choose":"\u9009\u62e9\u89c6\u56fe",minimap:"Minimap","scale.switchToImperial":"\u5207\u6362\u4e3a\u300c\u82f1\u91cc\u300d","scale.switchToMetric":"\u5207\u6362\u4e3a\u300c\u516c\u91cc\u300d","scale.km":"\u516c\u91cc","scale.m":"\u7c73","scale.mi":"\u82f1\u91cc","scale.ft":"\u82f1\u5c3a","zoom.out":"\u7f29\u5c0f","zoom.in":"\u653e\u5927","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u516c\u5171\u4ea4\u901a","traffic.MISCELLANEOUS":"\u7efc\u5408\u4e8b\u4ef6","traffic.ACCIDENT":"\u4ea4\u901a\u610f\u5916","traffic.OTHER_NEWS":"\u5176\u4ed6\u65b0\u95fb","traffic.PLANNED_EVENT":"\u9884\u5b9a\u4e8b\u4ef6","traffic.ROAD_HAZARD":"\u9053\u8def\u5371\u9669","traffic.WEATHER":"\u5929\u6c14","traffic.CONGESTION":"\u5835\u585e","traffic.CONSTRUCTION":"\u65bd\u5de5","traffic.DISABLED_VEHICLE":"\u8f66\u8f86\u629b\u951a","traffic.from":"\u5f00\u59cb\u65f6\u95f4\uff1a","traffic.until":"\u9884\u8ba1\u7ed3\u675f\u65f6\u95f4\uff1a","distance.measurement":"Measure distance"}),Nu("es-ES",{"layers.normal":"Mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Estado del tr\xe1fico","layer.incidents":"Mostrar incidentes de tr\xe1fico","layers.choose":"Elija una vista",minimap:"Minimap","scale.switchToImperial":"Cambiar a millas","scale.switchToMetric":"Cambiar a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Alejar","zoom.in":"Acercar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Varios","traffic.ACCIDENT":"Accidente","traffic.OTHER_NEWS":"M\xe1s noticias","traffic.PLANNED_EVENT":"Acto programado","traffic.ROAD_HAZARD":"Riesgo en carretera","traffic.WEATHER":"Tiempo","traffic.CONGESTION":"Atasco","traffic.CONSTRUCTION":"Construcci\xf3n","traffic.DISABLED_VEHICLE":"Veh\xedculo averiado","traffic.from":"Inicio:","traffic.until":"Finalizaci\xf3n estimada:","distance.measurement":"Measure distance"}),Nu("fr-FR",{"layers.normal":"Carte","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Transports publics","layer.traffic":"Conditions de circulation","layer.incidents":"Afficher les incidents de circulation","layers.choose":"Choisir la vue",minimap:"Minimap","scale.switchToImperial":"Passer en miles","scale.switchToMetric":"Passer en km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom arri\xe8re","zoom.in":"Zoom avant","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transports publics","traffic.MISCELLANEOUS":"Divers","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Autre","traffic.PLANNED_EVENT":"\xc9v\xe9nement pr\xe9vu","traffic.ROAD_HAZARD":"Danger routier","traffic.WEATHER":"M\xe9t\xe9o","traffic.CONGESTION":"Embouteillage","traffic.CONSTRUCTION":"Travaux","traffic.DISABLED_VEHICLE":"V\xe9hicule en panne","traffic.from":"Date ou heure de d\xe9but:","traffic.until":"Date et heure de fin estim\xe9es:","distance.measurement":"Measure distance"}),Nu("pl-PL",{"layers.normal":"Widok mapy","layers.satellite":"Satelita","layers.terrain":"Teren","layer.transit":"Transport publiczny","layer.traffic":"Warunki drogowe","layer.incidents":"Poka\u017c zdarzenia drogowe","layers.choose":"Wybierz widok",minimap:"Minimap","scale.switchToImperial":"Zmie\u0144 na mile","scale.switchToMetric":"Zmie\u0144 na km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Oddal","zoom.in":"Przybli\u017c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transport publiczny","traffic.MISCELLANEOUS":"Inne zdarzenie","traffic.ACCIDENT":"Wypadek","traffic.OTHER_NEWS":"Inne wiadomo\u015bci","traffic.PLANNED_EVENT":"Zdarzenie planowane","traffic.ROAD_HAZARD":"Niebezpiecze\u0144stwo na drodze","traffic.WEATHER":"Pogoda","traffic.CONGESTION":"Korek","traffic.CONSTRUCTION":"Budowa","traffic.DISABLED_VEHICLE":"Uszkodzony pojazd","traffic.from":"Data rozpocz\u0119cia:","traffic.until":"Przybli\u017cona data zako\u0144czenia:","distance.measurement":"Measure distance"}),Nu("de-DE",{"layers.normal":"Kartenansicht","layers.satellite":"Satellit","layers.terrain":"Gel\xe4nde","layer.transit":"\xd6ffentliche Verkehrsmittel","layer.traffic":"Verkehrslage","layer.incidents":"Verkehrsst\xf6rungen anzeigen","layers.choose":"Ansicht ausw\xe4hlen",minimap:"Minimap","scale.switchToImperial":"Umrechnung in Meilen","scale.switchToMetric":"Umrechnung in Kilometer","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Verkleinern","zoom.in":"Vergr\xf6\xdfern","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\xd6ffentliche Verkehrsmittel","traffic.MISCELLANEOUS":"Diverse","traffic.ACCIDENT":"Unfall","traffic.OTHER_NEWS":"Anderes Ereignis","traffic.PLANNED_EVENT":"Geplantes Ereignis","traffic.ROAD_HAZARD":"Verkehrshindernis","traffic.WEATHER":"Wetter","traffic.CONGESTION":"Verkehrsstau","traffic.CONSTRUCTION":"Baustelle","traffic.DISABLED_VEHICLE":"Liegengebliebenes Fahrzeug","traffic.from":"Beginn:","traffic.until":"Voraussichtliches Ende:","distance.measurement":"Measure distance"}),Nu("tr-TR",{"layers.normal":"Harita g\xf6r\xfcn\xfcm\xfc","layers.satellite":"Uydu","layers.terrain":"Arazi","layer.transit":"Toplu ula\u015f\u0131m","layer.traffic":"Trafik durumlar\u0131","layer.incidents":"Trafik olaylar\u0131n\u0131 g\xf6ster","layers.choose":"G\xf6r\xfcn\xfcm se\xe7",minimap:"Minimap","scale.switchToImperial":"Mile d\xf6n\xfc\u015ft\xfcr","scale.switchToMetric":"Kilometreye d\xf6n\xfc\u015ft\xfcr","scale.km":"km","scale.m":"m","scale.mi":"mil","scale.ft":"ft","zoom.out":"Uzakla\u015ft\u0131r","zoom.in":"Yak\u0131nla\u015ft\u0131r","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Toplu ula\u015f\u0131m","traffic.MISCELLANEOUS":"\xc7e\u015fitli","traffic.ACCIDENT":"Kaza","traffic.OTHER_NEWS":"Di\u011fer haberler","traffic.PLANNED_EVENT":"Planl\u0131 etkinlik","traffic.ROAD_HAZARD":"Yol tehlikesi","traffic.WEATHER":"Hava durumu","traffic.CONGESTION":"Yo\u011funluk","traffic.CONSTRUCTION":"Yol \xe7al\u0131\u015fmas\u0131","traffic.DISABLED_VEHICLE":"Ara\xe7 ar\u0131zas\u0131","traffic.from":"Ba\u015flang\u0131\xe7 zaman\u0131:","traffic.until":"Tahmini biti\u015f zaman\u0131:","distance.measurement":"Measure distance"}),Nu("it-IT",{"layers.normal":"Vista mappa","layers.satellite":"Satellite","layers.terrain":"Terreno","layer.transit":"Mezzi pubblici","layer.traffic":"Condizioni del traffico","layer.incidents":"Mostra incidenti stradali","layers.choose":"Scegli vista",minimap:"Minimap","scale.switchToImperial":"Passa a miglia","scale.switchToMetric":"Passa a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom indietro","zoom.in":"Zoom avanti","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Mezzi pubblici","traffic.MISCELLANEOUS":"Varie","traffic.ACCIDENT":"Incidente","traffic.OTHER_NEWS":"Altre notizie","traffic.PLANNED_EVENT":"Evento pianificato","traffic.ROAD_HAZARD":"Strada dissestata","traffic.WEATHER":"Maltempo","traffic.CONGESTION":"Ingorgo","traffic.CONSTRUCTION":"Lavori in corso","traffic.DISABLED_VEHICLE":"Veicolo in panne","traffic.from":"Ora di inizio:","traffic.until":"Ora di fine stimata:","distance.measurement":"Measure distance"}),Nu("en-US",{"layers.normal":"Map view","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Public transport","layer.traffic":"Traffic conditions","layer.incidents":"Show traffic incidents","layers.choose":"Choose view",minimap:"Minimap","scale.switchToImperial":"Change to miles","scale.switchToMetric":"Change to km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom out","zoom.in":"Zoom in","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Public transport","traffic.MISCELLANEOUS":"Miscellaneous","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Other news","traffic.PLANNED_EVENT":"Planned event","traffic.ROAD_HAZARD":"Road hazard","traffic.WEATHER":"Weather","traffic.CONGESTION":"Congestion","traffic.CONSTRUCTION":"Construction","traffic.DISABLED_VEHICLE":"Disabled vehicle","traffic.from":"Start time:","traffic.until":"Estimated end time:","distance.measurement":"Measure distance"}),t("H.ui.i18n.Localization",Pu),Pu.prototype.fn=function(){return this.b},Pu.prototype.getLocale=Pu.prototype.fn,Pu.prototype.$m=function(){return Object.keys(this.a)},Pu.prototype.getKeys=Pu.prototype.$m,Pu.prototype.Jh=function(t){return!(!this.a||!this.a[t])},Pu.prototype.hasKey=Pu.prototype.Jh,Pu.prototype.translate=function(t){var e=this.a[t];if(!zc(e))throw Error("Translation missing for key '"+t+"'.");return e},Pu.prototype.translate=Pu.prototype.translate,u(Z,F),t("H.ui.base.Element",Z),Z.prototype.U=function(t){if(!t)throw Error("Wrong document object");return this.R=pu(t,this.Qa,this.g.join(" ")),this.renderInternal(this.R,t),this.Ca(this.jc(),!0),this.pc(this.$),this.vb(this.c),this.R},Z.prototype.fa=function(){},Z.prototype.S=function(){},Z.prototype.Y=function(){},Z.prototype.renderInternal=Z.prototype.Y,Z.prototype.jc=function(){return this.L},Z.prototype.isDisabled=Z.prototype.jc,Z.prototype.Ca=function(t,e){return((t=!!t)!==this.L||e)&&((this.L=t)?this.La("H_disabled"):this.pb("H_disabled")),this},Z.prototype.setDisabled=Z.prototype.Ca,Z.prototype.F=null,Z.prototype.getData=function(){return this.F},Z.prototype.getData=Z.prototype.getData,Z.prototype.setData=function(t){this.F=t},Z.prototype.setData=Z.prototype.setData,Z.prototype.pc=function(t){var e=this.N();this.$=t,e&&(t?e.setAttribute("title",t):e.removeAttribute("title"))},Z.prototype.setTooltip=Z.prototype.pc,Z.prototype.R=null,Z.prototype.N=function(){return this.R},Z.prototype.getElement=Z.prototype.N,Z.prototype.c=!0,Z.prototype.vb=function(t){var e=this.N();this.c=t,e&&(e.style.display=t?"":"none")},Z.prototype.setVisibility=Z.prototype.vb,Z.prototype.Bc=function(){return this.c},Z.prototype.getVisibility=Z.prototype.Bc,Z.prototype.La=function(t){var e=this.N();return 0>this.g.indexOf(t)&&this.g.push(t),e&&(e.className=this.g.join(" ")),this},Z.prototype.addClass=Z.prototype.La,Z.prototype.pb=function(t){t=this.g.indexOf(t);var e=this.N();return-1<t&&this.g.splice(t,1),e&&(e.className=this.g.join(" ")),this},Z.prototype.removeClass=Z.prototype.pb,Z.prototype.s=function(){Z.l.s.call(this),Qu(this),this.$=this.F=this.R=null},u(Ru,Z),t("H.ui.base.Container",Ru),Ru.prototype.Ca=function(t,e){var n=this.b?this.b.length:0;for(Z.prototype.Ca.call(this,t,e);n--;)this.b[n].Ca(t,e);return this},Ru.prototype.setDisabled=Ru.prototype.Ca,Ru.prototype.Ka=function(t){var e=this.N();return this.b.push(t),e&&(t.U(e.ownerDocument),e.appendChild(t.N())),this},Ru.prototype.addChild=Ru.prototype.Ka,Ru.prototype.uh=function(){return this.b.concat()},Ru.prototype.getChildren=Ru.prototype.uh,Ru.prototype.removeChild=function(t){var e=this.b.indexOf(t),n=this.N();0<=e&&(this.b.splice(e,1),n&&n.removeChild(t.N()))},Ru.prototype.removeChild=Ru.prototype.removeChild,Ru.prototype.pa=function(){var t=this.N();t&&this.b.forEach((function(e){t.removeChild(e.N())})),this.b=[]},Ru.prototype.Y=function(t,e){for(var n=0,i=this.b.length;n<i;n++)t.appendChild(this.b[n].U(e))},Ru.prototype.renderInternal=Ru.prototype.Y,Ru.prototype.s=function(){this.pa(),this.b.forEach(this.sa,this),Z.prototype.s.call(this)},Ru.prototype.sa=function(t){t.B()},u(Su,Z),t("H.ui.context.Item",Su),Su.prototype.f=function(t){var e=this.b,n=e.callback;n&&!e.isDisabled()&&(this.dispatchEvent("click"),n(t))},Su.prototype.Y=function(){var t=this,e=this.N();Be(e,"click",this.f),e.addEventListener("keyup",(function(e){13==e.keyCode&&t.f(e)})),this.a()},Su.prototype.renderInternal=Su.prototype.Y,Su.prototype.a=function(){var t=this.N(),e=this.b;e.callback?(this.La("clickable"),t.setAttribute("tabindex","0")):(this.pb("clickable"),t.removeAttribute("tabindex")),e.isDisabled()?this.La("disabled"):this.pb("disabled"),e=e.getLabel(),Tu.textContent=e,t.innerHTML=Tu.innerHTML.split("\n").join("<br/>")},Su.prototype.s=function(){Z.prototype.s.call(this),this.b.removeEventListener("update",this.a)},u(Uu,Ru),t("H.ui.context.Menu",Uu),Uu.prototype.Y=function(){Ru.prototype.Y.apply(this,arguments),this.f.forEach((function(t){t===Qe?t=new Z("div","H_context_menu_item_separator"):(t=new Su(t)).addEventListener("click",this.i.bind(this)),this.Ka(t)}),this),Be(this.N(),["mousedown","touchstart","pointerdown","wheel"],(function(t){t.stopPropagation()}))},Uu.prototype.renderInternal=Uu.prototype.Y,Uu.prototype.setPosition=function(t,e){if(this.a){var n=this.N(),i=n.offsetWidth,r=n.offsetHeight,o=this.a,s=o.za.width;t+i>s&&t>s/2&&(t-=i),e+r>(o=o.za.height)&&e>o/2&&(e-=r),mu(n,t,e)}},Uu.prototype.setPosition=Uu.prototype.setPosition,Uu.prototype.i=function(){this.a&&this.a.dispatchEvent(new rd("contextmenuclose",this.a))},Uu.prototype.Ia=function(t){this.a=t},Uu.prototype.setMap=Uu.prototype.Ia,u(Vu,Z),t("H.ui.InfoBubble",Vu),Vu.prototype.a=null,Vu.prototype.Ba=function(){return this.b},Vu.prototype.setPosition=function(t){this.b=Zf(t),this.update()},Vu.prototype.setPosition=Vu.prototype.setPosition,Vu.prototype.Ia=function(t){this.a=t},Vu.prototype.Y=function(t,e){this.m=pu(e,"div","H_ib_body"),this.tailEl_=pu(e,"div","H_ib_tail"),this.j=pu(e,"div","H_ib_close H_btn",Xu),this.f=pu(e,"div","H_ib_content","&nbsp;"),this.m.appendChild(this.j),this.m.appendChild(this.f),Iu(this.j,"start",this.v),this.a.b.addEventListener("sync",this.update),this.a.za.addEventListener("sync",this.update),this.a.addEventListener("enginechange",this.i),t.appendChild(this.m),t.appendChild(this.tailEl_),this.uf(this.o)},Vu.prototype.renderInternal=Vu.prototype.Y,Vu.prototype.i=function(){this.u||(this.u=setTimeout(this.update,0))},Vu.prototype.update=function(){var t,e=this.N(),n=this.a,i="none";if(this.u=0,n&&e&&this.getState()===Wu.OPEN){if(t=n.Fa(this.b)){var r=t.x;t=t.y,(r>=-(n=n.za.width)||r<=2*n||t>=-n||t<=2*n)&&(i="",Yu?(e.style.left=r-n+"px",e.style.top=t+"px"):mu(e,r,t))}e.style.display=i,""===i&&(e.style.visibility="visible")}};var Wu={OPEN:"open",CLOSED:"closed"};Vu.State=Wu,Vu.prototype.A=Wu.OPEN,Vu.prototype.getState=function(){return this.A},Vu.prototype.getState=Vu.prototype.getState,Vu.prototype.O=function(t){t!==this.A&&(this.A=t,this.dispatchEvent("statechange")),(t=this.N())&&(this.A===Wu.OPEN?(t.style.display="block",t.style.visibility="hidden",this.i()):t.style.display="none")},Vu.prototype.setState=Vu.prototype.O,Vu.prototype.close=function(){this.O(Wu.CLOSED)},Vu.prototype.close=Vu.prototype.close,Vu.prototype.open=function(){this.O(Wu.OPEN)},Vu.prototype.open=Vu.prototype.open,Vu.prototype.Fm=function(){return this.f||null},Vu.prototype.getContentElement=Vu.prototype.Fm,Vu.prototype.uf=function(t){if(t){if("string"!==typeof t&&("number"!==typeof t.nodeType||"string"!==typeof t.nodeName))throw Error("InfoBubble content must be a string or HTML node.");this.o=t}else this.o=void 0;this.N()&&(this.o?(this.f.innerHTML="","string"===typeof this.o?this.f.innerHTML=t:"number"===typeof t.nodeType&&"string"===typeof t.nodeName&&this.f.appendChild(t)):this.f.innerHTML="&nbsp;",this.i())},Vu.prototype.setContent=Vu.prototype.uf,Vu.prototype.s=function(){this.close(),this.uf(null),this.j&&Ju(this.j,"end",this.v),this.a&&(this.a.b.removeEventListener("sync",this.update),this.a.za.removeEventListener("sync",this.update)),Z.prototype.s.call(this)};var Xu='<svg version="1.1" class="H_icon" viewBox="0 0 12 12"><path d="m8.12 6 3.66-3.66c.29-.29.29-.76 0-1.05l-1.06-1.06c-.29-.29-.76-.29-1.05 0l-3.66 3.66-3.66-3.66c-.29-.29-.76-.29-1.05 0l-1.06 1.06c-.29.29-.3.76 0 1.05l3.66 3.66-3.66 3.66c-.29.29-.29.76 0 1.05l1.06 1.06c.29.29.76.29 1.05 0l3.66-3.66 3.66 3.66c.29.29.76.29 1.05 0l1.06-1.06c.29-.29.3-.76 0-1.05z"></path></svg>';function Zu(t){this.c=t,this.a=this.b=null,this.i=0,this.g=22,this.f=A(this.f,this),(t=this.c.xc()).addEventListener("mapviewchange",this.m,!1,this),(t=t.a).addEventListener("add",this.j,!1,this),t.addEventListener("remove",this.o,!1,this)}function $u(t,e){t.b&&e&&t.b===e.ga()||(t.b&&t.b.removeEventListener("tap",t.f),e?(t.b=e.ga(),t.b.addEventListener("tap",t.f),t.i=t.b.min,t.g=t.b.max):(t.b=null,t.i=0,t.g=22))}function av(t){return window.H.service&&t.ga()instanceof window.H.service.traffic.incidents.Provider}function bv(t,e){var n=t.N(),i=this;F.call(this),this.a=t,this.i=n.ownerDocument,this.f={},this.c=[],new Zu(this),this.R=pu(this.i,"div","H_ui"),this.D=A((function(t){this.m.put(t.target,t.target.Vc)}),this),this.addEventListener("alignmentchange",this.D),this.L=A((function(){this.Kl()}),this),this.addEventListener("toggleunitsystem",this.L),this.R.addEventListener("contextmenu",this.v,!1),this.R.addEventListener("MSHoldVisual",this.v,!1),this.a.addEventListener("contextmenu",this.F,!1,this),this.a.addEventListener("contextmenuclose",this.u,!1,this),this.a.xb(this.B.bind(this)),this.b=null,this.o=-1,this.m=new ou(this.R,this.i),this.g=Bu.METRIC,cv(this,"en-US"),e&&dv(this,e),n.appendChild(this.R),x.setTimeout((function(){i.m.update()}),1)}function cv(t,e){if(zc(e))var n=e;else{if(!(e instanceof Pu))throw Error("The locale parameter must be a string or a H.ui.i18n.Localization object.");n=e.b;var i=e}if(!n)throw Error("No locale was defined.");if(i)t.j=i;else{if(!(0<=Ku.indexOf(n)))throw Error("Locale ["+n+"] is not supported.");t.j=new Pu(n)}}function dv(t,e){var n,i;e.unitSystem&&t.Hg(e.unitSystem),(i=e.locale)&&cv(t,i),(n=e.zoom)&&t.Ld("zoom",new fv(Da(n)?n:null)),(n=e.zoomrectangle)&&t.Ld("zoomrectangle",new gv(Da(n)?n:null)),(n=e.mapsettings)&&t.Ld("mapsettings",new hv(Da(n)?n:null)),(n=e.scalebar)&&t.Ld("scalebar",new iv(Da(n)?n:null)),(n=e.distancemeasurement)&&t.Ld("distancemeasurement",new jv(Da(n)?n:null))}function kv(t,e,n){var i,r=e.raster;if(e=e.vector.normal,t===Al.P2D){if(t=[{label:"layers.normal",layer:r.normal.map},{label:"layers.satellite",layer:r.satellite.map},{label:"layers.terrain",layer:r.terrain.map}],n)for(i in r)if(r[i].map===n){var o=i;break}n=[{label:"layer.incidents",layer:r.normal.trafficincidents},{label:"layer.transit",layer:o&&r[o].transit}]}else t=[{label:"layers.normal",layer:e.map},{label:"layers.satellite",layer:r.satellite.map}],n=[{label:"layer.traffic",layer:e.traffic},{label:"layer.incidents",layer:e.trafficincidents}];return{alignment:"bottom-right",baseLayers:t,layers:n}}function mv(t){t=t||{},Z.call(this,"div","H_btn"),this.Oc(t.label||" "),this.pc(t.tooltip||""),this.setData(t.data),this.Ca(!!t.disabled),this.O(nv.UP,!0),t.onStateChange&&this.addEventListener("statechange",t.onStateChange),this.f=A(this.f,this),this.b=A(this.b,this)}Zu.prototype.m=function(t){var e=t.newValue.zoom;this.a&&t.modifiers&t.ZOOM&&(e<this.i||e>this.g)&&this.a.close()},Zu.prototype.j=function(t){av(t=t.added)&&$u(this,t)},Zu.prototype.o=function(t){av(t.removed)&&(this.a&&this.a.close(),$u(this,null))},Zu.prototype.f=function(t){var e;if(t.target&&(e=t.target.getData())&&0===t.currentPointer.button){this.a||(this.a=new Vu(t.target.ba()),this.a.La("H_tib"),this.c.qj(this.a)),this.a.setPosition(t.target.ba());var n=e.TRAFFIC_ITEM_TYPE_DESC.replace(" ","_");this.c.Aa().Jh("traffic."+n)&&(n=this.c.Aa().translate("traffic."+n)),this.a.uf('<div class="H_tib_content"><div class="H_rdo_title">{{title}}</div><div class="H_tib_desc"><span>{{desc}}</span><div class="H_tib_time"><span class="H_tib_left">{{traffic.from}}</span><span class="H_tib_right">{{from}}</span><br/><span class="H_tib_left">{{traffic.until}}</span><span class="H_tib_right">{{until}}</span></div></div>'.replace("{{title}}",n).replace("{{desc}}",e.TRAFFIC_ITEM_DESCRIPTION[0].value).replace("{{traffic.from}}",this.c.Aa().translate("traffic.from")).replace("{{traffic.until}}",this.c.Aa().translate("traffic.until")).replace("{{from}}",e.START_TIME).replace("{{until}}",e.END_TIME)),this.a.open()}t.stopPropagation()},u(bv,F),t("H.ui.UI",bv),bv.prototype.v=function(t){for(var e=t.target;e&&!/\bH_ib_content\b/.test(e.className);)e=e.parentNode;e||t.preventDefault()},bv.prototype.N=function(){return this.R},bv.prototype.getElement=bv.prototype.N,bv.prototype.xc=function(){return this.a},bv.prototype.getMap=bv.prototype.xc,bv.prototype.Mn=function(){return this.g},bv.prototype.getUnitSystem=bv.prototype.Mn,bv.prototype.Hg=function(t){var e,n=this.f;if(t!==this.g)for(e in this.g=t,n)n[e]instanceof ev&&n[e].onUnitSystemChange(this.g)},bv.prototype.setUnitSystem=bv.prototype.Hg,bv.prototype.Aa=function(){return this.j},bv.prototype.Kl=function(){this.g===Bu.METRIC?this.Hg(Bu.IMPERIAL):this.Hg(Bu.METRIC)},bv.prototype.toggleUnitSystem=bv.prototype.Kl,bv.prototype.qj=function(t){var e=this.c.length,n=this.R;if(0>this.c.indexOf(t)){t.ka(this),t.Ia(this.a);var i=t.U(this.i);e=0<e?this.c[e-1].N().nextSibling:this.R.firstChild,n.insertBefore(i,e),this.c.push(t)}},bv.prototype.addBubble=bv.prototype.qj,bv.prototype.F=function(t){var e=t.items;this.b&&this.u(),clearTimeout(this.o),this.o=x.setTimeout(function(){e.length&&(this.b=new Uu(e),this.R.insertBefore(this.b.U(this.i),this.R.firstChild),this.b.ka(this),this.b.Ia(this.a),this.b.setPosition(t.viewportX,t.viewportY))}.bind(this),0)},bv.prototype.u=function(){this.b&&(this.b.B(),this.b=null)},bv.prototype.No=function(t){var e=this.c.indexOf(t);-1<e&&(t.ka(null),t.Ia(null),this.c.splice(e,1),this.R.removeChild(t.N()))},bv.prototype.removeBubble=bv.prototype.No,bv.prototype.Bm=function(){return this.c},bv.prototype.getBubbles=bv.prototype.Bm,bv.prototype.Ld=function(t,e){if(this.Te(t))throw Error("A control with name ["+t+"] is already registered.");e.ka(this),e.Ia(this.a),e.Da=this.j,e.U(this.i),e.onUnitSystemChange(this.g),this.f[t]=e},bv.prototype.addControl=bv.prototype.Ld,bv.prototype.Po=function(t){var e=this.Te(t);if(!e)throw Error("Control ["+t+"] not found in this UI's controls.");return e.S(),e.ka(null),e.Ia(null),Qu(e),delete this.f[t],e},bv.prototype.removeControl=bv.prototype.Po,bv.prototype.Te=function(t){return this.f[t]},bv.prototype.getControl=bv.prototype.Te,bv.prototype.s=function(){for(var t in this.f)ku.hasOwnProperty.call(this.f,t)&&this.f[t].B();this.c.forEach((function(t){t.B()})),(t=this.R.parentNode)&&t.removeChild(this.R),F.prototype.s.call(this),this.R=null},bv.prototype.capture=function(t,e,n,i){var r=this.Te("scalebar"),o=t.getContext("2d"),s=t.width,a=t.height,l=this.a.o,c=5+(l?l.N().childNodes[1].offsetHeight:0);r&&r.Bc()?r.capture(e,(function(i){o.drawImage(i,s-i.width-5*e,a-i.height-c*e),n(t)}),i):n(t)},bv.prototype.capture=bv.prototype.capture,bv.createDefault=function(t,e,n){var i=t.gc().type;if(n=new bv(t,{unitSystem:Bu.METRIC,zoom:{alignment:"right-bottom"},mapsettings:kv(i,e,t.c),scalebar:{alignment:"bottom-right"},locale:n||"en-US"}),i===Al.P2D){var r=n.Te("mapsettings"),o=function(){if(r.xc()){var n=kv(i,e,t.c);lv(r,n.baseLayers,n.layers)}};t.addEventListener(t.m.Cf,o),n.xb((function(){t.removeEventListener(t.m.Cf,o)})),r.xb((function(){t.removeEventListener(t.m.Cf,o)}))}return n},u(mv,Z),t("H.ui.base.Button",mv),mv.prototype.Ca=function(t,e){return t&&this.pb("H_active"),mv.l.Ca.call(this,t,e)},mv.prototype.Y=function(t){Iu(t,"start",this.f),Iu(t,"end",this.b),Iu(t,"out",this.b),this.Oc(this.We(),!0)},mv.prototype.renderInternal=mv.prototype.Y,mv.prototype.getState=function(){return this.A},mv.prototype.getState=mv.prototype.getState,mv.prototype.O=function(t,e){return t!==this.A&&(this.A=t,t===nv.DOWN?this.La("H_active"):this.pb("H_active"),e||this.dispatchEvent("statechange")),this},mv.prototype.setState=mv.prototype.O,mv.prototype.We=function(){return this.a},mv.prototype.getLabel=mv.prototype.We,mv.prototype.Oc=function(t,e){return(e||t!==this.a)&&(this.a=t,(e=this.N())&&(e.innerHTML=t)),this},mv.prototype.setLabel=mv.prototype.Oc,mv.prototype.f=function(t){this.jc()||this.O(nv.DOWN),t.preventDefault()},mv.prototype.b=function(t){this.jc()||this.O(nv.UP),t.preventDefault()},mv.prototype.s=function(){var t=this.N();t&&(Ju(t,"start",this.f),Ju(t,"end",this.b),Ju(t,"out",this.b)),Z.prototype.s.call(this)};var nv={UP:"up",DOWN:"down"};function ov(t){var e;t=t||{},this.f=!!t.vertical,this.sa=t.length||"16em",this.a=Cc(e=t.min)?e:0,this.o=wd(this.a,Cc(e=t.max)?e:100),this.wa=E(e=t.step)?1:e,this.m=pv(this,Cc(e=t.value)?e:(this.a+this.o)/2),this.pg=A(this.pg,this),this.kg=A(this.kg,this),this.rg=A(this.rg,this),this.qg=A(this.qg,this),this.b=t.pointerArea,Z.call(this,"div","H_slider"+(this.f?"":" H_l_horizontal"))}function qv(t){t.u||(Iu(t.N(),"start",t.pg),Iu(t.b,"move",t.kg),Iu(t.b,"end",t.rg),Iu(t.b,"out",t.qg),t.u=!0)}function rv(t){t.u&&(Ju(t.N(),"start",t.pg),Ju(t.b,"move",t.kg),Ju(t.b,"end",t.rg),Ju(t.b,"out",t.qg),t.u=!1)}function pv(t,e){var n=t.wa;return e=Yd(e,t.a,t.o),n?t.a+xd((e-t.a)/n)*n:e}function sv(t,e){var n=t.D,i=t.f;t.v||(t.v=n["offset"+(i?"Height":"Width")]),0>(e-=lu(n)[i?"y":"x"])&&(e=0),e=(t.o-t.a)*e/t.v,e=pv(t,i?t.o-e:t.a+e),t.m!==e&&(t.Ig(e,!0),t.dispatchEvent(new Ng(t.Fk.nd,e,t.m)))}function tv(t,e){return(e.touches?e.targetTouches[0]:e)["page"+(t.f?"Y":"X")]}function uv(t){var e=!1,n=t.type;return-1!==n.indexOf("pointer")||-1!==n.indexOf("touch")?e=!0:C(t,MouseEvent)&&(e=1===t.which||1===t.buttons),e}function vv(t){var e=t.touches;return e&&1===e.length||C(t,MouseEvent)}mv.State=nv,u(ov,Z),t("H.ui.base.Slider",ov),ov.prototype.Ig=function(t,e){var n=this.f,i=n?"top":"left";return this.i&&!e||(t=Yd(t,this.a,this.o),this.j&&(n=(n?-1:1)*(e=100*(t-this.a)/(this.o-this.a)),this.j.style[i]=n+"%",this.Da.style[i]=100+n+"%"),this.m=pv(this,t)),this.m},ov.prototype.setValue=ov.prototype.Ig,ov.prototype.Nn=function(){return this.m},ov.prototype.getValue=ov.prototype.Nn,n=ov.prototype,n.pg=function(t){var e=this.f;if(uv(t)&&vv(t)){var n=tv(this,t),i=t.target;i===this.j||i.parentElement===this.j?(this.V=n-lu(this.j)[e?"y":"x"]-this.j.offsetWidth/2,this.N().className="H_slider H_slider_active"+(this.f?"":" H_l_horizontal"),this.i=!0):sv(this,n),t.preventDefault()}},n.rg=function(){this.i&&(this.N().className="H_slider "+(this.f?"":" H_l_horizontal"),this.i=!1)},n.qg=function(t){this.i&&t.target===this.b&&(this.i=!1)},n.kg=function(t){this.i&&vv(t)&&(uv(t)?(sv(this,tv(this,t)-this.V),t.preventDefault()):this.i=!1)},n.Fk={nd:"change"},n.Y=function(t,e){var n=pu(e,"div","H_slider_cont"),i=pu(e,"div","H_slider_knob_cont"),r=pu(e,"div","H_slider_knob"),o=pu(e,"div","H_slider_knob_halo"),s=pu(e,"div","H_slider_track");e=pu(e,"div","H_slider_track H_slider_track_active"),t.appendChild(n),n.appendChild(s),s.appendChild(e),n.appendChild(i),i.appendChild(r),i.appendChild(o),this.D=s,this.Da=e,this.j=i,this.b||(this.b=t.ownerDocument.body),n.style[this.f?"height":"width"]=this.sa,this.Ig(this.m),qv(this)},ov.prototype.renderInternal=ov.prototype.Y,ov.prototype.s=function(){rv(this)},ov.prototype.Ca=function(t,e){return t?rv(this):this.D&&qv(this),Z.prototype.Ca.call(this,t,e)},ov.prototype.setDisabled=ov.prototype.Ca;var wv={in:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="m5 10.6h5.6v-5.6h2.8v5.6h5.6v2.8h-5.6v5.6h-2.8v-5.6h-5.6v-2.8z"></path></g></svg>',out:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path d="m5 10.6h14v2.8h-14z"/></svg>'};function ev(){Ru.call(this,"div","H_ctl"),this.map=null,this.Vc="top-left"}function fv(t){var e=(t=t||{}).slider;ev.call(this),this.m=A(this.m,this),this.i=A(this.i,this),this.a=A(this.a,this),e&&(this.v=A(this.v,this),this.D=e,this.Ja=t.sliderSnaps,this.La("H_zoom_slider")),this.j=new mv({label:wv.in,onStateChange:this.m}),this.u=new mv({label:wv.out,onStateChange:this.m}),this.La("H_zoom"),this.La("H_grp"),this.wa=!1!==t.fractionalZoom,this.setZoomSpeed(t.zoomSpeed||4),this.Yb(t.alignment||"right-middle")}function xv(t){t.removeChild(t.f),t.f=null,t.o&&(t.o.removeEventListener("minchange",t.a),t.o.removeEventListener("maxchange",t.a),t.o=null)}u(ev,Ru),t("H.ui.Control",ev),ev.prototype.Ia=function(t){this.map=t},ev.prototype.U=function(t){return Ru.prototype.U.call(this,t)},ev.prototype.Y=function(t,e){Ru.prototype.renderInternal.call(this,t,e),this.Yb(this.Vc)},ev.prototype.renderInternal=ev.prototype.Y,ev.prototype.hf=function(){},ev.prototype.onUnitSystemChange=ev.prototype.hf,ev.prototype.xc=function(){return this.map},ev.prototype.getMap=ev.prototype.xc,ev.prototype.Aa=function(){return this.Da},ev.prototype.getLocalization=ev.prototype.Aa,ev.prototype.wm=function(){return this.Vc},ev.prototype.getAlignment=ev.prototype.wm,ev.prototype.Yb=function(t){return"string"===typeof t&&nu[t.replace("-","_").toUpperCase()]===t&&(this.Vc=t,this.dispatchEvent("alignmentchange")),this},ev.prototype.setAlignment=ev.prototype.Yb,u(fv,ev),t("H.ui.ZoomControl",fv),fv.prototype.Sn=function(){return this.V},fv.prototype.getZoomSpeed=fv.prototype.Sn,fv.prototype.ap=function(t){this.V=t},fv.prototype.setZoomSpeed=fv.prototype.ap,fv.prototype.Ia=function(t){this.map!==t&&(this.map&&this.map.removeEventListener("mapviewchange",this.i),xv(this)),ev.prototype.Ia.apply(this,arguments),this.map&&(this.a(),t.addEventListener("mapviewchange",this.i),t.addEventListener("baselayerchange",this.a))},fv.prototype.setMap=fv.prototype.Ia,fv.prototype.s=function(){ev.prototype.s.apply(this,arguments),this.map.removeEventListener("baselayerchange",this.a),xv(this)},fv.prototype.Y=function(t,e){ev.prototype.renderInternal.call(this,t,e),this.j.pc(this.Aa().translate("zoom.in")),this.u.pc(this.Aa().translate("zoom.out"))},fv.prototype.renderInternal=fv.prototype.Y,fv.prototype.Yb=function(t){var e=this.Vc;return ev.prototype.Yb.call(this,t),e!==t&&this.a(),this},fv.prototype.setAlignment=fv.prototype.Yb,fv.prototype.i=function(){var t=this.map,e=t.ub(),n=t.$a()-1;t=t.c||t.gc().getCapabilities().lookAt.zoom,this.D&&this.f.Ig(e),this.jc()||(this.j.Ca(e+n>=t.max),this.u.Ca(e<=t.min))},fv.prototype.Ca=function(t,e){return fv.l.Ca.call(this,t,e),this.i(),this},fv.prototype.setDisabled=fv.prototype.Ca,fv.prototype.m=function(t){var e,n=(t=t.target)===this.j?1:-1,i=0<n?Math.ceil:Math.floor,r=this.map,o=this;r&&("down"===t.getState()?(r.b.startControl(),r.b.control(0,0,n*this.V,0,0,0)):r.b.endControl(!0,(function(t){e=o.wa?t.zoom:i(t.zoom),t.zoom=e})))},fv.prototype.v=function(t){this.map&&this.map.wf(t.newValue)},fv.prototype.a=function(){var t=this.Vc,e=this.xc();if(/^top/g.test(t)||/^bottom/g.test(t)){var n=this.u;t=this.j;var i=!1}else n=this.j,t=this.u,i=!0;if(this.removeChild(n),this.removeChild(t),this.Ka(n),this.D&&e){xv(this),e=i;var r=(i=(n=this.map)&&n.c)||n.gc().getCapabilities().lookAt.zoom;(this.o=i)&&(i.addEventListener("minchange",this.a),i.addEventListener("maxchange",this.a)),this.f=new ov({step:this.Ja?1:0,vertical:e,min:r.min,max:r.max,value:n.ub(),pointerArea:n.N()}),this.f.addEventListener(this.f.Fk.nd,this.v),this.Ka(this.f)}this.Ka(t)};var yv={btn:'<svg class="H_icon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><g transform="translate(3 2)"><path d="m18 13v7h-18v-7h2v5h2v-2h2v2h2v-3h2v3h2v-2h2v2h2v-5z"></path><path d="m2.3.3c.7 0 1.3.1 1.8.4s.9.6 1.1 1 .4.9.4 1.4c0 .5-.1 1-.3 1.4s-.57 1-1 1.6-1.3 1.3-2.3 2.2h3.9l-.2 1.7h-6.16v-1.6c1.1-1.1 2-2 2.5-2.6s.9-1 1-1.4.3-.8.3-1.2c0-.4-.1-.7-.3-.9s-.5-.3-.9-.3c-.3 0-.6 0-.9.2s-.5.4-.8.7l-1.3-1c.4-.5.9-.9 1.4-1.2s1.2-.4 1.8-.4zm14.4 9.7h-2.3l-.2-3.8c 0-.9-.1-1.7-.1-2.4 0-.5 0-1 0-1.5l-1.5 6.7h-2.2l-1.6-6.7c.1.8.1 1.6.1 2.3 0 .5 0 1.1 0 1.7l-.2 3.8h-2.2l.7-9.7h2.9l1.5 6.6 1.4-6.6h2.9z"></path></g></g></svg>',point:'<svg height="22" viewBox="0 0 12 12" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m6 12c3.3 0 6-2.7 6-6s-2.7-6-6-6-6 2.7-6 6 2.7 6 6 6z" fill="#fff"></path><path d="m6 10c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4z" fill="#2ed5c9" stroke="#272c36" stroke-width="2"></path></g></svg>'};function zv(t){mv.call(this,t),this.j=function(t){t.preventDefault()},this.i=A((function(t){this.jc()||this.toggleState(),t.preventDefault()}),this)}u(zv,mv),t("H.ui.base.PushButton",zv),zv.prototype.Y=function(t){Iu(t,"start",this.i),Iu(t,"end",this.j),this.Oc(this.We(),!0)},zv.prototype.renderInternal=zv.prototype.Y,zv.prototype.ip=function(){var t=nv.DOWN;return this.O(this.getState()===t?nv.UP:t),this},zv.prototype.toggleState=zv.prototype.ip,zv.prototype.s=function(){var t=this.N();t&&Ju(t,"start",this.i),mv.prototype.s.call(this)};var Yu,Av=navigator.userAgent,Bv=-1<Av.indexOf("Android")&&-1<Av.indexOf("Mozilla/5.0")&&-1<Av.indexOf("AppleWebKit"),Cv=/AppleWebKit\/([\d.]+)/,Dv=null===Cv.exec(Av)?null:parseFloat(Cv.exec(Av)[1]);Yu=Bv&&null!==Dv&&537>Dv;var Ev=Function("return this")(),Tu=document.createElement("T");function Fv(t,e,n){Pi.call(this,t,{icon:Gv,visibility:n}),Hv(this,e)}function Hv(t,e){t.ko=e,t.R&&(t.R.textContent=e)}u(Fv,Pi);var Gv=new Gi(pu(Ev.document,"span","H_dm_label"),{onAttach:function(t,e,n){n.R=t,Hv(n,n.ko)},onDetach:function(t,e,n){delete n.R}});function Iv(t,e){F.call(this),this.f=t,this.a=new Fv(this.S,""),e.push(this.a),this.b=new Q({objects:e,data:this}),this.j=this.j.bind(this)}function Jv(t,e){e&&(t.nextSibling=e,e.previousSibling=t)}function Kv(t,e,n,i){var r=new L,o=[];Jv(t,this),Jv(this,e),r.Dd(t.Ba()),r.Dd(e.Ba()),this.i=new mh(r,{style:n.ke}),this.u=new mh(r,{style:{strokeColor:"transparent",lineWidth:Math.min(100,this.i.ua().lineWidth+2*(i||5))}}),n.c&&(this.m=new mh(r,{style:n.c}),o.push(this.m)),o.push(this.i,this.u),Iv.call(this,n,o),this.F=this.v=-1,(t=this.b).addEventListener("pointermove",this.L,!0,this),t.addEventListener("pointerleave",this.D,!0,this)}function Lv(t,e,n){var i=t.i.ba();i.yf(3*n,3,[e.lat,e.lng,0]),t.m&&t.m.da(i),t.u.da(i),t.i.da(i)}function Mv(t,e,n){n=e.b(n||0),this.i=new zn(t,{icon:n,zIndex:0}),this.i.draggable=!0,Iv.call(this,e,[this.i]),(t=this.b).addEventListener("dragstart",this.xo,!0,this),t.addEventListener("drag",this.yo,!0,this),t.addEventListener("dragend",this.wo,!0,this)}function Nv(t){var e=0;t.nextSibling&&t.previousSibling&&(t.nextSibling.g||t.previousSibling.g?t.nextSibling.g&&!t.previousSibling.g&&(e=2):e=1),e=t.f.b(e),t.i.Nc(e)}function Ov(t,e){this.c=e,this.b=t,this.a={previousSibling:null,nextSibling:null,g:!0},Pv(this,this.a),this.og=A(this.og,this)}function Qv(t,e){for(var n=(t=t.a).nextSibling;n!==t;){var i=n,r=n.previousSibling!==t&&e;(i.c=r)?i.j():(i.o&&x.clearTimeout(i.o),i.o=x.setTimeout(i.j,100)),n=n.nextSibling}}function Rv(t,e){var n=e||t.a.nextSibling,i=0,r=0;if(e&&!Sv(t,e))throw new D(t.pf,0,e);for(n instanceof Mv?i=n.Ve():n instanceof Kv&&(i=n.previousSibling.Ve()),e=n;e&&e!==t.a;e=e.nextSibling,r++)e.Ci(i),1===r%2&&(i+=e.Ve())}function Sv(t,e){for(var n=t.a.nextSibling,i=!1;n!==t.a;){if(n===e){i=!0;break}n=n.nextSibling}return i}function Tv(t,e,n){e=new Kv(e,n,t.c),t.b.ea(e.b)}function Pv(t,e){t.a.nextSibling=e,e.previousSibling=t.a}function jv(t){var e,n=(t=t||{}).lineStyle;ev.call(this),this.u=new zv({label:yv.btn,onStateChange:A(this.uo,this)}),this.Ka(this.u),(e=t.distanceFormatter)&&(this.Gj=e),n&&(this.rk=n,this.Qk=B),this.Yb(t.alignment||"right-bottom"),this.o={},this.o[0]=t.startIcon,this.o[2]=t.endIcon,this.o[1]=t.stopoverIcon,this.o[3]=t.splitIcon}function Uv(t){var e,n=t.map,i={};t.i||(t.j=new N,t.f=new ml(t.j,{pixelRatio:t.map.$a()}),t.v=e=t.j.hc(),t.v.zl(!0),e.addEventListener("dragstart",t.so,!0,t),e.addEventListener("dragend",t.xf,!0,t),e.addEventListener("pointerenter",t.xf,!0,t),e.addEventListener("pointerleave",t.to,!0,t),e.addEventListener("tap",t.Ho,!0,t),t.m=Vv(t),i.a=A(t.Gj,t),i.b=A(t.Bk,t),i.g=A(t.Uj,t),i.map=t.map,i.f=t.m,i.ke=t.rk,i.c=t.Qk,t.a=new Ov(t.v,i),t.i=!0),t.m&&t.v.ea(t.m),n.addEventListener("tap",t.Nk,!0,t),n.a.add(t.f)}function Wv(t){var e=t.map;t.i&&(e.removeEventListener("tap",t.Nk,!0,t),e.nf(t.f),t.a.pa())}function Vv(t){function e(){var t=i.Bb();return t={anchor:i.td().clone().scale(o).floor(),size:new Ji(yd(t.w*o),yd(t.h*o)),hitArea:r},new Hj(i.ad(),t)}var n,i=t.Bk(3),r=new Ki(Li.NONE,[]),o=i===t.D?.5:1;if(1===i.getState())var s=e();else s=new Hj("<svg/>",{hitArea:r}),i.addEventListener("statechange",(function(){1===i.getState()&&n.Nc(e())}));return n=new zn(t.map.kb(),{visibility:!1,icon:s})}function Xv(){this.A=Yv.CLOSED,Ru.call(this,"div","H_overlay")}u(Iv,F),Iv.prototype.g=!1,Iv.prototype.S={lat:0,lng:0},Iv.prototype.Oc=function(t,e){Hv(this.a,t),this.a.da(e)},Iv.prototype.j=function(){this.a.vb(this.c)},u(Kv,Iv),Kv.prototype.Ve=function(){var t=this.i.ba();return t.Oe(0).Za(t.Oe(1))},Kv.prototype.L=function(t){var e=t.currentPointer;t=this.previousSibling.Ba();var n=this.nextSibling.Ba(),i=this.f.f,r=e.viewportX;e=e.viewportY,this.v===r&&this.F===e||(this.v=r,this.F=e,i.da(this.f.g(t,n,{x:r,y:e})),i.vb(!0))},Kv.prototype.D=function(){this.f.f.vb()},Kv.prototype.Ci=function(){this.Oc(this.f.a(this.Ve()),this.i.I().kb())},u(Mv,Iv),n=Mv.prototype,n.Gk=0,n.hi={nd:"change"},n.Ve=function(){return this.Gk},n.Ba=function(){return this.i.ba()},n.yo=function(t){var e=t.currentPointer;t=e.viewportX,e=e.viewportY,this.u===t&&this.v===e||(this.u=t,this.v=e,this.i.da(this.f.map.Xa(t-this.m.x,e-this.m.y)),this.dispatchEvent(new rd(this.hi.nd,this)))},n.xo=function(t){var e=t.currentPointer,n=e.viewportX;e=e.viewportY;var i=this.f.map.Fa(this.Ba());this.i.we(1),this.m={x:n-i.x,y:e-i.y},t.stopPropagation()},n.wo=function(){this.i.we(0)},n.Ci=function(t){this.Gk=t,this.Oc(this.f.a(t),this.Ba())},t("H.ui.distanceMeasurement.Model",Ov),n=Ov.prototype,n.gg=function(){return this.a.nextSibling===this.a},n.Ee=function(t){var e=this.a.previousSibling,n=this.gg();return t=new Mv(t,this.c,n?0:2),this.b.ea(t.b),Jv(t,this.a),t.addEventListener(t.hi.nd,this.og),n?Pv(this,t):(Tv(this,e,t),Nv(e),Rv(this,e)),t},n.insertBefore=function(t,e){var n,i=1;if(e){if(!Sv(this,e))throw new D(this.insertBefore,1,e);(n=e.previousSibling.g)&&(i=0),(t=new Mv(t,this.c,i)).addEventListener(t.hi.nd,this.og),this.b.ea(t.b),n?(Tv(this,t,n=this.a.nextSibling),Pv(this,t),e=t,Nv(n)):(e=(n=e.previousSibling).previousSibling,i=n.nextSibling,this.b.Ha(n.b),Tv(this,e,t),Tv(this,t,i)),Rv(this,e)}else t=this.Ee(t);return t},n.pa=function(){Pv(this,this.a),this.b.pa()},n.pf=function(t){var e=this.a,n=t.previousSibling,i=t.nextSibling;if(!Sv(this,t))throw new D(this.pf,0,t);if(this.b.Ha(t.b),n===e){var r=i;r!==e?(Pv(this,t=r.nextSibling),t.Ci(0),Nv(t),Rv(this,t)):Pv(this,this.a)}else i===e?(Jv(t=(r=n).previousSibling,e),Nv(t)):n&&i&&(Tv(this,n.previousSibling,i.nextSibling),this.b.Ed([i.b,n.b]),Rv(this,n.previousSibling));r&&r!==e&&this.b.Ha(r.b)},n.og=function(t){var e=(t=t.target).previousSibling,n=t.nextSibling,i=t.Ba();if(!n.g){Lv(n,i,!1);var r=t}e.g||(Lv(e,i,!0),r=e.previousSibling),Rv(this,r)},u(jv,ev),t("H.ui.DistanceMeasurement",jv),n=jv.prototype,n.rk={strokeColor:"rgb(39,44,54)",lineWidth:5},n.Qk={strokeColor:"white",lineWidth:7},n.Gj=function(t){var e="m",n=0;return"metric"===this.V?1e3<=t&&(t/=1e3,e="km",n=1):(e="ft",5280<=(t/=.3048)&&(t/=5280,e="mi",n=1)),t.toFixed(n)+" "+this.Aa().translate("scale."+e)},n.Uj=function(t,e,n){return t=this.map.Fa(t),e=this.map.Fa(e),n=new I(n.x,n.y).Tj(t,e),this.map.Xa(n.x,n.y)},n.Y=function(t,e){var n=22*(this.map.gc().type===vn.P2D?this.map.$a():1),i=n/2;ev.prototype.renderInternal.call(this,t,e),this.V=Bu.METRIC,this.D=new Hj(yv.point,{anchor:{x:i,y:i},size:{w:n,h:n},hitArea:new Ki(Li.CIRCLE,[i,i,i])}),this.u.pc(this.Aa().translate("distance.measurement"))},jv.prototype.renderInternal=jv.prototype.Y,n=jv.prototype,n.Bk=function(t){return this.o[t]||this.D},n.xf=function(){Qv(this.a,!0)},n.so=function(){Qv(this.a)},n.to=function(t){"touch"!==t.currentPointer.type&&Qv(this.a)},n.Ho=function(t){var e,n=t.currentPointer,i=t.target.Wa;i&&(i=i.getData())instanceof Iv&&(e=i),i=e,t=(t=t.originalEvent).metaKey||t.altKey,i&&(t&&i instanceof Mv?this.a.pf(i):i instanceof Kv&&(t=i.previousSibling.Ba(),e=i.nextSibling.Ba(),n={x:n.viewportX,y:n.viewportY},this.a.insertBefore(this.Uj(t,e,n),i.nextSibling),this.m.vb()),this.xf())},n.Nk=function(t){var e=t.currentPointer;(t=t.target)!==this.map&&t.getProvider&&t.getProvider()===this.j||(this.a.Ee(this.map.Xa(e.viewportX,e.viewportY)),this.m.vb(),this.xf())},n.uo=function(t){"down"===t.target.getState()?Uv(this):Wv(this)},n.hf=function(t){this.V=t,this.i&&(Rv(this.a),this.xf())},jv.prototype.onUnitSystemChange=jv.prototype.hf,jv.prototype.s=function(){Wv(this),this.i&&(this.j.B(),this.f.B()),jv.l.s.call(this)},jv.prototype.Ia=function(t){t?this.u.getState()===nv.DOWN&&(this.map=t,Uv(this)):(Wv(this),this.i=!1),ev.prototype.Ia.apply(this,arguments)},jv.prototype.setMap=jv.prototype.Ia,u(Xv,Ru),t("H.ui.base.OverlayPanel",Xv),Xv.prototype.O=function(t,e){return(t!==this.A||e)&&(this.A=t,t===Yv.OPEN?this.La("H_open"):this.pb("H_open")),this},Xv.prototype.setState=Xv.prototype.O,Xv.prototype.getState=function(){return this.A},Xv.prototype.getState=Xv.prototype.getState,Xv.prototype.Vk=function(t){var e=t.Vc;t=t.N();var n=this.N(),i=n.style;if(this.pb("H_top"),this.pb("H_middle"),this.pb("H_bottom"),this.pb("H_left"),this.pb("H_center"),this.pb("H_right"),i.bottom=i.top=i.left=i.right=i.margin="",/top/g.test(e)){this.La("H_top"),i.top="0",i.margin="0 12px";var r=-1}else/bottom/g.test(e)?(this.La("H_bottom"),i.bottom="0",i.margin="0 12px",r=1):(this.La("H_middle"),i.top="50%",i.margin="0 12px",i.marginTop=-Math.round(.5*n.offsetHeight)+"px",r=0);/left/g.test(e)?(this.La("H_left"),i.left=t.offsetWidth+"px",i.marginLeft="12px"):/right/g.test(e)?(this.La("H_right"),i.right=t.offsetWidth+"px",i.marginRight="12px"):(this.La("H_center"),i.left="50%",0>r?(i.top=t.offsetHeight+"px",i.marginTop="12px"):0<r&&(i.bottom=t.offsetHeight+"px",i.marginBottom="12px"),i.marginLeft=-Math.round(.5*n.offsetWidth)+"px",t.appendChild(n))},Xv.prototype.pointToControl=Xv.prototype.Vk;var Yv={OPEN:"open",CLOSED:"closed"};function Zv(t){t=t||{},Ru.call(this,"div","H_rdo"),this.i=new Z("div","H_rdo_title"),this.a=new Ru("div","H_rdo_buttons"),this.Ka(this.i),this.Ka(this.a),this.j=A((function(t){t.target.getState()===nv.DOWN?(this.ll(t.target,!0),this.dispatchEvent($v)):t.target.O(nv.DOWN,!0)}),this),this.addEventListener("statechange",this.j),this.Pi(t.title||""),t.onActiveButtonChange&&this.addEventListener($v,t.onActiveButtonChange),t.buttonsOptions&&t.buttonsOptions.forEach((function(t){this.Tg(new zv(t))}),this)}Xv.State=Yv,u(Zv,Ru),t("H.ui.base.RadioGroup",Zv);var $v="activebuttonchange";function hv(t){t=t||{},ev.call(this),this.i=new Xv,new Zv,this.a=this.a.bind(this),this.m=this.m.bind(this),this.u=this.u.bind(this),this.Yb(t.alignment||"bottom-right"),lv(this,t.baseLayers,t.layers)}function lv(t,e,n){var i=t.xc();t.f&&t.f.forEach((function(t){var e=t.layer;t=e&&ju(n,(function(t){return t.layer===e})),e&&!t&&i.nf(e)})),t.o=yc(e)?e:[],t.f=yc(n)?n:[],t.j&&(t.j.pa(),t.v.pa(),aw(t))}function aw(t){var e=t.Aa();t.o.forEach((function(t,n){this.j.Tg(new zv({label:bw(e,t.label),data:n,disabled:!t.layer}))}),t),t.f.forEach((function(t,n){this.v.Ka(new zv({label:bw(e,t.label),onStateChange:this.wa.bind(this,t.layer),data:n,disabled:!t.layer}))}),t),t.V.vb(!(!t.f.length||!t.o.length)),x.setTimeout(function(){this.map&&(this.a(),this.D.Ca(!(this.o&&this.o.length||this.f&&this.f.length)))}.bind(t))}function ew(t,e){var n,i,r={},o=e.ga(),s=window.H.service&&window.H.service.omv.Provider;if(s&&e.ga()instanceof s&&o.ua().Ne){var a=o.ua(),l=function(){var t=fw.ground.filter((function(t){return!!a.Dh("layers."+t)})),s=fw.water.filter((function(t){return!!a.Dh("layers."+t)}));t.concat(s).length&&(uh(r,a.Ne(t)),uh(r,a.Ne(s,!1,!0)),delete r.global,n=new Sh(r,a.fc()),(i=o.o.pd(n)).Og=e,this.map.Vg(i)),a.removeEventListener(Rh.CHANGE,l)}.bind(t);a.getState()!==Ph.READY?a.addEventListener(Rh.CHANGE,l):l()}}function cw(t){return ju(t.map.a.Ma(),(function(t){return!!t.Og}))}function dw(t){t=t.map.a.Ma();var e=window.H.service&&window.H.service.traffic.flow.Provider;return!!e&&t.some((function(t){return t.ga()instanceof e}))}Zv.prototype.Y=function(t,e){Ru.prototype.renderInternal.call(this,t,e),this.Pi(this.f,!0)},Zv.prototype.renderInternal=Zv.prototype.Y,Zv.prototype.pa=function(){this.a.pa()},Zv.prototype.Pi=function(t,e){return(t!==this.f||e)&&(this.f=t,this.i.N()&&(this.i.N().innerHTML=this.f)),this},Zv.prototype.setTitle=Zv.prototype.Pi,Zv.prototype.Jn=function(){return this.f},Zv.prototype.getTitle=Zv.prototype.Jn,Zv.prototype.Tg=function(t){if(!(t instanceof zv))throw Error("PushButton expected");return t.ka(this),this.a.Ka(t),this},Zv.prototype.addButton=Zv.prototype.Tg,Zv.prototype.Oo=function(t){return this.a.removeChild(t),t.ka(null),this},Zv.prototype.removeButton=Zv.prototype.Oo,Zv.prototype.Uf=function(){return this.a.uh()},Zv.prototype.getButtons=Zv.prototype.Uf,Zv.prototype.ll=function(t,e){for(var n=this.Uf(),i=n.length;i--;)n[i].O(n[i]===t?nv.DOWN:nv.UP,e)},Zv.prototype.setActiveButton=Zv.prototype.ll,Zv.prototype.s=function(){this.removeEventListener("statechange",this.j),this.pa(),Ru.prototype.s.call(this)},u(hv,ev),t("H.ui.MapSettingsControl",hv),hv.prototype.fa=function(){var t=this.xc();t&&(t.addEventListener("tap",this.m),(t=t.a).addEventListener("add",this.a),t.addEventListener("remove",this.a),t.addEventListener("set",this.a))},hv.prototype.S=function(){var t=this.xc();t&&(t.removeEventListener("tap",this.m),(t=t.a).removeEventListener("add",this.a),t.removeEventListener("remove",this.a),t.removeEventListener("set",this.a))},hv.prototype.Y=function(t,e){var n=this.Aa().translate("layers.choose");ev.prototype.renderInternal.call(this,t,e),this.fa(),this.D=new zv({tooltip:n,label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.7,14.6 L4.5,16 L12,20.6 L19.5,16 L17.3,14.6 L19.1,13.5 L23,16 L12,23 L1,16 L4.9,13.5 L6.7,14.6 Z M12,2 L23,9 L12,16 L1,9 L12,2 Z"></path></svg>',onStateChange:A((function(t){t.target.getState()===nv.DOWN?(this.i.O(Yv.OPEN),this.i.Vk(this)):this.i.O(Yv.CLOSED)}),this)}),this.j=new Zv({title:n,onActiveButtonChange:function(){t:{for(var t=this.j.Uf(),e=t.length;e--;)if(t[e].getState()===nv.DOWN){t=t[e];break t}t=null}t=t.getData(),this.map.Id(this.o[t].layer),this.u()}.bind(this)}),this.v=new Ru("div","H_grp"),this.V=new Z("div","H_separator"),this.Ka(this.D),this.Ka(this.i),this.i.Ka(this.j),this.i.Ka(this.V),this.i.Ka(this.v),aw(this)},hv.prototype.renderInternal=hv.prototype.Y,hv.prototype.a=function(){var t=this.map.c,e=this.map.a;this.o.forEach((function(e,n){this.j.Uf()[n].O(nv[e.layer===t?"DOWN":"UP"],!0)}),this),this.f.forEach((function(t,n){n=this.v.uh()[n],t.layer?n.O(nv[-1!==e.indexOf(t.layer)?"DOWN":"UP"],!0):n.Ca(!0)}),this)},hv.prototype.wa=function(t,e){e.target.getState()===nv.DOWN?this.map.Vg(t):this.map.nf(t),this.u()},hv.prototype.u=function(){var t;(t=cw(this))&&(t.Og.ga().ua().ff(t.ga().ua().ud()),this.map.nf(t),t.B(),delete t.Og);dw(this)&&ew(this,this.map.c)};var fw={water:["water.water-labels"],ground:"road_labels continent_label island_label roads.shields roads.directions truck-restriction.signs places landuse.label".split(" ")};function bw(t,e){return/^layers?/.test(e)&&t.Jh(e)?t.translate(e):e}function gv(t){t=t||{},ev.call(this),this.f=new zv({label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><g transform="translate(1 3)"><path fill-rule="nonzero" d="M5,0 L5,2 L2,2 L2,16 L5,16 L5,18 L2,18 C0.9,18 0,17 0,15.75 L0,2.25 C0,1 0.9,0 2,0 L5,0 Z M17,0 L20,0 C21.1,0 22,1 22,2.25 L22,15.75 C22,17 21.1,18 20,18 L17,18 L17,16 L20,16 L20,2 L17,2 L17,0 Z"></path><rect width="10" height="2" x="6" y="8"></rect><rect width="2" height="10" x="10" y="4"></rect></g></svg>',onStateChange:A(this.vo,this)}),this.Ka(this.f),this.Yb(t.alignment||"right-bottom")}function gw(t,e){if(e=e||{},!(t&&t instanceof ll))throw Error("Base layer is mandatory for overview UI element");ev.call(this),this.f=new zv({label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="H_icon"><g fill-rule="evenodd" transform="translate(2 2)"><rect width="9" height="9" x="10" y="10"/><rect class="H_icon_stroke" width="18" height="18" x="1" y="1" fill="none" stroke="#000" stroke-width="2" rx="2"/></g></svg>',onStateChange:A(this.i,this)}),this.Ka(this.f),this.a=new hw(t,e.zoomDelta,e.scaleX,e.scaleY),this.Yb(e.alignment||"right-bottom"),this.Ka(this.a)}function hw(t,e,n,i){this.o=t,"number"===typeof e&&(this.Nl=e),"number"===typeof n&&(this.Rk=n),"number"===typeof i&&(this.Sk=i),Ru.call(this,"div","H_overview")}function jw(t){!t.Kd&&iw(t),t.pb("H_overview_active"),t.a.removeEventListener("mapviewchange",t.Ti,!1,t)}function iw(t,e){var n=t.a.za.element,i=t.N().style,r=n.offsetWidth/t.Rk/10;n=n.offsetHeight/t.Sk/10;var o=t.i.style;e?(i.width=r+"em",i.height=n+"em",o.width=r+"em",o.height=n+"em"):i.width=i.height="0em",t.f.za.resize()}function iv(t){t=t||{},ev.call(this),this.La("H_scalebar"),this.Yb(t.alignment||"right-bottom"),this.v=150,this.update=A(this.update,this),this.o=this.f=this.a=this.j=null}hv.prototype.m=function(){this.D.O(nv.UP)},hv.prototype.s=function(){hv.l.s.call(this),this.S()},u(gv,ev),t("H.ui.ZoomRectangle",gv),n=gv.prototype,n.vo=function(t){var e=this.map,n=e.za.element;t.target.getState()===nv.DOWN?(e.addEventListener("dragstart",this.Dk,!0,this),e.addEventListener("drag",this.Ek,!0,this),e.addEventListener("dragend",this.Ck,!0,this),(t=n.ownerDocument.createElement("div")).className="H_zoom_lasso",n.appendChild(t),this.a=t):(e.removeEventListener("dragstart",this.Dk,!0,this),e.removeEventListener("drag",this.Ek,!0,this),e.removeEventListener("dragend",this.Ck,!0,this),n.removeChild(this.a))},n.Dk=function(t){var e=this.a.style,n=t.currentPointer,i=n.viewportX;n=n.viewportY,t.target===this.map&&(t.stopPropagation(),e.width="0px",e.height="0px",e.top=n+"px",e.left=i+"px",e.display="block",this.j=n,this.i=i)},n.Ek=function(t){var e=t.currentPointer,n=e.viewportX,i=e.viewportY;e=this.i;var r=this.j,o=this.a.style;t.target===this.map&&(t.stopPropagation(),t=n-e,n=i-r,o.left=e+(0>t?t:0)+"px",o.top=r+(0>n?n:0)+"px",o.width=Math.abs(t)+"px",o.height=Math.abs(n)+"px")},n.Ck=function(t){var e=this.map,n=t.currentPointer;t.target===this.map&&(t.stopPropagation(),this.a.style.display="none",e.b.Zb({bounds:eg([e.Xa(this.i,this.j),e.Xa(n.viewportX,n.viewportY)])},!0))},n.Y=function(t,e){ev.prototype.renderInternal.call(this,t,e),this.f.pc(this.Aa().translate("zoom.rectangle"))},gv.prototype.renderInternal=gv.prototype.Y,u(gw,ev),t("H.ui.Overview",gw),gw.prototype.Id=function(t){return this.a.Id(t),this},gw.prototype.setBaseLayer=gw.prototype.Id,gw.prototype.i=function(t){t.target.getState()===nv.DOWN?(iw(t=this.a,!0),t.Ti(),t.La("H_overview_active"),t.a.addEventListener("mapviewchange",t.Ti,!1,t)):jw(this.a)},gw.prototype.Y=function(t,e){ev.prototype.renderInternal.call(this,t,e),this.f.N().style.float=this.Vc.match("right")?"right":"left",this.a.Ia(this.map),this.f.pc(this.Aa().translate("minimap"))},gw.prototype.renderInternal=gw.prototype.Y,gw.prototype.s=function(){this.a.B(),Z.prototype.s.call(this)},u(hw,ev),hw.prototype.Id=function(t){this.f.Id(t)},hw.prototype.Y=function(t,e){zu(t,e=pu(e,"div","H_overview_map")),this.i=e},hw.prototype.renderInternal=hw.prototype.Y,n=hw.prototype,n.Nl=3,n.Rk=5,n.Sk=5,n.Ia=function(t){this.a=t,this.f=new T(this.i,this.o,{pixelRatio:this.a.$a(),engineType:this.a.gc().type}),this.f.o.N().style.display="none",this.m=this.f.b,this.j=this.a.b},n.Ti=function(t){t&&t.modifiers&t.SIZE&&iw(this,!0),(t=this.j.lb()).zoom=t.zoom-this.Nl,this.m.Zb(t)},n.s=function(){hw.l.s.call(this),jw(this),this.f.B(),this.f=this.m=this.j=this.a=this.o=this.i=null},u(iv,ev),t("H.ui.ScaleBar",iv),iv.prototype.Y=function(t,e){ev.prototype.renderInternal.call(this,t,e),t.innerHTML='<svg height="12" version="1.1" xmlns="http://www.w3.org/2000/svg"><polyline style="fill:none; stroke:white; stroke-width:4" points="2,2 2,10 98,10 98,2"/><polyline style="fill:none; stroke:black; stroke-width:2" points="2,2 2,10 98,10 98,2"/></svg><div style="padding: 0 0 0 10px"></div>',t.style.direction="ltr",this.j=t.firstChild,e=this.j.childNodes,this.a=e[0],this.f=e[1],this.o=t.lastChild,this.m=Bu.METRIC,this.u=A((function(t){this.jc()||(this.dispatchEvent("toggleunitsystem"),t.preventDefault())}),this),this.i=A((function(t){t.preventDefault()}),this),Iu(t,"start",this.i),Iu(t,"end",this.u),this.pc(this.Aa().translate("scale.switchToImperial")),this.update()},iv.prototype.renderInternal=iv.prototype.Y,iv.prototype.Ia=function(t){this.map&&this.map.removeEventListener("mapviewchange",this.update),t&&t.addEventListener("mapviewchange",this.update),ev.prototype.Ia.apply(this,arguments)},iv.prototype.setMap=iv.prototype.Ia,iv.prototype.capture=function(t,e,n){var i=this.N(),r=i.ownerDocument,o=r.createElement("canvas"),s=o.getContext("2d"),a=r.createElementNS("http://www.w3.org/2000/svg","svg"),l=r.createElementNS("http://www.w3.org/2000/svg","foreignObject"),c=jf(i,r,!1);r=parseFloat(i.offsetWidth)+1;var u=parseFloat(i.offsetHeight),h=r*t;t*=u,o.width=h,o.height=t,a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("width",h),a.setAttribute("height",t),a.setAttribute("viewBox","0 0 "+r+" "+u),l.setAttribute("width","100%"),l.setAttribute("height","100%"),a.appendChild(l),c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var f=window.getComputedStyle(i);"box-shadow display align-items font font-family font-size height text-shadow direction".split(" ").forEach((function(t){c.style.setProperty(t,f.getPropertyValue(t))})),l.appendChild(c),new rf("image",i=$e(a.outerHTML)).then((function(t){s.drawImage(t,0,0),e(o)}),n)},iv.prototype.capture=iv.prototype.capture,iv.prototype.hf=function(t){this.m=t,this.pc("imperial"===t?this.Aa().translate("scale.switchToMetric"):this.Aa().translate("scale.switchToImperial")),this.update()},iv.prototype.onUnitSystemChange=iv.prototype.hf,iv.prototype.update=function(){if(this.N()){var t,e=this.v,n=0,i=this.map;if(i){var r=Math.round(.5*i.za.width),o=Math.round(.5*i.za.height);(t=i.Xa(r,o))&&(n=Zf(t),i=Zf(i.Xa(r+1,o)),n=100*n.Za(i))}(i=n)&&(this.m===Bu.IMPERIAL?i<kw?(o=i/lw,r=this.Aa().translate("scale.ft")):(o=i/kw,r=this.Aa().translate("scale.mi")):1e3>i?(o=i,r=this.Aa().translate("scale.m")):(o=i/1e3,r=this.Aa().translate("scale.km")),(o=(i=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)))/o*100)<e/5?(i*=5,o*=5):o<e/2?(i*=2,o*=2):o>e&&(i/=2,o/=2),o=Math.round(o),this.j.setAttribute("width",o),this.o.textContent=i+" "+r,this.a.points.getItem(2).x=this.f.points.getItem(2).x=this.a.points.getItem(3).x=this.f.points.getItem(3).x=o-2)}};var kw=1609.344,lw=.3048006;t("H.ui.buildInfo",(function(){return Ef("H-ui","1.27.0","e91ec96")})),H.__bootstrap__='var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ca="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function da(a,b){if(b){var c=ca;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}var fa;\nif("function"==typeof Object.setPrototypeOf)fa=Object.setPrototypeOf;else{var ha;a:{var ia={hb:!0},ka={};try{ka.__proto__=ia;ha=ka.hb;break a}catch(a){}ha=!1}fa=ha?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var la=fa;da("Object.setPrototypeOf",function(a){return a||la});var p=this||self;\nfunction ma(a,b,c){a=a.split(".");c=c||p;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function na(){}\nfunction oa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";\nelse if("function"==b&&"undefined"==typeof a.call)return"object";return b}function r(a){return"function"==oa(a)}function qa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var ra="closure_uid_"+(1E9*Math.random()>>>0),sa=0;function ta(a,b,c){return a.call.apply(a.bind,arguments)}\nfunction ua(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function va(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?va=ta:va=ua;return va.apply(null,arguments)}\nfunction wa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){ma(a,b,void 0)}function xa(a,b){function c(){}c.prototype=b.prototype;a.W=b.prototype;a.prototype=new c;a.prototype.constructor=a};function x(){}t("H.util.ICache",x);x.prototype.add=function(){};x.prototype.add=x.prototype.add;x.prototype.get=function(){};x.prototype.get=x.prototype.get;x.prototype.sa=function(){};x.prototype.drop=x.prototype.sa;x.prototype.forEach=function(){};x.prototype.forEach=x.prototype.forEach;x.prototype.U=function(){};x.prototype.removeAll=x.prototype.U;x.prototype.ca=function(){};x.prototype.registerOnDrop=x.prototype.ca;x.prototype.qa=function(){};x.prototype.deRegisterOnDrop=x.prototype.qa;function ya(){var a=za,b;for(b in a)return!1;return!0}function Aa(a){var b={},c;for(c in a)b[c]=a[c];return b}var Ba="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ca(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ba.length;f++)c=Ba[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var y=this;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}xa(Da,Error);Da.prototype.name="CustomError";var Ea=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Fa=va,Ga=String,Ha=y.Object.freeze||function(a){return a},z=self.eval("undefined"),Ia=self.eval("null");function La(a){return Ga(a).split(","!==z?",":" ")}var Ma="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b,c,d){if(!(b=a instanceof b)&&c)throw new A(c,d,void 0!==z?void 0:a);return b}function Oa(a,b,c,d){var e;if(!(e="Array"===Pa(a))&&b)throw new A(b,c,d!==z?d:a);return e}\nt("H.lang.isArray",function(a,b,c,d){return Oa(a,b,c,d)});function Qa(a){return"string"===typeof a}t("H.lang.isString",Qa);var Ra=isNaN;function Sa(a){return a===+a}t("H.lang.isNumber",Sa);t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(a){return"number"===typeof a&&0===a%1});function Pa(a){var b=Object[Ma[0]][Ma[6]].call(a).match(/^\\[object (\\w+)\\]$/);return b?b[1]:typeof a}var Ta=[];0>Ta.indexOf(Ta)&&Ta.push(Ta);\nfunction Ua(a,b,c,d){var e="",f=2>arguments.length,g;f&&(b={H:y.H},c="",d=Ta.slice());Va(b,!0,function(h,k){try{if(g=h[k],k=Wa(h,g),!(qa(g)&&g.window===g&&g.self===g||qa(g)&&0<g.nodeType&&r(g.cloneNode))&&qa(g)){if(g===a)return e=c+"."+k,!0;if(0>d.indexOf(g)&&(d.push(g),e=Ua(a,g,c+"."+k,d)))return!0}}catch(m){}});f&&(e=e?e.substr(1).replace("."+Ma[0]+".","#"):"~"+(r(a)?Xa(a)+"()":Pa(a)));return e}\nfunction Wa(a,b){var c=[];Va(a,!1,function(d,e){d[e]===b&&c.push(e)});return c.sort(Ya)[0]}function Ya(a,b){return b.length-a.length}var Za=Object[Ma[0]][Ma[2]];function Va(a,b,c){var d;if(a){for(e in a)if((!b||Za.call(a,e))&&c(a,e,!0))return;for(d=Ma.length;d--;){var e=Ma[d];if((!b||Za.call(a,e))&&c(a,e,!1))break}}}function Xa(a){return(a=/^\\s*function ([^\\( ]+)/.exec(a))?a[1]:"anonymous"}function $a(a,b,c){c[b]="#"+b};function B(a,b,c){this.g=[];b&&this.ca(b);if(c&&!r(c))throw new A(B,2,c);this.b=0;this.filter=c;this.a={};this.f=this.c=null;this.Ia(a)}t("H.util.Cache",B);B.prototype.add=function(a,b,c){var d,e;c=+c;if(!Sa(c)||0>c)throw new A(this.add,2,c);a=String(a);if(e=this.filter?this.filter(a,b,c):!0)(d=this.a[a])?(d.data!==b&&db(this,d),this.b+=c-d.size,d.size=c,d.data=b,eb(this,d)):this.a[a]=fb(this,{id:a,data:b,size:c,A:null,F:null},this.c),gb(this);return e};B.prototype.add=B.prototype.add;\nB.prototype.ca=function(a){if(!r(a))throw new A(this.ca,0,a);this.g.push(a)};B.prototype.registerOnDrop=B.prototype.ca;B.prototype.qa=function(a){this.g=this.g.filter(function(b){return b!==a})};B.prototype.deRegisterOnDrop=B.prototype.qa;B.prototype.get=function(a,b){return(a=b?this.a[a]:eb(this,this.a[a]))&&a.data};B.prototype.get=B.prototype.get;B.prototype.sa=function(a){var b;(b=this.a[a])&&hb(this,b,!0)};B.prototype.drop=B.prototype.sa;\nB.prototype.forEach=function(a,b,c){var d;for(d in this.a){var e=this.a[d];(c?c(d,e.data,e.size):1)&&a.call(b,d,e.data,e.size)}};B.prototype.forEach=B.prototype.forEach;B.prototype.U=function(a){var b;for(b in this.a){var c=this.a[b];(a?a(b,c.data,c.size):1)&&hb(this,this.a[b],!0)}};B.prototype.removeAll=B.prototype.U;B.prototype.Ia=function(a){if(!(0<+a))throw new A(B.prototype.Ia,0,a);this.o=+a;gb(this);return this};B.prototype.setMaxSize=B.prototype.Ia;B.prototype.Bb=function(){return this.o};\nB.prototype.getMaxSize=B.prototype.Bb;B.prototype.xb=function(){return this.b};B.prototype.getCurrentSize=B.prototype.xb;function eb(a,b){b&&(a.c=fb(a,b,a.c));return b}function gb(a){for(;a.b>a.o&&a.f;)hb(a,a.f,!0)}function fb(a,b,c){if(c!==b){(b.A||b.F)&&hb(a,b,!1);if(b.A=c)b.F=c.F,c.F=b;b.F||(a.c=b);b.A||(a.f=b);a.b+=b.size}return b}function hb(a,b,c){var d=b.F,e=b.A;if(d||e||b==a.c&&b==a.f)d?d.A=e:a.c=e,e?e.F=d:a.f=d,a.b-=b.size,c&&(delete a.a[b.id],db(a,b));b.A=b.F=null}\nfunction db(a,b){for(var c=a.g.length;c--;)a.g[c].call(a,b.id,b.data,b.size)};function C(){}t("H.service.extension.dataView.ITable",C);C.prototype.ya=function(){};C.prototype.getMeta=C.prototype.ya;C.prototype.za=function(){};C.prototype.getRowCount=C.prototype.za;C.prototype.ja=function(){};C.prototype.getRow=C.prototype.ja;C.prototype.D=function(){};C.prototype.getColumnNames=C.prototype.D;C.prototype.xa=function(){};C.prototype.getColumn=C.prototype.xa;C.prototype.s=function(){};C.prototype.getCell=C.prototype.s;C.prototype.concat=function(){};C.prototype.concat=C.prototype.concat;function ib(){}t("H.service.extension.dataView.IRow",ib);ib.prototype.D=function(){};ib.prototype.getColumnNames=ib.prototype.D;ib.prototype.s=function(){};ib.prototype.getCell=ib.prototype.s;ib.prototype.Aa=function(){};ib.prototype.getTable=ib.prototype.Aa;function jb(a,b){this.a=a;this.b=b}t("H.service.extension.dataView.ObjRow",jb);jb.prototype.D=function(){return this.a.D()};jb.prototype.getColumnNames=jb.prototype.D;jb.prototype.s=function(a){return this.a.s(this.b,a)};jb.prototype.getCell=jb.prototype.s;jb.prototype.Aa=function(){return this.a};jb.prototype.getTable=jb.prototype.Aa;function kb(){}t("H.service.extension.dataView.IColumn",kb);kb.prototype.s=function(){};kb.prototype.getCell=kb.prototype.s;function lb(a,b){this.b=a;this.a=b}t("H.service.extension.dataView.ObjColumn",lb);lb.prototype.s=function(a){return this.b.s(a,this.a)};lb.prototype.getCell=lb.prototype.s;function A(a,b,c){var d=arguments.length;b=b!==z?+b:b;if(b!==z){var e=(e=/^.*?\\(([^\\)]+)/.exec((""+a).replace(/(\\/\\*([\\s\\S]*?)\\*\\/)|(\\/\\/(.*)$)/gm,"")))?La(e[1].replace(/\\s+/g,"")):[];e.forEach($a);e=e[b]||"#"+b}var f=a?Ua(a):"";d=2<d?Ga(c):"";if(e||d)f+=" (Argument "+(e||"")+(d?" "+d:"")+")";d=Error(f);Object.setPrototypeOf(d,A.prototype);return d}xa(A,Error);t("H.lang.InvalidArgumentError",A);A.prototype.name="InvalidArgumentError";function D(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):z);this.G=a;if(b)for(this.O=b,this.pa=a=Object.create(Ia,void 0),d=b.length;d--;)a[b[d]]=!0;c!==z&&(this.Ca=c)}t("H.service.extension.dataView.ObjTable",D);l=D.prototype;l.Ca=z;l.G=z;l.O=z;l.pa=z;l.ya=function(){return this.Ca};D.prototype.getMeta=D.prototype.ya;D.prototype.za=function(){return this.G?this.G.length:0};D.prototype.getRowCount=D.prototype.za;D.prototype.ja=function(a){var b=this.G;return b&&b[a]?new jb(this,a):z};\nD.prototype.getRow=D.prototype.ja;D.prototype.D=function(){return this.O||mb};D.prototype.getColumnNames=D.prototype.D;D.prototype.xa=function(a){return this.pa[a]?new lb(this,a):z};D.prototype.getColumn=D.prototype.xa;D.prototype.s=function(a,b){var c=this.G;return(a=c&&this.pa[b]&&c[a])&&a[b]};D.prototype.getCell=D.prototype.s;\nD.prototype.concat=function(){var a=arguments.length,b,c=this.O,d=""+this.O,e=(this.G||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof D))throw new A(this.concat,b);if(f.G){if(c&&""+f.O!==d)throw new A(this.concat,b,"Incompatible columns!");e=e.concat(f.G)}}return new D(e,this.O,this.Ca)};D.prototype.concat=D.prototype.concat;function E(a,b){this.x=+a;this.y=+b}t("H.math.Point",E);E.prototype.set=E;E.prototype.set=E.prototype.set;E.prototype.clone=function(a){a?(a.x=this.x,a.y=this.y):a=new E(this.x,this.y);return a};E.prototype.clone=E.prototype.clone;E.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};E.prototype.add=E.prototype.add;E.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};E.prototype.sub=E.prototype.sub;E.prototype.scale=function(a,b){this.x*=a;this.y*=void 0===b?a:b;return this};\nE.prototype.scale=E.prototype.scale;E.prototype.round=function(){this.x=nb(this.x);this.y=nb(this.y);return this};E.prototype.round=E.prototype.round;E.prototype.floor=function(){this.x=ob(this.x);this.y=ob(this.y);return this};E.prototype.floor=E.prototype.floor;E.prototype.ceil=function(){this.x=pb(this.x);this.y=pb(this.y);return this};E.prototype.ceil=E.prototype.ceil;E.prototype.I=function(a){return!(!a||this.x!==a.x||this.y!==a.y)};E.prototype.equals=E.prototype.I;\nE.prototype.Cb=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a;if(c||d){var f=((this.x-a.x)*c+(this.y-a.y)*d)/(c*c+d*d);0>=f?e=a:1<=f?e=b:e=new E(a.x+f*c,a.y+f*d)}return e};E.prototype.getNearest=E.prototype.Cb;E.prototype.ra=function(a){return qb(rb(this.x-a.x,2)+rb(this.y-a.y,2))};E.prototype.distance=E.prototype.ra;E.fromIPoint=function(a){if(!a)throw Error("invalid argument");return a instanceof E?a:new E(a.x,a.y)};var F=Math,sb=F.min,tb=F.max,nb=F.round,ob=F.floor,pb=F.ceil,ub=F.abs,vb=F.log,qb=F.sqrt,rb=F.pow,wb=F.exp,xb=F.sin,yb=F.asin,zb=F.cos,Ab=F.tan,Bb=F.atan,Cb=F.atan2,Db=F.LN2,I=F.PI,Eb=I/2,Gb=I/4,Hb=2*I,Ib=3*I,Jb=I/180,Kb=180/I,Lb=1/0;rb(-2,53);function Mb(a,b){var c;return 0>(c=a%b)===0>b?c:c+b}t("H.math.normalize",function(a,b,c){b-=c=c||0;a-=c;return a-ob(a/b)*b+c});function Nb(a,b,c){return a>c?c:a<b?b:a}t("H.math.clamp",Nb);function Ob(a,b,c){return b<c?a>=b&&a<=c:a>=c&&a<=b}\nfunction Pb(a,b,c,d,e,f){return qb(rb((a-e)*(d-f)-(b-f)*(c-e),2)/(rb(c-e,2)+rb(d-f,2)))}var Qb={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",Qb);\nfunction Rb(a,b,c){for(var d=c.length,e=d,f,g,h,k,m=c[0],n=0,q=0,u=0;1!=n&&1<e;){g=c[--e];f=c[--e];k=c[e?e-1:(d+(e-1))%d];h=c[e?e-2:(d+(e-2))%d];if(f>=a&&f<=a&&g>=b&&g<=b||h>=a&&h<=a&&k>=b&&k<=b)n=1;else if(!n&&f===a)h===a&&(g<b&&k>b||g>b&&k<b)||(m<=a&&h>a||m>=a&&h<a)&&(g>=b?++q:++u),n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0;else if(!n&&Ob(a,f,h)){if(f<a&&h>a||f>a&&h<a)m=g+(a-f)/(h-f)*(k-g),q+=m>b,u+=m<b;n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0}m=f}!n&&0!==u&&0!==q%2&&(n=3);return n}\nfunction Sb(a,b){return Rb(a.x,a.y,b)!==Qb.NONE}t("H.math.isPointInsidePolygon",Sb);function Tb(a){for(var b=a.length,c=new Float64Array(2*b),d=b&&a[0].x!==z;b--;){var e=a[b],f=b<<1;c[f]=d?e.x:e[0];c[f+1]=d?e.y:e[1]}return c}t("H.math.flatten",Tb);function Ub(a,b,c,d,e,f){var g,h,k=a.length,m,n;if(k)for(g=[];k--;){var q=a[k];var u=q.length;var J=0;for(m=1;m<u;m++)if(n=Vb(q[m-1],q[m],c,b,d,e)){var M=n[0];var v=n[1];J&&J.I(M)?h.push(v):g.push(h=n);J=v;f&&(m=u,k=0)}}else g=a;return g}t("H.math.clipping.clipStrips",Ub);\nfunction Vb(a,b,c,d,e,f){var g=a.x;a=-a.y;var h=b.x;b=-b.y;c=-c;f=-f;if(g>h){if(h>e||g<d)return;var k=g;var m=a;g=h;a=b;h=k;b=m;k=1}else if(g>e||h<d)return;if(a>b){if(b>c||a<f)return;var n=1;a=-a;b=-b;m=f;f=-c;c=-m}else if(a>c||b<f)return;if(g<d){if((a+=(d-g)*(b-a)/(h-g))>c)return;g=d}if(a<f){if((g+=(f-a)*(h-g)/(b-a))>e)return;a=f}h>e&&(b=a+(e-g)*(b-a)/(h-g),h=e);b>c&&(h=g+(c-a)*(h-g)/(b-a),b=c);n&&(a=-a,b=-b);return k?[new E(h,-b),new E(g,-a)]:[new E(g,-a),new E(h,-b)]}\nfunction Wb(a,b,c){a=Xb(a,!0);b=Xb(b,!1);var d,e;var f={};var g=d=1;switch(~~(c||0)){case 1:g=d=0;break;case 2:d=0;g=1;break;case 3:d=1,g=0}c=d;var h=g;if(b&&a){b.ia=Yb(b.x,b.y,null,Zb(b));a.ia=Yb(a.x,a.y,null,Zb(a));for(g=b;g.next;g=g.next)if(!g.C)for(d=a;d.next;d=d.next)if(!d.C){var k=$b(g.next);var m=$b(d.next);if(e=ac(g,k,d,m,f)){e=f.kb;var n=f.lb;var q=f.kc;var u=f.lc;e=Yb(q,u,null,null,null,null,!0,0,0,e);bc(e,g,k);k=Yb(q,u,null,null,null,null,!0,0,0,n);bc(k,d,m);e.Da=k;k.Da=e}}f=Sb(b,cc(a));\nc&&(f=!f);for(g=b;g;g=g.next)g.C&&(g.ta=f,f=!f);f=Sb(a,cc(b));h&&(f=!f);for(d=a;d.next;d=d.next)d.C&&(d.ta=f,f=!f);dc(b);for(dc(a);(a=ec(b))!=b;){for(c=null;!a.na;a=a.Da){for(f=a.ta;;){c=Yb(a.x,a.y,c);c.artificial=a.C||a.Ob;a.na=1;a=f?a.next:a.u;if(!a)break;if(a.C){a.na=1;break}}if(!a)break}c.Xa=J;var J=c}return J}}t("H.math.clipping.clipPolygon",Wb);\nfunction Yb(a,b,c,d,e,f,g,h,k,m){a={x:a,y:b,next:c||null,u:d||null,Xa:e||null,Da:f||null,C:!!g,ta:h||0,na:k||0,alpha:m||0};d&&(a.u.next=a);c&&(a.next.u=a);return a}function $b(a){for(;a&&a.C;)a=a.next;return a}function Zb(a){if(a)for(;a.next;)a=a.next;return a}function ec(a){var b=a;if(b){do b=b.next;while(b!=a&&(!b.C||b.C&&b.na))}return b}function dc(a){var b=Zb(a);b.u.next=a;a.u=b.u}\nfunction ac(a,b,c,d,e){var f,g=b.x-a.x,h=b.y-a.y;var k=d.x-c.x;var m=d.y-c.y;var n=g*m-h*k;if(!n)return 0;k=((c.x-a.x)*m-(c.y-a.y)*k)/n;n=(h*(c.x-a.x)-g*(c.y-a.y))/n;if(0>k||1<k||0>n||1<n)return 0;0===k?f=a:1===k?f=b:0===n?f=c:1===n&&(f=d);if(f)return f.x+=2.480549651603763E-5,f.y+=7.321997314118067E-5,f.ia&&(f.ia.x=f.x,f.ia.y=f.y),ac(a,b,c,d,e);e.kc=a.x+k*g;e.lc=a.y+k*h;e.kb=k;e.lb=n;return 1}function cc(a){for(var b=[];a;)b.push(a.x,a.y),a=a.next;return b}\nfunction bc(a,b,c){for(b=b.next;b!==c&&b.alpha<=a.alpha;)b=b.next;a.next=b;a.u=b.u;a.next.u=a;a.u.next=a}function Xb(a,b){for(var c,d=null,e=0,f=a.length;e<f;e++){c=Yb(a[e].x,a[e].y,d);c.Ob=b;if(c.next=d)d.u=c;d=c}return d};function fc(a,b){var c=[];a&&c.push(Ua(a));1<arguments.length&&c.push(""+b);c=Error(c.join(" "));Object.setPrototypeOf(c,fc.prototype);return c}xa(fc,Error);t("H.lang.IllegalOperationError",fc);fc.prototype.name="IllegalOperationError";function gc(){if(!Qa("STATIC_DB"))throw new A(this.constructor,0);this.o=y.indexedDB||y.jc||y.Rb||y.Sb;if(!this.o)throw new fc(this.constructor,"This browser does not support IndexedDB");this.a=[];this.c=[];this.g=Fa(this.g,this)}var hc,ic;gc.prototype.get=function(a,b,c){var d;if(!Qa(a)&&!Sa(a))throw new A(this.get,0);if(!r(b))throw new A(this.get,1);jc(this,function(e){d=e.get(a);kc(d,b,c)},c);return{cancel:function(){d&&(d.onsuccess=lc)}}};\ngc.prototype.g=function(){var a=this.b.result;a.objectStoreNames.contains("data")||a.createObjectStore("data")};\nfunction mc(a,b,c){if(a.b)a.a?(a.a.push(b),c&&a.c.push(c)):a.f?c&&c(a.f):b(a.b.result);else{a.b=a.o.open(nc+"STATIC_DB",1);a.b.onupgradeneeded=a.g;var d=a.b.onerror=function(){clearTimeout(a.v);a.f=this.error;a.c.forEach(function(e){e(a.f)});a.a=a.c=null};a.v=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500);a.b.onsuccess=function(){clearTimeout(a.v);a.a?(a.a.forEach(function(e){e(this.result)},this),a.a=a.c=null):(a.b=a.f=null,a.a=[],a.c=[])};a.a.push(b);c&&a.c.push(c)}}\nfunction jc(a,b,c){mc(a,function(d){d=d.transaction(["data"],"readwrite");b(d.objectStore("data"))},c)}function kc(a,b,c){b&&(a.onsuccess=function(){b(this.result)});c&&(a.onerror=function(){c(this.error)})}t("H.util.IndexedDBStorage.getInstance",function(){hc||(hc=new gc);return hc});var nc="H_";\nt("H.util.IndexedDBStorage.isSupported",function(){if(ic===z)if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)ic=!1;else{var a=y.indexedDB||y.jc||y.Rb||y.Sb;var b=nc+"TEST_DB";try{var c=a&&a.open(b,1)}catch(d){}ic=!!c&&null===c.onupgradeneeded;c&&a.deleteDatabase&&a.deleteDatabase(b)}return ic});function K(){0!=oc&&(pc[this[ra]||(this[ra]=++sa)]=this);this.c=this.c;this.a=this.a}var oc=0,pc={};K.prototype.c=!1;K.prototype.B=function(){if(!this.c&&(this.c=!0,this.P(),0!=oc)){var a=this[ra]||(this[ra]=++sa);if(0!=oc&&this.a&&0<this.a.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass\' method.");delete pc[a]}};\nK.prototype.N=function(a,b){this.c?void 0!==b?a.call(b):a():(this.a||(this.a=[]),this.a.push(void 0!==b?va(a,b):a))};K.prototype.P=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function L(a,b){this.type=a;this.currentTarget=this.target=b;this.a=!1;this.Za=!0}L.prototype.stopPropagation=function(){this.a=!0};L.prototype.c=function(){this.Za=!1};t("H.util.Event",L);L.prototype.stopPropagation=L.prototype.stopPropagation;L.prototype.stopPropagation=L.prototype.stopPropagation;L.prototype.CAPTURING_PHASE=1;L.prototype.CAPTURING_PHASE=L.prototype.CAPTURING_PHASE;L.prototype.AT_TARGET=2;L.prototype.AT_TARGET=L.prototype.AT_TARGET;L.prototype.BUBBLING_PHASE=3;L.prototype.BUBBLING_PHASE=L.prototype.BUBBLING_PHASE;L.prototype.eventPhase=0;L.prototype.eventPhase=L.prototype.eventPhase;function qc(a,b,c){qc.W.constructor.call(this,a,c);this.data=b}xa(qc,L);t("H.util.DataEvent",qc);function rc(a,b,c){rc.W.constructor.call(this,a,c);this.message=b}xa(rc,L);t("H.util.ErrorEvent",rc);function sc(a,b){this.c=a;this.f=b;this.b=0;this.a=null}sc.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function tc(a,b){a.f(b);100>a.b&&(a.b++,b.next=a.a,a.a=b)};function uc(){this.b=this.a=null}var wc=new sc(function(){return new vc},function(a){a.reset()});uc.prototype.add=function(a,b){var c=wc.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};function xc(){var a=yc,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function vc(){this.next=this.b=this.a=null}vc.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};vc.prototype.reset=function(){this.next=this.b=this.a=null};var Bc=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]};function Cc(a,b){return a<b?-1:a>b?1:0};var Dc;a:{var Ec=p.navigator;if(Ec){var Fc=Ec.userAgent;if(Fc){Dc=Fc;break a}}Dc=""}function Gc(a){return-1!=Dc.indexOf(a)};function Hc(a,b){this.b=a===Ic&&b||"";this.a=Jc}var Jc={},Ic={},Kc=new Hc(Ic,"");function Lc(a,b){this.b=a===Mc&&b||"";this.a=Nc}var Nc={},Mc={};function Oc(){this.a="";this.b=Pc}function Qc(){var a=Rc;if(a instanceof Oc&&a.constructor===Oc&&a.b===Pc)return a.a;oa(a);return"type_error:SafeHtml"}var Pc={};function Sc(a){var b=new Oc;b.a=a;return b}Sc("<!DOCTYPE html>");var Rc=Sc("");Sc("<br>");function Tc(a){var b=new Lc(Mc,Kc instanceof Hc&&Kc.constructor===Hc&&Kc.a===Jc?Kc.b:"type_error:Const");b instanceof Lc&&b.constructor===Lc&&b.a===Nc?b=b.b:(oa(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function Uc(a){Uc[" "](a);return a}Uc[" "]=na;var Vc=Gc("Opera"),Wc=Gc("Trident")||Gc("MSIE"),Xc=Gc("Edge"),Yc=Gc("Gecko")&&!(-1!=Dc.toLowerCase().indexOf("webkit")&&!Gc("Edge"))&&!(Gc("Trident")||Gc("MSIE"))&&!Gc("Edge"),Zc=-1!=Dc.toLowerCase().indexOf("webkit")&&!Gc("Edge");function $c(){var a=p.document;return a?a.documentMode:void 0}var ad;\na:{var bd="",cd=function(){var a=Dc;if(Yc)return/rv:([^\\);]+)(\\)|;)/.exec(a);if(Xc)return/Edge\\/([\\d\\.]+)/.exec(a);if(Wc)return/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a);if(Zc)return/WebKit\\/(\\S+)/.exec(a);if(Vc)return/(?:Version)[ \\/]?(\\S+)/.exec(a)}();cd&&(bd=cd?cd[1]:"");if(Wc){var dd=$c();if(null!=dd&&dd>parseFloat(bd)){ad=String(dd);break a}}ad=bd}var ed={},fd;fd=p.document&&Wc?$c():void 0;function gd(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function hd(a){p.setTimeout(function(){throw a;},0)}var id;\nfunction jd(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Gc("Presto")&&(a=function(){var e=gd("IFRAME");e.style.display="none";Tc(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Qc());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=va(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},\nthis);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!Gc("Trident")&&!Gc("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Oa;c.Oa=null;e()}};return function(e){d.next={Oa:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in gd("SCRIPT")?function(e){var f=gd("SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=null;\nf.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){p.setTimeout(e,0)}};function kd(a,b){ld||md();nd||(ld(),nd=!0);yc.add(a,b)}var ld;function md(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);ld=function(){a.then(od)}}else ld=function(){var b=od;!r(p.setImmediate)||p.Window&&p.Window.prototype&&!Gc("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(id||(id=jd()),id(b)):p.setImmediate(b)}}var nd=!1,yc=new uc;function od(){for(var a;a=xc();){try{a.a.call(a.b)}catch(b){hd(b)}tc(wc,a)}nd=!1};function pd(a){this.a=qd;this.v=void 0;this.f=this.b=this.c=null;this.g=this.o=!1;if(a!=na)try{var b=this;a.call(void 0,function(c){rd(b,sd,c)},function(c){rd(b,td,c)})}catch(c){rd(this,td,c)}}var qd=0,sd=2,td=3;function ud(){this.next=this.c=this.b=this.f=this.a=null;this.g=!1}ud.prototype.reset=function(){this.c=this.b=this.f=this.a=null;this.g=!1};var vd=new sc(function(){return new ud},function(a){a.reset()});function wd(a,b,c){var d=vd.get();d.f=a;d.b=b;d.c=c;return d}\nfunction xd(a,b,c){yd(a,b,c,null)||kd(wa(b,a))}function zd(a){return new pd(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,k;h<a.length;h++)k=a[h],xd(k,wa(f,h),g);else b(e)})}function Ad(){var a,b,c=new pd(function(d,e){a=d;b=e});return new Bd(c,a,b)}pd.prototype.then=function(a,b,c){return Cd(this,r(a)?a:null,r(b)?b:null,c)};pd.prototype.$goog_Thenable=!0;\npd.prototype.cancel=function(a){if(this.a==qd){var b=new Dd(a);kd(function(){Ed(this,b)},this)}};function Ed(a,b){if(a.a==qd)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.g||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==qd&&1==d?Ed(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Fd(c),Gd(c,e,td,b)))}a.c=null}else rd(a,td,b)}function Hd(a,b){a.b||a.a!=sd&&a.a!=td||Id(a);a.f?a.f.next=b:a.b=b;a.f=b}\nfunction Cd(a,b,c,d){var e=wd(null,null,null);e.a=new pd(function(f,g){e.f=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.b=c?function(h){try{var k=c.call(d,h);void 0===k&&h instanceof Dd?g(h):f(k)}catch(m){g(m)}}:g});e.a.c=a;Hd(a,e);return e.a}pd.prototype.Ea=function(a){this.a=qd;rd(this,sd,a)};pd.prototype.Ga=function(a){this.a=qd;rd(this,td,a)};\nfunction rd(a,b,c){a.a==qd&&(a===c&&(b=td,c=new TypeError("Promise cannot resolve to itself")),a.a=1,yd(c,a.Ea,a.Ga,a)||(a.v=c,a.a=b,a.c=null,Id(a),b!=td||c instanceof Dd||Jd(a,c)))}function yd(a,b,c,d){if(a instanceof pd)return Hd(a,wd(b||na,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(qa(a))try{var f=a.then;if(r(f))return Kd(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}\nfunction Kd(a,b,c,d,e){function f(k){h||(h=!0,d.call(e,k))}function g(k){h||(h=!0,c.call(e,k))}var h=!1;try{b.call(a,g,f)}catch(k){f(k)}}function Id(a){a.o||(a.o=!0,kd(a.T,a))}function Fd(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}pd.prototype.T=function(){for(var a;a=Fd(this);)Gd(this,a,this.a,this.v);this.o=!1};\nfunction Gd(a,b,c,d){if(c==td&&b.b&&!b.g)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Ld(b,c,d);else try{b.g?b.f.call(b.c):Ld(b,c,d)}catch(e){Md.call(null,e)}tc(vd,b)}function Ld(a,b,c){b==sd?a.f.call(a.c,c):a.b&&a.b.call(a.c,c)}function Jd(a,b){a.g=!0;kd(function(){a.g&&Md.call(null,b)})}var Md=hd;function Dd(a){Da.call(this,a)}xa(Dd,Da);Dd.prototype.name="cancel";function Bd(a,b,c){this.a=a;this.b=b;this.reject=c};function Nd(a,b,c){this.type=a;this.data=b;this.a=Ad();this.Va=Fa(this.Va,this);this.reject=Fa(this.reject,this);this.priority=Od;c!==z&&(this.priority=c);this.b().add(this)}var Od=1,Pd={nc:0,oc:Od,mc:2};l=Nd.prototype;l.then=function(a,b,c){return this.a.a.then(a,b,c)};l.Va=function(a){this.$=3;this.a.b(a)};l.reject=function(a){this.$=5;this.a.reject(a)};l.$=0;\nl.cancel=function(){if(3>this.$){this.c();var a=this.b(),b=this.priority,c=a.a[b].indexOf(this);-1<c?a.a[b].splice(c,1):this.Na&&a.ea.ob(this.Na);this.$=4}};function Qd(a){var b;this.a={};for(b in Pd)this.a[Pd[b]]=[];this.ea=a;this.ea.addEventListener("allocatable",Fa(this.b,this))}t("H.util.JobManager",Qd);var Rd=Object.keys(Pd).map(function(a){return Pd[a]}).sort().reverse();Qd.prototype.add=function(a){Na(a,Nd,this.add,0);this.a[a.priority].push(a);this.b()};Qd.prototype.contains=function(a){return-1<this.a[a.priority].indexOf(a)};\nQd.prototype.b=function(){Rd.forEach(function(a){this.a[a]=this.a[a].filter(function(b){var c;if((c=this.ea.pc(b))!==Ia){var d=Fa(this.ea.ob,this.ea,c,b);b.Na=c;b.then(d,d);b.$=b.qc(c)?1:5}else return!0},this)},this)};function Sd(a,b,c){var d=[],e=arguments.length;a&&d.push(Ua(a));1<e&&(e=2<e&&Oa(c,void 0,void 0,void 0)?" out of ["+c[0]+"..."+c[1]+"]":"",d.push("("+b+e+")"));d=Error(d.join(" "));Object.setPrototypeOf(d,Sd.prototype);return d}xa(Sd,Error);t("H.lang.OutOfRangeError",Sd);Sd.prototype.name="OutOfRangeError";var Td="closure_listenable_"+(1E6*Math.random()|0),Ud=0;function Vd(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ka=e;this.key=++Ud;this.V=this.fa=!1}function Wd(a){a.V=!0;a.listener=null;a.proxy=null;a.src=null;a.ka=null};function Xd(a){this.src=a;this.a={};this.b=0}Xd.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Yd(a,b,d,e);-1<g?(b=a[g],c||(b.fa=!1)):(b=new Vd(b,this.src,f,!!d,e),b.fa=c,a.push(b));return b};function Zd(a,b){var c=b.type;if(c in a.a){var d=a.a[c],e=Ea(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Wd(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}\nXd.prototype.U=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Wd(d[e]);delete this.a[c];this.b--}return b};function Yd(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.V&&f.listener==b&&f.capture==!!c&&f.ka==d)return e}return-1};var $d;($d=!Wc)||($d=9<=Number(fd));var ae=$d,be;\nif(be=Wc){var ce;if(Object.prototype.hasOwnProperty.call(ed,"9"))ce=ed["9"];else{for(var de=0,ee=Bc(String(ad)).split("."),fe=Bc("9").split("."),ge=Math.max(ee.length,fe.length),he=0;0==de&&he<ge;he++){var ie=ee[he]||"",je=fe[he]||"";do{var ke=/(\\d*)(\\D*)(.*)/.exec(ie)||["","","",""],le=/(\\d*)(\\D*)(.*)/.exec(je)||["","","",""];if(0==ke[0].length&&0==le[0].length)break;de=Cc(0==ke[1].length?0:parseInt(ke[1],10),0==le[1].length?0:parseInt(le[1],10))||Cc(0==ke[2].length,0==le[2].length)||Cc(ke[2],le[2]);\nie=ke[3];je=le[3]}while(0==de)}ce=ed["9"]=0<=de}be=!ce}var me=be,ne=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",na,b),p.removeEventListener("test",na,b)}catch(c){}return a}();function oe(a,b){L.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Yc){a:{try{Uc(b.nodeName);var e=!0;break a}catch(f){}e=\n!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=\na.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:pe[a.pointerType]||"";this.b=a;a.defaultPrevented&&this.c()}}xa(oe,L);var pe={2:"touch",3:"pen",4:"mouse"};oe.prototype.stopPropagation=function(){oe.W.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};\noe.prototype.c=function(){oe.W.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,me)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var qe="closure_lm_"+(1E6*Math.random()|0),re={},se=0;function te(a,b,c,d,e){if(d&&d.once)ue(a,b,c,d,e);else if("array"==oa(b))for(var f=0;f<b.length;f++)te(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!1,qa(d)?!!d.capture:!!d,e):we(a,b,c,!1,d,e)}\nfunction we(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=qa(e)?!!e.capture:!!e,h=xe(a);h||(a[qe]=h=new Xd(a));c=h.add(b,c,d,g,f);if(!c.proxy){d=ye();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ne||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ze(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");se++}}\nfunction ye(){var a=Ae,b=ae?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function ue(a,b,c,d,e){if("array"==oa(b))for(var f=0;f<b.length;f++)ue(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!0,qa(d)?!!d.capture:!!d,e):we(a,b,c,!0,d,e)}\nfunction Ce(a,b,c,d,e){if("array"==oa(b))for(var f=0;f<b.length;f++)Ce(a,b[f],c,d,e);else(d=qa(d)?!!d.capture:!!d,c=ve(c),a&&a[Td])?(a=a.b,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Yd(f,c,d,e),-1<c&&(Wd(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=xe(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Yd(b,c,d,e)),(c=-1<a?b[a]:null)&&De(c))}\nfunction De(a){if("number"!==typeof a&&a&&!a.V){var b=a.src;if(b&&b[Td])Zd(b.b,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ze(c),d):b.addListener&&b.removeListener&&b.removeListener(d);se--;(c=xe(b))?(Zd(c,a),0==c.b&&(c.src=null,b[qe]=null)):Wd(a)}}}function ze(a){return a in re?re[a]:re[a]="on"+a}\nfunction Ee(a,b,c,d){var e=!0;if(a=xe(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.V&&(f=Fe(f,d),e=e&&!1!==f)}return e}function Fe(a,b){var c=a.listener,d=a.ka||a.src;a.fa&&De(a);return c.call(d,b)}\nfunction Ae(a,b){if(a.V)return!0;if(!ae){if(!b)a:{b=["window","event"];for(var c=p,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new oe(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.a&&0<=e;e--){b.currentTarget=d[e];var f=Ee(d[e],a,!0,b);c=c&&f}for(e=0;!b.a&&e<d.length;e++)b.currentTarget=\nd[e],f=Ee(d[e],a,!1,b),c=c&&f}return c}return Fe(a,new oe(b,this))}function xe(a){a=a[qe];return a instanceof Xd?a:null}var Ge="__closure_events_fn_"+(1E9*Math.random()>>>0);function ve(a){if(r(a))return a;a[Ge]||(a[Ge]=function(b){return a.handleEvent(b)});return a[Ge]};function N(){K.call(this);this.b=new Xd(this);this.v=this;this.o=null}xa(N,K);N.prototype[Td]=!0;l=N.prototype;l.K=function(){return this.o};l.Ja=function(a){this.o=a};l.addEventListener=function(a,b,c,d){te(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Ce(this,a,b,c,d)};\nl.dispatchEvent=function(a){var b,c=this.K();if(c)for(b=[];c;c=c.K())b.push(c);c=this.v;var d=a.type||a;if("string"===typeof a)a=new L(a,c);else if(a instanceof L)a.target=a.target||c;else{var e=a;a=new L(d,c);Ca(a,e)}e=!0;if(b)for(var f=b.length-1;!a.a&&0<=f;f--){var g=a.currentTarget=b[f];e=g.R(d,!0,a)&&e}a.a||(g=a.currentTarget=c,e=g.R(d,!0,a)&&e,a.a||(e=g.R(d,!1,a)&&e));if(b)for(f=0;!a.a&&f<b.length;f++)g=a.currentTarget=b[f],e=g.R(d,!1,a)&&e;return e};\nl.P=function(){N.W.P.call(this);this.b&&this.b.U(void 0);this.o=null};l.R=function(a,b,c){a=this.b.a[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.V&&f.capture==b){var g=f.listener,h=f.ka||f.src;f.fa&&Zd(this.b,f);d=!1!==g.call(h,c)&&d}}return d&&0!=c.Za};t("H.util.EventTarget",N);N.prototype.Ja=N.prototype.Ja;N.prototype.setParentEventTarget=N.prototype.Ja;N.prototype.K=N.prototype.K;N.prototype.getParentEventTarget=N.prototype.K;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.dispatchEvent=N.prototype.dispatchEvent;\nN.prototype.dispatchEvent=N.prototype.dispatchEvent;N.prototype.B=N.prototype.B;N.prototype.dispose=N.prototype.B;N.prototype.N=N.prototype.N;N.prototype.addOnDisposeCallback=N.prototype.N;N.prototype.T=N.prototype.R;\nN.prototype.R=function(a,b,c){var d,e,f=!0;var g=c[c.currentTarget===c.target?"AT_TARGET":b?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];if(!d||"pointerenter"!==(e=c.type)&&"pointerleave"!==e)c.eventPhase=g,f=N.prototype.T.apply(this,arguments),d&&this.K&&null===this.K()&&delete c.eventPhase;return f};function O(a){a=a||{};var b=a.callback;this.g=a.label;r(b)&&(this.callback=b);this.f=!!a.disabled;O.W.constructor.call(this)}xa(O,N);t("H.util.ContextItem",O);O.prototype.zb=function(){return this.g};O.prototype.getLabel=O.prototype.zb;O.prototype.cc=function(a){this.g!==a&&(this.g=a,this.dispatchEvent("update"));return this};O.prototype.setLabel=O.prototype.cc;O.prototype.Pb=function(){return this.f};O.prototype.isDisabled=O.prototype.Pb;\nO.prototype.bc=function(a){a^this.f&&(this.f=a,this.dispatchEvent("update"));return this};O.prototype.setDisabled=O.prototype.bc;var He=new O;O.SEPARATOR=He;function Ie(){if(y.document){var a=document.createElement("canvas");a.width=a.height=1;a.getContext("2d")}}t("H.util.getPixelRatio",function(){return window.devicePixelRatio||1});Object.create(Ia,void 0);t("H.util.eval",function(a){return eval(a)});t("H.util.provide",function(a){var b=p.$jscomp;if(b&&("function"!=typeof b.wb?0:b.wb()))throw Error("goog.provide cannot be used within a module.");ma(a,void 0)});function Je(){this.A=0}\nJe.prototype.next=function(a){if(9007199254740992===this.A)throw new Sd(a,this.A,[0,9007199254740991]);return this.A++};var Ke=new Je;Fa(Ke.next,Ke);function lc(){}var mb=Ha([]);Ha({});Ie();Ie();function Le(a,b,c){var d=Nb(+a,-90,90);if(b&&Ra(d))throw new A(b,c,a);return d}function Me(a,b,c){var d=+a;if(-180>d||180<d)d=Mb(d+180,360)-180;if(b&&Ra(d))throw new A(b,c,a);return d}function Ne(a,b,c){var d;if(a!==z&&Ra(d=+a)&&b)throw new A(b,c,a);return d}t("H.geo.isDBC",function(a,b){return 0!==(0>a^0>b)&&180<ub(b-a)});function Q(){var a=Q;if(!0===(Na(this,a)&&this.constructor===a))throw new TypeError("Illegal constructor "+Ua(a));}t("H.geo.AbstractGeometry",Q);Q.prototype.getBoundingBox=Q.prototype.Y;Q.prototype.equals=Q.prototype.I;Q.prototype.oa="";Q.prototype.wa="";Q.prototype.toString=function(){return this.eb([this.oa.toUpperCase()," "]).join("")};Q.prototype.toString=Q.prototype.toString;Q.prototype.ec=function(){return{type:this.wa,coordinates:this.cb()}};Q.prototype.toGeoJSON=Q.prototype.ec;\nQ.prototype.ua=function(){return{type:this.oa,coordinates:this.va(),boundingBox:this.Y().ua()}};Q.prototype.forWorkerMessage=Q.prototype.ua;function R(a,b,c){this.lat=Le(a,R,0);this.lng=Me(b,R,1);c!==z&&(this.alt=Ne(c,R,2))}xa(R,Q);t("H.geo.Point",R);R.prototype.I=function(a){return this===a||!!a&&this.lat===a.lat&&this.lng===a.lng&&(this.alt||0)===(a.alt||0)};R.prototype.equals=R.prototype.I;R.prototype.ra=function(a){if(this===a||this.lat===a.lat&&this.lng===a.lng)a=0;else{var b=this.lat*Jb;var c=a.lat*Jb;a=1.274200158E7*yb(sb(1,qb(rb(xb((b-c)/2),2)+zb(b)*zb(c)*rb(xb((this.lng*Jb-a.lng*Jb)/2),2))))}return a};\nR.prototype.distance=R.prototype.ra;\nR.prototype.ic=function(a,b,c){if(c){if(b/=6371000.79){a*=Jb;var d=Jb*this.lat;var e=xb(d);var f=xb(b);var g=zb(b);var h=Jb*this.lng;var k=zb(d);d=yb(k*zb(a)*f+e*g);a=Cb(xb(a)*k*f,g-e*xb(d));a=(h+a+I)%(2*I)-I;k=a*Kb}return b?new R(d*Kb,(k+540)%360-180):this}a=(a%360+360)%360;if(0===(a+90)%180)return d=this.lng+b/(6371000.79*Hb*zb(this.lat*Jb))*(270===a?-360:360),new R(this.lat,(d+540)%360-180);if(b/=6371000.79){a*=Jb;h=this.lat*Jb;e=this.lng*Jb;f=h+b*zb(a);g=f-h;d=vb(Ab(f/2+Gb)/Ab(h/2+Gb));d=Ra(g/\nd)?zb(h):g/d;var m=b*xb(a)/d;ub(f)>Eb&&(f=0<f?I-f:-(I+f))}return b?new R(f*Kb,((e+m+Ib+(ub(h+g)>Eb?I:0))%Hb-I)*Kb):this};R.prototype.walk=R.prototype.ic;R.prototype.Y=function(){return new T(this.lat,this.lng,this.lat,this.lng)};R.prototype.getBoundingBox=R.prototype.Y;function Oe(a,b,c){var d=qa(a)&&!(Ra(a.lat=Le(a.lat))||Ra(a.lng=Me(a.lng))||a.alt!==z&&Ra(a.alt=Ne(a.alt)));if(!d&&b)throw new A(b,c,a);return d}R.validate=Oe;\nfunction Pe(a){if(!a)throw new A(Pe,0,a);return new R(a.lat,a.lng,a.alt)}R.fromIPoint=Pe;l=R.prototype;l.oa="Point";l.eb=function(a){a.push("(",this.lng," ",this.lat,")");return a};l.wa="Point";l.cb=function(){return[this.lng,this.lat,this.alt||0]};l.va=function(){return[this.lat,this.lng,this.alt||0]};var W={};t("H.geo.mercator",W);W.a=function(a){return sb(1,tb(0,.5-vb(Ab(Gb+Eb*a/180))/I/2))};W.b=function(a){return a/360+.5};W.la=function(a,b,c){c?(c.x=W.b(b),c.y=W.a(a)):c=new E(W.b(b),W.a(a));return c};W.latLngToPoint=W.la;W.tb=function(a,b){return W.la(a.lat,a.lng,b)};W.geoToPoint=W.tb;W.f=function(a){return 0>=a?90:1<=a?-90:Kb*(2*Bb(wb(I*(1-2*a)))-Eb)};W.c=function(a){return 360*(1===a?1:Mb(a,1))-180};W.X=function(a,b,c){c?(c.lat=W.f(b),c.lng=W.c(a)):c=new R(W.f(b),W.c(a));return c};\nW.xyToGeo=W.X;W.Wb=function(a,b){return W.X(a.x,a.y,b)};W.pointToGeo=W.Wb;t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function X(a,b){this.projection=a||W;this.b=0;this.a=this.exp=vb(b||256)/Db;Qe(this);this.y=this.x=0}t("H.geo.PixelProjection",X);var Re=ub(24)+ub(-8);X.prototype.Zb=W;X.prototype.projection=X.prototype.Zb;X.prototype.x=0;X.prototype.x=X.prototype.x;X.prototype.y=0;X.prototype.y=X.prototype.y;X.prototype.hc=rb(2,Re);X.prototype.w=X.prototype.hc;X.prototype.Jb=rb(2,Re);X.prototype.h=X.prototype.Jb;\nX.prototype.da=function(a){if(Ra(a))throw new A(this.da,0,a);var b=this.x/this.w;var c=this.y/this.h;this.b=a;this.a=this.exp+a;Qe(this);this.x=b*this.w;this.y=c*this.h};X.prototype.rescale=X.prototype.da;function Qe(a){a.a>Re&&(a.a=Re);a.w=rb(2,a.a);a.h=rb(2,a.a)}X.prototype.Sa=function(){return this.b||0};X.prototype.getZoomScale=X.prototype.Sa;X.prototype.sb=function(a,b){a=this.projection.la(a.lat,a.lng,b);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};X.prototype.geoToPixel=X.prototype.sb;\nX.prototype.Fa=function(a,b){return this.projection.X((a.x+this.x)/this.w,(a.y+this.y)/this.h,b)};X.prototype.pixelToGeo=X.prototype.Fa;X.prototype.X=function(a,b,c){return this.projection.X((a+this.x)/this.w,(b+this.y)/this.h,c)};X.prototype.xyToGeo=X.prototype.X;X.prototype.Ba=function(a,b,c){a=this.projection.la(a,b,c);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};X.prototype.latLngToPixel=X.prototype.Ba;X.prototype.Xb=function(a){return new E(a.x*this.w-this.x,a.y*this.h-this.y)};\nX.prototype.pointToPixel=X.prototype.Xb;t("H.util.Disposable",K);K.prototype.N=K.prototype.N;K.prototype.addOnDisposeCallback=K.prototype.N;t("H.util.dispose",function(a){a&&"function"==typeof a.B&&a.B()});K.prototype.B=K.prototype.B;K.prototype.dispose=K.prototype.B;K.prototype.P=K.prototype.P;function Se(){}t("H.util.ICancelable",Se);Se.prototype.cancel=function(){};Se.prototype.cancel=Se.prototype.cancel;function Te(a,b,c,d){this.key="";this.x=a;this.y=b;this.b=c;this.Z=d;this.a=Ad()}Te.prototype.then=function(a,b,c){return this.a.a.then(a,b,c)};Te.prototype.reject=function(a){this.a.reject(a)};Te.prototype.cancel=function(){this.a.a.cancel()};function Ue(a,b,c,d){if(!a||!b||!c)throw new A(Ue,null,"Must specify name, version and revision parameter");this.name=a;this.version=b;this.revision=c;d&&Ca(this,d)}t("H.util.BuildInfo",Ue);Ue.prototype.toString=function(){var a,b=[];for(a in this)Qa(this[a])&&b.push(this[a]);return b.join(";")};var Ve={};function We(a,b,c,d){if(!a)throw new A(We,1,"Must specify a name parameter");return Ve[a]||(Ve[a]=new Ue(a,b,c,d))}Ue.get=We;function Z(a,b,c,d,e,f){if(a&&b)this.bb(a),this.Ha(b),this.Ka(c),this.ab(e),this.$a(f),this.La(d);else throw Error(\'Parameters "scheme" and "host" must be specified\');}t("H.service.Url",Z);\nfunction Xe(a,b){var c=y.document,d,e=c&&c.createElement("a"),f="";if(c){if(b){var g=(d=c.getElementsByTagName("base")[0])&&d.href;var h=c.head;var k=d||h.appendChild(c.createElement("base"));k.href=b}e.href=a;f=e.href;b&&(d?d.href=g:h.removeChild(k))}else/[\\w]+:\\/\\//.test(a)&&(f=a);g=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(f);a=g[1];k=g[4];b=g[5];h=g[6];c=g[7];d=g[8];!g[2]&&k&&/@/.test(k)&&(k=k.split("@")[1]);g=k;h=h&&0<h.length?h.substr(1):\n"";k={};if(c)for(e=/([?&]?([^=&+]+))(=([^&]+))?/g;f=e.exec(c);)k[decodeURIComponent(f[2])]=f[4]?decodeURIComponent(f[4]):void 0;return new Z(a,g,h,k,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}Z.parse=Xe;var Ye=0;Z.prototype.clone=function(){Ye++;var a={},b;for(b in this.a)a[b]=this.a[b];return new Z(this.o,this.f,this.b,a,this.g,this.c)};Z.prototype.clone=Z.prototype.clone;\nZ.prototype.bb=function(a){if(!a||"string"!==typeof a)throw Error(\'The "scheme" parameter must be a non-empty string.\');this.o=a;return this};Z.prototype.setScheme=Z.prototype.bb;Z.prototype.Gb=function(){return this.o};Z.prototype.getScheme=Z.prototype.Gb;Z.prototype.Ha=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw Error(\'The "host" parameter is not a valid host name.\');this.f=a;return this};Z.prototype.setHost=Z.prototype.Ha;\nZ.prototype.yb=function(){return this.f};Z.prototype.getHost=Z.prototype.yb;Z.prototype.Ka=function(a){this.b=a||void 0;return this};Z.prototype.setPath=Z.prototype.Ka;Z.prototype.Db=function(){return this.b};Z.prototype.getPath=Z.prototype.Db;Z.prototype.La=function(a){if(a)if("object"==typeof a)this.a=a;else throw Error(\'Parameter "params" must be an object.\');else this.a={};return this};Z.prototype.setQuery=Z.prototype.La;Z.prototype.Kb=function(){return!Ze(this)};Z.prototype.hasQuery=Z.prototype.Kb;\nZ.prototype.getQuery=function(){return this.a};Z.prototype.getQuery=Z.prototype.getQuery;Z.prototype.ab=function(a){if(a&&isNaN(parseInt(a,10)))throw Error(\'Parameter "port" must be a number or undefined\');this.g=+a||void 0;return this};Z.prototype.setPort=Z.prototype.ab;Z.prototype.Eb=function(){return this.g};Z.prototype.getPort=Z.prototype.Eb;Z.prototype.$a=function(a){this.c=a||void 0;return this};Z.prototype.setAnchor=Z.prototype.$a;Z.prototype.ub=function(){return this.c};\nZ.prototype.getAnchor=Z.prototype.ub;Z.prototype.aa=function(a){if("object"!==typeof a)throw Error(\'Parameter "other" must be an object.\');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};Z.prototype.mergeQuery=Z.prototype.aa;Z.prototype.ib=function(a){if(!a||"string"!==typeof a)throw Error(\'Parameter "subDomain" must be a non-empty string\');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Ha(a+"."+this.f)};\nZ.prototype.addSubDomain=Z.prototype.ib;Z.prototype.jb=function(a){if(!a||"string"!==typeof a)throw Error(\'Parameter "subPath" must be a non-empty string\');return this.Ka((this.b?this.b+"/":"")+a)};Z.prototype.addSubPath=Z.prototype.jb;Z.prototype.toString=function(){return[this.o+"://",this.f,this.g?":"+this.g:"",this.b||!Ze(this)||this.c?"/":"",this.b?encodeURI(this.b):"",$e(this),this.c?"#"+encodeURIComponent(this.c):""].join("")};Z.prototype.toString=Z.prototype.toString;\nfunction $e(a){function b(g,h){return encodeURIComponent(g)+(void 0===h?"":"="+encodeURIComponent(h).replace(/[!\'()*]/g,function(k){return"%"+k.charCodeAt(0).toString(16)}))}var c=[],d,e=a.a;for(d in e)if(e.hasOwnProperty(d)&&"function"!==typeof e[d]){var f=a.a[d];Na(f,af)?f.fb.forEach(function(g){c.push(b(d,g))}):c.push(b(d,f))}return 0<c.length?"?"+c.join("&"):""}function Ze(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&"function"!==typeof a.a[b]&&(c++,0<c))break;return!c}\nfunction af(a){var b;if(!Oa(a,void 0,void 0,void 0))throw new A(af,0,a);for(b=0;b<a.length;b++){var c=a[b];if(!Qa(c)&&!Sa(c))throw new A(af,0,"The array can only contain strings and numbers");}this.fb=a}Z.MultiValueQueryParameter=af;af.prototype.Ib=function(){return this.fb};af.prototype.getValues=af.prototype.Ib;var bf={};function cf(a){try{importScripts.apply(self,arguments)}catch(b){this.postError("invalid_script")}}function df(a){bf[a]=null;this.postMessage(a)}function ef(a,b,c){if(r(b))var d=b;else try{d=self.eval("("+b+")"),r(d)||(d=null)}catch(e){}d?(bf[a]=d,c||this.postMessage(a)):this.postError("invalid_processor")}function ff(a){this.b=a&&a[0];this.a=a&&a[1];this.c=a&&a[2]||[]}ff.prototype.postError=function(a){this.postMessage(a,z,0)};\nff.prototype.postMessage=function(a,b,c){self.postMessage({processor:this.b,taskId:this.a,type:c===z?1:c,data:a},b||z)};function gf(a,b,c){if(!Qa(a))throw new A(gf,0,"InvalidArgument");if(!r(b))throw new A(gf,1,"InvalidArgument");var d=hf++;jf[d]={mimeType:c||kf,mb:b};(new ff(["3",d,[]])).postMessage(a,[],2)}var jf={},hf=0;\nfunction lf(a,b){var c=a;if(jf[this.a]){var d=jf[this.a];var e=d.mb;delete jf[this.a];if(b)e(null,b);else{if(d.mimeType===mf){a=new Uint8Array(a);b=a.byteLength;d="";c=0;for(var f,g,h,k;c<b;)f=a[c++],192>f||(g=a[c++],224>f?f=(f&31)<<6|g&63:(h=a[c++],240>f?f=(f&15)<<12|(g&63)<<6|h&63:(k=a[c++],f=(f&7)<<18|(g&63)<<12|(h&63)<<6|k&63))),65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10)+55296,(f&1023)+56320));c=d}e(c)}}}var kf=0,mf=1;function T(a,b,c,d){nf(this,Le(a,T,0),Me(b,T,1),Le(c,T,2),Me(d,T,3))}xa(T,Q);t("H.geo.Rect",T);T.prototype.oa="Polygon";T.prototype.eb=function(a){var b=this.m,c=this.i,d=this.l,e=this.j;a.push("(","(",c," ",b,",",e," ",b,",",e," ",d,",",c," ",d,",",c," ",b,")",")");return a};T.prototype.I=function(a){return this===a||!!a&&this.m===a.m&&this.i===a.i&&this.l===a.l&&this.j===a.j};T.prototype.equals=T.prototype.I;T.prototype.clone=function(){return new T(this.m,this.i,this.l,this.j)};\nT.prototype.clone=T.prototype.clone;function nf(a,b,c,d,e){a.i=c;a.j=e;b<d&&(c=b,b=d,d=c);a.m=b;a.l=d;a.c=a.a=a.b=null;return a}T.prototype.Ra=function(){this.c||(this.c=new R(this.m,this.i));return this.c};T.prototype.getTopLeft=T.prototype.Ra;T.prototype.Qa=function(){this.a||(this.a=new R(this.l,this.j));return this.a};T.prototype.getBottomRight=T.prototype.Qa;T.prototype.Hb=function(){return this.m};T.prototype.getTop=T.prototype.Hb;T.prototype.vb=function(){return this.l};\nT.prototype.getBottom=T.prototype.vb;T.prototype.Ab=function(){return this.i};T.prototype.getLeft=T.prototype.Ab;T.prototype.Fb=function(){return this.j};T.prototype.getRight=T.prototype.Fb;T.prototype.J=function(){this.b||(this.b=new R(this.l+(this.m-this.l)/2,of(this.i,this.L())));return this.b};T.prototype.getCenter=T.prototype.J;T.prototype.L=function(){return pf(this.i,this.j)};T.prototype.getWidth=T.prototype.L;T.prototype.S=function(){return this.m-this.l};T.prototype.getHeight=T.prototype.S;\nT.prototype.Nb=function(){return this.i>this.j};T.prototype.isCDB=T.prototype.Nb;T.prototype.Qb=function(){return!this.L()&&!this.S()};T.prototype.isEmpty=T.prototype.Qb;T.prototype.Y=function(){return new T(this.m,this.i,this.l,this.j)};T.prototype.getBoundingBox=T.prototype.Y;T.prototype.ga=function(a,b,c){var d=this.J();c||(a=Le(a,this.ga,0),b=Me(b,this.ga,1));b=this.M(a,b,c);a=b.J();return a.lat===d.lat&&a.lng===d.lng&&this.S()===b.S()&&this.L()===b.L()};T.prototype.containsLatLng=T.prototype.ga;\nT.prototype.ha=function(a,b){b||Oe(a,this.ha,0);return this.ga(a.lat,a.lng,b)};T.prototype.containsPoint=T.prototype.ha;T.prototype.Pa=function(a,b){var c=this.J();if(!b&&!Na(a,T))throw new A(this.Pa,0,a);b=this.ma(a,b);a=b.J();return a.lat===c.lat&&a.lng===c.lng&&this.S()===b.S()&&this.L()===b.L()};T.prototype.containsRect=T.prototype.Pa;\nT.prototype.M=function(a,b,c,d){if(!c){if(Ra(a=Le(a)))throw new A(this.M,0,a);if(Ra(b=Me(b)))throw new A(this.M,1,b);}return qf(this.m,this.i,this.l,this.j,a,b,a,b,d)};T.prototype.mergeLatLng=T.prototype.M;T.prototype.Wa=function(a,b,c){b||Oe(a,this.Wa,0);return this.M(a.lat,a.lng,b,c)};T.prototype.mergePoint=T.prototype.Wa;T.prototype.ma=function(a,b,c){if(!b&&!Na(a,T))throw new A(this.ma,0,a);return qf(this.m,this.i,this.l,this.j,a.m,a.i,a.l,a.j,c)};T.prototype.mergeRect=T.prototype.ma;\nT.prototype.ba=function(a,b,c,d,e,f){e||(a=Le(a,this.ba,0),b=Me(b,this.ba,1),c=Le(c,this.ba,2),d=Me(d,this.ba,3));return qf(this.m,this.i,this.l,this.j,a,b,c,d,f)};T.prototype.mergeTopLeftBottomRight=T.prototype.ba;T.prototype.Ua=function(a,b){var c=this.i<=this.j,d=a.i<=a.j,e=this.i<a.j,f=a.i<this.j;if(!b&&!Na(a,T))throw new A(this.Ua,0,a);return this.l<=a.m&&a.l<=this.m&&(!c&&(!d||e||f)||!d&&(e||f)||e&&f)};T.prototype.intersects=T.prototype.Ua;function pf(a,b){a=b-a;return a+(0>a?360:0)}\nfunction of(a,b){a+=b/2;return a-(180<a?360:0)}function qf(a,b,c,d,e,f,g,h,k){c=sb(c,g);a=tb(a,e);e=pf(b,d);var m=of(b,e);g=pf(f,h);var n=of(f,g)-m;n+=0>n-1E-6?360:0;if(180>n-1E-6){m=b;var q=h}else n=360-n,m=f,q=d;n=n+e/2+g/2;360<=n+5E-7?(m=-180,q=180):n-5E-7<e?(m=b,q=d):n-5E-7<g&&(m=f,q=h);return k?nf(k,a,m,c,q):new T(a,m,c,q)}T.merge=qf;function rf(a,b,c){c||(Oe(a,rf,0),Oe(b,rf,1));return new T(a.lat,a.lng,b.lat,b.lng)}T.fromPoints=rf;\nfunction sf(a,b){var c=1,d=a.length,e=null;var f=oa(a);if("array"!=f&&("object"!=f||"number"!=typeof a.length))throw new A(sf,0,a);if(0<d)for(f=a[0],e=rf(f,f,b);c<d;c++)f=a[c],e.M(f.lat,f.lng,b,e);return e}T.coverPoints=sf;function tf(a,b){var c=3,d=a.length,e;if(!(b||a&&null!=a.length))throw new A(tf,0,a);if(0<d)for(e=new T(a[0],a[1],a[0],a[1]);c<d;c+=3)e.M(a[c],a[c+1],b,e);return e}T.coverLatLngAlts=tf;\nfunction uf(a,b){var c=1,d=a.length,e;if(b&&(!a||null==a.length))throw new A(uf,0,a);if(0<d)for(e=new T(a[0].m,a[0].i,a[0].l,a[0].j);c<d;c++)e.ma(a[c],b,e);return e}T.coverRects=uf;\nT.prototype.Ya=function(a,b){var c=this.i,d=this.m,e=this.j,f=this.l,g=this.J().lng;Oe(a,this.Ya,0);var h=a.lat-f-(d-f)/2;var k=a.lng-g;k=180<k||-180>k?-(g+a.lng):k;a=c+(0>k?2*k:0);a=-180>a?360+a:a;e+=0<k?2*k:0;e=180<e?e-360:e;d=0<h?d+2*h:d;90<=d&&(d=90);f=0>h?f+2*h:f;-90>=f&&(f=-90);return b?nf(b,d,a,f,e):new T(d,a,f,e)};T.prototype.resizeToCenter=T.prototype.Ya;T.prototype.wa="Polygon";\nT.prototype.cb=function(){return[[this.i,this.m,0],[this.j,this.m,0],[this.j,this.l,0],[this.i,this.l,0],[this.i,this.m,0]]};T.prototype.ua=function(){return this.va()};T.prototype.va=function(){return[this.m,this.i,this.l,this.j]};function vf(a,b,c,d){var e=!!c,f,g=0,h=0,k=0,m=0,n=0,q,u=-1;var J=y.Float32Array;var M,v=[];if(b){b=La(b);a=La(a);e&&(f=La(c));c=b.length;d=d?1E-7:1E-5;for(M=new J(3*c);g<c;){J=b[g];var G=+J;var Y=+a[g];e&&(q=+f[g]);wf.test(J)?0<=u&&(0<g-u&&v.push(u,g+1),u=-1):0>u&&(u=g);g++;m=M[h++]=m+Y*d;k=M[h++]=k+G*d;e&&(n=M[h]=n+q);h++}0<=u&&1<c-u&&v.push(u,c)}else M=new J(0);return{path:M,outlineIndices:v}}var wf=/^-?0\\d/;\nfunction xf(a,b){for(var c=0,d=a.length/3,e=new y.Array(d),f=0;c<d;)e[c++]=b.Ba(a[f],a[++f]),f+=2;return e};function yf(a,b){b=180/(1<<b);var c=a.lat+90;a=(a.lng+180)%360;var d=0;180==c&&d--;d+=Math.floor(c/b);return[d,Math.floor(a/b)]}var zf=1/Math.pow(10,10);function Af(a,b){var c=[],d=a.Ra();a=a.Qa();var e;180==a.lng&&(a.lng-=zf);d=yf(d,b);a=yf(a,b);for(e=d[0];e>=a[0];e--)for(b=d[1];b<=a[1];b++)c.push(e,b);return c};function Bf(a,b){var c=a.tileSize||256;this.b={};this.v=Xe(a.serverUrl);this.g=b;this.fc=a.layerConfigs||[];this.o=a.projected;this.T=c;this.Ea=!1!==a.batchTiles;this.Ga=a.horizontalMargin||0;this.gc=a.onlyOutline;this.gb=new X(Ia,c);this.f=new X(Ia,c);this.f.da(22-Math.log(c)/Math.LN2+8)}xa(Bf,K);l=Bf.prototype;\nl.ac=function(a,b,c){var d=this.T,e=this.Ga,f={x:a*d-e,y:b*d};d={x:(a+1)*d-1+e,y:(b+1)*d-1};e=this.gb;e.da(c);f=e.Fa(f);d=e.Fa(d);return Cf(this,new T(f.lat,f.lng,d.lat,d.lng),this.fc,{x:a,y:b,z:c})};l.$b=function(a,b,c,d,e){return Cf(this,new T(a,b,c,d),e)};\nfunction Cf(a,b,c,d){var e=Df(c),f=e.length,g={},h,k=a.b,m=[],n=[];for(c=0;c<f;c++){var q=e[c];var u=q.layerId;var J=q.level;g[u]=q.columns;q=Af(b,J);var M=q.length-1;for(h=0;h<M;h+=2){var v=[u,q[h+1],q[h],J].join("_");var G=k[v]||a.g.get(v);G||(G=new Te(q[h+1],q[h],J,u),G.key=v,k[v]=G,n.push(G));m.push(G)}}n.length&&(a.Ea?Ef(a,n):Ff(a,n));return zd(m.map(function(Y){return Y.then(Fa(this.qb,this,Y.Z,Gf(e))).then(Fa(this.Yb,this,Y,d||{})).then(Fa(this.rb,this,g[Y.Z]))},a))}\nl.qb=function(a,b,c){var d=c.Rows,e=d.length,f,g;if(e&&(f=b[a])){b=new D(c.Rows);var h=[];for(g=0;g<e;g++){var k=d[g];f(b.ja(g),a)&&h.push(k)}a={Rows:h};if(c=c.Meta)a.Meta=c}else a=c;return a};function Ff(a,b){function c(k,m,n){n?(delete a.b[k.key],k.reject(n)):Hf(a,k,m)}var d,e=b.length,f=a.v;for(d=0;d<e;d++){var g=b[d];var h=f.clone().aa({tilex:g.x}).aa({tiley:g.y}).aa({level:g.b}).aa({layer:g.Z});new gf(h.toString(),Fa(c,null,g),mf)}}\nfunction Ef(a,b){var c=b.length,d;for(d=0;d<c;d+=15){var e=b.slice(d,d+15);If(a,e)}}function If(a,b){var c=a.v.clone(),d=[],e=[],f=[],g=c.getQuery();b.length&&(b.forEach(function(h){d.push(h.x,h.y);e.push(h.b);f.push(h.Z)}),g.tilexy=d.join(","),g.layers=f.join(","),g.levels=e.join(","),c.La(g),new gf(c.toString(),function(h,k){k?b.forEach(function(m){delete a.b[m.key];m.reject("error")}):Hf(a,b,h)},mf))}\nfunction Hf(a,b,c){var d=b.length,e;if(Oa(b,void 0,void 0,void 0)){var f=c.indexOf("[")+1;for(e=0;e<d;e++){var g=c.indexOf("]},{",f+3)+2;g<f&&(g=c.lastIndexOf("]}"));var h=c.substr(f,g-f);f=g+1;Jf(a,b[e],h)}}else Jf(a,b,c)}function Jf(a,b,c){try{var d=c.length;var e=b.key;delete a.b[e];a.g.add(e,b,2*d);var f=JSON.parse(c);b.a.b(f)}catch(g){b.reject(g.message)}}\nfunction Gf(a){var b={},c,d=a.length;for(c=0;c<d;c++){var e=a[c];if(e.rowFilter){var f=e.layerId;f=f!==z?f:e.layer;b[f]=Fa(e.rowFilter,e.rowFilterContext)}}return b}function Kf(a,b,c,d,e){return e?[new E(a,b),new E(c,b),new E(c,d),new E(a,d),new E(a,b)]:[a,b,c,b,c,d,a,d]}\nl.Yb=function(a,b,c){var d=this.f.Sa()-b.z,e=this.T<<d,f=50<<d,g=b.x*e;b=b.y*e;var h=g+e;e=b+e;var k=g-f,m=b-f,n=h+f;f=e+f;var q,u,J=c.Rows,M=J.length,v,G=/^ADAS/.test(a.Z),Y=this.f,pa=this.gc,S,ab=[],Ja=[],Ka=[],bb=[];for(a=0;a<M;a++){var w=v=J[a];var P=(S=G)?"HPY":"LAT";var U=S?"HPX":"LON";var ea=S?"HPZ":"ZLEVEL";if(w[P]){var V=vf(w[P],w[U],w[ea],S);w.geometry=V;delete w[P];delete w[U];delete w[ea];if(w.INNER_LAT)for(P=w.INNER_LAT.split(";"),V=w.INNER_LON.split(";"),delete w.INNER_LAT,delete w.INNER_LON,\nw.interiors=ea=[],U=P.length,w=0;w<U;w++)ea.push(vf(P[w],V[w],"",S))}if(this.o){S=void 0;U=v;V=Y;P=U.$$projected$$;if(!P){var ba=U.geometry;w=xf(ba.path,V);v=[w];U.$$projected$$=P={Vb:v};U=(ea=U.interiors)?ea.length:0;v.length+=U;S|=Lf(v,w,ba.outlineIndices);if(U)for(P.Lb=1,q=0;q<U;q++)ba=ea[q],w=xf(ba.path,V),v[1+q]=w,S|=Lf(v,w,ba.outlineIndices);S&&(P.Tb=1+U)}w=P;S=w.Vb;v=w.Lb;var zc=w.Tb;V=[];P=U=Lb;var cb=ea=z;w=S[0];if(1===w.length){var Ac=Ac||(Ac=Kf(g,b,h,e,!1));v=w[0];Rb(v.x,v.y,Ac)&&V.push(Mf(w,\ng,b,d))}else{var Be=S.length;for(ba=pa?zc:0;ba<Be&&(pa||!ba||V.length);ba++)if(w=S[ba],ba>=zc){ba===zc&&(P=V.length);var ja=Ub([w],k,m,n,f,!1);Nf(ja,g,b,d,V)}else{var Fb=Fb||(Fb=Kf(k,m,n,f,!0));if(ba>=v)if(ba===v&&(U=V.length),cb)for(q=cb.length;q--;){if(ja=Of(cb[q],w),u=ja.length){for(ea=ea||[];u--;)ea.push(q);Nf(ja,g,b,d,V)}}else ja=Of(Fb,w),Nf(ja,g,b,d,V);else if(ja=Of(Fb,w),Nf(ja,g,b,d,V),1<ja.length&&v<Be)for(cb=[],q=ja.length;q--;)cb[q]=ja[q]}}V.length&&(ab[a]=V,Ja[a]=U,Ka[a]=ea,bb[a]=P)}}return{dc:c,\nnb:ab,Mb:Ja,pb:Ka,Ub:bb}};function Lf(a,b,c){for(var d=c.length,e=0,f,g,h=b.length;e<d;)f=c[e++],g=c[e++],a.push(g-f===h?b:b.slice(f,g));return 0<c.length}function Of(a,b){var c,d=[];if(c=Wb(a,b)){do{a=[];b=c;do a.push(b);while(b=b.next);d.push(a)}while(c=c.Xa)}else Sb(b[0],Tb(a))?d.push(b):Sb(a[0],Tb(b))&&d.push(a);return d}function Nf(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++)e.push(Mf(a[f],b,c,d))}\nfunction Mf(a,b,c,d){var e,f=a.length,g=new Int32Array(2*f),h=0;for(e=0;e<f;e++){var k=a[e];g[h++]=k.x-b>>d;g[h++]=k.y-c>>d}return g}\nl.rb=function(a,b){var c=b.dc,d=b.nb,e=b.Mb,f=b.Ub;b=b.pb;for(var g=[],h,k={Rows:g},m,n=a?a.length:0,q=0,u,J=c.Rows,M=J.length,v;q<M;q+=1)if(d[q]||!this.o){h={};u=J[q];if(n)for(m=0;m<n;m++)u.hasOwnProperty(a[m])&&(h[a[m]]=u[a[m]]);else for(v in u)"$$projected$$"!==v&&(h[v]=u[v]);u.geometry&&(h.geometry=u.geometry);m=void 0;var G,Y=h,pa=d[q],S=e[q],ab=b[q],Ja=f[q],Ka=g;if(pa){var bb=pa.length;if(ab)for(G=S;G--;){if(G){var w={};for(m in Y)w[m]=Y[m]}else w=Y;u=[pa[G]];var P=sb(bb,Ja)-S;for(h=0;h<P;h++)ab[h]===\nG&&u.push(pa[S+h]);P=u.length;if(!G)for(h=Ja;h<bb;h++)u.push(pa[h]);w.$HProjGeometry={paths:u,interiorsIndex:1,outlinesIndex:P};Ka.push(w)}else Y.$HProjGeometry={paths:pa,interiorsIndex:S,outlinesIndex:Ja},Ka.push(Y)}else Ka.push(Y)}c.Meta&&(k.Meta=c.Meta);return k};l.P=function(){var a,b=this.b;for(a in b)b.hasOwnProperty(a)&&(b[a].reject("disposed"),delete b[a])};\nfunction Df(a){for(var b=[],c,d=a.length,e=0;e<d;e++){c=Aa(a[e]);if(c.rowFilter&&(c.rowFilter=eval("("+c.rowFilter+")"),!r(c.rowFilter)))throw Error("Invalid row filter for layer "+c.layerId);b.push(c)}return b};t("H.service.extension.worker.processor",function(a,b,c){function d(h){e.postMessage(h)}var e=this,f=za[a];var g=function(h){e.postError(h.toString())};if(0===b)f||(za[a]=new Bf(c,Pf)),this.postMessage();else if(f)switch(b){case 1:try{f.ac.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 2:try{f.$b.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 3:f.B();delete za[a];ya()&&Pf.U();break;default:e.postError("Unsupported command")}});\nvar Pf=new B(26214400),za=Object.create(Ia,void 0);function Qf(a,b,c){var d=a[b];a=a[b+1];this.Ta=[];this.Ma=0;this.b=b;this.a=[a-c,d-c,a+c,d+c]}Qf.prototype.ha=function(a,b){var c=a[b];a=a[b+1];b=this.a;return b[1]<=c&&c<=b[3]&&b[0]<=a&&a<=b[2]};Qf.prototype.J=function(){return this.b};var Rf=new E(0,0);function Sf(a,b,c,d,e){d[e]=b;d[e+1]=a}var Tf=new X;function Uf(a,b,c,d,e){Tf.Ba(a,b,Rf);d[e]=Rf.x;d[e+1]=Rf.y}\nt("H.clustering.dynamicgrid.worker",function(a,b,c,d,e){var f=e?Sf:Uf,g=0;e=!!self.ArrayBuffer;var h=a.byteLength?new Float64Array(a):a,k=h.length/3;a=[];var m=[],n=[],q=e?new Float64Array(2*k):[];k=0;var u=0;for(Tf.da(d);g<h.length;){var J=h[g++];var M=h[g++];var v=h[g++];f(v,M,d,q,u);for(v=a.length;v--;)if(M=a[v],M.ha(q,u)){var G=M;break}G||(G=new Qf(q,u,b),a.push(G));v=u/2;G.Ma+=J||1;G.Ta.push(v);G=null;u+=2}for(v=a.length;v--;)M=a[v],b=M.Ma>=c,f=M.Ta,d=f.length,b?(m.push(d),m=m.concat(f)):\n(k+=d,n=n.concat(f));c=[k].concat(n,m);c=e?(new Uint32Array(c)).buffer:c;this.postMessage(c,[c])});self.addEventListener("message",function(a){a=new ff(a.data);var b=bf[a.b];if(b)try{b.apply(a,a.c)}catch(c){a.postError(c.message)}else a.postError("processor_not_found")});(function(){var a=new ff;var b=function(c,d){ef.apply(a,[c,d,!0])};b("0",cf);b("1",ef);b("2",df);b("3",lf)})();\n',function t(){var e,n,i;"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||!(module.exports||"undefined"!=typeof window)||(e=t.toString(),n="",i="undefined"!=typeof document&&document.currentScript instanceof HTMLScriptElement?document.currentScript.src:""),function(){function t(t){return r.call(t).slice(8,-1)}var r={}.toString,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(t,e){return t(e={exports:{}},e.exports),e.exports}function a(t){return t&&t.Math==Math&&t}function l(t){try{return!!t()}catch(t){return!0}}function c(t){return"object"==typeof t?null!==t:"function"==typeof t}function u(t){return x?w.createElement(t):{}}function h(t){if(!c(t))throw TypeError(String(t)+" is not an object");return t}function f(t,e){if(!c(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!c(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!c(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!c(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}function p(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function d(t,e){try{E(b,t,e)}catch(o){b[t]=e}return e}function g(t){return"Symbol(".concat(void 0===t?"":t,")_",(++C+M).toString(36))}function m(t){return R[t]||(R[t]=L&&O[t]||(L?O:g)("Symbol."+t))}function v(e){var n,i,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(n=Object(e),I))?i:P?t(n):"Object"==(r=t(n))&&"function"==typeof n.callee?"Arguments":r}var y="object",b=a(typeof globalThis==y&&globalThis)||a(typeof window==y&&window)||a(typeof self==y&&self)||a(typeof o==y&&o)||Function("return this")(),_=!l((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),w=b.document,x=c(w)&&c(w.createElement),k=!_&&!l((function(){return 7!=Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a})),S=Object.defineProperty,A={f:_?S:function(t,e,n){if(h(t),e=f(e,!0),h(n),k)try{return S(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},E=_?function(t,e,n){return A.f(t,e,p(1,n))}:function(t,e,n){return t[e]=n,t},T=s((function(t){var e="__core-js_shared__",n=b[e]||d(e,{});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.1.0",mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})})),C=0,M=Math.random(),L=!l((function(){return!String(Symbol())})),R=T("wks"),O=b.Symbol,I=m("toStringTag"),P="Arguments"==t(function(){return arguments}()),N={};function D(t,e){return K.call(t,e)}function j(t){return J[t]||(J[t]=g(t))}N[m("toStringTag")]="z";var z,$,F,B,U,G,V,W,q="[object z]"!==String(N)?function(){return"[object "+v(this)+"]"}:N.toString,K={}.hasOwnProperty,Y=T("native-function-to-string",Function.toString),X=b.WeakMap,Z="function"==typeof X&&/native code/.test(Y.call(X)),J=T("keys"),Q={},tt=b.WeakMap;V=Z?(z=new tt,$=z.get,F=z.has,B=z.set,U=function(t,e){return B.call(z,t,e),e},G=function(t){return $.call(z,t)||{}},function(t){return F.call(z,t)}):(W=j("state"),Q[W]=!0,U=function(t,e){return E(t,W,e),e},G=function(t){return D(t,W)?t[W]:{}},function(t){return D(t,W)});var et={set:U,get:G,has:V,enforce:function(t){return V(t)?G(t):U(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=G(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},nt=s((function(t){var e=et.get,n=et.enforce,i=String(Y).split("toString");T("inspectSource",(function(t){return Y.call(t)})),(t.exports=function(t,e,r,o){var s=!!o&&!!o.unsafe,a=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof e||D(r,"name")||E(r,"name",e),n(r).source=i.join("string"==typeof e?e:"")),t!==b?(s?!l&&t[e]&&(a=!0):delete t[e],a?t[e]=r:E(t,e,r)):a?t[e]=r:d(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||Y.call(this)}))})),it=Object.prototype;function rt(t){return isNaN(t=+t)?0:(0<t?gt:dt)(t)}function ot(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function st(t){return _t(ot(t))}function at(t){return 0<t?kt(rt(t),9007199254740991):0}function lt(t,e){var n,i=st(t),r=0,o=[];for(n in i)!D(Q,n)&&D(i,n)&&o.push(n);for(;e.length>r;)D(i,n=e[r++])&&(~Et(o,n)||o.push(n));return o}function ct(t,e){var n=Nt[Pt(t)];return n==jt||n!=Dt&&("function"==typeof e?l(e):!!e)}function ut(t,e){var n,i,r,o,s=t.target,a=t.global,l=t.stat,c=a?b:l?b[s]||d(s,{}):(b[s]||{}).prototype;if(c)for(n in e){if(r=e[n],i=t.noTargetGet?(o=$t(c,n))&&o.value:c[n],!zt(a?n:s+(l?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;!function(t,e){for(var n=Ot(e),i=A.f,r=xt.f,o=0;o<n.length;o++){var s=n[o];D(t,s)||i(t,s,r(e,s))}}(r,i)}(t.sham||i&&i.sham)&&E(r,"sham",!0),nt(c,n,r,t)}}q!==it.toString&&nt(it,"toString",q,{unsafe:!0});var ht,ft,pt,dt=Math.ceil,gt=Math.floor,mt={}.propertyIsEnumerable,vt=Object.getOwnPropertyDescriptor,yt={f:vt&&!mt.call({1:2},1)?function(t){var e=vt(this,t);return!!e&&e.enumerable}:mt},bt="".split,_t=l((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==t(e)?bt.call(e,""):Object(e)}:Object,wt=Object.getOwnPropertyDescriptor,xt={f:_?wt:function(t,e){if(t=st(t),e=f(e,!0),k)try{return wt(t,e)}catch(t){}if(D(t,e))return p(!yt.f.call(t,e),t[e])}},kt=Math.min,St=Math.max,At=Math.min,Et=(!1,function(t,e,n){for(var i,r,o=st(t),s=at(o.length),a=(i=s,(r=rt(n))<0?St(r+i,0):At(r,i));a<s;a++)if(a in o&&o[a]===e)return a||0;return-1}),Tt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ct=Tt.concat("length","prototype"),Mt={f:Object.getOwnPropertyNames||function(t){return lt(t,Ct)}},Lt={f:Object.getOwnPropertySymbols},Rt=b.Reflect,Ot=Rt&&Rt.ownKeys||function(t){var e=Mt.f(h(t)),n=Lt.f;return n?e.concat(n(t)):e},It=/#|\.prototype\./,Pt=ct.normalize=function(t){return String(t).replace(It,".").toLowerCase()},Nt=ct.data={},Dt=ct.NATIVE="N",jt=ct.POLYFILL="P",zt=ct,$t=xt.f,Ft=!l((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Bt=j("IE_PROTO"),Ht=Object.prototype,Ut=Ft?Object.getPrototypeOf:function(t){return D(t=Object(ot(t)),Bt)?t[Bt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ht:null},Gt=m("iterator"),Vt=!1;function Wt(){}[].keys&&("next"in(pt=[].keys())?(ft=Ut(Ut(pt)))!==Object.prototype&&(ht=ft):Vt=!0),null==ht&&(ht={}),D(ht,Gt)||E(ht,Gt,(function(){return this}));var qt={IteratorPrototype:ht,BUGGY_SAFARI_ITERATORS:Vt},Kt=Object.keys||function(t){return lt(t,Tt)},Yt=_?Object.defineProperties:function(t,e){h(t);for(var n,i=Kt(e),r=i.length,o=0;o<r;)A.f(t,n=i[o++],e[n]);return t},Xt=b.document,Zt=Xt&&Xt.documentElement,Jt=j("IE_PROTO"),Qt="prototype",te=function(){var t,e=u("iframe"),n=Tt.length;for(e.style.display="none",Zt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),te=t.F;n--;)delete te[Qt][Tt[n]];return te()},ee=Object.create||function(t,e){var n;return null!==t?(Wt[Qt]=h(t),n=new Wt,Wt[Qt]=null,n[Jt]=t):n=te(),void 0===e?n:Yt(n,e)};function ne(t,e,n){t&&!D(t=n?t:t.prototype,ae)&&se(t,ae,{configurable:!0,value:e})}function ie(){return this}function re(){return this}function oe(t,e,n,i,r,o,s){var a,l,c;function u(t){if(t===r&&b)return b;if(!pe&&t in v)return v[t];switch(t){case"keys":case de:case ge:return function(){return new n(this,t)}}return function(){return new n(this)}}l=i,c=e+" Iterator",(a=n).prototype=ee(ce,{next:p(1,l)}),ne(a,c,!1),le[c]=ie;var h,f,d,g=e+" Iterator",m=!1,v=t.prototype,y=v[he]||v["@@iterator"]||r&&v[r],b=!pe&&y||u(r),_="Array"==e&&v.entries||y;if(_&&(h=Ut(_.call(new t)),fe!==Object.prototype&&h.next&&(Ut(h)!==fe&&(ue?ue(h,fe):"function"!=typeof h[he]&&E(h,he,re)),ne(h,g,!0))),r==de&&y&&y.name!==de&&(m=!0,b=function(){return y.call(this)}),v[he]!==b&&E(v,he,b),le[e]=b,r)if(f={values:u(de),keys:o?b:u("keys"),entries:u(ge)},s)for(d in f)!pe&&!m&&d in v||nt(v,d,f[d]);else ut({target:e,proto:!0,forced:pe||m},f);return f}Q[Jt]=!0;var se=A.f,ae=m("toStringTag"),le={},ce=qt.IteratorPrototype,ue=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(n){}return function(n,i){return function(t,e){if(h(t),!c(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(n,i),e?t.call(n,i):n.__proto__=i,n}}():void 0),he=m("iterator"),fe=qt.IteratorPrototype,pe=qt.BUGGY_SAFARI_ITERATORS,de="values",ge="entries",me="String Iterator",ve=et.set,ye=et.getterFor(me);oe(String,"String",(function(t){ve(this,{type:me,string:String(t),index:0})}),(function(){var t,e,n,i,r,o,s,a=ye(this),l=a.string,c=a.index;return c>=l.length?{value:void 0,done:!0}:(e=c,r=String(ot(l)),o=rt(e),s=r.length,t=o<0||s<=o?"":(n=r.charCodeAt(o))<55296||56319<n||o+1===s||(i=r.charCodeAt(o+1))<56320||57343<i?r.charAt(o):r.slice(o,o+2),a.index+=t.length,{value:t,done:!1})}));var be={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},_e=m("unscopables"),we=Array.prototype;function xe(t){we[_e][t]=!0}null==we[_e]&&E(we,_e,ee(null));var ke="Array Iterator",Se=et.set,Ae=et.getterFor(ke),Ee=oe(Array,"Array",(function(t,e){Se(this,{type:ke,target:st(t),index:0,kind:e})}),(function(){var t=Ae(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}}),"values");le.Arguments=le.Array,xe("keys"),xe("values"),xe("entries");var Te=m("iterator"),Ce=m("toStringTag"),Me=Ee.values;for(var Le in be){var Re=b[Le],Oe=Re&&Re.prototype;if(Oe){if(Oe[Te]!==Me)try{E(Oe,Te,Me)}catch(o){Oe[Te]=Me}if(Oe[Ce]||E(Oe,Ce,Le),be[Le])for(var Ie in Ee)if(Oe[Ie]!==Ee[Ie])try{E(Oe,Ie,Ee[Ie])}catch(o){Oe[Ie]=Ee[Ie]}}}function Pe(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Ne(t,e,n){if(Pe(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}var De=m("iterator"),je=Array.prototype,ze=m("iterator"),$e=s((function(t){var e={};(t.exports=function(t,n,i,r,o){var s,a,l,c,u,f,p=Ne(n,i,r?2:1);if(o)s=t;else{if("function"!=typeof(a=function(t){if(null!=t)return t[ze]||t["@@iterator"]||le[v(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(f=a)&&(le.Array===f||je[De]===f)){for(l=0,c=at(t.length);l<c;l++)if((r?p(h(u=t[l])[0],u[1]):p(t[l]))===e)return e;return}s=a.call(t)}for(;!(u=s.next()).done;)if(function(t,e,n,i){try{return i?e(h(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&h(r.call(t)),e}}(s,p,u.value,r)===e)return e}).BREAK=e})),Fe=m("iterator"),Be=!1;try{var He=0;({next:function(){return{done:!!He++}},return:function(){Be=!0}})[Fe]=function(){return this}}catch(o){}function Ue(t,e){var n,i=h(t).constructor;return void 0===i||null==(n=h(i)[Ze])?e:Pe(n)}function Ge(t){var e;sn.hasOwnProperty(t)&&(e=sn[t],delete sn[t],e())}function Ve(t){return function(){Ge(t)}}function We(t){Ge(t.data)}function qe(t){b.postMessage(t+"",Je.protocol+"//"+Je.host)}var Ke,Ye,Xe,Ze=m("species"),Je=b.location,Qe=b.setImmediate,tn=b.clearImmediate,en=b.process,nn=b.MessageChannel,rn=b.Dispatch,on=0,sn={},an="onreadystatechange";Qe&&tn||(Qe=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return sn[++on]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ke(on),on},tn=function(t){delete sn[t]},"process"==t(en)?Ke=function(t){en.nextTick(Ve(t))}:rn&&rn.now?Ke=function(t){rn.now(Ve(t))}:nn?(Xe=(Ye=new nn).port2,Ye.port1.onmessage=We,Ke=Ne(Xe.postMessage,Xe,1)):!b.addEventListener||"function"!=typeof postMessage||b.importScripts||l(qe)?Ke=an in u("script")?function(t){Zt.appendChild(u("script"))[an]=function(){Zt.removeChild(this),Ge(t)}}:function(t){setTimeout(Ve(t),0)}:(Ke=qe,b.addEventListener("message",We,!1)));var ln,cn,un,hn,fn,pn,dn,gn={set:Qe,clear:tn},mn=b.navigator,vn=mn&&mn.userAgent||"",yn=xt.f,bn=gn.set,_n=b.MutationObserver||b.WebKitMutationObserver,wn=b.process,xn=b.Promise,kn="process"==t(wn),Sn=yn(b,"queueMicrotask"),An=Sn&&Sn.value;function En(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=Pe(e),this.reject=Pe(n)}function Tn(t,e){if(h(t),c(e)&&e.constructor===t)return e;var n=Gn.f(t);return(0,n.resolve)(e),n.promise}function Cn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}function Mn(t){return"function"==typeof t?t:void 0}function Ln(t,e){return arguments.length<2?Mn(Vn[t])||Mn(b[t]):Vn[t]&&Vn[t][e]||b[t]&&b[t][e]}function Rn(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e}function On(t,e,n){var i;e.notified||(e.notified=!0,i=e.reactions,Un((function(){for(var r=e.value,o=1==e.state,s=0;i.length>s;)!function(n){var i,s,a,l=o?n.ok:n.fail,c=n.resolve,u=n.reject,h=n.domain;try{l?(o||(2===e.rejection&&gi(t,e),e.rejection=1),!0===l?i=r:(h&&h.enter(),i=l(r),h&&(h.exit(),a=!0)),i===n.promise?u(ti("Promise-chain cycle")):(s=Rn(i))?s.call(i,c,u):c(i)):u(r)}catch(n){h&&!a&&h.exit(),u(n)}}(i[s++]);e.reactions=[],e.notified=!1,n&&!e.rejection&&pi(t,e)})))}function In(t,e,n){var i,r;ci?((i=ei.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),b.dispatchEvent(i)):i={promise:e,reason:n},(r=b["on"+t])?r(i):t===ui&&function(t,e){var n=b.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Pn(t,e,n,i){return function(r){t(e,n,r,i)}}function Nn(t,e,n,i){e.done||(e.done=!0,i&&(e=i),e.value=n,e.state=2,On(t,e,!0))}An||(ln=function(){var t,e;for(kn&&(t=wn.domain)&&t.exit();cn;){e=cn.fn,cn=cn.next;try{e()}catch(t){throw cn?hn():un=void 0,t}}un=void 0,t&&t.enter()},hn=kn?function(){wn.nextTick(ln)}:_n&&!/(iphone|ipod|ipad).*applewebkit/i.test(vn)?(fn=!0,pn=document.createTextNode(""),new _n(ln).observe(pn,{characterData:!0}),function(){pn.data=fn=!fn}):xn&&xn.resolve?(dn=xn.resolve(void 0),function(){dn.then(ln)}):function(){bn.call(b,ln)});var Dn,jn,zn,$n,Fn,Bn,Hn,Un=An||function(t){var e={fn:t,next:void 0};un&&(un.next=e),cn||(cn=e,hn()),un=e},Gn={f:function(t){return new En(t)}},Vn=b,Wn=m("species"),qn="Promise",Kn=gn.set,Yn=m("species"),Xn=et.get,Zn=et.set,Jn=et.getterFor(qn),Qn=b[qn],ti=b.TypeError,ei=b.document,ni=b.process,ii=b.fetch,ri=ni&&ni.versions,oi=ri&&ri.v8||"",si=Gn.f,ai=si,li="process"==t(ni),ci=!!(ei&&ei.createEvent&&b.dispatchEvent),ui="unhandledrejection",hi=zt(qn,(function(){function t(){}var e=Qn.resolve(1),n=(e.constructor={})[Yn]=function(e){e(t,t)};return!((li||"function"==typeof PromiseRejectionEvent)&&e.then(t)instanceof n&&0!==oi.indexOf("6.6")&&-1===vn.indexOf("Chrome/66"))})),fi=hi||!function(t,e){if(!Be)return!1;var n=!1;try{var i={};i[Fe]=function(){return{next:function(){return{done:n=!0}}}},function(t){Qn.all(t).catch((function(){}))}(i)}catch(t){}return n}(),pi=function(t,e){Kn.call(b,(function(){var n,i=e.value;if(di(e)&&(n=Cn((function(){li?ni.emit("unhandledRejection",i,t):In(ui,t,i)})),e.rejection=li||di(e)?2:1,n.error))throw n.value}))},di=function(t){return 1!==t.rejection&&!t.parent},gi=function(t,e){Kn.call(b,(function(){li?ni.emit("rejectionHandled",t):In("rejectionhandled",t,e.value)}))},mi=function t(e,n,i,r){if(!n.done){n.done=!0,r&&(n=r);try{if(e===i)throw ti("Promise can't be resolved itself");var o=Rn(i);o?Un((function(){var r={done:!1};try{o.call(i,Pn(t,e,r,n),Pn(Nn,e,r,n))}catch(i){Nn(e,r,i,n)}})):(n.value=i,n.state=1,On(e,n,!1))}catch(i){Nn(e,{done:!1},i,n)}}};function vi(t){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _i(t,e,n){return e&&bi(t.prototype,e),n&&bi(t,n),t}function wi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xi(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)),i}function ki(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xi(Object(n),!0).forEach((function(e){wi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Si(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ei(t,e)}function Ai(t){return(Ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ei(t,e){return(Ei=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ti(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(o){return!1}}function Ci(t,e,n){return(Ci=Ti()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&Ei(r,n.prototype),r}).apply(null,arguments)}function Mi(t){var e="function"==typeof Map?new Map:void 0;return(Mi=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return Ci(t,arguments,Ai(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ei(i,t)})(t)}function Li(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ri(t){var e=Ti();return function(){var n,i,r,o=Ai(t);return i=this,!(r=e?(n=Ai(this).constructor,Reflect.construct(o,arguments,n)):o.apply(this,arguments))||"object"!=typeof r&&"function"!=typeof r?Li(i):r}}function Oi(t,e,n){return(Oi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ai(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Ii(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}(t,e)||Ni(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(t){return function(t){if(Array.isArray(t))return Di(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Ni(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ni(t,e){if(t){if("string"==typeof t)return Di(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Di(t,e):void 0}}function Di(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ji(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Ni(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}hi&&(Qn=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+n+" invocation")}(this,Qn,qn),Pe(t),Dn.call(this);var e=Xn(this);try{t(Pn(mi,this,e),Pn(Nn,this,e))}catch(t){Nn(this,e,t)}},(Dn=function(){Zn(this,{type:qn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var i in e)nt(t,i,e[i],void 0);return t}(Qn.prototype,{then:function(t,e){var n=Jn(this),i=si(Ue(this,Qn));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=li?ni.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&On(this,n,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),jn=function(){var t=new Dn,e=Xn(t);this.promise=t,this.resolve=Pn(mi,t,e),this.reject=Pn(Nn,t,e)},Gn.f=si=function(t){return t===Qn||t===zn?new jn:ai(t)},"function"==typeof ii&&ut({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Tn(Qn,ii.apply(b,arguments))}})),ut({global:!0,wrap:!0,forced:hi},{Promise:Qn}),ne(Qn,qn,!1),$n=Ln(qn),Fn=A.f,_&&$n&&!$n[Wn]&&Fn($n,Wn,{configurable:!0,get:function(){return this}}),zn=Vn[qn],ut({target:qn,stat:!0,forced:hi},{reject:function(t){var e=si(this);return e.reject.call(void 0,t),e.promise}}),ut({target:qn,stat:!0,forced:hi},{resolve:function(t){return Tn(this,t)}}),ut({target:qn,stat:!0,forced:fi},{all:function(t){var e=this,n=si(e),i=n.resolve,r=n.reject,o=Cn((function(){var n=Pe(e.resolve),o=[],s=0,a=1;$e(t,(function(t){var l=s++,c=!1;o.push(void 0),a++,n.call(e,t).then((function(t){c||(c=!0,o[l]=t,--a||i(o))}),r)})),--a||i(o)}));return o.error&&r(o.value),n.promise},race:function(t){var e=this,n=si(e),i=n.reject,r=Cn((function(){var r=Pe(e.resolve);$e(t,(function(t){r.call(e,t).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}}),ut({target:"Promise",proto:!0,real:!0},{finally:function(t){var e=Ue(this,Ln("Promise")),n="function"==typeof t;return this.then(n?function(n){return Tn(e,t()).then((function(){return n}))}:t,n?function(n){return Tn(e,t()).then((function(){throw n}))}:t)}}),Vn.Promise,"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}),"function"!=typeof Object.values&&(Object.values=function(t){return Object.keys(t).map((function(e){return t[e]}))}),Math.hypot=Math.hypot||function(){for(var t=0,e=arguments.length,n=0;n<e;n++){if(arguments[n]===1/0||arguments[n]===-1/0)return 1/0;t+=arguments[n]*arguments[n]}return Math.sqrt(t)},Math.log2=Math.log2||function(t){return Math.log(t)*Math.LOG2E},"undefined"!=typeof window?("performance"in window==0&&(window.performance={}),Bn=window.performance):"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&("performance"in self==0&&(self.performance={}),Bn=self.performance),Bn&&"function"!=typeof Bn.now&&(Hn=+new Date,Bn.now=function(){return new Date-Hn});var zi=$i;function $i(t,e){this.x=t,this.y=e}$i.prototype={clone:function(){return new $i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=i,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.x+n*(this.x-e.x)-i*(this.y-e.y),o=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=r,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},$i.convert=function(t){return t instanceof $i||!Array.isArray(t)?t:new $i(t[0],t[1])};var Fi=Bi;function Bi(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(Hi,this,e)}function Hi(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}Bi.types=["Unknown","Point","LineString","Polygon"],Bi.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n,i=t.readVarint()+t.pos,r=1,o=0,s=0,a=0,l=[];t.pos<i;)if(o||(r=7&(n=t.readVarint()),o=n>>3),o--,1===r||2===r)s+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&l.push(e),e=[]),e.push(new zi(s,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}return e&&l.push(e),l},Bi.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,o=0,s=0,a=1/0,l=-1/0,c=1/0,u=-1/0;t.pos<n;)if(r||(i=7&(e=t.readVarint()),r=e>>3),r--,1===i||2===i)(o+=t.readSVarint())<a&&(a=o),l<o&&(l=o),(s+=t.readSVarint())<c&&(c=s),u<s&&(u=s);else if(7!==i)throw new Error("unknown command "+i);return[a,c,l,u]},Bi.prototype.toGeoJSON=function(t,e,n){var i,r=this.extent*Math.pow(2,n),o=this.extent*t,s=this.extent*e,a=this.loadGeometry(),l=Bi.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e],i=180-360*(n.y+s)/r;t[e]=[360*(n.x+o)/r-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}switch(this.type){case 1:for(var u=[],h=0;h<a.length;h++)u[h]=a[h][0];c(a=u);break;case 2:for(h=0;h<a.length;h++)c(a[h]);break;case 3:for(a=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],o=0;o<e;o++){var s=function(t){for(var e,n,i=0,r=0,o=t.length,s=o-1;r<o;s=r++)e=t[r],i+=((n=t[s]).x-e.x)*(e.y+n.y);return i}(t[o]);0!==s&&(void 0===i&&(i=s<0),i===s<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}return n&&r.push(n),r}(a),h=0;h<a.length;h++)for(i=0;i<a[h].length;i++)c(a[h][i])}1===a.length?a=a[0]:l="Multi"+l;var f={type:"Feature",geometry:{type:l,coordinates:a},properties:this.properties};return"id"in this&&(f.id=this.id),f};var Ui=Gi;function Gi(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Vi,this,e),this.length=this._features.length}function Vi(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1==i?t.readString():2==i?t.readFloat():3==i?t.readDouble():4==i?t.readVarint64():5==i?t.readVarint():6==i?t.readSVarint():7==i?t.readBoolean():null}return e}(n))}function Wi(t,e,n){var i;3!==t||(i=new Ui(n,n.readVarint()+n.pos)).length&&(e[i.name]=i)}Gi.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Fi(this._pbf,e,this.extent,this._keys,this._values)};var qi,Ki=function(t,e){this.layers=t.readFields(Wi,{},e)},Yi=Fi,Xi="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Zi={};(function(){var t,e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i="undefined"!=typeof window&&window===this||void 0===Xi||null==Xi?this:Xi;if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{t:{var r={};try{r.__proto__={ea:!0},e=r.ea;break t}catch(t){}e=!1}t=e?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var o=t;!function(t,e){if(e){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in r||(r[s]={}),r=r[s]}(e=e(o=r[t=t[t.length-1]]))!=o&&null!=e&&n(r,t,{configurable:!0,writable:!0,value:e})}}("Object.setPrototypeOf",(function(t){return t||o}));var s=this||self;function a(t){var e=vi(t);if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function l(t){return"function"==a(t)}function c(t){var e=vi(t);return"object"==e&&null!=t||"function"==e}function u(t,e){t=t.split(".");var n,i=s;t[0]in i||void 0===i.execScript||i.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)t.length||void 0===e?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=e}function h(t,e){function n(){}n.prototype=e.prototype,t.ua=e.prototype,t.prototype=new n,t.prototype.constructor=t}var f=Math,p=f.min,d=f.max,g=f.round,m=f.floor,v=f.ceil,y=f.abs,b=f.log,_=f.sqrt,w=f.pow,x=f.sin,k=f.asin,S=f.cos,A=f.tan,E=f.atan2,T=f.PI,C=T/2,M=T/4,L=2*T,R=3*T,O=T/180,I=180/T;function P(t,e,n){return n<t?n:t<e?e:t}function N(t,e,n){return e<n?e<=t&&t<=n:n<=t&&t<=e}function D(t,e,n,i,r,o){return _(w((t-r)*(i-o)-(e-o)*(n-r),2)/(w(n-r,2)+w(i-o,2)))}u("H.math.normalize",(function(t,e,n){return e-=n=n||0,(t-=n)-m(t/e)*e+n})),u("H.math.clamp",P);var j={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function z(t,e){var n=t.x;t=t.y;for(var i,r,o,s,a=e.length,l=a,c=e[0],u=0,h=0,f=0;1!=u&&1<l;)r=e[--l],i=e[--l],s=e[l?l-1:(a+(l-1))%a],o=e[l?l-2:(a+(l-2))%a],n<=i&&i<=n&&t<=r&&r<=t||n<=o&&o<=n&&t<=s&&s<=t?u=1:u||i!==n?!u&&N(n,i,o)&&((i<n&&n<o||n<i&&o<n)&&(h+=t<(c=r+(n-i)/(o-i)*(s-r)),f+=c<t),u=N(t,r,s)&&D(n,t,i,r,o,s)<=0?2:0):(o===n&&(r<t&&t<s||t<r&&s<t)||(c<=n&&n<o||n<=c&&o<n)&&(t<=r?++h:++f),u=N(t,r,s)&&D(n,t,i,r,o,s)<=0?2:0),c=i;return u||0===f||0==h%2||(u=3),u!==j.NONE}function $(t,e){this.x=+t,this.y=+e}function F(t,e,n,i,r,o,s,a,l,c){return t={x:t,y:e,next:n||null,s:i||null,ta:r||null,X:o||null,o:!!s,T:a||0,O:l||0,alpha:c||0},i&&(t.s.next=t),n&&(t.next.s=t),t}function B(t){for(;t&&t.o;)t=t.next;return t}function H(t){if(t)for(;t.next;)t=t.next;return t}function U(t){var e=H(t);(e.s.next=t).s=e.s}function G(t){for(var e=[];t;)e.push(t.x,t.y),t=t.next;return e}function V(t,e,n){for(e=e.next;e!==n&&e.alpha<=t.alpha;)e=e.next;t.next=e,t.s=e.s,(t.next.s=t).s.next=t}function W(t,e){for(var n,i=null,r=0,o=t.length;r<o;r++)(n=F(t[r].x,t[r].y,i)).qa=e,(n.next=i)&&(i.s=n),i=n;return i}function q(t,e,n,i){return(t-=n)*t+(e-=i)*e}u("H.math.CoverType",j),u("H.math.isPointInsidePolygon",z),u("H.math.flatten",(function(t){for(var e=t.length,n=new Float64Array(2*e),i=e&&t[0].x!==X;e--;){var r=t[e],o=e<<1;n[o]=i?r.x:r[0],n[1+o]=i?r.y:r[1]}return n})),u("H.math.Point",$),($.prototype.set=$).prototype.clone=function(t){return t?(t.x=this.x,t.y=this.y):t=new $(this.x,this.y),t},$.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},$.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},$.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0===e?t:e,this},$.prototype.round=function(){return this.x=g(this.x),this.y=g(this.y),this},$.prototype.floor=function(){return this.x=m(this.x),this.y=m(this.y),this},$.prototype.ceil=function(){return this.x=v(this.x),this.y=v(this.y),this},$.prototype.equals=$.prototype.w=function(t){return!(!t||this.x!==t.x||this.y!==t.y)},$.prototype.getNearest=$.prototype.la=function(t,e){var n,i=e.x-t.x,r=e.y-t.y,o=t;return(i||r)&&(o=(n=((this.x-t.x)*i+(this.y-t.y)*r)/(i*i+r*r))<=0?t:1<=n?e:new $(t.x+n*i,t.y+n*r)),o},$.prototype.distance=$.prototype.R=function(t){return _(w(this.x-t.x,2)+w(this.y-t.y,2))},$.fromIPoint=function(t){if(!t)throw Error("invalid argument");return t instanceof $?t:new $(t.x,t.y)},u("H.math.clipping.clipStrips",(function(t,e,n,i,r,o){var s,a,l,c=t.length;if(c)for(s=[];c--;)for(var u,h,f=t[c],p=f.length,d=0,g=1;g<p;g++)(l=function(t,e,n,i,r,o){var s=t.x;t=-t.y;var a=e.x;if(e=-e.y,n=-n,o=-o,a<s){if(r<a||s<i)return;var l=s,c=t;s=a,t=e,a=l,e=c,l=1}else if(r<s||a<i)return;if(e<t){if(n<e||t<o)return;var u=1;t=-t,e=-e,c=o,o=-n,n=-c}else if(n<t||e<o)return;if(s<i){if((t+=(i-s)*(e-t)/(a-s))>n)return;s=i}if(t<o){if((s+=(o-t)*(a-s)/(e-t))>r)return;t=o}return r<a&&(e=t+(r-s)*(e-t)/(a-s),a=r),n<e&&(a=s+(n-t)*(a-s)/(e-t),e=n),u&&(t=-t,e=-e),l?[new $(a,-e),new $(s,-t)]:[new $(s,-t),new $(a,-e)]}(f[g-1],f[g],n,e,i,r))&&(u=l[0],h=l[1],d&&d.w(u)?a.push(h):s.push(a=l),d=h,o&&(g=p,c=0));else s=t;return s})),u("H.math.clipping.clipPolygon",(function(t,e,n){var i;t=W(t,!0),e=W(e,!1);var r={},o=i=1;switch(~~(n||0)){case 1:o=i=0;break;case 2:i=0,o=1;break;case 3:i=1,o=0}n=i;var s,a,l,c,u,h,f=o;if(e&&t){for(e.M=F(e.x,e.y,null,H(e)),t.M=F(t.x,t.y,null,H(t)),o=e;o.next;o=o.next)if(!o.o)for(i=t;i.next;i=i.next)i.o||(h=function t(e,n,i,r,o){var s,a=n.x-e.x,l=n.y-e.y,c=r.x-i.x,u=r.y-i.y,h=a*u-l*c;return h?(c=((i.x-e.x)*u-(i.y-e.y)*c)/h,h=(l*(i.x-e.x)-a*(i.y-e.y))/h,c<0||1<c||h<0||1<h?0:(0===c?s=e:1===c?s=n:0===h?s=i:1===h&&(s=r),s?(s.x+=2480549651603763e-20,s.y+=7321997314118067e-20,s.M&&(s.M.x=s.x,s.M.y=s.y),t(e,n,i,r,o)):(o.xa=e.x+c*a,o.ya=e.y+c*l,o.fa=c,o.ga=h,1))):0}(o,s=B(o.next),i,a=B(i.next),r))&&(h=r.fa,l=r.ga,V(h=F(c=r.xa,u=r.ya,null,null,null,null,!0,0,0,h),o,s),V(s=F(c,u,null,null,null,null,!0,0,0,l),i,a),(h.X=s).X=h);for(r=z(e,G(t)),n&&(r=!r),o=e;o;o=o.next)o.o&&(r=!(o.T=r));for(r=z(t,G(e)),f&&(r=!r),i=t;i.next;i=i.next)i.o&&(r=!(i.T=r));for(U(e),U(t);(t=function(t){var e=t;if(e)for(;(e=e.next)!=t&&(!e.o||e.o&&e.O););return e}(e))!=e;){for(n=null;!t.O;t=t.X){for(r=t.T;(n=F(t.x,t.y,n)).artificial=t.o||t.qa,t.O=1,t=r?t.next:t.s;)if(t.o){t.O=1;break}if(!t)break}n.ta=p;var p=n}return p}})),u("H.math.simplifyDP",(function(t,e,n){return function t(e,n,i,r,o){var s=0,a=r,l=e[r].x,c=e[r].y,u=e[o].x,h=e[o].y,f=r+1,p=q(l,c,u,h);if(p)for(;f<o;){var d=e[f++],g=d.x,m=((g-l)*(u-l)+((d=d.y)-c)*(h-c))/p;s<(g=m<0?q(g,d,l,c):1<m?q(g,d,u,h):q(g,d,l+m*(u-l),c+m*(h-c)))&&(s=g,a=f-1)}else for(;f<o;)s<(g=q(g=(d=e[f++]).x,d=d.y,l,c))&&(s=g,a=f-1);return r=n<=s||0<i&&a-r?(--i,1<a-r?(r=t(e,n,i,r,a)).splice(r.length-1,1):r=[e[r]],1<o-a?r.concat(t(e,n,i,a,o)):r.concat(e.slice(a,o+1))):[e[r],e[o]]}(t,e*e,n||0,0,t.length-1)}));var K=this,Y=String,X=self.eval("undefined"),Z=self.eval("null"),J="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(t,e){if(1==(t instanceof e&&t.constructor===e))throw new TypeError("Illegal constructor "+rt(e))}u("H.lang.isArray",(function(t,e,n,i){var r;if(!(r="Array"===nt(t))&&e)throw new ct(e,n,i!==X?i:t);return r})),u("H.lang.isString",(function(t){return"string"==typeof t}));var tt=isNaN;function et(t){return t===+t}function nt(t){var e=Object[J[0]][J[6]].call(t).match(/^\[object (\w+)\]$/);return e?e[1]:vi(t)}u("H.lang.isNumber",et),u("H.lang.isInteger",Number.isInteger?Number.isInteger:function(t){return"number"==typeof t&&0==t%1});var it=[];function rt(t,e,n,i){var r,o,s="",a=arguments.length<2;return a&&(e={H:K.H},n="",i=it.slice()),at(e,!0,(function(e,o){try{if(r=e[o],a=r,at(e,!(u=[]),(function(t,e){t[e]===a&&u.push(e)})),o=u.sort(ot)[0],!(c(r)&&r.window===r&&r.self===r||c(r)&&0<r.nodeType&&l(r.cloneNode))&&c(r)){if(r===t)return s=n+"."+o,1;if(i.indexOf(r)<0&&(i.push(r),s=rt(t,r,n+"."+o,i)))return 1}}catch(e){}var a,u})),a&&(s=s?s.substr(1).replace("."+J[0]+".","#"):"~"+(l(t)?((o=/^\s*function ([^\( ]+)/.exec(o=t))?o[1]:"anonymous")+"()":nt(t))),s}function ot(t,e){return e.length-t.length}it.indexOf(it)<0&&it.push(it);var st=Object[J[0]][J[2]];function at(t,e,n){var i;if(t){for(r in t)if((!e||st.call(t,r))&&n(t,r,!0))return;for(i=J.length;i--;){var r=J[i];if((!e||st.call(t,r))&&n(t,r,!1))break}}}function lt(t,e,n){n[e]="#"+e}function ct(t,e,n){var i,r,o=arguments.length;return(e=e!==X?+e:e)!==X&&((r=i=(r=/^.*?\(([^\)]+)/.exec((""+t).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?Y(r[1].replace(/\s+/g,"")).split(","!==X?",":" "):[]).forEach(lt),r=r[e]||"#"+e),i=t?rt(t):"",o=2<o?Y(n):"",(r||o)&&(i+=" (Argument "+(r||"")+(o?" "+o:"")+")"),o=Error(i),Object.setPrototypeOf(o,ct.prototype),o}function ut(t,e,n){var i=P(+t,-90,90);if(e&&tt(i))throw new ct(e,n,t);return i}function ht(t,e,n){var i,r=+t;if((r<-180||180<r)&&(r=(0==(i=(r+180)%360)<0?i:360+i)-180),e&&tt(r))throw new ct(e,n,t);return r}function ft(t,e,n){var i;if(t!==X&&tt(i=+t)&&e)throw new ct(e,n,t);return i}function pt(){Q(this,pt)}function dt(t,e,n){this.lat=ut(t,dt,0),this.lng=ht(e,dt,1),n!==X&&(this.alt=ft(n,dt,2))}function gt(t,e,n){var i=c(t)&&!(tt(t.lat=ut(t.lat))||tt(t.lng=ht(t.lng))||t.alt!==X&&tt(t.alt=ft(t.alt)));if(!i&&e)throw new ct(e,n,t);return i}function mt(t,e,n,i){vt(this,ut(t,mt,0),ht(e,mt,1),ut(n,mt,2),ht(i,mt,3))}function vt(t,e,n,i,r){return t.f=n,t.g=r,e<i&&(n=e,e=i,i=n),t.i=e,t.h=i,t.m=t.b=t.c=null,t}function yt(t,e){return(t=e-t)+(t<0?360:0)}function bt(t,e){return(t+=e/2)-(180<t?360:0)}function _t(t,e,n,i,r,o,s,a,l){n=p(n,s),t=d(t,r);var c=bt(e,r=yt(e,i)),u=bt(o,s=yt(o,a))-c,h=(u+=u-1e-6<0?360:0)-1e-6<180?(c=e,a):(u=360-u,c=o,i);return 360<=(u=u+r/2+s/2)+5e-7?(c=-180,h=180):u-5e-7<r?(c=e,h=i):u-5e-7<s&&(c=o,h=a),l?vt(l,t,c,n,h):new mt(t,c,n,h)}function wt(t,e,n){return n||(gt(t,wt,0),gt(e,wt,1)),new mt(t.lat,t.lng,e.lat,e.lng)}function xt(t,e,n,i,r,o){Q(this,xt),this.sa=t||10,this.c=this.b=null,this.j=i||0,this.l=r||0,this.m=e||1,this.u=n||1,this.I=!!o,this.flush()}function kt(t,e,n){var i,r;if(t.I&&(i=t.c))for(r=3;0<=r;r--){var o=e[r];if(r%3?o>=i[r]:o<=i[r]){if(!n){t.c=null;break}i[r]=o}}}function St(t,e){var n,i=t.a;if(e){var r=e;if(r!==i)for(i=r;r=r.c;)(r.entries||1<r.a)&&(i=r)}else for(;!i.entries&&(n=i.a)<2&&n;)i=r;t.a=i}h(ct,Error),u("H.lang.InvalidArgumentError",ct),ct.prototype.name="InvalidArgumentError",u("H.geo.isDBC",(function(t,e){return 0!=(t<0^e<0)&&180<y(e-t)})),u("H.geo.AbstractGeometry",pt),pt.prototype.getBoundingBox=pt.prototype.D,pt.prototype.equals=pt.prototype.w,pt.prototype.a="",pt.prototype.l="",pt.prototype.toString=function(){return this.I([this.a.toUpperCase()," "]).join("")},pt.prototype.toGeoJSON=pt.prototype.va=function(){return{type:this.l,coordinates:this.u()}},pt.prototype.forWorkerMessage=pt.prototype.U=function(){return{type:this.a,coordinates:this.j(),boundingBox:this.D().U()}},h(dt,pt),u("H.geo.Point",dt),dt.prototype.equals=dt.prototype.w=function(t){return this===t||!!t&&this.lat===t.lat&&this.lng===t.lng&&(this.alt||0)===(t.alt||0)},dt.prototype.distance=dt.prototype.R=function(t){var e,n;return this===t||this.lat===t.lat&&this.lng===t.lng?0:(e=this.lat*O,n=t.lat*O,12742001.58*k(p(1,_(w(x((e-n)/2),2)+S(e)*S(n)*w(x((this.lng*O-t.lng*O)/2),2)))))},dt.prototype.walk=dt.prototype.wa=function(t,e,n){var i,r,o,s,a,l,c;return n?((e/=6371000.79)&&(t*=O,a=O*this.lat,i=x(a),r=x(e),o=S(e),s=O*this.lng,l=S(a),a=k(l*S(t)*r+i*o),l=(t=(s+(t=E(x(t)*l*r,o-i*x(a)))+T)%(2*T)-T)*I),e?new dt(a*I,(l+540)%360-180):this):0==(90+(t=(t%360+360)%360))%180?(a=this.lng+e/(6371000.79*L*S(this.lat*O))*(270===t?-360:360),new dt(this.lat,(a+540)%360-180)):((e/=6371000.79)&&(t*=O,s=this.lat*O,i=this.lng*O,o=(r=s+e*S(t))-s,a=b(A(r/2+M)/A(s/2+M)),a=tt(o/a)?S(s):o/a,c=e*x(t)/a,y(r)>C&&(r=0<r?T-r:-(T+r))),e?new dt(r*I,((i+c+R+(y(s+o)>C?T:0))%L-T)*I):this)},dt.prototype.getBoundingBox=dt.prototype.D=function(){return new mt(this.lat,this.lng,this.lat,this.lng)},dt.validate=gt,dt.fromIPoint=function t(e){if(!e)throw new ct(t,0,e);return new dt(e.lat,e.lng,e.alt)},dt.prototype.a="Point",dt.prototype.I=function(t){return t.push("(",this.lng," ",this.lat,")"),t},dt.prototype.l="Point",dt.prototype.u=function(){return[this.lng,this.lat,this.alt||0]},dt.prototype.j=function(){return[this.lat,this.lng,this.alt||0]},h(mt,pt),u("H.geo.Rect",mt),mt.prototype.a="Polygon",mt.prototype.I=function(t){var e=this.i,n=this.f,i=this.h,r=this.g;return t.push("(","(",n," ",e,",",r," ",e,",",r," ",i,",",n," ",i,",",n," ",e,")",")"),t},mt.prototype.equals=mt.prototype.w=function(t){return this===t||!!t&&this.i===t.i&&this.f===t.f&&this.h===t.h&&this.g===t.g},mt.prototype.clone=function(){return new mt(this.i,this.f,this.h,this.g)},mt.prototype.getTopLeft=mt.prototype.W=function(){return this.m||(this.m=new dt(this.i,this.f)),this.m},mt.prototype.getBottomRight=mt.prototype.V=function(){return this.b||(this.b=new dt(this.h,this.g)),this.b},mt.prototype.getTop=mt.prototype.na=function(){return this.i},mt.prototype.getBottom=mt.prototype.ha=function(){return this.h},mt.prototype.getLeft=mt.prototype.ja=function(){return this.f},mt.prototype.getRight=mt.prototype.ma=function(){return this.g},mt.prototype.getCenter=mt.prototype.F=function(){return this.c||(this.c=new dt(this.h+(this.i-this.h)/2,bt(this.f,this.A()))),this.c},mt.prototype.getWidth=mt.prototype.A=function(){return yt(this.f,this.g)},mt.prototype.getHeight=mt.prototype.G=function(){return this.i-this.h},mt.prototype.isCDB=mt.prototype.N=function(){return this.f>this.g},mt.prototype.isEmpty=mt.prototype.ra=function(){return!this.A()&&!this.G()},mt.prototype.getBoundingBox=mt.prototype.D=function(){return new mt(this.i,this.f,this.h,this.g)},mt.prototype.containsLatLng=mt.prototype.L=function(t,e,n){var i=this.F();return n||(t=ut(t,this.L,0),e=ht(e,this.L,1)),(t=(e=this.B(t,e,n)).F()).lat===i.lat&&t.lng===i.lng&&this.G()===e.G()&&this.A()===e.A()},mt.prototype.containsPoint=mt.prototype.$=function(t,e){return e||gt(t,this.$,0),this.L(t.lat,t.lng,e)},mt.prototype.containsRect=mt.prototype.aa=function(t,e){var n=this.F();if(!(e||t instanceof mt))throw new ct(this.aa,0,t);return(t=(e=this.J(t,e)).F()).lat===n.lat&&t.lng===n.lng&&this.G()===e.G()&&this.A()===e.A()},mt.prototype.mergeLatLng=mt.prototype.B=function(t,e,n,i){if(!n){if(tt(t=ut(t)))throw new ct(this.B,0,t);if(tt(e=ht(e)))throw new ct(this.B,1,e)}return _t(this.i,this.f,this.h,this.g,t,e,t,e,i)},mt.prototype.mergePoint=mt.prototype.ca=function(t,e,n){return e||gt(t,this.ca,0),this.B(t.lat,t.lng,e,n)},mt.prototype.mergeRect=mt.prototype.J=function(t,e,n){if(!(e||t instanceof mt))throw new ct(this.J,0,t);return _t(this.i,this.f,this.h,this.g,t.i,t.f,t.h,t.g,n)},mt.prototype.mergeTopLeftBottomRight=mt.prototype.C=function(t,e,n,i,r,o){return r||(t=ut(t,this.C,0),e=ht(e,this.C,1),n=ut(n,this.C,2),i=ht(i,this.C,3)),_t(this.i,this.f,this.h,this.g,t,e,n,i,o)},mt.prototype.intersects=mt.prototype.ba=function(t,e){var n=this.f<=this.g,i=t.f<=t.g,r=this.f<t.g,o=t.f<this.g;if(!(e||t instanceof mt))throw new ct(this.ba,0,t);return this.h<=t.i&&t.h<=this.i&&(!n&&(!i||r||o)||!i&&(r||o)||r&&o)},mt.merge=_t,mt.fromPoints=wt,mt.coverPoints=function t(e,n){var i=1,r=e.length,o=null,s=a(e);if("array"!=s&&("object"!=s||"number"!=typeof e.length))throw new ct(t,0,e);if(0<r)for(o=wt(s=e[0],s,n);i<r;i++)s=e[i],o.B(s.lat,s.lng,n,o);return o},mt.coverLatLngAlts=function t(e,n){var i,r=3,o=e.length;if(!(n||e&&null!=e.length))throw new ct(t,0,e);if(0<o)for(i=new mt(e[0],e[1],e[0],e[1]);r<o;r+=3)i.B(e[r],e[r+1],n,i);return i},mt.coverRects=function t(e,n){var i,r=1,o=e.length;if(n&&(!e||null==e.length))throw new ct(t,0,e);if(0<o)for(i=new mt(e[0].i,e[0].f,e[0].h,e[0].g);r<o;r++)i.J(e[r],n,i);return i},mt.prototype.resizeToCenter=mt.prototype.da=function(t,e){var n=this.f,i=this.i,r=this.g,o=this.h,s=this.F().lng;gt(t,this.da,0);var a=t.lat-o-(i-o)/2,l=t.lng-s;return t=(t=n+((l=180<l||l<-180?-(s+t.lng):l)<0?2*l:0))<-180?360+t:t,r=180<(r+=0<l?2*l:0)?r-360:r,90<=(i=0<a?i+2*a:i)&&(i=90),(o=a<0?o+2*a:o)<=-90&&(o=-90),e?vt(e,i,t,o,r):new mt(i,t,o,r)},mt.prototype.l="Polygon",mt.prototype.u=function(){return[[this.f,this.i,0],[this.g,this.i,0],[this.g,this.h,0],[this.f,this.h,0],[this.f,this.i,0]]},mt.prototype.U=function(){return this.j()},mt.prototype.j=function(){return[this.i,this.f,this.h,this.g]},xt.prototype.remove=function(t){var e,n,i,r,o,s,a=!1;if(t&&(e=t.a)&&e.b===this&&(n=e.entries)&&0<=(i=n.indexOf(t))){for(n.splice(i,1),n=this.a;e;)(r=e.entries)&&r.length||(r&&delete e.entries,e.a||!(o=e.c))?e=Z:((i=o)[s=(a=e).j]===a&&(delete i[s],delete a.c,--i.a),n===e&&(n=o),e=o);this.a!==n&&(this.a=n,St(this)),kt(this,t,!1),a=!0}return a},xt.prototype.flush=function(){var t=new Et(null,NaN,this.j-this.m,this.l-this.u,this.j+this.m,this.l+this.u);(t.b=this).a=this.b=t,this.c=null},xt.prototype.o=function(t,e,n,i,r,o){var s=[],a=this.a,l=this.b;return t<=a[5]&&e<=a[6]&&(r?n>=a[7]:n>a[7])&&(o?i>=a[4]:i>a[4])&&function t(e,n,i,r,o,s,a,l,c){var u,h=n.entries,f=n[7],p=n[4],d=n[5],g=n[6],m=n[8],v=n[9];if(h){var y=h.length;if(p<o||f<r||a<g||s<d)for(;y--;)p=(f=h[y])[3],d=f[0],g=f[1],o<=f[2]&&r<=g&&(d<a||l&&d==a)&&(p<s||c&&p==s)&&i.push(f);else for(;y--;)i.push(h[y])}(m<s||c&&s==m)&&(o<v&&(u=n[1])&&t(e,u,i,r,o,s,a,l,c),(v<a||l&&a==v)&&(u=n[3])&&t(e,u,i,r,o,s,a,l,c)),r<m&&(o<v&&(u=n[0])&&t(e,u,i,r,o,s,a,l,c),(v<a||l&&a==v)&&(u=n[2])&&t(e,u,i,r,o,s,a,l,c))}(this,a,s,t,e,n,i,o||i>=l[6],r||n>=l[5]),s};var At=0;function Et(t,e,n,i,r,o){this.j=e,t&&(this.c=t,this.b=t.b,r=1&e?(n=t[8],t[5]):(n=t[7],t[8]),o=2&e?(i=t[9],t[6]):(i=t[4],t[9])),this[7]=n,this[5]=r,this[8]=(n+r)/2,this[4]=i,this[6]=o,this[9]=(i+o)/2}function Tt(t,e,n,i,r,o){Tt.ua.constructor.apply(this,arguments)}function Ct(t,e,n,i,r,o,s){var a,l,c=e[8],u=e[9];return s&&(r<c||(a=c<=n))&&(o<u||(l=u<=i))?n=(c=Ct)(t,e=e[a|=l<<1]||(++e.a,e[a]=new Et(e,a)),n,i,r,o,s-1):(i=n=new Mt(n,i,r,o),(e.entries||(e.entries=[])).push(i),i.a=e,kt(t,n,!0),St(t,e)),n}function Mt(t,e,n,i){this.id=At++,this[0]=e,this[1]=n,this[2]=i,this[3]=t}function Lt(t){this.l=new Tt(+t||10,180,90,0,0,!0),this.j=[],this.m=!1,this.a=this.b=this.c=null}function Rt(t,e,n,i,r,o){if(o)o=new Mt(r,-e,n+360,-i),t.j.push(o),t.m=!0,t.a&&t.a.C(e,n,i,r,!0,t.a);else{var s=-e,a=-i,l=(o=t.l).b,c=l[5],u=l[6];if(!(l[7]<=n&&l[4]<=s&&(r<c||c===r&&c===l.b.b[5])&&(a<u||u===a&&u===l.b.b[6])))throw Error("Coordinates out of bounds");o=Ct(o,o.b,n,s,r,a,o.sa),t.b&&t.b.C(e,n,i,r,!0,t.b)}return t.c=null,o}function Ot(t,e,n,i,r,o,s){var a=(t=t.j).length,l=[];if(a)for(var c=n+360,u=r+360;a--;){var h=t[a];(It(h,e,n,i,r,o,s)||It(h,e,c,i,u,o,s))&&l.push(h)}return l}function It(t,e,n,i,r,o,s){var a=t[3],l=t[0],c=t[1];return t=t[2],(o?l<=i:l<i)&&(s?a<=r:a<r)&&e<=t&&n<=c}function Pt(t,e){var n,i;if(n=e.length){for(var r=t.length,o={};r--;)o[t[r].id]=1;for(;n--;)(i=e[n]).id in o||t.push(i)}}function Nt(){}function Dt(t,e,n){if(this.l=[],e&&this.K(e),n&&!l(n))throw new ct(Dt,2,n);this.b=0,this.m=n,this.a={},this.j=this.c=null,this.Z(t)}function jt(t,e){return e&&(t.c=$t(t,e,t.c)),e}function zt(t){for(;t.b>t.u&&t.j;)Ft(t,t.j,!0)}function $t(t,e,n){return n!==e&&((e.H||e.v)&&Ft(t,e),(e.H=n)&&(e.v=n.v,n.v=e),e.v||(t.c=e),e.H||(t.j=e),t.b+=e.size),e}function Ft(t,e,n){var i=e.v,r=e.H;if((i||r||e==t.c&&e==t.j)&&(i?i.H=r:t.c=r,r?r.v=i:t.j=i,t.b-=e.size,n)){for(n=t.l.length;n--;)t.l[n].call(t,e.id,e.data,e.size);delete t.a[e.id]}e.H=e.v=null}Et.prototype.a=0,h(Tt,xt),u("H.geo.QuadTree",Lt),Lt.prototype.N=function(){return this.m},Lt.prototype.D=function(){var t;if(!this.c){var e,n,i=[];if((s=!this.b)&&(a=(o=this.l).c,o.I&&!a&&((s=o.a).entries||s[0]||s[1]||s[2]||s[3])&&(a=function t(e,n){for(var i,r,o=0,s=3;0<=s;s--){for(var a=s+4,l=0<s%3,c=[],u=n[s],h=e[s],f=h.length;f--;){var p=h[f];if(i=p.entries)for(r=i.length;r--;){var d=i[r][s];(l?u<d:d<u)&&(u=d)}for(r=4;r--;)(i=p[r])&&(l?i[a]>u:i[a]<u)&&c.push(i)}o+=c.length,n[s]=u,e[s]=c}return o&&(n=t(e,n)),n}([a=[s],a,a,a],[s[6],s[7],s[4],s[5]]),o.c=a),s=o=a),s&&(this.b=new mt(-o[0],o[3],-o[2],o[1])),(t=this.b)&&i.push(t),!this.a&&(n=(e=this.j).length)){for(s=360,a=-(o=90),l=0;n--;)var r=e[n],o=p(o,r[0]),s=p(s,r[3]),a=d(a,r[2]),l=d(l,r[1]);this.a=new mt(-o,s,-a,l-360)}(t=this.a)&&i.push(t),(t=i[0])&&(i[1]&&(t=t.J(i[1],!0)),this.c=t)}return this.c},Lt.prototype.insertBoundingBox=Lt.prototype.oa=function(t){var e=t.W(),n=t.V();return(t=t.N())?Rt(this,e.lat,n.lng,n.lat,e.lng,t):Rt(this,e.lat,e.lng,n.lat,n.lng,t)},Lt.prototype.remove=function(t){var e,n;return t.a?(n=this.l.remove(t),this.b=null):(n=0<=(t=(e=this.j).indexOf(t)))&&(e.splice(t,1),this.m=0<e.length,this.a=null),n&&(this.c=null),n},Lt.prototype.intersectBoundingBox=Lt.prototype.pa=function(t,e,n){var i=this.l,r=t.W(),o=t.V(),s=-r.lat,a=(r=r.lng,-o.lat);return o=o.lng,!e&&s==a||!n&&r===o?t=[]:t.N()?(Pt(t=i.o(-180,s,o,a,n,e),i.o(r,s,180,a,!1,e)),Pt(t,Ot(this,s,o,a,r+360,e,n))):Pt(t=i.o(r,s,o,a,n,e),Ot(this,s,r,a,o,e,n)),t},u("H.util.ICache",Nt),Nt.prototype.add=function(){},Nt.prototype.get=function(){},Nt.prototype.drop=Nt.prototype.S=function(){},Nt.prototype.forEach=function(){},Nt.prototype.removeAll=Nt.prototype.Y=function(){},Nt.prototype.registerOnDrop=Nt.prototype.K=function(){},Nt.prototype.deRegisterOnDrop=Nt.prototype.P=function(){},u("H.util.Cache",Dt),Dt.prototype.add=function(t,e,n){if(!et(n=+n)||n<0)throw new ct(this.add,2,n);t=String(t);var i=this.a[t],r=!0;return this.m&&(r=this.m(t,e,n)),i?r?(this.b+=n-i.size,i.size=n,i.data=e,jt(this,i)):Ft(this,i,!0):r&&(this.a[t]=$t(this,{id:t,data:e,size:n,H:null,v:null},this.c)),zt(this),r},Dt.prototype.registerOnDrop=Dt.prototype.K=function(t){if(!l(t))throw new ct(this.K,0,t);this.l.push(t)},Dt.prototype.deRegisterOnDrop=Dt.prototype.P=function(t){this.l=this.l.filter((function(e){return e!==t}))},Dt.prototype.get=function(t,e){return(t=e?this.a[t]:jt(this,this.a[t]))&&t.data},Dt.prototype.drop=Dt.prototype.S=function(t){var e;(e=this.a[t])&&Ft(this,e,!0)},Dt.prototype.forEach=function(t,e,n){var i;for(i in this.a){var r=this.a[i];n&&!n(i,r.data,r.size)||t.call(e,i,r.data,r.size)}},Dt.prototype.removeAll=Dt.prototype.Y=function(t){var e;for(e in this.a){var n=this.a[e];t&&!t(e,n.data,n.size)||Ft(this,this.a[e],!0)}},Dt.prototype.setMaxSize=Dt.prototype.Z=function(t){if(!(0<+t))throw new ct(Dt.prototype.Z,0,t);return this.u=+t,zt(this),this},Dt.prototype.getMaxSize=Dt.prototype.ka=function(){return this.u},Dt.prototype.getCurrentSize=Dt.prototype.ia=function(){return this.b}}).call(Zi);var Ji,Qi=qi={};function tr(t){return Ci(Zi.H.math.Point,Pi(t))}qi.clipPolygon=function(t,e){var n,i,r,o=[],s=Zi.H.math.clipping.clipPolygon(t.map(tr),e.map(tr));if(s)do{for(n=[],i=s;n.push([(r=i).x,r.y]),i=i.next;);o.push(n)}while(s=s.nextPoly);else qi.isPointInsidePolygon(e[0],t)?o.push(e):qi.isPointInsidePolygon(t[0],e)&&o.push(t);return o},qi.isPointInsidePolygon=function(t,e){return Zi.H.math.isPointInsidePolygon({x:t[0],y:t[1]},Zi.H.math.flatten(e))},qi.clamp=function(t,e,n){return(t-=0)>n?n:t<e?e:t},qi.splitLegs=function(t,e){var n=[];t.push(t[0]);for(var i=0;i<t.length-1;i++){var r,o=t[i],s=t[i+1];n.push(o),Math.abs(s[0]-o[0])>=e&&(r=[(o[0]+s[0])/2,(o[1]+s[1])/2],n.push(r))}return n.length!==t.length-1?qi.splitLegs(n,e):n},qi.getBBox=function(t){var e=1/0,n=1/0,i=-1/0,r=-1/0;return t.forEach((function(t){t[0]<e&&(e=t[0]),t[1]<n&&(n=t[1]),t[0]>i&&(i=t[0]),t[1]>r&&(r=t[1])})),[e,n,i,r]},qi.getBBoxCenter=function(t){var e=Ii(t,4),n=e[0],i=e[1];return[n+(e[2]-n)/2,i+(e[3]-i)/2]},qi.getLineLength=function(t,e,n,i){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))};var er=Ji={};Ji.default_source_max_zoom=18,Ji.default_view_max_zoom=20,Ji.tile_size=256,Ji.half_circumference_meters=20037508.342789244,Ji.circumference_meters=2*Ji.half_circumference_meters,Ji.min_zoom_meters_per_pixel=Ji.circumference_meters/Ji.tile_size;var nr=[];Ji.metersPerPixel=function(t){return nr[t]=nr[t]||Ji.min_zoom_meters_per_pixel/Math.pow(2,t),nr[t]};var ir=[];Ji.metersPerTile=function(t){return ir[t]=ir[t]||Ji.circumference_meters/Math.pow(2,t),ir[t]},Ji.tile_scale=4096,Ji.units_per_pixel=Ji.tile_scale/Ji.tile_size,Ji.height_scale=16;var rr=[];Ji.unitsPerMeter=function(t){return rr[t]=rr[t]||Ji.tile_scale/(Ji.tile_size*Ji.metersPerPixel(t)),rr[t]},Ji.metersForTile=function(t){return{x:t.x*Ji.circumference_meters/Math.pow(2,t.z)-Ji.half_circumference_meters,y:-(t.y*Ji.circumference_meters/Math.pow(2,t.z)-Ji.half_circumference_meters)}},Ji.tileForMeters=function(t,e){var n=Ii(t,2),i=n[0],r=n[1];return{x:Math.floor((i+Ji.half_circumference_meters)/(Ji.circumference_meters/Math.pow(2,e))),y:Math.floor((-r+Ji.half_circumference_meters)/(Ji.circumference_meters/Math.pow(2,e))),z:e}},Ji.metersToExactTileCoords=function(t,e){var n=Ii(t,2),i=n[0],r=n[1];return{x:Math.pow(2,e-1)*(1+i/Ji.half_circumference_meters),y:Math.pow(2,e-1)*(1-r/Ji.half_circumference_meters),z:e}},Ji.wrapTile=function(t){var e=t.x,n=t.y,i=t.z,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:!0,y:!1},o=(1<<i)-1;return r.x&&(e&=o),r.y&&(n&=o),{x:e,y:n,z:i}},Ji.metersToLatLng=function(t){var e=Ii(t,2),n=e[0],i=e[1];return n/=Ji.half_circumference_meters,i/=Ji.half_circumference_meters,i=(2*Math.atan(Math.exp(i*Math.PI))-Math.PI/2)/Math.PI,[n*=180,i*=180]},Ji.latLngToMeters=function(t){var e=Ii(t,2),n=e[0],i=e[1];return i=Math.log(Math.tan(i*Math.PI/360+Math.PI/4))/Math.PI,i*=Ji.half_circumference_meters,i=Math.min(Math.max(i,-Ji.half_circumference_meters),Ji.half_circumference_meters),[n*=Ji.half_circumference_meters/180,i]},Ji.tileSpaceToMeters=function(t,e,n){var i=Ii(t,2),r=i[0],o=i[1],s=Ji.unitsPerMeter(e);return[r/s+n.x,o/s+n.y]},Ji.tileSpaceToLatlng=function(t,e,n){var i=Ji.unitsPerMeter(e);return Ji.transformGeometry(t,(function(t){t[0]=t[0]/i+n.x,t[1]=t[1]/i+n.y;var e=Ii(Ji.metersToLatLng(t),2),r=e[0],o=e[1];t[0]=r,t[1]=o})),t},Ji.copyGeometry=function(t){if(null!=t){var e={type:t.type};return"Point"===t.type?e.coordinates=[t.coordinates[0],t.coordinates[1]]:"LineString"===t.type||"MultiPoint"===t.type?e.coordinates=t.coordinates.map((function(t){return[t[0],t[1]]})):"Polygon"===t.type||"MultiLineString"===t.type?e.coordinates=t.coordinates.map((function(t){return t.map((function(t){return[t[0],t[1]]}))})):"MultiPolygon"===t.type&&(e.coordinates=t.coordinates.map((function(t){return t.map((function(t){return t.map((function(t){return[t[0],t[1]]}))}))}))),e}},Ji.transformGeometry=function(t,e){null!=t&&("Point"===t.type?e(t.coordinates):"LineString"===t.type||"MultiPoint"===t.type?t.coordinates.forEach(e):"Polygon"===t.type||"MultiLineString"===t.type?t.coordinates.forEach((function(t){return t.forEach(e)})):"MultiPolygon"===t.type&&t.coordinates.forEach((function(t){t.forEach((function(t){return t.forEach(e)}))})))},Ji.boxIntersect=function(t,e){return!(e.sw.x>t.ne.x||e.ne.x<t.sw.x||e.sw.y>t.ne.y||e.ne.y<t.sw.y)},Ji.findBoundingBox=function(t){for(var e=1/0,n=-1/0,i=1/0,r=-1/0,o=t[0].length,s=0;s<o;s++){var a=t[0][s];a[0]<e&&(e=a[0]),a[1]<i&&(i=a[1]),a[0]>n&&(n=a[0]),a[1]>r&&(r=a[1])}return[e,i,n,r]},Ji.geometryType=function(t){return"Polygon"===t||"MultiPolygon"===t?"polygon":"LineString"===t||"MultiLineString"===t?"line":"Point"===t||"MultiPoint"===t?"point":void 0},Ji.centroid=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(t&&0!==t.length){var n,i=0,r=0,o=0,s=t[0],a=s.length;e&&(n=s[0],s=s.map((function(t){return[t[0]-n[0],t[1]-n[1]]})));for(var l=0,c=a-1;l<a;c=l,l++){var u=s[l],h=s[c],f=u[1]*h[0]-h[1]*u[0];i+=(u[0]+h[0])*f,r+=(u[1]+h[1])*f,o+=3*f}var p=[i/o,r/o];return e&&(p[0]+=n[0],p[1]+=n[1]),p}},Ji.multiCentroid=function(t){for(var e=t.length,n=[0,0],i=0;i<t.length;i++){var r=Ji.centroid(t[i]);n[0]+=r[0],n[1]+=r[1]}return n[0]/=e,n[1]/=e,n},Ji.signedPolygonRingAreaSum=function(t){for(var e=0,n=t.length,i=0;i<n-1;i++){var r=t[i],o=t[i+1];e+=r[0]*o[1]-o[0]*r[1]}return e+(t[n-1][0]*t[0][1]-t[0][0]*t[n-1][1])},Ji.polygonRingArea=function(t){return Math.abs(Ji.signedPolygonRingAreaSum(t))/2},Ji.polygonArea=function(t){if(t)return Ji.polygonRingArea(t[0])},Ji.multiPolygonArea=function(t){for(var e=0,n=0;n<t.length;n++)e+=Ji.polygonArea(t[n]);return e},Ji.ringWinding=function(t){var e=Ji.signedPolygonRingAreaSum(t);return 0<e?"CW":e<0?"CCW":void 0},Ji.getTileBoundingBox=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=Ji.wrapTile(t,{x:!0}),r=Ji.metersForTile(i),o=Ji.metersPerPixel(i.z),s=Ji.metersToLatLng([r.x-n*o,r.y+n*o]),a=Ji.metersToLatLng([r.x+(e+n)*o,r.y-(e+n)*o]),l=Ji.isLastTile(i);return new Zi.H.geo.Rect(0===t.y?90:Qi.clamp(s[1],-90,90),Qi.clamp(s[0],-180,180),l.row?-90:Qi.clamp(a[1],-90,90),l.column?180:Qi.clamp(a[0],-180,180))},Ji.isLastTile=function(t){var e=t.x,n=t.y,i=t.z;return{row:n===Math.pow(2,i)-1,column:e===Math.pow(2,i)-1}};var or,sr,ar=function(){Si(e,Mi(Error));var t=Ri(e);function e(n){var i;return yi(this,e),(i=t.call(this)).name="MethodNotImplemented",i.message="Method "+n+" must be implemented in subclass",i}return e}(),lr=!1,cr=!1;try{window.document!==HTMLDocument&&(cr=!0)}catch(o){void 0!==self&&(lr=!0,self.window={document:{}},self.document=self.window.document)}var ur={get is_fake_worker(){return self.is_fake_worker},get is_worker(){return void 0!==sr?sr:lr||self.is_fake_worker},set is_worker(t){sr=t},get is_main(){return void 0!==or?or:cr&&!self.is_fake_worker},set is_main(t){or=t},is_native_worker:lr},hr={},fr=0,pr={},dr={},gr={};function mr(t,e,n){var i=2<arguments.length&&void 0!==n?n:dr,r=[];if("string"==typeof t&&(t=(r=t.split(".")).pop()),ur.is_main&&e&&1===r.length&&"self"===r[0])i=e;else for(var o=0;o<r.length;o++){if(!i[r[o]])return[];i=i[r[o]]}return[t,i]}hr.addTarget=function(t,e){ur.is_fake_worker?gr[t]=e:dr[t]=e},hr.removeTarget=function(t){delete dr[t],delete gr[t]};var vr=" No object with that name is registered on main thread.",yr=" Object has no method with that name.",br="_worker_broker_error_not_set_";function _r(t){Array.isArray(t)&&t.filter((function(t){return t.parent&&t.property})).forEach((function(t){return delete t.parent[t.property]}))}hr.withTransferables=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!(this instanceof hr.withTransferables))return Ci(hr.withTransferables,e);this.value=e,this.transferables=function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];if(!e)return r;if(Array.isArray(e))e.forEach((function(n,i){return t(n,e,i,r)}));else if("object"===vi(e))if(e instanceof ArrayBuffer)r.push({object:e,parent:n,property:i});else if(e.buffer instanceof ArrayBuffer)r.push({object:e.buffer,parent:n,property:i});else for(var o in e)t(e[o],e,o,r);return r}(this.value)},ur.is_main&&(hr.postMessage=function(t,e){for(var n=arguments.length,i=new Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(Array.isArray(t))return Promise.all(t.map((function(t){return hr.postMessage.apply(hr,[t,e].concat(Pi(i)))})));var o,s={};"object"===vi(e)&&(e=(s=e).method);var a="main_send";"string"==typeof t?(e=t,i=Array.prototype.slice.call(arguments,1),o=!0,a="worker_send"):t.init&&(o=!0);var l,c=[];if(i&&1===i.length&&i[0]instanceof hr.withTransferables&&(c=i[0].transferables,i=i[0].value),l={type:a,message_id:++fr,method:e,message:i},o)return function(t,e){var n=t.type,i=Ii(mr(t.method,e,"main_send"===n?gr:dr),2),r=i[0],o=i[1],s="Worker broker could not dispatch message type ".concat(t.method," on target ").concat(t.target,".");if(!o)throw Error(s+vr);var a="function"==typeof o[r]&&o[r];if(!a)throw Error(s+yr);return new Promise((function(e,n){var i;try{i=a.apply(o,t.message)}catch(i){return void n(i)}i instanceof Promise?i.then((function(t){t instanceof hr.withTransferables&&(t=t.value[0]),e(t)}),(function(t){n(t instanceof Error?"".concat(t.message,": ").concat(t.stack):t)})):(i instanceof hr.withTransferables&&(i=i.value[0]),e(i))}))}(l,t&&t.init?t:void 0);var u=new Promise((function(t,n){pr[fr]={method:e,message:i,resolve:t,reject:n}}));return s.stringify&&(l=JSON.stringify(l)),t.postMessage(l,c.map((function(t){return t.object}))),_r(c),u},hr.addWorker=function(t){if(!(t instanceof Worker))throw Error("Worker broker could not add non-Worker object",t);t.addEventListener("message",(function(e){var n="string"==typeof e.data?JSON.parse(e.data):e.data,i=n.message_id;if("worker_reply"===n.type)pr[i]&&(n.error?pr[i].reject(n.error):pr[i].resolve(n.message),delete pr[i]);else if("worker_send"===n.type&&null!=i){var r=Ii(mr(n.method),2),o=r[0],s=r[1],a="Worker broker could not dispatch message type ".concat(n.method," on target ").concat(n.target,".");if(!s)throw Error(a+vr);var l="function"==typeof s[o]&&s[o];if(!l)throw Error(a+yr);var c,u=br;try{c=l.apply(s,n.message)}catch(e){u=e}var h,f=[];c&&"function"==typeof c.then?c.then((function(e){e instanceof hr.withTransferables&&(f=e.transferables,e=e.value[0]),h={type:"main_reply",message_id:i,message:e},t.postMessage(h,f.map((function(t){return t.object}))),_r(f)}),(function(e){t.postMessage({type:"main_reply",message_id:i,error:e instanceof Error?"".concat(e.message,": ").concat(e.stack):e})})):(c instanceof hr.withTransferables&&(f=c.transferables,c=c.value[0]),h={type:"main_reply",message_id:i,message:c,error:u instanceof Error?"".concat(u.message,": ").concat(u.stack):u},t.postMessage(h,f.map((function(t){return t.object}))),_r(f))}}))},hr.getMessages=function(){return pr},hr.getMessageId=function(){return fr}),ur.is_worker&&(hr.postMessage=function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r={};"object"===vi(t)&&(t=(r=t).method);var o,s=new Promise((function(e,i){pr[fr]={method:t,message:n,resolve:e,reject:i}})),a=[];return n&&1===n.length&&n[0]instanceof hr.withTransferables&&(a=n[0].transferables,n=n[0].value),o={type:"worker_send",message_id:fr,method:t,message:n},r.stringify&&(o=JSON.stringify(o)),self.postMessage(o,a.map((function(t){return t.object}))),_r(a),fr++,s},self.addEventListener("message",(function(t){var e="string"==typeof t.data?JSON.parse(t.data):t.data,n=e.message_id;if("main_reply"===e.type)pr[n]&&(e.hasOwnProperty("error")&&e.error!==br?pr[n].reject(e.error):pr[n].resolve(e.message),delete pr[n]);else if("main_send"===e.type&&null!=n){var i=Ii(mr(e.method),2),r=i[0],o=i[1],s="Worker broker could not dispatch message type ".concat(e.method," on target ").concat(e.target,".");if(!o)throw Error(s+vr);var a,l,c="function"==typeof o[r]&&o[r];if(!c)throw Error(s+yr);try{a=c.apply(o,e.message)}catch(t){l=t}var u,h=[];a instanceof Promise?a.then((function(t){t instanceof hr.withTransferables&&(h=t.transferables,t=t.value[0]),u={type:"worker_reply",message_id:n,message:t},self.postMessage(u,h.map((function(t){return t.object}))),_r(h)}),(function(t){self.postMessage({type:"worker_reply",message_id:n,error:t instanceof Error?"".concat(t.message,": ").concat(t.stack):t})})):(a instanceof hr.withTransferables&&(h=a.transferables,a=a.value[0]),u={type:"worker_reply",message_id:n,message:a,error:l instanceof Error?"".concat(l.message,": ").concat(l.stack):l},self.postMessage(u,h.map((function(t){return t.object}))),_r(h))}})));var wr,xr={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},kr={},Sr={};function Ar(t){var e,n="object"===vi(t)?t.level:t;if(xr[n]<=xr[Ar.level]){for(var i=arguments.length,r=new Array(1<i?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];if(ur.is_native_worker)hr.postMessage.apply(hr,[{method:"_logProxy",stringify:!0},t].concat(r));else{if("object"===vi(t)&&!0===t.once){if(Sr[JSON.stringify(r)])return;Sr[JSON.stringify(r)]=!0}var s=(kr[e=n]=kr[e]||(console[e]?console[e]:console.log).bind(console),kr[e]);1<r.length?s.apply(void 0,["Tangram [".concat(n,"]: ").concat(r[0])].concat(Pi(r.slice(1)))):s("Tangram [".concat(n,"]: ").concat(r[0]))}}}function Er(t,e,n){var i,r;return n=n||0,function(){var o=this,s=arguments;function a(){r=0,t.apply(o,s)}clearTimeout(i),r&&n&&Date.now()-r>=n?a():(r=r||Date.now(),i=setTimeout((function(){a()}),e))}}Ar.level="info",Ar.workers=null,Ar.setLevel=function(t){Ar.level=t,ur.is_main&&Array.isArray(Ar.workers)&&hr.postMessage(Ar.workers,"_logSetLevelProxy",t)},ur.is_main&&(Ar.setWorkers=function(t){Ar.workers=t},Ar.reset=function(){Sr={}}),hr.addTarget("_logProxy",Ar),hr.addTarget("_logSetLevelProxy",Ar.setLevel);var Tr=wr={};hr.addTarget("Utils",wr),wr.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},wr.isMicrosoft=function(){return/(Trident\/7.0|Edge[ /](\d+[\.\d]+))/i.test(navigator.userAgent)},wr._requests={},wr._proxy_requests={},wr.io=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6e4,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"text",i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"GET",r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,s=6<arguments.length&&void 0!==arguments[6]&&arguments[6];if(ur.is_worker&&wr.isMicrosoft())return Ar("debug","Proxying request for URL to worker",t),o&&(wr._proxy_requests[o]=!0),hr.postMessage("Utils.io",t,e,n,i,r,o,!0);var a=new XMLHttpRequest,l=(l=new Promise((function(r,o){a.open(i,t,!0),a.timeout=e,a.responseType=n,a.onload=function(){200===a.status?-1<["text","json"].indexOf(a.responseType)?r(a.responseText):r(a.response):o(Error("Request error with a status of "+a.statusText))},a.onerror=function(t){o(Error("There was a network error"+t.toString()))},a.ontimeout=function(t){o(Error("timeout "+t.toString()))},a.send()}))).then((function(t){return o&&delete wr._requests[o],s?hr.withTransferables(t):t}));return o&&(wr._requests[o]=a),l},wr.cancelRequest=function(t){if(ur.is_worker&&wr._proxy_requests[t])return hr.postMessage("Utils.cancelRequest",t);wr._requests[t]?(Ar("trace","Cancelling network request key '".concat(t,"'")),wr._requests[t].abort(),delete wr._requests[t]):Ar("trace","Could not find network request key '".concat(t,"'"))},wr.requestAnimationFramePolyfill=function(){"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)})},wr.serializeWithFunctions=function(t){return"function"==typeof t?t.toString():JSON.stringify(t,(function(t,e){return"function"==typeof e?e.toString():e}))},wr.stringsToFunctions=function(t,e){if("string"==typeof t)t=wr.stringToFunction(t,e);else if(null!=t&&"object"===vi(t))for(var n in t)t[n]=wr.stringsToFunctions(t[n],e);return t},wr._use_count=0,wr._function_cache={};var Cr,Mr,Lr=Er((function(){Ar("trace","Cleared cached ".concat(Object.keys(wr._function_cache).length," functions (reused ").concat(wr._use_count," times)")),wr._use_count=0,wr._function_cache={}}),1e4),Rr=/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m;function Or(t){if("string"!=typeof t||-1!==t.search(/^(data|blob):/))return"";var e=t.indexOf("?");-1<e&&(t=t.substr(0,e));var n=t.indexOf("#");return-1<n&&(t=t.substr(0,n)),t.substr(0,t.lastIndexOf("/")+1)||""}function Ir(t){return"string"==typeof t&&!(-1<t.search(/^(http|https|data|blob):/)||"//"===t.substr(0,2))}function Pr(t){return void 0===Cr&&"function"!=typeof(Cr=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)&&(Cr=null,Ar("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),Cr?Cr(t):t}wr.stringToFunction=function(t,e){var n=t;e&&(n+=e.toString());var i=wr._function_cache[n];if(Lr(),i)return wr._use_count++,i;var r="string"==typeof t&&t.match(Rr);if(r&&2<r.length)try{var o=r[2],s=0<(s=0<r[1].length&&r[1].split(",").map((function(t){return t.trim()})).filter((function(t){return t}))).length?s:["context"],a=new Function(s.toString(),"function"==typeof e?e(o):o);return wr._function_cache[n]=a}catch(e){return t}return t},wr.device_pixel_ratio=1,wr.isPowerOf2=function(t){return 0==(t&t-1)},wr.interpolate=function(t,e,n){if(!Array.isArray(e)||!Array.isArray(e[0]))return e;if(e.length<1)return e;var i,r,o,s,a;if(t<=e[0][0])s=e[0][1],"function"==typeof n&&(s=n(s));else if(t>=e[e.length-1][0])s=e[e.length-1][1],"function"==typeof n&&(s=n(s));else for(var l=0;l<e.length-1;l++)if(t>=e[l][0]&&t<e[l+1][0]){if(i=e[l][0],r=e[l+1][0],Array.isArray(e[l][1])){s=[];for(var c=0;c<e[l][1].length;c++)"function"==typeof n?(a=n(e[l][1][c]),o=n(e[l+1][1][c])-a,s[c]=o*(t-i)/(r-i)+a):(o=e[l+1][1][c]-e[l][1][c],s[c]=o*(t-i)/(r-i)+e[l][1][c])}else s="function"==typeof n?(a=n(e[l][1]),(o=n(e[l+1][1])-a)*(t-i)/(r-i)+a):(o=e[l+1][1]-e[l][1])*(t-i)/(r-i)+e[l][1];break}return s},wr.toCSSColor=function(t){return 1===t[3]?"rgb(".concat(t.slice(0,3).map((function(t){return Math.round(255*t)})).join(", "),")"):"rgba(".concat(t.map((function(t,e){return e<3&&Math.round(255*t)||t})).join(", "),")")},wr.pointInTile=function(t){return 0<=t[0]&&t[1]>-er.tile_scale&&t[0]<er.tile_scale&&t[1]<=0},wr.zoomToTileLevel=function(t){return Math.floor(t)};var Nr=function(){function t(e,n){var i=this;if(yi(this,t),this.config=e,this.sources=n,this.id=e.id,this.name=e.name,this.pad_scale=e.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray(e.rasters)&&e.rasters.forEach((function(t){-1===i.rasters.indexOf(t)&&i.rasters.push(t)})),this.preprocess=e.preprocess,"function"==typeof this.preprocess&&this.preprocess.bind(this),this.transform=e.transform,"function"==typeof this.transform)this.transform=this.transform.bind(this);else if("object"===vi(this.transform))for(var r in this.transform)"function"==typeof this.transform[r]&&(this.transform[r]=this.transform[r].bind(this));this.extra_data=e.extra_data,this.scripts=e.scripts,this.max_zoom=null!=e.max_zoom?e.max_zoom:er.default_source_max_zoom,this.setTileSize(e.tile_size),this.max_coord_zoom=this.max_zoom+this.zoom_bias,this.min_display_zoom=null!=e.min_display_zoom?e.min_display_zoom:0,this.max_display_zoom=null!=e.max_display_zoom?e.max_display_zoom:null,this._has_volatile_data=!!e.has_volatile_data}return _i(t,[{key:"hasLabeledData",value:function(){return!0}},{key:"_transformTile",value:function(t){if(t.source_data.layers){var e={coords:t.coords},n=[];if("function"==typeof this.transform)n.push(this.transform);else if("object"===vi(this.transform))for(var i=Object.keys(this.transform).sort(),r=0;r<i.length;r++)n.push(this.transform[i[r]]);for(var o=1===Object.keys(t.source_data.layers).length&&t.source_data.layers._default,s=0;s<n.length;s++)o?t.source_data.layers._default=n[s](t.source_data.layers._default,this.extra_data,e):t.source_data.layers=n[s](t.source_data.layers,this.extra_data,e)}}},{key:"_postProcessTile",value:function(t){var e=this;for(var n in this._transformTile(t),t.source_data.layers){var i=t.source_data.layers[n];i&&i.features&&i.features.forEach((function(t){er.transformGeometry(t.geometry,(function(t){t[1]=-t[1],e.pad_scale&&(t[0]=Math.round(t[0]*(1+e.pad_scale)-er.tile_scale*e.pad_scale/2),t[1]=Math.round(t[1]*(1+e.pad_scale)-er.tile_scale*e.pad_scale/2))})),e.updateDefaultWinding(t.geometry)}))}t.default_winding=this.default_winding||"CCW"}},{key:"load",value:function(t){return t.source_data={},t.source_data.layers={},t.pad_scale=this.pad_scale,t.rasters=Pi(this.rasters),this._load(t)}},{key:"_load",value:function(){throw new ar("_load")}},{key:"setTileSize",value:function(t){this.tile_size=t||256,("number"!=typeof this.tile_size||this.tile_size<256||!Tr.isPowerOf2(this.tile_size))&&(Ar({level:"warn",once:!0},"Data source '".concat(this.name,"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '").concat(t,"'")),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8}},{key:"updateDefaultWinding",value:function(t){return null==this.default_winding&&("Polygon"===t.type?this.default_winding=er.ringWinding(t.coordinates[0]):"MultiPolygon"===t.type&&(this.default_winding=er.ringWinding(t.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function(t,e){if(t.z<this.min_display_zoom||null!=this.max_display_zoom&&e>this.max_display_zoom)return!1;for(var n=0;n<this.rasters.length;n++){var i=this.rasters[n];if(this.sources[i]&&this.sources[i]!==this&&!this.sources[i].includesTile(t,t.z))return!1}return!0}},{key:"has_volatile_data",get:function(){return this._has_volatile_data},set:function(t){var e=0<arguments.length&&void 0!==t&&t;this._has_volatile_data=e}}],[{key:"create",value:function(e,n){for(var i in n)if(n[i].config.name===e.name&&t.sameConfig(n[i],{config:e}))return n[i];if(t.types[e.type])return new t.types[e.type](e,n)}},{key:"sameConfig",value:function(t,e){if(!t||!e)return!1;var n=Object.assign({},t.config,{id:null,tiled:null,url:null}),i=Object.assign({},e.config,{id:null,tiled:null,url:null});return JSON.stringify(n)===JSON.stringify(i)}},{key:"coordsToMeters",value:function(t){var e=Ii(er.latLngToMeters(t),2),n=e[0],i=e[1];t[0]=n,t[1]=i}},{key:"projectData",value:function(e){for(var n in e.layers)for(var i=e.layers[n].features.length,r=0;r<i;r++){var o=e.layers[n].features[r];er.transformGeometry(o.geometry,t.coordsToMeters)}}},{key:"metersToTileUnits",value:function(t,e,n){n[0]=Math.round((n[0]-e.x)*t),n[1]=-1*Math.round((n[1]-e.y)*t)}},{key:"scaleData",value:function(e,n){var i=n.coords.z,r=n.min,o=(n.max,t.metersToTileUnits.bind(this,er.unitsPerMeter(i),r));for(var s in e.layers)for(var a=e.layers[s].features.length,l=0;l<a;l++){var c=e.layers[s].features[l];er.transformGeometry(c.geometry,o)}}},{key:"register",value:function(e,n){e&&n&&(t.types[n]=e)}}]),t}();Nr.types={};var Dr=0,jr=function(){Si(e,Nr);var t=Ri(e);function e(n,i){var r;yi(this,e),(r=t.call(this,n,i)).response_type="";var o=Ii(function(t,e){if(!e||0===Object.keys(e).length)return[t,[]];var n=t.indexOf("?"),i=t.indexOf("#"),r="";-1<i&&(r=t.slice(i),t=t.slice(0,i)),-1===n&&(n=t.length,t+="?"),n++;var o="",s=[];for(var a in e)""===function(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}(a,t)?o+="".concat(a,"=").concat(e[a],"&"):s.push([a,e[a]]);return[t=t.slice(0,n)+o+t.slice(n)+r,s]}(n.url,n.url_params),2),s=o[0],a=o[1];if(r.url=s,a.forEach((function(t){var e=Ii(t,2),i=e[0],o=e[1];Ar({level:"warn",once:!0},"Data source '".concat(r.name,"': parameter '").concat(i,"' already present in URL '").concat(n.url,"', ")+"skipping value '".concat(i,"=").concat(o,"' specified in 'url_params'"))})),"string"!=typeof r.url)throw Error("Network data source must provide a string `url` property");return r}return _i(e,[{key:"_load",value:function(t){var e=this,n=this.formatUrl(this.url,t),i=t.source_data;return i.url=n,new Promise((function(r,o){i.error=null;var s=Dr+++"-"+n,a=Tr.io(n,6e4,e.response_type,"GET",{},s);i.request_id=s,a.then((function(n){"function"==typeof e.preprocess&&(n=e.preprocess(n)),(n=n instanceof Promise?n:Promise.resolve(n)).then((function(n){e.parseSourceData(t,i,n),e._postProcessTile(t),r(t)}))}),(function(n){i.error=n.stack,e._postProcessTile(t),r(t)}))}))}},{key:"formatUrl",value:function(){throw new ar("formatUrl")}},{key:"parseSourceData",value:function(){throw new ar("parseSourceData")}}]),e}(),zr=function(){Si(e,jr);var t=Ri(e);function e(n,i){var r;return yi(this,e),(r=t.call(this,n,i)).tiled=!0,r.parseBounds(n),r.builds_geometry_tiles=!1,r.tms=!0===n.tms,-1<r.url.search("{s}")&&(Array.isArray(n.url_subdomains)&&0<n.url_subdomains.length?(r.url_subdomains=n.url_subdomains,r.next_url_subdomain=0):Ar({level:"warn",once:!0},"Data source '".concat(r.name,"': source URL includes '{s}' subdomain marker ('").concat(r.url,"'), but no subdomains ")+"were specified in 'url_subdomains' parameter")),r}return _i(e,[{key:"parseBounds",value:function(t){var e,n,i,r,o;Array.isArray(t.bounds)&&4===t.bounds.length&&(this.bounds=t.bounds,n=(e=Ii(this.bounds,4))[0],i=e[1],r=e[2],o=e[3],this.bounds_meters={min:er.latLngToMeters([n,o]),max:er.latLngToMeters([r,i])},this.bounds_tiles={min:{},max:{}})}},{key:"checkBounds",value:function(t){if(this.bounds){t=er.wrapTile(t,{x:!0});var e=(e=this.bounds_tiles.min[t.z])||(this.bounds_tiles.min[t.z]=er.tileForMeters(this.bounds_meters.min,t.z)),n=(n=this.bounds_tiles.max[t.z])||(this.bounds_tiles.max[t.z]=er.tileForMeters(this.bounds_meters.max,t.z));if(t.x<e.x||t.x>n.x||t.y<e.y||t.y>n.y)return!1}return!0}},{key:"includesTile",value:function(t,n){return!!Oi(Ai(e.prototype),"includesTile",this).call(this,t,n)&&!!this.checkBounds(t)}},{key:"formatUrl",value:function(t,e){var n=er.wrapTile(e.coords,{x:!0});this.tms&&(n.y=Math.pow(2,n.z)-1-n.y);var i=t.replace("{x}",n.x).replace("{y}",n.y).replace("{z}",n.z);return null!=this.url_subdomains&&(i=i.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),i}},{key:"urlHasTilePattern",value:function(t){return t&&-1<t.search("{x}")&&-1<t.search("{y}")&&-1<t.search("{z}")}}]),e}(),$r=function(){Si(e,Nr);var t=Ri(e);function e(n,i){var r;return yi(this,e),(r=t.call(this,n,i)).target_name="MapsJsSource"+n.uid,r.tiled=!!n.tiled,hr.addTarget(r.target_name,Li(r)),ur.is_worker&&hr.postMessage(r.target_name+".onWorkerInitialized"),ur.is_main&&(r._workers_left=0),r}return _i(e,[{key:"initialize",value:function(t,e,n,i){this._main_initialized||(this.provider=t,this.worker=i,this._workers_left+=n,this._on_update=e,this._main_initialized=!0,this._onProviderUpdate=this._onProviderUpdate.bind(this),t.addEventListener("update",this._onProviderUpdate),this._isReady()&&this.onReady())}},{key:"onWorkerInitialized",value:function(){--this._workers_left,this._isReady()&&this.onReady()}},{key:"onReady",value:function(){}},{key:"_isReady",value:function(){return this._main_initialized&&!this._workers_left}},{key:"_onProviderUpdate",value:function(t){this._isReady()&&this.onProviderUpdate(t)}},{key:"onProviderUpdate",value:function(t){this.dispatchUpdate(void 0,t.data)}},{key:"dispatchUpdate",value:function(t,e){this._on_update(this.name,t,e)}},{key:"dispose",value:function(){hr.removeTarget(this.target_name),this.provider.removeEventListener("update",this._onProviderUpdate)}}]),e}(),Fr=function(t,e,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?r-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-u)-1,p>>=-u,u+=a;0<u;o=256*o+t[e+h],h+=f,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;0<u;s=256*s+t[e+h],h+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=c}return(p?-1:1)*s*Math.pow(2,o-i)},Br=function(t,e,n,i,r,o){var s,a,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),2<=(e+=1<=s+h?f/l:f*Math.pow(2,1-h))*l&&(s++,l/=2),u<=s+h?(a=0,s=u):1<=s+h?(a=(e*l-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));8<=r;t[n+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,c+=r;0<c;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*g},Hr=Ur;function Ur(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Ur.Varint=0,Ur.Fixed64=1,Ur.Bytes=2,Ur.Fixed32=5;var Gr=4294967296,Vr=1/Gr;function Wr(t){return t.type===Ur.Bytes?t.readVarint()+t.pos:t.pos+1}function qr(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Kr(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;t<=r;r--)n.buf[r+i]=n.buf[r]}function Yr(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Xr(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Zr(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Jr(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Qr(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function to(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function eo(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function no(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function io(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function ro(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function oo(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function so(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Ur.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;this.type=7&i,t(r,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=ro(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=so(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=ro(this.buf,this.pos)+ro(this.buf,this.pos+4)*Gr;return this.pos+=8,t},readSFixed64:function(){var t=ro(this.buf,this.pos)+so(this.buf,this.pos+4)*Gr;return this.pos+=8,t},readFloat:function(){var t=Fr(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Fr(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,n=e[this.pos++],i=127&n;return n<128?i:(i|=(127&(n=e[this.pos++]))<<7,n<128?i:(i|=(127&(n=e[this.pos++]))<<14,n<128?i:(i|=(127&(n=e[this.pos++]))<<21,n<128?i:function(t,e,n){var i,r,o=n.buf;if(i=(112&(r=o[n.pos++]))>>4,r<128)return qr(t,i,e);if(i|=(127&(r=o[n.pos++]))<<3,r<128)return qr(t,i,e);if(i|=(127&(r=o[n.pos++]))<<10,r<128)return qr(t,i,e);if(i|=(127&(r=o[n.pos++]))<<17,r<128)return qr(t,i,e);if(i|=(127&(r=o[n.pos++]))<<24,r<128)return qr(t,i,e);if(i|=(1&(r=o[n.pos++]))<<31,r<128)return qr(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(n=e[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var i,r,o,s="",a=e;a<n;){var l=t[a],c=null,u=239<l?4:223<l?3:191<l?2:1;if(n<a+u)break;1===u?l<128&&(c=l):2===u?128==(192&(i=t[a+1]))&&(c=(31&l)<<6|63&i)<=127&&(c=null):3===u?(i=t[a+1],r=t[a+2],128==(192&i)&&128==(192&r)&&((c=(15&l)<<12|(63&i)<<6|63&r)<=2047||55296<=c&&c<=57343)&&(c=null)):4===u&&(i=t[a+1],r=t[a+2],o=t[a+3],128==(192&i)&&128==(192&r)&&128==(192&o)&&((c=(15&l)<<18|(63&i)<<12|(63&r)<<6|63&o)<=65535||1114112<=c)&&(c=null)),null===c?(c=65533,u=1):65535<c&&(c-=65536,s+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),s+=String.fromCharCode(c),a+=u}return s}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=Wr(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Ur.Varint)for(;127<this.buf[this.pos++];);else if(e===Ur.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ur.Fixed32)this.pos+=4;else{if(e!==Ur.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e,n=this.length||16;n<this.pos+t;)n*=2;n!==this.length&&((e=new Uint8Array(n)).set(this.buf),this.buf=e,this.length=n)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),oo(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),oo(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),oo(this.buf,-1&t,this.pos),oo(this.buf,Math.floor(t*Vr),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),oo(this.buf,-1&t,this.pos),oo(this.buf,Math.floor(t*Vr),this.pos+4),this.pos+=8},writeVarint:function(t){268435455<(t=+t||0)||t<0?function(t,e){var n,i;if(0<=t?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:i=i+1|(n=0)),0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}(n,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,o=0;o<e.length;o++){if(55295<(i=e.charCodeAt(o))&&i<57344){if(!r){56319<i||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;128<=n&&Kr(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Br(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Br(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;128<=i&&Kr(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,Ur.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,Yr,e)},writePackedSVarint:function(t,e){this.writeMessage(t,Xr,e)},writePackedBoolean:function(t,e){this.writeMessage(t,Qr,e)},writePackedFloat:function(t,e){this.writeMessage(t,Zr,e)},writePackedDouble:function(t,e){this.writeMessage(t,Jr,e)},writePackedFixed32:function(t,e){this.writeMessage(t,to,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,eo,e)},writePackedFixed64:function(t,e){this.writeMessage(t,no,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,io,e)},writeBytesField:function(t,e){this.writeTag(t,Ur.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Ur.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Ur.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Ur.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Ur.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Ur.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Ur.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Ur.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Ur.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Ur.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}},Yi.prototype.loadGeometry=function(t){var e=this._pbf;e.pos=this._geometry;for(var n,i,r=e.readVarint()+e.pos,o=1,s=0,a=0,l=0,c=[];e.pos<r;)if(s<=0&&(o=7&(i=e.readVarint()),s=i>>3),s--,1===o||2===o)a+=e.readSVarint(),l+=e.readSVarint(),1===o&&(n&&c.push(n),n=[]),n.push([a*t,l*t]);else{if(7!==o)throw new Error("unknown command "+o);n&&n.push(n[0].slice())}return n&&c.push(n),c};var ao=1,lo=2,co=3;function uo(t){var e=[],n=t&&t.features;if(n)for(var i=0,r=n.length;i<r;i++){var o=n[i],s=o.type,a=void 0;switch(s){case ao:a={type:"MultiPoint",coordinates:o.geometry.map((function(t){return t.slice()}))};break;case lo:case co:if(a={type:"MultiLineString",coordinates:o.geometry.map((function(t){return t.map((function(t){return t.slice()}))}))},s===co&&null==(a=ho(a)))continue;break;default:continue}e.push({id:o.id,type:"Feature",geometry:a,properties:o.tags})}return{type:"FeatureCollection",features:e}}function ho(t){for(var e,n=[],i=[],r=0,o=t.coordinates.length;r<o;r++){var s=t.coordinates[r],a=er.ringWinding(s);null!=a&&(a===(e=e||a)&&i.length&&(n.push(i),i=[]),i.push(s))}return 0<i.length&&n.push(i),1===n.length?(t.type="Polygon",t.coordinates=n[0]):1<n.length?(t.type="MultiPolygon",t.coordinates=n):t=null,t}var fo={type:"FeatureCollection",features:[]},po=function(){Si(e,$r);var t=Ri(e);function e(n,i){return yi(this,e),n.tiled=!0,t.call(this,n,i)}return _i(e,[{key:"fetchTile",value:function(t,e,n){return this.provider?this.provider.requestTileAsPromise(t,e,n).then((function(t){return t.data})):Promise.resolve()}},{key:"_load",value:function(t){var e=this,n=er.wrapTile(t.coords,{x:!0,y:!0}),i=n.x,r=n.y,o=n.z;return hr.postMessage(this.target_name+".fetchTile",i,r,o).then((function(n){var i;return n instanceof ArrayBuffer?(i=new Hr(new Uint8Array(n)),t.source_data.layers=function(t){var e={};for(var n in t.layers){for(var i=t.layers[n],r=[],o=er.tile_scale/i.extent,s=0,a=i.length;s<a;s++){var l=i.feature(s),c=Yi.types[l.type],u=l.loadGeometry(o),h=null;switch(c){case"Point":h=function(t){var e=t.coordinates.length;if(1<e){t.type="MultiPoint";for(var n=[],i=0;i<e;i++)n.push(t.coordinates[i][0]);t.coordinates=n}else t.type="Point",t.coordinates=t.coordinates[0][0];return t}({coordinates:u});break;case"LineString":h=1===u.length?{type:c,coordinates:u[0]}:{type:"MultiLineString",coordinates:u};break;case"Polygon":h=ho({coordinates:u})}h&&h.coordinates&&r.push({type:"Feature",geometry:h,properties:l.properties})}e[n]={type:"FeatureCollection",features:r}}return e}(new Ki(i))):n?t.source_data.error=n:t.source_data.layers={_default:fo},e._postProcessTile(t),t}))}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),e}();function go(t){return Math.max(t,0)}function mo(t){return isNaN(t)?0:t}function vo(t){return Array.isArray(t)?t.map(parseFloat).map(mo):mo(parseFloat(t))}function yo(t){return Array.isArray(t)?t.map(vo).map(go):go(vo(t))}Nr.register(po,"MVT"),Nr.register(po,"OMV");var bo=s((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(t){return(t=Math.round(t))<0?0:255<t?255:t}function r(t){return t<0?0:1<t?1:t}function o(t){return"%"===t[t.length-1]?i(parseFloat(t)/100*255):i(parseInt(t))}function s(t){return"%"===t[t.length-1]?r(parseFloat(t)/100):r(parseFloat(t))}function a(t,e,n){return n<0?n+=1:1<n&&--n,6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in n)return n[r].slice();if("#"===r[0])return 4===r.length?0<=(e=parseInt(r.substr(1),16))&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&0<=(e=parseInt(r.substr(1),16))&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=r.indexOf("("),c=r.indexOf(")");if(-1!==l&&c+1===r.length){var u=r.substr(0,l),h=r.substr(l+1,c-(l+1)).split(","),f=1;switch(u){case"rgba":if(4!==h.length)return null;f=s(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),f];case"hsla":if(4!==h.length)return null;f=s(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,d=s(h[1]),g=s(h[2]),m=g<=.5?g*(d+1):g+d-g*d,v=2*g-m;return[i(255*a(v,m,p+1/3)),i(255*a(v,m,p)),i(255*a(v,m,p-1/3)),f];default:return null}}return null}}catch(t){}})),_o=(bo.parseCSSColor,{});Object.assign(_o,{clampPositive:go,noNaN:mo,parseNumber:vo,parsePositiveNumber:yo}),_o.wrapFunction=function(t){return"\n        var feature = context.feature.properties;\n        var global = context.global;\n        var $zoom = context.zoom;\n        var $layer = context.layer;\n        var $source = context.source;\n        var sources = context.sources;\n        var $geometry = context.geometry;\n        var $meters_per_pixel = context.meters_per_pixel;\n\n        var val = (function(){ ".concat(t," }());\n\n        if (typeof val === 'number' && isNaN(val)) {\n            val = null; // convert NaNs to nulls\n        }\n\n        return val;\n    ")},_o.zeroPair=Object.freeze([0,0]),_o.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},_o.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},_o.getFeatureParseContext=function(t,e,n,i){return{feature:t,tile:e,global:n,sources:i,zoom:e.style_zoom,geometry:er.geometryType(t.geometry.type),meters_per_pixel:e.meters_per_pixel,meters_per_pixel_sq:e.meters_per_pixel_sq,units_per_meter_overzoom:e.units_per_meter_overzoom}};var wo={STATIC:0,DYNAMIC:1,ZOOM:2};function xo(t){return"string"==typeof t&&"%"===t[t.length-1]}function ko(t){return"auto"===t}function So(t){return xo(t)||ko(t)}_o.CACHE_TYPE=wo,_o.createPropertyCache=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!=t){if(t.value)return{value:t.value,zoom:t.zoom?{}:null,type:t.type};var n={value:t,type:wo.STATIC};return Array.isArray(n.value)&&Array.isArray(n.value[0])?(n.zoom={},n.type=wo.ZOOM):"function"==typeof n.value&&(n.type=wo.DYNAMIC),"function"==typeof e&&(n.zoom?n.value=n.value.map((function(t,n){return[t[0],e(t[1],n)]})):"function"!=typeof n.value&&(n.value=e(n.value,0))),n}},_o.createColorPropertyCache=function(t){return _o.createPropertyCache(t,(function(t){return"Style.color.pseudoRandomColor"===t?Tr.stringToFunction(_o.wrapFunction(_o.macros["Style.color.pseudoRandomColor"])):"Style.color.randomColor"===t?_o.macros["Style.color.randomColor"]:t}))};var Ao="'size' can specify either width or height as derived from aspect ratio, but not both";_o.createPointSizePropertyCache=function(t){var e=null,n=null;if(xo(t))e=[!0];else if(Array.isArray(t))if(Array.isArray(t[0])){if(t.some((function(t){return Array.isArray(t[1])?t[1].some(So):xo(t[1])}))&&(e=t.map((function(t){return Array.isArray(t[1])?t[1].map(xo):xo(t[1])})),(n=t.map((function(t){return Array.isArray(t[1])&&t[1].map(ko)}))).some((function(t){return Array.isArray(t)&&t.every((function(t){return t}))}))))throw Ao}else if(t.some(So)&&(e=[t.map(xo)],(n=[t.map(ko)])[0].every((function(t){return t}))))throw Ao;return e?((t={value:t}).has_pct=e,t.has_ratio=n,t.sprites={}):t=_o.createPropertyCache(t,yo),t},_o.evalCachedPointSizeProperty=function(t,e,n){return t.has_pct||t.has_ratio?e?(t.sprites[e.sprite]||(t.sprites[e.sprite]=_o.createPropertyCache(t.value,(function(n,i){return Array.isArray(n)?(n=n.map((function(e,n){return t.has_ratio[i][n]?e:yo(e)})).map((function(n,r){return t.has_pct[i][r]?e.css_size[r]*n/100:n})),t.has_ratio[i][0]?n[0]=n[1]*e.aspect:t.has_ratio[i][1]&&(n[1]=n[0]/e.aspect)):(n=yo(n),n=t.has_pct[i]?e.css_size.map((function(t){return t*n/100})):[n,n]),n}))),_o.evalCachedProperty(t.sprites[e.sprite],n)):void 0:_o.evalCachedProperty(t,n)},_o.evalCachedProperty=function(t,e){if(null!=t)return t.dynamic?t.dynamic(e):t.static?t.static:t.zoom&&t.zoom[e.zoom]?t.zoom[e.zoom]:"function"!=typeof t.value?Array.isArray(t.value)&&Array.isArray(t.value[0])?(t.zoom=t.zoom||{},t.zoom[e.zoom]=Tr.interpolate(e.zoom,t.value),t.zoom[e.zoom]):(t.static=t.value,t.static):(t.dynamic=t.value,t.dynamic(e))},_o.convertUnits=function(t,e){if(null!=t.val)return"px"===t.units?t.val*er.metersPerPixel(e.zoom):t.val;if("string"==typeof t)"px"===t.trim().slice(-2)?(t=vo(t),t*=er.metersPerPixel(e.zoom)):t=vo(t);else if(Array.isArray(t))return Array.isArray(t[0])?t.map((function(t){return[t[0],_o.convertUnits(t[1],e)]})):t.map((function(t){return _o.convertUnits(t,e)}));return t},_o.parseUnits=function(t){var e={val:vo(t)};return 0!==e.val&&"string"==typeof t&&"px"===t.trim().slice(-2)&&(e.units="px"),e},_o.evalCachedDistanceProperty=function(t,e){return t.dynamic?t.dynamic(e):t.zoom&&t.zoom[e.zoom]?t.zoom[e.zoom]:"function"!=typeof t.value?t.zoom?(t.zoom[e.zoom]=Tr.interpolate(e.zoom,t.value,(function(t){return _o.convertUnits(t,e)})),t.zoom[e.zoom]):_o.convertUnits(t.value,e):(t.dynamic=t.value,t.dynamic(e))},_o.string_colors={},_o.colorForString=function(t){if(_o.string_colors[t])return _o.string_colors[t];var e=null;return"none"!==t&&((e=bo.parseCSSColor(t))&&4===e.length?(e[0]/=255,e[1]/=255,e[2]/=255):e=_o.defaults.color),_o.string_colors[t]=e},_o.evalCachedColorProperty=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.dynamic){var n=t.dynamic(e);return"string"==typeof n&&(n=_o.colorForString(n)),n&&null==n[3]&&(n[3]=1),n}if(t.static)return t.static;if(t.zoom&&t.zoom[e.zoom])return t.zoom[e.zoom];if("function"==typeof t.value){t.dynamic=t.value;var i=t.dynamic(e);return"string"==typeof i&&(i=_o.colorForString(i)),i&&null==i[3]&&(i[3]=1),i}if("string"==typeof t.value)return t.static=_o.colorForString(t.value),t.static;if(t.zoom){if(!t.zoom_preprocessed){for(var r=0;r<t.value.length;r++){var o=t.value[r];o&&"string"==typeof o[1]&&(o[1]=_o.colorForString(o[1]))}t.zoom_preprocessed=!0}return t.zoom[e.zoom]=Tr.interpolate(e.zoom,t.value),t.zoom[e.zoom][3]=t.zoom[e.zoom][3]||1,t.zoom[e.zoom]}return t.static=t.value.map((function(t){return t})),t.static&&null==t.static[3]&&(t.static[3]=1),t.static},_o.parseColor=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof t&&(t=t(e)),"string"==typeof t)t=_o.colorForString(t);else if(Array.isArray(t)&&Array.isArray(t[0])){for(var n=0;n<t.length;n++){var i=t[n];"string"==typeof i[1]&&(i[1]=_o.colorForString(i[1]))}e.zoom&&(t=Tr.interpolate(e.zoom,t))}return Array.isArray(t)?null==(t=t.map((function(t){return t})))[3]&&(t[3]=1):t=[0,0,0,1],t},_o.calculateOrder=function(t,e){return"function"==typeof t?t=t(e):"string"==typeof t&&(t=e.feature.properties[t]?e.feature.properties[t]:yo(t)),t},_o.evalProperty=function(t,e){return"function"==typeof t?t(e):t};var Eo=function(){function t(e,n){yi(this,t),this.key=e,this.repeat_dist=n,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}return _i(t,[{key:"check",value:function(t){for(var e=t.position,n=0;n<this.positions.length;n++){var i=this.positions[n],r=e[0]-i[0],o=e[1]-i[1],s=r*r+o*o;if(s<this.repeat_dist_sq)return{dist_sq:s,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function(t){t&&t.position&&this.positions.push(t.position)}}],[{key:"clear",value:function(t){this.groups[t]={}}},{key:"check",value:function(t,e,n){if(e.repeat_distance&&e.repeat_group&&this.groups[n][e.repeat_group])return this.groups[n][e.repeat_group].check(t)}},{key:"add",value:function(e,n,i){n.repeat_distance&&n.repeat_group&&(null==this.groups[i][n.repeat_group]&&(this.groups[i][n.repeat_group]=new t(n.repeat_group,n.repeat_distance*n.repeat_scale)),this.groups[i][n.repeat_group].add(e))}}]),t}();Eo.groups={};var To=function(){function t(e,n,i){yi(this,t);var r=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(e/i),this.yCellCount=Math.ceil(n/i);for(var s=0;s<this.xCellCount*this.yCellCount;s++)r.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return _i(t,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}},{key:"insertCircle",value:function(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)}},{key:"insertCircleList",value:function(t,e){for(var n=0;n<e.length-2;n+=3)this.insertCircle("".concat(t,"/").concat(n),e[n],e[n+1],e[n+2])}},{key:"_insertBoxCell",value:function(t,e,n,i,r,o){this.boxCells[r].push(o)}},{key:"_insertCircleCell",value:function(t,e,n,i,r,o){this.circleCells[r].push(o)}},{key:"_query",value:function(t,e,n,i,r,o){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];var s=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(var a=0;a<this.boxKeys.length;a++)s.push({key:this.boxKeys[a],x1:this.bboxes[4*a],y1:this.bboxes[4*a+1],x2:this.bboxes[4*a+2],y2:this.bboxes[4*a+3]});for(var l=0;l<this.circleKeys.length;l++){var c=this.circles[3*l],u=this.circles[3*l+1],h=this.circles[3*l+2];s.push({key:this.circleKeys[l],x1:c-h,y1:u-h,x2:c+h,y2:u+h})}return o?s.filter(o):s}var f={hitTest:r,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,n,i,this._queryCell,s,f,o),r?0<s.length:s}},{key:"_queryCircle",value:function(t,e,n,i,r){var o=t-n,s=t+n,a=e-n,l=e+n;if(s<0||o>this.width||l<0||a>this.height)return!i&&[];var c=[],u={hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,a,s,l,this._queryCellCircle,c,u,r),i?0<c.length:c}},{key:"query",value:function(t,e,n,i,r){return this._query(t,e,n,i,!1,r)}},{key:"hitTest",value:function(t,e,n,i,r){return this._query(t,e,n,i,!0,r)}},{key:"hitTestCircle",value:function(t,e,n,i){return this._queryCircle(t,e,n,!0,i)}},{key:"hitTestCircleList",value:function(t,e){for(var n=0;n<t.length-2;n+=3)if(this.hitTestCircle(t[n],t[n+1],t[n+2],e))return!0;return!1}},{key:"_queryCell",value:function(t,e,n,i,r,o,s,a){var l=s.seenUids,c=this.boxCells[r];if(null!==c){var u,h=this.bboxes,f=ji(c);try{for(f.s();!(u=f.n()).done;){var p=u.value;if(!l.box[p]){l.box[p]=!0;var d=4*p;if(t<=h[2+d]&&e<=h[3+d]&&n>=h[0+d]&&i>=h[1+d]&&(!a||a(this.boxKeys[p]))){if(s.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:h[d],y1:h[1+d],x2:h[2+d],y2:h[3+d]})}}}}catch(t){f.e(t)}finally{f.f()}}var g=this.circleCells[r];if(null!==g){var m,v=this.circles,y=ji(g);try{for(y.s();!(m=y.n()).done;){var b=m.value;if(!l.circle[b]){l.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(v[_],v[1+_],v[2+_],t,e,n,i)&&(!a||a(this.circleKeys[b]))){if(s.hitTest)return o.push(!0),!0;var w=v[_],x=v[1+_],k=v[2+_];o.push({key:this.circleKeys[b],x1:w-k,y1:x-k,x2:w+k,y2:x+k})}}}}catch(t){y.e(t)}finally{y.f()}}}},{key:"_queryCellCircle",value:function(t,e,n,i,r,o,s,a){var l=s.circle,c=s.seenUids,u=this.boxCells[r];if(null!==u){var h,f=this.bboxes,p=ji(u);try{for(p.s();!(h=p.n()).done;){var d=h.value;if(!c.box[d]){c.box[d]=!0;var g=4*d;if(this._circleAndRectCollide(l.x,l.y,l.radius,f[0+g],f[1+g],f[2+g],f[3+g])&&(!a||a(this.boxKeys[d])))return o.push(!0),!0}}}catch(t){p.e(t)}finally{p.f()}}var m=this.circleCells[r];if(null!==m){var v,y=this.circles,b=ji(m);try{for(b.s();!(v=b.n()).done;){var _=v.value;if(!c.circle[_]){c.circle[_]=!0;var w=3*_;if(this._circlesCollide(y[w],y[1+w],y[2+w],l.x,l.y,l.radius)&&(!a||a(this.circleKeys[_])))return o.push(!0),!0}}}catch(t){b.e(t)}finally{b.f()}}}},{key:"_forEachCell",value:function(t,e,n,i,r,o,s,a){for(var l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i),f=l;f<=u;f++)for(var p=c;p<=h;p++){var d=this.xCellCount*p+f;if(r.call(this,t,e,n,i,d,o,s,a))return}}},{key:"_convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"_convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}},{key:"_circlesCollide",value:function(t,e,n,i,r,o){var s=i-t,a=r-e,l=n+o;return s*s+a*a<l*l}},{key:"_circleAndRectCollide",value:function(t,e,n,i,r,o,s){var a=(o-i)/2,l=Math.abs(t-(i+a));if(a+n<l)return!1;var c=(s-r)/2,u=Math.abs(e-(r+c));if(c+n<u)return!1;if(l<=a||u<=c)return!0;var h=l-a,f=u-c;return h*h+f*f<=n*n}}]),t}(),Co=function(t,e,n,i){var r;if(i&&(r=function(t){return t!==i.id}),!e){if("point"===t.type&&!t.angle){var o=t.getAABB(),s=o.left,a=o.top,l=o.right,c=o.bottom;if(n.hitTest(s,-a,l,-c,r)){if(Array.isArray(t.layout.anchor))for(var u=1;u<t.layout.anchor.length;u++){t.setAnchor(t.layout.anchor[u]);var h=t.getAABB(),f=h.left,p=h.top,d=h.right,g=h.bottom;if(!n.hitTest(f,-p,d,-g,r))return!1}return!0}return!1}var m=t.getBoundingCircles();return n.hitTestCircleList(m,r)}if(e){if("point"===t.type&&!t.isFlat()){var v=t.getScreenSpaceBoundingBox(),y=v.left,b=v.top,_=v.right,w=v.bottom;return n.hitTest(y,b,_,w,r)}var x=t.getBoundingCircles();return n.hitTestCircleList(x,r)}return!1},Mo={tiles:{},startTile:function(t,e){var n=1<arguments.length&&void 0!==e?e:{},i=n.apply_repeat_groups,r=void 0===i||i,o=n.return_hidden,s=void 0!==o&&o,a=n.grid_index,l=void 0===a?null:a,c=this.tiles[t]={grid_index:l||new To(er.tile_scale,er.tile_scale,240),objects:{},labels:{},styles:{},repeat:r,return_hidden:s};null==c.complete&&(c.complete=new Promise((function(t,e){c.resolve=t,c.reject=e})))},resetTile:function(t){delete this.tiles[t]},abortTile:function(t){this.tiles[t]&&this.tiles[t].resolve&&this.tiles[t].resolve([]),this.resetTile(t)},addStyle:function(t,e){this.tiles[e].styles[t]=!0},collide:function(t,e,n){var i=this.tiles[n];if(!i)return Promise.resolve([]);for(var r=i.objects,o=0;o<t.length;o++){var s=t[o],a=s.label.layout.priority;r[a]=r[a]||{},r[a][e]=r[a][e]||[],r[a][e].push(s)}return delete i.styles[e],0===Object.keys(i.styles).length&&this.endTile(n),i.complete.then((function(){return i.resolve=null,i.labels[e]||[]}))},endTile:function(t){var e=this.tiles[t],n=e.labels;e.repeat&&Eo.clear(t);for(var i=Object.keys(e.objects).sort((function(t,e){return t-e})),r=0;r<i.length;r++){var o=e.objects[i[r]];if(o)for(var s in o){var a=o[s];n[s]=n[s]||[];for(var l=0;l<a.length;l++){var c=a[l];this.canBePlaced(c,t,c.linked,e)?c.linked?this.canBePlaced(c.linked,t,c,e)?(c.show=!0,(c.label.breach||c.linked.label.breach)&&(c.label.breach=!0,c.linked.label.breach=!0),n[s].push(c),this.place(c,t,e),this.place(c.linked,t,e)):e.return_hidden&&(c.show=!1,n[s].push(c)):(c.show=!0,n[s].push(c),this.place(c,t,e)):e.return_hidden&&(c.show=!1,n[s].push(c))}}}delete this.tiles[t],e.resolve()},canBePlaced:function(t,e,n,i){var r=2<arguments.length&&void 0!==n?n:null,o=(3<arguments.length&&void 0!==i?i:{}).repeat,s=void 0===o||o,a=t.label,l=t.label.layout;if(null!==a.placed)return a.placed;var c=this.tiles[e].grid_index;if(l.collide&&Co(a,"main"===e,c,r&&r.label))l.collide&&(a.placed=!1);else{if(!s||!Eo.check(a,l,e))return!0;a.placed=!1}return a.placed},place:function(t,e,n){var i=t.label,r=n.repeat,o=void 0===r||r;null===i.placed&&(o&&Eo.add(i,i.layout,e),function(t,e,n){var i,r,o,s,a,l,c,u,h,f,p,d,g=t.id;t.placed=!0,e||("point"!==t.type||t.angle?(i=t.getBoundingCircles(),n.insertCircleList(g,i)):(o=(r=t.getAABB()).left,s=r.top,a=r.right,l=r.bottom,n.insert(g,o,-s,a,-l))),e&&("point"!==t.type||t.isFlat()?(c=t.getBoundingCircles(),n.insertCircleList(g,c)):(h=(u=t.getScreenSpaceBoundingBox()).left,f=u.top,p=u.right,d=u.bottom,n.insert(g,h,f,p,d)))}(i,"main"===e,this.tiles[e].grid_index))}},Lo={id:0,queue:[],max_time:20,start_time:null,state:{},ignore_user_moving_view:!1,_ignoreViewMoveWithDebounce:Er((function(){Lo.ignore_user_moving_view=!0}),0,500),add:function(t){t.id=Lo.id++,t.max_time=t.max_time||Lo.max_time,t.pause_factor=t.pause_factor||1;var e=new Promise((function(e,n){t.resolve=e,t.reject=n}));return t.promise=e,t.total_elapsed=0,t.stats={calls:0},this.queue.push(t),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,this.elapsed<Lo.max_time&&this.process(t),t.promise},remove:function(t){var e=this.queue.indexOf(t);-1<e&&this.queue.splice(e,1)},process:function(t){if(!this.state.user_moving_view||!1!==t.user_moving_view||this.ignore_user_moving_view)return t.pause?(t.pause--,!0):(t.stats.calls++,t.start_time=performance.now(),t.run(t));Lo._ignoreViewMoveWithDebounce()},processAll:function(){this.start_time=this.start_time||performance.now(),this.ignore_user_moving_view&&!this.hasPendingTasks()&&(this.ignore_user_moving_view=!1);for(var t=0;t<this.queue.length;t++){var e=this.queue[t];if(!0!==this.process(e)&&(e.pause||(e.pause=e.elapsed>e.max_time?e.pause_factor:0),e.total_elapsed+=e.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=Lo.max_time){this.start_time=null;break}}},finish:function(t,e){return t.elapsed=performance.now()-t.start_time,t.total_elapsed+=t.elapsed,this.remove(t),t.resolve(e),t.promise},cancel:function(t){var e;t.cancel instanceof Function&&(e=t.cancel(t)),t.resolve(e||{})},shouldContinue:function(t){return t.elapsed=performance.now()-t.start_time,this.elapsed=performance.now()-this.start_time,t.elapsed<t.max_time&&this.elapsed<Lo.max_time},removeForTile:function(t){for(var e=this.queue.length-1;0<=e;e--)this.queue[e].tile_id===t&&(this.cancel(this.queue[e]),this.queue.splice(e,1))},setState:function(t){this.state=t},hasPendingTasks:function(){return!!this.queue.length}};function Ro(t){return{coords:t.coords,uid:t.uid,filtering:t.filtering,sprites:t.sprites,url:t.url,element:t.element,data:t.data,width:t.width,height:t.height,density:t.density,repeat:t.repeat,TEXTURE_WRAP_S:t.TEXTURE_WRAP_S,TEXTURE_WRAP_T:t.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:t.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:t.UNPACK_PREMULTIPLY_ALPHA_WEBGL}}var Oo=function(){function t(e,n,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};yi(this,t),r=Ro(r),this.gl=e,this.texture=e.createTexture(),this.texture&&(this.valid=!0),this.manager=i,this.bind(),this.name=n,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=r.filtering,this.density=r.density||1,this.sprites=r.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this._byte_length=0,this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,this.manager.textures[this.name]&&(this.retain_count=this.manager.textures[this.name].retain_count,this.manager.textures[this.name].retain_count=0,this.manager.textures[this.name].destroy()),(this.manager.textures[this.name]=this).manager.texture_configs[this.name]=JSON.stringify(Object.assign({name:n},r)),this.load(r),Ar("trace","creating Texture ".concat(this.name))}return _i(t,[{key:"destroy",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).force;0<this.retain_count&&!e?Ar("error","Texture '".concat(this.name,"': destroying texture with retain count of '").concat(this.retain_count,"'")):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete this.manager.textures[this.name],delete this.manager.texture_configs[this.name],this.valid=!1,this._byte_length=0,Ar("trace","destroying Texture ".concat(this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&Ar("error","Texture '".concat(this.name,"': releasing texture with retain count of '").concat(this.retain_count,"'")),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function(t){var e=0<arguments.length&&void 0!==t?t:0;this.valid&&(this.manager.activeUnit!==e&&(this.gl.activeTexture(this.gl.TEXTURE0+e),this.manager.activeUnit=e,this.manager.boundTexture=null),this.manager.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.manager.boundTexture=this.texture))}},{key:"load",value:function(t){var e=this;return t?(this.loading=null,"string"==typeof t.url?(this.config_type="url",this.setUrl(t.url,t)):t.element?(this.config_type="element",this.setElement(t.element,t)):t.data&&t.width&&t.height&&(this.config_type="data",this.setData(t.width,t.height,t.data,t)),this.loading=this.loading&&this.loading.then((function(){return e.calculateSprites(),e}))||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function(t,e){var n=this,i=1<arguments.length&&void 0!==e?e:{};if(this.valid)return this.url=t,this.loading=new Promise((function(t,e){var r=new Image;r.onload=function(){try{n.setElement(r,i)}catch(e){n.loaded=!1,Ar("warn","Texture '".concat(n.name,"': failed to load url: '").concat(n.url,"'"),e,i),n.manager.trigger("warning",{message:"Failed to load texture from ".concat(n.url),error:e,texture:i})}n.loaded=!0,t(n)},r.onerror=function(e){n.loaded=!1,Ar("warn","Texture '".concat(n.name,"': failed to load url: '").concat(n.url,"'"),e,i),n.manager.trigger("warning",{message:"Failed to load texture from ".concat(n.url),error:e,texture:i}),t(n)},Tr.isSafari()&&"data:"===n.url.slice(0,5)||(r.crossOrigin="anonymous"),r.src=n.url})),this.loading}},{key:"setData",value:function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:{};return this.width=t,this.height=e,Array.isArray(n)&&(n=new Uint8Array(n)),this.update(n,r),this.setFiltering(r),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(t,e){var n,i=t;return"string"==typeof t&&(t=document.querySelector(t)),t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement?(this.update(t,e),this.setFiltering(e)):(this.loaded=!1,n="the 'element' parameter (`element: ".concat(JSON.stringify(i),"`) must be a CSS "),n+="selector string, or a <canvas>, <image> or <video> object",Ar("warn","Texture '".concat(this.name,"': ").concat(n),e),this.manager.trigger("warning",{message:"Failed to load texture because ".concat(n),texture:e})),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:{};this.valid&&(this.bind(),t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof HTMLImageElement&&t.complete?(this.width=t.width,this.height=t.height,this._byte_length=this.width*this.height*4,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1!==n.UNPACK_FLIP_Y_WEBGL),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t)):(this._byte_length=t?t.byteLength:0,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t)),this.manager.trigger("update",this))}},{key:"getByteLength",value:function(){return this._byte_length}},{key:"setFiltering",value:function(t){var e,n=0<arguments.length&&void 0!==t?t:{};this.valid&&(n.filtering=n.filtering||"linear",e=this.gl,this.bind(),Tr.isPowerOf2(this.width)&&Tr.isPowerOf2(this.height)?(this.power_of_2=!0,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n.TEXTURE_WRAP_S||n.repeat&&e.REPEAT||e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,n.TEXTURE_WRAP_T||n.repeat&&e.REPEAT||e.CLAMP_TO_EDGE),"mipmap"===n.filtering?(this.filtering="mipmap",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.generateMipmap(e.TEXTURE_2D)):"linear"===n.filtering?(this.filtering="linear",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):"nearest"===n.filtering&&(this.filtering="nearest",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST))):(this.power_of_2=!1,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),"nearest"===n.filtering?(this.filtering="nearest",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)):(this.filtering="linear",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR))),this.manager.trigger("update",this))}},{key:"calculateSprites",value:function(){if(this.sprites)for(var t in this.sprites){var e=this.sprites[t];this.texcoords[t]=this.manager.getTexcoordsForSprite([e[0],e[1]],[e[2],e[3]],[this.width,this.height]),this.sizes[t]=[e[2],e[3]],this.css_sizes[t]=[e[2]/this.density,e[3]/this.density],this.aspects[t]=e[2]/e[3]}}}]),t}();function Io(t){var e=[];return Object.assign(t,{subscribe:function(t){-1===e.indexOf(t)&&e.push(t)},unsubscribe:function(t){var n=e.indexOf(t);-1<n&&e.splice(n,1)},unsubscribeAll:function(){e=[]},trigger:function(t){for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.forEach((function(e){if("function"==typeof e[t])try{e[t].apply(e,i)}catch(e){Ar("warn","Caught exception in listener for event '".concat(t,"':"),e)}}))},hasSubscribersFor:function(t){var n=!1;return e.forEach((function(e){"function"==typeof e[t]&&(n=!0)})),n}})}var Po=function(){function t(e){yi(this,t),this.default=t.DEFAULT_TEXTURE_NAME,this.textures={},this.texture_configs={},this.boundTexture=null,this.activeUnit=null,this.scene_id=e,hr.addTarget("Texture"+this.scene_id,this),Io(this)}return _i(t,[{key:"create",value:function(e,n,i){for(var r=t.matchers_,o=0;o<r.length;o++){var s=r[o][0],a=r[o][1];if(a&&a(i))return new s(e,n,this,i)}return new Oo(e,n,this,i)}},{key:"retain",value:function(t){this.textures[t]&&this.textures[t].retain()}},{key:"release",value:function(t){this.textures[t]&&this.textures[t].release()}},{key:"getRetainCount",value:function(t){if(this.textures[t])return this.textures[t].retain_count}},{key:"getByteLength",value:function(t){if(this.textures[t])return this.textures[t].getByteLength()}},{key:"destroy",value:function(t){var e=this;Object.keys(this.textures).forEach((function(n){var i=e.textures[n];n!==e.default&&i.gl===t&&i.destroy({force:!0})}))}},{key:"getSpriteInfo",value:function(t,e){var n=this.textures[t];return n&&{size:n.sizes[e],css_size:n.css_sizes[e],aspect:n.aspects[e],texcoords:n.texcoords[e]}}},{key:"getTexcoordsForSprite",value:function(t,e,n){var i=n[1]-t[1]-e[1];return[t[0]/n[0],i/n[1],(e[0]+t[0])/n[0],(e[1]+i)/n[1]]}},{key:"createFromObject",value:function(t,e){var n=[];if(e)for(var i in e){var r,o=e[i];this.changed(i,o)&&(r=this.create(t,i,o),n.push(r.loading))}return Promise.all(n)}},{key:"createDefault",value:function(t){return this.create(t,this.default)}},{key:"changed",value:function(t,e){var n=this.textures[t];if(n){if("element"===n.config_type||null!=e.element)return!0;if(e=Ro(e),this.texture_configs[t]===JSON.stringify(Object.assign({name:t},e)))return!1}return!0}},{key:"getInfo",value:function(t){var e=this;if(t=t||Object.keys(this.textures),Array.isArray(t))return Promise.all(t.map((function(t){return e.getInfo(t)})));var n=this.textures[t];return n?(n.loading||Promise.resolve(n)).then((function(){return{name:n.name,width:n.width,height:n.height,density:n.density,sprites:n.sprites,texcoords:n.texcoords,sizes:n.sizes,css_sizes:n.css_sizes,aspects:n.aspects,filtering:n.filtering,power_of_2:n.power_of_2,valid:n.valid}})):Promise.resolve(null)}},{key:"syncTexturesToWorker",value:function(t){var e=this;return ur.is_main?Promise.all(t.map((function(t){var n=e.textures[t];return n&&n.loading||Promise.resolve()}))).then((function(){return e.textures})):hr.postMessage("Texture"+this.scene_id+".getInfo",t).then((function(t){return t.forEach((function(t){e.textures[t.name]=t})),e.textures}))}},{key:"getMaxTextureSize",value:function(t){return t.getParameter(t.MAX_TEXTURE_SIZE)}}],[{key:"register",value:function(e,n){var i=t.matchers_;if(!(e instanceof Function&&n instanceof Function))throw"Invalid texture constructor or matcher";this.deRegister(e),i.push([e,n])}},{key:"deRegister",value:function(e){for(var n=t.matchers_,i=0;i<n.length;i++)n[i][0]===e&&n.splice(i,1)}}]),t}();Po.DEFAULT_TEXTURE_NAME="__default",Po.matchers_=[];var No={};function Do(t){return No[t]||(No[t]=new Po(t)),No[t]}var jo=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},zo=function(t,e,n){var i=new Float64Array(3);return i[0]=t,i[1]=e,i[2]=n,i},$o=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/s,t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/s,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/s,t},Fo=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],p=e[11],d=e[12],g=e[13],m=e[14],v=e[15],y=n*a-i*s,b=n*l-r*s,_=n*c-o*s,w=i*l-r*a,x=i*c-o*a,k=r*c-o*l,S=u*g-h*d,A=u*m-f*d,E=u*v-p*d,T=h*m-f*g,C=h*v-p*g,M=f*v-p*m,L=y*M-b*C+_*T+w*E-x*A+k*S;return L?(L=1/L,t[0]=(a*M-l*C+c*T)*L,t[1]=(l*E-s*M-c*A)*L,t[2]=(s*C-a*E+c*S)*L,t[3]=(r*C-i*M-o*T)*L,t[4]=(n*M-r*E+o*A)*L,t[5]=(i*E-n*C-o*S)*L,t[6]=(g*k-m*x+v*w)*L,t[7]=(m*_-d*k-v*b)*L,t[8]=(d*x-g*_+v*y)*L,t):null},Bo=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*s-a*c,f=-u*o+a*l,p=c*o-s*l,d=n*h+i*f+r*p;return d?(d=1/d,t[0]=h*d,t[1]=(-u*i+r*c)*d,t[2]=(a*i-r*s)*d,t[3]=f*d,t[4]=(u*n-r*l)*d,t[5]=(-a*n+r*o)*d,t[6]=p*d,t[7]=(-c*n+i*l)*d,t[8]=(s*n-i*o)*d,t):null},Ho=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],p=e[10],d=e[11],g=e[12],m=e[13],v=e[14],y=e[15],b=n[0],_=n[1],w=n[2],x=n[3];return t[0]=b*i+_*a+w*h+x*g,t[1]=b*r+_*l+w*f+x*m,t[2]=b*o+_*c+w*p+x*v,t[3]=b*s+_*u+w*d+x*y,b=n[4],_=n[5],w=n[6],x=n[7],t[4]=b*i+_*a+w*h+x*g,t[5]=b*r+_*l+w*f+x*m,t[6]=b*o+_*c+w*p+x*v,t[7]=b*s+_*u+w*d+x*y,b=n[8],_=n[9],w=n[10],x=n[11],t[8]=b*i+_*a+w*h+x*g,t[9]=b*r+_*l+w*f+x*m,t[10]=b*o+_*c+w*p+x*v,t[11]=b*s+_*u+w*d+x*y,b=n[12],_=n[13],w=n[14],x=n[15],t[12]=b*i+_*a+w*h+x*g,t[13]=b*r+_*l+w*f+x*m,t[14]=b*o+_*c+w*p+x*v,t[15]=b*s+_*u+w*d+x*y,t},Uo=function(t,e,n){var i,r,o,s,a,l,c,u,h,f,p,d,g=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],p=e[10],d=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=f,t[10]=p,t[11]=d,t[12]=i*g+a*m+h*v+e[12],t[13]=r*g+l*m+f*v+e[13],t[14]=o*g+c*m+p*v+e[14],t[15]=s*g+u*m+d*v+e[15]),t},Go=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},Vo=function(t,e,n,i,r){var o=1/Math.tan(e/2),s=1/(i-r);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*s,t[15]=0,t},Wo=function(t,e,n,i){var r,o,s,a,l,c,u,h,f,p,d=e[0],g=e[1],m=e[2],v=i[0],y=i[1],b=i[2],_=n[0],w=n[1],x=n[2];return Math.abs(d-_)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(m-x)<1e-6?jo(t):(u=d-_,h=g-w,f=m-x,r=y*(f*=p=1/Math.sqrt(u*u+h*h+f*f))-b*(h*=p),o=b*(u*=p)-v*f,s=v*h-y*u,(p=Math.sqrt(r*r+o*o+s*s))?(r*=p=1/p,o*=p,s*=p):s=o=r=0,a=h*s-f*o,l=f*r-u*s,c=u*o-h*r,(p=Math.sqrt(a*a+l*l+c*c))?(a*=p=1/p,l*=p,c*=p):c=l=a=0,t[0]=r,t[1]=a,t[2]=u,t[3]=0,t[4]=o,t[5]=l,t[6]=h,t[7]=0,t[8]=s,t[9]=c,t[10]=f,t[11]=0,t[12]=-(r*d+o*g+s*m),t[13]=-(a*d+l*g+c*m),t[14]=-(u*d+h*g+f*m),t[15]=1,t)},qo=jo,Ko=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},Yo=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],p=e[11],d=e[12],g=e[13],m=e[14],v=e[15],y=n*a-i*s,b=n*l-r*s,_=n*c-o*s,w=i*l-r*a,x=i*c-o*a,k=r*c-o*l,S=u*g-h*d,A=u*m-f*d,E=u*v-p*d,T=h*m-f*g,C=h*v-p*g,M=f*v-p*m,L=y*M-b*C+_*T+w*E-x*A+k*S;return L?(L=1/L,t[0]=(a*M-l*C+c*T)*L,t[1]=(r*C-i*M-o*T)*L,t[2]=(g*k-m*x+v*w)*L,t[3]=(f*x-h*k-p*w)*L,t[4]=(l*E-s*M-c*A)*L,t[5]=(n*M-r*E+o*A)*L,t[6]=(m*_-d*k-v*b)*L,t[7]=(u*k-f*_+p*b)*L,t[8]=(s*C-a*E+c*S)*L,t[9]=(i*E-n*C-o*S)*L,t[10]=(d*x-g*_+v*y)*L,t[11]=(h*_-u*x-p*y)*L,t[12]=(a*A-s*T-l*S)*L,t[13]=(n*T-i*A+r*S)*L,t[14]=(g*b-d*w-m*y)*L,t[15]=(u*w-h*b+f*y)*L,t):null},Xo=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t},Zo=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o;return 0<s&&(s=1/Math.sqrt(s),t[0]=n*s,t[1]=i*s,t[2]=r*s,t[3]=o*s),t},Jo=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},Qo=0,ts=0,es=function(){function t(e){var n=e.coords,i=e.style_zoom,r=e.source,o=e.worker,s=e.view,a=e.sceneId;yi(this,t),this.textureManager=Do(a),this.id=Qo++,this.worker=o,this.view=s,this.source=r,this.generation=null,this.valid=!0,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.style_zoom=i,this.coords=t.normalizedCoordinate(n,this.source,this.style_zoom),this.key=t.key(this.coords,this.source,this.style_zoom),this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=er.metersForTile(this.coords),this.max=er.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=er.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=er.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=er.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.new_mesh_styles=[]}return _i(t,[{key:"freeResources",value:function(){for(var t in this.meshes)this.meshes[t].forEach((function(t){return t.destroy()}));this.meshes={}}},{key:"destroy",value:function(){Lo.removeForTile(this.id),this.workerMessage("self.removeTile",this.id),this.freeResources(),this.worker=null,this.valid=!1}},{key:"buildAsMessage",value:function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation}}},{key:"workerMessage",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return hr.postMessage.apply(hr,[this.worker].concat(e))}},{key:"build",value:function(t,e){var n=(1<arguments.length&&void 0!==e?e:{}).fade_in,i=void 0===n||n;return this.generation=t,this.fade_in=i,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()})}},{key:"buildMeshes",value:function(t,e){if(!this.error){this.build_id=ts++;var n={},i=this.mesh_data;if(i)for(var r in i){for(var o in i[r].meshes){var s=i[r].meshes[o];if(s.vertex_data){if(!t[r]){Ar("warn","Could not create mesh because style '".concat(r,"' not found, for tile ").concat(this.key,", aborting tile"));break}var a=Object.assign({},i[r]);a.uniforms=Object.assign({},a.uniforms,s.uniforms),a.variant=s.variant,s.textures&&(a.textures=s.textures),s.labels&&(a.retain=!0);var l=t[r].makeMesh(s.vertex_data,s.vertex_elements,a);l.variant=a.variant,l.labels=s.labels,n[r]=n[r]||[],n[r].push(l),null==l.variant.order&&(l.variant.order=n[r].length-1)}}n[r]&&n[r].sort((function(t,e){var n=t.variant.order,i=e.variant.order;return null!=n&&(null==i||n<i)?-1:1}))}for(var c in delete this.mesh_data,n)this.meshes[c]&&this.meshes[c].forEach((function(t){return t.destroy()})),this.meshes[c]=n[c],this.new_mesh_styles.push(c);if(e.done){for(var u in this.meshes)-1===this.new_mesh_styles.indexOf(u)&&(this.meshes[u].forEach((function(t){return t.destroy()})),delete this.meshes[u]);this.new_mesh_styles=[]}}}},{key:"setProxyFor",value:function(t){t?(this.proxy_for=this.proxy_for||[],this.proxy_for.push(t),this.proxy_depth=1,t.proxied_as=t.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"isProxy",value:function(){return null!=this.proxy_for}},{key:"shouldProxyForStyle",value:function(t){return!this.proxy_for||this.proxy_for.some((function(e){return null==e.meshes[t]}))}},{key:"setupProgram",value:function(t,e){var n=t.model,i=t.model32;e.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),e.uniform("1f","u_tile_proxy_depth",this.proxy_depth),qo(n),Uo(n,n,zo(this.min.x,this.min.y,0)),Go(n,n,zo(this.span.x/er.tile_scale,-1*this.span.y/er.tile_scale,1)),Ko(i,n),e.uniform("Matrix4fv","u_model",i),e.uniform("1i","u_tile_fade_in",this.fade_in&&"child"!==this.proxied_as)}},{key:"merge",value:function(t){return this.loading=t.loading,this.loaded=t.loaded,this.generation=t.generation,this.error=t.error,this.mesh_data=t.mesh_data,this.selection_data?Object.assign(this.selection_data,t.selection_data):this.selection_data=t.selection_data,this}}],[{key:"coord",value:function(e){return{x:e.x,y:e.y,z:e.z,key:t.coordKey(e)}}},{key:"coordKey",value:function(t){return t.x+"/"+t.y+"/"+t.z}},{key:"key",value:function(t,e,n){if(!(t.y<0||t.y>=1<<t.z||t.z<0))return[e.name,n,t.x,t.y,t.z].join("/")}},{key:"normalizedKey",value:function(e,n,i){return t.key(t.normalizedCoordinate(e,n,i),n,i)}},{key:"normalizedCoordinate",value:function(e,n){return n.zoom_bias&&(e=t.coordinateAtZoom(e,Math.max(0,e.z-n.zoom_bias))),t.coordinateWithMaxZoom(e,n.max_zoom)}},{key:"coordinateAtZoom",value:function(e,n){var i,r=e.x,o=e.y,s=e.z;return s!==n&&(i=Math.pow(2,s-n),r=Math.floor(r/i),o=Math.floor(o/i),s=n),t.coord({x:r,y:o,z:s})}},{key:"coordinateWithMaxZoom",value:function(e,n){var i=e.x,r=e.y,o=e.z;return void 0!==n&&n<o?t.coordinateAtZoom({x:i,y:r,z:o},n):t.coord({x:i,y:r,z:o})}},{key:"childrenForCoordinate",value:function(e){var n=e.x,i=e.y,r=e.z,o=e.key;return t.coord_children[o]||(r++,n*=2,i*=2,t.coord_children[o]=[t.coord({x:n,y:i,z:r}),t.coord({x:n+1,y:i,z:r}),t.coord({x:n,y:i+1,z:r}),t.coord({x:n+1,y:i+1,z:r})]),t.coord_children[o]}},{key:"isDescendant",value:function(e,n){if(n.z>e.z){var i=t.coordinateAtZoom(n,e.z),r=i.x,o=i.y;return e.x===r&&e.y===o}return!1}},{key:"cancel",value:function(e){e&&(e.canceled=!0,e.source_data&&e.source_data.request_id&&(Tr.cancelRequest(e.source_data.request_id),e.source_data.request_id=null),t.abortBuild(e))}},{key:"buildGeometry",value:function(e,n){var i=n.scene_id,r=n.layers,o=n.styles,s=n.global,a=n.sources,l=e.source_data;for(var c in Mo.startTile(e.id,{apply_repeat_groups:!0}),r){var u=r[c];if(u&&u.config_data){if(u.config_data.source===e.source)for(var h=t._getDataForSource(l,u.config_data,c),f=0;f<h.length;f++){var p=h[f],d=p.geom;if(d)for(var g=0;g<d.features.length;g++){var m=d.features[g];if(null!=m.geometry){var v=_o.getFeatureParseContext(m,e,s,a);v.winding=e.default_winding,v.source=e.source,v.layer=p.layer;var y=u.buildDrawGroups(v,!0);if(y)for(var b in y){var _=y[b],w=_.style||b,x=o[w];x?null!=(_=x.preprocess(_,e.source))&&!1!==_.visible&&(v.layers=_.layers,x.addFeature(m,_,v)):Ar("warn","Style '".concat(w,"' not found, skipping layer '").concat(c,"':"),_,m)}}}}}else Ar("warn","Layer ".concat(c," was defined without a geometry data source and will not be rendered."))}var k=t._stylesForTile(e,o);t._sendStyleGroups(e,k,{scene_id:i},(function(t){return t.collision?"collision":"non-collision"}))}},{key:"_stylesForTile",value:function(t,e){var n=[];for(var i in e)e[i].hasDataForTile(t)&&n.push(e[i]);return n}},{key:"_sendStyleGroups",value:function(e,n,i,r){var o=i.scene_id,s={};n.forEach((function(t){var e=r(t);s[e]=s[e]||[],s[e].push(t)})),0<Object.keys(s).length?function(){var n={start:!0};for(var i in e.mesh_data={},s)!function(i){var r=s[i];Promise.all(r.map((function(t){return t.endData(e)}))).then((function(){Ar("trace","Finished style group '".concat(i,"' for tile ").concat(e.key)),s[i]=[],Object.keys(s).every((function(t){return 0===s[t].length}))&&(n.done=!0),hr.postMessage("TileManager_".concat(o,".buildTileStylesCompleted"),hr.withTransferables({tile:t.slice(e,["mesh_data","selection_data"]),progress:n})),n.start=null,e.mesh_data={},e.selection_data={},n.done&&Mo.resetTile(e.id)}),(function(t){Ar("error","Error for style group '".concat(i,"' for tile ").concat(e.key),t)}))}(i)}():(hr.postMessage("TileManager_".concat(o,".buildTileStylesCompleted"),hr.withTransferables({tile:t.slice(e),progress:{start:!0,done:!0}})),Mo.resetTile(e.id))}},{key:"_getDataForSource",value:function(t,e,n){var i=2<arguments.length&&void 0!==n?n:null,r=[];return null!=e&&null!=t&&null!=t.layers&&(!e.layer&&t.layers._default||"string"==typeof e.layer&&!t.layers[e.layer]&&new RegExp("^\\d+_"+e.layer+"$").test(i)&&t.layers._default?r.push({geom:t.layers._default}):!e.layer&&i?r.push({layer:i,geom:t.layers[i]}):"string"==typeof e.layer?r.push({layer:e.layer,geom:t.layers[e.layer]}):Array.isArray(e.layer)&&e.layer.forEach((function(e){t.layers[e]&&t.layers[e].features&&r.push({layer:e,geom:t.layers[e]})}))),r}},{key:"abortBuild",value:function(t,e){if(Lo.removeForTile(t.id),Mo.abortTile(t.id),t.mesh_data)for(var n in t.mesh_data){var i=t.mesh_data[n].textures;i&&i.forEach((function(n){var i=Do(e).textures[n];i&&(Ar("trace","releasing texture ".concat(n," for tile ").concat(t.key)),i.release())}))}}},{key:"slice",value:function(t,e){var n=["id","key","loading","loaded","generation","error","debug"];Array.isArray(e)&&n.push.apply(n,Pi(e));for(var i={},r=0;r<n.length;r++){var o=n[r];i[o]=t[o]}return i}}]),t}();es.coord_children={};var ns,is=function(){Si(e,zr);var t=Ri(e);function e(n,i){var r;return yi(this,e),-1===(r=t.call(this,n,i)).rasters.indexOf(r.name)&&r.rasters.unshift(r.name),r.filtering=n.filtering,r.textures={},r}return _i(e,[{key:"load",value:function(t){t.source_data={},t.source_data.layers={},t.pad_scale=this.pad_scale,t.rasters=Pi(this.rasters);var e=er.tile_scale;return t.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[e,0],[e,-e],[0,-e],[0,0]]]},properties:{}}]}},t.default_winding="CW",Promise.resolve(t)}},{key:"tileTexture",value:function(t){var e,n,i=t.coords.key;return this.textures[i]||(e=es.coordinateWithMaxZoom(t.coords,this.max_zoom),n=this.formatUrl(this.url,{coords:e}),this.textures[i]={url:n,filtering:this.filtering,coords:e}),this.textures[i]}}]),e}();Nr.register(is,"Raster");var rs=ns={};function os(t,e,n,i){for(var r,o=i,s=n-e>>1,a=n-e,l=t[e],c=t[e+1],u=t[n],h=t[n+1],f=e+3;f<n;f+=3){var p,d=function(t,e,n,i,r,o){var s,a=r-n,l=o-i;return 0===a&&0===l||(1<(s=((t-n)*a+(e-i)*l)/(a*a+l*l))?(n=r,i=o):0<s&&(n+=a*s,i+=l*s)),(a=t-n)*a+(l=e-i)*l}(t[f],t[f+1],l,c,u,h);o<d?(r=f,o=d):d!==o||(p=Math.abs(f-s))<a&&(r=f,a=p)}i<o&&(3<r-e&&os(t,e,r,i),t[r+2]=o,3<n-r&&os(t,r,n,i))}function ss(t,e,n,i){var r={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)as(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)as(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)as(t,e[i][r])}(r),r}function as(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function ls(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)cs(n,t.features[i],e,i);else"Feature"===t.type?cs(n,t,e):cs(n,{geometry:t},e);return n}function cs(t,e,n,i){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,s=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),a=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===o)us(r,a);else if("MultiPoint"===o)for(var c=0;c<r.length;c++)us(r[c],a);else if("LineString"===o)hs(r,a,s,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<r.length;c++)a=[],hs(r[c],a,s,!1),t.push(ss(l,"LineString",a,e.properties));return}fs(r,a,s,!1)}else if("Polygon"===o)fs(r,a,s,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(c=0;c<e.geometry.geometries.length;c++)cs(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},n,i);return}for(c=0;c<r.length;c++){var u=[];fs(r[c],u,s,!0),a.push(u)}}t.push(ss(l,o,a,e.properties))}}function us(t,e){e.push(ps(t[0])),e.push(ds(t[1])),e.push(0)}function hs(t,e,n,i){for(var r,o,s=0,a=0;a<t.length;a++){var l=ps(t[a][0]),c=ds(t[a][1]);e.push(l),e.push(c),e.push(0),0<a&&(s+=i?(r*c-l*o)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(c-o,2))),r=l,o=c}var u=e.length-3;e[2]=1,os(e,0,u,n),e[2+u]=1,e.size=Math.abs(s),e.start=0,e.end=e.size}function fs(t,e,n,i){for(var r=0;r<t.length;r++){var o=[];hs(t[r],o,n,i),e.push(o)}}function ps(t){return t/360+.5}function ds(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:1<n?1:n}function gs(t,e,n,i,r,o,s,a){if(i/=e,(n/=e)<=o&&s<i)return t;if(s<n||i<=o)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],h=u.geometry,f=u.type,p=0===r?u.minX:u.minY,d=0===r?u.maxX:u.maxY;if(n<=p&&d<i)l.push(u);else if(!(d<n||i<=p)){var g=[];if("Point"===f||"MultiPoint"===f)!function(t,e,n,i,r){for(var o=0;o<t.length;o+=3){var s=t[o+r];n<=s&&s<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}(h,g,n,i,r);else if("LineString"===f)ms(h,g,n,i,r,!1,a.lineMetrics);else if("MultiLineString"===f)ys(h,g,n,i,r,!1);else if("Polygon"===f)ys(h,g,n,i,r,!0);else if("MultiPolygon"===f)for(var m=0;m<h.length;m++){var v=[];ys(h[m],v,n,i,r,!0),v.length&&g.push(v)}if(g.length){if(a.lineMetrics&&"LineString"===f){for(m=0;m<g.length;m++)l.push(ss(u.id,f,g[m],u.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===g.length?(f="LineString",g=g[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===g.length?"Point":"MultiPoint"),l.push(ss(u.id,f,g,u.tags))}}}return l.length?l:null}function ms(t,e,n,i,r,o,s){for(var a,l,c=vs(t),u=0===r?_s:ws,h=t.start,f=0;f<t.length-3;f+=3){var p=t[f],d=t[f+1],g=t[f+2],m=t[f+3],v=t[f+4],y=0===r?p:d,b=0===r?m:v,_=!1;s&&(a=Math.sqrt(Math.pow(p-m,2)+Math.pow(d-v,2))),y<n?n<b&&(l=u(c,p,d,m,v,n),s&&(c.start=h+a*l)):i<y?b<i&&(l=u(c,p,d,m,v,i),s&&(c.start=h+a*l)):bs(c,p,d,g),b<n&&n<=y&&(l=u(c,p,d,m,v,n),_=!0),i<b&&y<=i&&(l=u(c,p,d,m,v,i),_=!0),!o&&_&&(s&&(c.end=h+a*l),e.push(c),c=vs(t)),s&&(h+=a)}var w=t.length-3;p=t[w],d=t[w+1],g=t[w+2],n<=(y=0===r?p:d)&&y<=i&&bs(c,p,d,g),w=c.length-3,o&&3<=w&&(c[w]!==c[0]||c[w+1]!==c[1])&&bs(c,c[0],c[1],c[2]),c.length&&e.push(c)}function vs(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ys(t,e,n,i,r,o){for(var s=0;s<t.length;s++)ms(t[s],e,n,i,r,o,!1)}function bs(t,e,n,i){t.push(e),t.push(n),t.push(i)}function _s(t,e,n,i,r,o){var s=(o-e)/(i-e);return t.push(o),t.push(n+(r-n)*s),t.push(1),s}function ws(t,e,n,i,r,o){var s=(o-n)/(r-n);return t.push(e+(i-e)*s),t.push(o),t.push(1),s}function xs(t,e){var n=e.buffer/e.extent,i=t,r=gs(t,1,-1-n,n,0,-1,2,e),o=gs(t,1,1-n,2+n,0,-1,2,e);return(r||o)&&(i=gs(t,1,-n,1+n,0,-1,2,e)||[],r&&(i=ks(r,1).concat(i)),o&&(i=i.concat(ks(o,-1)))),i}function ks(t,e){for(var n=[],i=0;i<t.length;i++){var r,o=t[i],s=o.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)r=Ss(o.geometry,e);else if("MultiLineString"===s||"Polygon"===s){r=[];for(var a=0;a<o.geometry.length;a++)r.push(Ss(o.geometry[a],e))}else if("MultiPolygon"===s)for(r=[],a=0;a<o.geometry.length;a++){for(var l=[],c=0;c<o.geometry[a].length;c++)l.push(Ss(o.geometry[a][c],e));r.push(l)}n.push(ss(o.id,s,r,o.tags))}return n}function Ss(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function As(t,e){if(t.transformed)return t;for(var n,i=1<<t.z,r=t.x,o=t.y,s=0;s<t.features.length;s++){var a=t.features[s],l=a.geometry,c=a.type;if(a.geometry=[],1===c)for(n=0;n<l.length;n+=2)a.geometry.push(Es(l[n],l[n+1],e,i,r,o));else for(n=0;n<l.length;n++){for(var u=[],h=0;h<l[n].length;h+=2)u.push(Es(l[n][h],l[n][h+1],e,i,r,o));a.geometry.push(u)}}return t.transformed=!0,t}function Es(t,e,n,i,r,o){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-o))]}function Ts(t,e,n,i,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<t.length;a++){s.numFeatures++,function(t,e,n,i){var r=e.geometry,o=e.type,s=[];if("Point"===o||"MultiPoint"===o)for(var a=0;a<r.length;a+=3)s.push(r[a]),s.push(r[a+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Cs(s,r,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(a=0;a<r.length;a++)Cs(s,r[a],t,n,"Polygon"===o,0===a);else if("MultiPolygon"===o)for(var l=0;l<r.length;l++){var c=r[l];for(a=0;a<c.length;a++)Cs(s,c[a],t,n,!0,0===a)}if(s.length){var u=e.tags||null;if("LineString"===o&&i.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=r.start/r.size,u.mapbox_clip_end=r.end/r.size}var f={geometry:s,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(f.id=e.id),t.features.push(f)}}(s,t[a],o,r);var l=t[a].minX,c=t[a].minY,u=t[a].maxX,h=t[a].maxY;l<s.minX&&(s.minX=l),c<s.minY&&(s.minY=c),u>s.maxX&&(s.maxX=u),h>s.maxY&&(s.maxY=h)}return s}function Cs(t,e,n,i,r,o){var s=i*i;if(0<i&&e.size<(r?s:i))n.numPoints+=e.length/3;else{for(var a=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>s)&&(n.numSimplified++,a.push(e[l]),a.push(e[l+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,o=r-2;i<r;o=i,i+=2)n+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(0<n===e)for(i=0,r=t.length;i<r/2;i+=2){var s=t[i],a=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=s,t[r-1-i]=a}}(a,o),t.push(a)}}var Ms={maxZoom:14,tolerance:3,extent:4096,buffer:64,lineMetrics:!(ns.deepClone=function(t){return Array.isArray(t)?t.map(ns.deepClone):t}),promoteId:null,generateId:!1};function Ls(t,e,n,i,r){var o=Object.assign({},Ms,r),s=ls(t,o),a=function(t){var e,n=2,i=-1,r=1,o=0,s=ji(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.minX<n&&(n=a.minX),a.maxX>i&&(i=a.maxX),a.minY<r&&(r=a.minY),a.maxY>o&&(o=a.maxY)}}catch(t){s.e(t)}finally{s.f()}return{minX:n,maxX:i,minY:r,maxY:o}}(s=xs(s,o)),l=a.minX,c=a.minY,u=a.maxX,h=a.maxY,f=1<<e,p=o.buffer/o.extent,d=1+p;return s=gs(s,f,n-p,n+d,0,l,u,o)||[],As(Ts(s=gs(s,f,i-p,i+d,1,c,h,o)||[],e,n,i,o),o.extent)}function Rs(t,e){this.items=[],this.algorithm=t;var n=void 0===(e=e||{}).sort||e.sort;this.sort=n}Rs.prototype={addItem:function(t){this.items.push(t)},normalizeCoordinates:function(){var t=this.items,e=1/0,n=1/0;t.forEach((function(t){var i=t;e=Math.min(e,i.x),n=Math.min(n,i.y)})),t.forEach((function(t){var i=t;i.x-=e,i.y-=n}))},getStats:function(){var t=this.items.map((function(t){return t})),e=t.map((function(t){return t.x})),n=t.map((function(t){return t.y})),i=t.map((function(t){return t.x+t.width})),r=t.map((function(t){return t.y+t.height}));return{minX:Math.max.apply(Math,e),minY:Math.max.apply(Math,n),maxX:Math.max.apply(Math,i),maxY:Math.max.apply(Math,r)}},getItems:function(){return this.items},processItems:function(){var t=this.items;return this.sort&&(t=this.algorithm.sort(t)),t=this.algorithm.placeItems(t),this.items=t},exportItems:function(){return this.processItems(),this.normalizeCoordinates(),this.items},export:function(){var t=this.exportItems(),e=this.getStats();return{height:e.maxY,width:e.maxX,items:t}}};var Os=Rs,Is=[],Ps=[],Ns="undefined"!=typeof Uint8Array?Uint8Array:Array,Ds=!1;function js(){Ds=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)Is[e]=t[e],Ps[t.charCodeAt(e)]=e;Ps["-".charCodeAt(0)]=62,Ps["_".charCodeAt(0)]=63}function zs(t,e,n){for(var i,r,o=[],s=e;s<n;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(Is[(r=i)>>18&63]+Is[r>>12&63]+Is[r>>6&63]+Is[63&r]);return o.join("")}function $s(t){var e;Ds||js();for(var n=t.length,i=n%3,r="",o=[],s=0,a=n-i;s<a;s+=16383)o.push(zs(t,s,a<s+16383?a:s+16383));return 1==i?(e=t[n-1],r+=Is[e>>2],r+=Is[e<<4&63],r+="=="):2==i&&(e=(t[n-2]<<8)+t[n-1],r+=Is[e>>10],r+=Is[e>>4&63],r+=Is[e<<2&63],r+="="),o.push(r),o.join("")}function Fs(t,e,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?r-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-u)-1,p>>=-u,u+=a;0<u;o=256*o+t[e+h],h+=f,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;0<u;s=256*s+t[e+h],h+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=c}return(p?-1:1)*s*Math.pow(2,o-i)}function Bs(t,e,n,i,r,o){var s,a,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),2<=(e+=1<=s+h?f/l:f*Math.pow(2,1-h))*l&&(s++,l/=2),u<=s+h?(a=0,s=u):1<=s+h?(a=(e*l-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));8<=r;t[n+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,c+=r;0<c;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*g}var Hs={}.toString,Us=Array.isArray||function(t){return"[object Array]"==Hs.call(t)};qs.TYPED_ARRAY_SUPPORT=void 0===Xi.TYPED_ARRAY_SUPPORT||Xi.TYPED_ARRAY_SUPPORT;var Gs=Vs();function Vs(){return qs.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ws(t,e){if(Vs()<e)throw new RangeError("Invalid typed array length");return qs.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=qs.prototype:(null===t&&(t=new qs(e)),t.length=e),t}function qs(t,e,n){if(!(qs.TYPED_ARRAY_SUPPORT||this instanceof qs))return new qs(t,e,n);if("number"!=typeof t)return Ks(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return Xs(this,t)}function Ks(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),qs.TYPED_ARRAY_SUPPORT?(t=e).__proto__=qs.prototype:t=Zs(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!qs.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|ta(e,n),r=(t=Ws(t,i)).write(e,n);return r!==i&&(t=t.slice(0,r)),t}(t,e,n):function(t,e){if(Qs(e)){var n=0|Js(e.length);return 0===(t=Ws(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?Ws(t,0):Zs(t,e);if("Buffer"===e.type&&Us(e.data))return Zs(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function Ys(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function Xs(t,e){if(Ys(e),t=Ws(t,e<0?0:0|Js(e)),!qs.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function Zs(t,e){var n=e.length<0?0:0|Js(e.length);t=Ws(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function Js(t){if(t>=Vs())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Vs().toString(16)+" bytes");return 0|t}function Qs(t){return null!=t&&t._isBuffer}function ta(t,e){if(Qs(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return va(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ya(t).length;default:if(i)return va(t).length;e=(""+e).toLowerCase(),i=!0}}function ea(t,e,n){var i,r,o,s=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||i<n)&&(n=i);for(var r="",o=e;o<n;++o)r+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[o]);return r}(this,e,n);case"utf8":case"utf-8":return aa(this,e,n);case"ascii":return function(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}(this,e,n);case"latin1":case"binary":return function(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}(this,e,n);case"base64":return i=this,o=n,0===(r=e)&&o===i.length?$s(i):$s(i.slice(r,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}(this,e,n);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function na(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function ia(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=qs.from(e,i)),Qs(e))return 0===e.length?-1:ra(t,e,n,i,r);if("number"==typeof e)return e&=255,qs.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):ra(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function ra(t,e,n,i,r){var o=1,s=t.length,a=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s/=o=2,a/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(r)for(var c=-1,u=n;u<s;u++)if(l(t,u)===l(e,-1===c?0:u-c)){if(-1===c&&(c=u),u-c+1===a)return c*o}else-1!==c&&(u-=u-c),c=-1;else for(s<n+a&&(n=s-a),u=n;0<=u;u--){for(var h=!0,f=0;f<a;f++)if(l(t,u+f)!==l(e,f)){h=!1;break}if(h)return u}return-1}function oa(t,e,n,i){return ba(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function sa(t,e,n,i){return ba(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=(n=t.charCodeAt(s))>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function aa(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,l,c=t[r],u=null,h=239<c?4:223<c?3:191<c?2:1;if(r+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=t[r+1]))&&127<(l=(31&c)<<6|63&o)&&(u=l);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&2047<(l=(15&c)<<12|(63&o)<<6|63&s)&&(l<55296||57343<l)&&(u=l);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&l<1114112&&(u=l)}null===u?(u=65533,h=1):65535<u&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=h}return function(t){var e=t.length;if(e<=la)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=la));return n}(i)}qs.poolSize=8192,qs._augment=function(t){return t.__proto__=qs.prototype,t},qs.from=function(t,e,n){return Ks(null,t,e,n)},qs.TYPED_ARRAY_SUPPORT&&(qs.prototype.__proto__=Uint8Array.prototype,qs.__proto__=Uint8Array),qs.alloc=function(t,e,n){return i=null,o=e,s=n,Ys(r=t),r<=0||void 0===o?Ws(i,r):"string"==typeof s?Ws(i,r).fill(o,s):Ws(i,r).fill(o);var i,r,o,s},qs.allocUnsafe=function(t){return Xs(null,t)},qs.allocUnsafeSlow=function(t){return Xs(null,t)},qs.isBuffer=_a,qs.compare=function(t,e){if(!Qs(t)||!Qs(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},qs.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},qs.concat=function(t,e){if(!Us(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return qs.alloc(0);if(void 0===e)for(r=e=0;r<t.length;++r)e+=t[r].length;for(var n=qs.allocUnsafe(e),i=0,r=0;r<t.length;++r){var o=t[r];if(!Qs(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},qs.byteLength=ta,qs.prototype._isBuffer=!0,qs.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)na(this,e,e+1);return this},qs.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)na(this,e,e+3),na(this,e+1,e+2);return this},qs.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)na(this,e,e+7),na(this,e+1,e+6),na(this,e+2,e+5),na(this,e+3,e+4);return this},qs.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?aa(this,0,t):ea.apply(this,arguments)},qs.prototype.equals=function(t){if(!Qs(t))throw new TypeError("Argument must be a Buffer");return this===t||0===qs.compare(this,t)},qs.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(t+=" ... ")),"<Buffer "+t+">"},qs.prototype.compare=function(t,e,n,i,r){if(!Qs(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(r<=i&&n<=e)return 0;if(r<=i)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),l=this.slice(i,r),c=t.slice(e,n),u=0;u<a;++u)if(l[u]!==c[u]){o=l[u],s=c[u];break}return o<s?-1:s<o?1:0},qs.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},qs.prototype.indexOf=function(t,e,n){return ia(this,t,e,n,!0)},qs.prototype.lastIndexOf=function(t,e,n){return ia(this,t,e,n,!1)},qs.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||r<n)&&(n=r),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var o,s,a,l,c=!1;;)switch(i){case"hex":return function(t,e,n,i){n=Number(n)||0;var r=t.length-n;(!i||r<(i=Number(i)))&&(i=r);var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<i&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}(this,t,e,n);case"utf8":case"utf-8":return a=e,l=n,ba(va(t,this.length-a),this,a,l);case"ascii":return oa(this,t,e,n);case"latin1":case"binary":return oa(this,t,e,n);case"base64":return o=e,s=n,ba(ya(t),this,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return sa(this,t,e,n);default:if(c)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),c=!0}},qs.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var la=4096;function ca(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function ua(t,e,n,i,r,o){if(!Qs(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function ha(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function fa(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function pa(t,e,n,i){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function da(t,e,n,i,r){return r||pa(t,0,n,4),Bs(t,e,n,i,23,4),n+4}function ga(t,e,n,i,r){return r||pa(t,0,n,8),Bs(t,e,n,i,52,8),n+8}qs.prototype.slice=function(t,e){var n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),qs.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=qs.prototype;else for(var i=e-t,r=new qs(i,void 0),o=0;o<i;++o)r[o]=this[o+t];return r},qs.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||ca(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},qs.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||ca(t,e,this.length);for(var i=this[t+--e],r=1;0<e&&(r*=256);)i+=this[t+--e]*r;return i},qs.prototype.readUInt8=function(t,e){return e||ca(t,1,this.length),this[t]},qs.prototype.readUInt16LE=function(t,e){return e||ca(t,2,this.length),this[t]|this[t+1]<<8},qs.prototype.readUInt16BE=function(t,e){return e||ca(t,2,this.length),this[t]<<8|this[t+1]},qs.prototype.readUInt32LE=function(t,e){return e||ca(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},qs.prototype.readUInt32BE=function(t,e){return e||ca(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},qs.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||ca(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return(r*=128)<=i&&(i-=Math.pow(2,8*e)),i},qs.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||ca(t,e,this.length);for(var i=e,r=1,o=this[t+--i];0<i&&(r*=256);)o+=this[t+--i]*r;return(r*=128)<=o&&(o-=Math.pow(2,8*e)),o},qs.prototype.readInt8=function(t,e){return e||ca(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},qs.prototype.readInt16LE=function(t,e){e||ca(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},qs.prototype.readInt16BE=function(t,e){e||ca(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},qs.prototype.readInt32LE=function(t,e){return e||ca(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},qs.prototype.readInt32BE=function(t,e){return e||ca(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},qs.prototype.readFloatLE=function(t,e){return e||ca(t,4,this.length),Fs(this,t,!0,23,4)},qs.prototype.readFloatBE=function(t,e){return e||ca(t,4,this.length),Fs(this,t,!1,23,4)},qs.prototype.readDoubleLE=function(t,e){return e||ca(t,8,this.length),Fs(this,t,!0,52,8)},qs.prototype.readDoubleBE=function(t,e){return e||ca(t,8,this.length),Fs(this,t,!1,52,8)},qs.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||ua(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},qs.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||ua(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;0<=--r&&(o*=256);)this[e+r]=t/o&255;return e+n},qs.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||ua(this,t,e,1,255,0),qs.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},qs.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||ua(this,t,e,2,65535,0),qs.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):ha(this,t,e,!0),e+2},qs.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||ua(this,t,e,2,65535,0),qs.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):ha(this,t,e,!1),e+2},qs.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||ua(this,t,e,4,4294967295,0),qs.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):fa(this,t,e,!0),e+4},qs.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||ua(this,t,e,4,4294967295,0),qs.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):fa(this,t,e,!1),e+4},qs.prototype.writeIntLE=function(t,e,n,i){var r;t=+t,e|=0,i||ua(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},qs.prototype.writeIntBE=function(t,e,n,i){var r;t=+t,e|=0,i||ua(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);var o=n-1,s=1,a=0;for(this[e+o]=255&t;0<=--o&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},qs.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||ua(this,t,e,1,127,-128),qs.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},qs.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||ua(this,t,e,2,32767,-32768),qs.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):ha(this,t,e,!0),e+2},qs.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||ua(this,t,e,2,32767,-32768),qs.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):ha(this,t,e,!1),e+2},qs.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||ua(this,t,e,4,2147483647,-2147483648),qs.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):fa(this,t,e,!0),e+4},qs.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||ua(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),qs.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):fa(this,t,e,!1),e+4},qs.prototype.writeFloatLE=function(t,e,n){return da(this,t,e,!0,n)},qs.prototype.writeFloatBE=function(t,e,n){return da(this,t,e,!1,n)},qs.prototype.writeDoubleLE=function(t,e,n){return ga(this,t,e,!0,n)},qs.prototype.writeDoubleBE=function(t,e,n){return ga(this,t,e,!1,n)},qs.prototype.copy=function(t,e,n,i){if(n=n||0,i||0===i||(i=this.length),e>=t.length&&(e=t.length),e=e||0,0<i&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;0<=r;--r)t[r+e]=this[r+n];else if(o<1e3||!qs.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},qs.prototype.fill=function(t,e,n,i){if("string"==typeof t){var r;if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1!==t.length||(r=t.charCodeAt(0))<256&&(t=r),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!qs.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(a=e;a<n;++a)this[a]=t;else for(var o=Qs(t)?t:va(new qs(t,i).toString()),s=o.length,a=0;a<n-e;++a)this[a+e]=o[a%s];return this};var ma=/[^+\/0-9A-Za-z-_]/g;function va(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!r){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===i){-1<(e-=3)&&o.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(e-=3)&&o.push(239,191,189);if(r=null,n<128){if(--e<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function ya(t){return function(t){var e,n,i,r;Ds||js();var o=t.length;if(0<o%4)throw new Error("Invalid string. Length must be a multiple of 4");i="="===t[o-2]?2:"="===t[o-1]?1:0,r=new Ns(3*o/4-i),e=0<i?o-4:o;for(var s=0,a=0;a<e;a+=4,0)n=Ps[t.charCodeAt(a)]<<18|Ps[t.charCodeAt(a+1)]<<12|Ps[t.charCodeAt(a+2)]<<6|Ps[t.charCodeAt(a+3)],r[s++]=n>>16&255,r[s++]=n>>8&255,r[s++]=255&n;return 2==i?(n=Ps[t.charCodeAt(a)]<<2|Ps[t.charCodeAt(a+1)]>>4,r[s++]=255&n):1==i&&(n=Ps[t.charCodeAt(a)]<<10|Ps[t.charCodeAt(a+1)]<<4|Ps[t.charCodeAt(a+2)]>>2,r[s++]=n>>8&255,r[s++]=255&n),r}(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(ma,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function ba(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function _a(t){return null!=t&&(!!t._isBuffer||wa(t)||"function"==typeof(e=t).readFloatLE&&"function"==typeof e.slice&&wa(e.slice(0,0)));var e}function wa(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var xa=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:Gs,Buffer:qs,SlowBuffer:function(t){return+t!=t&&(t=0),qs.alloc(+t)},isBuffer:_a});Xi.setTimeout,Xi.clearTimeout,Xi.performance;var ka="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){function n(){}t.super_=e,n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t};function Sa(t,e){var n={seen:[],stylize:Ea};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),La(e)?n.showHidden=e:e&&function(t,e){if(e&&Na(e))for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]]}(n,e),Ia(n.showHidden)&&(n.showHidden=!1),Ia(n.depth)&&(n.depth=2),Ia(n.colors)&&(n.colors=!1),Ia(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Aa),Ta(n,t,n.depth)}function Aa(t,e){var n=Sa.styles[e];return n?"\x1b["+Sa.colors[n][0]+"m"+t+"\x1b["+Sa.colors[n][1]+"m":t}function Ea(t,e){return t}function Ta(t,e,n){if(t.customInspect&&e&&za(e.inspect)&&e.inspect!==Sa&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return Oa(i)||(i=Ta(t,i,n)),i}var r=function(t,e){if(Ia(e))return t.stylize("undefined","undefined");if(Oa(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return"number"==typeof e?t.stylize(""+e,"number"):La(e)?t.stylize(""+e,"boolean"):Ra(e)?t.stylize("null","null"):void 0}(t,e);if(r)return r;var o,s=Object.keys(e),a=(o={},s.forEach((function(t,e){o[t]=!0})),o);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),ja(e)&&(0<=s.indexOf("message")||0<=s.indexOf("description")))return Ca(e);if(0===s.length){if(za(e)){var l=e.name?": "+e.name:"";return t.stylize("[Function"+l+"]","special")}if(Pa(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Da(e))return t.stylize(Date.prototype.toString.call(e),"date");if(ja(e))return Ca(e)}var c,u,h="",f=!1,p=["{","}"];return c=e,Array.isArray(c)&&(f=!0,p=["[","]"]),za(e)&&(h=" [Function"+(e.name?": "+e.name:"")+"]"),Pa(e)&&(h=" "+RegExp.prototype.toString.call(e)),Da(e)&&(h=" "+Date.prototype.toUTCString.call(e)),ja(e)&&(h=" "+Ca(e)),0!==s.length||f&&0!=e.length?n<0?Pa(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),u=f?function(t,e,n,i,r){for(var o=[],s=0,a=e.length;s<a;++s)Ba(e,String(s))?o.push(Ma(t,e,n,i,String(s),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(Ma(t,e,n,i,r,!0))})),o}(t,e,n,a,s):s.map((function(i){return Ma(t,e,n,a,i,f)})),t.seen.pop(),function(t,e,n){return 60<t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(u,h,p)):p[0]+h+p[1]}function Ca(t){return"["+Error.prototype.toString.call(t)+"]"}function Ma(t,e,n,i,r,o){var s,a,l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]};if(l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),Ba(i,r)||(s="["+r+"]"),a||(t.seen.indexOf(l.value)<0?-1<(a=Ra(n)?Ta(t,l.value,null):Ta(t,l.value,n-1)).indexOf("\n")&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),Ia(s)){if(o&&r.match(/^\d+$/))return a;s=(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t.stylize(s,"string"))}return s+": "+a}function La(t){return"boolean"==typeof t}function Ra(t){return null===t}function Oa(t){return"string"==typeof t}function Ia(t){return void 0===t}function Pa(t){return Na(t)&&"[object RegExp]"===Fa(t)}function Na(t){return"object"==typeof t&&null!==t}function Da(t){return Na(t)&&"[object Date]"===Fa(t)}function ja(t){return Na(t)&&("[object Error]"===Fa(t)||t instanceof Error)}function za(t){return"function"==typeof t}function $a(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function Fa(t){return Object.prototype.toString.call(t)}function Ba(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ha(t,e){if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0}Sa.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Sa.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Ua,Ga=Object.prototype.hasOwnProperty,Va=Object.keys||function(t){var e=[];for(var n in t)Ga.call(t,n)&&e.push(n);return e},Wa=Array.prototype.slice;function qa(){return void 0!==Ua?Ua:Ua="foo"===function(){}.name}function Ka(t){return Object.prototype.toString.call(t)}function Ya(t){if(!_a(t)&&"function"==typeof Xi.ArrayBuffer){if("function"==typeof ArrayBuffer.isView)return ArrayBuffer.isView(t);if(t)return t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)}}function Xa(t,e){t||nl(t,!0,e,"==",il)}var Za=/\s*function\s+([^\(\s]*)\s*/;function Ja(t){if(za(t)){if(qa())return t.name;var e=t.toString().match(Za);return e&&e[1]}}function Qa(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=tl(el(this.actual),128)+" "+this.operator+" "+tl(el(this.expected),128),this.generatedMessage=!0);var e,n,i,r,o,s=t.stackStartFunction||nl;Error.captureStackTrace?Error.captureStackTrace(this,s):(e=new Error).stack&&(o=e.stack,n=Ja(s),0<=(i=o.indexOf("\n"+n))&&(r=o.indexOf("\n",i+1),o=o.substring(r+1)),this.stack=o)}function tl(t,e){return"string"!=typeof t||t.length<e?t:t.slice(0,e)}function el(t){if(qa()||!za(t))return Sa(t);var e=Ja(t);return"[Function"+(e?": "+e:"")+"]"}function nl(t,e,n,i,r){throw new Qa({message:n,actual:t,expected:e,operator:i,stackStartFunction:r})}function il(t,e){t||nl(t,!0,e,"==",il)}function rl(t,e,n,i){if(t===e)return!0;if(_a(t)&&_a(e))return 0===Ha(t,e);if(Da(t)&&Da(e))return t.getTime()===e.getTime();if(Pa(t)&&Pa(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(Ya(t)&&Ya(e)&&Ka(t)===Ka(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===Ha(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(_a(t)!==_a(e))return!1;var r=(i=i||{actual:[],expected:[]}).actual.indexOf(t);return-1!==r&&r===i.expected.indexOf(e)||(i.actual.push(t),i.expected.push(e),function(t,e,n,i){if(null==t||null==e)return!1;if($a(t)||$a(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=ol(t),o=ol(e);if(r&&!o||!r&&o)return!1;if(r)return rl(t=Wa.call(t),e=Wa.call(e),n);var s,a,l=Va(t),c=Va(e);if(l.length!==c.length)return!1;for(l.sort(),c.sort(),a=l.length-1;0<=a;a--)if(l[a]!==c[a])return!1;for(a=l.length-1;0<=a;a--)if(!rl(t[s=l[a]],e[s],n,i))return!1;return!0}(t,e,n,i))}return n?t===e:t==e}function ol(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function sl(t,e){if(t&&e){if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return 1}catch(t){}if(!Error.isPrototypeOf(e))return!0===e.call({},t)}}function al(t,e,n,i){var r;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=function(t){var e;try{t()}catch(t){e=t}return e}(e),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),t&&!r&&nl(r,n,"Missing expected exception"+i);var o="string"==typeof i,s=!t&&r&&!n;if((!t&&ja(r)&&o&&sl(r,n)||s)&&nl(r,n,"Got unwanted exception"+i),t&&r&&n&&!sl(r,n)||!t&&r)throw r}function ll(){}ka(Xa.AssertionError=Qa,Error),Xa.fail=nl,Xa.ok=il,Xa.equal=function t(e,n,i){e!=n&&nl(e,n,i,"==",t)},Xa.notEqual=function t(e,n,i){e==n&&nl(e,n,i,"!=",t)},Xa.deepEqual=function t(e,n,i){rl(e,n,!1)||nl(e,n,i,"deepEqual",t)},Xa.deepStrictEqual=function t(e,n,i){rl(e,n,!0)||nl(e,n,i,"deepStrictEqual",t)},Xa.notDeepEqual=function t(e,n,i){rl(e,n,!1)&&nl(e,n,i,"notDeepEqual",t)},Xa.notDeepStrictEqual=function t(e,n,i){rl(e,n,!0)&&nl(e,n,i,"notDeepStrictEqual",t)},Xa.strictEqual=function t(e,n,i){e!==n&&nl(e,n,i,"===",t)},Xa.notStrictEqual=function t(e,n,i){e===n&&nl(e,n,i,"!==",t)},Xa.throws=function(t,e,n){al(!0,t,e,n)},Xa.doesNotThrow=function(t,e,n){al(!1,t,e,n)},Xa.ifError=function(t){if(t)throw t};var cl={sort:function(t){return t.sort((function(t,e){return Math.sqrt(Math.pow(t.height,2)+Math.pow(t.width,2))-Math.sqrt(Math.pow(e.height,2)+Math.pow(e.width,2))})),t},placeItems:function(t){var e=0,n=0;return t.forEach((function(t){t.x=e,t.y=n,e+=t.width,n+=t.height})),t}},ul={sort:function(t){return t.sort((function(t,e){return Math.sqrt(Math.pow(t.height,2)+Math.pow(t.width,2))-Math.sqrt(Math.pow(e.height,2)+Math.pow(e.width,2))})),t},placeItems:function(t){var e=0,n=0;return t.forEach((function(t){var i=t.width;t.x=e-i,t.y=n,e-=i,n+=t.height})),t}};ll.prototype={fit:function(t){var e,n,i,r,o=t.length,s=0<o?t[0].width:0,a=0<o?t[0].height:0;for(this.root={x:0,y:0,width:s,height:a},e=0;e<o;e++)i=t[e],r=(n=this.findNode(this.root,i.width,i.height))?this.splitNode(n,i.width,i.height):this.growNode(i.width,i.height),i.x=r.x,i.y=r.y},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.width&&n<=t.height?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,width:t.width,height:t.height-n},t.right={x:t.x+e,y:t.y,width:t.width-e,height:n},t},growNode:function(t,e){var n=t<=this.root.width,i=e<=this.root.height,r=i&&this.root.height>=this.root.width+t,o=n&&this.root.width>=this.root.height+e;return r?this.growRight(t,e):o?this.growDown(t,e):i?this.growRight(t,e):n?this.growDown(t,e):null},growRight:function(t,e){var n;return this.root={used:!0,x:0,y:0,width:this.root.width+t,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:t,height:this.root.height}},(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null},growDown:function(t,e){var n;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+e,down:{x:0,y:this.root.height,width:this.root.width,height:e},right:this.root},(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null}};var hl=ll,fl={sort:function(t){return t},placeItems:function(t){return function(t,e){e=e||{};var n=new hl,i=e.inPlace||!1,r=(r=t.map((function(t){return i?t:{width:t.width,height:t.height,item:t}}))).sort((function(t,e){return e.width*e.height-t.width*t.height}));n.fit(r);var o={width:r.reduce((function(t,e){return Math.max(t,e.x+e.width)}),0),height:r.reduce((function(t,e){return Math.max(t,e.y+e.height)}),0)};i||(o.items=r)}(t,{inPlace:!0}),t}},pl={};function dl(t,e){var n=t||"top-down";return"string"==typeof n&&Xa(n=pl[t],"Sorry, the '"+t+"' algorithm could not be loaded."),new Os(n,e)}function gl(t,e){pl[t]=e}dl.PackingSmith=Os,dl.addAlgorithm=gl,dl.algorithms=pl,gl("top-down",{sort:function(t){return t.sort((function(t,e){return t.height-e.height})),t},placeItems:function(t){var e=0;return t.forEach((function(t){t.x=0,t.y=e,e+=t.height})),t}}),gl("left-right",{sort:function(t){return t.sort((function(t,e){return t.width-e.width})),t},placeItems:function(t){var e=0;return t.forEach((function(t){t.x=e,t.y=0,e+=t.width})),t}}),gl("diagonal",cl),gl("alt-diagonal",ul),gl("binary-tree",fl);var ml=dl;function vl(t){for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e++){var n=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];if(n)for(var i in n){var r=n[i];null===r||"object"!==vi(r)||Array.isArray(r)?void 0!==r&&(t[i]=r):null===t[i]||"object"!==vi(t[i])||Array.isArray(t[i])?t[i]=vl({},r):t[i]=vl(t[i],r)}}return t}function yl(t){var e;try{t.getContext("2d").getImageData(0,0,1,1)}catch(t){e=t.message}return e}function bl(t,e,n){var i;return t instanceof HTMLImageElement&&((i=t.ownerDocument.createElement("canvas")).width=e,i.height=n,i.getContext("2d").drawImage(t,0,0,e,n),t=i),t}var _l=er.metersToLatLng([er.half_circumference_meters,er.half_circumference_meters]),wl=Math.log(er.tile_size)/Math.LN2,xl=function(){Si(e,$r);var t=Ri(e);function e(n,i){var r;return yi(this,e),r=t.call(this,n,i),ur.is_worker&&(r._quad_tree=new Zi.H.geo.QuadTree,r._marker_quad_tree=new Zi.H.geo.QuadTree,r._tree_entries_by_object_id={},r._groups_by_id={},r._layersCache=new Zi.H.util.Cache(100)),ur.is_main&&(r._objects_by_id={},r._commands=[],r._sendCommands=Er(r._sendCommands,100,200),r.dispatchUpdate=r.dispatchUpdate.bind(Li(r))),r}return _i(e,[{key:"hasLabeledData",value:function(){return!1}},{key:"onReady",value:function(){this._synced_at=this.provider.getInvalidations().getMark();var t,e,n=this.provider.getRootGroup(),i=n.getObjects(!0),r=[];for(i.push(n),t=i.length;t--;)e=i[t],this._isObjectSupported(e)&&this._shouldBeStored(e)&&(this._objects_by_id[e.getId()]=e,r.push(e.forWorkerMessage()));var o=[{method_name:"addObjects",arguments:[r]}];this._sendImmediateCommands(o)}},{key:"onProviderUpdate",value:function(t){var e,n,i,r,o=t.target,s=t.currentTarget.getInvalidations(o.type);this._isObjectSupported(o)&&(e=this._synced_at,n=o.getId(),s.isRemove(e)?(delete this._objects_by_id[n],this._commands.push({method_name:"removeObjectsByIds",arguments:[[n],!0]})):s.isAdd(e)?this._shouldBeStored(o)&&(this._objects_by_id[n]=o,this._commands.push({method_name:"addObjects",arguments:[[o.forWorkerMessage()]]})):s.isSpatial(e)||s.isZOrder(e)?this._shouldBeStored(o)&&(i=[{method_name:"removeObjectsByIds",arguments:[[n],!0]},{method_name:"addObjects",arguments:[[(this._objects_by_id[n]=o).forWorkerMessage()]]}],this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands(i):this._commands.push(i[0],i[1])):s.isVisual(e)?this._shouldBeStored(o)&&(r={method_name:"updateObjectProperties",arguments:[(this._objects_by_id[n]=o).forWorkerMessage()]},this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands([r]):this._commands.push(r)):s.isVolatility(e)&&(delete this._objects_by_id[n],this._commands.push({method_name:"removeObjectsByIds",arguments:[[n],!0]}),this._shouldBeStored(o)&&(this._objects_by_id[n]=o,this._commands.push({method_name:"addObjects",arguments:[[o.forWorkerMessage()]]}))),this._commands.length&&this._sendCommands()),this._synced_at=s.getMark()}},{key:"_shouldBeStored",value:function(t){return 16===t.type||(!t.getIcon||1===t.getIcon().getState())&&this._hasSameVolatility(t)}},{key:"_hasSameVolatility",value:function(t){return t.getVolatility(!0)===this.has_volatile_data}},{key:"hasPendingCommands",value:function(){return 0<this._commands.length}},{key:"_sendCommands",value:function(){this._sendImmediateCommands(this._commands),this._commands=[]}},{key:"_sendImmediateCommands",value:function(t){t.length&&hr.postMessage(this.worker,this.target_name+".executeCommands",t).then(this.dispatchUpdate)}},{key:"_isObjectSupported",value:function(t){return t.forWorkerMessage&&8!==t.type}},{key:"getSyncedAt",value:function(){return this._synced_at}},{key:"getMapObjectById",value:function(t){return this._objects_by_id[t]}},{key:"getIconBitmapByObjectId",value:function(t,e){var n=this.getMapObjectById(t);if(n){var i=n.getIcon();if(i.uid===e&&1===i.getState()){var r=i.getSize();return bl(i.getBitmap(),r.w,r.h)}}}},{key:"_getRastersForMarkers",value:function(t){for(var e={},n=ml("binary-tree"),i=0;i<t.length;i++){var r=t[i],o=r.properties.icon;e[o.id]||(n.addItem({width:o.size.w,height:o.size.h,meta:{objectId:r.id,id:o.id}}),e[o.id]=!0)}return n.export()}},{key:"fetchFeaturesForTile",value:function(t){var n=[],i=[],r=[],o=[],s=[],a=this._marker_quad_tree.intersectBoundingBox(er.getTileBoundingBox(t.coords,this.tile_size));t.source_data.error=null;for(var l=0;l<a.length;l++){var c={id:a[l].$feature$.id,properties:Object.assign({},a[l].$feature$.properties),geometry:{type:a[l].$feature$.geometry.type,coordinates:rs.deepClone(a[l].$feature$.geometry.coordinates)}};n.push(c)}a=this._quad_tree.intersectBoundingBox(er.getTileBoundingBox(t.coords,this.tile_size,100));for(var u=0;u<a.length;u++){var h,f={id:a[u].$feature$.id,properties:Object.assign({},a[u].$feature$.properties),geometry:{type:a[u].$feature$.geometry.type,coordinates:rs.deepClone(a[u].$feature$.geometry.coordinates)}};f.properties.overlay?i.push(f):f.geometry.type.includes("LineString")?r.push(f):f.geometry.type.includes("Polygon")&&(o.push(f),h={id:f.id,properties:f.properties,geometry:{type:f.geometry.type,coordinates:rs.deepClone(f.geometry.coordinates)}},s.push(h))}n.sort(e._compareZInfo),o.sort(e._compareZInfo),i.sort(e._compareZInfo);var p=this.has_volatile_data?4096:0;s.sort(e._compareZInfo);for(var d=0;d<s.length;d++)s[d].properties.effectiveZIdx=p++;r.sort(e._compareZInfo);for(var g=0;g<r.length;g++)r[g].properties.effectiveZIdx=p++;t.source_data.layers.markers={type:"FeatureCollection",features:n},t.source_data.layers.polylines={type:"FeatureCollection",features:r},t.source_data.layers.polygons={type:"FeatureCollection",features:o},t.source_data.layers.outlines={type:"FeatureCollection",features:s},t.source_data.layers.overlays={type:"FeatureCollection",features:i}}},{key:"tileTexture",value:function(t){var e=t.source_data.layers.overlays;if(e){var n=this.name+"_"+t.coords.key,i=es.coordinateWithMaxZoom(t.coords,this.max_zoom),r=e.features[0].properties.overlays_config;return{name:n,filtering:this.filtering,coords:i,width:er.tile_size,height:er.tile_size,overlays_config:r,source:this.name}}}},{key:"_load",value:function(t){var e=er.wrapTile(t.coords,{x:!0}),n=e.z,i=e.x,r=e.y,o="".concat(n,"_").concat(i,"_").concat(r),s=this._layersCache.get(o),a=!1;if(s)t.source_data.layers=s;else{this.fetchFeaturesForTile(t);var l={maxZoom:this.max_zoom,tolerance:1.5,extent:er.tile_scale},c=t.source_data.layers.overlays;c.features.length&&delete t.source_data.layers.overlays;var u=t.source_data.layers.markers;for(var h in u.features.length&&delete t.source_data.layers.markers,t.source_data.layers){var f,p=t.source_data.layers[h];p.features.length&&(l.buffer=h.includes("lines")?100*er.units_per_pixel:0,f=Ls(p,n,i,r,l),t.source_data.layers[h]=uo(f))}t.source_data.layers.overlays=this._processOverlays(t,c);for(var d=t.source_data.layers.overlays.features.length;d--;)if(!t.source_data.layers.overlays.features[d].id){a=!0,this._layersCache.drop(o);break}t.source_data.layers.markers=this._processMarkers(t,u),this._postProcessTile(t),a||this._layersCache.add(o,t.source_data.layers,1)}return t.rasters=this._getRastersForMarkers(t.source_data.layers.markers.features),Promise.resolve(t)}},{key:"_processMarkers",value:function(t,e){var n=e.features.length;if(n){for(var i=er.unitsPerMeter(t.coords.z),r=er.wrapTile(t.coords,{x:!0}),o=er.metersForTile(r),s=er.isLastTile(r),a=function(e){Nr.coordsToMeters(e);var n=Ii(e,2),r=n[0],a=n[1],l=r>=t.min.x&&(s.column||r<t.max.x)&&a>=t.max.y&&(s.row||!t.coords.y||a<t.min.y);return Nr.metersToTileUnits(i,o,e),l},l=[],c=0;c<n;c++){var u,h=e.features[c].geometry,f=!1;"Point"===h.type?a(u=h.coordinates)?h.coordinates=u:f=!0:"MultiPoint"===h.type&&(h.coordinates=h.coordinates.filter(a),0===h.coordinates.length&&(f=!0)),f||l.push(e.features[c])}e.features=l}return e}},{key:"_processOverlays",value:function(t,e){var n=this;if(!e.features.length)return e;var i={coords:t.coords,min:er.metersForTile(er.wrapTile(t.coords,{x:!0}))},r={coords:t.coords,source_data:{layers:{_default:{type:"FeatureCollection",features:e.features}}}},o=Math.pow(2,t.coords.z+wl);$r.projectData(r.source_data),$r.scaleData(r.source_data,i);var s=e.features.map((function(t){var e=t.geometry.coordinates[0],n=e[0],i=e[5===e.length?2:3],r=Math.floor(n[0]/er.tile_scale*er.tile_size),s=Math.floor(n[1]/er.tile_scale*er.tile_size),a=Math.floor(i[0]/er.tile_scale*er.tile_size),l=Math.floor(i[1]/er.tile_scale*er.tile_size)-s,c=a<=r,u=c?o-(r-a):a-r,h=[];return r<=er.tile_size&&h.push([r,s,u,l]),c&&0<a&&h.push([r-o,s,u,l]),{id:t.id,properties:t.properties,texcoords:h}})).filter((function(e){return n._isVisible(e.properties)&&n.isInMinMaxRange(e.properties,t.style_zoom)})),a=er.tile_scale;return t.pad_scale=this.pad_scale,t.default_winding="CW",e.features=s.length?[{geometry:{type:"Polygon",coordinates:[[[0,0],[a,0],[a,a],[0,a],[0,0]]]},properties:{overlays_config:s}}]:s,e}},{key:"executeCommands",value:function(t){for(var e,n=t.length<10,i=0;i<t.length;i++){var r=t[i];r.arguments.push(n);var o=this[r.method_name].apply(this,r.arguments);n&&(o&&e?e.mergeRect(o,!0,e):o&&(e=o))}return e?e.forWorkerMessage():void 0}},{key:"_getClampedGeoRectForFeature",value:function(t){var e=t.geometry.boundingBox;return new Zi.H.geo.Rect(Qi.clamp(e[0],-_l[1],_l[1]),e[1],Qi.clamp(e[2],-_l[1],_l[1]),e[3])}},{key:"addObjects",value:function(t,n){for(var i,r=1<arguments.length&&void 0!==n&&n,o=0;o<t.length;o++){var s,a,l,c=t[o];"Group"===c.type?(c.$children_ids$={},this._groups_by_id[c.id]=c):(e._preprocessGeometry(c.geometry),s=this._getClampedGeoRectForFeature(c),r&&(i?i.mergeRect(s,!0,i):i=s),(l=(a=-1!==c.geometry.type.indexOf("Point")?this._marker_quad_tree:this._quad_tree).insertBoundingBox(s)).$tree=a,l.$feature$=c,this._tree_entries_by_object_id[c.id]=l)}for(var u=0;u<t.length;u++){var h=t[u];h.properties.parent&&(this._groups_by_id[h.properties.parent].$children_ids$[h.id]=h.id),h.properties.ref={effectiveVisibility:this._isVisible(h.properties),zInfo:this._getZInfo([],h)}}return this._layersCache.removeAll(),i}},{key:"removeObjectsByIds",value:function(t,e,n){for(var i,r=2<arguments.length&&void 0!==n&&n,o=0;o<t.length;o++){var s,a=t[o],l=void 0,c=void 0;(l=this._tree_entries_by_object_id[a])?(r&&(s=this._getClampedGeoRectForFeature(l.$feature$),i?i.mergeRect(s,!0,i):i=s),delete this._groups_by_id[l.$feature$.properties.parent].$children_ids$[a],l.$tree.remove(l),delete this._tree_entries_by_object_id[a]):(c=this._groups_by_id[a])&&(c.properties.parent&&delete this._groups_by_id[c.properties.parent].$children_ids$[a],e&&this.removeObjectsByIds(Object.keys(c.$children_ids$),!0),delete this._groups_by_id[a])}return this._layersCache.removeAll(),i}},{key:"updateObjectProperties",value:function(t,e){var n,i=1<arguments.length&&void 0!==e&&e;return"Group"===t.type?(vl(this._groups_by_id[t.id].properties,t.properties),this._groups_by_id[t.id].properties.ref.effectiveVisibility=this._isVisible(t.properties)):(this._tree_entries_by_object_id[t.id]||this.addObjects([t]),vl(this._tree_entries_by_object_id[t.id].$feature$.properties,t.properties),this._tree_entries_by_object_id[t.id].$feature$.properties.ref.effectiveVisibility=this._isVisible(t.properties),i&&(n=this._getClampedGeoRectForFeature(t))),n}},{key:"_getZInfo",value:function(t,e){var n=e.properties.zIdx,i=e.properties.sIdx;return t[0]|=void 0!==n,t.splice(1,0,n||0,i<0?e.id:i),0===e.properties.parent?t:this._getZInfo(t,this._groups_by_id[e.properties.parent])}},{key:"_isVisible",value:function(t){var e=t.visible,n=!t.parent||this._isVisible(this._groups_by_id[t.parent].properties);return e&&n}},{key:"isInMinMaxRange",value:function(t,e){var n=t.min<=e&&t.max>=e,i=!t.parent||this.isInMinMaxRange(this._groups_by_id[t.parent].properties,e);return n&&i}},{key:"dispose",value:function(){this._commands=[],Oi(Ai(e.prototype),"dispose",this).call(this)}}],[{key:"_compareZInfo",value:function(t,e){for(var n,i=t.properties.ref.zInfo,r=e.properties.ref.zInfo,o=i.length,s=r.length,a=Math.min(o,s),l=1;l<a;l++)if(n=i[l]-r[l])return n;return o-s}},{key:"_preprocessGeometry",value:function(t){var n=t.type;t.coordinates="Point"===n?e._processPointCoordinates(t.coordinates):"MultiPoint"===n?t.coordinates.map(e._processPointCoordinates):"LineString"===n?e._processLineStringCoordinates(t.coordinates):"MultiLineString"===n?t.coordinates.map(e._processLineStringCoordinates):"Polygon"===n?t.coordinates.map(e._processPolygonCoordinates):"MultiPolygon"===n?t.coordinates.map(e._processMultiPolygonCoordinates):[]}},{key:"_processPointCoordinates",value:function(t){return[t[1],t[0],t[2]]}},{key:"_processLineStringCoordinates",value:function(t){return e._latLngAltArrayToLineString(t,!1)}},{key:"_processPolygonCoordinates",value:function(t){return e._latLngAltArrayToLineString(t,!0)}},{key:"_processMultiPolygonCoordinates",value:function(t){return t.map(e._processPolygonCoordinates)}},{key:"_latLngAltArrayToLineString",value:function(t,e){for(var n=[],i=t.length,r=0;r<i;r+=3)n.push([t[r+1],t[r]]);return e&&n.push([t[1],t[0]]),n}}]),e}();$r.register(xl,"ObjectSource");var kl=function(){function t(){yi(this,t),this._map={}}return _i(t,[{key:"set",value:function(t,e,n){var i;this._map[t]?this._map[t].accumulator.add(n):((i=new Set).add(n),this._map[t]={value:e,accumulator:i})}},{key:"get",value:function(t){return this._map[t]&&this._map[t].value}},{key:"delete",value:function(t,e){var n=this._map[t];n&&n.accumulator&&(n.accumulator.delete(e),0===n.accumulator.size&&delete this._map[t])}}]),t}(),Sl=function(){Si(e,$r);var t=Ri(e);function e(n,i){var r;return yi(this,e),r=t.call(this,n,i),ur.is_worker||(r._icons=new kl),r}return _i(e,[{key:"onProviderUpdate",value:function(t){t.target instanceof H.map.provider.Tile?this.dispatchUpdate(t.target,t.data):this.dispatchUpdate(void 0,t.data)}},{key:"onReady",value:function(){var t=this.provider;t.setTileCanvasRendering&&t.setTileCanvasRendering(!1),t.providesMarkers()&&(this._onCacheDrop=this._onCacheDrop.bind(this),t.getCache().registerOnDrop(this._onCacheDrop)),this.dispatchUpdate()}},{key:"dispose",value:function(){Oi(Ai(e.prototype),"dispose",this).call(this);var t=this.provider;t.providesMarkers()&&t.getCache().deRegisterOnDrop(this._onCacheDrop)}},{key:"_onCacheDrop",value:function(t,e){this.provider.cacheFilter(t)&&this._deleteIcons(t,e.data)}},{key:"_deleteIcons",value:function(t,e){for(var n=0,i=e.length;n<i;n++){var r=e[n].getIcon();this._icons.delete(r.uid,t)}}},{key:"getIconBitmapByObjectId",value:function(t,e){var n=this._icons.get(e);return n&&n.getBitmap()}},{key:"requestMarkerTile",value:function(t){var e=this;return new Promise((function(n,i){e.provider?e.provider.requestTileAsPromise(t.x,t.y,t.z,!1).then((function(t){var i,r,o=[];if(t.data)for(r=(i=t.data).length;r--;){var s=i[r],a=s.getIcon();e._icons.set(a.uid,a,t.key),o.push(s.forWorkerMessage())}n(o)})):n([])}))}},{key:"requestSpatialTile",value:function(t){var e=this;return new Promise((function(n,i){e.provider?e.provider.requestTileAsPromise(t.x,t.y,t.z,!1).then((function(t){var e,i=[];if(t.getObjects){e=t.getObjects();for(var r=0;r<e.length;r++){var o=e[r];i.push({id:o.getId(),geometries:o.getGeometriesForTile(t),isClosed:o.isClosed(),style:o.getStyle().forWorkerMessage()})}}n(i)})):n([])}))}},{key:"_pointToArray",value:function(t){var e=er.tile_scale/this.tile_size;return[t.x*e,t.y*e]}},{key:"_getGeoJsonMultiPolygon",value:function(t){for(var e=t.geometries,n=e.length,i=[],r={coordinates:i,type:"MultiPolygon"},o=0;o<n;o++){var s=e[o],a=s.paths,l=a.length,c=s.interiorsIndex,u=s.outlinesIndex,h=Math.min(c,u,l),f=void 0,p=void 0;for(p=0;p<h;p++)f=[a[p].map(this._pointToArray,this)],i.push(f);if(1===h)for(h=Math.min(u,l),p=c;p<h;p++)f.push(a[p].map(this._pointToArray,this))}return r}},{key:"_getGeoJsonMultiLineString",value:function(t,e){for(var n=1<arguments.length&&void 0!==e&&e,i={coordinates:[],type:"MultiLineString"},r=t.geometries,o=0;o<r.length;o++)for(var s=r[o],a=n?s.outlinesIndex:0,l=n?s.paths.length:Math.min(s.interiorsIndex,s.outlinesIndex,s.paths.length),c=a;c<l;c++){var u=s.paths[c].map(this._pointToArray,this);i.coordinates.push(u)}return i}},{key:"_getGeoJsonGeometry",value:function(t,e){var n=1===e?this._getGeoJsonMultiPolygon(t):this._getGeoJsonMultiLineString(t,3===e);return n.coordinates.length?n:null}},{key:"_load",value:function(t){var e=this;return new Promise((function(n,i){var r=hr.postMessage(e.target_name+".requestMarkerTile",t.coords).then(e._prepareTileData.bind(e,t)),o=new Promise((function(n,i){hr.postMessage(e.target_name+".requestSpatialTile",t.coords).then((function(i){for(var r=[],o=[],s=[],a=0;a<i.length;a++){var l,c=i[a],u=void 0,h=c.isClosed?(u=o,1):(u=r,2),f=e._getGeoJsonGeometry(c,h);f&&(l={id:c.id,type:"Feature",properties:{height:0,style:c.style},geometry:f},2===h&&(l.properties.effectiveZIdx=r.length),u.push(l));var p=e._getGeoJsonGeometry(c,3);p&&s.push({id:c.id,type:"Feature",properties:{height:0,style:c.style,effectiveZIdx:s.length},geometry:p})}t.source_data.layers.polylines={type:"FeatureCollection",features:r},t.source_data.layers.polygons={type:"FeatureCollection",features:o},t.source_data.layers.outlines={type:"FeatureCollection",features:s},n(t)}))}));Promise.all([r,o]).then((function(i){e._postProcessTile(t),n(t)}))}))}},{key:"_prepareTileData",value:function(t,e){var n=er.wrapTile(t.coords,{x:!0,y:!0}),i=er.metersForTile(n);t.source_data.layers={markers:{features:e,type:"FeatureCollection"}};var r={coords:n,min:i},o=t.source_data,s=ml("binary-tree"),a={};for(var l in o.layers)for(var c=o.layers[l].features.length,u=0;u<c;u++){var h=o.layers[l].features[u],f=h.properties.icon;a[f.id]||(s.addItem({width:f.size.w,height:f.size.h,meta:{objectId:h.id,id:f.id}}),a[f.id]=!0),er.transformGeometry(h.geometry,(function(t){var e=t[0];t[0]=t[1],t[1]=e}))}return t.rasters=s.export(),$r.projectData(t.source_data),$r.scaleData(t.source_data,r),t}}]),e}();$r.register(Sl,"ObjectTileSource");var Al=function(){Si(e,is);var t=Ri(e);function e(n,i){var r;return yi(this,e),(r=t.call(this,n,i)).uid_=n.uid,r}return _i(e,[{key:"initialize",value:function(t,e){this.provider=t,this._on_update=e,this._onProviderUpdate=this._onProviderUpdate.bind(this),t.addEventListener("update",this._onProviderUpdate)}},{key:"_onProviderUpdate",value:function(){this._on_update(this.name)}},{key:"tileTexture",value:function(t){return Object.assign(Oi(Ai(e.prototype),"tileTexture",this).call(this,t),{uid:this.uid_,url:this.uid_+"_"+t.coords.key,coords:t.coords})}},{key:"dispose",value:function(){this.provider.removeEventListener("update",this._onProviderUpdate)}}]),e}();function El(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=ls(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=xs(i,e)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Tl(t,e,n){return 32*((1<<t)*n+e)+t}Nr.register(Al,"RemoteRasterTileSource"),El.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},El.prototype.splitTile=function(t,e,n,i,r,o,s){for(var a=[t,e,n,i],l=this.options,c=l.debug;a.length;){i=a.pop(),n=a.pop(),e=a.pop(),t=a.pop();var u,h,f,p,d,g,m,v,y,b,_,w=1<<e,x=Tl(e,n,i),k=this.tiles[x];if(k||(1<c&&console.time("creation"),k=this.tiles[x]=Ts(t,e,n,i,l),this.tileCoords.push({z:e,x:n,y:i}),c&&(1<c&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,k.numFeatures,k.numPoints,k.numSimplified),console.timeEnd("creation")),u="z"+e,this.stats[u]=(this.stats[u]||0)+1,this.total++)),k.source=t,r){if(e===l.maxZoom||e===r)continue;var S=1<<r-e;if(n!==Math.floor(o/S)||i!==Math.floor(s/S))continue}else if(e===l.indexMaxZoom||k.numPoints<=l.indexMaxPoints)continue;k.source=null,0!==t.length&&(1<c&&console.time("clipping"),f=.5-(h=.5*l.buffer/l.extent),d=1+h,y=g=m=v=null,b=gs(t,w,n-h,n+(p=.5+h),0,k.minX,k.maxX,l),_=gs(t,w,n+f,n+d,0,k.minX,k.maxX,l),t=null,b&&(y=gs(b,w,i-h,i+p,1,k.minY,k.maxY,l),g=gs(b,w,i+f,i+d,1,k.minY,k.maxY,l),b=null),_&&(m=gs(_,w,i-h,i+p,1,k.minY,k.maxY,l),v=gs(_,w,i+f,i+d,1,k.minY,k.maxY,l),_=null),1<c&&console.timeEnd("clipping"),a.push(y||[],e+1,2*n,2*i),a.push(g||[],e+1,2*n,2*i+1),a.push(m||[],e+1,2*n+1,2*i),a.push(v||[],e+1,2*n+1,2*i+1))}},El.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,o=i.debug;if(t<0||24<t)return null;var s=1<<t,a=Tl(t,e=(e%s+s)%s,n);if(this.tiles[a])return As(this.tiles[a],r);1<o&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,c=t,u=e,h=n;!l&&0<c;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[Tl(c,u,h)];return l&&l.source?(1<o&&console.log("found parent tile z%d-%d-%d",c,u,h),1<o&&console.time("drilling down"),this.splitTile(l.source,c,u,h,t,e,n),1<o&&console.timeEnd("drilling down"),this.tiles[a]?As(this.tiles[a],r):null):null};var Cl={type:"FeatureCollection",features:[]},Ml=function(){Si(e,$r);var t=Ri(e);function e(n,i){return yi(this,e),n.tiled=!0,n.url="",t.call(this,n,i)}return _i(e,[{key:"fetchTile",value:function(t,e,n){return this.provider?this.provider.requestTileAsPromise(t,e,n).then((function(t){return t.data})):Promise.resolve(Cl)}},{key:"_load",value:function(t){var e=this,n=er.wrapTile(t.coords,{x:!0,y:!0}),i={indexMaxZoom:0,maxZoom:this.max_zoom,tolerance:1.5,extent:er.tile_scale};return hr.postMessage(this.target_name+".fetchTile",n.x,n.y,n.z).then((function(r){for(var o in t.source_data.layers="FeatureCollection"===r.type?{_default:r}:r,t.source_data.layers){var s=new El(t.source_data.layers[o],i).getTile(n.z,n.x,n.y);t.source_data.layers[o]=uo(s)}return e._postProcessTile(t),t}))}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),e}();Nr.register(Ml,"GeoJSONTileSource");var Ll,Rl={layers:{_default:{type:"FeatureCollection",features:[{type:"Point",geometry:{}}]}}},Ol=function(){Si(e,Nr);var t=Ri(e);function e(n,i){return yi(this,e),n.max_zoom=0,t.call(this,n,i)}return _i(e,[{key:"load",value:function(t){return t.source_data="0/0/0"===t.coords.key?Rl:void 0,Promise.resolve(t)}}]),e}();Nr.register(Ol,"SkyBox");var Il,Pl=Ll={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1};function Nl(t,e){var n={};return e.forEach((function(e){return n[e]=t[e]})),n}var Dl=Il={},jl=0;Il.getContext=function(t,e){var n=!1;null==t&&((t=document.createElement("canvas")).style.position="absolute",t.style.top=0,t.style.left=0,t.style.zIndex=-1,document.body.appendChild(t),n=!0);var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("Couldn't create WebGL context.");return i._tangram_id=jl++,n?(Il.resize(i,window.innerWidth,window.innerHeight,e.device_pixel_ratio),window.addEventListener("resize",(function(){Il.resize(i,window.innerWidth,window.innerHeight,e.device_pixel_ratio)}))):Il.resize(i,parseFloat(t.style.width),parseFloat(t.style.height),e.device_pixel_ratio),i},Il.resize=function(t,e,n,i){t.canvas.style.width=e+"px",t.canvas.style.height=n+"px",t.canvas.width=Math.round(e*i),t.canvas.height=Math.round(n*i),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.canvas.width,t.canvas.height)};var zl={parseUniforms:function(t){var e=[];for(var n in t){var i,r=n,o=t[n];if("number"==typeof o)e.push({type:"float",method:"1f",name:n,value:o,key:r,uniforms:t});else if(Array.isArray(o)){if("number"==typeof o[0])2<=o.length&&o.length<=4?e.push({type:"vec"+o.length,method:o.length+"fv",name:n,value:o,key:r,uniforms:t}):4<o.length&&e.push({type:"float[]",method:"1fv",name:n+"[0]",value:o,key:r,uniforms:t});else if("string"==typeof o[0])for(i=0;i<o.length;i++)e.push({type:"sampler2D",method:"1i",name:n+"["+i+"]",value:o[i],key:i,uniforms:o});else if(Array.isArray(o[0])&&"number"==typeof o[0][0]&&2<=o[0].length&&o[0].length<=4)for(i=0;i<o.length;i++)e.push({type:"vec"+o[0].length,method:o[i].length+"fv",name:n+"["+i+"]",value:o[i],key:i,uniforms:o})}else"boolean"==typeof o?e.push({type:"bool",method:"1i",name:n,value:o,key:r,uniforms:t}):"string"==typeof o&&e.push({type:"sampler2D",method:"1i",name:n,value:o,key:r,uniforms:t})}return e},defineVariable:function(t,e){var n,i;if("number"==typeof e)n="float";else if(Array.isArray(e))"number"==typeof e[0]?2<=e.length&&e.length<=4?n="vec"+e.length:(n="float",i=e.length):"string"==typeof e[0]&&(n="sampler2D",i=e.length);else if("boolean"==typeof e)n="bool";else{if("string"!=typeof e)return;n="sampler2D"}var r="";return r+="".concat(n," ").concat(t),i&&(r+="[".concat(i,"]")),r+";\n"},defineUniform:function(t,e){var n=zl.defineVariable(t,e);if(n)return"uniform "+n},isUniformDefined:function(t,e){var n=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+t+"\\b","g");return!!e.match(n)},isSymbolReferenced:function(t,e){var n=new RegExp("\\b"+t+"\\b","g");return 0<=e.search(n)},expandVec3:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(t)){if(2!==t.length)return t;e=[].concat(Pi(t),[n]).map(parseFloat)}else e=[t,t,t].map(parseFloat);if(e&&e.every((function(t){return"number"==typeof t&&!isNaN(t)})))return e},expandVec4:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(t)){if(3!==t.length)return t;e=[].concat(Pi(t),[n]).map(parseFloat)}else e=[t,t,t,n].map(parseFloat);if(e&&e.every((function(t){return"number"==typeof t&&!isNaN(t)})))return e}},$l=[];function Fl(t,e){var n=$l.filter((function(e){return e[0]===t}))[0];return(n=n&&n[1])||($l.push([t,{}]),n=$l[$l.length-1][1]),n[e]||(n[e]=t.getExtension(e)),n[e]}function Bl(t){var e,n,i=0;if(0===t.length)return i;for(e=0,n=t.length;e<n;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return i}var Hl=s((function(t){var e="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",n=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,i=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,r=t.exports=function(t,e){return t?r.block(r.line(t,e),e):""};r.block=function(t,n){n=n||{};var i=new RegExp("\\/\\*"+e,"gm");return n.safe&&(i=new RegExp("\\/\\*(?!\\*?\\!)"+e,"gm")),t?t.replace(i,""):""},r.line=function(t,e){var r=n;return(e=e||{}).safe&&(r=i),t?t.replace(r,""):""}})),Ul=/^\s*#pragma.*$/gm,Gl=/\\\s*\n/gm,Vl=function(){function t(e,n,i,r,o){if(yi(this,t),o=o||{},this.textureManager=Do(r),this.gl=e,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,!t.polyfills[r]){t.polyfills[r]={};try{this.gl.uniformMatrix3fv(null,!1,new Float64Array(9))}catch(e){t.polyfills[r].uniformMatrix3fv=this.gl.uniformMatrix3fv,this.gl.uniformMatrix3fv=function(e,n,i){t.polyfills[r].uniformMatrix3fv.call(this,e,n,new Float32Array(i))}}try{this.gl.uniformMatrix4fv(null,!1,new Float64Array(16))}catch(e){t.polyfills[r].uniformMatrix4fv=this.gl.uniformMatrix4fv,this.gl.uniformMatrix4fv=function(e,n,i){t.polyfills[r].uniformMatrix4fv.call(this,e,n,new Float32Array(i))}}}this.defines=Object.assign({},o.defines||{}),this.blocks=Object.assign({},o.blocks||{}),this.block_scopes=Object.assign({},o.block_scopes||{}),this.extensions=o.extensions||[],this.dependent_uniforms=o.uniforms,this.uniforms={},this.attribs={},this.vertex_source=n,this.fragment_source=i,this.id=t.id++,this.name=o.name}return _i(t,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(t.current!==this&&this.gl.useProgram(this.program),t.current=this)}},{key:"compile",value:function(){var e=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for ".concat(this.id," (").concat(this.name,") because already compiling"));this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var n,i=this.checkExtensions(),r=this.buildDefineList(),o=this.buildShaderBlockList();for(var s in o){var a,l,c,u=o[s];!u||Array.isArray(u)&&0===u.length||(n=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+s+"\\s*$","m"),a=this.computed_vertex_source.match(n),l=this.computed_fragment_source.match(n),null==a&&null==l||(c="",u.forEach((function(t){var e="".concat(t.scope,", ").concat(t.key,", ").concat(t.num);c+="\n// tangram-block-start: ".concat(e,"\n"),c+=t.source,c+="\n// tangram-block-end: ".concat(e,"\n")})),null!=a&&(this.computed_vertex_source=this.computed_vertex_source.replace(n,c)),null!=l&&(this.computed_fragment_source=this.computed_fragment_source.replace(n,c)),r["TANGRAM_BLOCK_"+s.replace(/[\s-]+/g,"_").toUpperCase()]=!0))}this.computed_vertex_source=this.computed_vertex_source.replace(Ul,""),this.computed_fragment_source=this.computed_fragment_source.replace(Ul,""),this.ensureUniforms(this.dependent_uniforms);var h=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT),f=h&&0<h.precision?"precision highp float;\n":"precision mediump float;\n";r.TANGRAM_VERTEX_SHADER=!0,r.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=f+t.buildDefineString(r)+this.computed_vertex_source,r.TANGRAM_VERTEX_SHADER=!1,r.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=t.buildExtensionString(i)+f+t.buildDefineString(r)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(Gl,""),this.computed_fragment_source=this.computed_fragment_source.replace(Gl,"");try{this.program=t.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(i){throw this.program=null,this.compiled=!1,this.compiling=!1,"vertex"!==(this.error=i).type&&"fragment"!==i.type||(this.shader_errors=i.errors,this.shader_errors.forEach((function(t){t.type=i.type,t.block=e.block(i.type,t.line)}))),i}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var e,n={};for(e in t.defines)n[e]=t.defines[e];for(e in this.defines)n[e]=this.defines[e];return n}},{key:"buildShaderBlockList",value:function(){var e,n,i={};for(e in t.blocks)i[e]=[],Array.isArray(t.blocks[e])?(n=i[e]).push.apply(n,Pi(t.blocks[e].map((function(t,n){return{key:e,source:t,num:n,scope:"ShaderProgram"}})))):i[e]=[{key:e,source:t.blocks[e],num:0,scope:"ShaderProgram"}];for(e in this.blocks)if(i[e]=i[e]||[],Array.isArray(this.blocks[e]))for(var r=this.block_scopes&&this.block_scopes[e]||[],o=null,s=0,a=0;a<this.blocks[e].length;a++)r[a]!==o&&(o=r[a],s=0),i[e].push({key:e,source:this.blocks[e][a],num:s,scope:o||this.name}),s++;else i[e].push({key:e,source:this.blocks[e],num:0,scope:this.name});return i}},{key:"ensureUniforms",value:function(t){if(t){var e,n=Hl(this.computed_vertex_source),i=Hl(this.computed_fragment_source),r=[],o=[];for(var s in t){var a=zl.isUniformDefined(s,n),l=zl.isUniformDefined(s,i);if(!a||!l){if(!(e=zl.defineUniform(s,t[s])))continue;a||(Ar("trace","Program ".concat(this.name,": ").concat(s," not defined in vertex shader, injecting: '").concat(e,"'")),r.push(e)),l||(Ar("trace","Program ".concat(this.name,": ").concat(s," not defined in fragment shader, injecting: '").concat(e,"'")),o.push(e))}}0<r.length&&(this.computed_vertex_source=r.join("\n")+this.computed_vertex_source),0<o.length&&(this.computed_fragment_source=o.join("\n")+this.computed_fragment_source)}}},{key:"setUniforms",value:function(t,e){var n=!(1<arguments.length&&void 0!==e)||e;if(this.compiled){n&&(this.texture_unit=0);for(var i=zl.parseUniforms(t),r=0;r<i.length;r++){var o=i[r];"sampler2D"===o.type?this.setTextureUniform(o.name,o.value):this.uniform(o.method,o.name,o.value)}}}},{key:"saveUniforms",value:function(t){var e=t||this.uniforms;for(var n in e){var i=this.uniforms[n];i&&(i.saved_value=i.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function(t){var e=t||this.uniforms;for(var n in e){var i=this.uniforms[n];i&&i.saved_value&&(i.value=i.saved_value,this.updateUniform(i))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function(t,e){var n=this.textureManager.textures[e];null!=n?(n.bind(this.texture_unit),this.uniform("1i",t,this.texture_unit),this.texture_unit++):Ar("warn","Cannot find texture '".concat(e,"'"))}},{key:"uniform",value:function(t,e,n){var i;this.compiled&&(this.uniforms[e]=this.uniforms[e]||{},(i=this.uniforms[e]).name=e,void 0===i.location&&(i.location=this.gl.getUniformLocation(this.program,e)),i.method=t,i.value=n,this.updateUniform(i))}},{key:"updateUniform",value:function(t){this.compiled&&t&&null!=t.location&&(this.use(),this.commitUniform(t))}},{key:"commitUniform",value:function(t){var e=t.location,n=t.value;switch(t.method){case"1i":this.gl.uniform1i(e,n);break;case"1f":this.gl.uniform1f(e,n);break;case"2f":this.gl.uniform2f(e,n[0],n[1]);break;case"3f":this.gl.uniform3f(e,n[0],n[1],n[2]);break;case"4f":this.gl.uniform4f(e,n[0],n[1],n[2],n[3]);break;case"1iv":this.gl.uniform1iv(e,n);break;case"3iv":this.gl.uniform3iv(e,n);break;case"1fv":this.gl.uniform1fv(e,n);break;case"2fv":this.gl.uniform2fv(e,n);break;case"3fv":this.gl.uniform3fv(e,n);break;case"4fv":this.gl.uniform4fv(e,n);break;case"Matrix3fv":this.gl.uniformMatrix3fv(e,!1,n);break;case"Matrix4fv":this.gl.uniformMatrix4fv(e,!1,n)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var t in this.uniforms){var e=this.uniforms[t];e.location=this.gl.getUniformLocation(this.program,t),this.updateUniform(e)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function(t){if(this.compiled){var e=this.attribs[t]=this.attribs[t]||{};return null!=e.location||(e.name=t,e.location=this.gl.getAttribLocation(this.program,t)),e}}},{key:"source",value:function(t){return"vertex"===t?this.computed_vertex_source:"fragment"===t?this.computed_fragment_source:void 0}},{key:"lines",value:function(t){var e=this.source(t);return e?e.split("\n"):[]}},{key:"line",value:function(t,e){var n=this.lines(t);if(n)return n[e]}},{key:"block",value:function(t,e){for(var n,i=this.lines(t),r=0;r<e&&r<i.length;r++){var o=i[r],s=o.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);s&&1<s.length?n={scope:s[1],name:s[2],num:s[3]}:(s=o.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&1<s.length&&(n=null),n&&(n.line=null==n.line?-1:n.line+1,n.source=o)}return n}},{key:"checkExtensions",value:function(){var t=this,e=[];return this.extensions.forEach((function(n){var i=Fl(t.gl,n),r="TANGRAM_EXTENSION_".concat(n);t.defines[r]=null!=i,i?e.push(n):Ar("debug","Could not enable extension '".concat(n,"'"))})),e}}]),t}();Vl.polyfills={},Vl.id=0,Vl.current=null,Vl.defines={},Vl.blocks={},Vl.reset=function(){Vl.programs_by_source={},Vl.shaders_by_source={}},Vl.reset(),Vl.buildDefineString=function(t){var e="";for(var n in t)null!=t[n]&&!1!==t[n]&&("boolean"==typeof t[n]&&!0===t[n]?e+="#define "+n+"\n":"number"==typeof t[n]&&Math.floor(t[n])===t[n]?e+="#define "+n+" "+t[n].toFixed(1)+"\n":e+="#define "+n+" "+t[n]+"\n");return e},Vl.buildExtensionString=function(t){var e="";return(t=t||[]).forEach((function(t){e+="#ifdef GL_".concat(t,"\n#extension GL_").concat(t," : enable\n#endif\n")})),e},Vl.addBlock=function(t){var e;Vl.blocks[t]=Vl.blocks[t]||[];for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=Vl.blocks[t]).push.apply(e,i)},Vl.removeBlock=function(t){Vl.blocks[t]=[]},Vl.replaceBlock=function(t){Vl.removeBlock(t);for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];Vl.addBlock.apply(Vl,[t].concat(n))},Vl.updateProgram=function(t,e,n,i){var r=Bl(t._tangram_id+"::"+n+"::"+i);if(Vl.programs_by_source[r])return Ar("trace","Reusing identical source GL program object"),Vl.programs_by_source[r];var o=Vl.createShader(t,n,t.VERTEX_SHADER),s=Vl.createShader(t,i,t.FRAGMENT_SHADER);if(t.useProgram(null),null!=e)for(var a=t.getAttachedShaders(e),l=0;l<a.length;l++)t.detachShader(e,a[l]);else e=t.createProgram();if(null==o||null==s)return e;if(t.attachShader(e,o),t.attachShader(e,s),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS))return Vl.programs_by_source[r]=e;var c=new Error("WebGL program error:\n            VALIDATE_STATUS: ".concat(t.getProgramParameter(e,t.VALIDATE_STATUS),"\n            ERROR: ").concat(t.getError(),"\n            --- Vertex Shader ---\n            ").concat(n,"\n            --- Fragment Shader ---\n            ").concat(i));throw Object.assign(new Error(c),{type:"program"})};var Wl={disabled:!(Vl.createShader=function(t,e,n){var i=Bl(t._tangram_id+"::"+e);if(Vl.shaders_by_source[i])return Ar("trace","Reusing identical source GL shader object"),Vl.shaders_by_source[i];var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))return Vl.shaders_by_source[i]=r;var o=n===t.VERTEX_SHADER?"vertex":"fragment",s=t.getShaderInfoLog(r),a=function(t){t=String(t);for(var e,n=[];e=t.match(/ERROR\:([^\n]+)/);){t=t.slice(e.index+1);var i=(s=e[1].trim()).split(":"),r=i.slice(2).join(":").trim(),o=parseInt(i[0],10),s=parseInt(i[1],10);n.push({message:r,file:o,line:s})}return n}(s);throw Object.assign(new Error(s),{type:o,errors:a})}),bound_vao:[],init:function(t){var e;!0!==this.disabled&&(e=Fl(t,"OES_vertex_array_object")),null!=e?Ar("info","Vertex Array Object extension available"):!0!==this.disabled?Ar("warn","Vertex Array Object extension NOT available"):Ar("warn","Vertex Array Object extension force disabled")},create:function(t,e,n){var i={};i.setup=e,i.teardown=n;var r=Fl(t,"OES_vertex_array_object");return null!=r&&(i._vao=r.createVertexArrayOES(),r.bindVertexArrayOES(i._vao)),i.setup(!0),i},getCurrentBinding:function(t){var e=this.bound_vao.filter((function(e){return e[0]===t}))[0];return e&&e[1]},setCurrentBinding:function(t,e){var n=this.bound_vao,i=n.filter((function(e){return e[0]===t}))[0];null==i?n.push([t,e]):i[1]=e},bind:function(t,e){var n,i=Fl(t,"OES_vertex_array_object");null!=e?null!=i&&null!=e._vao?(i.bindVertexArrayOES(e._vao),this.setCurrentBinding(t,e)):e.setup(!1):(n=this.getCurrentBinding(t),null!=i?i.bindVertexArrayOES(null):null!=n&&"function"==typeof n.teardown&&n.teardown(),this.setCurrentBinding(t,null))},destroy:function(t,e){var n=Fl(t,"OES_vertex_array_object");null!=n&&null!=e&&null!=e._vao&&(n.deleteVertexArrayOES(e._vao),e._vao=null)}},ql=function(){function t(e,n){yi(this,t),this._gl=e,this._requests={},this._pixels=null,this._has_dirty_buffer=!1,this._fbo=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._fbo_size={width:256,height:256};var i=Do(n).create(this._gl,"selection_fbo",{filtering:"nearest"});i.setData(this._fbo_size.width,this._fbo_size.height,null,{filtering:"nearest"}),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,i.texture,0);var r=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,r),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._fbo_size.width,this._fbo_size.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,r),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return _i(t,[{key:"destroy",value:function(){this._gl&&this._fbo&&(this._gl.deleteFramebuffer(this._fbo),this._fbo=null,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){var e;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._gl.viewport(0,0,this._fbo_size.width,this._fbo_size.height),(e=this._gl).clearColor.apply(e,Pi(t.defaultColor))}},{key:"getFeatureAt",value:function(e,n,i){var r=n.radius,o=n.top_most_only,s=void 0===o||o;!e||e.x<0||e.y<0||1<e.x||1<e.y?i({features:null}):(this.selection_request_id=this.selection_request_id+1||0,this._requests[this.selection_request_id]={id:this.selection_request_id,point:e,radius:r,top_most_only:s,ttl:s?1:t.MAX_PICKING_TRIES,callback:i})}},{key:"hasPendingRequests",value:function(){return 0<Object.keys(this._requests).length}},{key:"clearPendingRequests",value:function(){for(var t in this._requests)this._requests[t].callback(new Error("cleared")),delete this._requests[t];this._pending_deep_request=null}},{key:"read",value:function(t){if(this.hasPendingRequests()){var e=this._gl;for(var n in e.bindFramebuffer(e.FRAMEBUFFER,this._fbo),this._pending_deep_request&&this.processRequest(this._pending_deep_request,t),this._requests)if(this.processRequest(this._requests[n],t))break;e.bindFramebuffer(e.FRAMEBUFFER,null)}}},{key:"processRequest",value:function(e,n){var i,r,o,s=this._gl,a=255,l=e.point,c=e.radius,u=(o=c?(r=Math.min(this._fbo_size.width,this._fbo_size.height),{x:Math.min(Math.ceil(2*c.x*this._fbo_size.width),r),y:Math.min(Math.ceil(2*c.y*this._fbo_size.height),r)}):(c={x:0,y:0},{x:1,y:1})).x*o.y*4;if(null==this._pixels||this._pixels.byteLength<u)this._pixels=new Uint8Array(u);else if(this._pixels.fill instanceof Function)this._pixels.fill(0,0,u);else for(var h=0;h<u;h++)this._pixels[h]=0;s.readPixels(Math.round((l.x-c.x)*this._fbo_size.width),Math.round((1-l.y-c.y)*this._fbo_size.height),o.x,o.y,s.RGBA,s.UNSIGNED_BYTE,this._pixels),e.ttl--;var f=Math.floor(o.x/2),p=Math.floor(o.y/2),d=4*(p*o.x+f),g=this._pixels.slice(d,d+4),m=g[0]+(g[1]<<8)+(g[2]<<16);if(0<m)i=m+(g[3]<<24)>>>0,a=g[3];else if(4<u)for(var v=1/0,y=(d=0,0);y<o.y;y++)for(var b,_=0;_<o.x;_++,d+=4)0<(m=(g=this._pixels.slice(d,d+4))[0]+(g[1]<<8)+(g[2]<<16))&&(b=Math.pow(_-f,2)+Math.pow(y-p,2))<v&&(i=m+(g[3]<<24)>>>0,a=g[3],v=b);if(255!==a){var w=this._getFeatureByKey(i,n);if(e.features||(e.features=[]),!w)return void this._finishRead(e);if(e.features.every((function(t){return t.id!==w.id}))&&e.features.push(w),e.ttl)return this._pending_deep_request=e,t._discardColor(g),this._has_dirty_buffer=!0;this._finishRead(e)}else this._finishRead(e)}},{key:"_finishRead",value:function(e){var n=e.features||t.EMPTY_ARRAY;e.top_most_only||(this._pending_deep_request=null,t._resetDiscardedColors()),delete this._requests[e.id],e.callback({features:n})}},{key:"_getFeatureByKey",value:function(t,e){for(var n=null,i=0;i<e.length;i++){var r=e[i];if(r.selection_data&&(n=r.selection_data[t])){n.tile={coords:r.coords};break}}return n}},{key:"setupDiscards",value:function(e){for(var n=t.MAX_PICKING_TRIES;n--;)e.uniform("4fv","u_selection_discard".concat(n),t._discarded_colors[n]||t.defaultColor)}},{key:"has_dirty_buffer",get:function(){return this._has_dirty_buffer},set:function(){this._has_dirty_buffer=!!this._pending_deep_request}}],[{key:"makeEntry",value:function(){this.map_entry++;var t=255&this.map_entry,e=this.map_entry>>8&255,n=this.map_entry>>16&255,i=this.map_prefix;return{key:t+(e<<8)+(n<<16)+(i<<24)>>>0,color:[t/255,e/255,n/255,i/255]}}},{key:"reset",value:function(){this.map_entry=0}},{key:"setPrefix",value:function(t){this.map_prefix=t}},{key:"_discardColor",value:function(t){this._discarded_colors.push([t[0]/255,t[1]/255,t[2]/255,t[3]/255])}},{key:"_resetDiscardedColors",value:function(){this._discarded_colors.length=0}}]),t}();ql._discarded_colors=[],ql.map_entry=0,ql.map_prefix=0,ql.defaultColor=[0,0,0,1],ql.MAX_PICKING_TRIES=10,ql.EMPTY_ARRAY=Object.freeze([]);var Kl,Yl=function(){function t(e,n,i,r,o,s){yi(this,t),s=s||{},this.textureManager=Do(o),this.gl=e,this.vertex_data=n,this.element_data=i,this.vertex_layout=r,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=s.draw_mode||this.gl.TRIANGLES,this.data_usage=s.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=s.uniforms,this.textures=s.textures,this.retain=s.retain||!1,this.created_at=+new Date,this.fade_in_time=s.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}return _i(t,[{key:"render",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};if(!this.valid)return!1;var n=e.program||Vl.current;n.use(),this.uniforms&&(n.saveUniforms(this.uniforms),n.setUniforms(this.uniforms,!1));var i=(new Date-this.created_at)/1e3;return n.uniform("1f","u_visible_time",i),this.bind(n),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),Wl.bind(this.gl,null),this.uniforms&&n.restoreUniforms(this.uniforms),i<this.fade_in_time}},{key:"bind",value:function(t){var e=this,n=this.vaos[t.id];n?Wl.bind(this.gl,n):this.vaos[t.id]=Wl.create(this.gl,(function(n){e.gl.bindBuffer(e.gl.ARRAY_BUFFER,e.vertex_buffer),e.toggle_element_array&&e.gl.bindBuffer(e.gl.ELEMENT_ARRAY_BUFFER,e.element_buffer),e.vertex_layout.enable(e.gl,t,n)}))}},{key:"upload",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}},{key:"destroy",value:function(){var t=this;if(!this.valid)return!1;for(var e in this.valid=!1,this.vaos)Wl.destroy(this.gl,this.vaos[e]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach((function(e){return t.textureManager.release(e)})),!0}}]),t}(),Xl=["emission","ambient","diffuse","specular"],Zl=function(){function t(e){var n=this;yi(this,t),e=e||{},Xl.forEach((function(t){var i=e[t];null!=i&&(i.texture?n[t]={texture:i.texture,mapping:i.mapping||"spheremap",scale:zl.expandVec3(null!=i.scale?i.scale:1),amount:zl.expandVec4(null!=i.amount?i.amount:1)}:"number"==typeof i||Array.isArray(i)?n[t]={amount:zl.expandVec4(i)}:n[t]="string"==typeof i?{amount:_o.parseColor(i)}:i)})),this.specular&&(this.specular.shininess=e.shininess?parseFloat(e.shininess):.2),null!=e.normal&&(this.normal={texture:e.normal.texture,mapping:e.normal.mapping||"triplanar",scale:zl.expandVec3(null!=e.normal.scale?e.normal.scale:1),amount:null!=e.normal.amount?e.normal.amount:1})}return _i(t,[{key:"inject",value:function(e){var n=this;Xl.forEach((function(t){var i="TANGRAM_MATERIAL_".concat(t.toUpperCase()),r=i+"_TEXTURE";e.defines[i]=null!=n[t],n[t]&&n[t].texture&&(e.defines[r]=!0,e.defines[r+"_"+n[t].mapping.toUpperCase()]=!0,e.defines["TANGRAM_MATERIAL_TEXTURE_".concat(n[t].mapping.toUpperCase())]=!0,e.texcoords=e.texcoords||"uv"===n[t].mapping)})),this.normal&&this.normal.texture&&(e.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,e.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,e.defines["TANGRAM_MATERIAL_TEXTURE_".concat(this.normal.mapping.toUpperCase())]=!0,e.texcoords=e.texcoords||"uv"===this.normal.mapping),e.replaceShaderBlock(t.block,"/*Defines globals:materiallight_accumulator_**/struct Material{\n#ifdef TANGRAM_MATERIAL_EMISSION\nvec4 emission;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nvec3 emissionScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT\nvec4 ambient;\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nvec3 ambientScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nvec4 diffuse;\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nvec3 diffuseScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 specular;float shininess;\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nvec3 specularScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvec3 normalScale;float normalAmount;\n#endif\n};uniform Material u_material;Material material;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nuniform sampler2D u_material_emission_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nuniform sampler2D u_material_ambient_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nuniform sampler2D u_material_diffuse_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nuniform sampler2D u_material_specular_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nuniform sampler2D u_material_normal_texture;\n#endif\nvec4 light_accumulator_ambient=vec4(vec3(0.0),1.);vec4 light_accumulator_diffuse=vec4(vec3(0.0),1.);\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 light_accumulator_specular=vec4(vec3(0.0),1.);\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP\nvec4 getSphereMap(in sampler2D _tex,in vec3 _eyeToPoint,in vec3 _normal,in vec2 _skew){vec3 eye=normalize(_eyeToPoint);eye.xy-=_skew;eye=normalize(eye);vec3 r=reflect(eye,_normal);r.z+=1.0;float m=2.*length(r);vec2 uv=r.xy/m+.5;return texture2D(_tex,uv);}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR\nvec3 getTriPlanarBlend(in vec3 _normal){vec3 blending=abs(_normal);blending=normalize(max(blending,0.00001));float b=(blending.x+blending.y+blending.z);return blending/b;}vec4 getTriPlanar(in sampler2D _tex,in vec3 _pos,in vec3 _normal,in vec3 _scale){vec3 blending=getTriPlanarBlend(_normal);vec4 xaxis=texture2D(_tex,fract(_pos.yz*_scale.x));vec4 yaxis=texture2D(_tex,fract(_pos.xz*_scale.y));vec4 zaxis=texture2D(_tex,fract(_pos.xy*_scale.z));return xaxis*blending.x+yaxis*blending.y+zaxis*blending.z;}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR\nvec4 getPlanar(in sampler2D _tex,in vec3 _pos,in vec2 _scale){return texture2D(_tex,fract(_pos.xy*_scale.x));}\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvoid calculateNormal(inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV\n_normal+=texture2D(u_material_normal_texture,fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR\nvec3 normalTex=getPlanar(u_material_normal_texture,v_world_position.xyz,material.normalScale.xy).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR\nvec3 normalTex=getTriPlanar(u_material_normal_texture,v_world_position.xyz,_normal,material.normalScale).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n_normal=normalize(_normal);}\n#endif\nvoid calculateMaterial(in vec3 _eyeToPoint,inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV\nmaterial.emission*=texture2D(u_material_emission_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR\nmaterial.emission*=getPlanar(u_material_emission_texture,v_world_position.xyz,material.emissionScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR\nmaterial.emission*=getTriPlanar(u_material_emission_texture,v_world_position.xyz,_normal,material.emissionScale);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP\nmaterial.emission*=getSphereMap(u_material_emission_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV\nmaterial.ambient*=texture2D(u_material_ambient_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR\nmaterial.ambient*=getPlanar(u_material_ambient_texture,v_world_position.xyz,material.ambientScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR\nmaterial.ambient*=getTriPlanar(u_material_ambient_texture,v_world_position.xyz,_normal,material.ambientScale);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP\nmaterial.ambient*=getSphereMap(u_material_ambient_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV\nmaterial.diffuse*=texture2D(u_material_diffuse_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR\nmaterial.diffuse*=getPlanar(u_material_diffuse_texture,v_world_position.xyz,material.diffuseScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR\nmaterial.diffuse*=getTriPlanar(u_material_diffuse_texture,v_world_position.xyz,_normal,material.diffuseScale);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP\nmaterial.diffuse*=getSphereMap(u_material_diffuse_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV\nmaterial.specular*=texture2D(u_material_specular_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR\nmaterial.specular*=getPlanar(u_material_specular_texture,v_world_position.xyz,material.specularScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR\nmaterial.specular*=getTriPlanar(u_material_specular_texture,v_world_position.xyz,_normal,material.specularScale);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP\nmaterial.specular*=getSphereMap(u_material_specular_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n}","Material"),e.addShaderBlock("setup","\nmaterial = u_material;\n","Material")}},{key:"setupProgram",value:function(t){var e=this;Xl.forEach((function(n){e[n]&&(e[n].texture?(t.setTextureUniform("u_material_".concat(n,"_texture"),e[n].texture),t.uniform("3fv","u_material.".concat(n,"Scale"),e[n].scale),t.uniform("4fv","u_material.".concat(n),e[n].amount)):e[n].amount&&t.uniform("4fv","u_material.".concat(n),e[n].amount))})),this.specular&&t.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(t.setTextureUniform("u_material_normal_texture",this.normal.texture),t.uniform("3fv","u_material.normalScale",this.normal.scale),t.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function(t){return null!=t&&(null!=t.emission||null!=t.ambient||null!=t.diffuse||null!=t.specular)}}]),t}();Zl.block="material";var Jl=Kl={};Kl.copy=function(t){for(var e=[],n=t.length,i=0;i<n;i++)e[i]=t[i];return e},Kl.neg=function(t){for(var e=[],n=t.length,i=0;i<n;i++)e[i]=-t[i];return e},Kl.add=function(t,e){for(var n=[],i=Math.min(t.length,e.length),r=0;r<i;r++)n[r]=t[r]+e[r];return n},Kl.sub=function(t,e){for(var n=[],i=Math.min(t.length,e.length),r=0;r<i;r++)n[r]=t[r]-e[r];return n},Kl.signed_area=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])},Kl.mult=function(t,e){var n,i=[],r=t.length;if("number"==typeof e)for(n=0;n<r;n++)i[n]=t[n]*e;else for(r=Math.min(t.length,e.length),n=0;n<r;n++)i[n]=t[n]*e[n];return i},Kl.multMatrix=function(t,e){return[t[0][0]*e[0]+t[0][1]*e[1],t[1][0]*e[0]+t[1][1]*e[1]]},Kl.div=function(t,e){var n=[];if("number"==typeof e)for(r=0;r<t.length;r++)n[r]=t[r]/e;else for(var i=Math.min(t.length,e.length),r=0;r<i;r++)n[r]=t[r]/e[r];return n},Kl.perp=function(t,e){return[e[1]-t[1],t[0]-e[0]]},Kl.rot=function(t,e){var n=Math.cos(e),i=Math.sin(e);return[t[0]*n-t[1]*i,t[0]*i+t[1]*n]},Kl.angle=function(t){var e=Ii(t,2),n=e[0],i=e[1];return Math.atan2(i,n)},Kl.angleBetween=function(t,e){var n=Kl.dot(Kl.normalize(Kl.copy(t)),Kl.normalize(Kl.copy(e)));return 1<n&&(n=1),Math.acos(n)},Kl.signedAngleBetween=function(t,e){return Math.atan2(t[0]*e[1]-t[1]*e[0],t[0]*e[0]+t[1]*e[1])},Kl.isEqual=function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0},Kl.lengthSq=function(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:3<=t.length?t[0]*t[0]+t[1]*t[1]+t[2]*t[2]:0},Kl.length=function(t){return Math.sqrt(Kl.lengthSq(t))},Kl.normalize=function(t){var e;if(2===t.length){if(1===(e=t[0]*t[0]+t[1]*t[1]))return t;0!==(e=Math.sqrt(e))?(t[0]/=e,t[1]/=e):(t[0]=0,t[1]=0)}else if(3<=t.length){if(1===(e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2]))return t;0!==(e=Math.sqrt(e))?(t[0]/=e,t[1]/=e,t[2]/=e):(t[0]=0,t[1]=0,t[2]=0)}return t},Kl.cross=function(t,e){return 2===t.length?t[0]*e[1]-t[1]*e[0]:3===t.length?[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]:void 0},Kl.dot=function(t,e){for(var n=0,i=Math.min(t.length,e.length),r=0;r<i;r++)n+=t[r]*e[r];return n};var Ql=function(){function t(e,n){yi(this,t),this.name=n.name,this.view=e,null==n.ambient||"number"==typeof n.ambient?this.ambient=zl.expandVec3(n.ambient||0):this.ambient=_o.parseColor(n.ambient).slice(0,3),null==n.diffuse||"number"==typeof n.diffuse?this.diffuse=zl.expandVec3(null!=n.diffuse?n.diffuse:1):this.diffuse=_o.parseColor(n.diffuse).slice(0,3),null==n.specular||"number"==typeof n.specular?this.specular=zl.expandVec3(n.specular||0):this.specular=_o.parseColor(n.specular).slice(0,3)}return _i(t,[{key:"inject",value:function(){var e="\n            uniform ".concat(this.struct_name," u_").concat(this.name,";\n            ").concat(this.struct_name," ").concat(this.name,";\n            "),n="\n            ".concat(this.name," = u_").concat(this.name,";\n\n        ");Vl.addBlock(t.block,e),Vl.addBlock("setup",n)}},{key:"update",value:function(){}},{key:"setupProgram",value:function(t){t.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient),t.uniform("3fv","u_".concat(this.name,".diffuse"),this.diffuse),t.uniform("3fv","u_".concat(this.name,".specular"),this.specular)}}],[{key:"create",value:function(e,n){if(t.types[n.type])return new t.types[n.type](e,n)}},{key:"setMode",value:function(e,n){!0===e&&(e="fragment"),e=t.enabled&&(null!=e?e:"fragment"),n.defines.TANGRAM_LIGHTING_FRAGMENT="fragment"===e,n.defines.TANGRAM_LIGHTING_VERTEX="vertex"===e}},{key:"inject",value:function(e){if(Vl.removeBlock(t.block),t.enabled){var n="";if(e&&0<Object.keys(e).length){var i={};for(var r in e)i[e[r].type]=!0;for(var o in i)t.types[o].inject();for(var s in e)e[s].inject(),n+="calculateLight(".concat(s,", _eyeToPoint, _normal);\n")}var a="\n            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {\n\n                // Do initial material calculations over normal, emission, ambient, diffuse and specular values\n                calculateMaterial(_eyeToPoint,_normal);\n\n                // Un roll the loop of individual ligths to calculate\n                ".concat(n,"\n\n                //  Final light intensity calculation\n                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha\n\n                #ifdef TANGRAM_MATERIAL_EMISSION\n                    color.rgb = material.emission.rgb;\n                    color.a *= material.emission.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_AMBIENT\n                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;\n                    color.a *= material.ambient.a;\n                #else\n                    #ifdef TANGRAM_MATERIAL_DIFFUSE\n                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;\n                    #endif\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_DIFFUSE\n                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;\n                    color.a *= material.diffuse.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_SPECULAR\n                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;\n                    color.a *= material.specular.a;\n                #endif\n\n                // Clamp final color\n                color = clamp(color, 0.0, 1.0);\n\n                return color;\n            }");Vl.addBlock(t.block,a)}}}]),t}();Ql.types={},Ql.block="lighting",Ql.enabled=!0;var tc=function(){Si(e,Ql);var t=Ri(e);function e(n,i){var r;return yi(this,e),(r=t.call(this,n,i)).type="ambient",r.struct_name="AmbientLight",r}return _i(e,[{key:"setupProgram",value:function(t){t.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient)}}],[{key:"inject",value:function(){Vl.addBlock(Ql.block,"/*Expected globals:light_accumulator_**/struct AmbientLight{vec3 ambient;};void calculateLight(in AmbientLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;}")}}]),e}();Ql.types.ambient=tc;var ec=function(){Si(e,Ql);var t=Ri(e);function e(n,i){var r,o;return yi(this,e),(r=t.call(this,n,i)).type="directional",r.struct_name="DirectionalLight",i.direction?r._direction=i.direction:(o=Math.sin(60*Math.PI/180),r._direction=[Math.cos(135*Math.PI/180)*o,Math.sin(135*Math.PI/180)*o,-.5]),null==i.ambient&&(r.ambient=zl.expandVec3(.5)),r.direction=r._direction.map(parseFloat),r._initial_direction=[r.direction[0],r.direction[1],r.direction[2]],r}return _i(e,[{key:"update",value:function(){$o(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"setupProgram",value:function(t){Oi(Ai(e.prototype),"setupProgram",this).call(this,t),t.uniform("3fv","u_".concat(this.name,".direction"),this.direction)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=Jl.normalize(Jl.copy(t))}}],[{key:"inject",value:function(){Vl.addBlock(Ql.block,"/*Expected globals:materiallight_accumulator_**/struct DirectionalLight{vec3 ambient;vec3 diffuse;vec3 specular;vec3 direction;};void calculateLight(in DirectionalLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;float nDotVP=clamp(dot(_normal,-_light.direction),0.0,1.0);\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(_light.direction,_normal);float eyeDotR=max(dot(normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf;\n#endif\n}")}}]),e}();Ql.types.directional=ec;var nc=function(){Si(e,Ql);var t=Ri(e);function e(n,i){var r;return yi(this,e),(r=t.call(this,n,i)).type="point",r.struct_name="PointLight",r.position=i.position||[0,0,"100px"],r.position_eye=[],r.origin=i.origin||"ground",r.attenuation=isNaN(parseFloat(i.attenuation))?0:parseFloat(i.attenuation),i.radius?Array.isArray(i.radius)&&2===i.radius.length?r.radius=i.radius:r.radius=[null,i.radius]:r.radius=null,r}return _i(e,[{key:"inject",value:function(){Oi(Ai(e.prototype),"inject",this).call(this),Vl.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=0!==this.attenuation,Vl.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=null!=this.radius&&null!=this.radius[0],Vl.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=null!=this.radius}},{key:"update",value:function(){var t,e,n,i=this.view.lookAtManipulator.getLookAtData().zoom;"world"===this.origin?(e=(t=Ii(er.latLngToMeters(this.position),2))[0],n=t[1],this.position_eye[0]=e-this.view.lookAtManipulator.getLookAtData().position[0],this.position_eye[1]=n-this.view.lookAtManipulator.getLookAtData().position[1],this.position_eye[2]=_o.convertUnits(this.position[2],{zoom:i,meters_per_pixel:er.metersPerPixel(i)}),this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance):"ground"!==this.origin&&"camera"!==this.origin||(this.position_eye=_o.convertUnits(this.position,{zoom:i,meters_per_pixel:er.metersPerPixel(i)}),"ground"===this.origin&&(this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance)),this.position_eye[3]=1}},{key:"setupProgram",value:function(t){Oi(Ai(e.prototype),"setupProgram",this).call(this,t),t.uniform("4fv","u_".concat(this.name,".position"),this.position_eye),Vl.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&t.uniform("1f","u_".concat(this.name,".attenuationExponent"),this.attenuation);var n=this.view.lookAtManipulator.getLookAtData().zoom;Vl.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&t.uniform("1f","u_".concat(this.name,".innerRadius"),_o.convertUnits(this.radius[0],{zoom:n,meters_per_pixel:er.metersPerPixel(n)})),Vl.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&t.uniform("1f","u_".concat(this.name,".outerRadius"),_o.convertUnits(this.radius[1],{zoom:n,meters_per_pixel:er.metersPerPixel(n)}))}}],[{key:"inject",value:function(){Vl.addBlock(Ql.block,"/*Expected globals:materiallight_accumulator_**/struct PointLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\n};void calculateLight(in PointLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(VP,_normal),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nlight_accumulator_ambient.rgb+=_light.ambient*attenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(0.0,dot(-normalize(_eyeToPoint),reflectVector));pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation;\n#endif\n}")}}]),e}();Ql.types.point=nc;var ic=function(){Si(e,nc);var t=Ri(e);function e(n,i){var r;return yi(this,e),(r=t.call(this,n,i)).type="spotlight",r.struct_name="SpotLight",r.direction=r._direction=(i.direction||[0,0,-1]).map(parseFloat),r._initial_direction=[r.direction[0],r.direction[1],r.direction[2]],r.exponent=i.exponent?parseFloat(i.exponent):.2,r.angle=i.angle?parseFloat(i.angle):20,r}return _i(e,[{key:"setupProgram",value:function(t){Oi(Ai(e.prototype),"setupProgram",this).call(this,t),t.uniform("3fv","u_".concat(this.name,".direction"),this.direction),t.uniform("1f","u_".concat(this.name,".spotCosCutoff"),Math.cos(3.14159*this.angle/180)),t.uniform("1f","u_".concat(this.name,".spotExponent"),this.exponent)}},{key:"update",value:function(){Oi(Ai(e.prototype),"update",this).call(this),$o(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=Jl.normalize(Jl.copy(t))}}],[{key:"inject",value:function(){Vl.addBlock(Ql.block,"/*Expected globals:materiallight_accumulator_**/struct SpotLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\nvec3 direction;float spotCosCutoff;float spotExponent;};void calculateLight(in SpotLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(_normal,VP),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nfloat spotAttenuation=0.0;float spotDot=clamp(dot(-VP,_light.direction),0.0,1.0);if(spotDot>=_light.spotCosCutoff){spotAttenuation=pow(spotDot,_light.spotExponent);}light_accumulator_ambient.rgb+=_light.ambient*attenuation*spotAttenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation*spotAttenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(dot(-normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation*spotAttenuation;\n#endif\n}")}}]),e}();Ql.types.spotlight=ic;var rc,oc="#ifdef TANGRAM_FRAGMENT_SHADER\nuniform sampler2D u_raster;uniform vec3 u_raster_offset;\n#define sampleRaster() (texture2D(u_raster, v_modelpos_base_zoom.xy * u_raster_offset.z + u_raster_offset.xy))\n#endif\n",sc={init:function(t){var e=0<arguments.length&&void 0!==t?t:{},n=e.generation,i=e.styles,r=e.sources,o=void 0===r?{}:r,s=e.introspection,a=e.id,l=void 0!==a?a+"/":"";this.scene_id=a,this.textureManager=Do(a),this.main_thread_target="".concat(l,"Style/").concat(this.name),this.setGeneration(n),this.styles=i,this.sources=o,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=s||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_".concat(this.blend.toUpperCase())]=!0,null==this.blend_order&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof Zl||(Zl.isValid(this.material)||(this.material=_o.defaults.material),this.material=new Zl(this.material)),this.material.inject(this),Ql.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),hr.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(t){this.generation=t,ur.is_main&&hr.addTarget(this.main_thread_target,this)},fillVertexTemplate:function(t,e,n,i){var r=i.size,o=void 0===(o=i.offset)?0:o,s=t.index[e];if(void 0!==s)for(var a=0;a<r;++a){var l=n.length>a?n[a]:n;this.vertex_template[s+a+o]=l}else Ar("warn","Style: in style '".concat(this.name,"', no index found in vertex layout for attribute '").concat(e,"'"))},startData:function(t){this.tile_data[t.id]=this.tile_data[t.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(t){var e=this.tile_data[t.id];if(this.tile_data[t.id]=null,e&&0<Object.keys(e.meshes).length){for(var n in e.meshes){var i=e.meshes[n];0!==i.vertex_data.vertex_count?(i.vertex_data.end(),i.vertex_elements=i.vertex_data.element_buffer,i.vertex_data=i.vertex_data.vertex_buffer):delete e.meshes[n]}return t.mesh_data[this.name]=e,this.buildRasterTextures(t,e).then((function(t){return t}))}return Promise.resolve(null)},hasDataForTile:function(t){return null!=this.tile_data[t.id]},getTileMesh:function(t,e){var n=this.tile_data[t.id].meshes;return null==n[e.key]&&(n[e.key]={variant:e,vertex_data:this.vertexLayoutForMeshVariant(e).createVertexData()}),n[e.key]},vertexLayoutForMeshVariant:function(){return this.vertex_layout},default_mesh_variant:{key:0},meshVariantTypeForDraw:function(){return this.default_mesh_variant},addFeature:function(t,e,n){var i=n.tile;this.tile_data[i.id]||this.startData(i);var r,o,s,a=this.parseFeature(t,e,n);a&&(o=(r=this.getTileMesh(i,this.meshVariantTypeForDraw(a))).vertex_data.offset,s=r.vertex_data.vertex_count,0<this.buildGeometry(t.geometry,a,r,n)?t.generation=this.generation:r.vertex_data.vertex_count>s&&(r.vertex_data.vertex_buffer.fill(0,o,r.vertex_data.offset),r.vertex_data.vertex_count=s,r.vertex_data.offset=o))},buildGeometry:function(t,e,n,i){var r;return"Polygon"===t.type?r=this.buildPolygons([t.coordinates],e,n,i):"MultiPolygon"===t.type?r=this.buildPolygons(t.coordinates,e,n,i):"LineString"===t.type?r=this.buildLines([t.coordinates],e,n,i):"MultiLineString"===t.type?r=this.buildLines(t.coordinates,e,n,i):"Point"===t.type?r=this.buildPoints([t.coordinates],e,n,i):"MultiPoint"===t.type&&(r=this.buildPoints(t.coordinates,e,n,i)),r},parseFeature:function(t,e,n){try{var i,r,o,s=this.feature_style;if(s.order=this.parseOrder(e.order,n),null==s.order&&"overlay"!==this.blend){var a="Layer '".concat(e.layers.join(", "),"', draw group '").concat(e.group,"': ");return a+="'order' parameter is required unless blend mode is 'overlay'",null!=e.order&&(a+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",a+="or JS function), but evaluated to null for one or more features"),void Ar({level:"warn",once:!0},a)}if(!(s=this._parseFeature(t,e,n)))return;return this.selection?s.interactive=_o.evalProperty(this.introspection||e.interactive,n):s.interactive=!1,!0===s.interactive?(r=(i=ql.makeEntry()).color,o=i.key,s.selection_color=r,n.tile.selection_data||(n.tile.selection_data={}),n.tile.selection_data[o]={id:t.id||o,properties:t.properties,source_name:n.source,source_layer:n.layer,layers:n.layers}):s.selection_color=ql.defaultColor,s}catch(e){Ar("error","Style.parseFeature: style parsing error",t,s,e.stack)}},_parseFeature:function(){return this.feature_style},preprocess:function(t,e){if(!t.preprocessed){if(this.draw)for(var n in this.draw){var i=this.draw[n];"object"!==vi(i)||Array.isArray(i)?null==t[n]&&(t[n]=i):t[n]=vl({},i,t[n])}var r=e||"";if(!(t=this._preprocess(t,r)))return;t.preprocessed=!0}return t},_preprocess:function(t){return t},parseOrder:function(t,e){return"number"!=typeof t?_o.calculateOrder(t,e):t},scaleOrder:function(t){return 2*t},parseColor:function(t,e){return t?_o.evalCachedColorProperty(t,e):this.shaders.blocks.color||this.shaders.blocks.filter?_o.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(t){this.gl=t,this.max_texture_size=this.textureManager.getMaxTextureSize(this.gl)},makeMesh:function(t,e,n){var i=2<arguments.length&&void 0!==n?n:{},r=this.vertexLayoutForMeshVariant(i.variant);return new Yl(this.gl,t,e,r,this.scene_id,i)},render:function(t){return t.render()},getProgram:function(t){var e=0<arguments.length&&void 0!==t?t:"program";this.compileSetup();var n=this[e];if(n&&!n.error){if(!n.compiled)try{n.compile()}catch(t){Ar("error","Style: error compiling program for style '".concat(this.name,"' (program key '").concat(e,"')"),this,t.stack)}return n}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for ".concat(this.name," because no GL context"));var t,e=this.buildDefineList();this.selection&&((t=Object.assign({},e)).TANGRAM_FEATURE_SELECTION=!0);var n=this.shaders&&this.shaders.blocks,i=this.shaders&&this.shaders.block_scopes,r=Object.assign({},this.shaders&&this.shaders.uniforms);for(var o in r)null==r[o]&&Ar({level:"warn",once:!0},"Style '".concat(this.name,"' has invalid uniform '").concat(o,"': uniform values must be non-null"));var s=this.shaders&&this.shaders.extensions;"string"==typeof s&&(s=[s]),this.program=new Vl(this.gl,this.vertex_shader_src,this.fragment_shader_src,this.scene_id,{name:this.name,defines:e,uniforms:r,blocks:n,block_scopes:i,extensions:s}),this.selection?this.selection_program=new Vl(this.gl,this.vertex_shader_src,this.crop_by_tile?"\n#pragma tangram: utils\n#ifdef TANGRAM_FEATURE_SELECTION\nuniform float u_meters_per_pixel;varying vec4 v_selection_color;varying vec4 v_local_space_position;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}else{gl_FragColor=v_selection_color;}\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}":"\n#ifdef TANGRAM_FEATURE_SELECTION\nvarying vec4 v_selection_color;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\ngl_FragColor=v_selection_color;\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}",this.scene_id,{name:this.name+" (selection)",defines:t,uniforms:r,blocks:n,block_scopes:i,extensions:s}):this.selection_program=null,this.compile_setup=!0}},addShaderBlock:function(t,e,n){var i=2<arguments.length&&void 0!==n?n:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[t]=this.shaders.blocks[t]||[],this.shaders.blocks[t].push(e),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[t]=this.shaders.block_scopes[t]||[],this.shaders.block_scopes[t].push(i)},removeShaderBlock:function(t){this.shaders.blocks&&(this.shaders.blocks[t]=null)},replaceShaderBlock:function(t,e,n){var i=2<arguments.length&&void 0!==n?n:null;this.removeShaderBlock(t),this.addShaderBlock(t,e,i)},buildDefineList:function(){var t={};if(null!=this.defines)for(var e in this.defines)t[e]=this.defines[e];if(null!=this.shaders&&null!=this.shaders.defines)for(e in this.shaders.defines)t[e]=this.shaders.defines[e];return t},hasRasters:function(){return-1<["color","normal","custom"].indexOf(this.raster)},setupRasters:function(){if(!ur.is_main)return!1;if(!this.hasRasters())return!1;"color"===this.raster?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:"normal"===this.raster&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var t=!1;for(var e in this.sources)if(this.sources[e]instanceof is){t=!0;break}return!!t&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",oc,"Raster"),!0)},buildRasterTextures:function(t,e){var n=this;if(!this.hasRasters())return Promise.resolve(e);var i={};return t.rasters.map((function(t){return n.sources[t]})).filter((function(t){return t})).forEach((function(e,n){var r;e instanceof is&&(r=e.tileTexture(t),i[r.url]=r)})),0===Object.keys(i).length?Promise.resolve(e):hr.postMessage(this.main_thread_target+".loadTextures",i).then((function(n){if(!n||n.length<1)return Ar("trace","Missing texture info for tile ".concat(t.key)),null;if(n.some((function(t){return!t.loaded})))return null;e.uniforms=e.uniforms||{},e.textures=e.textures||[];var r,o,s=n[0].name,a=i[s].coords;return e.uniforms.u_raster=s,e.textures.push(s),t.coords.z>a.z?(r=t.coords.z-a.z,o=Math.pow(2,r),e.uniforms.u_raster_offset=[(t.coords.x%o+o)%o/o,(o-1-t.coords.y%o)/o,1/o]):e.uniforms.u_raster_offset=[0,0,1],e}))},loadTextures:function(t){var e=this;return this.textureManager.createFromObject(this.gl,t).then((function(){return Promise.all(Object.keys(t).map((function(t){return e.textureManager.textures[t]&&e.textureManager.textures[t].load()})).filter((function(t){return t})))})).then((function(t){return t.forEach((function(t){return t.retain()})),t.map((function(t){return{name:t.name,width:t.width,height:t.height,loaded:t.loaded}}))}))},setup:function(){this.setUniforms(),this.material.setupProgram(Vl.current)},setUniforms:function(){var t=Vl.current;t&&t.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,translucent:4,overlay:5},sortByBlendOrderWithinLayers:function(t){var e=[],n={};for(var i in t.forEach((function(t){var e=parseInt(t.name,10)||0;n[e]||(n[e]=[]),n[e].push(t)})),n)e.push.apply(e,Pi(n[i].sort(sc.blendOrderSort)));return e},blendOrderSort:function(t,e){return"opaque"===t.blend||"opaque"===e.blend?"opaque"===t.blend&&"opaque"===e.blend?t.name<e.name?-1:1:"opaque"===t.blend?-1:1:t.blend_order<e.blend_order||!(t.blend_order>e.blend_order)&&(sc.default_blend_orders[t.blend]<sc.default_blend_orders[e.blend]||!(sc.default_blend_orders[t.blend]>sc.default_blend_orders[e.blend])&&t.name<e.name)?-1:1}},ac=rc={};rc.BYTE=5120,rc.UNSIGNED_BYTE=5121,rc.SHORT=5122,rc.UNSIGNED_SHORT=5123,rc.INT=5124,rc.UNSIGNED_INT=5125,rc.FLOAT=5126;var lc,cc=Math.pow(2,16)-1,uc=!1,hc=function(){function t(e){yi(this,t),this.size_=e||1024,this.position_=0,this.ArrayType_=Uint16Array,this.buffer_=new this.ArrayType_(this.size_),this.overflows_=!1}return _i(t,[{key:"push",value:function(t){if(!this.overflows_||uc){if(cc<t){if(this.overflows_=!0,!uc)return;this.ArrayType_===Uint16Array&&(this.ArrayType_=Uint32Array,this.buffer_=new this.ArrayType_(this.buffer_))}this.position_===this.size_&&this.expand_(),this.buffer_[this.position_]=t,this.position_+=1}}},{key:"end",value:function(){if(0===this.position_)return!1;var t=this.buffer_,e=this.position_;return this.buffer_=new this.ArrayType_(this.size_),this.position_=0,this.overflows_=!1,t.subarray(0,e)}},{key:"expand_",value:function(){this.size_=this.size_<<1;var t=new this.ArrayType_(this.size_);t.set(this.buffer_),this.buffer_=t}}]),t}();hc.setElementIndexUint=function(t){uc=t};var fc=(wi(lc={},ac.FLOAT,Float32Array),wi(lc,ac.BYTE,Int8Array),wi(lc,ac.UNSIGNED_BYTE,Uint8Array),wi(lc,ac.INT,Int32Array),wi(lc,ac.UNSIGNED_INT,Uint32Array),wi(lc,ac.SHORT,Int16Array),wi(lc,ac.UNSIGNED_SHORT,Uint16Array),lc),pc=function(){function t(e){var n=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).prealloc,i=void 0===n?500:n;yi(this,t),this.vertex_layout=e,this.vertex_elements=new hc,this.stride=this.vertex_layout.stride,0<t.array_pool.length?(this.vertex_buffer=t.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),Ar("trace","VertexData: reused buffer of bytes ".concat(this.byte_length,", ").concat(this.size," vertices"))):(this.size=i,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}return _i(t,[{key:"setBufferViews",value:function(){var t=this;this.views={},this.views[ac.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach((function(e){var n;null==t.views[e.type]&&(n=fc[e.type],t.views[e.type]=new n(t.vertex_buffer.buffer))}))}},{key:"checkBufferSize",value:function(){var e;this.offset+this.stride>this.byte_length&&(this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size,(e=new Uint8Array(this.byte_length)).set(this.vertex_buffer),t.array_pool.push(this.vertex_buffer),this.vertex_buffer=e,this.setBufferViews(),this.realloc_count++)}},{key:"setAddVertexFunction",value:function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()}},{key:"addVertex",value:function(t){this.checkBufferSize(),this.vertexLayoutAddVertex(t,this.views,this.offset),this.offset+=this.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),Ar("trace","VertexData: ".concat(this.size," vertices total, realloc count ").concat(this.realloc_count)),this}}]),t}();pc.array_pool=[];var dc=function(){function t(e){yi(this,t),this.attribs=e,this.dynamic_attribs=this.attribs.filter((function(t){return!t.static})),this.components=[],this.index={},this.offset={};for(var n=this.stride=0,i=0,r=0;r<this.attribs.length;r++){var o=this.attribs[r];if(null==o.static){o.offset=this.stride,o.byte_size=o.size;var s=0;switch(o.type){case ac.FLOAT:case ac.INT:case ac.UNSIGNED_INT:o.byte_size*=4,s=2;break;case ac.SHORT:case ac.UNSIGNED_SHORT:o.byte_size*=2,s=1}3&o.byte_size&&(o.byte_size+=4-(3&o.byte_size)),this.stride+=o.byte_size;for(var a=o.offset>>s,l=0;l<o.size;l++)this.components.push({type:o.type,shift:s,offset:a++,index:i++});this.index[o.name]=n,n+=o.size,this.offset[o.name]=o.offset}else o.static=Array.isArray(o.static)?o.static:[o.static],o.method="vertexAttrib".concat(o.static.length,"fv")}}return _i(t,[{key:"enable",value:function(e,n,i){for(var r,o,s=0;s<this.attribs.length;s++)r=this.attribs[s],-1!==(o=n.attribute(r.name).location)&&(null==r.static?(t.enabled_attribs[o]&&!i||e.enableVertexAttribArray(o),e.vertexAttribPointer(o,r.size,r.type,r.normalized,this.stride,r.offset),t.enabled_attribs[o]=n):e[r.method]instanceof Function&&(e.enableVertexAttribArray(o),e[r.method](o,r.static),e.disableVertexAttribArray(o),delete t.enabled_attribs[o]));for(o in t.enabled_attribs)this.disableUnusedAttribute(e,o,n)}},{key:"disableUnusedAttribute",value:function(e,n,i){t.enabled_attribs[n]!==i&&(e.disableVertexAttribArray(n),delete t.enabled_attribs[n])}},{key:"createVertexData",value:function(){return new pc(this)}},{key:"getAddVertexFunction",value:function(){return null==this.addVertex&&this.createAddVertexFunction(),this.addVertex}},{key:"createAddVertexFunction",value:function(){var e=Bl(JSON.stringify(this.attribs));if(null==t.add_vertex_funcs[e]){var n,i=["var t, o;"],r=Pi(this.components);r.sort((function(t,e){return t.type!==e.type?t.type-e.type:t.index-e.index}));for(var o=0;o<r.length;o++){var s=r[o];n!==s.type&&(i.push("t = vs[".concat(s.type,"];")),i.push("o = off".concat(s.shift?" >> "+s.shift:"",";")),n=s.type),i.push("t[o + ".concat(s.offset,"] = v[").concat(s.index,"];"))}i=i.join("\n");var a=new Function("v","vs","off",i);t.add_vertex_funcs[e]=a}this.addVertex=t.add_vertex_funcs[e]}}]),t}();dc.enabled_attribs={},dc.add_vertex_funcs={};var gc=[{x:0,y:0},{x:er.tile_scale,y:-er.tile_scale}],mc=[0,0,1,1];function vc(t,e,n){var i=gc[0],r=gc[1];return t[0]<=i.x+n&&e[0]<=i.x+n||t[0]>=r.x-n&&e[0]>=r.x-n||t[1]>=i.y-n&&e[1]>=i.y-n||t[1]<=r.y+n&&e[1]<=r.y+n}function yc(t,e){e=e||0;var n=gc[0],i=gc[1];return t[0]<=n.x+e||t[0]>=i.x-e||t[1]>=n.y-e||t[1]<=i.y+e}var bc=_c;function _c(t,e,n){n=n||2;var i,r,o,s,a,l,c,u=e&&e.length,h=u?e[0]*n:t.length,f=wc(t,0,h,n,!0),p=[];if(!f)return p;if(u&&(f=function(t,e,n,i){var r,o,s,a=[];for(r=0,o=e.length;r<o;r++)(s=wc(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),a.push(function(t){for(var e=t,n=t;e.x<n.x&&(n=e),(e=e.next)!==t;);return n}(s));for(a.sort(Sc),r=0;r<a.length;r++)!function(t,e){var n;(e=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&s<a){if((s=a)===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n.prev;var l,c=n,u=n.x,h=n.y,f=1/0;for(i=n.next;i!==c;)r>=i.x&&i.x>=u&&Ec(o<h?r:s,o,u,h,o<h?s:r,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(r-i.x))<f||l===f&&i.x>n.x)&&Lc(i,t)&&(n=i,f=l),i=i.next;return n}(t,e))&&xc(n=Rc(e,t),n.next)}(a[r],n),n=xc(n,n.next);return n}(t,e,f,n)),t.length>80*n){i=o=t[0],r=s=t[1];for(var d=n;d<h;d+=n)(a=t[d])<i&&(i=a),(l=t[d+1])<r&&(r=l),o<a&&(o=a),s<l&&(s=l);c=Math.max(o-i,s-r)}return kc(f,p,n,i,r,c),p}function wc(t,e,n,i,r){var o,s;if(r===0<Nc(t,e,n,i))for(o=e;o<n;o+=i)s=Oc(o,t[o],t[o+1],s);else for(o=n-i;e<=o;o-=i)s=Oc(o,t[o],t[o+1],s);return s&&Cc(s,s.next)&&(Ic(s),s=s.next),s}function xc(t,e){if(!t)return t;e=e||t;var n,i=t;do{if(n=!1,i.steiner||!Cc(i,i.next)&&0!==Tc(i.prev,i,i.next))i=i.next;else{if(Ic(i),(i=e=i.prev)===i.next)return null;n=!0}}while(n||i!==e);return e}function kc(t,e,n,i,r,o,s){if(t){!s&&o&&function(t,e,n,i){for(var r=t;null===r.z&&(r.z=Ac(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,(r=r.next)!==t;);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,l,c=1;do{for(n=t,o=t=null,s=0;n;){for(s++,i=n,e=a=0;e<c&&(a++,i=i.nextZ);e++);for(l=c;0<a||0<l&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(n=(r=n).nextZ,a--):(i=(r=i).nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(1<s)}(r)}(t,i,r,o);for(var a,l,c=t;t.prev!==t.next;)if(a=t.prev,l=t.next,o?function(t,e,n,i){var r=t.prev,o=t,s=t.next;if(0<=Tc(r,o,s))return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,c=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,u=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,h=Ac(a,l,e,n,i),f=Ac(c,u,e,n,i),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Ec(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=Tc(p.prev,p,p.next))return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&Ec(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=Tc(p.prev,p,p.next))return!1;p=p.prevZ}return!0}(t,i,r,o):function(t){var e=t.prev,n=t,i=t.next;if(0<=Tc(e,n,i))return!1;for(var r=t.next.next;r!==t.prev;){if(Ec(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&0<=Tc(r.prev,r,r.next))return!1;r=r.next}return!0}(t))e.push(a.i/n),e.push(t.i/n),e.push(l.i/n),Ic(t),t=l.next,c=l.next;else if((t=l)===c){s?1===s?kc(t=function(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!Cc(r,o)&&Mc(r,i,i.next,o)&&Lc(r,o)&&Lc(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),Ic(i),Ic(i.next),i=t=o),i=i.next}while(i!==t);return i}(t,e,n),e,n,i,r,o,2):2===s&&function(t,e,n,i,r,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Mc(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Lc(t,e)&&Lc(e,t)&&function(t,e){for(var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;n.y>o!=n.next.y>o&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),(n=n.next)!==t;);return i}(t,e)}(s,a)){var l=Rc(s,a);return s=xc(s,s.next),l=xc(l,l.next),kc(s,e,n,i,r,o),kc(l,e,n,i,r,o)}a=a.next}s=s.next}while(s!==t)}(t,e,n,i,r,o):kc(xc(t),e,n,i,r,o,1);break}}}function Sc(t,e){return t.x-e.x}function Ac(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)/r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ec(t,e,n,i,r,o,s,a){return 0<=(r-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(i-a)-(n-s)*(e-a)&&0<=(n-s)*(o-a)-(r-s)*(i-a)}function Tc(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Cc(t,e){return t.x===e.x&&t.y===e.y}function Mc(t,e,n,i){return Cc(t,e)&&Cc(n,i)||Cc(t,i)&&Cc(n,e)||0<Tc(t,e,n)!=0<Tc(t,e,i)&&0<Tc(n,i,t)!=0<Tc(n,i,e)}function Lc(t,e){return Tc(t.prev,t,t.next)<0?0<=Tc(t,e,t.next)&&0<=Tc(t,t.prev,e):Tc(t,e,t.prev)<0||Tc(t,t.next,e)<0}function Rc(t,e){var n=new Pc(t.i,t.x,t.y),i=new Pc(e.i,e.x,e.y),r=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=r).prev=n,(i.next=n).prev=i,(o.next=i).prev=o,i}function Oc(t,e,n,i){var r=new Pc(t,e,n);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function Ic(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Pc(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nc(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}_c.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(Nc(t,0,o,n));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;s-=Math.abs(Nc(t,c,u,n))}var h=0;for(a=0;a<i.length;a+=3){var f=i[a]*n,p=i[a+1]*n,d=i[a+2]*n;h+=Math.abs((t[f]-t[d])*(t[1+p]-t[1+f])-(t[f]-t[p])*(t[1+d]-t[1+f]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},_c.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);0<r&&(i+=t[r-1].length,n.holes.push(i))}return n};var Dc=[0,0,1];function jc(t,e,n,i){var r,o,s,a,l,c=i.texcoord_index,u=i.texcoord_scale,h=i.texcoord_normalize,f=e.vertex_elements;c&&(h=h||1,o=(r=Ii(u||mc,4))[0],s=r[1],a=r[2],l=r[3]);for(var p,d=0,g=t.length,m=0;m<g;m++){var v,y,b,_,w,x=e.vertex_count,k=t[m];c&&(y=(v=Ii(er.findBoundingBox(k),4))[0],b=v[1],_=(a-o)/(v[2]-y),w=(l-s)/(v[3]-b));for(var S=0;S<k.length;S++)for(var A=k[S],E=0;E<A.length;E++){var T=A[E];n[0]=T[0],n[1]=T[1],c&&(n[c+0]=((T[0]-y)*_+o)*h,n[c+1]=((T[1]-b)*w+s)*h),e.addVertex(n)}for(var C=(p=bc.flatten(k),bc(p.vertices,p.holes,p.dimensions)),M=0;M<C.length;M++)f.push(x+C[M]);d+=C.length/3}return d}var zc="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;attribute vec4 a_position;attribute vec4 a_color;\n#ifdef TANGRAM_NORMAL_ATTRIBUTE\nattribute vec3 a_normal;\n#define TANGRAM_NORMAL a_normal\n#else\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nattribute vec2 a_extrude;attribute vec2 a_offset;attribute vec2 a_scaling;uniform float u_v_scale_adjust;\n#endif\nvarying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nattribute vec2 a_texcoord;varying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvoid main(){\n#pragma tangram: setup\n#ifdef TANGRAM_TEXTURE_COORDS\nv_texcoord=a_texcoord;\n#ifdef TANGRAM_EXTRUDE_LINES\nv_texcoord.y*=u_v_scale_adjust;\n#endif\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nvec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.);\n#ifdef TANGRAM_EXTRUDE_LINES\nvec2 extrude=a_extrude.xy;vec2 offset=a_offset.xy;float dz=clamp(u_map_position.z-u_tile_origin.z,0.,4.);dz+=step(1.,dz)*(1.-dz)+mix(0.,2.,clamp((dz-2.)/2.,0.,1.));float mdz=(dz-0.5)*2.;extrude-=extrude*UNPACK_SCALING(a_scaling.x)*mdz;float dwdz=UNPACK_SCALING(a_scaling.y);float sdwdz=sign(step(0.,dwdz)-0.5);offset-=offset*abs(dwdz)*((1.-step(0.,sdwdz))-(dz*-sdwdz));float ssz=exp2(-dz-(u_tile_origin.z-u_tile_origin.w));extrude*=ssz;offset*=ssz;\n#ifdef TANGRAM_BLOCK_WIDTH\nfloat width=1.;\n#pragma tangram: width\nextrude*=width;\n#endif\nposition.xy+=extrude+offset;\n#endif\nv_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);v_color=a_color;\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#if defined(SNAP_TO_PIXEL_GRID)\nsnapToPixelGrid(position);\n#endif\ngl_Position=position;}",$c="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_EXTRUDE_LINES\nuniform bool u_has_line_texture;uniform sampler2D u_texture;uniform float u_texture_ratio;uniform vec4 u_dash_background_color;\n#endif\n#define TANGRAM_NORMAL v_normal\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nvarying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#pragma tangram: utils\nvoid main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_COLOR\ncolor*=sampleRaster();\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nif(u_has_line_texture){vec2 _line_st=vec2(v_texcoord.x,fract(v_texcoord.y/u_texture_ratio));vec4 _line_color=texture2D(u_texture,_line_st);if(_line_color.a<TANGRAM_ALPHA_TEST){\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)\nif(u_dash_background_color.a==0.){discard;}color=u_dash_background_color;\n#else\ncolor=vec4(u_dash_background_color.rgb,color.a*step(TANGRAM_EPSILON,u_dash_background_color.a));\n#endif\n}else{color*=_line_color;}}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_NORMAL\nnormal=normalize(sampleRaster().rgb*2.-1.);\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\ngl_FragColor=color;}",Fc=Object.create(sc);Object.assign(Fc,{name:"polygons",built_in:!0,vertex_shader_src:zc,fragment_shader_src:$c,selection:!0,init:function(){sc.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0)},vertexLayoutForMeshVariant:function(){var t;return this.vertex_layout||(t=[{name:"a_position",size:4,type:ac.SHORT,normalized:!1},{name:"a_normal",size:3,type:ac.BYTE,normalized:!0},{name:"a_color",size:4,type:ac.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:ac.UNSIGNED_BYTE,normalized:!0}],this.texcoords&&t.push({name:"a_texcoord",size:2,type:ac.UNSIGNED_SHORT,normalized:!0}),this.vertex_layout=new dc(t)),this.vertex_layout},_parseFeature:function(t,e,n){var i=this.feature_style;return i.color=this.parseColor(e.color,n),i.color?(i.z=e.z&&_o.evalCachedDistanceProperty(e.z,n)||_o.defaults.z,i.z*=er.height_scale,i.extrude=_o.evalProperty(e.extrude,n),i.extrude&&(!0===i.extrude?(i.height=void 0!==t.properties.height?t.properties.height:_o.defaults.height,i.min_height=void 0!==t.properties.min_height?t.properties.min_height:_o.defaults.min_height):"number"==typeof i.extrude?(i.height=i.extrude,i.min_height=0):Array.isArray(i.extrude)&&(i.min_height=i.extrude[0],i.height=i.extrude[1]),i.height*=er.height_scale,i.min_height*=er.height_scale),i.tile_edges=e.tile_edges,i):null},_preprocess:function(t){return t.color=_o.createColorPropertyCache(t.color),t.z=_o.createPropertyCache(t.z,_o.parseUnits),t},makeVertexTemplate:function(t){var e=0;return this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=t.z||0,this.vertex_template[e++]=this.scaleOrder(t.order),this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=127,this.vertex_template[e++]=255*t.color[0],this.vertex_template[e++]=255*t.color[1],this.vertex_template[e++]=255*t.color[2],this.vertex_template[e++]=255*t.color[3],this.selection&&(this.vertex_template[e++]=255*t.selection_color[0],this.vertex_template[e++]=255*t.selection_color[1],this.vertex_template[e++]=255*t.selection_color[2],this.vertex_template[e++]=255*t.selection_color[3]),this.texcoords&&(this.vertex_template[e++]=0,this.vertex_template[e++]=0),this.vertex_template},buildPolygons:function(t,e,n,i){var r=this.makeVertexTemplate(e),o={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!e.tile_edges,tile_edge_tolerance:er.tile_scale*i.tile.pad_scale*4,winding:i.winding};return e.extrude&&e.height?function(t,e,n,i,r,o,s,a,l){var c=l.remove_tile_edges,u=l.tile_edge_tolerance,h=l.texcoord_index,f=l.texcoord_scale,p=l.texcoord_normalize,d=l.winding,g=e+(i||0),m=e+n;o[2]=m;var v,y,b,_,w,x,k=jc(t,r,o,{texcoord_index:h,texcoord_scale:f,texcoord_normalize:p}),S=r.vertex_elements,A=r.vertex_count;h&&(p=p||1,y=(v=Ii(f||mc,4))[0],b=v[1],_=v[2],x=[[y,w=v[3]],[y,b],[_,b],[_,w]]);for(var E=t.length,T=0;T<E;T++)for(var C=t[T],M=0;M<C.length;M++)for(var L=C[M],R=0;R<L.length-1;R++)if(!c||!vc(L[R],L[R+1],u)){var O,I=void 0,P=[[L[O="CCW"===d?(I=R)+1:(I=R+1,R)][0],L[O][1],m],[L[O][0],L[O][1],g],[L[I][0],L[I][1],g],[L[I][0],L[I][1],m]],N=Jl.normalize([L[O][0]-L[I][0],L[O][1]-L[I][1],0]),D=Jl.cross(Dc,N);o[s+0]=127*D[0],o[s+1]=127*D[1],o[s+2]=127*D[2];for(var j=0;j<P.length;j++)o[0]=P[j][0],o[1]=P[j][1],o[2]=P[j][2],h&&(o[h+0]=x[j][0]*p,o[h+1]=x[j][1]*p),r.addVertex(o);S.push(A+0),S.push(A+1),S.push(A+2),S.push(A+2),S.push(A+3),S.push(A+0),A+=4,k+=2}return k}(t,e.z,e.height,e.min_height,n.vertex_data,r,this.vertex_layout.index.a_normal,0,o):jc(t,n.vertex_data,r,o)}});var Bc=[0,0],Hc={butt:0,square:1,round:2},Uc={miter:0,bevel:1,round:2},Gc=3,Vc=1,Wc=1,qc=5,Kc=er.tile_scale,Yc=[0,0],Xc=[1,0],Zc=[.5,0];function Jc(t,e){if(!(t.length<2)){var n,i,r=e.join_type,o=e.cap_type,s=e.closed_polygon,a=e.remove_tile_edges,l=e.tile_edge_tolerance,c=e.v_scale,u=e.miter_len_sq,h=e.crop_by_tile,f=null!=e.texcoord_index,p=0;if(s&&r===Uc.miter){var d=function(t){if(yc(t[0]))return 0;for(var e=0;e<t.length;e++)if(yc(t[t.length-1-e]))return t.length-1-e;return 0}(t);if(0!==d){var g=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=(i+e)%t.length;0!=r&&n.push(t[r])}return n.push(n[0]),n}(t,d);return e.extra_lines=e.extra_lines||[],void e.extra_lines.push(g)}}var m=0,v=t.length-1,y=0;for(k=t[m],S=t[m+1];Jl.isEqual(k,S);)if(k=S,S=t[1+ ++m],y++,m===t.length-1)return;for(;Jl.isEqual(t[v],t[v-1]);)if(y++,0===--v)return;if(!(t.length<2+y))if(i=Jl.normalize(Jl.perp(k,S)),a&&vc(k,S,l)){var b=Qc(t,m,l);b&&(e.extra_lines=e.extra_lines||[],e.extra_lines.push(b))}else{s?function(t,e,n,i,r){void 0===i||yc(t)&&!r.crop_by_tile?(ru(t,n,n,1,0,r,1),ru(t,n,n,0,0,r,-1)):i===Uc.miter?eu(0,t,e,n,r.miter_len_sq,!0,r):nu(i,0,t,e,n,!0,r)}(k,n=Jl.normalize(Jl.perp(t[v-1],k)),i,r,e):(!h&&yc(k)||(au(k,p,i,o,!0,e),f&&o!==Hc.butt&&(p+=.5*c*e.texcoord_width)),ru(k,i,i,1,p,e,1),ru(k,i,i,0,p,e,-1)),f&&(p+=c*Jl.length(Jl.sub(S,k)));for(var _=m+1;_<v;_++){var w=_,x=_+1,k=t[w],S=t[x];if(!Jl.isEqual(k,S)){if(a&&vc(k,S,l)){ru(k,i,i,1,p,e,1),ru(k,i,i,0,p,e,-1),iu(1,e);var A=Qc(t,w+1,l);return void(A&&(e.extra_lines=e.extra_lines||[],e.extra_lines.push(A)))}n=i,i=Jl.normalize(Jl.perp(k,S)),r===Uc.miter?eu(p,k,n,i,u,!1,e):nu(r,p,k,n,i,!1,e),f&&(p+=c*Jl.length(Jl.sub(S,k)))}}k=S,n=i,s?function(t,e,n,i,r,o){var s;yc(t)&&!o.crop_by_tile?(ru(t,e,e,1,r,o,1),ru(t,e,e,0,r,o,-1)):(s=tu(e,n),i===Uc.miter&&Jl.lengthSq(s)>o.miter_len_sq&&(i=Uc.bevel),i===Uc.miter?(ru(t,s,e,1,r,o,1),ru(t,s,e,0,r,o,-1)):(ru(t,e,e,1,r,o,1),ru(t,e,e,0,r,o,-1))),iu(1,o)}(k,n,i=Jl.normalize(Jl.perp(k,t[1])),r,p,e):(ru(k,n,i,1,p,e,1),ru(k,n,i,0,p,e,-1),iu(1,e),!h&&yc(k)||au(k,p,n,o,!1,e))}}}function Qc(t,e,n){for(var i=e;t[i+1]&&vc(t[i],t[i+1],n);)i++;return 2<=t.length-i&&t.slice(i)}function tu(t,e){var n=Jl.normalize(Jl.add(t,e)),i=2/(1+Math.abs(Jl.dot(t,n)));return Jl.mult(n,i*i)}function eu(t,e,n,i,r,o,s){var a=tu(n,i);Jl.lengthSq(a)>r?nu(Uc.bevel,t,e,n,i,o,s):(ru(e,a,a,1,t,s,1),ru(e,a,a,0,t,s,-1),o||iu(1,s))}function nu(t,e,n,i,r,o,s){var a=tu(i,r),l=0<r[0]*i[1]-r[1]*i[0];null!=s.texcoord_index&&(Yc[1]=e,Xc[1]=e),l?(ru(n,a,a,1,e,s,1),ru(n,i,a,0,e,s,-1),o||iu(1,s),su(n,Jl.neg(i),a,Jl.neg(r),a,Yc,Xc,Yc,!1,t===Uc.bevel,s),ru(n,a,a,1,e,s,1),ru(n,r,a,0,e,s,-1)):(ru(n,i,a,1,e,s,1),ru(n,a,a,0,e,s,-1),o||iu(1,s),su(n,i,Jl.neg(a),r,a,Xc,Yc,Xc,!1,t===Uc.bevel,s),ru(n,r,a,1,e,s,1),ru(n,a,a,0,e,s,-1))}function iu(t,e){for(var n=e.vertex_data.vertex_elements,i=e.vertex_data.vertex_count-2*t-2,r=0;r<t;r++)n.push(i+2*r+2),n.push(i+2*r+1),n.push(i+2*r),n.push(i+2*r+2),n.push(i+2*r+3),n.push(i+2*r+1),e.geom_count+=2}function ru(t,e,n,i,r,o,s){var a=o.vertex_template,l=o.vertex_data;a[0]=t[0],a[1]=t[1];var c=o.half_width*s;a[o.extrude_index+0]=e[0]*c,a[o.extrude_index+1]=e[1]*c,o.offset&&(a[o.offset_index+0]=n[0]*o.offset,a[o.offset_index+1]=n[1]*o.offset),null!=o.texcoord_index&&(a[o.texcoord_index+0]=i*o.texcoord_normalize,a[o.texcoord_index+1]=r*o.texcoord_normalize),l.addVertex(a)}var ou=[0,0];function su(t,e,n,i,r,o,s,a,l,c,u){for(var h=e[0]*i[1]-e[1]*i[0],f=Jl.dot(e,i),p=Math.atan2(h,f);p>=Math.PI;)p-=2*Math.PI;if(c)d=1;else{var d=function(t,e){t<0&&(t=-t);var n=e>2*qc?Math.log2(e/qc):1;return Math.ceil(t/Math.PI*n)}(p,u.half_width);if(d<1)return}var g=u.vertex_data.vertex_count,m=u.vertex_data.vertex_elements;ru(t,n,r,s[0],s[1],u,1),ru(t,e,r,o[0],o[1],u,1);var v,y,b=e,_=null!=u.texcoord_index;_&&(l?v=Jl.sub(o,s):(ou=Jl.copy(o),y=Jl.div(Jl.sub(a,o),d)));for(var w,x=p/d,k=p<0?-1:1,S=0<h?(w=2,1):(w=1,2),A=0;A<d;A++)0===A&&p<0&&(b=Jl.neg(b)),b=Jl.rot(b,x),_&&(l?(v=Jl.rot(v,x),ou[0]=v[0]+s[0],ou[1]=v[1]*u.texcoord_width*u.v_scale+s[1]):ou=Jl.add(ou,y)),ru(t,b,r,ou[0],ou[1],u,k),m.push(g+A+w),m.push(g),m.push(g+A+S)}function au(t,e,n,i,r,o){var s,a=Jl.neg(n),l=null!=o.texcoord_index;switch(i){case Hc.square:r?(s=[n[1],-n[0]],ru(t,Jl.add(n,s),n,1,e,o,1),ru(t,Jl.add(a,s),n,0,e,o,1),l&&(e+=.5*o.texcoord_width*o.v_scale),ru(t,n,n,1,e,o,1),ru(t,a,n,0,e,o,1)):(s=[-n[1],n[0]],ru(t,n,n,1,e,o,1),ru(t,a,n,0,e,o,1),l&&(e+=.5*o.texcoord_width*o.v_scale),ru(t,Jl.add(n,s),n,1,e,o,1),ru(t,Jl.add(a,s),n,0,e,o,1)),iu(1,o);break;case Hc.round:var c,u,h=Yc,f=Xc,p=Zc;r?(c=n,u=a,l&&(e+=.5*o.texcoord_width*o.v_scale,h=Xc,f=Yc,p=Zc)):(c=a,u=n),l&&(Yc[1]=e,Xc[1]=e,Zc[1]=e),su(t,c,Bc,u,n,h,p,f,!0,!1,o);break;case Hc.butt:return}}var lu=[255,255,255,255],cu=[0,0,0,0],uu=Object.create(sc);function hu(t,e,n,i,r,o){for(var s={closed:o,vertex_data:n,vertex_template:i,half_width:e/2,vertex_layout_index:r,geom_count:0},a=0,l=t.length;a<l;a++)!function(t,e){if(!(t.length<2)){for(var n=[t[0]],i=0,r=[],o=[],s=1,a=t.length;s<a;s++){var l,c;t[s][0]===t[s-1][0]&&t[s][1]===t[s-1][1]||(n.push(t[s]),l=Jl.sub(t[s],t[s-1]),c=Jl.length(l),r.push(l),o.push([i,i+c]),i+=c)}if(!(n.length<2)){var u=0,h=r[r.length-1],f=r[0],p=r[1],d=[0,0];2<n.length&&(e.closed&&(d[0]=Jl.signedAngleBetween(h,f)),d[1]=Jl.signedAngleBetween(f,p));var g=n[0],m=o[0];e.closed?(du(g,e,u++,m,i,d,[h,f]),du(g,e,u++,m,i,d,[h,f])):(du(g,e,u++,m,i,d,[f,f]),du(g,e,u++,m,i,d,[f,f]));for(var v=1,y=n.length-1;v<y;v++)g=n[v],h=r[v-1],f=r[v],p=r[v+1],du(g,e,u++,m=o[v-1],i,d,[h,f]),du(g,e,u++,m,i,d,[h,f]),fu(e),m=o[v],d[0]=d[1],d[1]=v!==y-1?Jl.signedAngleBetween(f,p):e.closed?Jl.signedAngleBetween(f,r[0]):0,du(g,e,u++,m,i,d,[h,f]),du(g,e,u++,m,i,d,[h,f]);g=n[n.length-1],m=o[o.length-1],f=r[r.length-1],e.closed?(du(g,e,u++,m,i,d,[f,r[0]]),du(g,e,u++,m,i,d,[f,r[0]])):(du(g,e,u++,m,i,d,[f,f]),du(g,e,u++,m,i,d,[f,f])),fu(e)}}}(t[a],s);return s.geom_count}function fu(t){var e=t.vertex_data.vertex_elements,n=t.vertex_data.vertex_count-4;e.push(2+n),e.push(1+n),e.push(n),e.push(2+n),e.push(3+n),e.push(1+n),t.geom_count+=2}uu.vertex_layouts=[[],[]],uu.variants={},uu.dash_textures={},Object.assign(uu,{name:"lines",built_in:!0,vertex_shader_src:zc,fragment_shader_src:$c,selection:!0,init:function(){sc.init.apply(this,arguments),this.styles=this.styles||{},this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style},calcDistance:function(t,e){return t&&_o.evalCachedDistanceProperty(t,e)||0},calcDistanceNextZoom:function(t,e){e.zoom++;var n=this.calcDistance(t,e);return e.zoom--,n},calcWidth:function(t,e,n){var i=this.calcDistance(t.width,n);if(!(i<0)){var r,o=t.next_width?this.calcDistanceNextZoom(t.next_width,n):i/2;return!(0===i&&0===o||o<0)&&(e.width_unscaled=i,e.next_width_unscaled=o,t.next_width?(r=.5*(i+(o*=2)),e.width=r*n.units_per_meter_overzoom,e.width_scale=1-o/r):(e.width=i*n.units_per_meter_overzoom,e.width_scale=0),t.texcoords&&(t.inline_texcoord_width?e.texcoord_width=t.inline_texcoord_width:e.texcoord_width=(e.width_unscaled||e.next_width_unscaled)*n.units_per_meter_overzoom/n.tile.overzoom2),!0)}},calcOffset:function(t,e,n){var i,r;t.offset_precalc?(e.offset=t.offset_precalc,e.offset_scale=t.offset_scale_precalc):t.offset?(i=this.calcDistance(t.offset,n),t.next_offset?(r=2*this.calcDistanceNextZoom(t.next_offset,n),Math.abs(i)>=Math.abs(r)?(e.offset=i*n.units_per_meter_overzoom,e.offset_scale=0!==i?1-r/i:0):(e.offset=r*n.units_per_meter_overzoom,e.offset_scale=0!=r?-1*(1-i/r):0)):(e.offset=i*n.units_per_meter_overzoom,e.offset_scale=0)):(e.offset=0,e.offset_scale=0),_o.evalProperty(t.offset_reverse,n)&&(e.offset*=-1)},_parseFeature:function(t,e,n){var i,r,o=this.feature_style;if(!1!==this.calcWidth(e,o,n)&&(this.calcOffset(e,o,n),o.color=this.parseColor(e.color,n),o.color))return o.variant=e.variant,o.z=e.z&&_o.evalCachedDistanceProperty(e.z||0,n)||_o.defaults.z,o.height=t.properties.height||_o.defaults.height,o.extrude=_o.evalProperty(e.extrude,n),o.extrude&&("number"==typeof o.extrude?o.height=o.extrude:Array.isArray(o.extrude)&&(o.height=o.extrude[1])),o.extrude&&o.height&&(o.z+=o.height),o.z*=er.height_scale,o.height*=er.height_scale,o.cap=_o.evalProperty(e.cap,n),o.join=_o.evalProperty(e.join,n),o.miter_limit=_o.evalProperty(e.miter_limit,n),o.tile_edges=e.tile_edges,o.outline=o.outline||{width:{},next_width:{},preprocessed:!0},e.outline&&!1!==e.outline.visible&&e.outline.color&&e.outline.width?(i=2*this.calcDistance(e.outline.width,n),r=2*this.calcDistanceNextZoom(e.outline.next_width,n),0==i&&0==r||i<0||r<0?(o.outline.width.value=null,o.outline.next_width.value=null,o.outline.color=null,o.outline.inline_texcoord_width=null,o.outline.texcoords=!1):(o.outline.width.value=i+o.width_unscaled,o.outline.next_width.value=r+o.next_width_unscaled,o.outline.inline_texcoord_width=o.texcoord_width,o.outline.offset_precalc=o.offset,o.outline.offset_scale_precalc=o.offset_scale,o.outline.color=e.outline.color,o.outline.cap=e.outline.cap,o.outline.join=e.outline.join,o.outline.miter_limit=e.outline.miter_limit,o.outline.texcoords=e.outline.texcoords,o.outline.style=e.outline.style,o.outline.variant=e.outline.variant,e.outline.order?o.outline.order=this.parseOrder(e.outline.order,n):o.outline.order=o.order,o.outline.order>o.order&&(o.outline.order=o.order),o.outline.order-=.5,o.outline.variant_order=0)):(o.outline.width.value=null,o.outline.next_width.value=null,o.outline.color=null,o.outline.inline_texcoord_width=null),o},_preprocess:function(t,e){var n,i=this.sources[e]?this.sources[e].config.uid:"";return t.color=_o.createColorPropertyCache(t.color),t.width=_o.createPropertyCache(t.width,_o.parseUnits),t.width&&t.width.type!==_o.CACHE_TYPE.STATIC&&(t.next_width=_o.createPropertyCache(t.width,_o.parseUnits)),t.offset=t.offset&&_o.createPropertyCache(t.offset,_o.parseUnits),t.offset&&t.offset.type!==_o.CACHE_TYPE.STATIC&&(t.next_offset=_o.createPropertyCache(t.offset,_o.parseUnits)),t.z=_o.createPropertyCache(t.z,_o.parseUnits),t.dash=void 0!==t.dash?t.dash:this.dash,t.dash_key=t.dash&&this.dashTextureKey(t.dash,i),t.dash_background_color=void 0!==t.dash_background_color?t.dash_background_color:this.dash_background_color,t.dash_background_color=t.dash_background_color&&_o.parseColor(t.dash_background_color),t.texture_merged=t.dash_key||(void 0!==t.texture?t.texture:this.texture),t.texcoords=this.texcoords||t.texture_merged?1:0,this.computeVariant(t),t.outline&&(t.outline.style=t.outline.style||this.name,t.outline.color=_o.createColorPropertyCache(t.outline.color),t.outline.width=_o.createPropertyCache(t.outline.width,_o.parseUnits),t.outline.next_width=_o.createPropertyCache(t.outline.width,_o.parseUnits),t.outline.cap=t.outline.cap||t.cap,t.outline.join=t.outline.join||t.join,t.outline.miter_limit=t.outline.miter_limit||t.miter_limit,t.outline.offset=t.offset,(n=this.styles[t.outline.style])?(t.outline.dash=void 0!==t.outline.dash?t.outline.dash:n.dash,t.outline.texture=void 0!==t.outline.texture?t.outline.texture:n.texture,null!=t.outline.dash?(t.outline.dash_key=t.outline.dash&&this.dashTextureKey(t.outline.dash,i),t.outline.texture_merged=t.outline.dash_key):null===t.outline.dash||null!=t.outline.texture?(t.outline.dash_key=null,t.outline.texture_merged=t.outline.texture):(t.outline.dash=t.dash,t.outline.dash_key=t.outline.dash&&this.dashTextureKey(t.outline.dash,i),t.outline.texture_merged=t.outline.dash_key),t.outline.dash_background_color=void 0!==t.outline.dash_background_color?t.outline.dash_background_color:n.dash_background_color,t.outline.dash_background_color=void 0!==t.outline.dash_background_color?t.outline.dash_background_color:t.dash_background_color,t.outline.dash_background_color=t.outline.dash_background_color&&_o.parseColor(t.outline.dash_background_color),t.outline.texcoords=n.texcoords||t.outline.texture_merged?1:0,this.computeVariant(t.outline)):(Ar({level:"warn",once:!0},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"line 'outline' specifies non-existent draw style '".concat(t.outline.style,"' (or maybe the style is ")+"defined but is missing a 'base' or has another error), skipping outlines in layer"),t.outline=null)),t},dashTextureKey:function(t,e){return"__dash_"+e+"_"+this.scene_id+"_"+JSON.stringify(t)},getDashTexture:function(t,e){var n,i=this.dashTextureKey(t,this.sources[e].config.uid);null==uu.dash_textures[i]&&(uu.dash_textures[i]=!0,n=function(t,e){var n=1<arguments.length&&void 0!==e?e:{},i=n.dash_color||lu,r=n.background_color||cu,o=t,s=n.scale||1;o.length%2==1&&Array.prototype.push.apply(o,o);for(var a=!0,l=[],c=0;c<o.length;c++){for(var u=Math.floor(o[c]*s),h=0;h<u;h++)Array.prototype.push.apply(l,a?i:r);a=!a}return{pixels:l=new Uint8Array(l),length:l.length/4}}(t,{scale:20}),this.textureManager.create(this.gl,i,{data:n.pixels,height:n.length,width:1,filtering:"nearest"}))},endData:function(t){var e=this;return sc.endData.call(this,t).then((function(n){if(n){n.uniforms.u_has_line_texture=!1,n.uniforms.u_texture=e.textureManager.default,n.uniforms.u_v_scale_adjust=er.tile_scale;var i=[];for(var r in n.meshes)!function(r){var o,s,a=n.meshes[r].variant;a.texture&&((o=n.meshes[r].uniforms=n.meshes[r].uniforms||{}).u_has_line_texture=!0,o.u_texture=a.texture,o.u_texture_ratio=1,a.dash&&(o.u_v_scale_adjust=20*er.tile_scale,o.u_dash_background_color=a.dash_background_color||[0,0,0,0]),a.dash_key&&null==uu.dash_textures[a.dash_key]&&(uu.dash_textures[a.dash_key]=!0,hr.postMessage(e.main_thread_target+".getDashTexture",a.dash,t.source)),null==e.textureManager.textures[a.texture]?i.push(e.textureManager.syncTexturesToWorker([a.texture]).then((function(t){var e=t[a.texture];e&&(o.u_texture_ratio=e.height/e.width)}))):(s=e.textureManager.textures[a.texture],o.u_texture_ratio=s.height/s.width))}(r);return t.mesh_data[e.name]=n,Promise.all(i).then((function(){return n}))}return n}))},computeVariant:function(t){var e=t.offset?1:0;t.dash_key&&(e+=t.dash_key,t.dash_background_color&&(e+=t.dash_background_color)),t.texture_merged&&(e+=t.texture_merged),e=Bl(e+="/"+t.texcoords),t.variant=e,null==uu.variants[e]&&(uu.variants[e]={key:e,order:t.variant_order,offset:t.offset?1:0,texcoords:t.texcoords,texture:t.texture_merged,dash:t.dash,dash_key:t.dash_key,dash_background_color:t.dash_background_color})},vertexLayoutForMeshVariant:function(t){var e;return null==uu.vertex_layouts[t.key]&&(e=[{name:"a_position",size:4,type:ac.SHORT,normalized:!1},{name:"a_extrude",size:2,type:ac.SHORT,normalized:!1},{name:"a_offset",size:2,type:ac.SHORT,normalized:!1,static:t.offset?null:[0,0]},{name:"a_scaling",size:2,type:ac.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:ac.UNSIGNED_SHORT,normalized:!0,static:t.texcoords?null:[0,0]},{name:"a_color",size:4,type:ac.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:ac.UNSIGNED_BYTE,normalized:!0}],uu.vertex_layouts[t.key]=new dc(e)),uu.vertex_layouts[t.key]},meshVariantTypeForDraw:function(t){return uu.variants[t.variant]},makeVertexTemplate:function(t,e){var n=0;return this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=t.z||0,this.vertex_template[n++]=this.scaleOrder(t.order),this.vertex_template[n++]=0,this.vertex_template[n++]=0,e.variant.offset&&(this.vertex_template[n++]=0,this.vertex_template[n++]=0),this.vertex_template[n++]=1024*t.width_scale,this.vertex_template[n++]=1024*t.offset_scale,e.variant.texcoords&&(this.vertex_template[n++]=0,this.vertex_template[n++]=0),this.vertex_template[n++]=255*t.color[0],this.vertex_template[n++]=255*t.color[1],this.vertex_template[n++]=255*t.color[2],this.vertex_template[n++]=255*t.color[3],this.selection&&(this.vertex_template[n++]=255*t.selection_color[0],this.vertex_template[n++]=255*t.selection_color[1],this.vertex_template[n++]=255*t.selection_color[2],this.vertex_template[n++]=255*t.selection_color[3]),this.vertex_template},buildLines:function(t,e,n,i,r){var o;this.feature_style=this.outline_feature_style,!e.outline||null==e.outline.color||null==e.outline.width.value||(o=this.styles[e.outline.style])&&o.addFeature(i.feature,e.outline,i),this.feature_style=this.inline_feature_style;var s=n.vertex_data,a=s.vertex_layout,l=this.makeVertexTemplate(e,n);return function(t,e,n,i,r){var o,s,a=r.texcoord_index,l=r.texcoord_width,c=r.texcoord_ratio,u=r.texcoord_normalize,h=r.join,f=r.cap,p=r.miter_limit,d=h?Uc[h]:Uc.miter;d===Uc.miter&&(o=(p=p||Gc)*p),a&&(u=u||Vc,s=1/(l*(c=c||Wc)*Kc));for(var g={closed_polygon:r.closed_polygon,remove_tile_edges:r.remove_tile_edges,tile_edge_tolerance:r.tile_edge_tolerance,miter_len_sq:o,join_type:d,cap_type:f?Hc[f]:Hc.butt,vertex_data:n,vertex_template:i,half_width:e/2,extrude_index:r.extrude_index,offset_index:r.offset_index,v_scale:s,texcoord_index:a,texcoord_width:l,texcoord_normalize:u,offset:r.offset,geom_count:0,crop_by_tile:r.crop_by_tile},m=0;m<t.length;m++)Jc(t[m],g);if(g.extra_lines)for(var v=0;v<g.extra_lines.length;v++)Jc(g.extra_lines[v],g);return g.geom_count}(t,e.width,s,l,{cap:e.cap,join:e.join,miter_limit:e.miter_limit,extrude_index:a.index.a_extrude,offset_index:a.index.a_offset,texcoord_index:a.index.a_texcoord,texcoord_width:e.texcoord_width,texcoord_normalize:65535,closed_polygon:r&&r.closed_polygon,remove_tile_edges:!e.tile_edges&&r&&r.remove_tile_edges,tile_edge_tolerance:er.tile_scale*i.tile.pad_scale*2,offset:e.offset,crop_by_tile:this.crop_by_tile})},buildPolygons:function(t,e,n,i){for(var r=0,o=0;o<t.length;o++)r+=this.buildLines(t[o],e,n,i,{closed_polygon:!0,remove_tile_edges:!this.crop_by_tile});return r}});var pu=[[1,1],[1,-1],[-1,1],[-1,-1]];function du(t,e,n,i,r,o,s){var a,l=e.vertex_template,c=e.vertex_data;gu(e,"a_position",t),gu(e,"a_width",e.half_width),e.vertex_layout_index.a_barycentric&&((a=[0,0,0])[n%3]=1,gu(e,"a_barycentric",a)),gu(e,"a_tangents",s[0].concat(s[1])),gu(e,"a_segment",i),gu(e,"a_texcoord",pu[n%4]),gu(e,"a_length",r),gu(e,"a_closed",e.closed?1:0),gu(e,"a_angles",o),c.addVertex(l)}function gu(t,e,n){var i=n.length,r=t.vertex_template,o=t.vertex_layout_index[e],s=0;if(i)for(;s!==i;)r[o+s]=n[s],s++;else r[o+s]=n}function mu(t,e){for(var n=t.reduce((function(t,e){return t+e})),i=0,r=[],o=0,s=t.length;o<=s;o+=2){var a=Math.max(1e-4,t[o%s]),l=Math.max(1e-4,t[(o+1)%s]);r.push(i,i+a),i+=a+l}for(var c=new Uint8Array(4*e),u=0,h=0;h<e;h++)!function(t){var i=n*t/(e-1),o=function(t){for(var e=t[0],n=0,i=1,r=t.length;i<r;i++)t[i]<e&&(e=t[n=i]);return n}(r.map((function(t){return Math.abs(t-i)}))),s=void 0,a=void 0,l=o%2==0?(s=i<=r[o]?1:0,a=r[o],r[o+1]):(s=i>r[o]?2:0,a=r[o-1],r[o]);c[u++]=r[o],c[u++]=s,c[u++]=a,c[u++]=l}(h);return c}var vu=Object.create(sc),yu={round:1,"arrow-tail":2,"arrow-head":3,square:4,butt:5},bu={miter:0,round:1,bevel:2},_u=yu.round,wu=bu.miter,xu=[0,0],ku="antialias join linecaps miter_limit dash_index dash dash_caps dash_phase".split(" ");Object.assign(vu,{name:"pattern-lines",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform sampler2D u_uniforms;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform vec3 u_map_position;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_index;uniform vec2 u_dash_caps;uniform float u_dash_phase;uniform float u_dash_period;attribute vec4 a_position;attribute vec4 a_color;attribute float a_width;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nattribute vec3 a_barycentric;\n#endif\nattribute vec2 a_normal;attribute float a_length;attribute vec2 a_segment;attribute vec2 a_texcoord;attribute vec2 a_angles;attribute vec4 a_tangents;attribute float a_closed;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#ifndef TANGRAM_HEIGHT_SCALE\nfloat TANGRAM_HEIGHT_SCALE=16.0;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\nconst float PI=3.141592653589793;const float THETA=15.0*PI/180.0;float cross(in vec2 v1,in vec2 v2){return v1.x*v2.y-v1.y*v2.x;}float signed_distance(in vec2 v1,in vec2 v2,in vec2 v3){return cross(v2-v1,v1-v3)/length(v2-v1);}void rotate(in vec2 v,in float angle,out vec2 result){float cosine=cos(angle);float sine=sin(angle);result=vec2(cosine*v.x-sine*v.y,sine*v.x+cosine*v.y);}void main(){\n#pragma tangram: setup\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nfloat linewidth=a_width*2.0;v_angles=a_angles;v_segment=a_segment;v_color=a_color;v_length=a_length;v_texcoord=a_texcoord;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nv_barycentric=a_barycentric;\n#endif\nv_color.a=min(linewidth,v_color.a);linewidth=max(linewidth,1.0);linewidth/=exp2(u_map_position.z-u_tile_origin.w);v_linewidth_and_closed=linewidth*(a_closed>0.0 ?-1.0 : 1.0);if(v_color.a<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}float width=ceil(1.25*u_antialias+linewidth)/2.0;vec2 t1=normalize(a_tangents.xy);vec2 t2=normalize(a_tangents.zw);float u=a_texcoord.x;u*=-1.0;float v=a_texcoord.y;vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.0);if(t1!=t2){float angle=a_texcoord.x==1.0 ? a_angles.x : a_angles.y;vec2 t=normalize(t1+t2);vec2 o=vec2(+t.y,-t.x);float segmentLength=a_segment.y-a_segment.x;float magnitude=width/cos(angle/2.0);float sqMagnitude=magnitude*magnitude;float seg1SqMagnitude=dot(a_tangents.xy,a_tangents.xy);float seg2SqMagnitude=dot(a_tangents.zw,a_tangents.zw);if((abs(magnitude)>linewidth)&&(sqMagnitude>=min(seg1SqMagnitude,seg2SqMagnitude))){if(u==1.0){o=vec2(-t2.y,+t2.x);}else{o=vec2(-t1.y,+t1.x);}magnitude=width;angle=0.0;v_angles.x=0.0;v_angles.y=0.0;}if(u_dash_index>0.0){if((abs(angle)>THETA)){position.xy+=v*width*o/cos(angle/2.0);float s=sign(angle);if(angle<0.0){if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==1.0){position.xy-=2.0*width*t1/sin(angle);u-=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==1.0){position.xy+=2.0*width*t2/sin(angle);u+=2.0*width/sin(angle);}}}else{if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==-1.0){position.xy+=2.0*width*t1/sin(angle);u+=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==-1.0){position.xy-=2.0*width*t2/sin(angle);u-=2.0*width/sin(angle);}}}}else{position.xy+=v*width*o/cos(angle/2.0);if(u==+1.0){u=v_segment.y;}else{u=v_segment.x;}}}else{position.xy+=v*o*magnitude;if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);}else{u=v_segment.x-v*width*tan(angle/2.0);}}v_joinIndicator=(segmentLength+v*width*tan(angle/2.0))/segmentLength;}else{v_joinIndicator=-1.0;vec2 o=vec2(+t1.y,-t1.x);position.xy+=v*width*o;if(u==-1.0){u=v_segment.x-width;position.xy-=width*t1;}else{u=v_segment.y+width;position.xy+=width*t2;}}vec2 t;vec2 curr=a_position.xy;if(a_texcoord.x>=0.0){vec2 next=curr+t2*(v_segment.y-v_segment.x);rotate(t1,+a_angles.x/2.0,t);v_miter.x=signed_distance(curr,curr+t,position.xy);rotate(t2,+a_angles.y/2.0,t);v_miter.y=signed_distance(next,next+t,position.xy);}else{vec2 prev=curr-t1*(v_segment.y-v_segment.x);rotate(t1,-a_angles.x/2.0,t);v_miter.x=signed_distance(prev,prev+t,position.xy);rotate(t2,-a_angles.y/2.0,t);v_miter.y=signed_distance(curr,curr+t,position.xy);}v_distances=vec2(u,v*width);v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#endif\ngl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_dash_atlas;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_phase;uniform float u_dash_period;uniform float u_dash_index;uniform vec2 u_dash_caps;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL v_normal\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\n#pragma tangram: utils\nconst float PI=3.141592653589793;const float HALF_PI=PI/2.0;const float THETA=15.0*PI/180.0;/***Compute distance to cap.*@param{int}type The Type of the cap(see CAP_TYPE in pattern_lines)*@param{float}dx The distance of the pixel from the beginning of the line(not straight distance,but along the legs)*@param{float}dy The distance of the pixel from the midline(see v_distances in vertex shader,aka \xb11*half_line_width)*@param{float}aa_radius The distance from the mid-line from where antialiasing starts.*For example for a linewidth 10px width and 2px filter radius it is 10px/2-2px=3px.*@return{float}distance*/float cap(int type,float dx,float dy,float aa_radius){float dist=0.0;dx=abs(dx);dy=abs(dy);if(type==1)dist=sqrt(dx*dx+dy*dy);else if(type==3)dist=(dx+abs(dy));else if(type==2)dist=max(abs(dy),(aa_radius+dx-abs(dy)));else if(type==4)dist=max(dx,dy);else if(type==5)dist=max(dx+aa_radius,dy);return dist;}/***Compute distance to join.*@param{int}type The type of the join(see JOIN_TYPE in pattern_lines)*@param{vec2}segment Interpolated a_segment attribute from the vertex shader*@param{vec2}texcoord Pair of u/v coordinates to identify the 4 different extruded points of the segment.*@param{vec2}distances 2 component vector where:*x is the distance of the pixel from the beginning of the line(along the legs)*y is the  distance of the pixel from the midline(see v_distances in vertex shader,\xb11*half_line_width)*@param{vec2}miter Miter point coordiante*@param{float}miter_limit The miter limit*@param{float}linewidth The width of the line*@return{float}computed distance*/float join(in int type,in vec2 segment,in vec2 texcoord,in vec2 distances,in vec2 miter,in float miter_limit,in float linewidth){float dx=distances.x;float result=abs(distances.y);if((dx<segment.x)||(dx>segment.y)){if(type==1){float s=dx<segment.x ? segment.x : segment.y;result=max(result,length(distances-vec2(s,0.0)));}else{float m=abs(texcoord.x>=0.0 ? miter.x : miter.y);if(type==2){result=max(result,m);}else if(type==0){result=max(result,m-miter_limit*linewidth/2.0);}}}return result;}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\nif(v_color.a<=0.0){discard;}bool solid=(u_dash_index==0.0);bool closed=v_linewidth_and_closed<0.0;float dx=v_distances.x;float dy=v_distances.y;float linewidth=abs(v_linewidth_and_closed);float aa_radius=linewidth/2.0-u_antialias;float dist=0.0;vec2 linecaps=u_linecaps;vec2 dash_caps=u_dash_caps;float line_start=0.0;float line_stop=v_length;if(solid){dist=abs(dy);bool potentialCap=!closed&&v_joinIndicator<0.0;if(potentialCap&&dx<line_start){dist=cap(int(u_linecaps.x),abs(dx),abs(dy),aa_radius);}else if(potentialCap&&dx>line_stop){dist=cap(int(u_linecaps.y),abs(dx)-line_stop,abs(dy),aa_radius);}else{dist=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);}}else{float segment_start=v_segment.x;float segment_stop=v_segment.y;float segment_center=(segment_start+segment_stop)/2.0;float freq=u_dash_period*linewidth;float dash_phase=u_dash_phase-1e-5;float u=mod(dx+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));float dash_center=float(tex.x)*255.0*linewidth;float dash_type=floor(float(tex.y)*255.0+0.5);float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;float dash_start=dx-u+_start;float dash_stop=dx-u+_stop;if((dash_stop<segment_start)&&(dash_caps.x!=5.0)){float u=mod(segment_start+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_start-u+_start;dash_stop=segment_start-u+_stop;}else if((dash_start>segment_stop)&&(dash_caps.y!=5.0)){float u=mod(segment_stop+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_stop-u+_start;dash_stop=segment_stop-u+_stop;}bool discontinuous=((dx<segment_center)&&abs(v_angles.x)>THETA)||((dx>=segment_center)&&abs(v_angles.y)>THETA);float d_join=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);if(closed){line_start+=linewidth/2.0;line_stop-=linewidth/2.0;}if(dash_stop<=line_start){discard;}if(dash_start>=line_stop){discard;}if(discontinuous){if((dash_start>segment_stop)){discard;}if((dash_stop<segment_start)){discard;}if(dash_caps.x==1.0){if((u>_stop)&&(dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){discard;}}if(dash_caps.y==1.0){if((u<_start)&&(dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){discard;}}if((dash_caps.x!=1.0)&&(dash_caps.x!=5.0)){if((dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){float a=v_angles.x/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(segment_start-dx)*cos_a-dy*sin_a;float y=(segment_start-dx)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.x=4.0;}}if((dash_caps.y!=1.0)&&(dash_caps.y!=5.0)){if((dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){float a=v_angles.y/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(dx-segment_stop)*cos_a-dy*sin_a;float y=(dx-segment_stop)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.y=4.0;}}}if((dx<line_start)&&(dash_start<=line_start)&&(dash_stop>line_start)){dist=cap(int(linecaps.x),dx-line_start,dy,aa_radius);}else if((dx>line_stop)&&(dash_stop>line_stop)&&(dash_start<line_stop)){dist=cap(int(linecaps.y),dx-line_stop,dy,aa_radius);}else if(dash_type==1.0){dist=cap(int(dash_caps.x),abs(dash_center-u),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}else if(dash_type==0.0){dist=abs(dy);}else if(dash_type==2.0){dist=cap(int(dash_caps.y),abs(u-dash_center),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}if((dx>line_start)&&(dx<line_stop)){if((dx<=segment_start)&&(dash_start<=segment_start)&&(dash_stop>=segment_start)){dist=d_join;float angle=HALF_PI+v_angles.x;float f=abs((segment_start-dx)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if((dx>segment_stop)&&(dash_start<=segment_stop)&&(dash_stop>=segment_stop)){dist=d_join;float angle=HALF_PI+v_angles.y;float f=abs((dx-segment_stop)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}dist=dist-aa_radius;if(dist>=0.0){if(u_antialias==0.0){discard;}else{color=vec4(color.rgb,exp(-dist*dist)*color.a);}}\n#ifdef TANGRAM_DEBUG_TRIANGLES\nif(any(lessThan(v_barycentric,vec3(0.0085)))){color=vec4(0.0,1.0,0.0,1.0);}\n#endif\ngl_FragColor=color;}",selection:!0,init:function(){sc.init.apply(this,arguments),this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_DEBUG_TRIANGLES=!1,this.defines.TANGRAM_DEBUG_NO_TEXTURE_FLOAT_SUPPORT=!1,this.styles=this.styles||{},vu.vertex_layouts=[],vu.variants={}},calcDistance:function(t,e){return t&&_o.evalCachedDistanceProperty(t,e)||0},calcDash:function(t,e){var n=_o.evalProperty(t.dash,e),i=0;return n&&((n=Array.isArray(n)&&n.length?n:xu).length%2==1&&(n=n.concat(n)),i=+(i=n.reduce((function(t,e){return t+e})))||0),{dash:n,dash_period:i}},calcWidth:function(t,e,n){var i=this.calcDistance(t.width,n);return!(i<0)&&(e.width=i*n.units_per_meter_overzoom,!0)},getCapType:function(t,e,n){var i=_o.evalProperty(t,e);return void 0!==yu[i]?yu[i]:n},_parseFeature:function(t,e,n){if(!1!==this.calcWidth(e,this.feature_style,n)){var i=this.parseColor(e.color,n);if(i&&0!==i[3]){var r=this.getCapType(e.cap,n,_u),o=_o.evalProperty(e.join,n),s=+_o.evalProperty(e.miter_limit,n),a=this.calcDash(e,n),l=a.dash,c=a.dash_period,u=Object.assign({color:i,antialias:e.antialias,linecaps:[this.getCapType(e.tail_cap,n,r),this.getCapType(e.head_cap,n,r)],join:void 0!==bu[o]?bu[o]:wu,miter_limit:0<=s?s:3,dash_index:0===c?0:1,dash:l,dash_caps:[this.getCapType(e.tail_cap,n,r),this.getCapType(e.head_cap,n,r)],dash_phase:+_o.evalProperty(e.dash_phase,n)||0,dash_period:c},this.feature_style);return u.z=e.z&&_o.evalCachedDistanceProperty(e.z||0,n)||_o.defaults.z,u.z*=er.height_scale,u.extrude=_o.evalProperty(e.extrude,n),u.extrude&&(!0===u.extrude?(u.height=void 0!==t.properties.height?t.properties.height:_o.defaults.height,u.min_height=void 0!==t.properties.min_height?t.properties.min_height:_o.defaults.min_height):"number"==typeof u.extrude?(u.height=u.extrude,u.min_height=0):Array.isArray(u.extrude)&&(u.min_height=u.extrude[0],u.height=u.extrude[1]),u.height*=er.height_scale,u.min_height*=er.height_scale),this.computeVariant(u),u}}},_preprocess:function(t){t.color=_o.createColorPropertyCache(t.color),t.width=_o.createPropertyCache(t.width,_o.parseUnits),t.width&&t.width.type!==_o.CACHE_TYPE.STATIC&&(t.next_width=_o.createPropertyCache(t.width,_o.parseUnits)),t.z=_o.createPropertyCache(t.z,_o.parseUnits);var e=+t.antialias;return t.antialias=isNaN(e)?0:e,t},buildRasterTextures:function(t,e){var n=[];for(var i in e.meshes){var r,o=vu.variants[i],s=o.uniforms,a=o.pattern;s.u_dash_index&&(r="__dash_"+a.join("_")+"_"+t.key+"_"+t.id,n.push({name:r,data:mu(a,1024)}),s.u_dash_atlas=r,e.meshes[i].textures=[r]),e.meshes[i].uniforms=s}return e.uniforms=e.uniforms||{},n.length?hr.postMessage(this.main_thread_target+".loadTextures",n).then((function(t){return e})):Promise.resolve(e)},loadTextures:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=(r=this.textureManager.textures[i.name])||this.textureManager.create(this.gl,i.name,{filtering:"nearest",repeat:!0,width:1024,height:1,data:i.data});e.push(r.loading)}return Promise.all(e).then((function(t){return t.map((function(t){return t.retain(),t.name}))}))},computeVariant:function(t){var e=function(t){for(var e=[],n=0,i=ku.length;n<i;n++){var r=t[ku[n]];Array.isArray(r)?e.push(r.join("_")):"boolean"==typeof r?e.push(r?1:0):r&&e.push(r.toString())}return e.join("/")}(t);t.variant=e,null==vu.variants[e]&&(vu.variants[e]={key:e,order:t.variant_order,uniforms:{u_antialias:t.antialias,u_linecaps:t.linecaps,u_linejoin:t.join,u_miter_limit:t.miter_limit,u_dash_index:t.dash_index,u_dash_caps:t.dash_caps,u_dash_phase:t.dash_phase,u_dash_period:t.dash_period},pattern:t.dash})},vertexLayoutForMeshVariant:function(t){var e;return null==vu.vertex_layouts[t.key]&&(e=[{name:"a_position",size:4,type:ac.SHORT,normalized:!1},{name:"a_color",size:4,type:ac.UNSIGNED_BYTE,normalized:!0},{name:"a_width",size:1,type:ac.FLOAT,normalized:!1},{name:"a_tangents",size:4,type:ac.FLOAT,normalized:!1},{name:"a_segment",size:2,type:ac.FLOAT,normalized:!1},{name:"a_angles",size:2,type:ac.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:ac.FLOAT,normalized:!0},{name:"a_length",size:1,type:ac.FLOAT,normalized:!1},{name:"a_closed",size:1,type:ac.FLOAT,normalized:!1},{name:"a_selection_color",size:4,type:ac.UNSIGNED_BYTE,normalized:!0}],this.defines.TANGRAM_DEBUG_TRIANGLES&&e.push({name:"a_barycentric",size:3,type:ac.SHORT,normalized:!1}),vu.vertex_layouts[t.key]=new dc(e)),vu.vertex_layouts[t.key]},meshVariantTypeForDraw:function(t){return vu.variants[t.variant]},makeVertexTemplate:function(t){var e=0;return this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=t.z+t.height||0,this.vertex_template[e++]=this.scaleOrder(t.order),this.vertex_template[e++]=255*t.color[0],this.vertex_template[e++]=255*t.color[1],this.vertex_template[e++]=255*t.color[2],this.vertex_template[e++]=255*t.color[3],this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.selection&&(this.vertex_template[e++]=255*t.selection_color[0],this.vertex_template[e++]=255*t.selection_color[1],this.vertex_template[e++]=255*t.selection_color[2],this.vertex_template[e++]=255*t.selection_color[3]),this.defines.TANGRAM_DEBUG_TRIANGLES&&(this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0),this.vertex_template},buildLines:function(t,e,n,i,r){var o=4<arguments.length&&void 0!==r&&r,s=n.vertex_data,a=s.vertex_layout,l=this.makeVertexTemplate(e,n);return hu(t,e.width,s,l,a.index,o)},buildPolygons:function(t,e,n,i){for(var r=0,o=0,s=t.length;o<s;o++)r+=this.buildLines(t[o],e,n,i,!0);return r}});var Su=0,Au={id_prefix:"",nextLabelId:function(){return"".concat(Au.id_prefix,"/").concat(Su++)}};function Eu(t){return{priority:t.priority,collide:t.collide,repeat_distance:t.repeat_distance,repeat_group:t.repeat_group,buffer:t.buffer,italic:t.italic}}var Tu=["left","top-left","bottom-left"],Cu=["right","top-right","bottom-right"],Mu=["top","top-left","top-right"],Lu=["bottom","bottom-left","bottom-right"],Ru={computeOffset:function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:null;if(!n||"center"===n)return t;var o=[t[0],t[1]];return r=r||this.default_buffer,this.isLeftAnchor(n)?(o[0]-=e[0]/2,"left"===n&&(o[0]-=r[0])):this.isRightAnchor(n)&&(o[0]+=e[0]/2,"right"===n&&(o[0]+=r[1])),this.isTopAnchor(n)?(o[1]-=e[1]/2,"top"===n&&(o[1]-=r[2])):this.isBottomAnchor(n)&&(o[1]+=e[1]/2,"bottom"===n&&(o[1]+=r[3])),o},alignForAnchor:function(t){if(t&&"center"!==t){if(this.isLeftAnchor(t))return"right";if(this.isRightAnchor(t))return"left"}return"center"},isLeftAnchor:function(t){return-1<Tu.indexOf(t)},isRightAnchor:function(t){return-1<Cu.indexOf(t)},isTopAnchor:function(t){return-1<Mu.indexOf(t)},isBottomAnchor:function(t){return-1<Lu.indexOf(t)},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function Ou(t,e,n,i,r){var o=[],s=n-t,a=i-e,l=Qi.getLineLength(t,e,n,i),c=2*r;if((u=l/c)<=1)o.push(t+s/2,e+a/2,r);else{var u,h=c/l,f=s*h,p=a*h;(u=l/r/2)%1&&o.push(n-f/2,i-p/2,r),u|=0;for(var d=t+f/2,g=e+p/2;u--;)o.push(d,g,r),d+=f,g+=p}return o}var Iu=function(){function t(e,n,i,r){yi(this,t),this.id=Au.nextLabelId(),this.position=[e[0],e[1]],void 0!==e[2]&&this.position.push(e[2]),this.size=n,this.layout=r,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.type="point",this.parent=this.layout.parent,this.offset=this.computeOffset(),this.align=this.layout.align||Ru.alignForAnchor(this.anchor),this._is_flat=i}return _i(t,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,align:this.align,sides:this.getSides(),breach:!this.inTileBounds(),layout:Eu(this.layout)}}},{key:"inTileBounds",value:function(){var t=this.getAABB(),e=t.left,n=t.top,i=t.right,r=t.bottom;return Tr.pointInTile([e,n])&&Tr.pointInTile([i,r])}},{key:"isFlat",value:function(){return this._is_flat}},{key:"setAnchor",value:function(t){this._circles=void 0,this._aabb=void 0,this.anchor=t,this.offset=this.computeOffset()}},{key:"computeOffset",value:function(){var t,e=[this.layout.offset[0],this.layout.offset[1]];return this.parent&&(t=this.parent,e=Ru.computeOffset(e,t.size,t.anchor,Ru.zero_buffer),e=Ru.computeOffset(e,t.size,this.anchor,Ru.zero_buffer),t.offset!==_o.zeroPair&&(e===_o.zeroPair?e=t.offset:(e[0]+=t.offset[0],e[1]+=t.offset[1]))),Ru.computeOffset(e,this.size,this.anchor)}},{key:"getBoundingCircles",value:function(){return this.angle?(this._circles||(t=this.layout.units_per_pixel,r=-(n=(e=this.size[0]/2*t)*Math.cos(this.angle)),o=-(i=e*Math.sin(this.angle)),a=(s=Ii(this.position,2))[0],l=s[1],n+=a,i+=l*=-1,r+=a,o+=l,c=this.size[1]/2*t,this._circles=Ou(n,i,r,o,c)),this._circles):[];var t,e,n,i,r,o,s,a,l,c}},{key:"getAABB",value:function(){var t,e,n,i,r;return this._aabb||(t=this.layout.units_per_pixel,e=(this.size[0]/2+this.layout.buffer[0])*t,n=(this.size[1]/2+this.layout.buffer[1])*t,i=this.position[0]+this.offset[0]*t,r=this.position[1]-this.offset[1]*t,this._aabb={left:i-e,top:r+n,right:i+e,bottom:r-n}),this._aabb}},{key:"getSides",value:function(){var t=this.getAABB(),e=t.left,n=t.top,i=t.right,r=(n+t.bottom)/2;return[e,r,i,r]}}]),t}();Iu.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var Pu=Iu.PLACEMENT;function Nu(t,e,n,i){var r=[],o=i.placement,s=Math.max(e[0],e[1])*i.placement_min_length_ratio*i.units_per_pixel;switch(o){case Pu.SPACED:var a=function(t,e,n){var i=n.units_per_pixel,r=(n.placement_spacing||80)*i,o=function(t){for(var e=0,n=0;n<t.length-1;n++)e+=ju(t[n],t[n+1]);return e}(t);if(o<=e)return!1;for(var s=Math.max(Math.floor(o/r),1),a=[],l=[],c=.5*(o-(s-1)*r),u=0;u<s;u++){var h=function(t,e,n,i){for(var r,o,s=0,a=0;a<t.length-1;a++){var l=t[a],c=t[a+1],u=ju(l,c);if(!(u<=n)&&e<(s+=u)){r=function(t,e,n){var i=n/ju(t,e);return[i*t[0]+(1-i)*e[0],i*t[1]+(1-i)*e[1]]}(l,c,s-e),o=Du(l,c,i.angle);break}}return{position:r,angle:o}}(t,c,e,n),f=h.position,p=h.angle;null!=f&&null!=p&&(a.push(f),l.push(p)),c+=r}return{positions:a,angles:l}}(t,s,i);if(!a)return[];for(var l=a.positions,c=a.angles,u=0;u<l.length;u++){var h,f=l[u],p=c[u];!0!==i.tile_edges&&yc(f)||((h=new Iu(f,e,n,i)).angle=p,r.push(h))}break;case Pu.VERTEX:for(var d,g,m,v=0;v<t.length-1;v++)d=t[v],g=t[v+1],!0!==i.tile_edges&&yc(d)||((m=new Iu(d,e,n,i)).angle=Du(d,g,i.angle),r.push(m));(m=new Iu(g,e,n,i)).angle=Du(d,g,i.angle),r.push(m);break;case Pu.MIDPOINT:for(var y=0;y<t.length-1;y++){var b,_=t[y],w=t[y+1],x=[.5*(_[0]+w[0]),.5*(_[1]+w[1])];!0!==i.tile_edges&&yc(x)||(!s||ju(_,w)>s)&&((b=new Iu(x,e,n,i)).angle=Du(_,w,i.angle),r.push(b))}}return r}function Du(t,e,n){var i=2<arguments.length&&void 0!==n?n:0;return"auto"===i?Math.atan2(e[0]-t[0],e[1]-t[1]):i}function ju(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}var zu={key:function(t){return[t.style,t.weight,t.family,t.px_size,t.fill,t.stroke,t.stroke_width,t.transform,t.text_wrap,t.max_lines,t.supersample,t.background_color,t.outline_color,t.outline_width,t.padding,Tr.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0,background_color:null,outline_color:null,outline_width:0,padding:[0,0,0,0]},compute:function(t,e,n){var i={};e.font=e.font||this.defaults,i.can_articulate=e.can_articulate,i.fill=e.font.fill&&Tr.toCSSColor(_o.evalCachedColorProperty(e.font.fill,n))||this.defaults.fill,i.style=e.font.style||this.defaults.style,i.weight=e.font.weight||this.defaults.weight,e.font.family?(i.family=e.font.family,i.family!==this.defaults.family&&(i.family+=", "+this.defaults.family)):i.family=this.defaults.family,i.transform=e.font.transform,i.size=e.font.size||this.defaults.size,i.supersample=e.supersample_text?1.5:1,i.px_size=_o.evalCachedProperty(e.font.px_size,n)*i.supersample,e.font.stroke&&e.font.stroke.color&&(i.stroke=Tr.toCSSColor(_o.evalCachedColorProperty(e.font.stroke.color,n)||this.defaults.stroke),i.stroke_width=_o.evalCachedProperty(e.font.stroke.width,n)||this.defaults.stroke_width),i.font_css=this.fontCSS(i);var r=e.text_wrap;return null==r&&"line"!==er.geometryType(t.geometry.type)&&(r=!0),!0===r&&(r=this.defaults.text_wrap),i.text_wrap=r,i.max_lines=e.max_lines||this.defaults.max_lines,i.background_color=e.background&&e.background.color&&!e.can_articulate?Tr.toCSSColor(_o.evalCachedColorProperty(e.background.color,n)):this.defaults.background_color,i.outline_color=e.outline&&e.outline.color&&!e.can_articulate?Tr.toCSSColor(_o.evalCachedColorProperty(e.outline.color,n)):this.defaults.outline_color,i.outline_width=e.outline&&e.outline.width&&!e.can_articulate?_o.evalCachedProperty(e.outline.width,n):this.defaults.outline_width,i.padding=e.padding&&!e.can_articulate?_o.evalCachedProperty(e.padding,n):this.defaults.padding,i},fontCSS:function(t){return[t.style,t.weight,t.px_size+"px",t.family].filter((function(t){return t})).join(" ")}},$u=s((function(t){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function n(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+e+";"}function r(t){var e=t.a.offsetWidth,n=e+100;return t.f.style.width=n+"px",t.c.scrollLeft=n,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,1)}function o(t,n){function i(){var t=o;r(t)&&t.a.parentNode&&n(t.g)}var o=t;e(t.b,i),e(t.c,i),r(t)}function s(t,e){var n=e||{};this.family=t,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}function a(t,e){return[t.style,t.weight,function(){if(null===u){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}u=""!==t.style.font}return u}()?t.stretch:"","100px",e].join(" ")}var l,c,u,h;h=u=c=l=null,s.prototype.load=function(t,e){var r=this,s=t||"BESbswy",u=0,f=e||3e3,p=(new Date).getTime();return new Promise((function(t,e){var d,g,m;null===h&&(h=!!document.fonts),(d=h)&&(null===c&&(c=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),d=!c),d?(d=new Promise((function(t,e){!function n(){(new Date).getTime()-p>=f?e():document.fonts.load(a(r,'"'+r.family+'"'),s).then((function(e){1<=e.length?t():setTimeout(n,25)}),(function(){e()}))}()})),g=new Promise((function(t,e){u=setTimeout(e,f)})),Promise.race([g,d]).then((function(){clearTimeout(u),t(r)}),(function(){e(r)}))):(m=function(){function c(){var e;(e=-1!=m&&-1!=v||-1!=m&&-1!=y||-1!=v&&-1!=y)&&((e=m!=v&&m!=y&&v!=y)||(null===l&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)),e=l&&(m==b&&v==b&&y==b||m==_&&v==_&&y==_||m==w&&v==w&&y==w)),e=!e),e&&(x.parentNode&&x.parentNode.removeChild(x),clearTimeout(u),t(r))}var h=new n(s),d=new n(s),g=new n(s),m=-1,v=-1,y=-1,b=-1,_=-1,w=-1,x=document.createElement("div");x.dir="ltr",i(h,a(r,"sans-serif")),i(d,a(r,"serif")),i(g,a(r,"monospace")),x.appendChild(h.a),x.appendChild(d.a),x.appendChild(g.a),document.body.appendChild(x),b=h.a.offsetWidth,_=d.a.offsetWidth,w=g.a.offsetWidth,function t(){var n;(new Date).getTime()-p>=f?(x.parentNode&&x.parentNode.removeChild(x),e(r)):(!0!==(n=document.hidden)&&void 0!==n||(m=h.a.offsetWidth,v=d.a.offsetWidth,y=g.a.offsetWidth,c()),u=setTimeout(t,50))}(),o(h,(function(t){m=t,c()})),i(h,a(r,'"'+r.family+'",sans-serif')),o(d,(function(t){v=t,c()})),i(d,a(r,'"'+r.family+'",serif')),o(g,(function(t){y=t,c()})),i(g,a(r,'"'+r.family+'",monospace'))},document.body?m():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),m()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),m())})))}))},t.exports=s})),Fu={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(t){var e=this,n=JSON.stringify(t)===this.last_loaded;return t&&!n&&function(){var n=[];for(var i in t)!function(i){Array.isArray(t[i])?t[i].forEach((function(t){return n.push(e.loadFontFace(i,t))})):n.push(e.loadFontFace(i,t[i]))}(i);e.last_loaded=JSON.stringify(t),e.fonts_loaded=Promise.all(n.filter((function(t){return t})))}(),this.fonts_loaded},loadFontFace:function(t,e){if(null!=e&&("object"===vi(e)||"external"===e)){var n={family:t},i=Promise.resolve();"object"===vi(e)&&(Object.assign(n,e),"string"==typeof e.url&&(i=this.injectFontFace(n)));var r=new $u(t,n);return i.then((function(){return r.load()})).then((function(){Ar("debug","Font face '".concat(t,"' is available"),n)}),(function(){Ar("debug","Font face '".concat(t,"' is NOT available"),n)}))}},injectFontFace:function(t){var e=this,n=t.family,i=t.url,r=t.weight,o=t.style;void 0===this.supports_native_font_loading&&(this.supports_native_font_loading=void 0!==window.FontFace);var s=Promise.resolve(i);return"blob:"===i.slice(0,5)&&(s=Tr.io(i,6e4,"arraybuffer").then((function(t){var n=new Uint8Array(t);if(e.supports_native_font_loading)return n;for(var i="",r=0;r<n.length;r++)i+=String.fromCharCode(n[r]);return"data:font/opentype;base64,"+btoa(i)}))),s.then((function(t){var i,s,a;e.supports_native_font_loading?("string"==typeof t?i=new FontFace(n,"url(".concat(encodeURI(t),")"),{weight:r,style:o}):t instanceof Uint8Array&&(i=new FontFace(n,t,{weight:r,style:o})),document.fonts.add(i),Ar("trace","Adding FontFace to document.fonts:",i)):(s="\n                    @font-face {\n                        font-family: '".concat(n,"';\n                        font-weight: ").concat(r||"normal",";\n                        font-style: ").concat(o||"normal",";\n                        src: url(").concat(encodeURI(t),");\n                    }\n                "),(a=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet.insertRule(s,0),Ar("trace","Injecting CSS font face:",s))}))}},Bu=function(){function t(){yi(this,t),this.vertical_text_buffer=1,this.horizontal_text_buffer=1,this.layout=ml("binary-tree")}return _i(t,[{key:"createCanvas",value:function(t,e){var n=document.createElement("canvas");return t&&e&&(n.width=t,n.height=e),n.style.backgroundColor="transparent",n}},{key:"setFont",value:function(t,e){var n=e.font_css,i=e.fill,r=e.stroke,o=e.stroke_width,s=e.px_size,a=e.supersample;this.px_size=s;var l=Tr.device_pixel_ratio*a;r&&0<o&&(t.strokeStyle=r,t.lineWidth=o*l),t.fillStyle=i,t.textBaseline="bottom",t.font=n,t.miterLimit=2}},{key:"textSizes",value:function(t,e,n){var i=this;return Fu.loadFonts().then((function(){return Lo.add({type:"textSizes",run:i.processTextSizesTask.bind(i),texts:e,tile_id:t,cursor:{ctx:n,styles:Object.keys(e),texts:null,style_idx:null,text_idx:null}})}))}},{key:"processTextSizesTask",value:function(t){var e,n=t.cursor,i=t.texts,r=n.ctx;for(n.style_idx=n.style_idx||0;n.style_idx<n.styles.length;){var o=n.styles[n.style_idx];null==n.text_idx&&(n.text_idx=0,n.texts=Object.keys(i[o]));for(var s=i[o],a=!0;n.text_idx<n.texts.length;){var l=n.texts[n.text_idx],c=s[l],u=c.text_settings;if(a&&(this.setFont(r,u),a=!1),c.size=this.textSize(r,o,l,u).size,u.can_articulate){var h=!1,f=!1;if(Uu(l)&&(Wu(l)?h=!0:f=!0),c.isRTL=h,c.no_curving=f||(e=l,th.test(e)),c.vertical_buffer=this.vertical_text_buffer+u.outline_width+(u.padding[0]+u.padding[2])/2,c.segment_sizes=[],!c.no_curving){var p=function(t,e){var n=e?1:eh;if(t.length<n)return[t];var i=t;if(Bu.cache.segment[i])return Bu.cache.stats.segment_hits++,Bu.cache.segment[i];var r=[];if(qu.exec(t)){r=t.split(Ku);for(var o,s=-1,a=0;a<r.length-1;a++)0<a&&(o=Yu.exec(r[a]))&&(r[a]=r[a].substring(o[0].length),r[a-1]+=o[0],s+=o[0].length),s+=1+r[a].length,r[a]+=t.slice(s,s+1);t=""}for(;t.length;){for(var l="",c=t,u=0;u<n&&c.length;u++){var h=(Zu.exec(c)||c)[0];l+=h,c=c.substring(h.length)}r.push(l),t=t.substring(l.length)}return e&&r.reverse(),Bu.cache.stats.segment_misses++,Bu.cache.segment[i]=r}(l,h);c.segments=p;for(var d=0;d<p.length;d++)c.segment_sizes.push(this.textSize(r,o,p[d],u).size)}}if(n.text_idx++,!Lo.shouldContinue(t))return!1}n.text_idx=null,n.style_idx++}return Lo.finish(t,{texts:i}),!0}},{key:"textSize",value:function(e,n,i,r){var o=r.transform,s=r.text_wrap,a=r.max_lines,l=r.stroke_width,c=void 0===l?0:l,u=r.supersample,h=r.padding,f=r.outline_width,p=r.can_articulate;if(t.cache.text[n]=t.cache.text[n]||{},t.cache.text[n][i])return t.cache.stats.text_hits++,t.cache.text[n][i];t.cache.stats.text_misses++,t.cache.text_count++;var d=Tr.device_pixel_ratio*u,g=this.applyTextTransform(i,o),m=d*(this.vertical_text_buffer+f+(h[0]+h[2])/2),v=d*(this.horizontal_text_buffer+f+c+(h[1]+h[3])/2),y=2*d,b=this.px_size+y,_=nh.parse(g,s,a,b,e),w=_.height,x=_.width,k=_.lines,S=[x/d,w/d];p||(S[0]+=2*v/d,S[1]+=2*m/d);var A=[x+2*v,w+2*m],E=[A[0]/d,A[1]/d];return t.cache.text[n][i]={lines:k,size:{collision_size:S,texture_size:A,logical_size:E,line_height:b}},t.cache.text[n][i]}},{key:"drawTextMultiLine",value:function(t,e,n,i,r,o){var s=Ii(n,2),a=s[0],l=s[1],c=Tr.device_pixel_ratio*r.supersample,u=r.stroke_width||0,h=r.stroke;r.background_color&&(t.fillStyle=r.background_color,t.fillRect(a,l,i.texture_size[0],i.texture_size[1]));var f=r.outline_width*c,p=r.outline_color;f&&p&&(t.strokeStyle=p,t.lineWidth=f,t.strokeRect(a+f/2,l+f/2,i.texture_size[0]-f,i.texture_size[1]-f)),(r.background_color||f&&p)&&this.setFont(t,r);for(var d,g,m,v,y=i.line_height,b=l,_=0;_<e.length;_++){var w=e[_];this.drawTextLine(t,w,[a,b],i,r,o),b+=y}Pl.draw_label_collision_boxes&&(t.save(),d=c*(this.horizontal_text_buffer+r.outline_width+u+(r.padding[1]+r.padding[3])/2),g=c*(this.vertical_text_buffer+r.outline_width+(r.padding[0]+r.padding[2])/2),m=i.collision_size,t.strokeStyle="blue",t.lineWidth=2,t.strokeRect(a+d,l+g,c*m[0],c*m[1]),"curved"===o&&h&&0<u&&t.strokeRect(a+i.texture_size[0]+d,l+g,c*m[0],c*m[1]),t.restore()),Pl.draw_label_texture_boxes&&(t.save(),v=i.texture_size,t.strokeStyle="green",t.lineWidth=2,t.strokeRect(a+2,l+2,v[0]-4,v[1]-4),"curved"===o&&h&&0<u&&t.strokeRect(a+2+i.texture_size[0],l+2,v[0]-4,v[1]-4),t.restore())}},{key:"drawTextLine",value:function(t,e,n,i,r,o){var s,a=Ii(n,2),l=a[0],c=a[1],u=r.stroke,h=r.stroke_width,f=void 0===h?0:h,p=r.transform,d=r.align,g=r.supersample,m=r.padding,v=r.outline_width,y=Tr.device_pixel_ratio*g,b=(d=d||"center",i.texture_size),_=i.line_height,w=y*(this.vertical_text_buffer+v),x=y*(this.horizontal_text_buffer+v+f),k=this.applyTextTransform(e.text,p);"left"===d?s=l+x+m[3]*y:"center"===d?s=l+b[0]/2-e.width/2-(m[1]-m[3])*y/2:"right"===d&&(s=l+b[0]-e.width-x-m[1]*y);var S,A=c+w+_+m[0]*y;u&&0<f&&(S="curved"===o?b[0]:0,t.strokeText(k,s+S,A)),t.fillText(k,s,A)}},{key:"rasterize",value:function(e,n,i,r,o,s){return Lo.removeForTile(i),Lo.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:t.returnNoTextures,pause_factor:2,user_moving_view:!1,texts:e,textures:n,texture_prefix:r,gl:o,tile_id:i,texture_manager:s,cursor:{styles:Object.keys(e),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_names:[]}})}},{key:"processRasterizeTask",value:function(t){if(!Lo.shouldContinue(t))return!1;for(var e=t.cursor,n=t.texts,i=t.textures;e.texture_idx<t.textures.length;){for(var r=!1,o=i[e.texture_idx],s=this.createCanvas.apply(this,Pi(o.texture_size)),a=s.getContext("2d");e.style_idx<e.styles.length;){var l=e.styles[e.style_idx];null==e.text_idx&&(e.text_idx=0,e.texts=Object.keys(n[l]));for(var c=n[l],u=!0;e.text_idx<e.texts.length;){var h=e.texts[e.text_idx],f=c[h],p=f.text_settings;if(u&&(this.setFont(a,p),u=!1),p.can_articulate){f.texcoords=f.texcoords||{};for(var d=0;d<f.type.length;d++){var g=f.type[d];switch(g){case"straight":if(f.textures[d]!==e.texture_idx)continue;var m,v,y,b,_=f.isRTL?h.split().reverse().join():h,w=o.texcoord_cache[l][_],x=void 0;w.texcoord?x=w.texcoord:(m=w.texture_position,y=(v=this.textSize(a,l,_,p)).size,b=v.lines,this.drawTextMultiLine(a,b,m,y,p,g),x=t.texture_manager.getTexcoordsForSprite(m,y.texture_size,o.texture_size),w.texcoord=x),f.texcoords[g]={texcoord:x,texture_id:w.texture_id};break;case"curved":var k=f.segments;f.texcoords.curved=[],f.texcoords_stroke=[];for(var S,A,E,T,C,M,L,R,O=0;O<k.length;O++)f.textures[d][O]===e.texture_idx&&(S=k[O],T=E=void 0,(A=o.texcoord_cache[l][S]).texcoord&&A.texcoord_stroke?(E=A.texcoord,T=A.texcoord_stroke):(C=A.texture_position,L=(M=this.textSize(a,l,S,p)).size,R=M.lines,this.drawTextMultiLine(a,R,C,L,p,g),E=t.texture_manager.getTexcoordsForSprite(C,L.texture_size,o.texture_size),T=p.stroke&&0<p.stroke_width?t.texture_manager.getTexcoordsForSprite([C[0]+L.texture_size[0],C[1]],L.texture_size,o.texture_size):(r=!0,t.texture_manager.getTexcoordsForSprite([o.texture_size[0],o.texture_size[1]],[0,0],o.texture_size)),A.texcoord=E,A.texcoord_stroke=T),f.texcoords_stroke.push(T),f.texcoords.curved.push({texcoord:E,texture_id:A.texture_id}))}}}else{var I=this.textSize(a,l,h,p).lines;for(var P in f.align)f.align[P].texture_id===e.texture_idx&&(this.drawTextMultiLine(a,I,f.align[P].texture_position,f.size,{stroke:p.stroke,stroke_width:p.stroke_width,transform:p.transform,supersample:p.supersample,align:P,background_color:p.background_color,outline_width:p.outline_width,outline_color:p.outline_color,padding:p.padding,fill:p.fill,font_css:p.font_css,px_size:p.px_size}),f.align[P].texcoords=t.texture_manager.getTexcoordsForSprite(f.align[P].texture_position,f.size.texture_size,o.texture_size))}e.text_idx++}e.text_idx=null,e.style_idx++}!0===r&&(a.fillStyle="rgba(0, 0, 0, 0)",a.fillRect(s.width-1,s.height-1,1,1));var N=t.texture_prefix+e.texture_idx;t.texture_manager.create(t.gl,N,{element:s,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),e.texture_names.push(N),e.texture_idx++,e.style_idx=0,s.width=0,s.height=0}return Lo.finish(t,e.texture_names),!0}},{key:"setTextureTextPositions",value:function(t){var e={texture_id:0,texcoord_cache:{}},n=[];for(var i in t){var r=t[i];for(var o in r){var s=r[o],a=s.text_settings,l=a.can_articulate,c=a.stroke,u=a.stroke_width;if(l){s.textures=[],e.texcoord_cache[i]=e.texcoord_cache[i]||{};for(var h=0;h<s.type.length;h++)switch(s.type[h]){case"straight":var f,p=s.isRTL?o.split().reverse().join():o;e.texcoord_cache[i][p]||(f=s.size.texture_size,e.texcoord_cache[i][p]={},this.placeText(f[0],f[1],{can_articulate:l,style:i,word:p})),s.textures[h]=e.texture_id;break;case"curved":s.textures[h]=[];for(var d=0;d<s.segment_sizes.length;d++){var g,m,v=s.segments[d];e.texcoord_cache[i][v]||(m=(g=s.segment_sizes[d].texture_size)[0],c&&0<u&&(m*=2),e.texcoord_cache[i][v]={},this.placeText(m,g[1],{can_articulate:l,style:i,word:v})),s.textures[h].push(e.texture_id)}}}else{var y=s.size.texture_size;this.placeText(y[0],y[1],{can_articulate:l,text_info:s})}}}var b=this.layout.export(),_=b.items,w=b.width,x=b.height;e.texcoord_cache={};for(var k=0,S=_.length;k<S;k++){var A=_[k],E=A.x,T=A.y;if(A.meta.can_articulate){var C=A.meta,M=C.style,L=C.word;e.texcoord_cache[M]=e.texcoord_cache[M]||{},e.texcoord_cache[M][L]||(e.texcoord_cache[M][L]={texture_id:e.texture_id,texture_position:[E,T]})}else{var R=A.meta.text_info;for(var O in R.align)R.align[O].texture_id=e.texture_id,R.align[O].texture_position=[E,T]}}return 0<w&&0<x&&(n[e.texture_id]={texture_size:[w,x],texcoord_cache:e.texcoord_cache}),n}},{key:"placeText",value:function(t,e,n){this.layout.addItem({width:t+1,height:e+1,meta:n})}},{key:"applyTextTransform",value:function(t,e){return"capitalize"===e?t.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1)})):"uppercase"===e?t.toUpperCase():"lowercase"===e?t.toLowerCase():t}}],[{key:"fontPixelSize",value:function(e){if(null!=e){var n=Ii((e="string"==typeof e?e:String(e)).match(t.font_size_re)||[],3),i=n[1],r=n[2];return"em"===(r=r||"px")?i*=16:"pt"===r?i/=.75:"%"===r&&(i/=6.25),(i=_o.parsePositiveNumber(i))*Tr.device_pixel_ratio}}},{key:"pruneTextCache",value:function(){t.cache.text_count>t.cache.text_count_max&&(t.cache.text={},t.cache.text_count=0,Ar("debug","CanvasText: pruning text cache")),Object.keys(t.cache.segment).length>t.cache.segment_count_max&&(t.cache.segment={},Ar("debug","CanvasText: pruning segment cache"))}}]),t}();Bu.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,Bu.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}},Bu.EMPTY_TEXTURES_ARR=[],Bu.returnNoTextures=function(){return Bu.EMPTY_TEXTURES_ARR};var Hu=new RegExp("[\u0591-\u07ff\u200f\u202b\u202e\ufb1d-\ufdfd\ufe70-\ufefc]");function Uu(t){return Hu.test(t)}var Gu="\0-/:-@[-`{-\xbf\xd7\xf7\u02b9-\u02ff\u2000-\u2bff\u2010-\u2029\u202c\u202f-\u2bff",Vu=new RegExp("["+Gu+"]+");function Wu(t){return Vu.test(t)}var qu=new RegExp("^["+Gu+"\u0600-\u06ff]+"),Ku=new RegExp("["+Gu+"\u0622-\u0625\u0627\u062f-\u0632\u0648\u0671-\u0677\u0688-\u0699\u06c4-\u06cb\u06cf\u06d2\u06d3\u06ee\u06ef]"),Yu=new RegExp("^[\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed]+"),Xu="[\u0300-\u036f\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u07a6-\u07b0\u0900-\u0903\u093a-\u094c\u094e\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09cc\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c-\u0a4c\u0a51\u0a81-\u0a83\u0abc\u0abe-\u0acc\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b4c\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c4c\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0ccc\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d4c\u0d4e\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f83\u0f86\u0f87\u0f8d-\u0fbc\u0fc6\u102b-\u1038\u103a-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u17b4-\u17d1\u17d3\u1a55-\u1a5e\u1a61-\u1a7c\u1dc0-\u1dff\u20d0-\u20ff]",Zu=new RegExp("^.(?:"+Xu+"+)?([\u094d\u09cd\u0a4d\u0acd\u0b4d\u0c4d\u0ccd\u0d4d\u0f84\u1039\u17d2\u1a60\u1a7f]\\W(?:"+Xu+"+)?)*"),Ju={Mongolian:"\u1800-\u18af"},Qu=Object.keys(Ju).map((function(t){return Ju[t]})).join(""),th=new RegExp("["+Qu+"]"),eh=2,nh=function(){function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1/0;yi(this,t),this.width=0,this.height=0,this.lines=[],this.max_lines=n,this.text_wrap=i,this.context=e}return _i(t,[{key:"createLine",value:function(t){return this.lines.length<this.max_lines&&new ih(t,this.text_wrap)}},{key:"push",value:function(t){if(this.lines.length<this.max_lines){var e=this.context.measureText(t.text).width;return(t.width=e)>this.width&&(this.width=Math.ceil(e)),this.lines.push(t),this.height+=t.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function(t,e){return!!this.push(t)&&this.createLine(e)}},{key:"addEllipsis",value:function(){var e=this.lines[this.lines.length-1],n=Math.ceil(this.context.measureText(t.ellipsis).width);e.append(t.ellipsis),e.width+=n,e.width>this.width&&(this.width=e.width)}},{key:"finish",value:function(t){t?this.push(t):this.addEllipsis()}}],[{key:"parse",value:function(e,n,i,r,o){for(var s="number"==typeof n?e.split(" "):[e],a=new t(o,i,n),l=a.createLine(r),c=0;c<s.length;c++){for(var u=s[c].split("\n"),h=0===c,f=0;f<u.length&&l;f++){var p=u[f];Uu(p)&&Wu(p[p.length-1])&&(p+="\u200f");var d=h?p:" "+p;if(n&&0<c&&l.exceedsTextwrap(d)){if(!(l=a.advance(l,r)))break;l.append(p),h=!0}else l.append(d);f<u.length-1&&(l=a.advance(l,r),h=!0)}c===s.length-1&&a.finish(l)}return a}}]),t}();nh.ellipsis="...";var ih=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;yi(this,t),this.chars=0,this.text="",this.height=Math.ceil(e),this.text_wrap=n}return _i(t,[{key:"append",value:function(t){this.chars+=t.length,this.text+=t}},{key:"exceedsTextwrap",value:function(t){return t.length+this.chars>this.text_wrap}}]),t}(),rh={resetText:function(){this.texts={}},freeText:function(t){delete this.texts[t.id]},parseTextFeature:function(t,e,n,i){var r=this.parseTextSource(t,e,n);if(null!=r&&""!==r){var o=zu.compute(t,e,n),s=zu.key(o);this.texts[i.id]=this.texts[i.id]||{};var a=this.texts[i.id][s]=this.texts[i.id][s]||{};if(r instanceof Object){var l=[],c=r.left+"-"+r.right;for(var u in r){var h,f=r[u];f&&(h=this.computeTextLayout({},t,e,n,i,f,o,c,u),a[f]||(a[f]={text_settings:o,ref:0}),l.push({draw:e,text:f,text_settings_key:s,layout:h}))}return 0<l.length&&l}var p=this.computeTextLayout({},t,e,n,i,r,o);return a[r]||(a[r]={text_settings:o,ref:0}),{draw:e,text:r,text_settings_key:s,layout:p}}},parseTextSource:function(t,e,n){var i,r=e.text_source||"name";if(null!=r&&"object"===vi(r))for(var o in i={},r)i[o]=this.parseTextSourceValue(r[o],t,n);else i=this.parseTextSourceValue(r,t,n);return i},parseTextSourceValue:function(t,e,n){var i;if(Array.isArray(t)){for(var r=0;r<t.length;r++)if("string"==typeof t[r]?i=e.properties[t[r]]:"function"==typeof t[r]&&(i=t[r](n)),i)return i}else"string"==typeof t?i=e.properties[t]:t instanceof Function&&(i=t(n));return i},prepareTextLabels:function(t,e,n){var i=this;return 0===Object.keys(this.texts[t.id]||{}).length?Promise.resolve([]):hr.postMessage(this.main_thread_target+".calcTextSizes",t.id,this.texts[t.id]).then((function(e){var r=e.texts;return t.canceled?(Ar("trace","Style ".concat(i.name,": stop tile build because tile was canceled: ").concat(t.key,", post-calcTextSizes()")),[]):(i.texts[t.id]=r||[],r?i.buildTextLabels(t,n):(Mo.abortTile(t.id),[]))}))},collideAndRenderTextLabels:function(t,e,n){var i=this;return this.prepareTextLabels(t,e,n).then((function(n){return 0===n.length?(Mo.collide([],e,t.id),Promise.resolve({})):Mo.collide(n,e,t.id).then((function(e){if(t.canceled)return Ar("trace","stop tile build because tile was canceled: ".concat(t.key,", post-collide()")),{};var n=i.texts[t.id];return null==n||0===e.length?{}:(i.cullTextStyles(n,e),e.forEach((function(t){var e=t.text_settings_key,i=n[e]&&n[e][t.text];i.text_settings.can_articulate?(i.type||(i.type=[]),-1===i.type.indexOf(t.label.type)&&i.type.push(t.label.type)):(i.align=i.align||{},i.align[t.label.align]={})})),{labels:e,texts:n,textures:[]})}))}))},cullTextStyles:function(t,e){for(var n=0;n<e.length;n++){var i=e[n];t[i.text_settings_key][i.text].ref++}for(var r in t)for(var o in t[r])t[r][o].ref<1&&delete t[r][o];for(var s in t)0===Object.keys(t[s]).length&&delete t[s]},calcTextSizes:function(t,e){return this._canvas_text||(this._canvas_text=new Bu,this._canvas_ctx_for_sizes=this._canvas_text.createCanvas().getContext("2d")),this._canvas_text.textSizes(t,e,this._canvas_ctx_for_sizes)},preprocessText:function(t){if(t&&t.font&&"object"===vi(t.font))return t.font.fill=_o.createPropertyCache(t.font.fill),t.font.stroke&&(t.font.stroke.color=_o.createPropertyCache(t.font.stroke.color)),t.background&&t.background.color&&(t.background.color=_o.createPropertyCache(t.background.color)),t.outline&&(t.outline.color&&(t.outline.color=_o.createPropertyCache(t.outline.color)),t.outline.width&&(t.outline.width=_o.createPropertyCache(t.outline.width,_o.parsePositiveNumber))),t.padding&&(Array.isArray(t.padding)?2===t.padding.length&&(t.padding=[t.padding[0],t.padding[1],t.padding[0],t.padding[1]]):t.padding=Array(4).fill(t.padding),t.padding=_o.createPropertyCache(t.padding,(function(t){return t.map(_o.parsePositiveNumber)}))),t.font.px_size=_o.createPropertyCache(t.font.size||zu.defaults.size,Bu.fontPixelSize),t.font.stroke&&null!=t.font.stroke.width&&(t.font.stroke.width=_o.createPropertyCache(t.font.stroke.width,_o.parsePositiveNumber)),t.offset=_o.createPropertyCache(t.offset,(function(t){return Array.isArray(t)&&t.map(_o.parseNumber)})),t.buffer=_o.createPropertyCache(t.buffer,(function(t){return(Array.isArray(t)?t:[t,t]).map(_o.parsePositiveNumber)})),t.repeat_distance=_o.createPropertyCache(t.repeat_distance||er.tile_size,_o.parsePositiveNumber),t},computeTextLayout:function(t,e,n,i,r,o,s,a,l){var c=t||{};return(c=this.computeLayout(c,e,n,i,r)).repeat_distance&&(a&&(c.repeat_group+="/"+a),c.repeat_group+="/"+o),c.subdiv=r.overzoom2,c.align=n.align,c.italic="normal"!==s.style,"right"===l?c.orientation=1:"left"===l&&(c.orientation=-1),c}},oh=Math.PI/180,sh=function(){function t(e,n){yi(this,t),this._min_zoom=H.util.constants.DEFAULT_MIN_ZOOM_LEVEL,this._max_zoom=H.util.constants.DEFAULT_MAX_ZOOM_LEVEL,this._viewport=e,this._center_offset=[],this._center_offset_normalized=[],this._viewport_aspect_ratio=1,this._focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]],this._view_matrix=new Float64Array(16),this._projection_matrix=new Float64Array(16),this._heading_matrix=new Float64Array(16),this._tilt_matrix=new Float64Array(16),this._transformation_matrix=new Float64Array(16),this._camera_matrix=new Float64Array(16),this._lookAtData={position:[0,0,0],zoom:0,tile_level:0,tetragon:void 0,bounds:void 0,unpadded_bounds:void 0,distance:void 0,tilt:0,incline:0,heading:180},this._zoom_direction=0,this._horizon=0,this.handleViewportUpdate(!0),n?this.setLookAtData(n):this._updateMatrices(),Vl.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_center_offset;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n            }")}return _i(t,[{key:"getZoomForBounds",value:function(t,e,n,i){for(var r=this.clone(),o=this._max_zoom,s=this._min_zoom,a=(o-s)/2,l=o-a;.001<a;)r.setLookAtData({zoom:l,position:e,tilt:n,heading:i}),t.every((function(t){return Qi.isPointInsidePolygon(t,r.getLookAtData().bounds)}))?s=l:o=l,l=o-(a=(o-s)/2);return s}},{key:"setZoomConstraints",value:function(t,e){this._min_zoom=t,this._max_zoom=e,this.setLookAtData(this.getLookAtData())}},{key:"setLookAtData",value:function(t,e){var n,i,r,o,s,a=t.position,l=t.zoom;a===n&&t.bounds!==n&&(a=Qi.getBBoxCenter(Qi.getBBox(t.bounds))),l===n&&t.bounds!==n&&(l=this.getZoomForBounds(t.bounds,a,t.tilt,t.heading)),e!==n&&(i=a||this.screenToWorld(e)),l!==n&&(l=Qi.clamp(l,this._min_zoom,this._max_zoom),(r=Tr.zoomToTileLevel(l))!==(o=this._lookAtData.tile_level)&&(this._zoom_direction=o<r?1:-1),this._lookAtData.zoom=l,this._lookAtData.tile_level=r),t.tilt!==n&&(this._lookAtData.tilt=t.tilt),t.heading!==n&&(this._lookAtData.heading=t.heading),e!==n?(this._updateMatrices(),s=this.screenToWorld(e),this._lookAtData.position[0]-=s[0]-i[0],this._lookAtData.position[1]-=s[1]-i[1]):a&&(this._lookAtData.position=a),this._lookAtData.position[2]=0,this._lookAtData.position[1]=Qi.clamp(this._lookAtData.position[1],-er.half_circumference_meters,er.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"getZoomDirection",value:function(){return this._zoom_direction}},{key:"resetZoomDirection",value:function(){this._zoom_direction=0}},{key:"getLookAtData",value:function(){return this._lookAtData}},{key:"handleViewportUpdate",value:function(t){var e=0<arguments.length&&void 0!==t&&t,n=this._viewport,i=n.width,r=n.height;this._viewport_aspect_ratio=i/r;var o=this._viewport.center.x-(i/2<<0),s=this._viewport.center.y-(r/2<<0);this._center_offset[0]=o,this._center_offset[1]=s,this._center_offset_normalized[0]=o/i,this._center_offset_normalized[1]=s/-r,e||(this._updateMatrices(),this._updateVisibleBounds())}},{key:"setupMatrices",value:function(t,e){Ho(t.model_view32,this._view_matrix,t.model),e.uniform("Matrix4fv","u_modelView",t.model_view32),Fo(t.normal32,t.model_view32),Bo(t.inverse_normal32,t.normal32),e.uniform("Matrix3fv","u_normalMatrix",t.normal32),e.uniform("Matrix3fv","u_inverseNormalMatrix",t.inverse_normal32)}},{key:"_updateMatrices",value:function(){var t=this._viewport.height*er.metersPerPixel(this._lookAtData.zoom),e=Tr.interpolate(this._lookAtData.zoom,this._focal_length);this._lookAtData.distance=t/2*e;var n=this._lookAtData.position[0],i=this._lookAtData.position[1];Wo(this._view_matrix,zo(n,i,0),zo(n,i,-1),zo(0,1,0)),this._heading_matrix=qo(this._heading_matrix);var r=180-this._lookAtData.heading;r*=oh,this._heading_matrix[0]=Math.cos(r),this._heading_matrix[1]=-Math.sin(r),this._heading_matrix[4]=Math.sin(r),this._heading_matrix[5]=Math.cos(r),this._tilt_matrix=qo(this._tilt_matrix),r=0<(r=this._lookAtData.tilt?this._lookAtData.tilt*oh:0)?-r:r,this._tilt_matrix[5]=Math.cos(r),this._tilt_matrix[6]=Math.sin(r),this._tilt_matrix[9]=-Math.sin(r),this._tilt_matrix[10]=Math.cos(r),Ho(this._transformation_matrix,this._tilt_matrix,this._heading_matrix),Ho(this._view_matrix,this._transformation_matrix,this._view_matrix);var o=2*Math.atan(1/e),s=2*this._lookAtData.distance;this._depth_buffer_adjustment=2/Math.log(s),Vo(this._projection_matrix,o,this._viewport_aspect_ratio,1,s),this._projection_matrix[8]=2*-this._center_offset_normalized[0],this._projection_matrix[9]=2*-this._center_offset_normalized[1],Uo(this._projection_matrix,this._projection_matrix,zo(0,0,-this._lookAtData.distance)),this._camera_matrix=Ho(this._camera_matrix,this._projection_matrix,this._view_matrix)}},{key:"_updateVisibleBounds",value:function(){var t,e,n,i,r,o=this._viewport,s=o.width,a=o.height,l=o.padding,c=this._lookAtData.tilt*Math.PI/180;this._horizon=Math.max((l.top+a)/2-Math.cos(c)*(l.top*(1-Math.sin(c))+.75*a),0),this._lookAtData.tetragon=[this.screenToWorld([0,this._horizon]),this.screenToWorld([s,this._horizon]),this.screenToWorld([s,a]),this.screenToWorld([0,a])],this._lookAtData.unpadded_bounds=this._clipAgainstGeoBounds(this._lookAtData.tetragon),0===l.left&&0===l.top&&0===l.right&&0===l.bottom?this._lookAtData.bounds=this._lookAtData.unpadded_bounds:(t=l.left,e=Math.max(this._horizon,l.top),n=s-l.right,i=a-l.bottom,r=[this.screenToWorld([t,e]),this.screenToWorld([n,e]),this.screenToWorld([n,i]),this.screenToWorld([t,i])],this._lookAtData.bounds=this._clipAgainstGeoBounds(r))}},{key:"_clipAgainstGeoBounds",value:function(t){var e=Ii(Qi.getBBox(t),4),n=e[0],i=e[1],r=e[2],o=e[3],s=er.half_circumference_meters,a=[[n-1,+s],[r+1,+s],[r+1,-s],[n-1,-s]],l=Qi.clipPolygon(a,t)[0],c=Ii(Qi.getBBox(l),4);n=c[0],i=c[1],r=c[2],o=c[3],r-n>=er.circumference_meters&&(l=[[-s,o],[+s,o],[+s,i],[-s,i]]);var u=[];return l&&(u=Qi.splitLegs(l,s)),u}},{key:"applyPxOffset",value:function(t){var e=Ii(t,2),n=e[0],i=e[1],r=Math.PI-this._lookAtData.heading*oh,o=er.metersPerPixel(this._lookAtData.zoom);this._lookAtData.position[0]+=(n*Math.cos(r)+i*Math.sin(r))*o,this._lookAtData.position[1]-=(i*Math.cos(r)-n*Math.sin(r))*o,this._lookAtData.position[1]=Qi.clamp(this._lookAtData.position[1],-er.half_circumference_meters,er.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"screenToWorld",value:function(t){var e=Ii(t,2),n=e[0],i=e[1],r=this._viewport,o=r.width,s=r.height;return 0===o||0===s?[0,0]:(n-=o/2,i-=s/2,this._clipCoordsToWorldPlaneCoords([2*(n+o/2)/o-1,1-2*(i+s/2)/s,-1,1]))}},{key:"_clipToScreenCoords",value:function(t){var e=this._viewport,n=e.width,i=e.height;return[(.5*t[0]+.5)*n,i-(.5*t[1]+.5)*i]}},{key:"_isScreenPointInViewPort",value:function(t){var e=this._viewport,n=e.width,i=e.height;return 0<=t[0]&&t[0]<=n&&0<=t[1]&&t[1]<=i}},{key:"worldToScreen",value:function(t,e){var n,i,r,o,s,a,l=1<arguments.length&&void 0!==e&&e;return t[2]||(t[2]=0),l?(n=this._worldToClipCoords(t),s=this._clipToScreenCoords(n)):(i=Math.sign(this._lookAtData.position[0]),r=Math.trunc(this._lookAtData.position[0]/er.circumference_meters+i/2),t[0]+=er.circumference_meters*r,o=this._worldToClipCoords(t),a=s=this._clipToScreenCoords(o),this._isScreenPointInViewPort(s)||(o=this._worldToClipCoords([t[0]+er.circumference_meters,t[1],t[2]]),s=this._clipToScreenCoords(o),this._isScreenPointInViewPort(s)||(o=this._worldToClipCoords([t[0]-er.circumference_meters,t[1],t[2]]),s=this._clipToScreenCoords(o)),this._isScreenPointInViewPort(s)||(s=a))),s}},{key:"getHorizon",value:function(){return this._horizon}},{key:"_clipCoordsToWorldPlaneCoords",value:function(t){var e=[],n=this._lookAtData.distance,i=this._lookAtData.position,r=[0,0,n,0],o=0,s=n*Math.sin(oh*this._lookAtData.tilt)*Math.cos(oh*this._lookAtData.heading),a=n*Math.sin(oh*this._lookAtData.tilt)*Math.sin(oh*this._lookAtData.heading),l=new Float64Array(16),c=new Float64Array(16);return Yo(l,this._projection_matrix),Xo(e,t,l),e[2]=-1,e[3]=0,Yo(c,this._view_matrix),Xo(e,e,c),Zo(e,e),Xo(r,r,this._transformation_matrix),0!==e[2]&&(o=-r[2]/e[2]),Jo(e,e,o),[i[0]+(e[0]+a),i[1]+(e[1]+s)]}},{key:"_worldToClipCoords",value:function(t){var e=[t[0],t[1],t[2],1];return Xo(e,e,this._view_matrix),Xo(e,e,this._projection_matrix),Jo(e,e,1/e[3]),e}},{key:"setupProgram",value:function(t){t.uniform("Matrix4fv","u_projection",this._projection_matrix),t.uniform("3f","u_eye",[0,0,this._lookAtData.distance]),t.uniform("2fv","u_center_offset",this._center_offset_normalized),t.uniform("1f","u_tilt",this._lookAtData.tilt*oh),t.uniform("1f","u_heading",this._lookAtData.heading*oh),t.uniform("1f","u_near_plane",1),t.uniform("1f","u_depth_buffer_adjustment",this._depth_buffer_adjustment)}},{key:"getTransformationMatrix",value:function(){return this._transformation_matrix}},{key:"getCameraMatrix",value:function(){return this._camera_matrix}},{key:"clone",value:function(){var e=new t(this._viewport,this._lookAtData);return e.setZoomConstraints(this._min_zoom,this._max_zoom),e}},{key:"getViewport",value:function(){return this._viewport}}]),t}();function ah(t){return void 0===t.x?t[0]:t.x}function lh(t){return void 0===t.y?t[1]:t.y}function ch(t,e){return ah(t)-ah(e)}function uh(t,e){return lh(t)-lh(e)}function hh(t){return t.sort(ch)}function fh(t,e){for(var n,i=t[0],r=i,o=0;o<t.length;o+=1)e(n=t[o],i)<0?i=n:0<e(n,r)&&(r=n);return[i,r]}function ph(t,e){return Object.values(e.reduce((function(e,n){var i=n[+t];return e[i]||(e[i]=[]),e[i].push(n),e}),{}))}function dh(t,e,n){var i=+t,r=e[i],o=n[i];if(o<r)return[];var s=[e];if(o<r)return s;for(var a=e[(1+i)%2],l=t?function(t){return s.push([a,t])}:function(t){return s.push([t,a])},c=r+1;c<o;c+=1)l(c);return s.push(n),s}function gh(t,e){return dh(!1,t,e)}function mh(t,e){return dh(!0,t,e)}function vh(t){var e={},n=[];return t.forEach((function(t){var i=t.key||(Array.isArray(t)?"".concat(t[0],"/").concat(t[1]):"".concat(t.x,"/").concat(t.y));e[i]||(e[i]=!0,n.push(t))})),n}function yh(t){return t.reduce((function(t,e){return t.concat(e)}))}function bh(t,e,n){function i(e){return Object.values(er.metersToExactTileCoords(e,t.tile_level))}var r,o,s,a,l,c,u,h,f;return vh((r=function(t,e){return e<=0?t:vh((n=yh(ph(!1,t).map((function(t){var n=Ii(fh(t,uh),2),i=n[0],r=n[1],o=[i[0],i[1]-e],s=[r[0],r[1]+e];return t.concat(mh(o,i),mh(r,s))}))),yh(ph(!0,n).map((function(t){var n=Ii(fh(t,ch),2),i=n[0],r=n[1],o=[i[0]-e,i[1]],s=[r[0]+e,r[1]];return t.concat(gh(o,i),gh(r,s))})))));var n}((a=i(t.tetragon[0]),l=i(t.tetragon[1]),c=i(t.tetragon[3]),u=i(t.tetragon[2]),h=_h(l,a,c),f=_h(c,u,l),vh(h.concat(f))),e),o=t.tile_level,s=n,r.map((function(t){var e=Ii(t,2),n=e[0],i=e[1];return es.coord(er.wrapTile({x:n,y:i,z:o},{x:!s,y:!0}))}))))}function _h(t,e,n){var i=function(t,e,n){var i=Ii(t,2),r=i[0],o=i[1],s=Ii(e,2),a=s[0],l=s[1],c=Ii(n,2),u=c[0],h=c[1],f=r+(l-o)/(h-o)*(u-r);return[[[r,o]].concat(Pi(hh([[a,l],[f,l]]))),[].concat(Pi(hh([[a,l],[f,l]])),[[u,h]])]}.apply(void 0,Pi([t,e,n].sort(uh))),r=Ii(i,2),o=r[0],s=r[1];return vh(function(t,e,n){var i=Ii(t,2),r=i[0],o=i[1],s=Ii(e,2),a=s[0],l=s[1];return wh(r,a,Ii(n,1)[0],o,l)}.apply(void 0,Pi(o)).concat(function(t,e,n){var i=Ii(t,2),r=i[0],o=i[1],s=Ii(e,1)[0],a=Ii(n,2);return wh(a[0],r,s,a[1],o)}.apply(void 0,Pi(s))))}function wh(t,e,n,i,r){var o,s,a,l,c,u,h,f,p,d,g=Math.min(t,e),m=Math.max(t,n),v=Math.min(i,r),y=Math.max(i,r);if(Math.floor(i)===Math.floor(r))return Sh(g,m,i);if(y-v<.125)return o=[m,y],a=(s=Ii([g,v],2))[0],l=s[1],u=(c=Ii(o,2))[0],h=c[1],p=xh(f=kh(a,u),l),d=xh(f,h),p.concat(d);function b(t){E=E.concat(Sh(T,C,Math.floor(t))),T+=S,C+=A}var _,w,x=.125*((w=y)-(_=v))/(Math.ceil(w)-Math.floor(_)),k=(y-v)/x,S=(e-t)/k,A=(n-t)/k,E=[],T=t,C=t;if(i<r)for(var M=v;M<=y;M+=x)b(M);else for(var L=y;v<=L;L-=x)b(L);return vh(E)}function xh(t,e){return t.map((function(t){return[t,e]}))}function kh(t,e){var n=Math.floor(t),i=Math.floor(e);if(i<n)return[];if(n===i)return[n];for(var r=[],o=n;o<=i;o+=1)r.push(o);return r}function Sh(t,e,n){return xh(kh(t,e),n)}var Ah=function(){function t(e,n){yi(this,t),Io(this),this.scene=e,this.createMatrices(),this.bounds=null,this.center_tile=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={},this.buffer=0,this.wrap=!1!==n.wrapView,this.preserve_tiles_within_zoom=1,this.lookAtManipulator=new sh(n.viewport),this._viewport=n.viewport,this._offset_buffer=[0,0],this.handleViewportUpdate(!0)}return _i(t,[{key:"update",value:function(){this.pan_snap_timer=(new Date-this.panning_stop_at)/1e3,this.user_input_active=new Date-this.user_input_at<this.user_input_timeout,this.scene.tile_manager.updateTilesVisibilityCounters()}},{key:"handleViewportUpdate",value:function(t){var e=0<arguments.length&&void 0!==t&&t,n=this._viewport,i=n.width,r=n.height;this.size.css={width:i,height:r},this.size.device={width:Math.round(i*Tr.device_pixel_ratio),height:Math.round(r*Tr.device_pixel_ratio)},this.lookAtManipulator.handleViewportUpdate(),e||this.updateBounds()}},{key:"setLookAtData",value:function(e,n){t._setLookAtDataForManipulator(this.lookAtManipulator,e,n),this.updateBounds()}},{key:"getLookAtData",value:function(e){var n=0<arguments.length&&void 0!==e&&e;return t._getLookAtDataFromManipulator(this.lookAtManipulator,n)}},{key:"getBestLookAtData",value:function(e,n,i){var r=2<arguments.length&&void 0!==i&&i,o=this.lookAtManipulator.clone();return t._setLookAtDataForManipulator(o,e,n),t._getLookAtDataFromManipulator(o,r)}},{key:"getTileLevel",value:function(){return this.lookAtManipulator.getLookAtData().tile_level}},{key:"applyPxOffset",value:function(t){var e=this._offset_buffer;e[0]+=t[0],e[1]+=t[1];var n,i,r=Math.abs(e[0]),o=Math.abs(e[1]);(1<=r||1<=o)&&(n=~~e[0],i=~~e[1],this.lookAtManipulator.applyPxOffset([r<1?0:n,o<1?0:i]),1<=r&&(e[0]-=n),1<=o&&(e[1]-=i),this.updateBounds())}},{key:"setPanning",value:function(t){this.panning=t,this.panning||(this.panning_stop_at=+new Date)}},{key:"markUserInput",value:function(){this.user_input_at=+new Date}},{key:"ready",value:function(){return"number"==typeof this.size.css.width&&"number"==typeof this.size.css.height}},{key:"updateBounds",value:function(){var t,e;this.markUserInput(),this.ready()&&(this.center_tile=er.tileForMeters(this.lookAtManipulator.getLookAtData().position,this.lookAtManipulator.getLookAtData().tile_level),t=this.lookAtManipulator.screenToWorld([0,this.size.css.height]),e=this.lookAtManipulator.screenToWorld([this.size.css.width,0]),this.bounds={sw:{x:t[0],y:t[1]},ne:{x:e[0],y:e[1]}},this.scene.tile_manager.updateTilesForView(!0),this.trigger("move"),this.scene.requestRedraw())}},{key:"getTileGridFlatForBBox",value:function(t,e,n,i,r,o){var s,a=4<arguments.length&&void 0!==r?r:0,l=!(5<arguments.length&&void 0!==o)||o,c=this.lookAtManipulator.getLookAtData().tile_level,u=er.tileForMeters([e,t],c),h=er.tileForMeters([i,n],c);u.x-=a,u.y-=a,h.x+=a,h.y+=a,!1===l&&(s=(1<<c)-1,u.x=Math.min(Math.max(0,u.x),s),u.y=Math.min(Math.max(0,u.y),s),h.x=Math.min(Math.max(0,h.x),s),h.y=Math.min(Math.max(0,h.y),s));for(var f=[],p={},d=u.x;d<=h.x;d++)for(var g=u.y;g<=h.y;g++){var m=es.coord(er.wrapTile({x:d,y:g,z:c},{x:!l,y:!0}));p[m.key]||(p[m.key]=!0,f.push(m))}return f}},{key:"getTileGridFlat",value:function(){return this.getTileGridFlatForBBox(this.bounds.ne.y,this.bounds.sw.x,this.bounds.sw.y,this.bounds.ne.x,this.buffer,this.wrap)}},{key:"getTileGridDistorted",value:function(){return bh(this.lookAtManipulator.getLookAtData(),this.buffer,this.wrap)}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var t=this.lookAtManipulator.getLookAtData(),e=t.tilt,n=t.heading;return 0===e&&180===n?this.getTileGridFlat():this.getTileGridDistorted()}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function(t,e){t.setupProgram(this.matrices,e),this.lookAtManipulator.setupMatrices(this.matrices,e)}},{key:"setupProgram",value:function(t){var e=this.lookAtManipulator.getLookAtData();t.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),t.uniform("3fv","u_map_position",[e.position[0],e.position[1],Math.trunc(1e5*e.zoom)/1e5]),t.uniform("1f","u_meters_per_pixel",er.metersPerPixel(e.zoom)),t.uniform("1f","u_device_pixel_ratio",Tr.device_pixel_ratio),t.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),t.uniform("1i","u_view_panning",this.panning),t.uniform("1f","u_horizon",this.lookAtManipulator.getHorizon()/(this.size.css.height/2)),this.lookAtManipulator.setupProgram(t)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=.5}},{key:"xyToGeo",value:function(t,e){var n=this.lookAtManipulator.screenToWorld([t,e]),i=Ii(er.metersToLatLng(n),2),r=i[0];return{lat:i[1],lng:r}}},{key:"geoToPixel",value:function(t){var e=er.latLngToMeters([t.lng,t.lat]);e.push(t.alt||0);var n=this.lookAtManipulator.worldToScreen(e);return{x:Math.floor(n[0]),y:Math.floor(n[1])}}},{key:"geoToMeters",value:function(t){var e=Ii(er.latLngToMeters([t.lng,t.lat]),2);return{x:e[0],y:e[1],z:t.alt||0}}},{key:"metersToGeo",value:function(t){var e=Ii(er.metersToLatLng([t.x,t.y]),2),n=e[0];return{lat:e[1],lng:n,alt:t.z||0}}},{key:"setZoomConstraints",value:function(t,e){this.lookAtManipulator.setZoomConstraints(t,e)}}],[{key:"_setLookAtDataForManipulator",value:function(t,e,n){var i=e.position,r=e.zoom,o=e.tilt,s=e.heading,a=e.bounds,l={zoom:r,tilt:o,heading:s};if(i&&"number"==typeof i.lng&&"number"==typeof i.lat&&(l.position=er.latLngToMeters([i.lng,i.lat])),a){for(var c=a.getExterior().getLatLngAltArray(),u=c.length/3,h=Array(u),f=0;f<u;f++)h[f]=er.latLngToMeters([c[3*f+1],c[3*f]]);l.bounds=h}t.setLookAtData(l,n)}},{key:"_getLookAtDataFromManipulator",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e,i=t.getLookAtData(),r=i.heading,o=i.incline,s=i.tilt,a=i.zoom,l=i.position,c=i.bounds,u=i.unpadded_bounds,h=Ii(er.metersToLatLng(l),2),f=h[0],p=h[1],d=new H.geo.LineString;return(n?u:c).forEach((function(t){var e=er.metersToLatLng(t);d.pushLatLngAlt(e[1],e[0],0)})),{heading:r,incline:o,tilt:s,zoom:a,bounds:new H.geo.Polygon(d),position:{lat:p,lng:f,alt:l[2]}}}}]),t}(),Eh=Iu.PLACEMENT,Th=128/Math.PI,Ch=16384/Math.PI,Mh=Object.create(sc);Mh.variants={},Object.assign(Mh,rh),Object.assign(Mh,{name:"points",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform bool u_tile_fade_in;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform bool u_view_panning;uniform float u_tilt;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform float u_heading;uniform float u_near_plane;uniform float u_depth_buffer_adjustment;attribute vec4 a_position;attribute vec4 a_shape;attribute vec4 a_color;attribute vec2 a_texcoord;attribute vec2 a_offset;uniform float u_point_type;attribute float a_is_flat;\n#ifdef TANGRAM_IS_TEXT_STYLE\nattribute vec4 a_offsets_alt;attribute vec4 a_pre_angles_alt;attribute vec4 a_angles_alt;attribute vec4 a_offsets;attribute vec4 a_pre_angles;attribute vec4 a_angles;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nattribute float a_is_stick;attribute float a_stick_height;varying float v_is_stick;\n#endif\nvarying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nattribute float a_outline_edge;attribute vec4 a_outline_color;varying float v_outline_edge;varying vec4 v_outline_color;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#define PI 3.14159265359\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvec2 rotate2D(vec2 _st,float _angle){return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle))*_st;}vec3 rotateX3D(vec3 _st,float _angle){return mat3(1.,0.,0.,0.,cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle))*_st;}vec3 rotateZ3D(vec3 _st,float _angle){return mat3(cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle),0.,0.,0.,1.)*_st;}\n#ifdef TANGRAM_IS_TEXT_STYLE\nfloat mix4linear(float a,float b,float c,float d,float x){return mix(mix(a,b,3.*x),mix(b,mix(c,d,3.*(max(x,.66)-.66)),3.*(clamp(x,.33,.66)-.33)),step(0.33,x));}\n#endif\nvoid main(){\n#pragma tangram: setup\n#ifndef TANGRAM_SHOW_HIDDEN_LABELS\nif(a_shape.w==0.){gl_Position=vec4(0.,0.,0.,1.);return;}\n#else\nif(a_shape.w==0.){v_label_hidden=1.;}else{v_label_hidden=0.;}\n#endif\nv_alpha_factor=1.0;v_color=a_color;v_texcoord=a_texcoord;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nv_outline_color=a_outline_color;v_outline_edge=a_outline_edge;if(u_point_type==TANGRAM_POINT_TYPE_SHADER){v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;float size=abs(a_shape.x/128.);v_texcoord=sign(a_shape.xy)*(size+1.0)/size;size+=2.0;v_aa_offset=2.0/size;}\n#endif\nvec4 position=u_modelView*vec4(a_position.xyz,1.);vec4 shape=vec4(a_shape.xy,0.,0.);vec2 offset=vec2(a_offset.x,-a_offset.y);\n#ifdef TANGRAM_POINT_DRAW_STICK\nv_is_stick=a_is_stick;float scaled_stick_height=(sin(u_tilt+(1.5*PI))+1.0)*a_stick_height;offset.y+=(1.0-a_is_stick)*scaled_stick_height;\n#endif\nfloat zoom=clamp(u_map_position.z-u_tile_origin.z,0.,1.);float theta=a_shape.z/4096.;float heading=u_heading;float delta=(heading-PI);float new_theta=theta-delta;float reversed=abs(new_theta)>PI/2. ? 1. : 0.;if(a_is_flat==1.0){\n#ifdef TANGRAM_IS_TEXT_STYLE\nif(a_offsets[0]!=0.){vec4 angles_scaled;vec4 pre_angles_scaled;vec4 offsets_scaled;if(reversed==1.){offsets_scaled=a_offsets_alt*4.;angles_scaled=(PI/16384.)*a_angles_alt;pre_angles_scaled=(PI/128.)*a_pre_angles_alt;}else{offsets_scaled=a_offsets*4.;angles_scaled=(PI/16384.)*a_angles;pre_angles_scaled=(PI/128.)*a_pre_angles;}float pre_angle=mix4linear(pre_angles_scaled[0],pre_angles_scaled[1],pre_angles_scaled[2],pre_angles_scaled[3],zoom);float angle=mix4linear(angles_scaled[0],angles_scaled[1],angles_scaled[2],angles_scaled[3],zoom);float offset_curve=mix4linear(offsets_scaled[0],offsets_scaled[1],offsets_scaled[2],offsets_scaled[3],zoom);shape.xy=rotate2D(shape.xy,pre_angle+PI*reversed);shape.x+=offset_curve;shape.xy=rotate2D(shape.xy,angle);shape.xy+=rotate2D(offset,theta);}else{shape.xy=rotate2D(shape.xy+offset*256.,theta+(PI*reversed));}\n#else\nshape.xy=rotate2D(shape.xy+offset*256.,theta);\n#endif\nshape.xy/=pow(2.,4.+(u_map_position.z-u_tile_origin.w));shape=u_modelView*shape;position+=shape;}else{shape.xy/=256.;\n#ifdef TANGRAM_POINT_DRAW_STICK\nshape.y*=1.0+(scaled_stick_height-1.0)*a_is_stick;\n#endif\nshape.xy=rotate2D(shape.xy+offset,theta);}\n#ifdef TANGRAM_FADE_IN_RATE\nif(u_tile_fade_in){v_alpha_factor*=clamp(u_visible_time*TANGRAM_FADE_IN_RATE,0.,1.);}\n#endif\n#ifdef TANGRAM_FADE_ON_ZOOM_OUT\nv_alpha_factor*=clamp(1.+TANGRAM_FADE_ON_ZOOM_OUT_RATE*(u_map_position.z-u_tile_origin.z),0.,1.);\n#endif\nv_world_position=u_model*position;v_world_position.xy+=shape.xy*u_meters_per_pixel;v_world_position=wrapWorldPosition(v_world_position);\n#pragma tangram: position\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);/***Due to the precision loss on depth buffer,we had a z-fighting of translucent points when the distance to the camera was big.*For more information about the problem see: https:*For more information about the fix see: https:*position.z=(2.0*log(position.w/u_near_plane)/log(u_far_plane/u_near_plane)-1.0)*position.w;*/position.z=(log(position.w/u_near_plane)*u_depth_buffer_adjustment-1.0)*position.w;\n#endif\nif(a_is_flat!=1.){position.xy+=shape.xy*position.w*2.*u_device_pixel_ratio/u_resolution;}\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_SHADER){position.xy+=sign(shape.xy)*position.w*u_device_pixel_ratio/u_resolution;}\n#endif\nif(!u_view_panning){snapToPixelGrid(position);}gl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_texture;uniform float u_point_type;uniform bool u_apply_color_blocks;varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nvarying vec4 v_outline_color;varying float v_outline_edge;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nvarying float v_is_stick;\n#endif\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#ifdef TANGRAM_HAS_SHADER_POINTS\nfloat _tangram_antialias(float l,float R){float low=R-v_aa_offset;float high=R+v_aa_offset;return 1.-smoothstep(low,high,l);}\n#endif\nvoid mixTextureColor(inout vec4 color){\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_TEXTURE){color*=texture2D(u_texture,v_texcoord);}else if(u_point_type==TANGRAM_POINT_TYPE_LABEL){color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);}else if(u_point_type==TANGRAM_POINT_TYPE_SHADER){float outline_edge=v_outline_edge;vec4 outlineColor=v_outline_color;float l=length(v_texcoord);float outer_alpha=_tangram_antialias(l,1.);float fill_alpha=_tangram_antialias(l,1.-v_outline_edge*0.5)*color.a;float stroke_alpha=(outer_alpha-_tangram_antialias(l,1.-v_outline_edge))*outlineColor.a;\n#ifdef TANGRAM_BLEND_ADD\ncolor.a=stroke_alpha+fill_alpha;color.rgb=color.rgb*fill_alpha+outlineColor.rgb*stroke_alpha;\n#else\ncolor.a=stroke_alpha+fill_alpha*(1.-stroke_alpha);color.rgb=mix(color.rgb*fill_alpha,outlineColor.rgb,stroke_alpha)/max(color.a,0.001);\n#endif\n}\n#else\ncolor=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);\n#endif\nif(u_apply_color_blocks){\n#pragma tangram: color\n#pragma tangram: filter\n}color.a*=v_alpha_factor;\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nif(v_label_hidden>0.){color.a*=0.5;color.rgb=vec3(1.,0.,0.);}\n#endif\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY) && !defined(TANGRAM_BLEND_ADD)\nif(color.a<TANGRAM_ALPHA_TEST){discard;}\n#endif\n}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;\n#ifdef TANGRAM_POINT_DRAW_STICK\nif(v_is_stick==0.0){mixTextureColor(color);}\n#else\nmixTextureColor(color);\n#endif\ngl_FragColor=color;}",selection:!0,collision:!0,blend:"overlay",init:function(t){var e=0<arguments.length&&void 0!==t?t:{};sc.init.call(this,e),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=1,this.defines.TANGRAM_POINT_TYPE_LABEL=2,this.defines.TANGRAM_POINT_TYPE_SHADER=3,this.defines.TANGRAM_POINT_DRAW_STICK=!!this.stick,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},setupDefines:function(){"overlay"!==this.blend&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,Pl.suppress_label_fade_in||this.suppress_fade?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),Pl.suppress_snap_animation||(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=2),Pl.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(t,e,n){var i,r,o,s=n.tile,a={};if(a.color=this.parseColor(e.color,n),a.texture=e.texture,a.label_texture=null,a.color||a.texture){if(this.hasSprites(a)){if(!(i=this.parseSprite(a,e,n)))return;a.texcoords=i.texcoords}if(a.size=e.size,a.size){if(a.size=_o.evalCachedPointSizeProperty(e.size,i,n),null==a.size)return void Ar({level:"warn",once:!0},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"'size' includes % and/or ratio-based scaling (".concat(JSON.stringify(e.size.value),"); ")+"these can only applied to sprites, but no sprite was specified, skipping features in layer");"number"==typeof a.size&&(a.size=[a.size,a.size])}else a.size=i&&i.css_size||[16,16];e.outline&&(a.outline_width=_o.evalCachedProperty(e.outline.width,n)||_o.defaults.outline.width,a.outline_color=this.parseColor(e.outline.color,n)),a.outline_edge_pct=0,a.outline_width&&a.outline_color&&(r=a.outline_width,a.size[0]+=r,a.size[1]+=r,a.outline_edge_pct=r/Math.min(a.size[0],a.size[1])*2),a.size[0]=Math.min(a.size[0],256),a.size[1]=Math.min(a.size[1],256),a.placement=e.placement,a.placement_min_length_ratio=_o.evalCachedProperty(e.placement_min_length_ratio,n),a.placement===Eh.SPACED&&e.placement_spacing&&(a.placement_spacing=_o.evalCachedProperty(e.placement_spacing,n)),a.angle=_o.evalProperty(e.angle,n)||0,a.elevate_by_altitude=!!e.elevate_by_altitude,a.z=e.z?Qi.clamp(_o.evalCachedDistanceProperty(e.z,n),0,32767):_o.defaults.z,a.flat=e.flat,a.tile_edges=e.tile_edges,this.computeLayout(a,t,e,n,s),e.stick&&!a.flat&&(o=_o.parseNumber(_o.evalProperty(e.stick.height,n)),a.stick={color:this.parseColor(e.stick.color,n)||_o.defaults.color,height:o?Math.max(o,0):0});var l=e.text&&!1!==_o.evalProperty(e.text.visible,n)&&this.parseTextFeature(t,e.text,n,s);Array.isArray(l)&&Ar({level:"warn",once:!(l=null)},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+"provided 'text_source' value was ".concat(JSON.stringify(e.text.text_source))),l&&(l.layout.parent=a,l.layout.priority=e.text.priority?Math.max(l.layout.priority,a.priority+.5):a.priority+.5,l.layout.move_into_tile=!1,Mo.addStyle(this.collision_group_text,s.id)),this.queueFeature({feature:t,draw:e,context:n,style:a,text_feature:l},s),Mo.addStyle(this.collision_group_points,s.id)}},hasSprites:function(t){return t.texture&&this.textureManager.textures[t.texture]&&this.textureManager.textures[t.texture].sprites},getSpriteInfo:function(t,e){var n=this.textureManager.textures[t.texture].sprites[e]&&this.textureManager.getSpriteInfo(t.texture,e);return e&&!n?(this.texture_missing_sprites[t.texture]=this.texture_missing_sprites[t.texture]||{},this.texture_missing_sprites[t.texture][e]||(Ar("debug","Style: in style '".concat(this.name,"', could not find sprite '").concat(e,"' for texture '").concat(t.texture,"'")),this.texture_missing_sprites[t.texture][e]=!0)):n&&(n.sprite=e),n},parseSprite:function(t,e,n){var i=_o.evalProperty(e.sprite,n);return this.getSpriteInfo(t,i)||this.getSpriteInfo(t,e.sprite_default)},queueFeature:function(t,e){this.tile_data[e.id]&&this.queues[e.id]||this.startData(e),this.queues[e.id]=this.queues[e.id]||[],this.queues[e.id].push(t)},endData:function(t){var e=this;if(t.canceled)return Ar("trace","Style ".concat(this.name,": stop tile build because tile was canceled: ").concat(t.key)),Promise.resolve();var n=this.queues[t.id];delete this.queues[t.id];var i=[],r=[];return n.forEach((function(t){for(var n=t.style,o=t.feature,s=o.geometry,a=e.buildLabels(n.size,s,n),l=0;l<a.length;l++){var c,u=a[l],h={feature:o,draw:t.draw,context:t.context,style:n,label:u};r.push(h),t.text_feature&&(c={feature:o,draw:t.text_feature.draw,context:t.context,text:t.text_feature.text,text_settings_key:t.text_feature.text_settings_key,layout:t.text_feature.layout,point_label:u,linked:h},i.push(c),t.draw.text.optional||(h.linked=c))}})),Promise.all([Mo.collide(r,this.collision_group_points,t.id).then((function(t){t.forEach((function(t){e.feature_style=t.style,e.feature_style.label=t.label,e.feature_style.linked=t.linked,sc.addFeature.call(e,t.feature,t.draw,t.context)}))})),this.collideAndRenderTextLabels(t,this.collision_group_text,i)]).then((function(n){var i=Ii(n,2)[1],r=i.labels,o=i.texts;return r&&o&&r.forEach((function(t){var n=t.text_settings_key,i=o[n]&&o[n][t.text],r=e.feature_style;r.label=t.label,r.linked=t.linked,r.size=i.size.logical_size,r.angle=0,t.label.text_data={text_info:i,text_settings_key:n,text:t.text},r.label_texture=e.textureManager.default,sc.addFeature.call(e,t.feature,t.draw,t.context)})),e.freeText(t),sc.endData.call(e,t)}))},_preprocess:function(t){t.color=_o.createColorPropertyCache(t.color),t.texture=void 0!==t.texture?t.texture:this.texture,t.outline&&(t.outline.color=_o.createColorPropertyCache(t.outline.color),t.outline.width=_o.createPropertyCache(t.outline.width,_o.parsePositiveNumber)),t.z=_o.createPropertyCache(t.z,_o.parseUnits);try{t.size=_o.createPointSizePropertyCache(t.size)}catch(o){return Ar({level:"warn",once:!0},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"".concat(o," (").concat(JSON.stringify(t.size),"), skipping features in layer")),null}return t.offset=_o.createPropertyCache(t.offset,(function(t){return Array.isArray(t)&&t.map(_o.parseNumber)})),t.buffer=_o.createPropertyCache(t.buffer,(function(t){return(Array.isArray(t)?t:[t,t]).map(_o.parsePositiveNumber)})),t.repeat_distance=_o.createPropertyCache(t.repeat_distance,_o.parseNumber),null==t.repeat_group&&(t.repeat_group=t.layers.join("-")),t.placement=Eh[t.placement&&t.placement.toUpperCase()],null==t.placement&&(t.placement=Eh.VERTEX),t.placement_spacing=null!=t.placement_spacing?t.placement_spacing:80,t.placement_spacing=_o.createPropertyCache(t.placement_spacing,_o.parsePositiveNumber),t.placement_min_length_ratio=null!=t.placement_min_length_ratio?t.placement_min_length_ratio:1,t.placement_min_length_ratio=_o.createPropertyCache(t.placement_min_length_ratio,_o.parsePositiveNumber),"number"==typeof t.angle?t.angle=t.angle*Math.PI/180:t.angle=t.angle||0,t.text=this.preprocessText(t.text),t.text&&(t.text.key=t.key,t.text.group=t.group,t.text.layers=t.layers,t.text.order=t.order,t.text.repeat_group=t.text.repeat_group||t.repeat_group,t.text.anchor=t.text.anchor||this.default_anchor,t.text.optional="boolean"==typeof t.text.optional&&t.text.optional,t.text.interactive=t.text.interactive||t.interactive),t.stick&&(t.stick.color=_o.createColorPropertyCache(t.stick.color)),t},default_anchor:["bottom","top","right","left"],computeLayout:function(t,e,n,i,r){var o=t||{};o.id=e,o.units_per_pixel=r.units_per_pixel||1,o.collide=!1!==n.collide,o.anchor=n.anchor,o.offset=_o.evalCachedProperty(n.offset,i)||_o.zeroPair,o.buffer=_o.evalCachedProperty(n.buffer,i)||_o.zeroPair,o.repeat_distance=_o.evalCachedProperty(n.repeat_distance,i),o.repeat_distance&&(o.repeat_distance*=o.units_per_pixel,o.repeat_scale=1,"function"==typeof n.repeat_group?o.repeat_group=n.repeat_group(i):o.repeat_group=n.repeat_group);var s=n.priority;return null!=s?"function"==typeof s&&(s=s(i)):s=-1>>>0,o.priority=s,o},buildTextLabels:function(t,e){for(var n=[],i=0;i<e.length;i++){var r=e[i],o=this.texts[t.id][r.text_settings_key][r.text].size.collision_size;r.label=new Iu(r.point_label.position,o,r.point_label.isFlat(),r.layout),n.push(r)}return n},buildLabels:function(t,e,n){var i=!!n.flat,r=[];if("Point"===e.type)r.push(new Iu(e.coordinates,t,i,n));else if("MultiPoint"===e.type)for(var o=e.coordinates,s=0;s<o.length;++s){var a=o[s];r.push(new Iu(a,t,i,n))}else if("LineString"===e.type)for(var l=Nu(e.coordinates,t,i,n),c=0;c<l.length;++c)r.push(l[c]);else if("MultiLineString"===e.type)for(var u=e.coordinates,h=0;h<u.length;h++)for(var f=Nu(u[h],t,i,n),p=0;p<f.length;++p)r.push(f[p]);else if("Polygon"===e.type)if(n.placement===Eh.CENTROID){var d=er.centroid(e.coordinates);r.push(new Iu(d,t,i,n))}else for(var g=e.coordinates,m=0;m<g.length;m++)for(var v=Nu(g[m],t,i,n),y=0;y<v.length;++y)r.push(v[y]);else if("MultiPolygon"===e.type)if(n.placement===Eh.CENTROID){var b=er.multiCentroid(e.coordinates);r.push(new Iu(b,t,i,n))}else for(var _=e.coordinates,w=0;w<_.length;w++)for(var x=_[w],k=0;k<x.length;k++)for(var S=Nu(x[k],t,i,n),A=0;A<S.length;++A)r.push(S[A]);return r},makeVertexTemplate:function(t,e){var n,i=t.color||_o.defaults.color,r=e.vertex_data.vertex_layout;return this.fillVertexTemplate(r,"a_position",0,{size:2}),this.fillVertexTemplate(r,"a_position",t.z||0,{size:1,offset:2}),this.fillVertexTemplate(r,"a_position",this.scaleOrder(t.order),{size:1,offset:3}),this.fillVertexTemplate(r,"a_shape",0,{size:4}),this.fillVertexTemplate(r,"a_shape",t.label.layout.collide?0:1,{size:1,offset:3}),this.fillVertexTemplate(r,"a_texcoord",0,{size:2}),this.fillVertexTemplate(r,"a_offset",0,{size:2}),this.fillVertexTemplate(r,"a_color",Jl.mult(i,255),{size:4}),this.defines.TANGRAM_HAS_SHADER_POINTS&&e.variant.shader_point&&(n=t.outline_color||_o.defaults.outline.color,this.fillVertexTemplate(r,"a_outline_color",Jl.mult(n,255),{size:4}),this.fillVertexTemplate(r,"a_outline_edge",t.outline_edge_pct||_o.defaults.outline.width,{size:1})),this.selection&&this.fillVertexTemplate(r,"a_selection_color",Jl.mult(t.selection_color,255),{size:4}),this.fillVertexTemplate(r,"a_is_flat",0,{size:1}),this.defines.TANGRAM_POINT_DRAW_STICK&&t.stick&&(this.fillVertexTemplate(r,"a_is_stick",0,{size:1}),this.fillVertexTemplate(r,"a_stick_height",t.stick.height,{size:1})),this.vertex_template},buildQuad:function(t,e,n,i,r,o,s,a,l,c,u,h,f,p,d,g,m,v,y){return e[0]<=0||e[1]<=0?0:function(t,e,n,i){var r,o,s,a,l,c,u=i.quad,h=i.offset,f=i.offsets,p=i.offsets_alt,d=i.pre_angles,g=i.pre_angles_alt,m=i.angle,v=i.angles,y=i.angles_alt,b=i.is_flat,_=i.elevate_by_altitude,w=i.build_stick_points,x=i.color,k=i.stick_color,S=i.curve,A=i.texcoord_scale,E=i.texcoord_normalize,T=i.pre_angles_normalize,C=i.angles_normalize,M=i.offsets_normalize,L=(L=i.quad_normalize)||1,R=u[0]/2*L,O=u[1]/2*L,I=[[-R,-O],[R,-O],[R,O],[-R,O]],P=e.vertex_elements,N=e.vertex_count,D=e.vertex_layout.index,j=D.a_texcoord,z=D.a_position,$=D.a_shape,F=D.a_offset,B=D.a_offsets,H=D.a_offsets_alt,U=D.a_pre_angles,G=D.a_pre_angles_alt,V=D.a_angles,W=D.a_angles_alt,q=D.a_is_flat,K=D.a_is_stick,Y=D.a_color;j&&(E=E||1,c=[[o=(r=Ii(A||mc,4))[0],s=r[1]],[a=r[2],s],[a,l=r[3]],[o,l]]);for(var X=0,Z=t.length,J=0;J<Z;J++){var Q=t[J];if(w){for(var tt=.5*L,et=+L,nt=[[-tt,0],[+tt,0],[+tt,et],[-tt,et]],it=0;it<4;it++)j&&(n[j+0]=c[it][0]*E,n[j+1]=c[it][1]*E),n[z+0]=Q[0],n[z+1]=Q[1],_&&(n[z+2]=Qi.clamp(Q[2],0,32767)),n[$+0]=nt[it][0],n[$+1]=nt[it][1],n[$+2]=0,n[Y+0]=k[0],n[Y+1]=k[1],n[Y+2]=k[2],n[Y+3]=k[3],n[K+0]=255,e.addVertex(n);P.push(N+0),P.push(N+1),P.push(N+2),P.push(N+2),P.push(N+3),P.push(N+0),N+=4,X+=2}for(var rt=0;rt<4;rt++)j&&(n[j+0]=c[rt][0]*E,n[j+1]=c[rt][1]*E),n[z+0]=Q[0],n[z+1]=Q[1],_&&(n[z+2]=Qi.clamp(Q[2],0,32767)),n[$+0]=I[rt][0],n[$+1]=I[rt][1],n[$+2]=m,n[Y+0]=x[0],n[Y+1]=x[1],n[Y+2]=x[2],n[Y+3]=x[3],n[F+0]=h[0],n[F+1]=h[1],n[q+0]=b?255:0,w&&(n[K+0]=0),S&&(n[U+0]=T*d[0],n[U+1]=T*d[1],n[U+2]=T*d[2],n[U+3]=T*d[3],n[V+0]=C*v[0],n[V+1]=C*v[1],n[V+2]=C*v[2],n[V+3]=C*v[3],n[B+0]=M*f[0],n[B+1]=M*f[1],n[B+2]=M*f[2],n[B+3]=M*f[3],p&&(n[H+0]=M*p[0],n[H+1]=M*p[1],n[H+2]=M*p[2],n[H+3]=M*p[3],n[G+0]=T*g[0],n[G+1]=T*g[1],n[G+2]=T*g[2],n[G+3]=T*g[3],n[W+0]=C*y[0],n[W+1]=C*y[1],n[W+2]=C*y[2],n[W+3]=C*y[3])),e.addVertex(n);P.push(N+0),P.push(N+1),P.push(N+2),P.push(N+2),P.push(N+3),P.push(N+0),N+=4,X+=2}return X}(t,d,g,{quad:e,quad_normalize:256,offset:a,offsets:l,offsets_alt:c,pre_angles:o,pre_angles_alt:s,angle:4096*n,angles:i,angles_alt:r,is_flat:f,elevate_by_altitude:p,build_stick_points:m,stick_color:m&&Jl.mult(v,255),color:Jl.mult(y||_o.defaults.color,255),curve:h,texcoord_scale:u,texcoord_normalize:65535,pre_angles_normalize:Th,angles_normalize:Ch,offsets_normalize:64})},build:function(t,e,n){var i=t.label;return"curved"===i.type?this.buildCurvedLabel(i,t,e,n):this.buildStraightLabel(i,t,e,n)},buildStraightLabel:function(t,e,n,i){var r,o=this.makeVertexTemplate(e,n),s=t.angle||e.angle,a="point"!==t.type?(r=e.size[t.type],mc):(r=e.size,e.texcoords||mc);n.uniforms=n.uniforms||{},e.label_texture?(n.uniforms.u_texture=e.label_texture,n.uniforms.u_point_type=2,n.uniforms.u_apply_color_blocks=!1):(e.texture?(n.uniforms.u_texture=e.texture,n.uniforms.u_point_type=1):(n.uniforms.u_texture=this.textureManager.default,n.uniforms.u_point_type=3),n.uniforms.u_apply_color_blocks=!0);var l=t.offset,c=this.defines.TANGRAM_POINT_DRAW_STICK&&!e.label_texture&&e.stick&&0<e.stick.height,u=this.buildQuad([t.position],r,s,null,null,null,null,l,null,null,a,!1,t.isFlat(),e.elevate_by_altitude,n.vertex_data,o,c,c&&e.stick.color,e.color),h=e.linked&&e.linked.label.id;return this.trackLabel(t,h,n,u,i,c),u},buildCurvedLabel:function(t,e,n,i){for(var r=this.makeVertexTemplate(e,n),o=t.angle,s=0,a=0;a<2;a++)for(var l=0;l<t.num_segments;l++){var c=e.size[t.type][l],u=mc,h=this.getTileMesh(i.tile,this.meshVariantTypeForDraw(e));h.uniforms=h.uniforms||{},h.uniforms.u_texture=e.label_texture,h.uniforms.u_point_type=2,h.uniforms.u_apply_color_blocks=!1;var f=t.offset||[0,0],p=t.position,d=t.angles[l],g=t.offsets[l],m=t.pre_angles[l],v=t.num_segments-l-1,y=t.alt_angles[v],b=t.alt_pre_angles[v],_=t.alt_offsets[v],w=this.buildQuad([p],c,o,d,y,m,b,f,g,_,u,!0,t.isFlat(),e.elevate_by_altitude,h.vertex_data,r,!1,!1,e.color);s+=w;var x=e.linked&&e.linked.label.id;this.trackLabel(t,x,n,w,i,!1)}return s},trackLabel:function(t,e,n,i,r,o){var s=5<arguments.length&&void 0!==o&&o;n.labels=n.labels||{},n.labels.collision=n.labels.collision||{},n.labels["non-collision"]=n.labels["non-collision"]||{};var a=t.layout.collide?n.labels.collision:n.labels["non-collision"];a[t.id]=a[t.id]||{container:{label:t.text_data?Object.assign(t.toJSON(),{text_data:t.text_data}):t.toJSON(),linked:e},ranges:[]};var l=2*i,c=n.vertex_data.offset-n.vertex_data.stride*l;a[t.id].ranges.push([c,l,s])},buildLines:function(t,e,n,i){return this.build(e,n,i)},buildPoints:function(t,e,n,i){return this.build(e,n,i)},buildPolygons:function(t,e,n,i){return this.build(e,n,i)},vertexLayoutForMeshVariant:function(t){var e;return this.vertex_layout||(e=[{name:"a_position",size:4,type:ac.SHORT,normalized:!1},{name:"a_shape",size:4,type:ac.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:ac.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:ac.SHORT,normalized:!1},{name:"a_color",size:4,type:ac.UNSIGNED_BYTE,normalized:!0},{name:"a_outline_color",size:4,type:ac.UNSIGNED_BYTE,normalized:!0,static:[0,0,0,0]},{name:"a_outline_edge",size:1,type:ac.FLOAT,normalized:!1,static:0},{name:"a_selection_color",size:4,type:ac.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:ac.UNSIGNED_BYTE,normalized:!0}],this.defines&&this.defines.TANGRAM_POINT_DRAW_STICK&&e.push({name:"a_is_stick",size:1,type:ac.UNSIGNED_BYTE,normalized:!0},{name:"a_stick_height",size:1,type:ac.FLOAT,normalized:!1}),this.vertex_layout=new dc(e),(e=e.map((function(t){return Object.assign({},t)}))).forEach((function(t){"a_outline_color"!==t.name&&"a_outline_edge"!==t.name||(t.static=null)})),this.vertex_layout_shader_point=new dc(e)),t.shader_point?this.vertex_layout_shader_point:this.vertex_layout},meshVariantTypeForDraw:function(t){var e=t.label_texture||t.texture||this.default_mesh_variant.key;return null==Mh.variants[e]&&(Mh.variants[e]={key:e,shader_point:e===this.default_mesh_variant.key,order:t.label_texture?1:0}),Mh.variants[e]},makeMesh:function(t,e,n){var i=2<arguments.length&&void 0!==n?n:{};return i=Object.assign({},i,{fade_in_time:this.fade_in_time}),sc.makeMesh.call(this,t,e,i)}});var Lh=[0,.33,.66,.99],Rh=function(t,e,n,i,r){for(var o=[{type:"straight",tolerance:r.no_curving?1.8:1.5},{type:"curved"},{type:"straight",tolerance:2.3}],s=0;s<o.length;s++){var a=o[s],l=void 0;if("straight"===a.type?l=new Ih(e,n,i,r,a.tolerance):"curved"===a.type&&!r.no_curving&&2<n.length&&(l=new Ph(t,n,i,r)),l&&!l.throw_away)return l}return!1},Oh=function(){function t(e,n){yi(this,t),this.id=Au.nextLabelId(),this.layout=n,this.position=[],this.angle=0,this.offset=n.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.type="",this.throw_away=!1,this._is_flat=e,this._circles=void 0,this.placed=null}return _i(t,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,layout:Eu(this.layout),circles:this.getBoundingCircles()}}},{key:"inTileBounds",value:function(){var t=this.getAABB(),e=t.left,n=t.top,i=t.right,r=t.bottom;return Tr.pointInTile([e,n])&&Tr.pointInTile([i,r])}},{key:"getAABBForSegment",value:function(t,e,n,i){var r,o=this.unit_scale,s=e/2,a=n/2,l=Ii(t,2),c=l[0],u=l[1];0===this.offset[0]&&0===this.offset[1]||(c+=(r=Jl.rot(this.offset,this.angle))[0]*o,u-=r[1]*o);var h=[[Math.cos(i),-Math.sin(i)],[Math.sin(i),Math.cos(i)]],f=Jl.multMatrix(h,[-s,-a]),p=Jl.multMatrix(h,[s,-a]),d=Jl.multMatrix(h,[s,a]),g=Jl.multMatrix(h,[-s,a]);return{left:c+Math.min(f[0],p[0],d[0],g[0]),top:u+Math.max(f[1],p[1],d[1],g[1]),right:c+Math.max(f[0],p[0],d[0],g[0]),bottom:u+Math.min(f[1],p[1],d[1],g[1])}}},{key:"isFlat",value:function(){return this._is_flat}},{key:"getBoundingCircles",value:function(){}},{key:"getAABB",value:function(){}}],[{key:"splitLineByOrientation",value:function(t){for(var e=[t[0]],n=0,i=0,r=0,o=e,s=!1,a=1;a<t.length;a++){var l=t[a],c=t[a-1],u=Jl.length(Jl.sub(l,c));l[0]>c[0]?1===r?(e.push(l),i<(n+=u)&&(o=e,i=n,s=!1)):(e=[c,l],i<(n=u)&&(o=e,i=n,s=!1),r=1):l[0]<c[0]?-1===r?(e.unshift(l),i<(n+=u)&&(o=e,i=n,s=!0)):(e=[l,c],i<(n=u)&&(o=e,i=n,s=!0),r=-1):(-1===r?e.unshift(l):(e.push(l),r=1),i<(n+=u)&&(o=e,i=n,s=-1===r))}return[o,s]}}]),t}(),Ih=function(){Si(e,Oh);var t=Ri(e);function e(n,i,r,o,s){var a;return yi(this,e),(a=t.call(this,r,o)).type="straight",a.size=n,a.throw_away=!a.fit(n,i,o,s),a}return _i(e,[{key:"fit",value:function(t,e,n,i){var r,o=this.unit_scale,s=Ii(Oh.splitLineByOrientation(e),2);e=s[0],r=s[1],"number"==typeof n.orientation&&(this.offset[1]+=1.2*(t[1]-n.vertical_buffer),r&&(this.offset[1]*=-1),-1===n.orientation&&(this.offset[1]*=-1));for(var a=Dh(e),l=t[0]*o,c=0;c<e.length-1;c++)for(var u=e[c],h=0,f=0,p=c+1,d=void 0;p<e.length;){var g=e[p-1],m=e[p],v=Nh(g,m);if(p!==c+1&&(h+=function(t,e){var n,i;for(i=e<t?(n=e,t):(n=t,e);i-n>Math.PI;)n+=2*Math.PI;return Math.abs(i-n)}(v,d)),.1<Math.abs(h))break;if(l/(f+=a[p-1])<i){var y=Jl.mult(Jl.add(u,m),.5);return this.angle=-v,Math.abs(this.angle-Math.PI/2)<.01&&(this.angle=-Math.PI/2,"number"==typeof n.orientation&&(this.offset[1]*=-1)),this.position=y,this.breach=!this.inTileBounds(),!0}d=v,p++}return!1}},{key:"getBoundingCircles",value:function(){var t,e,n,i,r,o,s,a,l,c,u,h,f,p;return this._circles||(t=this.unit_scale,r=-(n=(e=this.size[0]/2*t)*Math.cos(this.angle)),o=-(i=e*Math.sin(this.angle)),s=this.offset[0]*t,a=this.offset[1]*t,c=(l=Ii(this.position,2))[0],u=l[1],u*=-1,s&&(h=[n,i],Jl.normalize(h),h[0]*=s,h[1]*=s,c+=h[0],u+=h[1]),a&&(f=[i,-n],Jl.normalize(f),f[0]*=a,f[1]*=a,c-=f[0],u-=f[1]),n+=c,i+=u,r+=c,o+=u,p=this.size[1]/2*t,this._circles=Ou(n,i,r,o,p)),this._circles}},{key:"getAABB",value:function(){var t,e,n,i,r;return this._aabb||(t=this.unit_scale,e=this.size,n=this.layout.buffer,i=(e[0]+2*n[0])*t,r=(e[1]+2*n[1])*t,this._aabb=this.getAABBForSegment(this.position,i,r,this.angle)),this._aabb}}]),e}(),Ph=function(){Si(e,Oh);var t=Ri(e);function e(n,i,r,o){var s;return yi(this,e),(s=t.call(this,r,o)).type="curved",s.positions=[],s.angles=[],s._aabbs=[],s.pre_angles=[],s.offsets=[],s.num_segments=n.length,s.sizes=n,s.alt_angles=[],s.alt_pre_angles=[],s.alt_offsets=[],s.throw_away=!s.fit(s.sizes,i,o),s}return _i(e,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,breach:this.breach,layout:Eu(this.layout),circles:this.getBoundingCircles()}}},{key:"fit",value:function(t,n,i){var r,o=this.unit_scale,s=Math.max.apply(Math,Pi(t.map((function(t){return t[1]})))),a=s*o,l=Ii(Oh.splitLineByOrientation(n),2);n=l[0],r=l[1],"number"==typeof i.orientation&&(this.offset[1]+=1.2*(s-i.vertical_buffer),r&&(this.offset[1]*=-1),-1===i.orientation&&(this.offset[1]*=-1));var c=Dh(n),u=t.map((function(t){return t[0]*o})),h=c.reduce((function(t,e){return t+e}),0),f=u.reduce((function(t,e){return t+e}),0);if(h<f)return!1;var p=n.length-1;if(p<2)return!1;var d=e.curvaturePlacement(n,h,c,f,0,p),g=n[d];if(-1===d||p-d<2)return!1;this.position=g;for(var m=0;m<u.length;m++){this.positions[m]=[],this.offsets[m]=[],this.angles[m]=[],this.pre_angles[m]=[];for(var v=0;v<Lh.length;v++){var y=Lh[v],b=Ii(e.scaleLine(y,n),2),_=b[0],w=b[1],x=(g=_[d],e.placeAtIndex(d,_,w,u)),k=x.positions,S=x.offsets,A=x.angles,E=x.pre_angles,T=S.map((function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])/o}));if(0===y){this.angle=1/A.length*A.reduce((function(t,e){return t+e}));for(var C=0;C<k.length;C++){var M=k[C],L=E[C],R=u[C],O=L+A[C];this._aabbs.push(this.getAABBForSegment(M,R,a,O))}}this.positions[m].push(k[m]),this.offsets[m].push(T[m]),this.angles[m].push(A[m]),this.pre_angles[m].push(E[m])}}u=t.slice().reverse().map((function(t){return t[0]*o}));for(var I=0;I<u.length;I++){this.alt_offsets[I]=[],this.alt_angles[I]=[],this.alt_pre_angles[I]=[];for(var P=0;P<Lh.length;P++){var N=Lh[P],D=Ii(e.scaleLine(N,n),2),j=D[0],z=D[1];g=j[d];var $=e.placeAtIndex(d,j,z,u),F=$.offsets,B=$.angles,H=$.pre_angles,U=F.map((function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])/o}));0===N&&(this.alt_angle=1/B.length*B.reduce((function(t,e){return t+e}))),this.alt_offsets[I].push(U[I]),this.alt_angles[I].push(B[I]),this.alt_pre_angles[I].push(H[I])}}return!0}},{key:"getBoundingCircles",value:function(){if(!this._circles){for(var t=[],e=this.unit_scale,n=0;n<this.positions.length;n++){var i=this.sizes[n],r=this.angles[n][0],o=this.positions[n][0],s=i[0]/2*e,a=s*Math.cos(r),l=s*Math.sin(r),c=-a,u=-l,h=Ii(o,2),f=h[0],p=h[1],d=Ou(a+=f,l+=p*=-1,c+=f,u+=p,i[1]/2*e);Array.prototype.push.apply(t,d)}this._circles=t}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){for(var t=1/0,e=-1/0,n=-1/0,i=1/0,r=0;r<this._aabbs.length;r++){var o=this._aabbs[r];t=Math.min(t,o.left),e=Math.max(e,o.top),n=Math.max(n,o.right),i=Math.min(i,o.bottom)}this._aabb={left:t,top:e,right:n,bottom:i}}return this._aabb}}],[{key:"curvaturePlacement",value:function(t,e,n,i,r,o){r=r||0,o=o||t.length-1;for(var s=[],a=r+1;a<o;a++){var l=t[a-1],c=t[a],u=t[a+1],h=Jl.perp(c,l),f=Jl.perp(u,c),p=Jl.angleBetween(h,f);1<p&&(p=1/0),s.push(p)}s.push(1/0);for(var d=[],g=[],m=r,v=0,y=0;y<r;y++)v+=n[y];for(;v+i<e;){for(var b=v+i,_=v,w=m,x=0;w<o&&_+n[w]<b&&(x+=s[w])!==1/0;)_+=n[w],w++;if(0===x)return m;var k=x/(w-m);d.push(x),g.push(k),v+=n[m],m++}if(0===d.length)return-1;var S=Math.min.apply(null,d),A=g[d.indexOf(S)];return S<1.3&&A<.4?d.indexOf(S):-1}},{key:"scaleLine",value:function(t,e){var n=[e[0]],i=[];return e.forEach((function(r,o){var s,a;o!==e.length-1&&(s=Jl.sub(e[o+1],e[o]),a=Jl.mult(s,1+t),n.push(Jl.add(n[o],a)),i.push(Jl.length(a)))})),[n,i]}},{key:"placeAtIndex",value:function(t,n,i,r){var o=n[t],s=Ii(e.getIndicesAndOffsets(t,i,r),2),a=s[0],l=s[1],c=e.getPositionsFromIndicesAndOffsets(n,a,l),u=Ii(e.getAnglesFromIndicesAndOffsets(o,a,n,c),3);return{positions:c,offsets:u[0],angles:u[1],pre_angles:u[2]}}},{key:"getIndicesAndOffsets",value:function(t,e,n){for(var i=n.length,r=[],o=[],s=0,a=0,l=0;s<i;){for(var c=n[s];s<i&&a+.5*c<=l+e[t];){var u=a-l+.5*c;o.push(u),r.push(t),a+=c,c=n[++s]}l+=e[t],t++}return[r,o]}},{key:"getPositionsFromIndicesAndOffsets",value:function(t,e,n){for(var i=[],r=0;r<e.length;r++){var o=e[r],s=n[r],a=Nh(t[o],t[o+1]),l=Jl.rot([s,0],a),c=Jl.add(t[o],l);i.push(c)}return i}},{key:"getAnglesFromIndicesAndOffsets",value:function(t,e,n,i){for(var r=[],o=[],s=[],a=0;a<i.length;a++){var l,c,u=i[a],h=e[a],f=Jl.sub(u,t),p=-Jl.angle(f),d=-Nh(n[h],n[h+1])-p;0<a&&(l=r[a-1],c=o[a-1],Math.abs(p-l)>Math.PI&&(p+=l<p?-2*Math.PI:2*Math.PI),Math.abs(c-d)>Math.PI&&(d+=c<d?-2*Math.PI:2*Math.PI)),r.push(p),o.push(d),s.push(f)}return[s,r,o]}}]),e}();function Nh(t,e){var n=Jl.sub(e,t);return Jl.angle(n)}function Dh(t){for(var e=[],n=0;n<t.length-1;n++){var i=t[n],r=t[n+1],o=Math.hypot(i[0]-r[0],i[1]-r[1]);e.push(o)}return e}var jh=Object.create(Mh);Object.assign(jh,{name:"text",super:Mh,built_in:!0,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};sc.init.call(this,e),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_IS_TEXT_STYLE=!0,this.reset()},makeVertexTemplate:function(t,e){this.super.makeVertexTemplate.apply(this,arguments);var n=e.vertex_data.vertex_layout;return this.fillVertexTemplate(n,"a_pre_angles",0,{size:4}),this.fillVertexTemplate(n,"a_offsets",0,{size:4}),this.fillVertexTemplate(n,"a_angles",0,{size:4}),this.fillVertexTemplate(n,"a_offsets_alt",0,{size:4}),this.fillVertexTemplate(n,"a_pre_angles_alt",0,{size:4}),this.fillVertexTemplate(n,"a_angles_alt",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(t,e,n){var i=this,r=n.tile,o=t.geometry.type;e.can_articulate="LineString"===o||"MultiLineString"===o,e.supersample_text="LineString"===o||"MultiLineString"===o;var s=this.parseTextFeature(t,e,n,r);s&&(s instanceof Array?s.forEach((function(e){e.feature=t,e.context=n,e.layout.vertex=!1,i.queueFeature(e,r)})):(s.feature=t,s.context=n,s.layout.vertex=!1,this.queueFeature(s,r)),Mo.addStyle(this.name,r.id))},endData:function(t){var e=this,n=this.queues[t.id];return delete this.queues[t.id],this.collideAndRenderTextLabels(t,this.name,n).then((function(n){var i=n.labels,r=n.texts;return i&&r&&(e.texts[t.id]=r,i.forEach((function(n){var i=n.text_settings_key,r=e.texts[t.id][i]&&e.texts[t.id][i][n.text],o=e.feature_style;o.label=n.label,n.label.text_data={text_info:r,text_settings_key:i,text:n.text},o.label_texture=e.textureManager.default,r.text_settings.can_articulate?(o.size={},"straight"===n.label.type?o.size.straight=r.size.logical_size:o.size.curved=r.segment_sizes.map((function(t){return t.logical_size}))):o.size=r.size.logical_size,sc.addFeature.call(e,n.feature,n.draw,n.context)}))),e.freeText(t),sc.endData.call(e,t).then((function(n){if(n){for(var i in n.meshes)n.meshes[i].uniforms.u_apply_color_blocks=!0;t.mesh_data[e.name]=n}return n}))}))},_preprocess:function(t){return this.preprocessText(t)},buildTextLabels:function(t,e){for(var n=[],i=0;i<e.length;i++){var r,o,s=e[i],a=this.texts[t.id][s.text_settings_key][s.text];s.layout.vertical_buffer=a.vertical_buffer,o=a.text_settings.can_articulate?(r=a.segment_sizes.map((function(t){return t.collision_size})),s.layout.no_curving=a.no_curving,this.buildLabels(r,s.feature.geometry,s.layout,a.size.collision_size)):this.buildLabels(a.size.collision_size,s.feature.geometry,s.layout);for(var l=0;l<o.length;l++){var c=Object.create(s);c.label=o[l],n.push(c)}}return n},buildLabels:function(t,e,n,i){var r,o,s="Point"!==e.type,a=[];if("LineString"===e.type)Array.prototype.push.apply(a,this.buildLineLabels(e.coordinates,t,s,n,i));else if("MultiLineString"===e.type)for(var l=e.coordinates,c=0;c<l.length;++c)Array.prototype.push.apply(a,this.buildLineLabels(l[c],t,s,n,i));else if("Point"===e.type)a.push(new Iu(e.coordinates,t,s,n));else if("MultiPoint"===e.type)for(var u=e.coordinates,h=0;h<u.length;++h)a.push(new Iu(u[h],t,s,n));else"Polygon"===e.type?(r=er.centroid(e.coordinates),a.push(new Iu(r,t,s,n))):"MultiPolygon"===e.type&&(o=er.multiCentroid(e.coordinates),a.push(new Iu(o,t,s,n)));return a},buildLineLabels:function(t,e,n,i,r){var o,s=[],a=Math.min(i.subdiv,t.length-1);if(1<a)for(var l=(t.length-1)/a,c=0;c<a;c++){var u=Math.floor(c*l),h=Math.floor((c+1)*l)+1,f=t.slice(u,h),p=Rh(e,r,f,n,i);p&&s.push(p)}return s.length<a&&(o=Rh(e,r,t,n,i))&&s.push(o),s},vertexLayoutForMeshVariant:function(){var t;return this.vertex_layout||(t=[{name:"a_position",size:4,type:ac.SHORT,normalized:!1},{name:"a_shape",size:4,type:ac.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:ac.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:ac.SHORT,normalized:!1},{name:"a_color",size:4,type:ac.UNSIGNED_BYTE,normalized:!0},{name:"a_angles",size:4,type:ac.SHORT,normalized:!1},{name:"a_offsets",size:4,type:ac.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:ac.BYTE,normalized:!1},{name:"a_selection_color",size:4,type:ac.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:ac.UNSIGNED_BYTE,normalized:!0},{name:"a_offsets_alt",size:4,type:ac.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles_alt",size:4,type:ac.BYTE,normalized:!1},{name:"a_angles_alt",size:4,type:ac.SHORT,normalized:!1}],this.vertex_layout=new dc(t)),this.vertex_layout},meshVariantTypeForDraw:Mh.meshVariantTypeForDraw}),jh.texture_id=0;var zh=Object.create(Fc);Object.assign(zh,{name:"raster",super:Fc,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1,this.defines.SNAP_TO_PIXEL_GRID=!0},_preprocess:function(t){return t.color=t.color||_o.defaults.color,this.super._preprocess.apply(this,arguments)}});var $h=Object.create(Mh);Object.assign($h,{name:"custom_icons",collision:!1,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};Mh.init.call(this,e)},loadTexture:function(t,e,n){var i,r=t.width,o=t.height,s=t.items,a=document.createElement("canvas"),l=Tr.device_pixel_ratio,c=this.sources[e],u={sprites:{}};if(a.width=r*l,a.height=o*l,c){var h,f=s.length,p=a.getContext("2d");for(p.scale(l,l);h=s[--f];){var d,g=c.getIconBitmapByObjectId(h.meta.objectId,h.meta.id);g&&((d=yl(g))?Ar("error",d):(p.drawImage(g,h.x,h.y,h.width,h.height),u.sprites[h.meta.id]=[h.x,h.y,h.width,h.height]))}}return u.element=a,(i=this.textureManager.create(this.gl,n,u)).retain(),i.loading.then((function(t){return t.name}))},buildRasterTextures:function(t,e){return hr.postMessage(this.main_thread_target+".loadTexture",t.rasters,t.source,t.texture_name).then((function(t){return e.textures.push(t),e}))},addFeature:function(t,e,n){var i=n.tile.rasters,r={};i.items.forEach((function(t){r[t.meta.id]=[t.x,t.y,t.width,t.height]}));var o="".concat(n.tile.source,"_dyn_").concat(n.tile.coords.key,"_").concat(this.generation,"_").concat(n.tile.id);e.texture=n.tile.texture_name=o;var s=Object.assign({},Fh,{name:o,width:i.width,height:i.height,sprites:r,manager:this.textureManager});Oo.prototype.calculateSprites.apply(s),this.textureManager.textures[o]=s,Mh.addFeature.apply(this,arguments),delete this.textureManager.textures[o]}});var Fh={filtering:"linear",density:1,valid:!0,power_of_2:!1,texcoords:{},sizes:{},css_sizes:{},aspects:{}},Bh=Object.create(Fc);Object.assign(Bh,{name:"overlays",super:Fc,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};this.selection=e.selection||!0,this.raster=this.raster||"color",this.super.init.apply(this,arguments)},setupRasters:function(){if(!ur.is_main)return!1;if(this.super.setupRasters.call(this))return!0;var t=!1;for(var e in this.sources)if(this.sources[e]instanceof xl){t=!0;break}return!!t&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",oc,"Raster"),!0)},loadTextures:function(t,e){var n,i,r,o=this.sources[e],s=t.name;if(t.overlays_config.forEach((function(e){var s,a=e.texcoords,l=e.id,c=o.getMapObjectById(l),u=c.getBitmap();u&&((s=yl(u=bl(u,u.width,u.height)))?Ar("error",s):(n||((n=document.createElement("canvas")).width=t.width,n.height=t.height,i=n.getContext("2d")),i.save(),i.globalAlpha=c.getOpacity(),a.forEach((function(t){return i.drawImage(u,t[0],t[1],t[2],t[3])})),i.restore(),r=!0))})),r){t.element=n;var a={};return a[s]=t,this.super.loadTextures.call(this,a)}var l=this.textureManager.textures[this.textureManager.default];return Promise.resolve([{name:l.name,width:l.width,height:l.height,loaded:l.loaded}])},buildRasterTextures:function(t,e){var n=this.sources[t.source].tileTexture(t);return n?hr.postMessage(this.main_thread_target+".loadTextures",n,t.source).then((function(t){if(!t||t.length<1)return e;if(t.some((function(t){return!t.loaded})))return null;var n=t[0].name;return e.uniforms=e.uniforms||{},e.textures=e.textures||[],e.uniforms.u_raster=n,e.uniforms.u_raster_offset=[0,0,1],e.textures.push(n),e})):Promise.resolve(e)}});var Hh=Object.create(sc),Uh=[-1,0,1,0,-1,1,-1,1,1,0,1,1,-1,0,1,0,-1,1,-1,1,1,0,1,1];Object.assign(Hh,{name:"skybox",built_in:!0,vertex_shader_src:"uniform float u_horizon;uniform float u_tilt;uniform float u_zoom;attribute vec2 a_position;attribute float a_is_sky;attribute float a_is_top;attribute vec4 a_color;varying vec4 v_color;const float SIN_THRESHOLD_ANGLE=0.96126069082;void main(){v_color=a_color;float sin_tilt=sin(u_tilt);float sky_bottom_alpha=1.-max(sin_tilt-SIN_THRESHOLD_ANGLE,0.)*3.;if((a_position.y==1.&&a_is_sky==0.)||(a_position.y==0.&&a_is_sky==1.)){v_color.w=sky_bottom_alpha;}float fog_height=max((22.-u_zoom)*0.04,0.)*(sin_tilt-.7);float position_z=u_zoom<17. ? .942 : .9418;gl_Position=vec4(a_position.x,a_is_sky*(a_position.y+a_is_top)+1.0-u_horizon-(1.0-a_is_sky)*(1.0-a_position.y)*fog_height,position_z,1.0);}",fragment_shader_src:"varying vec4 v_color;void main(void){gl_FragColor=v_color;}",selection:!1,blend:"inlay",blend_order:1,init:function(){sc.init.apply(this,arguments),this.selection=!1},_preprocess:function(t){return t.color={top:_o.createColorPropertyCache(t.color.zenith),bottom:_o.createColorPropertyCache(t.color.horizon),fog:_o.createColorPropertyCache(t.color.fog)},t},vertexLayoutForMeshVariant:function(){var t;return this.vertex_layout||(t=[{name:"a_position",size:2,type:ac.FLOAT,normalized:!1},{name:"a_is_sky",size:1,type:ac.FLOAT,normalized:!0},{name:"a_color",size:4,type:ac.UNSIGNED_BYTE,normalized:!0},{name:"a_is_top",size:1,type:ac.FLOAT,normalized:!0}],this.vertex_layout=new dc(t)),this.vertex_layout},makeVertexTemplate:function(){var t=0;return this.vertex_template[t++]=0,this.vertex_template[1]=0,this.vertex_template},parseFeature:function(t,e,n){var i=this.feature_style;return e.color&&e.color.top&&e.color.bottom&&(i.color_top=this.parseColor(e.color.top,n),i.color_bottom=this.parseColor(e.color.bottom,n),i.color_fog=this.parseColor(e.color.fog||"white",n),Array.isArray(i.color_fog)&&(i.color_fog=i.color_fog.slice(),i.color_fog[3]=0)),i},buildGeometry:function(t,e,n){for(var i=this.makeVertexTemplate(e),r=n.vertex_data,o=n.vertex_data.vertex_layout,s=r.vertex_layout.index.a_position,a={top:e.color_top,bottom:e.color_bottom},l={top:e.color_bottom,bottom:e.color_fog},c=0,u=Uh.length-1;c<u;c+=2){i[s+0]=Uh[c],i[s+1]=Uh[c+1];var h=c<12,f=0<Uh[c+1],p=h?a:l;this.fillVertexTemplate(o,"a_is_sky",h?1:0,{size:1}),this.fillVertexTemplate(o,"a_is_top",f?1:0,{size:1}),this.fillVertexTemplate(o,"a_color",Jl.mult(f?p.top:p.bottom,255),{size:4}),r.addVertex(i)}return 4}});var Gh=function(){function t(){yi(this,t),this.styles={},this.base_styles={},this.register(Object.create(Fc)),this.register(Object.create(uu)),this.register(Object.create(vu)),this.register(Object.create(Mh)),this.register(Object.create(jh)),this.register(Object.create(zh)),this.register(Object.create($h)),this.register(Object.create(Bh)),this.register(Object.create(Hh))}return _i(t,[{key:"init",value:function(){Vl.removeBlock("global"),Vl.removeBlock("setup"),Vl.addBlock("global","#ifdef TANGRAM_VERTEX_SHADER\nvec4 modelPosition(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE*exp2(u_tile_origin.z-u_tile_origin.w),1.)+vec4(0.,1.,0.,0.);}vec4 modelPositionBaseZoom(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE,1.)+vec4(0.,1.,0.,0.);}\n#endif\nvec4 worldPosition(){return v_world_position;}\n#ifdef TANGRAM_VERTEX_SHADER\nvec4 wrapWorldPosition(vec4 world_position){\n#if defined(TANGRAM_WORLD_POSITION_WRAP)\nvec2 anchor=u_tile_origin.xy-mod(u_tile_origin.xy,TANGRAM_WORLD_POSITION_WRAP);world_position.xy-=anchor;\n#endif\nreturn world_position;}\n#endif\n#if defined(TANGRAM_VERTEX_SHADER)\nvec3 worldNormal(){return TANGRAM_NORMAL;}\n#elif defined(TANGRAM_FRAGMENT_SHADER)\nvec3 worldNormal(){return u_inverseNormalMatrix*TANGRAM_NORMAL;}\n#endif\n"),Vl.addBlock("global","void applyLayerOrder(float layer,inout vec4 position){position.z-=layer*TANGRAM_LAYER_DELTA*position.w;}"),Vl.addBlock("global","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nattribute vec4 a_selection_color;varying vec4 v_selection_color;uniform vec4 u_selection_discard0;uniform vec4 u_selection_discard1;uniform vec4 u_selection_discard2;uniform vec4 u_selection_discard3;uniform vec4 u_selection_discard4;uniform vec4 u_selection_discard5;uniform vec4 u_selection_discard6;uniform vec4 u_selection_discard7;uniform vec4 u_selection_discard8;uniform vec4 u_selection_discard9;\n#endif\n"),Vl.addBlock("global","uniform float u_view_pan_snap_timer;void snapToPixelGrid(inout vec4 position){vec2 position_fract=fract((((position.xy/position.w)+1.)*.5)*u_resolution);vec2 position_snap=position.xy+((step(0.5,position_fract)-position_fract)*position.w*2./u_resolution);\n#ifdef TANGRAM_VIEW_PAN_SNAP_RATE\nposition.xy=mix(position.xy,position_snap,clamp(u_view_pan_snap_timer*TANGRAM_VIEW_PAN_SNAP_RATE,0.,1.));\n#else\nposition.xy=position_snap;\n#endif\n}"),Vl.replaceBlock("utils","#ifndef UTILS\n#define UTILS\nbool isLocalSpacePixelOutsideTile(vec4 pixel_local_space_position,float tile_scale){return pixel_local_space_position.x<0.||pixel_local_space_position.x>=tile_scale||pixel_local_space_position.y>0.||pixel_local_space_position.y<=-tile_scale;}\n#endif\n"),Vl.replaceBlock("setup","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nif(a_selection_color.rgb==vec3(0.)||a_selection_color==u_selection_discard0||a_selection_color==u_selection_discard1||a_selection_color==u_selection_discard2||a_selection_color==u_selection_discard3||a_selection_color==u_selection_discard4||a_selection_color==u_selection_discard5||a_selection_color==u_selection_discard6||a_selection_color==u_selection_discard7||a_selection_color==u_selection_discard8||a_selection_color==u_selection_discard9){gl_Position=vec4(0.,0.,0.,1.);return;}v_selection_color=a_selection_color;\n#endif\n"),Vl.defines.TANGRAM_EPSILON=1e-5,Vl.defines.TANGRAM_LAYER_DELTA=1/16384,Vl.defines.TANGRAM_TILE_SCALE="vec3(".concat(er.tile_scale,"., ").concat(er.tile_scale,"., u_meters_per_pixel * ").concat(er.tile_size,".)"),Vl.defines.TANGRAM_HEIGHT_SCALE=er.height_scale,Vl.defines.TANGRAM_ALPHA_TEST=.1,uu.dash_textures={}}},{key:"destroy",value:function(t){var e=this;Object.keys(this.styles).forEach((function(n){var i=e.styles[n];i.gl===t&&(Ar("trace","StyleManager.destroy: destroying render style ".concat(i.name)),i.base&&e.remove(i.name),i.destroy())}))}},{key:"register",value:function(t){this.styles[t.name]=t,this.base_styles[t.name]=t}},{key:"remove",value:function(t){delete this.styles[t]}},{key:"mix",value:function(t,e){if(t.mixed)return t;t.mixed={};var n=[];t.mix&&(Array.isArray(t.mix)?n.push.apply(n,Pi(t.mix)):n.push(t.mix),(n=n.map((function(t){return e[t]})).filter((function(e){return e&&e!==t}))).forEach((function(e){return t.mixed[e.name]=!0}))),n.push(t),t.animated=n.some((function(t){return t&&t.animated})),t.texcoords=n.some((function(t){return t&&t.texcoords})),t.base=n.map((function(t){return t.base})).filter((function(t){return t})).pop(),t.lighting=n.map((function(t){return t.lighting})).filter((function(t){return null!=t})).pop(),t.texture=n.map((function(t){return t.texture})).filter((function(t){return t})).pop(),t.raster=n.map((function(t){return t.raster})).filter((function(t){return null!=t})).pop(),t.dash=n.map((function(t){return t.dash})).filter((function(t){return null!=t})).pop(),t.dash_background_color=n.map((function(t){return t.dash_background_color})).filter((function(t){return null!=t})).pop(),n.some((function(t){return t.hasOwnProperty("blend")&&t.blend}))&&(t.blend=n.map((function(t){return t.hasOwnProperty("blend")&&t.blend})).filter((function(t){return t})).pop()),t.blend_order=n.map((function(t){return t.blend_order})).filter((function(t){return null!=t})).pop(),t.defines=Object.assign.apply(Object,[{}].concat(Pi(n.map((function(t){return t.defines})).filter((function(t){return t}))))),t.material=Object.assign.apply(Object,[{}].concat(Pi(n.map((function(t){return t.material})).filter((function(t){return t})))));var i=n.map((function(t){return t.draw})).filter((function(t){return t}));return 0<i.length&&(t.draw=vl.apply(void 0,[{}].concat(Pi(i)))),this.mixShaders(t,e,n),t}},{key:"mixShaders",value:function(t,e,n){var i={},r=n.map((function(t){return t.shaders})).filter((function(t){return t}));if(i.defines=Object.assign.apply(Object,[{}].concat(Pi(r.map((function(t){return t.defines})).filter((function(t){return t}))))),i.uniforms={},i._uniforms=t.shaders&&t.shaders.uniforms||{},i._uniform_scopes={},n.filter((function(t){return t.shaders&&t.shaders.uniforms})).forEach((function(t){for(var n in t.shaders.uniforms)!function(n){i._uniform_scopes[n]=t.name,Object.defineProperty(i.uniforms,n,{enumerable:!0,configurable:!0,get:function(){return void 0!==i._uniforms[n]?i._uniforms[n]:e[i._uniform_scopes[n]].shaders.uniforms!==i.uniforms?e[i._uniform_scopes[n]].shaders.uniforms[n]:void 0},set:function(t){i._uniforms[n]=t}})}(n)})),i.extensions=Object.keys(r.map((function(t){return t.extensions})).filter((function(t){return t})).reduce((function(t,e){return"string"==typeof e?t[e]=!0:e.forEach((function(e){return t[e]=!0})),t}),{})||{}),t.shaders&&t.shaders.blocks)for(var o in t.shaders.block_scopes=t.shaders.block_scopes||{},t.shaders.blocks){var s,a=t.shaders.blocks[o];t.shaders.block_scopes[o]=t.shaders.block_scopes[o]||[],Array.isArray(a)?(s=t.shaders.block_scopes[o]).push.apply(s,Pi(a.map((function(){return t.name})))):t.shaders.block_scopes[o].push(t.name)}var l={};return r.forEach((function(t){if(t.blocks){i.blocks=i.blocks||{},i.block_scopes=i.block_scopes||{};var e={};for(var n in t.blocks){var r=t.blocks[n],o=t.block_scopes[n];i.blocks[n]=i.blocks[n]||[],i.block_scopes[n]=i.block_scopes[n]||[],r=Array.isArray(r)?r:[r],o=Array.isArray(o)?o:[o];for(var s=0;s<r.length;s++)l[o[s]]||(e[o[s]]=!0,i.blocks[n].push(r[s]),i.block_scopes[n].push(o[s]))}Object.assign(l,e)}})),Object.assign(t.mixed,l),t.shaders=i,t}},{key:"create",value:function(t,e,n){var i=2<arguments.length&&void 0!==n?n:{},r=vl({},e);return r.name=t,(r=this.mix(r,i)).base&&this.base_styles[r.base]?this.styles[t]=r=Object.assign(Object.create(this.base_styles[r.base]),r):r.base=null,r}},{key:"build",value:function(t){var e=this,n=Object.keys(t).sort((function(n,i){return e.inheritanceDepth(n,t)-e.inheritanceDepth(i,t)}));for(var i in this.styles)this.base_styles[i]?this.styles[i].reset():delete this.styles[i];var r={};return n.forEach((function(n){r[n]=e.create(n,t[n],r)})),this.styles}},{key:"initStyles",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};for(var n in this.styles)this.styles[n].init(e)}},{key:"inheritanceDepth",value:function(t,e){for(var n=this,i=0;;){var r=e[t];if(!r)break;if(!r.mix)break;if(i++,Array.isArray(r.mix)){i+=Math.max.apply(Math,Pi(r.mix.map((function(i){if(t!==i)return n.inheritanceDepth(i,e)}))));break}if(t===r.mix)break;t=r.mix}return i}}]),t}();function Vh(t){return null==t}var Wh={isNothing:Vh,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:Vh(t)?[]:[t]},repeat:function(t,e){for(var n="",i=0;i<e;i+=1)n+=t;return n},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function(t,e){var n,i,r,o;if(e)for(n=0,i=(o=Object.keys(e)).length;n<i;n+=1)t[r=o[n]]=e[r];return t}};function qh(t,e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=t,this.mark=e,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}((qh.prototype=Object.create(Error.prototype)).constructor=qh).prototype.toString=function(t){var e=this.name+": ";return e+=this.reason||"(unknown reason)",!t&&this.mark&&(e+=" "+this.mark.toString()),e};var Kh=qh;function Yh(t,e,n,i,r){this.name=t,this.buffer=e,this.position=n,this.line=i,this.column=r}Yh.prototype.getSnippet=function(t,e){var n,i,r,o,s;if(!this.buffer)return null;for(t=t||4,e=e||75,n="",i=this.position;0<i&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(i-1));)if(--i,this.position-i>e/2-1){n=" ... ",i+=5;break}for(r="",o=this.position;o<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(o));)if((o+=1)-this.position>e/2-1){r=" ... ",o-=5;break}return s=this.buffer.slice(i,o),Wh.repeat(" ",t)+n+s+r+"\n"+Wh.repeat(" ",t+this.position-i+n.length)+"^"},Yh.prototype.toString=function(t){var e,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),t||(e=this.getSnippet())&&(n+=":\n"+e),n};var Xh=Yh,Zh=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],Jh=["scalar","sequence","mapping"],Qh=function(t,e){var n,i;if(e=e||{},Object.keys(e).forEach((function(e){if(-1===Zh.indexOf(e))throw new Kh('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.defaultStyle=e.defaultStyle||null,this.styleAliases=(n=e.styleAliases||null,i={},null!==n&&Object.keys(n).forEach((function(t){n[t].forEach((function(e){i[String(e)]=t}))})),i),-1===Jh.indexOf(this.kind))throw new Kh('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function tf(t,e,n){var i=[];return t.include.forEach((function(t){n=tf(t,e,n)})),t[e].forEach((function(t){n.forEach((function(e,n){e.tag===t.tag&&i.push(n)})),n.push(t)})),n.filter((function(t,e){return-1===i.indexOf(e)}))}function ef(t){this.include=t.include||[],this.implicit=t.implicit||[],this.explicit=t.explicit||[],this.implicit.forEach((function(t){if(t.loadKind&&"scalar"!==t.loadKind)throw new Kh("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=tf(this,"implicit",[]),this.compiledExplicit=tf(this,"explicit",[]),this.compiledTypeMap=function(){var t,e,n={};function i(t){n[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(i);return n}(this.compiledImplicit,this.compiledExplicit)}ef.DEFAULT=null,ef.create=function(t,e){var n,i;switch(arguments.length){case 1:n=ef.DEFAULT,i=t;break;case 2:n=t,i=e;break;default:throw new Kh("Wrong number of arguments for Schema.create function")}if(n=Wh.toArray(n),i=Wh.toArray(i),!n.every((function(t){return t instanceof ef})))throw new Kh("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!i.every((function(t){return t instanceof Qh})))throw new Kh("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new ef({include:n,explicit:i})};var nf=ef,rf=new nf({explicit:[new Qh("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),new Qh("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),new Qh("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}})]}),of=new Qh("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),sf=new Qh("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"}),af=new Qh("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,i,r,o=t.length,s=0,a=!1;if(!o)return!1;if("-"!==(e=t[s])&&"+"!==e||(e=t[++s]),"0"===e){if(s+1===o)return!0;if("b"===(e=t[++s])){for(s++;s<o;s++)if("_"!==(e=t[s])){if("0"!==e&&"1"!==e)return!1;a=!0}return a}if("x"===e){for(s++;s<o;s++)if("_"!==(e=t[s])){if(!(48<=(i=t.charCodeAt(s))&&i<=57||65<=i&&i<=70||97<=i&&i<=102))return!1;a=!0}return a}for(;s<o;s++)if("_"!==(e=t[s])){if(!(48<=(n=t.charCodeAt(s))&&n<=55))return!1;a=!0}return a}for(;s<o;s++)if("_"!==(e=t[s])){if(":"===e)break;if(!(48<=(r=t.charCodeAt(s))&&r<=57))return!1;a=!0}return!!a&&(":"!==e||/^(:[0-5]?[0-9])+$/.test(t.slice(s)))},construct:function(t){var e,n,i=t,r=1,o=[];return-1!==i.indexOf("_")&&(i=i.replace(/_/g,"")),"-"!==(e=i[0])&&"+"!==e||("-"===e&&(r=-1),e=(i=i.slice(1))[0]),"0"===i?0:"0"===e?"b"===i[1]?r*parseInt(i.slice(2),2):"x"===i[1]?r*parseInt(i,16):r*parseInt(i,8):-1!==i.indexOf(":")?(i.split(":").forEach((function(t){o.unshift(parseInt(t,10))})),i=0,n=1,o.forEach((function(t){i+=t*n,n*=60})),r*i):r*parseInt(i,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!Wh.isNegativeZero(t)},represent:{binary:function(t){return"0b"+t.toString(2)},octal:function(t){return"0"+t.toString(8)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return"0x"+t.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),lf=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),cf=/^[-+]?[0-9]+e/,uf=new nf({include:[rf],implicit:[of,sf,af,new Qh("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!!lf.test(t)},construct:function(t){var e,n=t.replace(/_/g,"").toLowerCase(),i="-"===n[0]?-1:1,r=[];return 0<="+-".indexOf(n[0])&&(n=n.slice(1)),".inf"===n?1==i?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===n?NaN:0<=n.indexOf(":")?(n.split(":").forEach((function(t){r.unshift(parseFloat(t,10))})),n=0,e=1,r.forEach((function(t){n+=t*e,e*=60})),i*n):i*parseFloat(n,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||Wh.isNegativeZero(t))},represent:function(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Wh.isNegativeZero(t))return"-0.0";return n=t.toString(10),cf.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})]}),hf=new nf({include:[uf]}),ff=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$"),pf=new Qh("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&null!==ff.exec(t)},construct:function(t){var e,n,i,r,o,s,a,l=0,c=null,u=ff.exec(t);if(null===u)throw new Error("Date resolve error");if(e=+u[1],n=u[2]-1,i=+u[3],!u[4])return new Date(Date.UTC(e,n,i));if(r=+u[4],o=+u[5],s=+u[6],u[7]){for(l=u[7].slice(0,3);l.length<3;)l+="0";l=+l}return u[9]&&(c=6e4*(60*+u[10]+ +(u[11]||0)),"-"===u[9]&&(c=-c)),a=new Date(Date.UTC(e,n,i,r,o,s,l)),c&&a.setTime(a.getTime()-c),a},instanceOf:Date,represent:function(t){return t.toISOString()}}),df=new Qh("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),gf=xa.Buffer,mf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",vf=new Qh("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;for(var e,n=0,i=t.length,r=mf,o=0;o<i;o++)if(!(64<(e=r.indexOf(t.charAt(o))))){if(e<0)return!1;n+=6}return n%8==0},construct:function(t){for(var e,n=t.replace(/[\r\n=]/g,""),i=n.length,r=mf,o=0,s=[],a=0;a<i;a++)a%4==0&&a&&(s.push(o>>16&255),s.push(o>>8&255),s.push(255&o)),o=o<<6|r.indexOf(n.charAt(a));return 0==(e=i%4*6)?(s.push(o>>16&255),s.push(o>>8&255),s.push(255&o)):18==e?(s.push(o>>10&255),s.push(o>>2&255)):12==e&&s.push(o>>4&255),gf?new gf(s):s},predicate:function(t){return gf&&gf.isBuffer(t)},represent:function(t){for(var e,n="",i=0,r=t.length,o=mf,s=0;s<r;s++)s%3==0&&s&&(n+=o[i>>18&63],n+=o[i>>12&63],n+=o[i>>6&63],n+=o[63&i]),i=(i<<8)+t[s];return 0==(e=r%3)?(n+=o[i>>18&63],n+=o[i>>12&63],n+=o[i>>6&63],n+=o[63&i]):2==e?(n+=o[i>>10&63],n+=o[i>>4&63],n+=o[i<<2&63],n+=o[64]):1==e&&(n+=o[i>>2&63],n+=o[i<<4&63],n+=o[64],n+=o[64]),n}}),yf=Object.prototype.hasOwnProperty,bf=Object.prototype.toString,_f=new Qh("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;for(var e,n,i,r=[],o=t,s=0,a=o.length;s<a;s+=1){if(e=o[s],i=!1,"[object Object]"!==bf.call(e))return!1;for(n in e)if(yf.call(e,n)){if(i)return!1;i=!0}if(!i)return!1;if(-1!==r.indexOf(n))return!1;r.push(n)}return!0},construct:function(t){return null!==t?t:[]}}),wf=Object.prototype.toString,xf=new Qh("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;for(var e,n,i=t,r=new Array(i.length),o=0,s=i.length;o<s;o+=1){if(e=i[o],"[object Object]"!==wf.call(e))return!1;if(1!==(n=Object.keys(e)).length)return!1;r[o]=[n[0],e[n[0]]]}return!0},construct:function(t){if(null===t)return[];for(var e,n,i=t,r=new Array(i.length),o=0,s=i.length;o<s;o+=1)e=i[o],n=Object.keys(e),r[o]=[n[0],e[n[0]]];return r}}),kf=Object.prototype.hasOwnProperty,Sf=new nf({include:[hf],implicit:[pf,df],explicit:[vf,_f,xf,new Qh("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,n=t;for(e in n)if(kf.call(n,e)&&null!==n[e])return!1;return!0},construct:function(t){return null!==t?t:{}}})]}),Af=new Qh("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(t){return void 0===t},represent:function(){return""}}),Ef=new Qh("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(t){if(null===t)return!1;if(0===t.length)return!1;var e=t,n=/\/([gim]*)$/.exec(t),i="";if("/"===e[0]){if(n&&(i=n[1]),3<i.length)return!1;if("/"!==e[e.length-i.length-1])return!1}return!0},construct:function(t){var e=t,n=/\/([gim]*)$/.exec(t),i="";return"/"===e[0]&&(n&&(i=n[1]),e=e.slice(1,e.length-i.length-1)),new RegExp(e,i)},predicate:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},represent:function(t){var e="/"+t.source+"/";return t.global&&(e+="g"),t.multiline&&(e+="m"),t.ignoreCase&&(e+="i"),e}});try{var Tf=function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}()}catch(o){"undefined"!=typeof window&&(Tf=window.esprima)}var Cf=new Qh("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(t){if(null===t)return!1;try{var e="("+t+")",n=Tf.parse(e,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&"FunctionExpression"===n.body[0].expression.type}catch(t){return!1}},construct:function(t){var e,n="("+t+")",i=Tf.parse(n,{range:!0}),r=[];if("Program"!==i.type||1!==i.body.length||"ExpressionStatement"!==i.body[0].type||"FunctionExpression"!==i.body[0].expression.type)throw new Error("Failed to resolve function");return i.body[0].expression.params.forEach((function(t){r.push(t.name)})),e=i.body[0].expression.body.range,new Function(r,n.slice(e[0]+1,e[1]-1))},predicate:function(t){return"[object Function]"===Object.prototype.toString.call(t)},represent:function(t){return t.toString()}}),Mf=nf.DEFAULT=new nf({include:[Sf],explicit:[Af,Ef,Cf]}),Lf=Object.prototype.hasOwnProperty,Rf=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Of=/[\x85\u2028\u2029]/,If=/[,\[\]\{\}]/,Pf=/^(?:!|!!|![a-z\-]+!)$/i,Nf=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Df(t){return 10===t||13===t}function jf(t){return 9===t||32===t}function zf(t){return 9===t||32===t||10===t||13===t}function $f(t){return 44===t||91===t||93===t||123===t||125===t}function Ff(t){return 48===t?"\0":97===t?"\x07":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"\x1b":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"\x85":95===t?"\xa0":76===t?"\u2028":80===t?"\u2029":""}for(var Bf=new Array(256),Hf=new Array(256),Uf=0;Uf<256;Uf++)Bf[Uf]=Ff(Uf)?1:0,Hf[Uf]=Ff(Uf);function Gf(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Mf,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Vf(t,e){return new Kh(e,new Xh(t.filename,t.input,t.position,t.line,t.position-t.lineStart))}function Wf(t,e){throw Vf(t,e)}function qf(t,e){t.onWarning&&t.onWarning.call(null,Vf(t,e))}var Kf={YAML:function(t,e,n){var i,r,o;null!==t.version&&Wf(t,"duplication of %YAML directive"),1!==n.length&&Wf(t,"YAML directive accepts exactly one argument"),null===(i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Wf(t,"ill-formed argument of the YAML directive"),r=parseInt(i[1],10),o=parseInt(i[2],10),1!==r&&Wf(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,1!==o&&2!==o&&qf(t,"unsupported YAML version of the document")},TAG:function(t,e,n){var i,r;2!==n.length&&Wf(t,"TAG directive accepts exactly two arguments"),i=n[0],r=n[1],Pf.test(i)||Wf(t,"ill-formed tag handle (first argument) of the TAG directive"),Lf.call(t.tagMap,i)&&Wf(t,'there is a previously declared suffix for "'+i+'" tag handle'),Nf.test(r)||Wf(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[i]=r}};function Yf(t,e,n,i){var r,o,s,a;if(e<n){if(a=t.input.slice(e,n),i)for(r=0,o=a.length;r<o;r+=1)9===(s=a.charCodeAt(r))||32<=s&&s<=1114111||Wf(t,"expected valid JSON character");else Rf.test(a)&&Wf(t,"the stream contains non-printable characters");t.result+=a}}function Xf(t,e,n,i){var r,o,s,a;for(Wh.isObject(n)||Wf(t,"cannot merge mappings; the provided source object is unacceptable"),s=0,a=(r=Object.keys(n)).length;s<a;s+=1)o=r[s],Lf.call(e,o)||(e[o]=n[o],i[o]=!0)}function Zf(t,e,n,i,r,o){var s,a;if(r=String(r),null===e&&(e={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(o))for(s=0,a=o.length;s<a;s+=1)Xf(t,e,o[s],n);else Xf(t,e,o,n);else t.json||Lf.call(n,r)||!Lf.call(e,r)||Wf(t,"duplicated mapping key"),e[r]=o,delete n[r];return e}function Jf(t){var e=t.input.charCodeAt(t.position);10===e?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):Wf(t,"a line break is expected"),t.line+=1,t.lineStart=t.position}function Qf(t,e,n){for(var i=0,r=t.input.charCodeAt(t.position);0!==r;){for(;jf(r);)r=t.input.charCodeAt(++t.position);if(e&&35===r)for(;10!==(r=t.input.charCodeAt(++t.position))&&13!==r&&0!==r;);if(!Df(r))break;for(Jf(t),r=t.input.charCodeAt(t.position),i++,t.lineIndent=0;32===r;)t.lineIndent++,r=t.input.charCodeAt(++t.position)}return-1!==n&&0!==i&&t.lineIndent<n&&qf(t,"deficient indentation"),i}function tp(t){var e=t.position,n=t.input.charCodeAt(e);return 45!==n&&46!==n||n!==t.input.charCodeAt(e+1)||n!==t.input.charCodeAt(e+2)||(e+=3,0!==(n=t.input.charCodeAt(e))&&!zf(n))?void 0:1}function ep(t,e){1===e?t.result+=" ":1<e&&(t.result+=Wh.repeat("\n",e-1))}function np(t,e){var n,i,r=t.tag,o=t.anchor,s=[],a=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=s),i=t.input.charCodeAt(t.position);0!==i&&45===i&&zf(t.input.charCodeAt(t.position+1));)if(a=!0,t.position++,Qf(t,!0,-1)&&t.lineIndent<=e)s.push(null),i=t.input.charCodeAt(t.position);else if(n=t.line,ip(t,e,3,!1,!0),s.push(t.result),Qf(t,!0,-1),i=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&0!==i)Wf(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!a&&(t.tag=r,t.anchor=o,t.kind="sequence",t.result=s,!0)}function ip(t,e,n,i,r){var o,s,a,l,c,u,h,f,p=1,d=!1,g=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=a=4===n||3===n,i&&Qf(t,!0,-1)&&(d=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),1===p)for(;function(t){var e,n,i,r=!1,o=!1,s=t.input.charCodeAt(t.position);if(33===s){if(null!==t.tag&&Wf(t,"duplication of a tag property"),60===(s=t.input.charCodeAt(++t.position))?(r=!0,s=t.input.charCodeAt(++t.position)):33===s?(o=!0,n="!!",s=t.input.charCodeAt(++t.position)):n="!",e=t.position,r){for(;0!==(s=t.input.charCodeAt(++t.position))&&62!==s;);t.position<t.length?(i=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):Wf(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==s&&!zf(s);)33===s&&(o?Wf(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),Pf.test(n)||Wf(t,"named tag handle cannot contain such characters"),o=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);i=t.input.slice(e,t.position),If.test(i)&&Wf(t,"tag suffix cannot contain flow indicator characters")}return i&&!Nf.test(i)&&Wf(t,"tag name cannot contain such characters: "+i),r?t.tag=i:Lf.call(t.tagMap,n)?t.tag=t.tagMap[n]+i:"!"===n?t.tag="!"+i:"!!"===n?t.tag="tag:yaml.org,2002:"+i:Wf(t,'undeclared tag handle "'+n+'"'),1}}(t)||function(t){var e,n=t.input.charCodeAt(t.position);if(38===n){for(null!==t.anchor&&Wf(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!zf(n)&&!$f(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Wf(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),1}}(t);)Qf(t,!0,-1)?(d=!0,a=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):a=!1;if(a=a&&(d||r),1!==p&&4!==n||(h=1===n||2===n?e:e+1,f=t.position-t.lineStart,1===p?a&&(np(t,f)||function(t,e,n){var i,r,o,s,a=t.tag,l=t.anchor,c={},u={},h=null,f=null,p=null,d=!1,g=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=c),s=t.input.charCodeAt(t.position);0!==s;){if(i=t.input.charCodeAt(t.position+1),o=t.line,63!==s&&58!==s||!zf(i)){if(!ip(t,n,2,!1,!0))break;if(t.line===o){for(s=t.input.charCodeAt(t.position);jf(s);)s=t.input.charCodeAt(++t.position);if(58===s)zf(s=t.input.charCodeAt(++t.position))||Wf(t,"a whitespace character is expected after the key-value separator within a block mapping"),d&&(Zf(t,c,u,h,f,null),h=f=p=null),r=d=!(g=!0),h=t.tag,f=t.result;else{if(!g)return t.tag=a,t.anchor=l,1;Wf(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!g)return t.tag=a,t.anchor=l,1;Wf(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===s?(d&&(Zf(t,c,u,h,f,null),h=f=p=null),r=d=g=!0):d?r=!(d=!1):Wf(t,"incomplete explicit mapping pair; a key node is missed"),t.position+=1,s=i;if((t.line===o||t.lineIndent>e)&&(ip(t,e,4,!0,r)&&(d?f=t.result:p=t.result),d||(Zf(t,c,u,h,f,p),h=f=p=null),Qf(t,!0,-1),s=t.input.charCodeAt(t.position)),t.lineIndent>e&&0!==s)Wf(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return d&&Zf(t,c,u,h,f,null),g&&(t.tag=a,t.anchor=l,t.kind="mapping",t.result=c),g}(t,f,h))||function(t,e){var n,i,r,o,s,a,l,c,u,h=!0,f=t.tag,p=t.anchor,d={},g=t.input.charCodeAt(t.position);if(91===g)a=!(r=93),i=[];else{if(123!==g)return;r=125,a=!0,i={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=i),g=t.input.charCodeAt(++t.position);0!==g;){if(Qf(t,!0,e),(g=t.input.charCodeAt(t.position))===r)return t.position++,t.tag=f,t.anchor=p,t.kind=a?"mapping":"sequence",t.result=i,1;h||Wf(t,"missed comma between flow collection entries"),u=null,o=s=!1,63===g&&zf(t.input.charCodeAt(t.position+1))&&(o=s=!0,t.position++,Qf(t,!0,e)),n=t.line,ip(t,e,1,!1,!0),c=t.tag,l=t.result,Qf(t,!0,e),g=t.input.charCodeAt(t.position),!s&&t.line!==n||58!==g||(o=!0,g=t.input.charCodeAt(++t.position),Qf(t,!0,e),ip(t,e,1,!1,!0),u=t.result),a?Zf(t,i,d,c,l,u):o?i.push(Zf(t,null,d,c,l,u)):i.push(l),Qf(t,!0,e),44===(g=t.input.charCodeAt(t.position))?(h=!0,g=t.input.charCodeAt(++t.position)):h=!1}Wf(t,"unexpected end of the stream within a flow collection")}(t,h)?g=!0:(s&&function(t,e){var n,i,r,o,s=1,a=!1,l=e,c=0,u=!1,h=t.input.charCodeAt(t.position);if(124===h)i=!1;else{if(62!==h)return;i=!0}for(t.kind="scalar",t.result="";0!==h;)if(43===(h=t.input.charCodeAt(++t.position))||45===h)1===s?s=43===h?3:2:Wf(t,"repeat of a chomping mode identifier");else{if(!(0<=(r=48<=(o=h)&&o<=57?o-48:-1)))break;0==r?Wf(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?Wf(t,"repeat of an indentation width identifier"):(l=e+r-1,a=!0)}if(jf(h)){for(;jf(h=t.input.charCodeAt(++t.position)););if(35===h)for(;!Df(h=t.input.charCodeAt(++t.position))&&0!==h;);}for(;0!==h;){for(Jf(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&32===h;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),Df(h))c++;else{if(t.lineIndent<l){3===s?t.result+=Wh.repeat("\n",c):1===s&&a&&(t.result+="\n");break}for(i?jf(h)?(u=!0,t.result+=Wh.repeat("\n",c+1)):u?(u=!1,t.result+=Wh.repeat("\n",c+1)):0===c?a&&(t.result+=" "):t.result+=Wh.repeat("\n",c):t.result+=a?Wh.repeat("\n",c+1):Wh.repeat("\n",c),a=!0,c=0,n=t.position;!Df(h)&&0!==h;)h=t.input.charCodeAt(++t.position);Yf(t,n,t.position,!1)}}return 1}(t,h)||function(t,e){var n,i,r=t.input.charCodeAt(t.position);if(39===r){for(t.kind="scalar",t.result="",t.position++,n=i=t.position;0!==(r=t.input.charCodeAt(t.position));)if(39===r){if(Yf(t,n,t.position,!0),39!==(r=t.input.charCodeAt(++t.position)))return 1;n=i=t.position,t.position++}else Df(r)?(Yf(t,n,i,!0),ep(t,Qf(t,!1,e)),n=i=t.position):t.position===t.lineStart&&tp(t)?Wf(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Wf(t,"unexpected end of the stream within a single quoted scalar")}}(t,h)||function(t,e){var n,i,r,o,s,a,l,c,u,h=t.input.charCodeAt(t.position);if(34===h){for(t.kind="scalar",t.result="",t.position++,n=i=t.position;0!==(h=t.input.charCodeAt(t.position));){if(34===h)return Yf(t,n,t.position,!0),t.position++,1;if(92===h){if(Yf(t,n,t.position,!0),Df(h=t.input.charCodeAt(++t.position)))Qf(t,!1,e);else if(h<256&&Bf[h])t.result+=Hf[h],t.position++;else if(0<(s=120===(u=h)?2:117===u?4:85===u?8:0)){for(r=s,o=0;0<r;r--)c=void 0,0<=(s=48<=(l=h=t.input.charCodeAt(++t.position))&&l<=57?l-48:97<=(c=32|l)&&c<=102?c-97+10:-1)?o=(o<<4)+s:Wf(t,"expected hexadecimal character");t.result+=(a=o)<=65535?String.fromCharCode(a):String.fromCharCode(55296+(a-65536>>10),56320+(a-65536&1023)),t.position++}else Wf(t,"unknown escape sequence");n=i=t.position}else Df(h)?(Yf(t,n,i,!0),ep(t,Qf(t,!1,e)),n=i=t.position):t.position===t.lineStart&&tp(t)?Wf(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}Wf(t,"unexpected end of the stream within a double quoted scalar")}}(t,h)?g=!0:function(t){var e,n,i=t.input.charCodeAt(t.position);if(42===i){for(i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!zf(i)&&!$f(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&Wf(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),t.anchorMap.hasOwnProperty(n)||Wf(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Qf(t,!0,-1),1}}(t)?(g=!0,null===t.tag&&null===t.anchor||Wf(t,"alias node should not have any properties")):function(t,e,n){var i,r,o,s,a,l,c,u=t.kind,h=t.result,f=t.input.charCodeAt(t.position);if(!zf(f)&&!$f(f)&&35!==f&&38!==f&&42!==f&&33!==f&&124!==f&&62!==f&&39!==f&&34!==f&&37!==f&&64!==f&&96!==f&&(63!==f&&45!==f||!(zf(i=t.input.charCodeAt(t.position+1))||n&&$f(i)))){for(t.kind="scalar",t.result="",r=o=t.position,s=!1;0!==f;){if(58===f){if(zf(i=t.input.charCodeAt(t.position+1))||n&&$f(i))break}else if(35===f){if(zf(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&tp(t)||n&&$f(f))break;if(Df(f)){if(a=t.line,l=t.lineStart,c=t.lineIndent,Qf(t,!1,-1),t.lineIndent>=e){s=!0,f=t.input.charCodeAt(t.position);continue}t.position=o,t.line=a,t.lineStart=l,t.lineIndent=c;break}}s&&(Yf(t,r,o,!1),ep(t,t.line-a),r=o=t.position,s=!1),jf(f)||(o=t.position+1),f=t.input.charCodeAt(++t.position)}if(Yf(t,r,o,!1),t.result)return 1;t.kind=u,t.result=h}}(t,h,1===n)&&(g=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===p&&(g=a&&np(t,f))),null!==t.tag&&"!"!==t.tag)if("?"===t.tag){for(l=0,c=t.implicitTypes.length;l<c;l+=1)if((u=t.implicitTypes[l]).resolve(t.result)){t.result=u.construct(t.result),t.tag=u.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else Lf.call(t.typeMap,t.tag)?(u=t.typeMap[t.tag],null!==t.result&&u.kind!==t.kind&&Wf(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+u.kind+'", not "'+t.kind+'"'),u.resolve(t.result)?(t.result=u.construct(t.result),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):Wf(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")):Wf(t,"unknown tag !<"+t.tag+">");return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||g}function rp(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var n=new Gf(t,e);for(n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)!function(t){var e,n,i,r,o=t.position,s=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap={},t.anchorMap={};0!==(r=t.input.charCodeAt(t.position))&&(Qf(t,!0,-1),r=t.input.charCodeAt(t.position),!(0<t.lineIndent||37!==r));){for(s=!0,r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!zf(r);)r=t.input.charCodeAt(++t.position);for(i=[],(n=t.input.slice(e,t.position)).length<1&&Wf(t,"directive name must not be less than one character in length");0!==r;){for(;jf(r);)r=t.input.charCodeAt(++t.position);if(35===r){for(;0!==(r=t.input.charCodeAt(++t.position))&&!Df(r););break}if(Df(r))break;for(e=t.position;0!==r&&!zf(r);)r=t.input.charCodeAt(++t.position);i.push(t.input.slice(e,t.position))}0!==r&&Jf(t),Lf.call(Kf,n)?Kf[n](t,n,i):qf(t,'unknown document directive "'+n+'"')}Qf(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,Qf(t,!0,-1)):s&&Wf(t,"directives end mark is expected"),ip(t,t.lineIndent-1,4,!1,!0),Qf(t,!0,-1),t.checkLineBreaks&&Of.test(t.input.slice(o,t.position))&&qf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&tp(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,Qf(t,!0,-1)):t.position<t.length-1&&Wf(t,"end of the stream or a document separator is expected")}(n);return n.documents}function op(t,e,n){for(var i=rp(t,n),r=0,o=i.length;r<o;r+=1)e(i[r])}function sp(t,e){var n=rp(t,e);if(0!==n.length){if(1===n.length)return n[0];throw new Kh("expected a single document in the stream, but found more")}}var ap={loadAll:op,load:sp,safeLoadAll:function(t,e,n){op(t,e,Wh.extend({schema:Sf},n))},safeLoad:function(t,e){return sp(t,Wh.extend({schema:Sf},e))}},lp=Object.prototype.toString,cp=Object.prototype.hasOwnProperty,up=10,hp={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},fp=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function pp(t){this.schema=t.schema||Mf,this.indent=Math.max(1,t.indent||2),this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Wh.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=function(t,e){var n,i,r,o,s,a,l;if(null===e)return{};for(n={},r=0,o=(i=Object.keys(e)).length;r<o;r+=1)s=i[r],a=String(e[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(l=t.compiledTypeMap[s])&&cp.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[s]=a;return n}(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function dp(t,e){for(var n,i=Wh.repeat(" ",e),r=0,o=-1,s="",a=t.length;r<a;)r=-1===(o=t.indexOf("\n",r))?(n=t.slice(r),a):(n=t.slice(r,o+1),o+1),n.length&&"\n"!==n&&(s+=i),s+=n;return s}function gp(t,e){return"\n"+Wh.repeat(" ",t.indent*e)}function mp(t){this.source=t,this.result="",this.checkpoint=0}function vp(t,e){if(""===t)return t;for(var n,i,r=/[^\s] [^\s]/g,o="",s=0,a=0,l=r.exec(t);l;)e<(n=l.index)-a&&(i=s!==a?s:n,o&&(o+="\n"),o+=t.slice(a,i),a=i+1),s=n+1,l=r.exec(t);return o&&(o+="\n"),a!==s&&t.length-a>e?o+=t.slice(a,s)+"\n"+t.slice(s+1):o+=t.slice(a),o}function yp(t){return!(32<=t&&t<=126||133===t||160<=t&&t<=55295||57344<=t&&t<=65533||65536<=t&&t<=1114111)}function bp(t,e,n){for(var i,r,o,s=n?t.explicitTypes:t.implicitTypes,a=0,l=s.length;a<l;a+=1)if(((r=s[a]).instanceOf||r.predicate)&&(!r.instanceOf||"object"==typeof e&&e instanceof r.instanceOf)&&(!r.predicate||r.predicate(e))){if(t.tag=n?r.tag:"?",r.represent){if(o=t.styleMap[r.tag]||r.defaultStyle,"[object Function]"===lp.call(r.represent))i=r.represent(e,o);else{if(!cp.call(r.represent,o))throw new Kh("!<"+r.tag+'> tag resolver accepts not "'+o+'" style');i=r.represent[o](e,o)}t.dump=i}return 1}}function _p(t,e,n,i,r,o){t.tag=null,t.dump=n,bp(t,n,!1)||bp(t,n,!0);var s=lp.call(t.dump);i=i&&(t.flowLevel<0||t.flowLevel>e);var a,l,c="[object Object]"===s||"[object Array]"===s;if(c&&(l=-1!==(a=t.duplicates.indexOf(n))),(null!==t.tag&&"?"!==t.tag||l||2!==t.indent&&0<e)&&(r=!1),l&&t.usedDuplicates[a])t.dump="*ref_"+a;else{if(c&&l&&!t.usedDuplicates[a]&&(t.usedDuplicates[a]=!0),"[object Object]"===s)i&&0!==Object.keys(t.dump).length?(function(t,e,n,i){var r,o,s,a,l,c,u="",h=t.tag,f=Object.keys(n);if(!0===t.sortKeys)f.sort();else if("function"==typeof t.sortKeys)f.sort(t.sortKeys);else if(t.sortKeys)throw new Kh("sortKeys must be a boolean or a function");for(r=0,o=f.length;r<o;r+=1)c="",i&&0===r||(c+=gp(t,e)),a=n[s=f[r]],_p(t,e+1,s,!0,!0,!0)&&((l=null!==t.tag&&"?"!==t.tag||t.dump&&1024<t.dump.length)&&(t.dump&&up===t.dump.charCodeAt(0)?c+="?":c+="? "),c+=t.dump,l&&(c+=gp(t,e)),_p(t,e+1,a,!0,l)&&(t.dump&&up===t.dump.charCodeAt(0)?c+=":":c+=": ",u+=c+=t.dump));t.tag=h,t.dump=u||"{}"}(t,e,t.dump,r),l&&(t.dump="&ref_"+a+t.dump)):(function(t,e,n){for(var i,r,o,s="",a=t.tag,l=Object.keys(n),c=0,u=l.length;c<u;c+=1)o="",0!==c&&(o+=", "),r=n[i=l[c]],_p(t,e,i,!1,!1)&&(1024<t.dump.length&&(o+="? "),o+=t.dump+": ",_p(t,e,r,!1,!1)&&(s+=o+=t.dump));t.tag=a,t.dump="{"+s+"}"}(t,e,t.dump),l&&(t.dump="&ref_"+a+" "+t.dump));else if("[object Array]"===s)i&&0!==t.dump.length?(function(t,e,n,i){for(var r="",o=t.tag,s=0,a=n.length;s<a;s+=1)_p(t,e+1,n[s],!0,!0)&&(i&&0===s||(r+=gp(t,e)),r+="- "+t.dump);t.tag=o,t.dump=r||"[]"}(t,e,t.dump,r),l&&(t.dump="&ref_"+a+t.dump)):(function(t,e,n){for(var i="",r=t.tag,o=0,s=n.length;o<s;o+=1)_p(t,e,n[o],!1,!1)&&(0!==o&&(i+=", "),i+=t.dump);t.tag=r,t.dump="["+i+"]"}(t,e,t.dump),l&&(t.dump="&ref_"+a+" "+t.dump));else{if("[object String]"!==s){if(t.skipInvalid)return;throw new Kh("unacceptable kind of an object to dump "+s)}"?"!==t.tag&&function(t,e,n,i){var r,o,s,a,l,c,u,h,f,p,d,g,m,v,y,b,_,w,x,k,S;if(0!==e.length)if(-1===fp.indexOf(e)){for(r=!0,45!==(o=e.length?e.charCodeAt(0):0)&&63!==o&&64!==o&&96!==o||(r=!1),l=a=(s=32===o||32===e.charCodeAt(e.length-1))||-1<t.flowLevel&&t.flowLevel<=n?(s&&(r=!1),!1):!i,c=!0,u=new mp(e),h=!1,p=f=0,d=t.indent*n,-1===(g=t.lineWidth)&&(g=9007199254740991),d<40?g-=d:g=40,v=0;v<e.length;v++){if(m=e.charCodeAt(v),r){if(9!==(S=m)&&up!==S&&13!==S&&44!==S&&91!==S&&93!==S&&123!==S&&125!==S&&35!==S&&38!==S&&42!==S&&33!==S&&124!==S&&62!==S&&39!==S&&34!==S&&37!==S&&58!==S&&!hp[S]&&!yp(S))continue;r=!1}c&&39===m&&(c=!1),y=hp[m],b=yp(m),(y||b)&&(m!==up&&34!==m&&39!==m?l=a=!1:m===up&&(c=!(h=!0),0<v&&32===e.charCodeAt(v-1)&&(a=l=!1),a&&(_=v-f,f=v,p<_&&(p=_))),34!==m&&(c=!1),u.takeUpTo(v),u.escapeChar())}if(r&&function(t,e){for(var n=0,i=t.implicitTypes.length;n<i;n+=1)if(t.implicitTypes[n].resolve(e))return 1}(t,e)&&(r=!1),w="",(a||l)&&(x=0,e.charCodeAt(e.length-1)===up&&(x+=1,e.charCodeAt(e.length-2)===up&&(x+=1)),0===x?w="-":2===x&&(w="+")),(l&&p<g||null!==t.tag)&&(a=!1),h||(l=!1),r)t.dump=e;else if(c)t.dump="'"+e+"'";else if(a)k=function(t,e){var n,i="",r=0,o=t.length,s=/\n+$/.exec(t);for(s&&(o=s.index+1);r<o;)r=o<(n=t.indexOf("\n",r))||-1===n?(i&&(i+="\n\n"),i+=vp(t.slice(r,o),e),o):(i&&(i+="\n\n"),i+=vp(t.slice(r,n),e),n+1);return s&&"\n"!==s[0]&&(i+=s[0]),i}(e,g),t.dump=">"+w+"\n"+dp(k,d);else if(l)w||(e=e.replace(/\n$/,"")),t.dump="|"+w+"\n"+dp(e,d);else{if(!u)throw new Error("Failed to dump scalar value");u.finish(),t.dump='"'+u.result+'"'}}else t.dump="'"+e+"'";else t.dump="''"}(t,t.dump,e,o)}null!==t.tag&&"?"!==t.tag&&(t.dump="!<"+t.tag+"> "+t.dump)}return 1}function wp(t,e){var n=new pp(e=e||{});return n.noRefs||function(t,e){var n,i,r=[],o=[];for(function t(e,n,i){var r,o,s;if(null!==e&&"object"==typeof e)if(-1!==(o=n.indexOf(e)))-1===i.indexOf(o)&&i.push(o);else if(n.push(e),Array.isArray(e))for(o=0,s=e.length;o<s;o+=1)t(e[o],n,i);else for(o=0,s=(r=Object.keys(e)).length;o<s;o+=1)t(e[r[o]],n,i)}(t,r,o),n=0,i=o.length;n<i;n+=1)e.duplicates.push(r[o[n]]);e.usedDuplicates=new Array(i)}(t,n),_p(n,0,t,!0,!0)?n.dump+"\n":""}mp.prototype.takeUpTo=function(t){var e;if(t<this.checkpoint)throw(e=new Error("position should be > checkpoint")).position=t,e.checkpoint=this.checkpoint,e;return this.result+=this.source.slice(this.checkpoint,t),this.checkpoint=t,this},mp.prototype.escapeChar=function(){var t=this.source.charCodeAt(this.checkpoint),e=hp[t]||function(t){var e,n,i=t.toString(16).toUpperCase();if(t<=255)e="x",n=2;else if(t<=65535)e="u",n=4;else{if(!(t<=4294967295))throw new Kh("code point within a string may not be greater than 0xFFFFFFFF");e="U",n=8}return"\\"+e+Wh.repeat("0",n-i.length)+i}(t);return this.result+=e,this.checkpoint+=1,this},mp.prototype.finish=function(){this.source.length>this.checkpoint&&this.takeUpTo(this.source.length)};var xp={dump:wp,safeDump:function(t,e){return wp(t,Wh.extend({schema:Sf},e))}};function kp(t){return function(){throw new Error("Function "+t+" is deprecated and cannot be used.")}}var Sp={Type:Qh,Schema:nf,FAILSAFE_SCHEMA:rf,JSON_SCHEMA:uf,CORE_SCHEMA:hf,DEFAULT_SAFE_SCHEMA:Sf,DEFAULT_FULL_SCHEMA:Mf,load:ap.load,loadAll:ap.loadAll,safeLoad:ap.safeLoad,safeLoadAll:ap.safeLoadAll,dump:xp.dump,safeDump:xp.safeDump,YAMLException:Kh,MINIMAL_SCHEMA:rf,SAFE_SCHEMA:Sf,DEFAULT_SCHEMA:Mf,scan:kp("scan"),parse:kp("parse"),compose:kp("compose"),addConstructor:kp("addConstructor")},Ap=function(){function t(e,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;yi(this,t),this.url=e,!n||Ir(n)&&!Ir(this.url)?this.path=Or(this.url):this.path=n,this.path_for_parent=n||this.path,this.parent=i,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}return _i(t,[{key:"load",value:function(){return t=this.url,new Promise((function(e,n){"string"==typeof t?Tr.io(t).then((function(t){try{var i=function(t){var e;try{e=Sp.safeLoad(t,{json:!0})}catch(t){throw t}return e}(t);e(i)}catch(t){n(t)}}),n):(t=Object.assign({},t),e(t))}));var t}},{key:"resourceFor",value:function(t){return{url:this.urlFor(t),path:this.pathFor(t),type:this.typeFor(t)}}},{key:"urlFor",value:function(t){return Ep(t)?t:Ir(t)&&this.container?this.parent.urlFor(this.path_for_parent+t):function(t,e){if(!t||!Ir(t))return t;var n,i="/"!==t[0];return e?(n=document.createElement("a")).href=e:n=window.location,i?Or(n.href)+t:(n.origin||n.protocol+"//"+n.host)+t}(t,this.path)}},{key:"pathFor",value:Or},{key:"typeFor",value:function(t){var e=(t=t.split("/").pop()).lastIndexOf(".");if(-1<e)return t.substring(e+1)}},{key:"isContainer",value:function(){return!1}}]),t}();function Ep(t){return!(!t||"global."!==t.slice(0,7))}function Tp(t){return null!=t}function Cp(t){return"("+t+")"}function Mp(t){return"$"===t[0]?"context['"+t.substring(1)+"']":"context.feature.properties['"+t+"']"}function Lp(t,e){return Cp(("string"==typeof(n=e)?'"'+n+'"':n)+" === "+Mp(t));var n}function Rp(t,e){return Cp(t.filter(Tp).map((function(t){return Cp(t.join(" && "))})).join(" "+e+" "))}function Op(t,e,n){return e&&0<e.length?Rp(e.map((function(t){return Ip(t,n)})),"||"):"true"}function Ip(t,e){var n=[];if("function"==typeof t)return[Cp(t.toString()+"(context)")];if(Array.isArray(t))return[Op(0,t,e)];if(null==t)return["true"];for(var i,r,o,s,a,l,c,u,h=Object.keys(t),f=0;f<h.length;f++){var p=h[f],d=t[p],g=vi(d);if("string"===g||"number"===g)n.push(Lp(p,d));else if("boolean"===g)n.push((u=d,Cp(Mp(p)+(u?" != ":" == ")+"null")));else if("not"===p)n.push("!"+Cp(Ip(d,e).join(" && ")));else if("any"===p)n.push(Op(0,d,e));else if("all"===p)n.push(function(t,e){return t&&0<t.length?Rp(t.map((function(t){return Ip(t,e)})),"&&"):"true"}(d,e));else if("none"===p)n.push("!"+Cp(Op(0,d,e)));else if(Array.isArray(d))n.push(function(t,e){return Cp(e.map((function(e){return Lp(t,e)})).join(" || "))}(p,d));else if("object"===g&&null!=d)(d.max||d.min)&&n.push((i=p,r=d,c=l=a=s=void 0,l=[],c=(o=e)&&"function"==typeof o.rangeTransform&&o.rangeTransform,r.max&&(s=c?c(r.max):r.max,l.push(Mp(i)+" < "+s)),r.min&&(a=c?a=c(r.min):r.min,l.push(Mp(i)+" >= "+a)),Cp(l.join(" && "))));else{if(null!=d)throw new Error("Unknown Query syntax: "+d);n.push(" true ")}}return 0===h.length?["true"]:n}function Pp(t,e){return null==t?function(){return!0}:new Function("context","return "+Cp(Ip(t,e).join(" && "))+";")}var Np=["filter","draw","visible","enabled","data"],Dp={},jp=["any","all","not","none"],zp=function(){function t(e){var n,i=e.layer,r=e.name,o=e.parent,s=e.draw,a=e.visible,l=e.enabled,c=e.filter,u=e.styles;if(yi(this,t),this.id=t.id++,this.config_data=i.data,this.parent=o,this.name=r,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=s,this.filter=c,this.styles=u,this.is_built=!1,l=void 0===l?a:l,this.parent&&!1===this.parent.visible?this.enabled=!1:this.enabled=!1!==l,this.draw)for(var h in this.draw)this.draw[h]=null==this.draw[h]?{}:this.draw[h],"object"!==vi(this.draw[h])?(n="Draw group '".concat(h,"' for layer ").concat(this.full_name," is invalid, must be an object, "),Ar("warn",n+="but was set to `".concat(h,": ").concat(this.draw[h],"` instead")),delete this.draw[h]):this.draw[h].layer_name=this.full_name}return _i(t,[{key:"build",value:function(){Ar("trace","Building layer '".concat(this.full_name,"'")),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){this.draw=Tr.stringsToFunctions(this.draw,_o.wrapFunction),this.calculatedDraw=function(t){var e,n=[];return t.parent&&(e=t.parent.calculatedDraw||[],n.push.apply(n,Pi(e))),n.push(t.draw),n}(this)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=Tr.stringsToFunctions(this.filter,_o.wrapFunction);var t=vi(this.filter);if(null==this.filter||"object"===t||"function"===t)try{this.buildZooms(),this.buildPropMatches(),null!=this.filter&&("function"==typeof this.filter||0<Object.keys(this.filter).length)?this.filter=Pp(this.filter,Hp):this.filter=null}catch(t){var e="Filter for layer ".concat(this.full_name," is invalid, `filter: ").concat(JSON.stringify(this.filter),"` ");Ar("warn",e+="failed with error '".concat(t.message,"', stack trace: ").concat(t.stack))}else{var n="Filter for layer ".concat(this.full_name," is invalid, filter value must be an object or function, ");Ar("warn",n+="but was set to `filter: ".concat(this.filter,"` instead"))}}},{key:"buildZooms",value:function(){var t=this.filter&&this.filter.$zoom,e=vi(t);if(null!=t&&"function"!==e){if(this.zooms={},"number"===e)this.zooms[t]=!0;else if(Array.isArray(t))for(var n=0;n<t.length;n++)this.zooms[t[n]]=!0;else if("object"===e&&(null!=t.min||null!=t.max))for(var i=t.min||0,r=t.max||25,o=i;o<r;o++)this.zooms[o]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var t=this;this.filter&&!Array.isArray(this.filter)&&"function"!=typeof this.filter&&Object.keys(this.filter).forEach((function(e){if(-1===jp.indexOf(e)){var n=t.filter[e],i=vi(n),r=Array.isArray(n);if(!r&&"string"!==i&&"number"!==i)return;"$"===e[0]?(t.context_prop_matches=t.context_prop_matches||[],t.context_prop_matches.push([e.substring(1),r?n:[n]])):(t.feature_prop_matches=t.feature_prop_matches||[],t.feature_prop_matches.push([e,r?n:[n]])),delete t.filter[e]}}))}},{key:"doPropMatches",value:function(t){if(this.feature_prop_matches)for(var e=0;e<this.feature_prop_matches.length;e++){var n=this.feature_prop_matches[e],i=t.feature.properties[n[0]];if(null==i||-1===n[1].indexOf(i))return!1}if(this.context_prop_matches)for(var r=0;r<this.context_prop_matches.length;r++){var o=this.context_prop_matches[r],s=t[o[0]];if(null==s||-1===o[1].indexOf(s))return!1}return!0}},{key:"doesMatch",value:function(t){if(!this.enabled)return!1;if(this.is_built||this.build(),null!=this.zooms&&!this.zooms[t.zoom])return!1;if(!this.doPropMatches(t))return!1;var e;if(this.filter instanceof Function)try{e=this.filter(t)}catch(e){var n="Filter for this ".concat(this.full_name,": `filter: ").concat(this.filter_original,"` ");Ar("error",n+="failed with error '".concat(e.message,"', stack trace: ").concat(e.stack),t.feature)}else e=null==this.filter;return!!e&&(this.children_to_parse&&(function(t,e,n){for(var i in e){var r,o=e[i];"object"!==vi(o)||Array.isArray(o)?(r="Layer value must be an object: cannot create layer '".concat(i,": ").concat(JSON.stringify(o),"'"),r+=", under parent layer '".concat(t.full_name,"'."),n[t.name]&&(r+=" The parent name '".concat(t.name,"' is also the name of a style, did you mean to create a 'draw' group"),t.parent&&(r+=" under '".concat(t.parent.name,"'")),r+=" instead?"),Ar("warn",r)):Gp(i,o,t,n)}}(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}]),t}();zp.id=0;var $p,Fp=function(){Si(e,zp);var t=Ri(e);function e(n){var i;return yi(this,e),(i=t.call(this,n)).is_leaf=!0,i}return e}(),Bp=function(){Si(e,zp);var t=Ri(e);function e(n){var i;return yi(this,e),(i=t.call(this,n)).is_tree=!0,i.layers=n.layers||[],i}return _i(e,[{key:"addLayer",value:function(t){this.layers.push(t)}},{key:"buildDrawGroups",value:function(t){var e=[],n=[];if(function t(e,n,i,r){var o=!1;if(0!==n.length){for(var s=0;s<n.length;s++){var a=n[s];a.is_leaf?a.doesMatch(e)&&(o=!0,i.push(a),r.push(a.id)):a.is_tree&&a.doesMatch(e)&&(o=!0,t(e,a.layers,i,r)||(i.push(a),r.push(a.id)))}return o}}(t,[this],e,n),0<e.length){var i=function(t){if(1<t.length){for(var e=t[0],n=1;n<t.length;n++)e+="/"+t[n];return e}return t[0]}(n);if(void 0===Dp[i]){for(var r=e.map((function(t){return t&&!1!==t.visible&&t.calculatedDraw})),o={},s=0;s<r.length;s++){var a=r[s];if(a)for(var l=0;l<a.length;l++){var c=a[l];for(var u in c)o[u]=!0}}for(var h in o)Dp[i]=Dp[i]||{},Dp[i][h]=function(t,e){for(var n,i=0,r=0;r<t.length;r++)t[r].length>i&&(i=t[r].length);if(0===i)return null;for(var o={visible:!0},s=0;s<i;s++)!function(i){n=[],t.forEach((function(t){t[i]&&t[i][e]&&-1===n.indexOf(t[i][e])&&n.push(t[i][e])})),0!==n.length&&(n.sort((function(t,e){return(t&&t.layer_name)>(e&&e.layer_name)?1:-1})),vl.apply(void 0,[o].concat(Pi(n))),delete o.layer_name)}(s);return!1===o.visible?null:o}(r,h),Dp[i][h]?(Dp[i][h].key=i+"/"+h,Dp[i][h].layers=e.map((function(t){return t&&t.full_name})),Dp[i][h].group=h):delete Dp[i][h];Dp[i]&&0===Object.keys(Dp[i]).length&&(Dp[i]=null)}return Dp[i]}}}]),e}(),Hp={rangeTransform:function(t){return"string"==typeof t&&"px2"===t.trim().slice(-3)?"".concat(parseFloat(t)," * context.meters_per_pixel_sq"):t}};function Up(t){return-1<Np.indexOf(t)}function Gp(t,e,n,i){var r,o={name:t,layer:e=null==e?{}:e,parent:n,styles:i},s=Ii(function(t){var e={},n={};for(var i in t)Up(i)?e[i]=t[i]:n[i]=t[i];return[e,n]}(e),2),a=s[0],l=s[1],c=(r=l,0===Object.keys(r).length),u=new(c&&null!=n?Fp:Bp)(Object.assign(o,a));return u.enabled&&(n&&n.addLayer(u),u.children_to_parse=c?null:l),u}var Vp=/^global\.(.+)$/,Wp=$p={loadScene:function(t,e){var n=this,i=1<arguments.length&&void 0!==e?e:{},r=i.path,o=i.type,s=[];return this.loadSceneRecursive({url:t,path:r,type:o},null,s).then((function(t){return n.finalize(t)})).then((function(t){var e=t.config,i=t.bundle;return e?(0<s.length&&s.forEach((function(t){var e="Failed to import scene: ".concat(t.url);Ar("error",e,t),n.trigger("error",{type:"scene_import",message:e,error:t,url:t.url})})),{config:e,bundle:i}):Promise.reject(s[0])}))},loadSceneRecursive:function(t,e,n){var i=this,r=t.url,o=t.path,s=(t.type,2<arguments.length&&void 0!==n?n:[]);if(!r)return Promise.resolve({});var a=new Ap(r,o,e);return a.load().then((function(t){if(null==t.import)return i.normalize(t,a),{config:t,bundle:a};Array.isArray(t.import)||(t.import=[t.import]);var e=[];return t.import.forEach((function(t){"object"===vi(t)&&(t=Pr(new Blob([JSON.stringify(t)]))),e.push(a.resourceFor(t))})),delete t.import,Promise.all(e.map((function(t){return i.loadSceneRecursive(t,a,s)}))).then((function(e){e.forEach((function(t){return i.normalize(t.config,t.bundle)}));var n=e.map((function(t){return t.config}));return t=vl.apply(void 0,Pi(n).concat([t])),i.normalize(t,a),{config:t,bundle:a}}))})).catch((function(t){return t.url=r,s.push(t),{}}))},normalize:function(t,e){return this.normalizeDataSources(t,e),this.normalizeFonts(t,e),this.normalizeTextures(t,e),this.hoistTextures(t,e),{config:t,bundle:e}},normalizeDataSources:function(t,e){for(var n in t.sources=t.sources||{},t.sources)this.normalizeDataSource(t.sources[n],e);return t},normalizeDataSource:function(t,e){if(t.url&&(t.url=e.urlFor(t.url)),t.scripts)for(var n in Array.isArray(t.scripts)&&(t.scripts=t.scripts.reduce((function(t,e){return t[e]=e,t}),{})),t.scripts)t.scripts[n]=e.urlFor(t.scripts[n]);return t},normalizeFonts:function(t,e){for(var n in t.fonts=t.fonts||{},t.fonts){var i;Array.isArray(t.fonts[n])?t.fonts[n].forEach((function(t){t.url=t.url&&e.urlFor(t.url)})):(i=t.fonts[n]).url=i.url&&e.urlFor(i.url)}return t},normalizeTextures:function(t,e){if(t.textures=t.textures||{},t.textures)for(var n in t.textures){var i=t.textures[n];i.url&&(i.url=e.urlFor(i.url))}},hoistTextures:function(t,e){var n=this;if(t.styles)for(var i in t.styles)!function(i){var r=t.styles[i],o=r.texture;"string"!=typeof o||t.textures[o]||(r.texture=n.hoistTexture(o,t,e)),r.material&&["emission","ambient","diffuse","specular","normal"].forEach((function(i){var o=null!=r.material[i]&&r.material[i].texture;"string"!=typeof o||t.textures[o]||(r.material[i].texture=n.hoistTexture(o,t,e))}))}(i);if(this.hoistStyleShaderUniformTextures(t,e,{include_globals:!1}),t.layers)for(var r=[t.layers];0<r.length;){var o=r.pop();if("object"===vi(o)&&!Array.isArray(o))for(var s in o)if("draw"===s){var a,l,c=o[s];for(var u in c)c[u].texture&&("string"!=typeof(a=c[u].texture)||t.textures[a]||(c[u].texture=this.hoistTexture(a,t,e))),c[u].outline&&c[u].outline.texture&&("string"!=typeof(l=c[u].outline.texture)||t.textures[l]||(c[u].outline.texture=this.hoistTexture(l,t,e)))}else{if(Up(s))continue;r.push(o[s])}}},hoistStyleShaderUniformTextures:function(t,e,n){var i=this,r=n.include_globals;if(t.styles)for(var o in t.styles){var s=t.styles[o];s.shaders&&s.shaders.uniforms&&zl.parseUniforms(s.shaders.uniforms).forEach((function(n){var o=n.type,s=n.value,a=n.key,l=n.uniforms;"sampler2D"!==o||"string"!=typeof s||t.textures[s]||!r&&Ep(s)||(l[a]=i.hoistTexture(s,t,e))}))}},hoistTexture:function(t,e,n){var i=Ep(t),r=i?t:n.urlFor(t),o=i?"texture-".concat(r):r;return e.textures[o]={url:r},o},applyGlobalProperties:function(t){if(!t.global||0===Object.keys(t.global).length)return t;var e=function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};for(var o in i=i?i+n:"",e){var s=i+o,a=e[o];"object"!==vi(r[s]=a)||Array.isArray(a)||t(a,n,s,r)}return r}(t.global);return function t(n){if("string"==typeof n){var i=function t(e,n,i){var r=2<arguments.length&&void 0!==i?i:[];if(-1<r.indexOf(e))Ar({level:"warn",once:!0},"Global properties: cyclical reference detected",r);else{r.push(e);var o=Vp.exec(e);if(o){var s=o[1];if(s){var a=n[s];if(void 0!==a)return"string"==typeof a&&Vp.exec(a)?t(a,n,r):a;Ar({level:"warn",once:!0},"Global property not found: "+e)}else Ar({level:"warn",once:!0},"Invalid global property reference: "+e)}}}(n,e);void 0!==i&&(n=i)}else if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]=t(n[r]);else if("object"===vi(n))for(var o in n)n[o]=t(n[o]);return n}(t)},finalize:function(t){var e=t.config,n=t.bundle;return e?(e.global=e.global||{},e.scene=e.scene||{},e.cameras=e.cameras||{},e.lights=e.lights||{},e.styles=e.styles||{},e.layers=e.layers||{},e.camera&&(e.cameras.default=e.camera),0===Object.keys(e.cameras).length&&(e.cameras.default={}),0!==Object.keys(e.lights).length&&!Object.keys(e.lights).every((function(t){return!1===e.lights[t].visible}))||(e.lights.default_light={type:"directional"}),{config:e,bundle:n}):{}}};Io($p);var qp=function(){function t(){yi(this,t),this.coords={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=10}return _i(t,[{key:"sourceTiles",value:function(t,e){return this.coords[t.key]&&this.coords[t.key].sources&&this.coords[t.key].sources[e.name]}},{key:"addTile",value:function(t){var e=t.coords.key,n=this.coords[e];(n=n||(this.coords[e]={descendants:0})).sources||(n.sources={}),n.sources[t.source.name]||(n.sources[t.source.name]={});for(var i=(n.sources[t.source.name][t.style_zoom]=t).coords.z-1;0<=i;i--){var r=es.coordinateAtZoom(t.coords,i);this.coords[r.key]||(this.coords[r.key]={descendants:0}),this.coords[r.key].descendants++}}},{key:"removeTile",value:function(t){var e=this.sourceTiles(t.coords,t.source),n=t.coords.key;e&&(delete e[t.style_zoom],0===Object.keys(e).length&&(delete this.coords[n].sources[t.source.name],0===Object.keys(this.coords[n].sources).length&&(delete this.coords[n].sources,0===this.coords[n].descendants&&delete this.coords[n])));for(var i=t.coords.z-1;0<=i;i--){var r=es.coordinateAtZoom(t.coords,i);this.coords[r.key]&&0<this.coords[r.key].descendants&&(this.coords[r.key].descendants--,0!==this.coords[r.key].descendants||this.coords[r.key].sources||delete this.coords[r.key])}}},{key:"getAncestor",value:function(t,e){var n=t.coords,i=t.style_zoom,r=t.source,o=1<arguments.length&&void 0!==e?e:1;if(!(o>this.max_proxy_ancestor_depth)){if(i>r.max_coord_zoom){var s=this.sourceTiles(n,r);if(s)for(var a=i-1;a>=r.max_coord_zoom;a--)if(s[a]&&s[a].loaded)return s[a];i=r.max_coord_zoom}i--;var l=es.coordinateAtZoom(n,n.z-1),c=this.sourceTiles(l,r);return c&&c[i]&&c[i].loaded?c[i]:0<l.z?this.getAncestor({coords:l,style_zoom:i,source:r},o+1):void 0}}},{key:"getDescendants",value:function(t,e){var n=t.coords,i=t.style_zoom,r=t.source,o=1<arguments.length&&void 0!==e?e:1,s=[];if(i>=r.max_coord_zoom){var a=this.sourceTiles(n,r);if(a)for(var l=Math.max(er.default_view_max_zoom,i+this.max_proxy_descendant_depth),c=i+1;c<=l;c++)if(a[c]&&a[c].loaded)return s.push(a[c]),s;return s}if(this.coords[n.key]&&0<this.coords[n.key].descendants){i++;for(var u=es.childrenForCoordinate(n),h=0;h<u.length;h++){var f=u[h],p=this.sourceTiles(f,r);p&&p[i]&&p[i].loaded?s.push(p[i]):o<=this.max_proxy_descendant_depth&&f.z<=r.max_coord_zoom&&s.push.apply(s,Pi(this.getDescendants({coords:f,source:r,style_zoom:i},o+1)))}}return s}}]),t}(),Kp=function(){function t(e,n,i,r){yi(this,t),Object.assign(this,e),this.placed=null,this._tile=r;var o=er.unitsPerMeter(r.coords.z)*Math.pow(2,i-r.style_zoom);this.layout=Object.assign({},e.layout),this.layout.repeat_scale=.75,this.layout.repeat_distance=this.layout.repeat_distance||0,this.layout.repeat_distance/=o,this.position=er.tileSpaceToMeters(this.position,r.coords.z,r.min),this._worldToScreen=n,this._screenSpaceBoundingBox=void 0,this._boundingCircles=void 0}return _i(t,[{key:"getTile",value:function(){return this._tile}},{key:"isFlat",value:function(){return this.is_flat}},{key:"getScreenSpaceBoundingBox",value:function(){var t,e,n,i,r,o,s;return this._screenSpaceBoundingBox||((t=this._worldToScreen(this.position,!0))[0]+=this.offset[0],t[1]+=this.offset[1],e=this.size[0]/2+this.layout.buffer[0],n=this.size[1]/2+this.layout.buffer[1],i=t[0]-e,r=t[0]+e,o=t[1]-n,s=t[1]+n,this._screenSpaceBoundingBox={left:i,bottom:s,right:r,top:o}),this._screenSpaceBoundingBox}},{key:"getBoundingCircles",value:function(){return this._boundingCircles||(this._boundingCircles="point"===this.type?this._convertSidesToScreenSpaceCircles():this._convertCirclesToScreenSpace()),this._boundingCircles}},{key:"_convertSidesToScreenSpaceCircles",value:function(){var t=this._tile.coords.z,e=this._tile.min,n=er.tileSpaceToMeters([this.sides[0],this.sides[1]],t,e),i=er.tileSpaceToMeters([this.sides[2],this.sides[3]],t,e),r=Ii(this._worldToScreen(n,!0),2),o=r[0],s=r[1],a=Ii(this._worldToScreen(i,!0),2);return Ou(o,s,a[0],a[1],this.size[1]/2+this.layout.buffer[1])}},{key:"_convertCirclesToScreenSpace",value:function(){for(var t=[],e=this.circles,n=this._tile.coords.z,i=this._tile.min,r=0;r<e.length-2;r+=3){var o=er.tileSpaceToMeters([e[r],-e[r+1]],n,i),s=e[r+2]/er.unitsPerMeter(n),a=[o[0]+s,o[1]],l=this._worldToScreen(o,!0),c=this._worldToScreen(a,!0),u=Qi.getLineLength(l[0],l[1],c[0],c[1]);t.push(l[0],l[1],u)}return t}}]),t}(),Yp=function(t,e,n,i,r,o){Zp=Xp,Xp={};var s={},a={},l=[],c=n.worldToScreen.bind(n),u=new td(o);for(var h in t.forEach((function(t){for(var n in t.meshes)t.meshes[n].forEach((function(n){if(n.labels){for(var i in u.trackMesh(n),n.labels["non-collision"]){var r=Qp(n.labels["non-collision"][i],n,c,e,t);r.label.text_data&&u.insertLabel(r,t)}for(var o in n.labels.collision){var l;s[o]||(l=Qp(n.labels.collision[o],n,c,e,t),s[o]=l.label,a[o]=l)}}}))})),a){var f=a[h];f.linked&&(f.linked=a[f.linked]),l.push(f)}var p=n.getViewport(),d=p.width,g=p.height;return Mo.startTile("main",{apply_repeat_groups:!0,return_hidden:!0,grid_index:new To(d,g,30)}),Mo.addStyle("main","main"),Mo.collide(l,"main","main").then((function(t){return t.forEach((function(t){var e,n,r,o,s,a,l=t.mesh,c=t.label.getTile();l.valid&&(!(e=0)!==t.show||i&&t.label.breach&&!Zp[t.label.id]||(e=1),e&&(Xp[t.label.id]=!0),t.label.text_data&&u.insertLabel(t,c),n=l.vertex_layout.offset.a_shape,r=l.vertex_layout.stride,s=(o=l.vertex_layout.attribs.find((function(t){return"a_shape"===t.name}))).byte_size/o.size,n+=3*s,a=!0,t.ranges.forEach((function(t){if(a){for(var i=0;i<t[1];i++){if(l.vertex_data[t[0]+i*r+n]===e)return void(a=!1);l.vertex_data[t[0]+i*r+n]=e}u.trackMesh(l)}})))})),u.createTextures(r).then((function(){return u.updateMeshes()}))})).then((function(e){e.forEach((function(t){return t.valid&&t.upload()})),t.forEach((function(t){t.labeled=!0})),l=[],a={},s={}}))},Xp={},Zp={},Jp=120===new Uint8Array(new Uint32Array([305419896]).buffer)[0];function Qp(t,e,n,i,r){var o=t.container,s=o.label,a=o.linked,l=t.ranges;return{label:new Kp(s,n,i,r),linked:a,ranges:l,mesh:e}}var td=function(){function t(e){yi(this,t),this.textureManager=Do(e),this.tiles={},this.meshes=[],this.containers=[]}return _i(t,[{key:"insertLabel",value:function(t,e){var n=t.label.text_data,i=n.text_settings_key,r=n.text,o=n.text_info;this.containers.push(t);var s=this._ensureTextSection(e,i);s[r]?t.label.text_data.text_info=s[r]:s[r]=o}},{key:"trackMesh",value:function(t){-1===this.meshes.indexOf(t)&&this.meshes.push(t)}},{key:"updateMeshes",value:function(){var t=this;return this.containers.forEach((function(e){var n,i,r,o,s,a,l,c,u,h;e.label.text_data&&(n=e.label.getTile(),(i=e.mesh).valid?(r=e.label.type,o=e.label.text_data.text_info,t.tiles[n.id]&&t.tiles[n.id].textures&&(s=t.tiles[n.id].textures[0],i.uniforms.u_texture=s,-1===i.textures.indexOf(s)&&i.textures.push(s),"point"===r||"straight"===r?(a="point"===r?o.align[e.label.align].texcoords:o.texcoords[r].texcoord,t.setTexCoords(i,e,a)):"curved"===r&&(l=o.segments.length,c=o.texcoords_stroke,u=o.texcoords.curved,t.setTexCoords(i,e,(function(t){return t<l?c[t]:u[t-l].texcoord}))))):t.tiles[n.id]&&t.tiles[n.id].textures&&(h=t.tiles[n.id].textures[0],t.textureManager.release(h)))})),this.meshes}},{key:"setTexCoords",value:function(t,e,n){var i,r,o,s,a,l,c=n instanceof Function;c||(r=(i=Ii(n,4))[0],o=i[1],s=i[2],a=i[3],l=[[r,o],[s,o],[s,a],[r,a]]);var u=t.vertex_layout.stride,h=new DataView(t.vertex_data.buffer),f=t.vertex_layout.offset.a_texcoord;e.ranges.forEach((function(t,e){var i,r,o,s,a,p=Ii(t,3),d=p[0],g=p[1],m=p[2];c&&(r=(i=Ii(n(e),4))[0],o=i[1],s=i[2],a=i[3],l=[[r,o],[s,o],[s,a],[r,a]]);for(var v=m?g/2:0;v<g;v++){var y=l[v%4],b=d+v*u;h.setUint16(b+f,65535*y[0],Jp),h.setUint16(b+f+2,65535*y[1],Jp)}}))}},{key:"createTextures",value:function(t){var e=this;return Promise.all(Object.values(this.tiles).map((function(n){var i=n.id,r=n.key,o=n.texts;return e._createTexturesForTile(t,o,"labels-".concat(r,"-").concat(i),i,e.textureManager).then((function(t){t.length&&(t.forEach((function(t){e.textureManager.retain(t),1<e.textureManager.getRetainCount(t)&&e.textureManager.release(t)})),e.tiles[i].textures=t)}))})))}},{key:"_createTexturesForTile",value:function(t,e,n,i,r){var o=new Bu,s=o.setTextureTextPositions(e);return o.rasterize(e,s,i,n,t,r)}},{key:"_ensureTile",value:function(t){var e=t.id,n=t.key;return this.tiles[e]||(this.tiles[e]={id:e,key:n,texts:{}}),this.tiles[e]}},{key:"_ensureTextSection",value:function(t,e){var n=this._ensureTile(t).texts;return n[e]||(n[e]={}),n[e]}}]),t}(),ed=function(){function t(e){var n=this,i=e.scene,r=e.view;yi(this,t),this._scene=i,this._view=r,this._visible_tiles={},this._pyramid=new qp,this._visible_coords={},this._building_tiles=null,this._renderable_tiles=[],this._active_styles=[],this._tile_visibility_counters={},this._update_labels_on_queue_check=!1,this._all_visible_tiles_are_cached=!1,this._debouncedUpdateLabels=Er(this._updateLabels.bind(this),100,200),this._main_thread_target=["TileManager",this._scene.id].join("_"),hr.addTarget(this._main_thread_target,this),this._keepCoordinate=this._keepCoordinate.bind(this),this._removeTilesFilter=this._removeTilesFilter.bind(this),this._removeCachedTilesFilter=this._removeCachedTilesFilter.bind(this),this._is_labeled=!1,this._tile_cache=new H.util.Cache(function(){var t=.1;return navigator&&navigator.deviceMemory?t=5*navigator.deviceMemory/100:window&&window.screen&&(t=window.screen.width/512*window.screen.height/512*.03*3,t=Math.min(t,1)),1024*t*1024*1024}(),(function(t,e,i){n._visible_tiles[t]&&n._visible_tiles[t]===e||e.destroy()}))}return _i(t,[{key:"destroy",value:function(){this._tile_cache.removeAll(),this.forEachVisibleTile((function(t){return t.destroy()})),this._visible_tiles={},this._pyramid=null,this._visible_coords={},this._scene=null,this._view=null}},{key:"keepTile",value:function(t){this._visible_tiles[t.key]=t,this._pyramid.addTile(t)}},{key:"hasTile",value:function(t){return void 0!==this._visible_tiles[t]}},{key:"_forgetTile",value:function(t){var e,n;this.hasTile(t)&&(e=this._visible_tiles[t],this._pyramid.removeTile(e),delete this._visible_tiles[t],e.loaded?this._tile_cache.add(e.key,e,function(t){var e=0;for(var n in t.meshes)for(var i=t.meshes[n],r=0;r<i.length;r++){var o=i[r];e+=o.buffer_size;for(var s=0;s<o.textures.length;s++)e+=t.textureManager.getByteLength(o.textures[s])}return e}(e)):(n=this._tile_cache.get(e.key))?this._tile_cache.drop(n.key):e.destroy(),this._tileBuildStop(e))}},{key:"removeTile",value:function(t){this._forgetTile(t),this._scene.requestRedraw()}},{key:"forEachVisibleTile",value:function(t){for(var e in this._visible_tiles)t(this._visible_tiles[e])}},{key:"removeTiles",value:function(t){for(var e in this._visible_tiles)t(this._visible_tiles[e])&&this.removeTile(e)}},{key:"removeCachedTiles",value:function(t){var e=this;this._tile_cache.forEach((function(n,i){t(i)&&e._tile_cache.drop(n)}))}},{key:"updateTilesForView",value:function(t){var e=0<arguments.length&&void 0!==t&&t;this._visible_coords={};for(var n=this._view.findVisibleTileCoordinates(),i=0;i<n.length;i++){var r=n[i];this._visible_coords[r.key]=r}this.updateTileStates(e)}},{key:"updateTileStates",value:function(t){var e=0<arguments.length&&void 0!==t&&t;for(var n in this._all_visible_tiles_are_cached=!0,this._visible_coords)this._keepCoordinate(n,e);this._all_visible_tiles_are_cached&&(this._is_labeled=!1,this._debouncedUpdateLabels()),this._tile_cache.removeAll(this._removeCachedTilesFilter),this._updateProxyTiles(),this.removeTiles(this._removeTilesFilter),this._updateRenderableTiles(),this._updateActiveStyles()}},{key:"_removeTilesFilter",value:function(t){if(t.style_zoom===this._view.lookAtManipulator.getLookAtData().tile_level){if(this._visible_coords[t.coords.key])return!1;for(var e in this._visible_coords)if(es.isDescendant(t.coords,this._visible_coords[e]))return!1}return!t.isProxy()}},{key:"_updateLabels",value:function(){var t,e=this;this._building_tiles&&0!==Object.keys(this._building_tiles).length||(Bu.pruneTextCache(),t=this._renderable_tiles.sort(nd),Yp(t,function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,i=Math.pow(10,n);return Math.round(Math.floor(t*e)/e*i)/i}(this._view.lookAtManipulator.getLookAtData().zoom,2),this._view.lookAtManipulator,this.isLoadingVisibleTiles(),this._scene.gl,this._scene.id).then((function(){e._is_labeled=!Lo.hasPendingTasks(),e._scene.immediateRedraw(),e._update_labels_on_queue_check=!1})))}},{key:"_updateProxyTiles",value:function(){var t,e=this,n=this._view.lookAtManipulator.getZoomDirection();0!==n&&(t=!1,this.forEachVisibleTile((function(i){var r;if(i.setProxyFor(null),1===n)i.built||(r=e._pyramid.getAncestor(i))&&(r.setProxyFor(i),t=!0);else if(-1===n&&!i.built)for(var o=e._pyramid.getDescendants(i),s=0;s<o.length;s++)o[s].setProxyFor(i),t=!0})),t||this._view.lookAtManipulator.resetZoomDirection())}},{key:"getRenderableTiles",value:function(){return this._renderable_tiles}},{key:"_updateRenderableTiles",value:function(){for(var t in this._renderable_tiles=[],this._visible_tiles){var e=this._visible_tiles[t],n=this._tile_cache.get(t);e.loaded?(this._renderable_tiles.push(e),n&&n!==e&&this._tile_cache.drop(t)):n&&(n.generation===this._scene.generation?this._renderable_tiles.push(n):this._tile_cache.drop(t))}return this._renderable_tiles}},{key:"getWorkerForTile",value:function(t,e){return e.has_volatile_data?this._scene.getWorkers(1)[0]:e.tiled?this._scene.getWorkers(0)[Math.abs(t.x+t.y+t.z)%this._scene.num_workers]:this._scene.getWorkers(0)[e.id%this._scene.num_workers]}},{key:"getActiveStyles",value:function(){return this._active_styles}},{key:"_updateActiveStyles",value:function(){for(var t=this._renderable_tiles,e={},n=0;n<t.length;n++){var i=t[n];Object.keys(i.meshes).forEach((function(t){return e[t]=!0}))}return this._active_styles=Object.keys(e),this._active_styles}},{key:"isLoadingVisibleTiles",value:function(){var t=!1;for(var e in this._visible_tiles)if(!this._visible_tiles[e].built){t=!0;break}return t}},{key:"updateTilesVisibilityCounters",value:function(){var t=this;Object.keys(this._visible_coords).forEach((function(e){e in t._tile_visibility_counters||(t._tile_visibility_counters[e]=0)}));var e=Object.keys(this._tile_visibility_counters),n=[];e.forEach((function(e){e in t._visible_coords?(t._tile_visibility_counters[e]++,30<=t._tile_visibility_counters[e]&&n.push(t._visible_coords[e])):(t._tile_visibility_counters[e]--,t._tile_visibility_counters[e]<=0&&delete t._tile_visibility_counters[e])})),n.length&&this.loadCoordinates(n)}},{key:"loadCoordinates",value:function(t){var e=this;t.sort((function(t,n){var i=e._view.lookAtManipulator.getLookAtData().position,r=er.metersPerTile(t.z)/2,o=er.metersForTile(t);o.x+=r,o.y-=r;var s=er.metersForTile(n);s.x+=r,s.y-=r;var a=Math.abs(i[0]-o.x)+Math.abs(i[1]-o.y),l=Math.abs(i[0]-s.x)+Math.abs(i[1]-s.y);return(t.center_dist=a)<(n.center_dist=l)?-1:l===a?0:1})),t.forEach((function(t){return e.loadCoordinate(t)}))}},{key:"_keepCoordinate",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e,i=this._visible_coords[t];if(i.z===this._view.center_tile.z)for(var r in this._scene.sources){var o,s,a,l=this._scene.sources[r];l.builds_geometry_tiles&&l.includesTile(i,this._view.lookAtManipulator.getLookAtData().tile_level)&&(o=es.normalizedKey(i,l,this._view.lookAtManipulator.getLookAtData().tile_level))&&!this.hasTile(o)&&((s=n&&this._tile_cache.get(o))||(this._all_visible_tiles_are_cached=!1),a=s||new es({source:l,coords:i,worker:this.getWorkerForTile(i,l),style_zoom:Tr.zoomToTileLevel(i.z),view:this._view,sceneId:this._scene.id}),"ObjectSource"===l.config.type&&(a.syncedAt=l.getSyncedAt()),this.keepTile(a))}}},{key:"loadCoordinate",value:function(t){if(t.z===this._view.center_tile.z)for(var e in this._scene.sources){var n,i=this._scene.sources[e];i.builds_geometry_tiles&&i.includesTile(t,this._view.lookAtManipulator.getLookAtData().tile_level)&&(n=es.normalizedKey(t,i,this._view.lookAtManipulator.getLookAtData().tile_level),this.hasTile(n)&&this.buildTile(this._visible_tiles[n]))}}},{key:"buildTile",value:function(t,e){this._building_tiles&&this._building_tiles[t.key]||t.built&&t.generation===this._scene.generation||(this._tileBuildStart(t.key),t.build(this._scene.generation,e))}},{key:"buildTileStylesCompleted",value:function(t){var e=t.tile,n=t.progress;if(null==this._visible_tiles[e.key])es.abortBuild(e,this._scene.id);else if(e.generation!==this._scene.generation)es.abortBuild(e,this._scene.id);else{if(e.id<this._visible_tiles[e.key].id)return void es.abortBuild(e,this._scene.id);e=this._visible_tiles[e.key].merge(e),n.done&&(e.built=!0),e.buildMeshes(this._scene.styles,n),this.updateTileStates(),this._scene.requestRedraw()}n.done&&this._tileBuildStop(e)}},{key:"buildTileError",value:function(t){this._forgetTile(t.key),es.abortBuild(t,this._scene.id)}},{key:"_tileBuildStart",value:function(t){this._is_labeled=!1,this._building_tiles=this._building_tiles||{},this._building_tiles[t]=!0}},{key:"_tileBuildStop",value:function(t){this._building_tiles&&(t.source&&t.source.hasLabeledData()&&(this._update_labels_on_queue_check=!0),delete this._building_tiles[t.key],Lo.removeForTile(t.id),this.checkBuildQueue())}},{key:"isReady",value:function(){return this._is_labeled&&!this.isLoadingVisibleTiles()}},{key:"checkBuildQueue",value:function(){this._building_tiles&&0!==Object.keys(this._building_tiles).length||(this._building_tiles=null,this._update_labels_on_queue_check?this._updateLabels():(this._is_labeled=!Lo.hasPendingTasks(),this._scene.immediateRedraw()))}},{key:"_removeCachedTilesFilter",value:function(t,e){var n=e.source;return!this._visible_tiles[t]&&(e.generation!==this._scene.generation||"ObjectSource"===n.config.type&&n.getSyncedAt()>e.syncedAt)}}]),t}();function nd(t,e){var n=t.coords,i=e.coords;return n.z-i.z||n.x-i.x||n.y-i.y}function id(t){yi(this,id),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=t.BACK,this.defaults.blending=!1,this.defaults.blending_src=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=t.ONE,this.defaults.blending_dst_alpha=t.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,t.depthFunc(t.LESS),this.culling=new rd({cull:this.defaults.culling,face:this.defaults.culling_face},(function(e){e.cull?(t.enable(t.CULL_FACE),t.cullFace(e.face)):t.disable(t.CULL_FACE)})),this.blending=new rd({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},(function(e){e.blend?(t.enable(t.BLEND),e.src_alpha&&e.dst_alpha?t.blendFuncSeparate(e.src,e.dst,e.src_alpha,e.dst_alpha):t.blendFunc(e.src,e.dst)):t.disable(t.BLEND)})),this.depth_write=new rd({depth_write:this.defaults.depth_write},(function(e){t.depthMask(e.depth_write)})),this.depth_test=new rd({depth_test:this.defaults.depth_test},(function(e){e.depth_test?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST)}))}var rd=function(){function t(e,n){yi(this,t),n(e),this.value=e,this.setup=n}return _i(t,[{key:"get",value:function(){return this.value}},{key:"set",value:function(t){JSON.stringify(this.value)!==JSON.stringify(t)&&(this.setup(t),this.value=t)}}]),t}(),od=function(){function t(){yi(this,t),this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null}return _i(t,[{key:"setCanvas",value:function(t,e){this.canvas=t,this.gl=e}},{key:"screenshot",value:function(t){var e=this,n=(0<arguments.length&&void 0!==t?t:{}).background;return null!=this.queue_screenshot||(this.queue_screenshot={background:n},this.queue_screenshot.promise=new Promise((function(t,n){e.queue_screenshot.resolve=t,e.queue_screenshot.reject=n}))),this.queue_screenshot.promise}},{key:"completeScreenshot",value:function(){if(null!=this.queue_screenshot){var t=this.canvas.width,e=this.canvas.height,n=new Uint8Array(t*e*4);this.gl.readPixels(0,0,t,e,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n);for(var i=(i=this.queue_screenshot.background)&&"transparent"!==i?_o.parseColor(i).slice(0,3).map((function(t){return 255*t})):null,r=new Uint8ClampedArray(t*e*4),o=0;o<e;o++)for(var s=0;s<t;s++){var a=4*((e-o-1)*t+s),l=4*(o*t+s),c=n[3+a];r[0+l]=255*n[0+a]/c,r[1+l]=255*n[1+a]/c,r[2+l]=255*n[2+a]/c,r[3+l]=c,i&&(c/=255,r[0+l]=r[0+l]*c+i[0]*(1-c),r[1+l]=r[1+l]*c+i[1]*(1-c),r[2+l]=r[2+l]*c+i[2]*(1-c),r[3+l]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var u=this.screenshot_canvas;u.width=t,u.height=e,this.screenshot_context=this.screenshot_context||u.getContext("2d");var h=this.screenshot_context,f=new ImageData(r,t,e);h.putImageData(f,0,0);for(var p=u.toDataURL("image/png"),d=atob(p.slice(22)),g=new Uint8Array(d.length),m=0;m<d.length;++m)g[m]=d.charCodeAt(m);var v=new Blob([g],{type:"image/png"});this.queue_screenshot.resolve({url:p,blob:v,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var e=this;if("function"!=typeof window.MediaRecorder||!this.canvas||"function"!=typeof this.canvas.captureStream)return Ar("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return Ar("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var n=this.video_capture={};n.chunks=[],n.stream=this.canvas.captureStream(),n.options={mimeType:"video/webm"},n.media_recorder=new MediaRecorder(n.stream,n.options),n.media_recorder.ondataavailable=function(t){var i,r;0<t.data.size&&n.chunks.push(t.data),n.resolve&&(r=Pr(i=new Blob(n.chunks,{type:n.options.mimeType})),n.stream&&(n.stream.getTracks()||[]).forEach((function(t){t.stop(),n.stream.removeTrack(t)})),n.stream=null,n.media_recorder=null,e.video_capture=null,n.resolve({url:r,blob:i,type:"webm"}))},n.media_recorder.start()}catch(t){return this.video_capture=null,Ar("error","Scene video capture failed",t),!1}return!0}},{key:"stopVideoCapture",value:function(){var t=this;return this.video_capture?(this.video_capture.promise=new Promise((function(e,n){t.video_capture.resolve=e,t.video_capture.reject=n})),this.video_capture.media_recorder.stop(),this.video_capture.promise):(Ar("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}]),t}(),sd=function(){function t(){yi(this,t),this.sources={},this.styles={},this.layers={},this.tiles={},this._isConfigured=!1}return _i(t,[{key:"init",value:function(t,e,n,i,r,o){return this.scene_id=t,this.textureManager=Do(t),this._worker_id=e,Ar.setLevel(n),Tr.device_pixel_ratio=i,hc.setElementIndexUint(r),ql.setPrefix(this._worker_id),this._style_manager=new Gh,this._importExternalScripts(o),Au.id_prefix=e,this._isConfigured=!1,e}},{key:"dispose",value:function(){this._last_config_sources=null,this._config_sources=null,this.sources=null,this._style_manager=null,this.styles=null,this.layers=null,this.tiles=null}},{key:"_importExternalScripts",value:function(t){var e;0!==t.length&&(Ar("debug","loading custom data source scripts in worker:",t),e=Object.getOwnPropertyNames(window),importScripts.apply(void 0,Pi(t)),Object.getOwnPropertyNames(window).forEach((function(t){-1===e.indexOf(t)&&(self[t]=window[t])})))}},{key:"updateConfig",value:function(t,e){var n,i=t.config,r=t.generation,o=t.introspection;for(var s in i=JSON.parse(i),n=e,Object.assign(Ll,n),this._generation=r,this._isConfigured=!1,i.layers)i.layers[s]&&(i.layers[s].data=Tr.stringsToFunctions(i.layers[s].data));this.global=Tr.stringsToFunctions(i.global),this._createDataSources(i),i.styles=Tr.stringsToFunctions(i.styles,_o.wrapFunction),this.styles=this._style_manager.build(i.styles),self.is_fake_worker=ur.is_main,this._style_manager.initStyles({generation:this._generation,styles:this.styles,sources:this.sources,introspection:o,id:this.scene_id}),delete self.is_fake_worker,this.layers=function(t,e){Dp={};var n={};for(var i in t){var r=t[i];r&&(n[i]=Gp(i,r,null,e))}return n}(i.layers,this._style_manager.styles),this._configuring=this._syncTextures(i.textures)}},{key:"_createDataSources",value:function(t){var e=this;this._last_config_sources=this._config_sources||{},this._config_sources=t.sources;var n=this.sources,i=[];for(var r in t.sources=Tr.stringsToFunctions(t.sources),this.sources={},self.is_fake_worker=ur.is_main,t.sources)if(JSON.stringify(this._last_config_sources[r])!==JSON.stringify(t.sources[r])){var o=void 0;try{o=Nr.create(Object.assign({},t.sources[r],{name:r}),this.sources)}catch(n){Ar("error","Error creating source.",n.message,t.sources[r]);continue}o&&(this.sources[r]=o,i.push(r))}else this.sources[r]=n[r];delete self.is_fake_worker,i.forEach((function(t){for(var n in e.tiles)e.tiles[n].source===t&&delete e.tiles[n]}))}},{key:"awaitConfiguration",value:function(){return this._configuring}},{key:"_onConfig",value:function(e){var n=this;if((this._isConfigured=!0)!==e.loaded)e.loading=!0,e.loaded=!1,e.error=null,this._loadTileSourceData(e).then((function(){if(n.getTile(e.id)){e.loading=!1,e.loaded=!0;try{es.buildGeometry(e,n)}catch(t){e.error=t.toString(),hr.postMessage("TileManager_".concat(n.scene_id,".buildTileError"),es.slice(e))}}else Ar("trace","stop tile build after data source load because tile was removed. Key: ".concat(e.key,", id: ").concat(e.id))}),(function(t){e.loading=!1,e.loaded=!1,e.error=t.stack,Ar("error","tile load error for tile with key ".concat(e.key," and id ").concat(e.id,": ").concat(e.error)),hr.postMessage("TileManager_".concat(n.scene_id,".buildTileError"),es.slice(e))}));else{Ar("trace","used worker cache for tile with key ".concat(e.key," and id ").concat(e.id));try{es.buildGeometry(e,this)}catch(t){e.error=t.toString(),hr.postMessage("TileManager_".concat(this.scene_id,".buildTileError"),es.slice(e))}}}},{key:"buildTile",value:function(t){var e,n=t.tile,i=this.getTile(n.id);i&&i.loading||(n=this.tiles[n.id]=Object.assign(i||{},n),this._isConfigured?this._onConfig(n):(e=this).awaitConfiguration().then((function(){return e._onConfig(n)})))}},{key:"_loadTileSourceData",value:function(t){return this.sources[t.source]?this.sources[t.source].load(t):(t.source_data={},Promise.resolve(t))}},{key:"getTile",value:function(t){return this.tiles[t]}},{key:"removeTile",value:function(t){var e=this.tiles[t];null!=e&&(!0===e.loading&&(Ar("trace","cancel tile load for tile id ".concat(t)),e.loading=!1,es.cancel(e)),delete this.tiles[t],Ar("trace","remove tile from cache, tile id: ".concat(t)))}},{key:"queryFeatures",value:function(t){var e=this,n=t.filter,i=t.visible,r=t.geometry,o=t.tile_ids,s=[],a=o.map((function(t){return e.tiles[t]})).filter((function(t){return t}));return null!=n&&(n=-1<["{","["].indexOf(n[0])?JSON.parse(n):n,n=Tr.stringsToFunctions(n,_o.wrapFunction)),n=Pp(n,Hp),a.forEach((function(t){for(var o in t.source_data.layers)!function(o){t.source_data.layers[o].features.forEach((function(a){var l,c;!0===i&&a.generation!==e._generation||!1===i&&a.generation===e._generation||((l=_o.getFeatureParseContext(a,t,e.global)).source=t.source,l.layer=o,n(l)&&(c={type:a.type,properties:a.properties},!0===r&&(c.geometry=er.copyGeometry(a.geometry),er.tileSpaceToLatlng(c.geometry,t.coords.z,t.min)),s.push(c)))}))}(o)})),s}},{key:"resetFeatureSelection",value:function(){ql.reset()}},{key:"_syncTextures",value:function(t){var e=[];return t&&e.push.apply(e,Pi(Object.keys(t))),Ar("trace","sync textures to worker:",e),0<e.length?this.textureManager.syncTexturesToWorker(e):Promise.resolve()}},{key:"profile",value:function(t){console.profile("worker ".concat(this._worker_id,": ").concat(t))}},{key:"profileEnd",value:function(t){console.profileEnd("worker ".concat(this._worker_id,": ").concat(t))}},{key:"terminate",value:function(){this.dispose()}}]),t}();(ur.is_worker||self.H&&self.H.DEBUG)&&hr.addTarget("self",new sd);var ad=function(){function t(e,n){yi(this,t),n=n||{},Io(this),this.id=t.id++,this.textureManager=Do(this.id),this.initialized=!1,this.initializing=null,this.sources={},this.view=new Ah(this,n),this.tile_manager=new ed({scene:this,view:this.view}),this.num_workers=n.numWorkers||2,!0===n.disableVertexArrayObjects&&(Wl.disabled=!0),Tr.device_pixel_ratio=n.devicePixelRatio,this.config=null,this.config_source=e,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new Gh,this.building=null,this.dirty=!0,n.preUpdate&&this.subscribe({pre_update:n.preUpdate}),n.postUpdate&&this.subscribe({post_update:n.postUpdate}),this.render_loop=!n.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new od,this.selection=null,this.introspection=!0===n.introspection,this.viewport=n.viewport,this.container=n.container,this.canvas=null,this.contextOptions=n.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=t.generation,this.last_complete_generation=t.generation,this.log_level=n.logLevel||"warn",Ar.setLevel(this.log_level),Ar.reset()}return _i(t,[{key:"load",value:function(t,e){var n=this,i=0<arguments.length&&void 0!==t?t:null,r=1<arguments.length&&void 0!==e?e:{};return this.initializing||(Ar.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,(r="string"==typeof r?{base_path:r}:r).blocking=void 0===r.blocking||r.blocking,!1!==this.render_loop&&this.setupRenderLoop(),this.createCanvas(),this.textureManager.destroy(this.gl),this.initializing=this.loadScene(i,r).then((function(){return n.createWorkers()})).then((function(){n.resetFeatureSelection();var t="object"===vi(n.config_source)||n.hasSubscribersFor("load"),e=n.updateConfig({serialize_funcs:t,normalize:!1,load_event:!0,fade_in:!0});if(!0===r.blocking)return e})).then((function(){n.updating--,n.initializing=null,n.initialized=!0,n.last_valid_config_source=n.config_source,n.last_valid_options={base_path:r.base_path,file_type:r.file_type},n.requestRedraw()})).catch((function(t){var e,i;if(n.initializing=null,n.updating=0,i="YAMLException"===t.name?(e="yaml","Error parsing scene YAML"):"Error initializing scene",n.trigger("error",{type:e,message:i,error:t,url:n.config_source}),i="Scene.load() failed to load ".concat(n.config_source,": ").concat(t.message),n.last_valid_config_source)return Ar("warn",i,t),Ar("info","Scene.load() reverting to last valid configuration"),n.load(n.last_valid_config_source,n.last_valid_base_path);throw Ar("error",i,t),t}))),this.initializing}},{key:"destroy",value:function(){var t;this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl&&(this.textureManager.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},Vl.reset(),(t=this.gl.getExtension("WEBGL_lose_context"))&&t.loseContext(),this.gl=null),this.sources={},this.tile_manager.destroy(),this.tile_manager=null,this.destroyWorkers(),Ar.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=Dl.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!1,stencil:!0,device_pixel_ratio:Tr.device_pixel_ratio},this.contextOptions)),navigator.appVersion.includes("iPhone")&&this.gl.depthRange(.994,1)}catch(o){throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.handleViewportUpdate(),Wl.init(this.gl),this.render_states=new id(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}}},{key:"getWorkerUrl",value:function(){var t,r;if(void 0!==e&&(r="("+e+")()",i&&""!==n&&(r+="\n//# sourceMappingURL="+i.slice(0,i.lastIndexOf("/")+1)+n),t=Pr(new Blob([r],{type:"application/javascript"}))),!t)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");return t}},{key:"updateExternalScripts",value:function(){var t=Pi(this.external_scripts||[]),e=[];if(this.config.scene.scripts)for(var n in this.config.scene.scripts)-1===e.indexOf(this.config.scene.scripts[n])&&e.push(this.config.scene.scripts[n]);for(var i in this.config.sources){var r=this.config.sources[i];if(r.scripts)for(var o in r.scripts)-1===e.indexOf(r.scripts[o])&&e.push(r.scripts[o])}return this.external_scripts=e,!(this.external_scripts.length===t.length&&this.external_scripts.every((function(e,n){return e===t[n]})))}},{key:"createWorkers",value:function(){return this.updateExternalScripts()&&this.destroyWorkers(),this._workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function(t){var e=this,n=!!this.gl.getExtension("OES_element_index_uint"),i=[];this._workers=[];for(var r=0;r<this.num_workers;r++)!function(){var o=new Worker(t);e._workers[r]=o,hr.addWorker(o),Ar("debug","Scene.makeWorkers: initializing worker ".concat(r));var s=r;i.push(hr.postMessage(o,"self.init",e.id,r,e.log_level,Tr.device_pixel_ratio,n,e.external_scripts).then((function(t){return Ar("debug","Scene.makeWorkers: initialized worker ".concat(t)),t}),(function(t){return Ar("error","Scene.makeWorkers: failed to initialize worker ".concat(s,":"),t),Promise.reject(t)})))}();var o=new sd;return this._workers.push(o),i.push(o.init(this.id,r,this.log_level,Tr.device_pixel_ratio,n,[])),this.next_worker=0,Promise.all(i).then((function(){var n;Ar.setWorkers(e._workers.slice(0,e.num_workers)),n=t,void 0===Mr&&"function"!=typeof(Mr=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL)&&(Mr=null,Ar("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs")),Mr&&Mr(n)}))}},{key:"getWorkers",value:function(t){return this._workers.filter((function(e){switch(t){case 0:return e instanceof Worker;case 1:return e instanceof sd;default:return!0}}))}},{key:"destroyWorkers",value:function(){this.selection=null,Array.isArray(this._workers)&&(Ar.setWorkers(null),this._workers.forEach((function(t){t.terminate()})),this._workers=null)}},{key:"ready",value:function(){return!(!this.view.ready()||0===Object.keys(this.sources).length)}},{key:"handleViewportUpdate",value:function(){var t=this.viewport,e=t.width,n=t.height;0<e&&0<n&&(this.dirty=!0,this.view.handleViewportUpdate(),this.gl&&Dl.resize(this.gl,e,n,Tr.device_pixel_ratio))}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),Lo.setState({user_moving_view:this.view.user_input_active}),Lo.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var t=this;this.render_loop_active||setTimeout((function(){t.renderLoop()}),0)}},{key:"update",value:function(){var t=this.dirty,e=!!this.selection&&this.selection.hasPendingRequests(),n=!(!1===t&&!1===e||!1===this.initialized||0<this.updating||!1===this.ready());return this.trigger("pre_update",n),this.view.update(),n&&(this.dirty=!1,this.render({main:t,selection:e}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",n),!0!==this.animated&&!this.view.isAnimating()||(this.dirty=!0),this.frame++,Ar("trace","Scene.render()"),!0)}},{key:"render",value:function(t){var e=this,n=t.main,i=t.selection,r=this.gl;if(Object.keys(this.lights).forEach((function(t){return e.lights[t].update()})),n&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),i){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();(this.last_selection_render<this.last_main_render||this.selection.has_dirty_buffer)&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),r.bindFramebuffer(r.FRAMEBUFFER,null),r.viewport(0,0,this.canvas.width,this.canvas.height),r.clearColor.apply(r,Pi(this.background.color)),this.last_selection_render=this.frame,this.selection.has_dirty_buffer=!1),this.selection.read(this.tile_manager.getRenderableTiles()),this.selection.has_dirty_buffer&&this.render({main:!1,selection:i})}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function(t,e){var n=this,i=0<arguments.length&&void 0!==t?t:"program",r=(1<arguments.length&&void 0!==e?e:{}).allow_blend,o=this.gl;r=null==r||r,this.clearFrame();for(var s,a=sc.sortByBlendOrderWithinLayers(this.tile_manager.getActiveStyles().map((function(t){return n.styles[t]})).filter((function(t){return t}))),l=0,c=0,u=0;u<a.length;u++){var h,f,p=a[u],d=c-(h=parseInt(p.name));(p.clean_depth||d)&&(this.render_states.depth_write.value.depth_write?o.clear(o.DEPTH_BUFFER_BIT):(o.depthMask(!0),o.clear(o.DEPTH_BUFFER_BIT),o.depthMask(!1)),d&&(c=h)),p.blend!==s&&(f=Object.assign({},sc.render_states[p.blend],{blend:r&&p.blend}),this.setRenderState(f));var g="translucent"===p.blend&&"program"===i;g&&(this.gl.colorMask(!1,!1,!1,!1),this.renderStyle(p.name,i),this.gl.colorMask(!0,!0,!0,!0),this.gl.depthFunc(this.gl.EQUAL),this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilFunc(this.gl.EQUAL,this.gl.ZERO,255),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.INCR)),l+=this.renderStyle(p.name,i),g&&(this.gl.disable(this.gl.STENCIL_TEST),this.gl.depthFunc(this.gl.LESS)),s=p.blend}return l}},{key:"renderStyle",value:function(t,e){for(var n,i=this,r=this.styles[t],o=!0,s=0,a=this.tile_manager.getRenderableTiles(),l=Math.max.apply(Math,Pi(a.map((function(e){return e.meshes[t]?Math.max.apply(Math,Pi(e.meshes[t].map((function(t){return t.variant.order})))):-1})))),c=0;c<l+1;c++){var u=function(l){for(var c=0;c<a.length;c++){var u=a[c];if(null!=u.meshes[t]&&u.shouldProxyForStyle(t))for(var h=u.meshes[t].filter((function(t){return t.variant.order===l})),f=0,p=h.length;f<p;f+=1){var d=h[f];if(!0===o&&(o=!1,!(n=i.setupStyle(r,e))))return{v:0};i.view.setupTile(u,n),i.selection.setupDiscards(n),r.render(d)&&i.requestRedraw(),s+=d.geometry_count}}}(c);if("object"===vi(u))return u.v}return s}},{key:"setupStyle",value:function(t,e){var n;try{if(!(n=t.getProgram(e)))return}catch(e){return void this.trigger("warning",{type:"styles",message:"Error compiling style ".concat(t.name),style:t,shader_errors:t.program&&t.program.shader_errors})}for(var i in n.use(),t.setup(),this.view.setupProgram(n),this.lights)this.lights[i].setupProgram(n);return n}},{key:"clearFrame",value:function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))}},{key:"setRenderState",value:function(t){var e,n,i=0<arguments.length&&void 0!==t?t:{},r=i.depth_test,o=i.depth_write,s=i.cull_face,a=i.blend;this.initialized&&(e=this.render_states,r=!1!==r&&e.defaults.depth_test,o=!1!==o&&e.defaults.depth_write,s=!1!==s&&e.defaults.culling,a=null!=a?a:e.defaults.blending,n=this.gl,e.depth_test.set({depth_test:r}),e.depth_write.set({depth_write:o}),e.culling.set({cull:s,face:e.defaults.culling_face}),a&&"opaque"!==a?"overlay"===a||"inlay"===a||"translucent"===a?e.blending.set({blend:!0,src:n.SRC_ALPHA,dst:n.ONE_MINUS_SRC_ALPHA,src_alpha:n.ONE,dst_alpha:n.ONE_MINUS_SRC_ALPHA}):"add"===a?e.blending.set({blend:!0,src:n.ONE,dst:n.ONE}):"multiply"===a&&e.blending.set({blend:!0,src:n.ZERO,dst:n.SRC_COLOR}):e.blending.set({blend:!1}))}},{key:"getFeatureAt",value:function(t,e,n){var i,r=e.radius,o=e.top_most_only;this.initialized?(i={x:t.x/this.view.size.css.width,y:t.y/this.view.size.css.height},r=0<r?{x:r/this.view.size.css.width,y:r/this.view.size.css.height}:null,this.selection.getFeatureAt(i,{radius:r,top_most_only:o},n)):Ar("debug","Scene.getFeatureAt() called before scene was initialized")}},{key:"queryFeatures",value:function(t){var e=0<arguments.length&&void 0!==t?t:{},n=e.filter,i=e.unique,r=void 0===i||i,o=e.group_by,s=void 0===o?null:o,a=e.visible,l=void 0===a?null:a,c=e.geometry,u=void 0!==c&&c,h=(n=Tr.serializeWithFunctions(n),this.tile_manager.getRenderableTiles().map((function(t){return t.id})));return hr.postMessage(this._workers,"self.queryFeatures",{filter:n,visible:l,geometry:u,tile_ids:h}).then((function(t){var e=[],n={},i={},o=(r="string"==typeof r?[r]:r)&&function(t){return JSON.stringify(Array.isArray(r)?Nl(t,r):t)},a=(s=("string"==typeof s||Array.isArray(s))&&s)&&function(t){return Array.isArray(s)?JSON.stringify(Nl(t,s)):t[s]};return t.forEach((function(t){return t.forEach((function(t){if(o){var r=o(t);if(n[r])return;n[r]=!0}var s;a?(s=a(t.properties),i[s]=i[s]||[],i[s].push(t)):e.push(t)}))})),a?i:e}))}},{key:"loadScene",value:function(t,e){var n=this,i=0<arguments.length&&void 0!==t?t:null,r=1<arguments.length&&void 0!==e?e:{},o=r.base_path,s=r.file_type;return this.config_source=i||this.config_source,"string"==typeof this.config_source?this.base_path=Or(o||this.config_source):this.base_path=Or(o),this.config_path=this.base_path,Wp.loadScene(this.config_source,{path:this.base_path,type:s}).then((function(t){var e=t.config,i=t.bundle;return n.config=e,n.config_bundle=i,n.config}))}},{key:"createDataSources",value:function(){var t=this,e=[],n=Object.keys(this.sources),i=0;for(var r in this.config.sources){var o=this.config.sources[r],s=this.sources[r];try{var a=Object.assign({},o,{name:r,id:i++});if(this.sources[r]=Nr.create(a,this.sources),!this.sources[r])throw{}}catch(n){delete this.sources[r];var l="Could not create data source: ".concat(n.message);Ar("warn","Scene: ".concat(l),o),this.trigger("warning",{type:"sources",source:o,message:l})}Nr.sameConfig(this.sources[r],s)||e.push(r)}for(var c in n.forEach((function(n){t.config.sources[n]||(delete t.sources[n],e.push(n))})),0<e.length&&this.tile_manager.removeTiles((function(t){return-1<e.indexOf(t.source.name)})),this.config.layers){var u=this.config.layers[c];!1!==u.enabled&&u.data&&this.sources[u.data.source]&&(this.sources[u.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var t=this;return this.textureManager.createFromObject(this.gl,this.config.textures).then((function(){return t.textureManager.createDefault(t.gl)}))}},{key:"updateStyles",value:function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var t in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[t].setGL(this.gl);this.dirty=!0}},{key:"createLights",value:function(){for(var t in this.lights={},this.config.lights){var e;this.config.lights[t]&&"object"===vi(this.config.lights[t])&&((e=this.config.lights[t]).name=t.replace("-","_"),e.visible=!1!==e.visible,e.visible&&(this.lights[e.name]=Ql.create(this.view,e)))}Ql.inject(this.lights)}},{key:"setBackground",value:function(){var t,e=this.config.scene.background;this.background={},e&&e.color&&(this.background.color=_o.parseColor(e.color)),this.background.color||(this.background.color=[0,0,0,0]),1===this.background.color[3]?this.canvas.style.backgroundColor="rgba(".concat(this.background.color.map((function(t){return Math.floor(255*t)})).join(", "),")"):this.canvas.style.backgroundColor="transparent",(t=this.gl).clearColor.apply(t,Pi(this.background.color))}},{key:"setIntrospection",value:function(t){var e=this;return t!==this.introspection?(this.introspection=t||!1,this.updating++,this.updateConfig({normalize:!1}).then((function(){return e.updating--}))):Promise.resolve()}},{key:"updateConfig",value:function(e){var n=0<arguments.length&&void 0!==e?e:{},i=n.load_event,r=void 0!==i&&i,o=n.serialize_funcs,s=n.normalize,a=void 0===s||s;n.fade_in,this.generation=++t.generation,this.updating++,this.config=Wp.applyGlobalProperties(this.config),a?Wp.normalize(this.config,this.config_bundle):(Wp.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),Wp.normalizeTextures(this.config,this.config_bundle)),this.trigger(r?"load":"update",{config:this.config}),this.style_manager.init(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),Fu.loadFonts(this.config.fonts),this.updateStyles();var l=this.syncConfigToWorker({serialize_funcs:o});return this.updating--,this.view.updateBounds(),this.requestRedraw(),l}},{key:"syncConfigToWorker",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).serialize_funcs,n=void 0===e||e?Tr.serializeWithFunctions(this.config):JSON.stringify(this.config);return hr.postMessage(this._workers,"self.updateConfig",{config:n,generation:this.generation,introspection:this.introspection},Pl)}},{key:"createListeners",value:function(){var t=this;this.listeners={},this.listeners.view={move:function(){return t.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return t.dirty=!0},warning:function(e){return t.trigger("warning",Object.assign({type:"textures"},e))}},this.textureManager.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(e){return t.trigger("error",Object.assign({type:"scene"},e))}},Wp.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),this.textureManager.unsubscribe(this.listeners.texture),Wp.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){this.selection?this._workers&&hr.postMessage(this._workers,"self.resetFeatureSelection"):this.selection=new ql(this.gl,this.id)}},{key:"updateViewComplete",value:function(){(this.render_count_changed||this.generation!==this.last_complete_generation)&&this.tile_manager.isReady()&&(this.last_complete_generation=this.generation,this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).background,n=void 0===e?"white":e;return this.requestRedraw(),this.media_capture.screenshot({background:n})}},{key:"pixelRatio",value:function(){return Tr.device_pixel_ratio}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function(t){console.profile("main thread: ".concat(t)),hr.postMessage(this._workers,"self.profile",t)}},{key:"_profileEnd",value:function(t){console.profileEnd("main thread: ".concat(t)),hr.postMessage(this._workers,"self.profileEnd",t)}},{key:"getCameraMatrix",value:function(){return this.view.lookAtManipulator.getCameraMatrix()}},{key:"animated",get:function(){var t=this;return void 0!==this.config.scene.animated?this.config.scene.animated:this.tile_manager.getActiveStyles().some((function(e){return t.styles[e]&&t.styles[e].animated}))}}],[{key:"create",value:function(e,n){return new t(e,1<arguments.length&&void 0!==n?n:{})}}]),t}();ad.id=0,ad.generation=0;var ld=function(){Si(e,Oo);var t=Ri(e);function e(n,i,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};yi(this,e);var s=Math.pow(2,o.coords.z),a=Math.abs(Math.floor(o.coords.x/s)),l=Math.abs(s*a-Math.abs(o.coords.x)),c=o.coords;return o.coords={x:l,y:c.y,z:c.z},t.call(this,n,i,r,o)}return _i(e,[{key:"load",value:function(t){var n=this;if(!t||!t.uid)return Oi(Ai(e.prototype),"load",this).call(this,t);var i=t.coords,r=new Uint8Array([0,0,0,0]);return this.loading=new Promise((function(e,o){var s=H.map.DataModel.invoke(t.uid,"requestTileAsPromise",[i.x,i.y,i.z])||null;s?s.then((function(e){var i=e.data;n.loaded=!0,!i||i instanceof ArrayBuffer||"IMG"!==i.tagName.toUpperCase()&&"CANVAS"!==i.tagName.toUpperCase()?n.setData(1,1,r,{filtering:"nearest"}):n.setElement(i,t)}),(function(){n.loaded=!1})).then(e,(function(t){return o(t)})):o(new Error("Unable to invoke on target "+t.uid))})),this.loading}}]),e}();Po.register(ld,(function(t){return t&&t.uid}));var cd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",ud=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],hd="undefined"!=typeof BigInt?BigInt:Number;function fd(t){var e=t;return e&hd(1)&&(e=~e),+(e>>=hd(1)).toString()}function pd(t){for(var e="",n=hd(t);31<n;){var i=n&hd(31)|hd(32);e+=cd[i],n>>=hd(5)}return e+cd[n]}function dd(t){var e=hd(t),n=e<0;return e<<=hd(1),n&&(e=~e),pd(e)}var gd={encode:function(t){var e=t.precision,n=void 0===e?5:e,i=t.thirdDim,r=void 0===i?0:i,o=t.thirdDimPrecision,s=void 0===o?0:o,a=t.polyline,l=Math.pow(10,n),c=Math.pow(10,s),u=function(t,e,n){if(t<0||15<t)throw new Error("precision out of range. Should be between 0 and 15");if(n<0||15<n)throw new Error("thirdDimPrecision out of range. Should be between 0 and 15");if(e<0||7<e||4===e||5===e)throw new Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");var i=n<<7|e<<4|t;return pd(1)+pd(i)}(n,r,s),h=[],f=hd(0),p=hd(0),d=hd(0);return a.forEach((function(t){var e=hd(Math.round(t[0]*l));h.push(dd(e-f)),f=e;var n,i=hd(Math.round(t[1]*l));h.push(dd(i-p)),p=i,r&&(n=hd(Math.round(t[2]*c)),h.push(dd(n-d)),d=n)})),[].concat(Pi(u),h).join("")},decode:function(t){for(var e=function(t){var e=hd(0),n=hd(0),i=[];if(t.split("").forEach((function(t){var r,o=hd((r=t.charCodeAt(0),ud[r-45]));e|=(o&hd(31))<<n,(o&hd(32))===hd(0)?(i.push(e),e=hd(0),n=hd(0)):n+=hd(5)})),0<n)throw new Error("Invalid encoding");return i}(t),n=function(t,e){if(1!==+t.toString())throw new Error("Invalid format version");var n=+e.toString();return{precision:15&n,thirdDim:n>>4&7,thirdDimPrecision:n>>7&15}}(e[0],e[1]),i=Math.pow(10,n.precision),r=Math.pow(10,n.thirdDimPrecision),o=n.thirdDim,s=0,a=0,l=0,c=[],u=2;u<e.length;)s+=fd(e[u])/i,a+=fd(e[u+1])/i,o?(l+=fd(e[u+2])/r,c.push([s,a,l]),u+=3):(c.push([s,a]),u+=2);if(u!==e.length)throw new Error("Invalid encoding. Premature ending reached");return ki(ki({},n),{},{polyline:c})},ABSENT:0,LEVEL:1,ALTITUDE:2,ELEVATION:3};self.H=self.H||{},self.H.gl={DataSource:Nr,Geo:er,MathUtils:Qi,Scene:ad,Task:Lo,Tile:es,WorkerBroker:hr,log:Ar,SceneLoader:Wp,yaml:Sp,flexpolyline:gd}}()}(),this.H=this.H||{},this.H.venues=function(t){function e(t,e){void 0===e&&(e={});var n,i=e.insertAt;t&&"undefined"!=typeof document&&(n=document.head||document.getElementsByTagName("head")[0],(e=document.createElement("style")).type="text/css","top"===i&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)))}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)),i}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function p(t,e,n){return(p=f()?Reflect.construct:function(t,e,n){var i=[null];return i.push.apply(i,e),i=new(Function.bind.apply(t,i)),n&&h(i,n.prototype),i}).apply(null,arguments)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){var e=f();return function(){var n,i=u(t);return n=e?(n=u(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,!(n=n)||"object"!=typeof n&&"function"!=typeof n?d(i):n}}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value})(t,e,n||t)}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}e(".H_l_right .venues-ui__drawings .trigger.button--active .arrow {\n  transform: rotate(90deg); }\n\n.H_l_right .venues-ui__drawings .drawings {\n  right: 45px;\n  left: initial; }\n");var w=function(){c(e,H.map.Feature);var t=g(e);function e(n){var r;return i(this,e),(r=t.call(this)).id=n.id,r.model=n,r}return o(e,[{key:"getData",value:function(){return this.model}},{key:"getAddress",value:function(){return this.model.getInternalAddress()}},{key:"getCenter",value:function(){var t=(e=v(this.model.getCenter(),2))[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"toGeoJSON",value:function(){return this.model.toJSON()}},{key:"getLevel",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getLevel().getDrawing().getParentEventTarget()}}]),e}(),x=function(){c(e,H.map.Feature);var t=g(e);function e(n){var r;return i(this,e),(r=t.call(this)).id=n.id,r.model=n,r}return o(e,[{key:"getData",value:function(){return this.model}},{key:"getBoundingBox",value:function(){return p(H.geo.Rect,y(this.model.getBoundingBox()))}},{key:"getCenter",value:function(){var t=(e=v(this.model.getCenter(),2))[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getLevel",value:function(t){return this.getLevels().find((function(e){return e.id===t}))}},{key:"getLevels",value:function(){var t=this.getData().getLevels().map((function(t){return t.getId()}));return this.getVenue().getLevels().filter((function(e){return-1!==t.indexOf(e.id)}))}},{key:"getMainLevel",value:function(){return this.getLevel(this.model.getMainLevel().getId())}},{key:"getVenue",value:function(){return this.getParentEventTarget()}}]),e}(),k=function(){c(e,H.map.Feature);var t=g(e);function e(n){var r;return i(this,e),(r=t.call(this)).id=n.id,r.model=n,r}return o(e,[{key:"getGeometry",value:function(t){return this.getGeometries().find((function(e){return e.id===t}))}},{key:"getGeometries",value:function(){var t=this.getData().getGeometries().map((function(t){return t.getId()}));return this.getDrawing().getVenue().getGeometries().filter((function(e){return-1!==t.indexOf(e.id)}))}},{key:"getData",value:function(){return this.model}},{key:"getId",value:function(){return this.model.getId()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getShortName",value:function(){return this.model.getShortName()}},{key:"getZIndex",value:function(){return this.model.getZIndex()}},{key:"isMain",value:function(){return this.model.isMain()}},{key:"getDrawing",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getDrawing().getParentEventTarget()}}]),e}();function S(t,e,n,i){for(var r,o=i,s=n-e>>1,a=n-e,l=t[e],c=t[e+1],u=t[n],h=t[n+1],f=e+3;f<n;f+=3){var p=function(t,e,n,i,r,o){var s,a=r-n,l=o-i;return 0===a&&0===l||(1<(s=((t-n)*a+(e-i)*l)/(a*a+l*l))?(n=r,i=o):0<s&&(n+=a*s,i+=l*s)),(a=t-n)*a+(l=e-i)*l}(t[f],t[f+1],l,c,u,h);o<p?(r=f,o=p):p!==o||(p=Math.abs(f-s))<a&&(r=f,a=p)}i<o&&(3<r-e&&S(t,e,r,i),t[r+2]=o,3<n-r&&S(t,r,n,i))}function A(t,e,n,i){return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)E(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)E(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)E(t,e[i][r])}(i={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),i}function E(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function T(t,e,n,i){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,s=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),a=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===o)C(r,a);else if("MultiPoint"===o)for(var c=0;c<r.length;c++)C(r[c],a);else if("LineString"===o)M(r,a,s,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<r.length;c++)a=[],M(r[c],a,s,!1),t.push(A(l,"LineString",a,e.properties));return}L(r,a,s,!1)}else if("Polygon"===o)L(r,a,s,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(c=0;c<e.geometry.geometries.length;c++)T(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},n,i);return}for(c=0;c<r.length;c++){var u=[];L(r[c],u,s,!0),a.push(u)}}t.push(A(l,o,a,e.properties))}}function C(t,e){e.push(R(t[0])),e.push(O(t[1])),e.push(0)}function M(t,e,n,i){for(var r,o,s=0,a=0;a<t.length;a++){var l=R(t[a][0]),c=O(t[a][1]);e.push(l),e.push(c),e.push(0),0<a&&(s+=i?(r*c-l*o)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(c-o,2))),r=l,o=c}var u=e.length-3;e[2]=1,S(e,0,u,n),e[2+u]=1,e.size=Math.abs(s),e.start=0,e.end=e.size}function L(t,e,n,i){for(var r=0;r<t.length;r++){var o=[];M(t[r],o,n,i),e.push(o)}}function R(t){return t/360+.5}function O(t){return t=Math.sin(t*Math.PI/180),(t=.5-.25*Math.log((1+t)/(1-t))/Math.PI)<0?0:1<t?1:t}function I(t,e,n,i,r,o,s,a){if(i/=e,(n/=e)<=o&&s<i)return t;if(s<n||i<=o)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],h=u.geometry,f=u.type,p=0===r?u.minX:u.minY,d=0===r?u.maxX:u.maxY;if(n<=p&&d<i)l.push(u);else if(!(d<n||i<=p)){var g=[];if("Point"===f||"MultiPoint"===f)!function(t,e,n,i,r){for(var o=0;o<t.length;o+=3){var s=t[o+r];n<=s&&s<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}(h,g,n,i,r);else if("LineString"===f)P(h,g,n,i,r,!1,a.lineMetrics);else if("MultiLineString"===f)D(h,g,n,i,r,!1);else if("Polygon"===f)D(h,g,n,i,r,!0);else if("MultiPolygon"===f)for(var m=0;m<h.length;m++){var v=[];D(h[m],v,n,i,r,!0),v.length&&g.push(v)}if(g.length)if(a.lineMetrics&&"LineString"===f)for(m=0;m<g.length;m++)l.push(A(u.id,f,g[m],u.tags));else"LineString"!==f&&"MultiLineString"!==f||(1===g.length?(f="LineString",g=g[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===g.length?"Point":"MultiPoint"),l.push(A(u.id,f,g,u.tags))}}return l.length?l:null}function P(t,e,n,i,r,o,s){for(var a,l,c=N(t),u=0===r?z:$,h=t.start,f=0;f<t.length-3;f+=3){var p=t[f],d=t[f+1],g=t[f+2],m=t[f+3],v=t[f+4],y=0===r?p:d,b=0===r?m:v,_=!1;s&&(a=Math.sqrt(Math.pow(p-m,2)+Math.pow(d-v,2))),y<n?n<b&&(l=u(c,p,d,m,v,n),s&&(c.start=h+a*l)):i<y?b<i&&(l=u(c,p,d,m,v,i),s&&(c.start=h+a*l)):j(c,p,d,g),b<n&&n<=y&&(l=u(c,p,d,m,v,n),_=!0),i<b&&y<=i&&(l=u(c,p,d,m,v,i),_=!0),!o&&_&&(s&&(c.end=h+a*l),e.push(c),c=N(t)),s&&(h+=a)}var w=t.length-3;p=t[w],d=t[1+w],g=t[2+w];n<=(y=0===r?p:d)&&y<=i&&j(c,p,d,g),w=c.length-3,o&&3<=w&&(c[w]!==c[0]||c[1+w]!==c[1])&&j(c,c[0],c[1],c[2]),c.length&&e.push(c)}function N(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function D(t,e,n,i,r,o){for(var s=0;s<t.length;s++)P(t[s],e,n,i,r,o,!1)}function j(t,e,n,i){t.push(e),t.push(n),t.push(i)}function z(t,e,n,i,r,o){return e=(o-e)/(i-e),t.push(o),t.push(n+(r-n)*e),t.push(1),e}function $(t,e,n,i,r,o){return n=(o-n)/(r-n),t.push(e+(i-e)*n),t.push(o),t.push(1),n}function F(t,e){for(var n=[],i=0;i<t.length;i++){var r,o=t[i],s=o.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)r=B(o.geometry,e);else if("MultiLineString"===s||"Polygon"===s){r=[];for(var a=0;a<o.geometry.length;a++)r.push(B(o.geometry[a],e))}else if("MultiPolygon"===s)for(r=[],a=0;a<o.geometry.length;a++){for(var l=[],c=0;c<o.geometry[a].length;c++)l.push(B(o.geometry[a][c],e));r.push(l)}n.push(A(o.id,s,r,o.tags))}return n}function B(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function U(t,e){if(t.transformed)return t;for(var n,i=1<<t.z,r=t.x,o=t.y,s=0;s<t.features.length;s++){var a=t.features[s],l=a.geometry,c=a.type;if(a.geometry=[],1===c)for(n=0;n<l.length;n+=2)a.geometry.push(G(l[n],l[n+1],e,i,r,o));else for(n=0;n<l.length;n++){for(var u=[],h=0;h<l[n].length;h+=2)u.push(G(l[n][h],l[n][h+1],e,i,r,o));a.geometry.push(u)}}return t.transformed=!0,t}function G(t,e,n,i,r,o){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-o))]}function V(t,e,n,i,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<t.length;a++){s.numFeatures++,function(t,e,n,i){var r=e.geometry,o=e.type,s=[];if("Point"===o||"MultiPoint"===o)for(var a=0;a<r.length;a+=3)s.push(r[a]),s.push(r[a+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)W(s,r,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(a=0;a<r.length;a++)W(s,r[a],t,n,"Polygon"===o,0===a);else if("MultiPolygon"===o)for(var l=0;l<r.length;l++){var c=r[l];for(a=0;a<c.length;a++)W(s,c[a],t,n,!0,0===a)}if(s.length){var u=e.tags||null;if("LineString"===o&&i.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=r.start/r.size,u.mapbox_clip_end=r.end/r.size}i={geometry:s,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u},null!==e.id&&(i.id=e.id),t.features.push(i)}}(s,t[a],o,r);var l=t[a].minX,c=t[a].minY,u=t[a].maxX,h=t[a].maxY;l<s.minX&&(s.minX=l),c<s.minY&&(s.minY=c),u>s.maxX&&(s.maxX=u),h>s.maxY&&(s.maxY=h)}return s}function W(t,e,n,i,r,o){var s=i*i;if(0<i&&e.size<(r?s:i))n.numPoints+=e.length/3;else{for(var a=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>s)&&(n.numSimplified++,a.push(e[l]),a.push(e[l+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,o=r-2;i<r;o=i,i+=2)n+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(0<n===e)for(i=0,r=t.length;i<r/2;i+=2){var s=t[i],a=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=s,t[r-1-i]=a}}(a,o),t.push(a)}}function q(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i,r,o,s,a=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)T(n,t.features[i],e,i);else"Feature"===t.type?T(n,t,e):T(n,{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(this.stats={},this.total=0),t=I(s=i=a,1,-1-(o=(r=e).buffer/r.extent),o,0,-1,2,r),e=I(i,1,1-o,2+o,0,-1,2,r),(t||e)&&(s=I(i,1,-o,1+o,0,-1,2,r)||[],t&&(s=F(t,1).concat(s)),e&&(s=s.concat(F(e,-1)))),(a=s).length&&this.splitTile(a,0,0,0),n&&a.length}function K(t,e,n){return 32*((1<<t)*n+e)+t}function Y(t){for(var e,n=[],i=[],r=0,o=t.coordinates.length;r<o;r+=1){var s=t.coordinates[r],a=function(t){return 0<(t=function(t){for(var e=0,n=t.length,i=0;i<n-1;i+=1){var r=t[i],o=t[i+1];e+=r[0]*o[1]-o[0]*r[1]}return e+(t[n-1][0]*t[0][1]-t[0][0]*t[n-1][1])}(t))?at:t<0?lt:void 0}(s);null!==a&&(a===(e=e||a)&&i.length&&(n.push(i),i=[]),i.push(s))}return 0<i.length&&n.push(i),1===n.length?(t.type=J,t.coordinates=n[0]):1<n.length?(t.type=tt,t.coordinates=n):t=null,t}function X(t,e,n,i,r){var o;return r=(o=n,n=i,i=r,e=1<<(r=e),(r=[])[0]=((t=t)[0]/i+o)/e,r[1]=(t[1]/i+n)/e,e=n={x:r[0],y:r[1]}).x,n=e.y,e=360*(r-.5),r=Math.exp(Math.PI*(.5-n)/.25)-1,n=Math.exp(Math.PI*(.5-n)/.25)+1,[e,180*Math.asin(r/n)/Math.PI]}q.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},q.prototype.splitTile=function(t,e,n,i,r,o,s){for(var a=[t,e,n,i],l=this.options,c=l.debug;a.length;){i=a.pop(),n=a.pop(),e=a.pop(),t=a.pop();var u,h,f,p,d,g,m,v,y=1<<e,b=K(e,n,i),_=this.tiles[b];if(_||(_=this.tiles[b]=V(t,e,n,i,l),this.tileCoords.push({z:e,x:n,y:i}),c&&(v="z"+e,this.stats[v]=(this.stats[v]||0)+1,this.total++)),_.source=t,r){if(e===l.maxZoom||e===r)continue;var w=1<<r-e;if(n!==Math.floor(o/w)||i!==Math.floor(s/w))continue}else if(e===l.indexMaxZoom||_.numPoints<=l.indexMaxPoints)continue;_.source=null,0!==t.length&&(h=.5-(u=.5*l.buffer/l.extent),f=1+u,m=p=d=g=null,v=I(t,y,n-u,n+(b=.5+u),0,_.minX,_.maxX,l),w=I(t,y,n+h,n+f,0,_.minX,_.maxX,l),t=null,v&&(m=I(v,y,i-u,i+b,1,_.minY,_.maxY,l),p=I(v,y,i+h,i+f,1,_.minY,_.maxY,l),v=null),w&&(d=I(w,y,i-u,i+b,1,_.minY,_.maxY,l),g=I(w,y,i+h,i+f,1,_.minY,_.maxY,l),w=null),a.push(m||[],e+1,2*n,2*i),a.push(p||[],e+1,2*n,2*i+1),a.push(d||[],e+1,2*n+1,2*i),a.push(g||[],e+1,2*n+1,2*i+1))}},q.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent;if(i.debug,t<0||24<t)return null;if(i=K(t,e=(e%(i=1<<t)+i)%i,n),this.tiles[i])return U(this.tiles[i],r);for(var o,s=t,a=e,l=n;!o&&0<s;)s--,a=Math.floor(a/2),l=Math.floor(l/2),o=this.tiles[K(s,a,l)];return o&&o.source?(this.splitTile(o.source,s,a,l,t,e,n),this.tiles[i]?U(this.tiles[i],r):null):null};var Z="Point",J="Polygon",Q="MultiLineString",tt="MultiPolygon",et="#e0e0e0",nt="#829DB4",it=1,rt=13,ot={fillColor:"#F2F285",outlineColor:"#0088BF",outlineWidth:1.2},st={FOOTPRINT:"FOOTPRINT",ICON:"ICON",TEXT:"TEXT",VECTOR:"VECTOR"},at="CW",lt="CCW";function ct(t){var e=void 0===(o=t.addressList)?[]:o,n=void 0===(r=t.geometries)?[]:r,r=void 0===(o=t.entity)?null:o,o=void 0===(o=t.name)?"":o;t=void 0===(t=t.icon)?"":t;i(this,ct),this.addressList=e,this.geometries=n,this.icon=t,this.entity=r,this.name=o}var ut,ht,ft=(function(t){t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){function r(t){return(r="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}var o=i(1),s=(i=i(7)).get,a=(i.deepValue,i.isArray);(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}})(l.prototype,[{key:"setCollection",value:function(t){return this.list=t}},{key:"_processKeys",value:function(t){if(this._keyWeights={},this._keyNames=[],t.length&&"string"==typeof t[0])for(var e=0,n=t.length;e<n;e+=1){var i=t[e];this._keyWeights[i]=1,this._keyNames.push(i)}else{for(var r=0,o=0,s=t.length;o<s;o+=1){var a=t[o];if(!a.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var l=a.name;if(this._keyNames.push(l),!a.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');if((a=a.weight)<0||1<a)throw new Error('"weight" property in key must bein the range of [0, 1)');r+=this._keyWeights[l]=a}if(1<r)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:{limit:!1};return this._log('---------\nSearch pattern: "'.concat(t,'"')),t=(e=this._prepareSearchers(t)).tokenSearchers,e=e.fullSearcher,e=this._search(t,e),this._computeScore(e),this.options.shouldSort&&this._sort(e),n.limit&&"number"==typeof n.limit&&(e=e.slice(0,n.limit)),this._format(e)}},{key:"_prepareSearchers",value:function(t){t=0<arguments.length&&void 0!==t?t:"";var e=[];if(this.options.tokenize)for(var n=t.split(this.options.tokenSeparator),i=0,r=n.length;i<r;i+=1)e.push(new o(n[i],this.options));return{tokenSearchers:e,fullSearcher:new o(t,this.options)}}},{key:"_search",value:function(t,e){var n=0<arguments.length&&void 0!==t?t:[],i=1<arguments.length?e:void 0,r=this.list,o={},s=[];if("string"==typeof r[0]){for(var a=0,l=r.length;a<l;a+=1)this._analyze({key:"",value:r[a],record:a,index:a},{resultMap:o,results:s,tokenSearchers:n,fullSearcher:i});return s}for(var c=0,u=r.length;c<u;c+=1)for(var h=r[c],f=0,p=this._keyNames.length;f<p;f+=1){var d=this._keyNames[f];this._analyze({key:d,value:this.options.getFn(h,d),record:h,index:c},{resultMap:o,results:s,tokenSearchers:n,fullSearcher:i})}return s}},{key:"_analyze",value:function(t,e){var n=this,i=t.key,r=void 0===(l=t.arrayIndex)?-1:l,o=t.value,s=t.record,l=t.index,c=void 0===(t=e.tokenSearchers)?[]:t,u=e.fullSearcher,h=void 0===(t=e.resultMap)?{}:t,f=void 0===(e=e.results)?[]:e;!function t(e,r,o,s){if(null!=r)if("string"==typeof r){var l=!1,p=-1,d=0;n._log("\nKey: ".concat(""===i?"--":i));var g=u.search(r);if(n._log('Full text: "'.concat(r,'", score: ').concat(g.score)),n.options.tokenize){for(var m=r.split(n.options.tokenSeparator),v=m.length,y=[],b=0,_=c.length;b<_;b+=1){var w=c[b];n._log('\nPattern: "'.concat(w.pattern,'"'));for(var x=!1,k=0;k<v;k+=1){var S=m[k],A=w.search(S),E={};A.isMatch?(E[S]=A.score,x=l=!0,y.push(A.score)):(E[S]=1,n.options.matchAllTokens||y.push(1)),n._log('Token: "'.concat(S,'", score: ').concat(E[S]))}x&&(d+=1)}p=y[0];for(var T=y.length,C=1;C<T;C+=1)p+=y[C];p/=T,n._log("Token score average:",p)}var M=g.score;-1<p&&(M=(M+p)/2),n._log("Score average:",M);var L=!n.options.tokenize||!n.options.matchAllTokens||d>=c.length;n._log("\nCheck Matches: ".concat(L)),(l||g.isMatch)&&L&&(M={key:i,arrayIndex:e,value:r,score:M},n.options.includeMatches&&(M.matchedIndices=g.matchedIndices),(g=h[s])?g.output.push(M):(h[s]={item:o,output:[M]},f.push(h[s])))}else if(a(r))for(var R=0,O=r.length;R<O;R+=1)t(R,r[R],o,s)}(r,o,s,l)}},{key:"_computeScore",value:function(t){this._log("\n\nComputing score:\n");for(var e=this._keyWeights,n=!!Object.keys(e).length,i=0,r=t.length;i<r;i+=1){for(var o=t[i],s=o.output,a=s.length,l=1,c=0;c<a;c+=1){var u=(f=s[c]).key,h=n?e[u]:1,f=0===f.score&&e&&0<e[u]?Number.EPSILON:f.score;l*=Math.pow(f,h)}o.score=l,this._log(o)}}},{key:"_sort",value:function(t){this._log("\n\nSorting...."),t.sort(this.options.sortFn)}},{key:"_format",value:function(t){var e,n=[];this.options.verbose&&(e=[],this._log("\n\nOutput:\n\n",JSON.stringify(t,(function(t,n){if("object"===r(n)&&null!==n){if(-1!==e.indexOf(n))return;e.push(n)}return n}),2)),e=null);var i=[];this.options.includeMatches&&i.push((function(t,e){var n=t.output;e.matches=[];for(var i=0,r=n.length;i<r;i+=1){var o,s=n[i];0!==s.matchedIndices.length&&(o={indices:s.matchedIndices,value:s.value},s.key&&(o.key=s.key),s.hasOwnProperty("arrayIndex")&&-1<s.arrayIndex&&(o.arrayIndex=s.arrayIndex),e.matches.push(o))}})),this.options.includeScore&&i.push((function(t,e){e.score=t.score}));for(var o=0,s=t.length;o<s;o+=1){var a=t[o];if(this.options.id&&(a.item=this.options.getFn(a.item,this.options.id)[0]),i.length){for(var l={item:a.item},c=0,u=i.length;c<u;c+=1)i[c](a,l);n.push(l)}else n.push(a.item)}return n}},{key:"_log",value:function(){var t;this.options.verbose&&(t=console).log.apply(t,arguments)}}]),i=l;function l(t,e){var n=void 0===(f=e.location)?0:f,i=void 0===(_=e.distance)?100:_,r=void 0===(p=e.threshold)?.6:p,o=void 0===(v=e.maxPatternLength)?32:v,a=void 0!==(d=e.caseSensitive)&&d,c=void 0===(b=e.tokenSeparator)?/ +/g:b,u=void 0!==(g=e.findAllMatches)&&g,h=void 0===(y=e.minMatchCharLength)?1:y,f=void 0===(m=e.id)?null:m,p=void 0===(_=e.keys)?[]:_,d=void 0===(v=e.shouldSort)||v,g=void 0===(b=e.getFn)?s:b,m=void 0===(y=e.sortFn)?function(t,e){return t.score-e.score}:y,v=void 0!==(_=e.tokenize)&&_,y=void 0!==(b=e.matchAllTokens)&&b,b=void 0!==(_=e.includeMatches)&&_,_=void 0!==(_=e.includeScore)&&_;e=void 0!==(e=e.verbose)&&e;!function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),this.options={location:n,distance:i,threshold:r,maxPatternLength:o,isCaseSensitive:a,tokenSeparator:c,findAllMatches:u,minMatchCharLength:h,id:f,keys:p,includeMatches:b,includeScore:_,shouldSort:d,getFn:g,sortFn:m,verbose:e,tokenize:v,matchAllTokens:y},this.setCollection(t),this._processKeys(p)}t.exports=i},function(t,e,n){var i=n(2),r=n(3),o=n(6);(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}})(s.prototype,[{key:"search",value:function(t){var e=(l=this.options).isCaseSensitive,n=l.includeMatches;if(e||(t=t.toLowerCase()),this.pattern===t){var o={isMatch:!0,score:0};return n&&(o.matchedIndices=[[0,t.length-1]]),o}var s=this.options,a=s.maxPatternLength,l=s.tokenSeparator;return this.pattern.length>a?i(t,this.pattern,l):(o=(e=this.options).location,s=e.distance,a=e.threshold,l=e.findAllMatches,e=e.minMatchCharLength,r(t,this.pattern,this.patternAlphabet,{location:o,distance:s,threshold:a,findAllMatches:l,minMatchCharLength:e,includeMatches:n}))}}]),n=s;function s(t,e){var n=void 0===(h=e.location)?0:h,i=void 0===(l=e.distance)?100:l,r=void 0===(u=e.threshold)?.6:u,a=void 0===(c=e.maxPatternLength)?32:c,l=void 0!==(h=e.isCaseSensitive)&&h,c=void 0===(u=e.tokenSeparator)?/ +/g:u,u=void 0!==(h=e.findAllMatches)&&h,h=void 0===(h=e.minMatchCharLength)?1:h;e=void 0!==(e=e.includeMatches)&&e;!function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.options={location:n,distance:i,threshold:r,maxPatternLength:a,isCaseSensitive:l,tokenSeparator:c,findAllMatches:u,includeMatches:e,minMatchCharLength:h},this.pattern=l?t:t.toLowerCase(),this.pattern.length<=a&&(this.patternAlphabet=o(this.pattern))}t.exports=n},function(t,e){var n=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;t.exports=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,r=(i=new RegExp(e.replace(n,"\\$&").replace(i,"|")),t.match(i)),o=[];if(i=!!r)for(var s=0,a=r.length;s<a;s+=1){var l=r[s];o.push([t.indexOf(l),l.length-1])}return{score:i?.5:1,isMatch:i,matchedIndices:o}}},function(t,e,n){var i=n(4),r=n(5);t.exports=function(t,e,n,o){for(var s=void 0===(u=o.location)?0:u,a=void 0===(l=o.distance)?100:l,l=void 0===(u=o.threshold)?.6:u,c=void 0!==(u=o.findAllMatches)&&u,u=void 0===(u=o.minMatchCharLength)?1:u,h=(o=void 0!==(o=o.includeMatches)&&o,s),f=t.length,p=l,d=t.indexOf(e,h),g=e.length,m=[],v=0;v<f;v+=1)m[v]=0;-1!==d&&(l=i(e,{errors:0,currentLocation:d,expectedLocation:h,distance:a}),p=Math.min(l,p),-1!==(d=t.lastIndexOf(e,h+g))&&(R=i(e,{errors:0,currentLocation:d,expectedLocation:h,distance:a}),p=Math.min(R,p))),d=-1;for(var y=[],b=1,_=g+f,w=1<<(g<=31?g-1:30),x=0;x<g;x+=1){for(var k=0,S=_;k<S;)i(e,{errors:x,currentLocation:h+S,expectedLocation:h,distance:a})<=p?k=S:_=S,S=Math.floor((_-k)/2+k);_=S;var A=Math.max(1,h-S+1),E=c?f:Math.min(h+S,f)+g,T=Array(E+2);T[E+1]=(1<<x)-1;for(var C=E;A<=C;--C){var M=C-1,L=n[t.charAt(M)];if(L&&(m[M]=1),T[C]=(T[C+1]<<1|1)&L,0!==x&&(T[C]|=(y[C+1]|y[C])<<1|1|y[C+1]),T[C]&w&&(b=i(e,{errors:x,currentLocation:M,expectedLocation:h,distance:a}))<=p){if(p=b,(d=M)<=h)break;A=Math.max(1,2*h-d)}}if(i(e,{errors:x+1,currentLocation:h,expectedLocation:h,distance:a})>p)break;y=T}var R={isMatch:0<=d,score:0===b?.001:b};return o&&(R.matchedIndices=r(m,u)),R}},function(t,e){t.exports=function(t,e){var n=void 0===(i=e.errors)?0:i,i=void 0===(r=e.currentLocation)?0:r,r=void 0===(r=e.expectedLocation)?0:r;e=void 0===(e=e.distance)?100:e,t=n/t.length,i=Math.abs(r-i);return e?t+i/e:i?1:t}},function(t,e){t.exports=function(){for(var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=[],r=-1,o=0,s=e.length;o<s;o+=1){var a=e[o];a&&-1===r?r=o:a||-1===r||((t=o-1)-r+1>=n&&i.push([r,t]),r=-1)}return e[o-1]&&n<=o-r&&i.push([r,o-1]),i}},function(t,e){t.exports=function(t){for(var e={},n=t.length,i=0;i<n;i+=1)e[t.charAt(i)]=0;for(var r=0;r<n;r+=1)e[t.charAt(r)]|=1<<n-r-1;return e}},function(t,e){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function i(t){return null==t?"":function(){if("string"==typeof t)return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}()}function r(t){return"string"==typeof t}function o(t){return"number"==typeof t}t.exports={get:function(t,e){var s=[];return function t(e,a){if(a){var l=a.indexOf("."),c=a,u=null;-1!==l&&(c=a.slice(0,l),u=a.slice(l+1));var h=e[c];if(null!=h)if(u||!r(h)&&!o(h))if(n(h))for(var f=0,p=h.length;f<p;f+=1)t(h[f],u);else u&&t(h,u);else s.push(i(h))}else s.push(e)}(t,e),s},isArray:n,isString:r,isNum:o,toString:i}}])}(ut={exports:{}}),ut.exports),pt=(ht=ft)&&ht.__esModule&&Object.prototype.hasOwnProperty.call(ht,"default")?ht.default:ht,dt=(ft.Fuse,{keys:[{name:"name",weight:.6},{name:"addressList",weight:.4}],threshold:.2}),gt=function(){function t(e){i(this,t),this.fuseSearch=null,this.levels_=null,this.searchListEntities_=[],this.searchListIcons_=[],this.searchList_=[],this.venueModel=e,this.init()}return o(t,[{key:"init",value:function(){var t=this.venueModel.getGeometries().reduce((function(t,e){return t[e.getId()]=e,t}),{});this.initEntityList(this.venueModel.entities),this.initIconList(t),this.levels_=this.venueModel.getLevels().map((function(t){return{levelId:t.getId(),levelName:t.getName(),drawingId:t.getDrawing().getId(),drawingName:t.getDrawing().getName()}})),t=[].concat(y(this.searchListEntities_),y(this.searchListIcons_)),this.searchList_=t.sort((function(t,e){return t.name.localeCompare(e.name)})),this.fuseSearch_=new pt(this.searchList_,dt)}},{key:"initEntityList",value:function(t){t=(0<arguments.length&&void 0!==t?t:[]).map((function(t){return new ct({geometries:t.getGeometries(),addressList:t.getInternalAddress()||[],name:t.getName()||"",entity:t})})),this.searchListEntities_=t}},{key:"initIconList",value:function(t){t=0<arguments.length&&void 0!==t?t:{},this.searchListIcons_=Object.values(t).filter((function(t){return t.getIcon()})).map((function(t){var e=t.getIcon();return new ct({geometries:[t],icon:e.getSVG(),name:e.ar||""})}))}},{key:"all",value:function(){return this.searchList_}},{key:"allIconTypes",value:function(){var t=this.searchListIcons_.reduce((function(t,e){return t[e.name]=e.name,t}),{});return Object.keys(t)}},{key:"find",value:function(t){return""===(t=0<arguments.length&&void 0!==t?t:"")?this.searchList_:this.fuseSearch_.search(t)}},{key:"groupByLevel",value:function(t){var e=0<arguments.length&&void 0!==t?t:this.searchList_;return this.levels_?y(this.levels_.flatMap((function(t){return l(l({},t),{},{results:e.filter((function(e){return n=t,0<(e=e).geometries.length&&e.geometries.find((function(t){return Number(t.getLevel().getId())===Number(n.levelId)}));var n}))})}))):[]}}]),t}(),mt="Point",vt="LineString",yt="Polygon",bt="MultiPoint",_t="MultiLineString",wt="MultiPolygon",xt=Object.freeze({STANDARD:"STANDARD",FLATTEN:"FLATTEN",OUTDOOR_MAIN:"OUTDOOR_MAIN",INDOOR_MAIN:"INDOOR_MAIN",NO_OUTDOORS:"NO_OUTDOORS",FLATTEN_INDOOR_MAIN:"FLATTEN_INDOOR_MAIN",FLATTEN_OUTDOOR_COPY:"FLATTEN_OUTDOOR_COPY"}),kt=Object.freeze({THEME:"THEME",THEME_MAP:"THEME_MAP",PRESETS:"PRESETS",SDK_STRINGS:"SDK_STRINGS",ICON_FILE:"ICON_FILE",INPUT_COLORS:"INPUT_COLORS",BASE_MAP_INFO:"BASE_MAP_INFO",CONFIG_PROFILE:"CONFIG_PROFILE",NAV_THEME:"NAV_THEME",NAV_NAME_THEME:"NAV_NAME_THEME",NAV_PROP_MAP:"NAV_PROP_MAP",NAV_STRINGS:"NAV_STRINGS",NAV_THEME_MAP:"NAV_THEME_MAP",NAV_NAME_THEME_MAP:"NAV_NAME_THEME_MAP",V4_THEME_FAMILY:"V4_THEME_FAMILY",V4_MAPTYPE_THEME:"V4_MAPTYPE_THEME",ICON:"ICON",MARKER:"MARKER",PERMISSIONS:"PERMISSIONS",NAICS_ARRAY:"NAICS_ARRAY",NAICS_MAP:"NAICS_MAP"}),St=Object.freeze((s(ke={},kt.THEME,"themeUrls"),s(ke,kt.THEME_MAP,"themeMapUrl"),s(ke,kt.PRESETS,"presetsUrl"),s(ke,kt.SDK_STRINGS,"stringsUrl"),ke)),At=Object.freeze((s(Pe={},kt.THEME,"themeOverrides"),s(Pe,kt.THEME_MAP,"themeMapOverrides"),s(Pe,kt.PRESETS,"presetOverrides"),s(Pe,kt.SDK_STRINGS,"stringsOverrides"),s(Pe,kt.INPUT_COLORS,"inputColorOverrides"),Pe)),Et=(Object.freeze((s(Ct={},kt.THEME,["Modern","Standard","Factory","Navteq","TheBase","Westfield_noLabels","Westfield","TDM_noLabel"]),s(Ct,kt.SDK_STRINGS,["Standard","SDK","sdk/standard"]),s(Ct,kt.V4_THEME_FAMILY,["modern","standard"]),s(Ct,kt.V4_MAPTYPE_THEME,["Airport Terminal","Airport","Casino","College Building","College Campus","Convention","General","Hospital","Outdoor","Retail","School Building","School Campus","Shopping Mall","Traffic","Train Station"]),s(Ct,kt.NAV_THEME,["Factory","MapEditor"]),s(Ct,kt.ICON,["Multicolor","Standard","TheBase","Factory"]),Ct)),Object.freeze((s(ke={},kt.THEME,"Modern"),s(ke,kt.THEME_MAP,"Standard"),s(ke,kt.PRESETS,"Standard"),s(ke,kt.SDK_STRINGS,"Standard"),s(ke,kt.ICON_FILE,"Standard"),s(ke,kt.INPUT_COLORS,"Standard"),s(ke,kt.BASE_MAP_INFO,"Standard"),s(ke,kt.CONFIG_PROFILE,"factory"),s(ke,kt.NAV_THEME,"Factory"),s(ke,kt.NAV_NAME_THEME,"FactoryName"),s(ke,kt.NAV_PROP_MAP,"Standard"),s(ke,kt.NAV_STRINGS,"Standard"),s(ke,kt.NAV_THEME_MAP,"Standard"),s(ke,kt.NAV_NAME_THEME_MAP,"StandardName"),s(ke,kt.V4_THEME_FAMILY,"Standard"),s(ke,kt.V4_MAPTYPE_THEME,"Standard"),s(ke,kt.ICON,"Multicolor"),s(ke,kt.MARKER,"Standard"),ke))),Tt=Object.freeze({GEO_JSON:"GEO_JSON",V5_MAP:"V5_MAP",V5_NAV:"V5_NAV",V5_INFO:"V5_INFO",KML:"KML",SVG:"SVG",PNG:"PNG"}),Ct=Object.freeze((s(Pe={},Tt.V5_MAP,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_DIRECTORY:"COMMUNITY_DIRECTORY",COMMUNITY_DETAIL:"COMMUNITY_DETAIL",LEVEL_GEOMETRY:"LEVEL_GEOMETRY",DRAWING_ENTITY:"DRAWING_ENTITY"}),s(Pe,Tt.GEO_JSON,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_ENTITY:"COMMUNITY_ENTITY",PATH_LEVEL_GEOMETRY:"PATH_LEVEL_GEOMETRY",GEOJSON_LEVEL_GEOMETRY:"GEOJSON_LEVEL_GEOMETRY"}),s(Pe,Tt.V5_NAV,{JSON_NAV:"JSON_NAV",BINARY_NAV:"BINARY_NAV",JSON_ENHANCED_NAV:"JSON_ENHANCED_NAV",BINARY_ENHANCED_NAV:"BINARY_ENHANCED_NAV"}),s(Pe,Tt.V5_INFO,{GEOMETRY_INFO:"GEOMETRY_INFO"}),s(Pe,Tt.SVG,{PLAIN:"PLAIN",PRETTY:"PRETTY",PRETTY_HORIZONTAL_LABEL:"PRETTY_HORIZONTAL_LABEL"}),s(Pe,Tt.KML,{RASTER:"RASTER",VECTOR:"VECTOR",RASTER_HORIZONTAL:"RASTER_HORIZONTAL",VECTOR_HORIZONTAL:"VECTOR_HORIZONTAL"}),s(Pe,Tt.PNG,{LOW_RESOLUTION:"LOW_RESOLUTION",HIGH_RESOLUTION:"HIGH_RESOLUTION",LOW_RESOLUTION_GEO:"LOW_RESOLUTION_GEO",HIGH_RESOLUTION_GEO:"HIGH_RESOLUTION_GEO",LOW_RESOLUTION_HORIZONTAL:"LOW_RESOLUTION_HORIZONTAL",HIGH_RESOLUTION_HORIZONTAL:"HIGH_RESOLUTION_HORIZONTAL",LOW_RESOLUTION_HORIZONTAL_GEO:"LOW_RESOLUTION_HORIZONTAL_GEO",HIGH_RESOLUTION_HORIZONTAL_GEO:"HIGH_RESOLUTION_HORIZONTAL_GEO"}),Pe));function Mt(){}function Lt(){Lt.init.call(this)}function Rt(t){return void 0===t._maxListeners?Lt.defaultMaxListeners:t._maxListeners}function Ot(t,e,n,i){var r,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(r=t._events)?(r.newListener&&(t.emit("newListener",e,n.listener||n),r=t._events),o=r[e]):(r=t._events=new Mt,t._eventsCount=0),o?("function"==typeof o?o=r[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),o.warned||(i=Rt(t))&&0<i&&o.length>i&&(o.warned=!0,(i=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.emitter=t,i.type=e,i.count=o.length,console.warn)):(o=r[e]=n,++t._eventsCount),t}function It(t,e,n){var i=!1;function r(){t.removeListener(e,r),i||(i=!0,n.apply(t,arguments))}return r.listener=n,r}function Pt(t){var e=this._events;if(e){if("function"==typeof(t=e[t]))return 1;if(t)return t.length}return 0}function Nt(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}Mt.prototype=Object.create(null),(Lt.EventEmitter=Lt).usingDomains=!1,Lt.prototype.domain=void 0,Lt.prototype._events=void 0,Lt.prototype._maxListeners=void 0,Lt.defaultMaxListeners=10,Lt.init=function(){this.domain=null,Lt.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Mt,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Lt.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},Lt.prototype.getMaxListeners=function(){return Rt(this)},Lt.prototype.emit=function(t,e,n,i){var r,o,s,a="error"===t,l=this._events;if(l)a=a&&null==l.error;else if(!a)return!1;if(c=this.domain,a){if(a=e,c)return(a=a||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,a.domain=c,a.domainThrown=!1,c.emit("error",a),!1;if(a instanceof Error)throw a;var c=new Error('Uncaught, unspecified "error" event. ('+a+")");throw c.context=a,c}if(!(r=l[t]))return!1;var u,h="function"==typeof r;switch(u=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var i=t.length,r=Nt(t,i),o=0;o<i;++o)r[o].call(n)}(r,h,this);break;case 2:!function(t,e,n,i){if(e)t.call(n,i);else for(var r=t.length,o=Nt(t,r),s=0;s<r;++s)o[s].call(n,i)}(r,h,this,e);break;case 3:!function(t,e,n,i,r){if(e)t.call(n,i,r);else for(var o=t.length,s=Nt(t,o),a=0;a<o;++a)s[a].call(n,i,r)}(r,h,this,e,n);break;case 4:!function(t,e,n,i,r,o){if(e)t.call(n,i,r,o);else for(var s=t.length,a=Nt(t,s),l=0;l<s;++l)a[l].call(n,i,r,o)}(r,h,this,e,n,i);break;default:for(o=new Array(u-1),s=1;s<u;s++)o[s-1]=arguments[s];!function(t,e,n,i){if(e)t.apply(n,i);else for(var r=t.length,o=Nt(t,r),s=0;s<r;++s)o[s].apply(n,i)}(r,h,this,o)}return!0},Lt.prototype.addListener=function(t,e){return Ot(this,t,e,!1)},Lt.prototype.on=Lt.prototype.addListener,Lt.prototype.prependListener=function(t,e){return Ot(this,t,e,!0)},Lt.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,It(this,t,e)),this},Lt.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,It(this,t,e)),this},Lt.prototype.removeListener=function(t,e){var n,i,r,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new Mt:(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length;0<o--;)if(n[o]===e||n[o].listener&&n[o].listener===e){s=n[o].listener,r=o;break}if(r<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Mt,this;delete i[t]}else!function(t,e){for(var n=e,i=n+1,r=t.length;i<r;n+=1,i+=1)t[n]=t[i];t.pop()}(n,r);i.removeListener&&this.emit("removeListener",t,s||e)}return this},Lt.prototype.removeAllListeners=function(t){var e,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Mt,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new Mt:delete n[t]),this;if(0===arguments.length){for(var i,r=Object.keys(n),o=0;o<r.length;++o)"removeListener"!==(i=r[o])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=new Mt,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(;this.removeListener(t,e[e.length-1]),e[0];);return this},Lt.prototype.listeners=function(t){var e=this._events,n=e&&(n=e[t])?"function"==typeof n?[n.listener||n]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(n):[];return n},Lt.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):Pt.call(t,e)},Lt.prototype.listenerCount=Pt,Lt.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var Dt="venues-ui-button--active",jt="venues-ui-button",zt="venues-ui__drawings",$t="data-drawing",Ft=function(){function t(e,n,r){var o=this;i(this,t),this.clickHandler=r,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("class",zt);var s=document.createElement("div");s.setAttribute("class","trigger ".concat(jt)),(r=document.createElement("div")).setAttribute("class","arrow arrow--down"),s.appendChild(r),s.addEventListener("click",(function(){s.classList.toggle(Dt),o.containerButtons.classList.toggle("drawings--open")})),this.containerDiv.appendChild(s),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","drawings"),this.containerDiv.appendChild(this.containerButtons),n&&this.update(n),e.appendChild(this.containerDiv)}return o(t,[{key:"drawButton",value:function(t,e,n){var i=this,r=document.createElement("div");n=Number(n)===Number(t);r.setAttribute("class",n?"".concat(jt," ").concat(Dt):jt),r.innerHTML=e,r.setAttribute($t,t),r.addEventListener("click",(function(){i.switch(t),i.clickHandler(t)})),this.containerButtons.appendChild(r)}},{key:"switch",value:function(t){this.containerButtons.querySelectorAll(".".concat(zt," .").concat(Dt)).forEach((function(t){return t.setAttribute("class",jt)})),(t=this.containerButtons.querySelector("[".concat($t,"='").concat(t,"']")))&&t.setAttribute("class","".concat(jt," ").concat(Dt))}},{key:"update",value:function(t){var e=this;this.containerButtons.innerHTML="";var n=function(t){return t=t.getDrawings(),new Map(t.map((function(t){var e=t.getDisplayName()||t.getName();return[t.getId(),e]})))}(t);0<n.size&&n.forEach((function(n,i){return e.drawButton(i,n,t.getRootDrawing().getId())}))}}]),t}(),Bt="venues-ui-button--active",Ht="venues-ui-button",Ut="levels",Gt="data-level",Vt="venues-ui__levels",Wt=function(){function t(e,n,r,o){var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:4;i(this,t),this.clickHandler=o,this.levelButtonCount=s,this.currentScrollIndex=0,this.containerUI=document.createElement("div"),this.containerUI.setAttribute("class","".concat(Vt)),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class",Ut),this.containerUI.appendChild(this.containerButtons),n&&this.update(n,r),e.appendChild(this.containerUI)}return o(t,[{key:"clear",value:function(){this.containerButtons.innerHTML="",this.buttonScrollUp&&(this.containerUI.removeChild(this.buttonScrollUp),this.buttonScrollUp=null),this.buttonScrollDown&&(this.containerUI.removeChild(this.buttonScrollDown),this.buttonScrollDown=null)}},{key:"drawLevelButton",value:function(t,e){var n=this,i=document.createElement("div");i.innerHTML=e,i.style.fontSize="".concat(Math.max(Math.min(28.8/e.length,11.52),10),"px"),i.style.display="block",i.setAttribute("class",Ht),i.setAttribute(Gt,t),i.addEventListener("click",(function(){n.switch(t),n.clickHandler(t)})),this.containerButtons.appendChild(i)}},{key:"drawScrollButtons",value:function(){var t=this;this.buttonScrollUp=document.createElement("div"),this.buttonScrollUp.setAttribute("class","".concat(Ht," ").concat(Ht,"--up"));var e=document.createElement("div");e.setAttribute("class","arrow arrow--up"),this.buttonScrollUp.appendChild(e),this.buttonScrollUp.addEventListener("click",(function(){return t.scroll(1)})),this.containerUI.insertBefore(this.buttonScrollUp,this.containerButtons),this.buttonScrollDown=document.createElement("div"),this.buttonScrollDown.setAttribute("class","".concat(Ht," ").concat(Ht,"--down")),(e=document.createElement("div")).setAttribute("class","arrow arrow--down"),this.buttonScrollDown.appendChild(e),this.buttonScrollDown.addEventListener("click",(function(){return t.scroll(-1)})),this.containerUI.appendChild(this.buttonScrollDown)}},{key:"scroll",value:function(t){var e,n=0<arguments.length&&void 0!==t?t:0,i=Array.from(this.containerButtons.querySelectorAll(".".concat(Ht))).reverse(),r=[];0<=n?(this.currentScrollIndex=Math.min(this.currentScrollIndex+n,i.length-this.levelButtonCount),t=Math.min(this.currentScrollIndex,i.length-this.levelButtonCount),e=Math.min(this.currentScrollIndex+this.levelButtonCount,i.length),r=i.slice(t,e)):n<0&&(this.currentScrollIndex=Math.max(this.currentScrollIndex+n,0),e=Math.max(0,this.currentScrollIndex),n=Math.min(i.length,this.currentScrollIndex+this.levelButtonCount),r=i.slice(e,n)),i.forEach((function(t){-1!==r.indexOf(t)?t.style.display="block":t.style.display="none"})),this.buttonScrollDown&&(0===this.currentScrollIndex?this.buttonScrollDown.setAttribute("disabled","disabled"):this.buttonScrollDown.removeAttribute("disabled")),this.buttonScrollUp&&(this.currentScrollIndex===i.length-this.levelButtonCount?this.buttonScrollUp.setAttribute("disabled","disabled"):this.buttonScrollUp.removeAttribute("disabled"))}},{key:"switch",value:function(t){this.containerButtons.querySelectorAll(".".concat(Bt)).forEach((function(t){return t.setAttribute("class",Ht)}));var e=this.containerButtons.querySelector(".".concat(Vt," [").concat(Gt,"='").concat(t,"']"));e&&(t=Array.from(this.containerButtons.querySelectorAll(".".concat(Ht))).reverse(),e.setAttribute("class","".concat(Ht," ").concat(Bt)),((e=t.indexOf(e))<this.currentScrollIndex||e>=this.currentScrollIndex+4)&&this.scroll(e-this.currentScrollIndex))}},{key:"update",value:function(t,e){var n=this,i=(e=function(t){return new Map((0<arguments.length&&void 0!==t?t:[]).map((function(t){return[t.getZIndex(),t.getShortName()||t.getDisplayName()||t.getName()]})))}(function(t,e){return e!==xt.FLATTEN?t.getLevels():(t=t.getVenueModel().getLevelMapFlattenedByZIndex_(),Object.values(t).map((function(t){return t[0]})))}(t,e).sort((function(t,e){return e.getZIndex()-t.getZIndex()}))),t.getMainLevel().getZIndex());this.clear(),e.forEach((function(t,e){return n.drawLevelButton(e,t)})),e.size>this.levelButtonCount&&(e.size>this.levelButtonCount+1?this.currentScrollIndex=Math.min(Array.from(e).reverse().findIndex((function(t){return t[0]===i})),e.size-this.levelButtonCount):this.currentScrollIndex=0,this.drawScrollButtons(),this.scroll(0)),this.switch(i)}}]),t}(),qt={VENUE_DATA_LOADED:"VENUE_DATA_LOADED",VENUE_MAP_DATA_LOADED:"VENUE_MAP_DATA_LOADED",VENUE_ENTITY_DATA_LOADED:"VENUE_ENTITY_DATA_LOADED",VENUE_DATA_MODEL_LOADED:"VENUE_DATA_MODEL_LOADED",VENUE_NAV_DATA_LOADED:"VENUE_NAV_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",META_DATA_MODEL_LOADED:"META_DATA_MODEL_LOADED",META_DATA_MODEL_UPDATED:"META_DATA_MODEL_UPDATED",VENUE_ICONS_LOADED:"VENUE_ICONS_LOADED"},Kt=(Object.freeze((s(ke={},qt.VENUE_DATA_LOADED,{description:"event fired when all requested files along with metadata & overrides are loaded",emitTemplate:{}}),s(ke,qt.VENUE_MAP_DATA_LOADED,{description:"event fired when requested levels, drawings & community files are loaded",emitTemplate:{}}),s(ke,qt.VENUE_ENTITY_DATA_LOADED,{description:"event fired when requested entity data is loaded",emitTemplate:{}}),s(ke,qt.VENUE_DATA_MODEL_LOADED,{description:"event fired when a map file is loaded",emitTemplate:{}}),s(ke,qt.VENUE_NAV_DATA_LOADED,{description:"event fired when requested navigation product is loaded",emitTemplate:{}}),s(ke,qt.META_DATA_LOADED,{description:"event fired when all requested meta files are loaded except icon & marker",emitTemplate:{}}),s(ke,qt.META_DATA_MODEL_LOADED,{description:"event fired when a specific model is loaded except icon & marker",emitTemplate:{}}),s(ke,qt.META_DATA_MODEL_UPDATED,{description:"event fired when a specific meta override is added or removed",emitTemplate:{}}),s(ke,qt.VENUE_ICONS_LOADED,{description:"event fired when all icons of venue are loaded",emitTemplate:{}}),ke)),new Lt);function Yt(t,e){var n,i,r,o,s=0;Object.keys(e).forEach((function(a){for(n=e[a],null==(r=n.priority)&&(r=0),o=!1;!o;)s<t.length?null==(i=(i=t[s]).priority)&&(i=0):i=Number.MAX_VALUE,r<=i&&(t.splice(s,0,n),o=!0),s+=1}))}Kt.EVENT_NAME=qt,Kt.on("newListener",(function(t){}));var Xt=Math.PI/180,Zt=180/Math.PI,Jt=function(){function t(){i(this,t)}return o(t,null,[{key:"toRadians",value:function(t){return t*Xt}},{key:"toDegrees",value:function(t){return t*Zt}},{key:"getInverseTransform",value:function(t){var e=t[0]*t[3]-t[1]*t[2];return(e=[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,0,0])[4]=-(e[0]*t[4]+e[2]*t[5]),e[5]=-(e[1]*t[4]+e[3]*t[5]),e}},{key:"applyTransformToPoint",value:function(t,e){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}},{key:"transformProduct",value:function(t,e){var n=[0,0,0,0,0,0];return n[0]=e[0]*t[0]+e[2]*t[1],n[1]=e[1]*t[0]+e[3]*t[1],n[2]=e[0]*t[2]+e[2]*t[3],n[3]=e[1]*t[2]+e[3]*t[3],n[4]=e[0]*t[4]+e[2]*t[5]+e[4],n[5]=e[1]*t[4]+e[3]*t[5]+e[5],n}},{key:"convertLonLatToMerc",value:function(t){var e=t[0]*Xt;t=t[1]*Xt,t=Math.sin(t);return[.5+e/(2*Math.PI),.5-Math.log((1+t)/(1-t))/(4*Math.PI)]}},{key:"convertMercToLatLon",value:function(t){var e=2*Math.PI*(t[0]-.5);t=Math.atan(Math.sinh(2*Math.PI*(.5-t[1])));return[e/Xt,t/Xt]}},{key:"getTransformScale",value:function(t){return Math.sqrt(t[0]*t[3]-t[1]*t[2])}},{key:"getLonLatToMercTransform",value:function(e){var n=[1/360,0,0,-1/(360*Math.cos(e[1]*Xt)),0,0],i=t.applyTransformToPoint(n,e);e=t.convertLonLatToMerc(e);return n[4]=e[0]-i[0],n[5]=e[1]-i[1],n}},{key:"getNatToMercTransform",value:function(e){var n=[e[4],e[5]];n=t.getLonLatToMercTransform(n);return t.transformProduct(e,n)}},{key:"convertMxMy2LonLat",value:function(e,n){return e.length&&n.length?t.applyTransformToPoint(e,n):[]}},{key:"convertLonLat2MxMy",value:function(e,n){return e.length&&n.length?(e=t.getInverseTransform(e),t.applyTransformToPoint(e,n)):[]}},{key:"getFlattenedQuadraticBezierCurve",value:function(t,e,n,i){var r=[],o=3<arguments.length&&void 0!==i?i:10;o<1&&(o=6);for(var s=0;s<=o;s+=1){var a=(1-(u=s/o))*(1-u),l=2*u*(1-u),c=u*u,u=a*t[0]+l*e[0]+c*n[0];c=a*t[1]+l*e[1]+c*n[1];r.push([u,c])}return r}},{key:"getFlattenedCubicBezierCurve",value:function(t,e,n,i,r){var o=[],s=4<arguments.length&&void 0!==r?r:10;s<1&&(s=6);for(var a=0;a<=s;a+=1){var l=(1-(f=a/s))*(1-f)*(1-f),c=3*f*(1-f)*(1-f),u=3*f*f*(1-f),h=f*f*f,f=l*t[0]+c*e[0]+u*n[0]+h*i[0];h=l*t[1]+c*e[1]+u*n[1]+h*i[1];o.push([f,h])}return o}},{key:"getRectangularCoordinatesOfLabelArea",value:function(e,n,i){var r=!(2<arguments.length&&void 0!==i)||i,o=(c=v(e,6))[0],s=c[1],a=c[2],l=c[3],c=(i=c[5],t.getDeltaLonLatForMeterAtGivenLonLat(o,s));e=e[4];return r?(i&&(e*=-1),null!=n&&(e=(e+=n<0?2*Math.PI+n:n)<0?2*Math.PI+e:e)):e=0,t.getRectVerticesFromSignatureRectRepresentation([o,s],{xLength:a,yLength:l},e,c)}},{key:"getRotatedPoint",value:function(t,e,n,i){var r=!(2<arguments.length&&void 0!==n)||n,o=3<arguments.length&&void 0!==i?i:[0,0],s=Math.cos(e);n=Math.sin(e),i=t[0]-o[0],e=t[1]-o[1],t=[];return[(t=r?[i*s+e*n,e*s-i*n]:[i*s-e*n,e*s+i*n])[0]+o[0],t[1]+o[1]]}},{key:"getRectVerticesFromSignatureRectRepresentation",value:function(e,n,i,r,o){var s=n.xLength,a=(n=n.yLength,!(4<arguments.length&&void 0!==o)||o),l=(e=v(e,2))[0],c=e[1],u=s/2,h=n/2,f=(r=v(r,2))[0],p=r[1];return[[1,1],[-1,1],[-1,-1],[1,-1]].map((function(t){return[t[0]*u,t[1]*h]})).map((function(e){return t.getRotatedPoint(e,i,a)})).map((function(t){return[t[0]*f,t[1]*p]})).map((function(t){return[t[0]+l,t[1]+c]}))}},{key:"getScaleFactorForRectInSpace",value:function(t,e,n,i){return(i=e/i)<(n=t/n)?i:n}},{key:"getDeltaLonLatForMeterAtGivenLonLat",value:function(t,e){return[1/6371e3*(180/Math.PI)/Math.cos(e*Math.PI/180),1/6371e3*(180/Math.PI)]}},{key:"getBoundingBoxVertices",value:function(t){var e=0<arguments.length&&void 0!==t?t:[];t=[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]];return e.reduce((function(t,e){return[[Math.min(e[0],t[0][0]),Math.min(e[1],t[0][1])],[Math.max(e[0],t[1][0]),Math.max(e[1],t[1][1])]]}),t)}},{key:"isPointInBoundingBox",value:function(t,e){if(t&&e){var n=(o=v(t,2))[0],i=o[1],r=v(e,2),o=(t=v(r[0],2))[0];e=t[1],r=(t=v(r[1],2))[0],t=t[1];return n<=r&&o<=n&&i<=t&&e<=i}}},{key:"isPointOnLineSegment",value:function(t,e,n){var i=(o=v(t,2))[0],r=o[1],o=(t=(s=v(e,2))[0],s[1]),s=(e=v(n,2))[0];e=(o-r)*((n=e[1])-r)<=0;return t===s?t===i&&e:r-n==(n-o)/(s-t)*(i-s)&&e}},{key:"rayIntersectLineSegment",value:function(t,e,n){var i=(o=v(t,2))[0],r=o[1],o=(t=v(e,2))[0];e=t[1],n=(t=v(n,2))[0],t=t[1];return o!==n&&(0<=(o=(i-o)/(n-o))&&o<1&&r<(t-e)*o+e)}},{key:"isPointInPolygon",value:function(e,n){var i=(e=v(e,2))[0],r=e[1];if((e=n.length)<3)return!1;var o=0,s=n[e-1];return n.forEach((function(e){t.rayIntersectLineSegment([i,r],s,e)&&(o+=1),s=e})),o%2!=0}},{key:"isPointOnLineString",value:function(e,n){var i=(e=v(e,2))[0],r=e[1],o=n.length;if(o<2)return!1;for(var s=n[o-1],a=0;a<o;a+=1){var l=n[a];if(t.isPointOnLineSegment([i,r],s,l))return!0;s=n[a]}return!1}},{key:"getAreaOfPolygon",value:function(t){var e=t.length;if(e<3)return null;var n=0,i=t[e-1];return t.forEach((function(t){var e,r,o,s;n+=.5*(r=t,s=(o=v(i,2))[0],e=o[1],r=(o=v(r,2))[0],s*o[1]-e*r),i=t})),n}},{key:"getDistanceBetweenPoints",value:function(t,e){t=(n=v(t,2))[0];var n=n[1];t-=(e=v(e,2))[0],e=n-e[1];return Math.sqrt(t*t+e*e)}}]),t}(),Qt=function(){function t(){i(this,t)}return o(t,null,[{key:"get",value:function(t,e){return fetch(t,1<arguments.length&&void 0!==e?e:{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Call failed for ".concat(t," : ").concat(e.status," ").concat(e.statusText)))}))}}]),t}(),te=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];i(this,t),e&&Object.assign(this,e),this.splitIconGeomBasisGeomType_=n,this.splitIconGeomBasisGeomType_&&this.splitMultiGeom()}return o(t,[{key:"flattenIconShape",value:function(t){var e,n=0<arguments.length&&void 0!==t&&t;this.isFlattened||(e=[],(t=this.g)&&t.forEach((function(t){var n,i=[];t.shp&&t.shp.forEach((function(t){var e,r=v(t,7),o=r[0],s=r[1],a=r[2],l=r[3],c=r[4],u=r[5],h=r[6];switch(o){case 0:case 1:i.push(t),n=[s,a];break;case 2:e=Jt.getFlattenedQuadraticBezierCurve(n,[s,a],[l,c]),n=[l,c];break;case 3:e=Jt.getFlattenedCubicBezierCurve(n,[s,a],[l,c],[u,h]),n=[u,h];break;case 4:i.push(t),n=void 0}e&&(e.splice(0,2),e.forEach((function(t){i.push([1].concat(y(t)))})))})),e.push(l(l({},t),{shp:i}))})),n&&(this.g_original=t),this.g=e,this.isFlattened=!0)}},{key:"splitMultiGeom",value:function(){var e=this;if(this.isIconGeomSplittedBasisGeomType)return this.isIconWithHole;this.splitIconGeomBasisGeomType_||(this.splitIconGeomBasisGeomType_=!0);var n=this.g,i=[],r=[],o=!1,s=!0,a=-1;return!!n&&(n.forEach((function(n){var c,u=[],h=[];3===n.gt||(n.shp.forEach((function(t){var e=v(t,7),o=e[0],f=e[1],p=e[2],d=e[3],g=e[4],m=e[5],b=e[6],_=null;switch(o){case 0:u.push([f,p]),c=[f,p],s||1!==a&&0!==a||i.push(l(l({},n),{},{st:2},{gt:a,shp:r})),a=0,s=!(r=[]),r.push(t);break;case 1:u.push([f,p]),c=[f,p],2===a||0!==a&&1!==a||(a=1,r.push(t));break;case 2:(_=Jt.getFlattenedQuadraticBezierCurve(c,[f,p],[d,g],15)).splice(0,2),u.push.apply(u,y(_)),c=[d,g],2===a||0!==a&&1!==a||(a=1,r.push(t));break;case 3:(_=Jt.getFlattenedCubicBezierCurve(c,[f,p],[d,g],[m,b],15)).splice(0,2),u.push.apply(u,y(_)),c=[m,b],2===a||0!==a&&1!==a||(a=1,r.push(t));break;case 4:r.push(t),a=2,s=!0,2<u.length&&h.push({shp:r,area:Jt.getAreaOfPolygon(u),points:u,children:[]}),c=void 0,u=[]}}),e),t.getLinkedParentChildPolygonArray(h).forEach((function(t){var e=[];e.push.apply(e,y(t.shp)),t.children.forEach((function(t){o=!0,e.push.apply(e,y(t.shp))})),i.push(l(l({},n),{},{st:2},{gt:2,shp:e}))})))}),this),this.g=i,this.isIconGeomSplittedBasisGeomType=!0,this.isIconWithHole=o,this.isIconWithHole)}},{key:"getIconWithOriginTranslatedToIconCenter",value:function(){var e=new t(this,this.splitIconGeomBasisGeomType_),n=Number.parseInt(e.w,10)/2*1,i=Number.parseInt(e.h,10)/2*1;return e.g=[],this.g&&this.g.forEach((function(t){var r=[];t.shp&&t.shp.forEach((function(t){var e=v(t,7),o=e[0],s=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6];switch(o){case 0:case 1:r.push([o,s-n,a-i]);break;case 2:r.push([o,s-n,a-i,l-n,c-i]);break;case 3:r.push([o,s-n,a-i,l-n,c-i,u-n,h-i]);break;case 4:r.push(t)}})),e.g.push(l(l({},t),{shp:r}))})),e}},{key:"getTransformedIconThatFitsInLabelArea",value:function(e,n,i){var r=1<arguments.length&&void 0!==n?n:0,o=(n=!(2<arguments.length&&void 0!==i)||i,i=new t(this,this.splitIconGeomBasisGeomType_),t.getParamForTransformedIconThatFitsInLabelArea(i,e,r,n));n=o.scaleFactor;i.w=n,i.h=n;var s=[];return i.g&&i.g.forEach((function(e){var n=[];e.shp&&e.shp.forEach((function(e){var i=(u=v(e,7))[0],r=u[1],s=u[2],a=u[3],l=u[4],c=u[5],u=u[6],h=(s=v(t.getTransformedIconPointThatFitsInLabelArea([r,s],o),2))[0],f=s[1],p=(l=v(t.getTransformedIconPointThatFitsInLabelArea([a,l],o),2))[0],d=l[1],g=(u=v(t.getTransformedIconPointThatFitsInLabelArea([c,u],o),2))[0],m=u[1];switch(i){case 0:case 1:n.push([i,h,f]);break;case 2:n.push([i,h,f,p,d]);break;case 3:n.push([i,h,f,p,d,g,m]);break;case 4:n.push(e)}})),s.push(l(l({},e),{shp:n}))})),i.g=s,i}},{key:"getSVG",value:function(t){var e,n,i='<?xml version="1.0" encoding="utf-8"?>',r=this.w||50,o=this.h||50,a=this.g;if(i+='<svg viewBox="0 0 '.concat(r," ").concat(o,'" xmlns="http://www.w3.org/2000/svg" width="').concat(r,'" height="').concat(o,'">'),i+="<g>",a&&0<a.length)for(var l=0;l<a.length;l+=1){i+="<path ",a[l].gw&&(i+=' stroke-width="'.concat(a[l].gw,'"')),t?i+=' fill="'.concat(t,'"'):a[l].os&&a[l].os.m?i+=' fill="'.concat(a[l].os.m,'"'):i+=0===l?' fill="#006BB7"':' fill="#ffffff"',i+=' d="';for(var c=0;c<a[l].shp.length;c+=1)for(var u=0;u<a[l].shp[c].length;u+=1)i+=0===u?(e=a[l].shp[c][u],void 0,(s(n={},0,"M"),s(n,1,"L"),s(n,2,"Q"),s(n,3,"C"),s(n,4,"Z"),n)[e]):a[l].shp[c][u],0===u||u+1===a[l].shp[c][u].length?i+="":i+=" ";i+='" ></path>'}return(i+="</g>")+"</svg>"}}],[{key:"getParamForTransformedIconThatFitsInLabelArea",value:function(t,e,n,i){var r=2<arguments.length&&void 0!==n?n:0,o=!(3<arguments.length&&void 0!==i)||i,s=(l=v(e,5))[0],a=l[1],l=(n=l[2],i=l[3],e=l[4],(o?0:e)+r);e=(o=v(Jt.getDeltaLonLatForMeterAtGivenLonLat(s,a),2))[0],r=o[1];return{labelCenterX:s,labelCenterY:a,iconWidth:t=(o=[Number.parseInt(t.w,10),Number.parseInt(t.h,10)])[0],iconHeight:o=o[1],deltaLonPerMeter:e,deltaLatPerMeter:r,scaleFactor:Jt.getScaleFactorForRectInSpace(n,i,t,o),effectiveRotation:l}}},{key:"getTransformedIconPointThatFitsInLabelArea",value:function(t,e){var n=(c=v(t,2))[0],i=c[1];if(void 0===n||void 0===i||null===n||null===i)return[];var r=e.labelCenterX,o=e.labelCenterY,s=e.iconWidth,a=e.iconHeight,l=e.deltaLonPerMeter,c=(t=e.deltaLatPerMeter,e.scaleFactor);e=e.effectiveRotation,n=n,i=i;return n-=+s/2,i-=+a/2,i*=-1,l=n*=c*l,t=i*=c*t,n=l*Math.cos(e)+t*Math.sin(e),i=t*Math.cos(e)-l*Math.sin(e),[n+=r,i+=o]}},{key:"getWebGLSuitableCoordinatesOfIconSubGeom",value:function(t){var e,n=t.st,i=t.gt,r=t.shp,o=[];if(2!==n||!r||!i)return o;switch(i){case 2:r.forEach((function(t){var n=v(t,3),i=(t=n[0],n[1]),r=n[2];switch(t){case 0:(e=[]).push([i,r]);break;case 1:e.push([i,r]);break;case 4:o.push(e)}}));break;case 1:r.forEach((function(t){t=(e=v(t,3))[1];var e=e[2];o.push([t,e])}))}return o}},{key:"getLinkedParentChildPolygonArray",value:function(t){var e=[];t.sort((function(t,e){return Math.abs(e.area)-Math.abs(t.area)}));for(var n=0;n<t.length;n+=1){for(var i=null,r=t[n],o=r.points[0],s=n-1;0<=s;--s){var a=t[s];if(r.area*a.area<0&&(Jt.isPointInPolygon(o,a.points)||Jt.isPointOnLineString(o,a.points))){i=a;break}}(i?i.children:e).push(r)}return e}}]),t}(),ee=Object.freeze({TEXT:"",ICON:"icon:",IMAGE:"icon:"}),ne=Object.freeze({VALUE:"<value>",SHORT:"<short>",LONG:"<long>",FULL:"<full>"}),ie=Object.freeze({NONE:0,TEXT:1,ICON:2,IMAGE:3}),re=Kt.EVENT_NAME,oe=["resetBaseMetaFileRules_","updateOverridableComponents"],se=function(){function t(e,n,r){if(i(this,t),!e)throw new Error("one should not instantiate object of this class without apt payload");var o=function(t){var e=[];return oe.forEach((function(n){t[n]||e.push(n)})),0<e.length?e:null}(this);if(o)throw new Error("function definition missing in the implementation ".concat(o.join()));this.metaFileIdentifier=n,this.metaInformation_=r,this.basedata_=l({},e),this.baseOverrides_=[],this.customOverrides_=[],this.resetBaseMetaFileRules_()}return o(t,[{key:"applyOverride",value:function(t,e,n){var i=!(1<arguments.length&&void 0!==e)||e;e=2<arguments.length&&void 0!==n&&n;t&&(e||(i?this.customOverrides_:this.baseOverrides_).push(t),this.updateOverridableComponents(t),n=this.getMetaInformation(),!e&&n&&n.config.emitEventOnOverrideUpdate&&(t={applyOverride:!0,metaFileIdentifier:this.metaFileIdentifier,isCustomOverride:i,metaInformation:n,overrideJson:t},Kt.emit(re.META_DATA_MODEL_UPDATED,t)))}},{key:"undoOverride",value:function(){var t,e,n=this;0!==this.customOverrides_.length&&(e=this.customOverrides_.pop(),this.resetBaseMetaFileRules_(),this.baseOverrides_.forEach((function(t){return n.applyOverride(t,!1,!0)})),this.customOverrides_.forEach((function(t){return n.applyOverride(t,!0,!0)})),(t=this.getMetaInformation())&&t.config.emitEventOnOverrideUpdate&&(e={metaFileIdentifier:this.metaFileIdentifier,undoOverride:!0,metaInformation:t,overrideJson:e},Kt.emit(re.META_DATA_MODEL_UPDATED,e)))}},{key:"getMetaInformation",value:function(){return this.metaInformation_}},{key:"basedata_",get:function(){return this.basedata__},set:function(t){this.basedata__||(this.basedata__=t)}}]),t}(),ae=kt.PRESETS,le=function(){c(e,se);var t=g(e);function e(n,r){return i(this,e),t.call(this,n,ae,r)}return o(e,[{key:"resetBaseMetaFileRules_",value:function(){this.property_trees=null,this.named_groups=null,this.named_keys=null,this.updateOverridableComponents(this.basedata_)}},{key:"updateOverridableComponents",value:function(t){this.property_trees=t.property_trees,this.named_groups=t.named_groups,this.named_keys=t.named_keys}},{key:"getPropertyTree",value:function(t){var e,n=this,i=(t=this.property_trees[t],[]);return t.forEach((function(t){switch(t.input){case"named_group":e=n.getNamedGroup(n.getKeyKey(t)),i=[].concat(y(i),y(e));break;case"named_key":var r;(e=n.getKeyName(t))?((r=n.getNamedKey(e)).k=n.getKeyKey(t),r.name=e,i.push(r)):i.push(n.getNamedKey(n.getKeyKey(t)));break;default:i.push(t)}}),this),i}},{key:"getNamedGroup",value:function(t){return this.named_groups[t]}},{key:"getNamedKey",value:function(t){return this.named_keys[t]}}],[{key:"getMetaFileIdentifier",value:function(){return ae}}]),e}(),ce=kt.SDK_STRINGS,ue=function(){c(e,se);var t=g(e);function e(n,r){return i(this,e),t.call(this,n,ce,r)}return o(e,[{key:"resetBaseMetaFileRules_",value:function(){this.stringsTable={},this.updateOverridableComponents(this.basedata_)}},{key:"updateOverridableComponents",value:function(t){t&&this.updateTranslationsStringMap(t.translations)}},{key:"updateTranslationsStringMap",value:function(t){var e=this;t&&Object.keys(t).forEach((function(n){e.addToStringsTable(n,t[n])}),this)}},{key:"addToStringsTable",value:function(t,e){this.stringsTable[t]=e}},{key:"translate",value:function(t,e){var n,i=e;return!this.stringsTable||(n=this.stringsTable[t])&&(i=n.en||n.en||(0<(t=Object.keys(n)).length?n[t.pop()]:e)),i}}],[{key:"getMetaFileIdentifier",value:function(){return ce}}]),e}(),he=kt.THEME,fe=function(){c(e,se);var t=g(e);function e(n,r){return i(this,e),t.call(this,n,he,r)}return o(e,[{key:"resetBaseMetaFileRules_",value:function(){var t=this.basedata_;this.ft=t.ft,this.name=t.nm,this.iurl=t.iurl,this.styleMap={},this.iconInfoMap={},this.labelStyleMap={},this.markerMap={},this.updateOverridableComponents(t)}},{key:"updateOverridableComponents",value:function(t){t&&(this.updateStyleMap(t.s),this.updateIconInfoMap(t.i,t.iurl),this.updateLabelStyleMap(t.l),this.updateMarkerMap(t.m))}},{key:"updateStyleMap",value:function(t){this.styleMap=l(l({},this.styleMap),t)}},{key:"updateIconInfoMap",value:function(t,e){var n=this;t&&Object.keys(t).forEach((function(i){var r=t[i],o=e||n.iurl;o&&r.rurl&&(r.url=o+r.rurl),n.iconInfoMap[i]=r}),this)}},{key:"updateLabelStyleMap",value:function(t){this.labelStyleMap=l(l({},this.labelStyleMap),t)}},{key:"updateMarkerMap",value:function(t){this.markerMap=l(l({},this.markerMap),t)}},{key:"getStyleMap",value:function(){return this.styleMap}},{key:"getGeometryStyle",value:function(t){return this.styleMap?this.styleMap[t]:null}},{key:"getGeometryDefaultStyle",value:function(){return this.styleMap?this.styleMap.Object:null}},{key:"getLabelStyle",value:function(t){return this.labelStyleMap?this.labelStyleMap[t]:null}},{key:"getLabelDefaultStyle",value:function(){return this.labelStyleMap?this.labelStyleMap.default:null}},{key:"getMarker",value:function(t){return this.markerMap&&t?this.markerMap[t]:null}},{key:"getIconInfo",value:function(t){return this.iconInfoMap&&t?this.iconInfoMap[t]:null}}],[{key:"getMetaFileIdentifier",value:function(){return he}}]),e}(),pe=function(){function t(){i(this,t)}return o(t,null,[{key:"createShortAddress",value:function(t){return t&&Array.isArray(t)?t[1]:null}},{key:"createLongAddress",value:function(t){return t&&Array.isArray(t)?t[0]+" "+t[1]:null}},{key:"createFullAddress",value:function(t){return t&&Array.isArray(t)?(3===t.length?t[2]+" ":"")+(t[0]+" ")+t[1]:null}}]),t}(),de=kt.THEME_MAP,ge=function(){c(e,se);var t=g(e);function e(n,r){return i(this,e),t.call(this,n,de,r)}return o(e,[{key:"resetBaseMetaFileRules_",value:function(){var t=this.basedata_;this.ft=t.ft,this.styleTreeList=[],this.labelTreeList=[],this.updateOverridableComponents(t)}},{key:"updateOverridableComponents",value:function(t){this.updateLabelTreeList(t.label),this.updateStyleTreeList(t.style)}},{key:"updateLabelTreeList",value:function(t){t&&Yt(this.labelTreeList,t)}},{key:"updateStyleTreeList",value:function(t){t&&Yt(this.styleTreeList,t)}}],[{key:"getMetaFileIdentifier",value:function(){return de}},{key:"extractThemeMapPayload",value:function(t){return{labelType:t.lt,labelRef:t.r,styleName:t.n}}},{key:"getGeomStyleLookupTag",value:function(t,e){return(t=t?t.styleName:null)===ne.VALUE?e:t}},{key:"getLabelRefConstructed",value:function(t,e,n){var i=t;switch(t){case ne.VALUE:i=n;break;case ne.SHORT:i=pe.createShortAddress(e);break;case ne.LONG:i=pe.createLongAddress(e);break;case ne.FULL:i=pe.createFullAddress(e)}return i}},{key:"getLabelInfoConstructed",value:function(t,e,n,i){var r={lt:t,entry:n};switch(t){case ie.NONE:break;case ie.TEXT:n.trans?r.ar=e:r.r=e;break;case ie.ICON:r.iconIdentifier=e,i?r=l(l({},i),r):r.error=!0;break;case ie.IMAGE:r.url=e;break;default:r=null}return r}}]),e}(),me=kt.THEME,ve=kt.THEME_MAP,ye=kt.PRESETS,be=kt.SDK_STRINGS,_e=function(){function t(){i(this,t),this.config=Object.seal({emitEventOnOverrideUpdate:!0}),this.iconCache={},this.imageCache={},this.releaseSettings_={}}return o(t,[{key:"instantiateMetaFileAccessor_",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];switch(t){case me:this[me]=p(fe,n.concat([this]));break;case ve:this[ve]=p(ge,n.concat([this]));break;case ye:this[ye]=p(le,n.concat([this]));break;case be:this[be]=p(ue,n.concat([this]));break;default:return null}return this[t]}},{key:"applyOverride",value:function(t,e){this[t]&&this[t].applyOverride(e)}},{key:"undoOverride",value:function(t){this[t]&&this[t].undoOverride()}},{key:"getTheme",value:function(){return this[me]||{}}},{key:"getThemeMap",value:function(){return this[ve]||{}}},{key:"getPresets",value:function(){return this[ye]||{}}},{key:"getStrings",value:function(){return this[be]||{}}},{key:"getIcon",value:function(t){return t&&t.iconIdentifier?this.iconCache[t.iconIdentifier]:null}},{key:"getImage",value:function(t){return this.imageCache[t]}},{key:"extractGeomStyle",value:function(t){var e=t.valueEntry;t=t.value,e=ge.extractThemeMapPayload(e),t=ge.getGeomStyleLookupTag(e,t);return this.getTheme()?this.getTheme().getGeometryStyle(t):null}},{key:"getStyle",value:function(t,e){var n=this,i=1<arguments.length&&void 0!==e&&e,r=this.getThemeMap().styleTreeList,o=this.processValueEntry_.bind(this);if(null===r||0===r.length||!this.getTheme())return null;e=this.getTheme().getGeometryDefaultStyle();var s=this.extractGeomStyle.bind(this),a=t.getAddress(),l=t.getEntities(),c=null,u=null,h={};return l&&0<l.length?r.find((function(e){return u=l.find((function(n){return c=o({geometry:t,entity:n,address:a,valueEntry:e,value:void 0,returnValueFunction:s,valueEntryIdentified:h})}),n)}),this):r.find((function(e){return c=o({geometry:t,entity:u,address:a,valueEntry:e,value:void 0,returnValueFunction:s,valueEntryIdentified:h})}),this),c||i||(c=e),c?JSON.parse(JSON.stringify(c)):void 0}},{key:"getLabelValue",value:function(t){var e=t.address,n=t.valueEntry,i=t.value,r=(t=(r=ge.extractThemeMapPayload(n)).labelType,r.labelRef);e=ge.getLabelRefConstructed(r,e,i),i=t===ie.ICON?this.getTheme().getIconInfo(e):null;return(i=ge.getLabelInfoConstructed(t,e,n,i))?JSON.parse(JSON.stringify(i)):void 0}},{key:"convertLabelToText",value:function(t){if(t){var e,n=t.r,i=t.ar;t=t.lt;if(n)return n;if(i){switch(t){case ie.TEXT:e=ee.TEXT+i;break;case ie.ICON:e=ee.ICON+i;break;case ie.IMAGE:e=ee.IMAGE+i;break;default:return null}return this.getStrings().translate(e,i)}}return null}},{key:"getLabelStyle",value:function(t,e){var n,i=1<arguments.length&&void 0!==e&&e,r=this.getTheme(),o=r.getLabelDefaultStyle(),s={};return t&&(n=t.t,e=t.zmin,t=t.l,n&&(s.t=n),e&&(s.zmin=e),(t=r.getLabelStyle(t))&&(s=l(l({},s),t))),s||i||(s=o),s}},{key:"getLabelConstantsSet_",value:function(){var t=this.getThemeMap().labelTreeList,e=this.processValueEntry_.bind(this);return null==t||0===t.length?{isInsufficientInput:!0}:{labelTreeList:t,returnValueFunction:this.getLabelValue.bind(this),processValueEntry:e}}},{key:"getGeometryLabelInfo",value:function(t){var e=this,n=this.getLabelConstantsSet_(),i=n.isInsufficientInput,r=n.labelTreeList,o=n.returnValueFunction,s=n.processValueEntry;if(i)return null;var a=t.getAddress(),l=null;return r.find((function(n){return(l=s({geometry:t,address:a,valueEntry:n,returnValueFunction:o}))&&(l.r=e.convertLabelToText(l)),l})),l?JSON.parse(JSON.stringify(l)):void 0}},{key:"getEntityLabelInfo",value:function(t){var e=this.getLabelConstantsSet_(),n=e.isInsufficientInput,i=e.labelTreeList,r=e.returnValueFunction,o=e.processValueEntry;if(n)return null;var s=null;return i.find((function(e){return s=o({entity:t,valueEntry:e,returnValueFunction:r})})),s?JSON.parse(JSON.stringify(s)):void 0}},{key:"getLabelInfo",value:function(t){var e=this,n=this.getLabelConstantsSet_(),i=n.isInsufficientInput,r=n.labelTreeList,o=n.returnValueFunction,s=n.processValueEntry;if(i)return null;var a,l,c=t.getAddress(),u=t.getEntities(),h=null;return u&&1<u.length?(a=null,r.find((function(n){var i,r=null,l=!1;return u.forEach((function(t){i=s({entity:t,valueEntry:n,returnValueFunction:o}),(r=e.convertLabelToText(i))&&0<r.length&&(a?a+=", "+r:(a=r,l=!0))}),e),l||(i=s({geometry:t,address:c,valueEntry:n,returnValueFunction:o}),(r=e.convertLabelToText(i))&&0<r.length&&(a?a+=", "+r:a=r,l=!0)),l&&(h={lt:e.TEXT_LABEL_TYPE,r:a}),l}),this)):(l=u?u[0]:null,r.find((function(n){return(h=s({geometry:t,entity:l,address:c,valueEntry:n,returnValueFunction:o}))&&(h.r=e.convertLabelToText(h)),h}),this)),h?JSON.parse(JSON.stringify(h)):void 0}},{key:"processValueEntry_",value:function(t){var e=this,n=t.geometry,i=t.entity,r=t.address,o=t.valueEntry,s=t.value,a=t.returnValueFunction,l=null;return void 0!==(t=o.ks)&&t.find((function(t){var o;if(t.gk&&n?(s=t.gk,o=n.properties[s]):t.ek&&i?(s=t.ek,o=i.properties[s]):t.ak&&r&&(s=t.ak)===r[0]&&(o=v(r,2)[1]),void 0!==o){if(t.v){var s=t.v[o];if(void 0!==s&&void 0!==(l=e.processValueEntry_({geometry:n,entity:i,address:r,valueEntry:s,value:o,returnValueFunction:a})))return!0}if(void 0!==(l=a({geometry:n,entity:i,address:r,valueEntry:t,value:o})))return!0}return!1}),this)?l:a?a({geometry:n,entity:i,address:r,valueEntry:o,value:s}):l}},{key:"setIcon",value:function(t,e){t&&e&&(this.iconCache[t]=e)}},{key:"setReleaseSettings_",value:function(t){this.releaseSettings_=t}}]),t}(),we=(Pe={NODES_LB:"mfs.micello.com",US_1:"mfs-us-1.micello.com",US_2:"mfs-us-2.micello.com",AU_1:"mfs-au-1.micello.com",AU_2:"mfs-au-2.micello.com",EU_1:"mfs-eu-1.micello.com",SG_1:"mfs-sg-1.micello.com",HUB:"mfs-hub-master.micello.com",PREVIEW:"preview.micello.com/mfs",FACTORY:"factory-mfs.micello.com",CIT:"integration.mfs.hub.venues.ext.here.com",STG:"alpha.mfs.hub.venues.ext.here.com"}).HUB,xe=Object.freeze({MFILE:"MFILE",MVAR:"MVAR",MPATH:"MPATH",MKEY:"MKEY",MPATTERN:"MPATTERN",MPACKAGE:"MPACKAGE"}),ke=(Object.freeze((s(ke={},xe.MFILE,"/mfile"),s(ke,xe.MVAR,"/mvar"),s(ke,xe.MPATH,"/mpath"),s(ke,xe.MKEY,"/mkey"),s(ke,xe.MPATTERN,"/mpattern"),s(ke,xe.MPACKAGE,"/mpackage"),ke)),Object.freeze(Object.values(Pe).reduce((function(t,e){return l(l({},t),{},s({},e,{key:null}))}),{}))),Se=Object.freeze({apiKey:null,dataApiType:"MFS",fileHost:we,queryParamMap:ke}),Ae=Tt.GEO_JSON,Ee=(Pe=Ct[Ae]).COMMUNITY_MAP,Te=Pe.COMMUNITY_ENTITY,Ce=Pe.GEOJSON_LEVEL_GEOMETRY,Me=function(){function t(e){i(this,t),this.baseApi=e}return o(t,[{key:"getBaseAPI",value:function(){return this.baseApi}},{key:"getCommunityMap",value:function(t,e,n){return this.baseApi.fetch(this.baseApi.getMapProductFileUrl(t,Ae,Ee,null,e,n))}},{key:"getCommunityEntity",value:function(t,e,n){return this.baseApi.fetch(this.baseApi.getMapProductFileUrl(t,Ae,Te,null,e,n))}},{key:"getGeoJsonLevelGeometry",value:function(t,e,n,i){return e="/".concat(e),this.baseApi.fetch(this.baseApi.getMapProductFileUrl(t,Ae,Ce,e,n,i))}}]),t}(),Le=Object.freeze({MAP:"MAP",META:"META",CUSTOMER:"CUSTOMER"}),Re=Object.freeze((s(ke={},Le.MAP,"/map"),s(ke,Le.META,"/meta"),s(ke,Le.CUSTOMER,"/customer"),ke)),Oe=Object.freeze({METACONFIG:"METACONFIG",OVERRIDES:"OVERRIDES",DATAHOSTS:"DATAHOSTS"}),Ie=Object.freeze((s(Ct={},Oe.METACONFIG,"/metaConfig"),s(Ct,Oe.OVERRIDES,"/overrides"),s(Ct,Oe.DATAHOSTS,"/map/dataHosts"),Ct)),Pe=Object.freeze({V4:"V4",V5:"V5"}),Ne=(Object.freeze((s(ke={},Pe.V4,"/v4"),s(ke,Pe.V5,"/v5"),ke)),Object.freeze((s(Ct={},kt.THEME,"/theme/v5"),s(Ct,kt.THEME_MAP,"/thememap/v5"),s(Ct,kt.PRESETS,"/presets/v5"),s(Ct,kt.SDK_STRINGS,"/strings/v5"),s(Ct,kt.ICON_FILE,"/iconfile/v5"),s(Ct,kt.INPUT_COLORS,"/miceditor/inputcolors"),s(Ct,kt.BASE_MAP_INFO,"/miceditor/basemapinfo"),s(Ct,kt.CONFIG_PROFILE,"/miceditor/configprofile"),s(Ct,kt.NAV_THEME,"/navtheme/v5"),s(Ct,kt.NAV_NAME_THEME,"/navtheme/v5"),s(Ct,kt.NAV_PROP_MAP,"/navpropmap/v5"),s(Ct,kt.NAV_STRINGS,"/strings/v5/nav"),s(Ct,kt.NAV_THEME_MAP,"/navthememap/v5"),s(Ct,kt.NAV_NAME_THEME_MAP,"/navthememap/v5"),s(Ct,kt.V4_THEME_FAMILY,"/theme/v4"),s(Ct,kt.V4_MAPTYPE_THEME,"/theme/v4"),s(Ct,kt.ICON,"/theme/icon/v5"),s(Ct,kt.MARKER,"/theme/marker"),s(Ct,kt.PERMISSIONS,"/auth/stringroles"),s(Ct,kt.NAICS_ARRAY,"/naics/2012/array"),s(Ct,kt.NAICS_MAP,"/naics/2012/map"),Ct))),De=Object.freeze((s(Pe={},Tt.GEO_JSON,"/geojson"),s(Pe,Tt.V5_MAP,"/v5_map"),s(Pe,Tt.V5_NAV,"/v5_nav"),s(Pe,Tt.V5_INFO,"/v5_info"),s(Pe,Tt.KML,"/kml"),s(Pe,Tt.SVG,"/svg"),s(Pe,Tt.PNG,"/png"),Pe)),je=Object.freeze((s(ke={},Tt.V5_MAP,{COMMUNITY_MAP:"/com-map",COMMUNITY_DIRECTORY:"/com-dir",COMMUNITY_DETAIL:"/com-detail",LEVEL_GEOMETRY:"/level-geom",DRAWING_ENTITY:"/drawing-entity"}),s(ke,Tt.GEO_JSON,{COMMUNITY_MAP:"/com-map",COMMUNITY_ENTITY:"/com-entity",PATH_LEVEL_GEOMETRY:"/path-level-geom",GEOJSON_LEVEL_GEOMETRY:"/geojson-level-geom"}),s(ke,Tt.V5_NAV,{JSON_NAV:"/json",BINARY_NAV:"/bin",JSON_ENHANCED_NAV:"/json-enh",BINARY_ENHANCED_NAV:"/bin-enh"}),s(ke,Tt.V5_NAV,{JSON_NAV:"/json",BINARY_NAV:"/bin",JSON_ENHANCED_NAV:"/json-enh",BINARY_ENHANCED_NAV:"/bin-enh"}),s(ke,Tt.V5_INFO,{GEOMETRY_INFO:"/geom-info"}),s(ke,Tt.SVG,{PLAIN:"/plain",PRETTY:"/pretty",PRETTY_HORIZONTAL_LABEL:"/pretty"}),s(ke,Tt.KML,{RASTER:"/raster",RASTER_HORIZONTAL:"/raster",VECTOR:"/vector",VECTOR_HORIZONTAL:"/vector"}),s(ke,Tt.PNG,{LOW_RESOLUTION:"/lo-res",HIGH_RESOLUTION:"/high-res",LOW_RESOLUTION_GEO:"/lo-res-geo",HIGH_RESOLUTION_GEO:"/high-res-geo",LOW_RESOLUTION_HORIZONTAL:"/lo-res",HIGH_RESOLUTION_HORIZONTAL:"/high-res",LOW_RESOLUTION_HORIZONTAL_GEO:"/lo-res-geo",HIGH_RESOLUTION_HORIZONTAL_GEO:"/high-res-geo"}),ke)),ze=Object.freeze({venueId:null,language:"-",mapVersion:"-",entityVersion:"-",fileVersion:null,themeName:Et[kt.THEME]}),$e=Object.freeze({MFILE:"MFILE",MPATH:"MPATH",MVAR:"MVAR"}),Fe=Object.freeze((s(Ct={},$e.MFILE,"/mfile"),s(Ct,$e.MPATH,"/mpath"),s(Ct,$e.MVAR,"/mvar"),Ct)),Be=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.productAPI={},this.hostConfig_=e,this.isHostCustom=!1}return o(t,[{key:"getBaseUrl",value:function(t){return t=!(0<arguments.length&&void 0!==t)||t,(t="".concat(this.hostConfig_.fileHost).concat(t?"/ms/v1":"")).startsWith("https://")||t.startsWith("http://")||(t="https://".concat(t)),t}},{key:"getFileServiceBaseUrl",value:function(t){if(t=0<arguments.length&&void 0!==t?t:$e.MFILE,$e[t])return"".concat(this.getBaseUrl()).concat(Fe[t])}},{key:"getGlobalMetaBaseUrl",value:function(t){var e=Re[Le.META];t=this.getFileServiceBaseUrl(t);return"".concat(t).concat(e)}},{key:"getVenueMapBaseUrl",value:function(t){var e=this.getFileServiceBaseUrl(t);t=Re[Le.MAP];return"".concat(e).concat(t)}},{key:"getGlobalMetaFileUrl",value:function(t,e,n,i){e=1<arguments.length&&void 0!==e?e:Et[t];var r=2<arguments.length?n:void 0,o=(i=3<arguments.length?i:void 0,this.getGlobalMetaBaseUrl(i)),s=Ne[t],a=null===e||""===e?"":"/".concat(e);switch(t){case kt.THEME:case kt.THEME_MAP:case kt.PRESETS:case kt.SDK_STRINGS:case kt.ICON_FILE:case kt.INPUT_COLORS:case kt.BASE_MAP_INFO:case kt.CONFIG_PROFILE:case kt.NAV_THEME:case kt.NAV_NAME_THEME:case kt.NAV_PROP_MAP:case kt.NAV_STRINGS:case kt.NAV_THEME_MAP:case kt.NAV_NAME_THEME_MAP:case kt.V4_THEME_FAMILY:o+="".concat(s).concat(a);break;case kt.ICON:case kt.MARKER:case kt.V4_MAPTYPE_THEME:o+=0<a.length&&r&&0<r.length?"".concat(s).concat(a,"/").concat(r):"".concat(s);break;case kt.PERMISSIONS:case kt.NAICS_ARRAY:case kt.NAICS_MAP:o+="".concat(s)}return o}},{key:"getGeoJsonApi",value:function(){return this.productAPI[Tt.GEO_JSON]||(this.productAPI[Tt.GEO_JSON]=new Me(this)),this.productAPI[Tt.GEO_JSON]}},{key:"getMapProductUrlPath",value:function(t,e,n,i){return e=!(1<arguments.length&&void 0!==e)||e,n=2<arguments.length?n:void 0,i=3<arguments.length?i:void 0,i=this.getVersionedVenueUrl(t,e,i),n&&(i+="".concat(De[n])),i}},{key:"getMapProductFileUrl",value:function(t,e,n,i,r,o){var s=je[Tt[e]][n];r=this.getMapProductUrlPath(t,!0,e,r);return n&&(r+="".concat(s)),i&&(r+="".concat(i)),!o&&0!==o||(r+="/fv/".concat(o)),r}},{key:"getMetaConfigUrl",value:function(t,e){var n=Ie[Oe.METACONFIG];return(e=this.getVersionedVenueUrl(t,!0,e))+"".concat(n)}},{key:"getMetaFileUrl",value:function(t,e,i){var r;if(i=2<arguments.length&&void 0!==i?i:Et[e],t)return"object"===n(t[e=St[e]])&&t[e][i]?r=new URL(t[e][i]):"string"==typeof t[e]&&(r=new URL(t[e])),r?this.isHostCustom?"".concat(this.getBaseUrl(!1)).concat(r.pathname):r.toString():null}},{key:"getMetaOverrideFileUrls",value:function(t,e,n,i){return i=3<arguments.length&&void 0!==i?i:Et[n],e&&e.communityOverrides&&e.communityOverrides[t]?(n=At[n],n=e.communityOverrides[t][n]||{},Array.isArray(n)?n:n[i]||[]):[]}},{key:"getVersionedVenueUrl",value:function(e,n,i){return i=2<arguments.length?i:void 0,(i=1<arguments.length&&void 0!==n&&!n?"":this.getFileServiceBaseUrl(i))+t.getVersionedVenuePathSegment(e)}},{key:"getNormalizedUrl",value:function(t){if(this.isHostCustom){var e=new URL(t);return"".concat(this.getBaseUrl(!1)).concat(e.pathname)}return t}},{key:"getMetaConfig",value:function(t){var e=this;if(!t)return null;var i={venueId:t.cid};Object.values(St).forEach((function(e){t[e]&&("string"==typeof t[e]?i[e]=t[e]:(i[e]={},Object.keys(t[e]).forEach((function(n){i[e][n]=t[e][n]}))))}));var r={},o=t.communityOverrides[i.venueId];return Object.keys(o).forEach((function(t){var i;Array.isArray(o[t])?r[t]=o[t].map((function(t){return"".concat(e.getFileServiceBaseUrl()).concat(t)})):"object"===n(o[t])&&(i={},Object.keys(o[t]).forEach((function(n){Array.isArray(o[t][n])&&(i[n]=o[t][n].map((function(t){return"".concat(e.getFileServiceBaseUrl()).concat(t)})))})),r[t]=i)})),i.communityOverrides=s({},i.venueId,r),l(l({},t),i)}}],[{key:"getVersionedVenuePathSegment",value:function(t,e,n){var i=1<arguments.length&&void 0!==e?e:"-";e=2<arguments.length&&void 0!==n?n:"-",n=Re[Le.MAP];return"".concat(n,"/").concat(t,"/mv/").concat(i,"/ev/").concat(e)}},{key:"getVenueConfig",value:function(t){return(t=l(l({},ze),t)).mapVersion=Number(t.mapVersion)||"-",t.entityVersion=Number(t.entityVersion)||"-",t.fileVersion=Number(t.fileVersion)||null,t.venueId=Number(t.venueId),t}}]),t}(),He=function(){c(e,Be);var t=g(e);function e(n){var r;return i(this,e),(r=t.call(this,n)).setAndUpdateHostConfig_(n),n.fileHost&&(r.isHostCustom=!0),r}return o(e,[{key:"setAndUpdateHostConfig_",value:function(t){var e=t.apiKey,n=(t=t.fileHost,{});Object.keys(Se.queryParamMap).forEach((function(t){n[t]={key:e}})),t&&(n[t]={key:e}),this.hostConfig_={apiKey:e,dataApiType:"MFS",fileHost:t||we,queryParamMap:l(l({},n),Se.QUERY_PARAM_MAP_DEFAULT)}}},{key:"addServer",value:function(t,e){t=-1<t.indexOf("://")?t.split("://")[1]:t;var n=this.hostConfig_.queryParamMap[t]?l(l({},this.hostConfig_.queryParamMap[t]),e):e;Object.keys(n).forEach((function(t){null!==n[t]&&void 0!==n[t]&&""!==n[t]||delete n[t]})),this.hostConfig_.queryParamMap[t]=n}},{key:"appendQueryParams",value:function(t){var n=this.hostConfig_.queryParamMap,i=-1<t.indexOf("://")?t.split("://")[1]:t;n=n[v(Object.keys(n).filter((function(t){return i.startsWith(t)})).sort((function(t,e){return e.length-t.length})),1)[0]];return e.appendParamList(t,n)}},{key:"fetch",value:function(t,e,n,i){return i=3<arguments.length&&void 0!==i&&i,t.startsWith("http://")&&(t=t.replace(/http:\/\//gm,"https://")),i||(t=this.appendQueryParams(t)),Qt.get(t,e,n)}},{key:"getMapProductFileUrl",value:function(t,n,i,r,o,s){return m(u(e.prototype),"getMapProductFileUrl",this).call(this,t,n,i,r,o,s)}},{key:"getGlobalMetaFileUrl",value:function(t,n,i,r,o){return o=4<arguments.length&&void 0!==o?o:0,i=m(u(e.prototype),"getGlobalMetaFileUrl",this).call(this,t,n,i,r),r&&r===xe.MPATH&&(i=e.appendParamList(i,{fvhistory:o})),i}}],[{key:"appendParamList",value:function(t,e){if(!e||"object"!==n(e))return t;var i=t.split("?"),r=v(i,2)[1],o=void 0===r?"":r;return Object.keys(e).filter((function(t){return-1===o.indexOf("".concat(t,"="))})).forEach((function(t){o+="&".concat(t,"=").concat(e[t])})),0<(o=o.startsWith("&")?o.substr(1):o).length?"".concat(i[0],"?").concat(o):t}}]),e}(),Ue=function(){function t(){i(this,t)}return o(t,null,[{key:"isPointOnGeoJSONLineString",value:function(t,e){var n=!1;if(e&&1<e.length)for(var i,r,o=1;o<e.length;o+=1)if(i=e[o-1],r=e[o],Jt.isPointOnLineSegment(t,i,r)){n=!0;break}return n}},{key:"isPointOnGeoJSONMultiLineString",value:function(e,n){for(var i=!1,r=0;r<n.length;r+=1)if(t.isPointOnGeoJSONLineString(e,n[r])){i=!0;break}return i}},{key:"isPointInsideGeoJSONPolygon",value:function(t,e){var n=!1;if(Jt.isPointInPolygon(t,e[0])&&(n=!0),n)for(var i=1;i<e.length;i+=1)if(Jt.isPointInPolygon(t,e[i])){n=!1;break}return n}},{key:"isPointInsideGeoJSONMultiPolygon",value:function(e,n){for(var i=n.length,r=0;r<i;r+=1)if(t.isPointInsideGeoJSONPolygon(e,n[r]))return!0;return!1}},{key:"convertIntAddressToGeometryAddressListFormat",value:function(t){if(t&&"string"==typeof t){var e=[];return t.split(" ").forEach((function(t){e.push.apply(e,y(t.split(" ")))})),e}return null}},{key:"getGeometriesByLonLat",value:function(t,e,n){for(var i=2<arguments.length&&void 0!==n&&n,r=[],o=e.filter((function(e){return Jt.isPointInBoundingBox(t,e.getBoundingBox())})),s=0;s<o.length;s+=1){var a=o[s];if(a.isPointInsideGeometry(t,!0)&&(r.push(a),!i))break}return r.sort((function(t,e){return e.getZIndex()-t.getZIndex()}))}}]),t}(),Ge=function(){function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;i(this,t),this.venueModel=r,this.id=e,this.properties=l({geometry:[],int_address:[]},n)}return o(t,[{key:"getId",value:function(){return this.id}},{key:"getGeometries",value:function(){var t=this;return this.properties.geometry.filter((function(t){return v(t,2)[1]})).map((function(e){return e=v(e,1)[0],t.venueModel.getGeometryById(e)}))}},{key:"getInternalAddress",value:function(){return this.properties.int_address||[]}},{key:"getName",value:function(){return(Array.isArray(this.properties.name)?this.properties.name[0]:this.properties.name)||""}},{key:"getProperties",value:function(){return this.properties}},{key:"getLabelInfo",value:function(){return this.venueModel.metaInformation_.getEntityLabelInfo(this)}}]),t}(),Ve=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0,r=2<arguments.length?arguments[2]:void 0;i(this,t),this.id=e.id,this.properties=e.properties||{},this.labelArea=e.label_area||[],this.geometry=e.geometry||{},this.location=e.location||{},this.level=n,this.zIndex=r,this.state_={isHighlighted:!1,highlightedStyle:{}}}return o(t,[{key:"getId",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getAddress",value:function(){return Ue.convertIntAddressToGeometryAddressListFormat(this.getInternalAddress())}},{key:"getInternalAddress",value:function(){return this.properties.int_address||""}},{key:"getCenter",value:function(){return this.location.coordinates||[]}},{key:"getCoordinates",value:function(){return this.geometry.coordinates||[]}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getStyle",value:function(){return this.getMetaInformation_().getStyle(this)}},{key:"getIcon",value:function(){return this.getMetaInformation_().getIcon(this.getLabelInfo())}},{key:"getLabelArea",value:function(){return this.labelArea||[]}},{key:"getLabelInfo",value:function(){return this.getMetaInformation_().getLabelInfo(this)}},{key:"getLabelStyle",value:function(){return l({fill:"#333333"},this.getMetaInformation_().getLabelStyle(this.getStyle()))}},{key:"getGeometryLabelInfo",value:function(){return this.getMetaInformation_().getGeometryLabelInfo(this)}},{key:"getEntities",value:function(){var t=this;return(this.properties.entities||[]).map((function(e){return t.level.getDrawing().getVenueModel().getEntityById(e)}))}},{key:"getLevel",value:function(){return this.level}},{key:"getType",value:function(){return this.geometry.type}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"getBoundingBox",value:function(){var t=this.getType(),e=this.getCoordinates(),n=[];switch(t){case mt:n=[e,e];break;case bt:case vt:n=e;break;case _t:case yt:n=e.reduce((function(t,e){return t.concat(e)}),[]);break;case wt:n=e.reduce((function(t,e){return t.concat(e)}),[]).reduce((function(t,e){return t.concat(e)}),[])}return Jt.getBoundingBoxVertices(n)}},{key:"isIcon",value:function(){var t=this.getLabelInfo();return t&&t.lt===ie.ICON}},{key:"isPointInsideGeometry",value:function(t,e){var n,i=1<arguments.length&&void 0!==e&&e,r=!1;switch(this.getType()){case mt:n=this.getLabelArea()&&Jt.getRectangularCoordinatesOfLabelArea(this.getLabelArea()),r=Jt.isPointInPolygon(t,n);break;case bt:break;case vt:r=i&&Ue.isPointOnGeoJSONLineString(t,this.getCoordinates());break;case _t:r=i&&Ue.isPointOnGeoJSONMultiLineString(t,this.getCoordinates());break;case yt:r=Ue.isPointInsideGeoJSONPolygon(t,this.getCoordinates());break;case wt:r=Ue.isPointInsideGeoJSONMultiPolygon(t,this.getCoordinates())}return r}},{key:"highlight",value:function(t,e){t=!(0<arguments.length&&void 0!==t)||t,e=1<arguments.length?e:void 0,this.state_.isHighlighted=t,this.state_.highlightedStyle=t?e:{}}},{key:"isHighlighted",value:function(){return Boolean(this.state_.isHighlighted)}},{key:"getHighlightedStyle",value:function(){return this.state_.highlightedStyle||{}}},{key:"toJSON",value:function(){return l({},this.geometry)}},{key:"getMetaInformation_",value:function(){return this.getLevel()?this.getLevel().getDrawing().getVenueModel().metaInformation_:null}}]),t}(),We=function(){function t(e){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],s=3<arguments.length?arguments[3]:void 0;i(this,t),this.id=e,this.properties=l({},r),this.zIndexCount=0,this.geometries=o.map((function(t){return n.zIndexCount+=1,new Ve(t,n,n.zIndexCount)})),this.drawing=s}return o(t,[{key:"getId",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getDrawing",value:function(){return this.drawing}},{key:"getShortName",value:function(){return this.properties["short name"]||""}},{key:"getZIndex",value:function(){return Number(this.properties.zlevel)}},{key:"getFeatureCollectionArray",value:function(){return this.getGeometries().map((function(t){return t.toJSON()}))}},{key:"getGeometryById",value:function(t){return this.geometries.find((function(e){return e.getId()===t}))}},{key:"getGeometries",value:function(t){return 0<arguments.length&&void 0!==t&&t?this.geometries.sort((function(t,e){return e.getZIndex()-t.getZIndex()})):this.geometries.sort((function(t,e){return t.getZIndex()-e.getZIndex()}))}},{key:"getGeometriesByAddress",value:function(t){return this.geometries.filter((function(e){return e.getInternalAddress()===t}))}},{key:"isMain",value:function(){return Boolean(this.properties.main)}}]),t}(),qe=function(){function t(e){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],a=4<arguments.length?arguments[4]:void 0;i(this,t),this.venueModel=a,this.levels=s.map((function(t){return new We(t.id,t.properties,t.features,n)})),this.id=e,this.properties=r,this.frame_=o}return o(t,[{key:"getId",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"isRoot",value:function(){return Boolean(this.properties.is_root)}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getBoundingBox",value:function(){var t=(n=this.frame_).height,e=n.width,n=n.transform;t=(e=v(Jt.getBoundingBoxVertices([Jt.convertMxMy2LonLat(n,[0,0]),Jt.convertMxMy2LonLat(n,[0,t]),Jt.convertMxMy2LonLat(n,[e,0]),Jt.convertMxMy2LonLat(n,[e,t])]),2))[0];return[(e=e[1])[1],t[0],t[1],e[0]]}},{key:"getCenter",value:function(){var t=this.frame_;if(t)return Jt.convertMxMy2LonLat(t.transform,[t.width/2,t.height/2])}},{key:"getGeometryById",value:function(t,e){return e?e.getGeometryById(t):this.getGeometries().find((function(e){return e.getId()===t}))}},{key:"getGeometries",value:function(){return this.levels.flatMap((function(t){return t.getGeometries()}))}},{key:"getLevelById",value:function(t){return this.levels.find((function(e){return e.getId()===t}))}},{key:"getLevelByZIndex",value:function(t){return this.levels.find((function(e){return e.getZIndex()===t}))}},{key:"getLevels",value:function(){return this.levels}},{key:"getMainLevel",value:function(){return this.levels.find((function(t){return t.isMain()}))}},{key:"getVenueModel",value:function(){return this.venueModel}}]),t}(),Ke=xt.STANDARD,Ye=function(){function t(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new _e;i(this,t),this.metaInformation_=s,this.id=n.id,this.location=n.location||{},this.properties=l({},n.properties),this.drawings=(n.drawings||[]).map((function(t){var n=t.levels.map((function(t){var e=t.id;return o.find((function(t){return t.id===e}))}));return new qe(t.id,t.properties,t.ref_frame,n,e)})),this.entities=(r.entities||[]).map((function(t){return new Ge(t.id,t.properties,e)}))}return o(t,[{key:"getDisplaySettings",value:function(){return this.metaInformation_.releaseSettings_.displayOptions.display||Ke}},{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.properties.name}},{key:"getBoundingBox",value:function(){var t,e=Jt.getBoundingBoxVertices(this.getDrawings().flatMap((function(t){var e=v(t.getBoundingBox(),4);t=e[0];return[[e[1],e[2]],[e[3],t]]})));e=(t=v(e,2))[0];return[(t=t[1])[1],e[0],e[1],t[0]]}},{key:"getCenter",value:function(){return this.location.coordinates}},{key:"getEntityById",value:function(t){return this.entities.find((function(e){return e.id===t}))}},{key:"getGeometryById",value:function(t){return this.getGeometries().find((function(e){return e.getId()===t}))}},{key:"getGeometries",value:function(){return this.getLevels().sort((function(t,e){return t.getZIndex()-e.getZIndex()})).flatMap((function(t){return t.getGeometries()}))}},{key:"getGeometriesByLonLat",value:function(t,e,n){var i=this;n=!(2<arguments.length&&void 0!==n)||n;return 0===(e=(1<arguments.length&&void 0!==e?e:[]).map((function(t){return i.getLevelById(t)}))).length&&(e=this.drawings.filter((function(e){return e=e.getBoundingBox(),Jt.isPointInBoundingBox(t,e)})).flatMap((function(t){return t.getLevels()}))),Ue.getGeometriesByLonLat(t,e.flatMap((function(t){return t.getGeometries(!0)})),n)}},{key:"getDrawingById",value:function(t){return this.drawings.find((function(e){return e.getId()===t}))}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getRootDrawing",value:function(){return this.drawings.find((function(t){return t.isRoot()}))}},{key:"getLevelById",value:function(t){return this.getLevels().find((function(e){return e.getId()===t}))}},{key:"getLevelsByZIndex",value:function(t){var e=0<arguments.length&&void 0!==t?t:0;return this.getLevels().filter((function(t){return Number(t.getZIndex())===Number(e)}))}},{key:"getLevels",value:function(){return this.drawings.flatMap((function(t){return t.getLevels()}))}},{key:"getLevelMapFlattenedByZIndex_",value:function(){return this.getLevels().reduce((function(t,e){var n=e.getZIndex();return(t=t)[n]||(t[n]=[]),t[n].push(e),t}),{})}},{key:"getIconsInformation",value:function(){var t=new Map;return this.getGeometries().filter((function(t){return t.isIcon()})).forEach((function(e){e=e.getLabelInfo(),t.set(e.iconIdentifier,e)})),Array.from(t.values())}}]),t}(),Xe="vfs.venue.maps.api.here.com",Ze=function(){c(e,Be);var t=g(e);function e(n){var r=n.apiKey,o=n.fileHost;n=n.token;return i(this,e),n=t.call(this,{apiKey:r,fileHost:o||Xe,token:n}),o&&(n.isHostCustom=!0),n}return o(e,[{key:"fetch",value:function(t,e,n){var i=(o=this.hostConfig_).apiKey,r=o.token,o=l({method:"GET",headers:{}},e);return(e=t).startsWith("http://")&&(e=e.replace(/http:\/\//gm,"https://")),r?(t="Bearer ",r=r.startsWith(t)?r:"".concat(t).concat(r),o.headers instanceof Headers?o.headers.append("Authorization",r):o.headers.Authorization=r):i&&(e="".concat(e,"?apiKey=").concat(i)),Qt.get(e,o,n)}}]),e}(),Je={isIconsEnabled:!0,isMetaEnabled:!0,metaOptions:{},iconOptions:{}},Qe=Object.keys(St).map((function(t){return{identifier:t,name:void 0,url:void 0}})),tn=function(){function t(e){var n=e.apiKey,r=e.baseUrl,o=e.token;e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];i(this,t),o={apiKey:n,fileHost:r,token:o},this.dataApi_=new(e?He:Ze)(o)}return o(t,[{key:"load",value:function(t,e){var n=this,i=(e=1<arguments.length&&void 0!==e?e:{},(e=l(l({},Je),e)).isIconsEnabled),r=e.isMetaEnabled,o=e.iconOptions,s=e.metaOptions;return Promise.resolve().then((function(){return r?n.getMeta_(t,s).catch((function(t){return Promise.resolve()})):new _e})).then((function(e){return n.getVenue_(t,e)})).then((function(e){if(Kt.emit(qt.VENUE_MAP_DATA_LOADED,{data:e}),i){var r=e.getIconsInformation();return n.getIcons_(t,e.metaInformation_,r,o).then((function(){return e}))}return e}))}},{key:"getVenue_",value:function(t,e){var n=this;return this.getCommunityMap_(t).then((function(e){return Promise.all([Promise.resolve(e),n.getCommunityEntity_(t),n.getLevels_(t,e.drawings.flatMap((function(t){return t.levels.map((function(t){return t.id}))})))])})).then((function(t){var n=(i=v(t,3))[0],i=(t=i[1],i[2]);return new Ye(n,t,void 0===i?[]:i,e)}))}},{key:"getCommunityMap_",value:function(t){return this.dataApi_.getGeoJsonApi().getCommunityMap(t).catch((function(e){return Promise.reject(new Error("Community map load failed for venue id ".concat(t,' with error "\n ').concat(e.message,'"')))}))}},{key:"getCommunityEntity_",value:function(t){return this.dataApi_.getGeoJsonApi().getCommunityEntity(t).catch((function(e){return Promise.reject(new Error("Community Entity failed for venue id ".concat(t,' with error "').concat(e.message,'"')))}))}},{key:"getLevels_",value:function(t,e){var n=this;e=1<arguments.length&&void 0!==e?e:[];return Promise.all(e.map((function(e){return n.dataApi_.getGeoJsonApi().getGeoJsonLevelGeometry(t,e).catch((function(t){return Promise.reject(new Error("Level load failed for level id ".concat(e,' with error: "').concat(t.message,'"')))}))})))}},{key:"getIcon_",value:function(t,e,n,i){var r=2<arguments.length&&void 0!==n?n:{},o=3<arguments.length&&void 0!==i&&i,s=r.iconIdentifier;i=r.url;return s&&i?this.dataApi_.fetch(this.dataApi_.getNormalizedUrl(i)).then((function(t){return t=new te(l(l({},r),t),o),e.setIcon(s,t),t})):Promise.reject(new Error("Issue with icon data, iconIdentifier and url should be available: ".concat(r)))}},{key:"getIcons_",value:function(t,e,n,i){var r=this,o=(n=2<arguments.length&&void 0!==n?n:[],(3<arguments.length&&void 0!==i?i:{}).isMultiObjectToSplit);return Promise.all(n.map((function(n){return r.getIcon_(t,e,n,o).catch((function(t){return Promise.resolve(n)}))}))).catch((function(t){return Promise.resolve()}))}},{key:"getMeta_",value:function(t,e,n){var i=this,r=1<arguments.length&&void 0!==e?e:{},o=2<arguments.length&&void 0!==n?n:Qe,s=new _e;return Promise.resolve().then((function(){return i.getMetaConfig_(t,r).then((function(t){return s.releaseSettings_=t.settings,i.dataApi_.getMetaConfig(t)}))})).then((function(e){return i.getMetaFiles_(e,s,o).then((function(){return i.getMetaOverrides_(t,e,s,o)}))})).then((function(){return s}))}},{key:"getMetaConfig_",value:function(t){return t=this.dataApi_.getMetaConfigUrl(t),this.dataApi_.fetch(t).catch((function(t){return Promise.reject(t)}))}},{key:"getMetaFiles_",value:function(t,e,n,i){var r=this,o=(n=2<arguments.length&&void 0!==n?n:[],!(3<arguments.length&&void 0!==i)||i);return Promise.all(n.map((function(n){var i=n.identifier,s=n.name;return!(n=n.url)&&o&&(n=r.dataApi_.getMetaFileUrl(t,i,s)),n=n||r.dataApi_.getGlobalMetaFileUrl(i,s),r.dataApi_.fetch(n).then((function(t){return e.instantiateMetaFileAccessor_(i,t),t})).catch((function(t){return Promise.resolve()}))})))}},{key:"getMetaOverrides_",value:function(t,e,n,i){var r=this;i=3<arguments.length&&void 0!==i?i:[];return Promise.all(i.map((function(i){var o=i.identifier,s=i.name;i=o,s=s,s=t&&e&&r.dataApi_.getMetaOverrideFileUrls(t,e,i,s)||[];return Promise.all(s.map((function(t){return r.dataApi_.fetch(t).then((function(t){return n[o]&&n[o].applyOverride(t,!1),Promise.resolve()})).catch((function(t){return Promise.resolve()}))})))})))}}]),t}(),en="https://meta-indoor-routing.api-gateway.ls.hereapi.com",nn=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(i(this,t),!e.apiKey&&!e.token)throw new Error("API key or Token is missing");this.config_=l({baseUrl:en},e)}return o(t,[{key:"calculateRoute",value:function(t){var e=void 0===(r=t.origin)?{}:r,i=void 0===(o=t.destination)?{}:o,r=function(t,e){if(null==t)return{};var n,i=function(t,e){if(null==t)return{};for(var n,i={},r=Object.keys(t),o=0;o<r.length;o++)n=r[o],0<=e.indexOf(n)||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(t),o=0;o<r.length;o++)n=r[o],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n]);return i}(t,["origin","destination"]);if(!e.coordinates||!i.coordinates)throw new Error("Waypoint coordinates are missing");var o=function(t){var e=t.coordinates,n=t.venueId;t=t.levelId,e=e.join(",");return n&&t?e.concat(";indoorMapId=",n,";levelId=",t):e},s=(t=new URL("".concat(this.config_.baseUrl,"/v1/routes")),new URLSearchParams({origin:o(e),destination:o(i),apiKey:this.config_.apiKey}));return Object.entries(r).forEach((function(t){t=(e=v(t,2))[0];var e=e[1];s.append(t,"object"===n(e)?JSON.stringify(e):e)})),t.search=s,fetch(t,{headers:{"X-Api-Key":this.config_.apiKey}}).then((function(t){return t.json()}))}}]),t}(),rn=function(){c(e,H.map.Feature);var t=g(e);function e(n){var r;if(i(this,e),r=t.call(this),!(n instanceof Ye))throw new Error("It is mandatory to provide valid instance of venueModel");return r.venueModel=n,r.search_=new gt(n),r.status_={activeDrawingId:n.getRootDrawing().getId(),activeLevelIndex:n.getRootDrawing().getMainLevel().getZIndex()},r.mapObjectStore_=r.getDefaultMapObjectsStore_(),r.drawings=n.getDrawings().map((function(t){return(t=new x(t)).setParentEventTarget(d(r)),t})),r.levels=n.getLevels().map((function(t){var e=new k(t);return e.setParentEventTarget(r.drawings.find((function(t){return t.getId()===e.getData().getDrawing().getId()}))),e})),r.geometries=n.getGeometries().map((function(t){var e=new w(t);return e.setParentEventTarget(r.levels.find((function(t){return t.getId()===e.getData().getLevel().getId()}))),e})),r}return o(e,[{key:"getData",value:function(){return this.venueModel}},{key:"getBoundingBox",value:function(){return p(H.geo.Rect,y(this.venueModel.getBoundingBox()))}},{key:"getCenter",value:function(){var t=(e=v(this.venueModel.getCenter(),2))[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.venueModel.getId()}},{key:"getName",value:function(){return this.venueModel.getName()}},{key:"getDrawing",value:function(t){return this.drawings.find((function(e){return e.getId()===t}))}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getLevel",value:function(t){return this.levels.find((function(e){return e.getId()===t}))}},{key:"getLevels",value:function(){return this.levels}},{key:"getGeometry",value:function(t){return this.geometries.find((function(e){return e.getId()===t}))}},{key:"getGeometries",value:function(){return this.geometries}},{key:"getActiveLevels",value:function(){var t=this;return this.getData().getDisplaySettings()===xt.FLATTEN?this.venueModel.getLevelsByZIndex(this.status_.activeLevelIndex).map((function(e){return t.getLevel(e.getId())})):[this.venueModel.getDrawingById(this.status_.activeDrawingId).getLevelByZIndex(this.status_.activeLevelIndex)].map((function(e){return t.getLevel(e.getId())}))}},{key:"getActiveDrawing",value:function(){return this.getDrawing(this.status_.activeDrawingId)}},{key:"setActiveDrawing",value:function(t){if(this.status_.activeDrawingId!==t){var n=this.venueModel.getDrawingById(t);if(!n)throw new Error("Drawing ".concat(t," was not found"));var i=this.status_.activeDrawingId;this.status_.activeDrawingId=t,this.setActiveLevelIndex(n.getMainLevel().getZIndex()),this.dispatchEvent(new H.util.ChangeEvent(e.EVENTS.DRAWING_CHANGE,t,i))}}},{key:"getActiveLevelIndex",value:function(){return this.status_.activeLevelIndex}},{key:"setActiveLevelIndex",value:function(t){var n;this.venueModel.getLevelsByZIndex(t)&&(n=this.status_.activeLevelIndex,this.status_.activeLevelIndex=t,this.dispatchEvent(new H.util.ChangeEvent(e.EVENTS.LEVEL_CHANGE,t,n)))}},{key:"isActive",value:function(){var t=this.getParentEventTarget();return!!t&&this===t.activeVenue}},{key:"getHighlightedGeometries",value:function(){var t=this;return this.venueModel.getGeometries().filter((function(t){return t.isHighlighted()})).map((function(e){return t.getGeometry(e.getId())}))}},{key:"setHighlightedGeometries",value:function(t,n,i){var r=!(0<arguments.length&&void 0!==t)||t,o=(n=1<arguments.length&&void 0!==n?n:[],i=2<arguments.length&&void 0!==i?i:{},(i=l(l({},ot),i)).fillColor),s=i.outlineColor,a=i.outlineWidth;n.forEach((function(t){t.getData().highlight(r,{m:o,o:s,w:a})})),this.dispatchEvent(e.EVENTS.GEOMETRY_HIGHLIGHT)}},{key:"getMapObjects",value:function(t,e){return t=0<arguments.length&&void 0!==t?t:this.getActiveLevelIndex(),e=1<arguments.length&&void 0!==e?e:this.getActiveDrawing(),this.mapObjectStore_[t][e.getId()]}},{key:"setMapObjects",value:function(t,e,n){t=0<arguments.length&&void 0!==t?t:[],e=1<arguments.length&&void 0!==e?e:this.getActiveLevelIndex(),n=2<arguments.length&&void 0!==n?n:this.getActiveDrawing(),this.mapObjectStore_[e]&&this.mapObjectStore_[e][n.getId()]&&(this.mapObjectStore_[e][n.getId()]=y(t)),this.updateMapObjectsVisibility_()}},{key:"search",value:function(t){var e=this;t=0<arguments.length&&void 0!==t?t:"";return this.search_.find(t).flatMap((function(t){return t.geometries.map((function(t){return e.getGeometry(t.getId())}))}))}},{key:"updateMapObjectsVisibility_",value:function(){Object.values(this.mapObjectStore_).forEach((function(t){Object.values(t).forEach((function(t){return t.forEach((function(t){return t.setVisibility(!1)}))}))})),this.isActive()&&this.mapObjectStore_[this.getActiveLevelIndex()][this.getActiveDrawing().getId()].forEach((function(t){return t.setVisibility(!0)}))}},{key:"getDefaultMapObjectsStore_",value:function(){var t=this,e=this.getData().getDisplaySettings()===xt.FLATTEN;return this.venueModel.getLevels().reduce((function(n,i){var r=i.getZIndex();return(n=l({},n))[r]||(n[r]={}),n[r][i.getDrawing().getId()]=[],e&&(n[r][t.venueModel.getRootDrawing().getId()]=[]),n}),{})}}]),e}();function on(t,e,n){return n===mn.ObjectType.SEGMENT_START_MARKER?0===t?fn:dn:n===mn.ObjectType.SEGMENT_FINISH_MARKER?1===e.length||t===e.length-1?pn:gn:"indoor"===e[t].departure.place.type?un:hn}rn.EVENTS={ACTIVE_VENUE_CHANGE:"activevenuechange",DRAWING_CHANGE:"drawingchange",LEVEL_CHANGE:"levelchange",GEOMETRY_HIGHLIGHT:"geometryhighlight"};var sn=function(){function t(){i(this,t)}return o(t,null,[{key:"getIconLayer",value:function(t){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==t?t:[]).flatMap((function(t){return t.getData().getGeometries()})).filter((function(t){return t.isIcon()&&t.getIcon()})).map((function(t){var e=(r=v(t.getLabelArea(),2))[0],n=r[1],i=t.getLevel(),r=t.getIcon().getSVG();return{type:"Feature",properties:{id:t.getId(),geometryId:t.getId(),levelId:i.getId(),name:t.getDisplayName(),venueId:i.getDrawing().getVenueModel().getId(),url:r?"data:image/svg+xml;utf8,".concat(encodeURIComponent(r)):""},geometry:{type:Z,coordinates:[e,n]}}}))}}},{key:"getLabelLayer",value:function(t){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==t?t:[]).flatMap((function(t){return t.getData().getGeometries()})).filter((function(t){return t.getDisplayName()&&!t.isIcon()})).map((function(t){var e=(r=v(t.getLabelArea(),2))[0],n=r[1],i=(o=t.getLabelStyle()).fill,r=o.zmin,o=t.getLevel();return{type:"Feature",properties:{id:t.getId(),geometryId:t.getId(),levelId:o.getId(),venueId:o.getDrawing().getVenueModel().getId(),name:t.getDisplayName(),minZoom:r||15,textFillColor:i.toLowerCase()},geometry:{type:Z,coordinates:[e,n]}}}))}}},{key:"getGeometryLayer",value:function(t){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==t?t:[]).flatMap((function(t){return t.getData().getGeometries()})).filter((function(t){return t.getType()!==Z})).map((function(t){var e=(u=t.getHighlightedStyle()||{}).m,n=u.o,i=u.w,r=(h=l({},t.getStyle())).m,o=h.o,s=h.w,a=et,c=nt,u=it,h=t.getLevel();return{type:"Feature",properties:{id:t.getId(),fillColor:(e||r||a).toLowerCase(),geometryId:t.getId(),levelId:h.getId(),venueId:h.getDrawing().getVenueModel().getId(),outlineColor:(n||o||c).toLowerCase(),outlineWidth:Number(((i||s||u)/3).toFixed(2)),zIndex:t.getZIndex()},geometry:{type:t.getType(),coordinates:t.getCoordinates()}}}))}}},{key:"getFootprintLayer",value:function(t){return{type:"FeatureCollection",features:t.flatMap((function(t){var e=t.getData().getRootDrawing().getMainLevel().getId(),n=t.getLevel(e).getData().getGeometries().filter((function(t){return t.getType()===J}));return[{type:"Feature",properties:{isFootprint:!0,levelId:e,venueId:t.getId(),zIndex:1},geometry:{type:"MultiPolygon",coordinates:n.map((function(t){return t.getCoordinates()}))}},{type:"Feature",properties:{isFootprint:!0,levelId:e,venueId:t.getId(),zIndex:2,venueName:t.getName()},geometry:{type:"Point",coordinates:t.getCenter().toGeoJSON().coordinates.slice(0,2)}}]}))}}}]),t}(),an=function(){function t(){i(this,t)}return o(t,null,[{key:"getIconsTextures",value:function(t){var e={},n={},i=(0<arguments.length&&void 0!==t?t:[]).reduce((function(t,e){var n=e.properties.name;return t[n]||(t[n]=[]),t[n].push(e),t}),{});return Object.keys(i).forEach((function(t){var r="texture".concat(t),o="sprite".concat(t),a=i[t][0].properties.url;e[r]={url:a,sprites:s({},o,[0,0,50,50])},i[t].forEach((function(t){t=t.properties,n["icon".concat(t.name)]={filter:{name:t.name,$zoom:{min:18}},draw:{points:{interactive:!0,priority:1,size:[[15,"5%"],[16,"10%"],[17,"15%"],[18,"25%"],[19,"35%"],[20,"40%"],[21,"50%"]],texture:r,sprite:o}}}}))})),{textures:e,iconLayers:n}}},{key:"getFootprintLayer",value:function(){return{data:{source:"venues",layer:st.FOOTPRINT},draw:{polygons:{interactive:!0,color:"#AF91B4",order:2},lines:{color:"#613F8E",width:"2px",order:1},points:{color:"[0, 0, 0, 0]",size:"0px",order:3,priority:1,text:{anchor:"center",collide:!1,font:{fill:"black",size:"16px"},text_source:"function() { return feature.venueName }"}}}}}},{key:"getGeometryLayer",value:function(){return{data:{source:"venues",layer:st.VECTOR},draw:{polygons:{interactive:!0,color:"function() { return feature.fillColor }",order:"function() { return feature.zIndex }"},lines:{color:"function() { return feature.outlineColor }",order:"function() { return feature.zIndex }",width:"function() { return feature.outlineWidth }"}}}}},{key:"getTextLayer",value:function(){return{filter:{$zoom:{min:18}},data:{source:"venues",layer:st.TEXT},draw:{points:{filter:"function() { return $zoom > feature.minZoom }",color:"[0, 0, 0, 0]",size:"0px",offset:["0px","-10px"],priority:2,text:{font:{fill:"function() { return feature.textFillColor }",size:rt},text_source:"function() { return feature.name }"}}}}}},{key:"getIconLayer",value:function(t){return l({data:{source:"venues",layer:st.ICON}},t)}},{key:"getStyle",value:function(e){e=(n=t.getIconsTextures(0<arguments.length&&void 0!==e?e:[])).textures;var n=n.iconLayers;n={venue_footprints:t.getFootprintLayer(),venue_geometries:t.getGeometryLayer(),venue_labels:t.getTextLayer(),venue_icons:t.getIconLayer(n)},e=H.gl.yaml.safeDump({sources:{venues:{max_zoom:24,type:"GeoJSONTileSource"}},layers:n,textures:e});return new H.map.Style(e)}}]),t}(),ln={type:"FeatureCollection",features:[]},cn={extent:4096,indexMaxZoom:0,maxZoom:24,tolerance:3},un=(Pe=function(){c(e,H.map.provider.RemoteTileProvider);var t=g(e);function e(n){return i(this,e),(n=t.call(this,n)).venues=[],n.activeVenue=null,n.dataLayers_={},n.tileIndexes_={},n.addEventListener(rn.EVENTS.ACTIVE_VENUE_CHANGE,n.activeVenueChangeHandler_,void 0,d(n)),n}return o(e,[{key:"setStyle",value:function(t){return this.setStyleInternal(t)}},{key:"getStyle",value:function(){return this.getStyleInternal()}},{key:"isFeatureVisible_",value:function(t,e){var n=t.properties;return this.activeVenue&&n.venueId===this.activeVenue.getId()?e!==st.FOOTPRINT&&this.activeVenue.getActiveLevels().some((function(t){return t.id===n.levelId})):!0===n.isFootprint&&e===st.FOOTPRINT}},{key:"requestInternal",value:function(t,e,n,i){function r(i){for(var r=0;r<i.length;r+=1)i[r]=i[r].map((function(i){return X(i,n,t,e,cn.extent)}))}var o=this,s={};return Object.keys(this.tileIndexes_).forEach((function(i){var a=o.tileIndexes_[i].getTile(n,t,e);s[i]=a?function(t){var e=[],n=t&&t.features;if(n)for(var i=0,r=n.length;i<r;i+=1){var o=n[i],s=o.type,a=void 0,l=!1;switch(s){case 1:a={type:"MultiPoint",coordinates:o.geometry.map((function(t){return t.slice()}))};break;case 2:case 3:a={type:Q,coordinates:o.geometry.map((function(t){return t.map((function(t){return t.slice()}))}))},3===s&&null==(a=Y(a))&&(l=!0);break;default:l=!0}l||e.push({geometry:a,id:o.id,properties:o.tags,type:"Feature"})}return{type:"FeatureCollection",features:e}}(a):ln,s[i].features=s[i].features.filter((function(t){return o.isFeatureVisible_(t,i)}));for(var l=0;l<s[i].features.length;l+=1){var c=s[i].features[l],u=c.geometry.type;if(u===J||u===Q)r(c.geometry.coordinates);else if(u===tt)c.geometry.coordinates.map(r);else for(var h=c.geometry.coordinates,f=0;f<h.length;f+=1)h[f]=X(h[f],n,t,e,cn.extent)}})),i(s),{cancel:function(){}}}},{key:"getActiveVenue",value:function(){return this.activeVenue}},{key:"getVenue",value:function(t){return t?this.venues.find((function(e){return e.getId()===Number(t)})):this.activeVenue}},{key:"setActiveVenue",value:function(t){var e=this.activeVenue;this.activeVenue=t,this.dispatchEvent(new H.util.ChangeEvent(rn.EVENTS.ACTIVE_VENUE_CHANGE,t,e)),this.reload()}},{key:"addVenue",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e;if(!(t instanceof rn))throw new Error("Invalid argument");if(e=t.getId(),this.getVenue(e))throw new Error("Please invoke provider.removeVenue to remove old instance of venue ".concat(e," before adding new"));t.setParentEventTarget(this),this.venues.push(t),n||(this.reloadData_(),this.reloadStyle_())}},{key:"addVenues",value:function(t){var e=this;0<(t=0<arguments.length&&void 0!==t?t:[]).length&&(t.forEach((function(t){t instanceof rn&&e.addVenue(t,!0)})),this.reloadData_(),this.reloadStyle_())}},{key:"removeVenue",value:function(t){var e;t instanceof rn&&-1<this.venues.indexOf(t)&&(e=t.getId(),this.activeVenue&&this.activeVenue.getId()===e&&this.setActiveVenue(null),this.venues.splice(this.venues.indexOf(t),1),this.reloadData_(),this.reloadStyle_(),this.reload())}},{key:"getFeatureProxy",value:function(t,e,n){var i=t.geometryId;t=t.venueId,t=this.getVenue(t);return i?n(t.getGeometries().find((function(t){return t.id===i}))):t&&n(t),!0}},{key:"addVenueEventListeners_",value:function(t){t&&(t.addEventListener(rn.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),t.addEventListener(rn.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),t.addEventListener(rn.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"removeVenueEventListeners_",value:function(t){t&&(t.removeEventListener(rn.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),t.removeEventListener(rn.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),t.removeEventListener(rn.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"activeVenueChangeHandler_",value:function(t){var e=t.oldValue;t=t.newValue;e&&(this.removeVenueEventListeners_(e),e.updateMapObjectsVisibility_()),t&&(this.addVenueEventListeners_(t),t.updateMapObjectsVisibility_())}},{key:"drawingChangeHandler_",value:function(){this.reload()}},{key:"levelChangeHandler_",value:function(){this.activeVenue&&(this.activeVenue.updateMapObjectsVisibility_(),this.reload())}},{key:"geometryHighlightHandler_",value:function(){this.reloadData_([st.VECTOR]),this.reload()}},{key:"createDataLayers_",value:function(t){var e=this,n=(t=0<arguments.length&&void 0!==t?t:Object.keys(st),st.FOOTPRINT),i=st.ICON,r=st.TEXT,o=st.VECTOR;t.forEach((function(t){switch(t){case o:e.dataLayers_[o]=sn.getGeometryLayer(e.venues);break;case n:e.dataLayers_[n]=sn.getFootprintLayer(e.venues);break;case i:e.dataLayers_[i]=sn.getIconLayer(e.venues);break;case r:e.dataLayers_[r]=sn.getLabelLayer(e.venues);break;default:throw new Error("Unsupported Layer ".concat(t))}}))}},{key:"createTileIndexes_",value:function(t){var e=this;(0<arguments.length&&void 0!==t?t:Object.keys(st)).forEach((function(t){e.tileIndexes_[t]=new q(e.dataLayers_[t],cn)}))}},{key:"reloadData_",value:function(t){t=0<arguments.length&&void 0!==t?t:Object.keys(st),this.createDataLayers_(t),this.createTileIndexes_(t)}},{key:"reloadStyle_",value:function(){var t=this.dataLayers_[st.ICON]?this.dataLayers_[st.ICON].features:[];t=an.getStyle(t);this.setStyle(t)}}]),e}(),new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3})),hn=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),fn=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImIiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PG1hc2sgaWQ9ImMiIHdpZHRoPSIzOCIgaGVpZ2h0PSI0NiIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iMjAiIGN5PSI0NS4xNiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjOTc5Nzk3IiBzdHJva2Utd2lkdGg9Ii4yNSIgcng9IjMuNSIgcnk9IjMuNSIvPjx1c2UgZmlsbD0iIzAxQjZCMiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBmaWxsPSIjMzIzMjMyIiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMTEuODEgMzcuNjZoMTYuMzhsLTguMiA4eiIvPjx1c2Ugc3Ryb2tlPSIjNDE2QTg2IiBzdHJva2Utd2lkdGg9Ii41IiBtYXNrPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYSIvPjxlbGxpcHNlIGN4PSIxOS44MSIgY3k9IjE5LjE5IiBmaWxsPSIjRkZGIiByeD0iNC44MSIgcnk9IjQuODEiLz48L2c+PC9zdmc+"),pn=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzMi44MyAzMy4xMDRjLjQwNy0uMzc0IDEuNDE5LTEuNDUyIDEuNDE5LTEuNDUyeiIvPjxtYXNrIGlkPSJjIiB3aWR0aD0iMzgiIGhlaWdodD0iNDYiIHg9IjAiIHk9IjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PGVsbGlwc2UgaWQ9ImIiIGN4PSIxOS44MDciIGN5PSIxOS4xNjgiIHJ4PSIxMi4zNjMiIHJ5PSIxMi4xOTciLz48bWFzayBpZD0iZCIgd2lkdGg9IjI1LjcyNSIgaGVpZ2h0PSIyNS4zOTQiIHg9Ii0uNSIgeT0iLS41Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNi45NDQgNi40NzFoMjUuNzI1djI1LjM5NEg2Ljk0NHoiLz48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxlbGxpcHNlIGN4PSIyMCIgY3k9IjQ1LjE2IiBmaWxsPSIjRkZGIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iLjI1IiByeD0iMy41IiByeT0iMy41Ii8+PHVzZSBmaWxsPSIjMzIzMjMyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGZpbGw9IiM3RDdEN0QiIGQ9Ik0xMi4wMTEgMzcuODA1aDE1Ljk3OGwtNy45MTYgOHoiLz48dXNlIHN0cm9rZT0iIzdDN0M3QyIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNlKSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNjKSIgeGxpbms6aHJlZj0iI2EiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTkuODA3IiBjeT0iMTkuMTY4IiByeD0iMTIuMzYzIiByeT0iMTIuMTk3Ii8+PHBhdGggZmlsbD0iIzMyMzIzMiIgZD0iTTYuODEyIDYuOTQ4aDYuNDV2Ni4zNjRoLTYuNDV6bTAgMTIuNzI3aDYuNDV2Ni4zNjRoLTYuNDV6bTYuNDUtNi4zNjNoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS0xOS4wOTFoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS02LjM2M2g2LjQ1djYuMzY0aC02LjQ1em0wIDEyLjcyN2g2LjQ1djYuMzY0aC02LjQ1eiIvPjx1c2Ugc3Ryb2tlPSIjRkZGIiBtYXNrPSJ1cmwoI2QpIiB4bGluazpocmVmPSIjYiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48L3N2Zz4="),dn=null,gn=null,mn=function(){function t(e,n){i(this,t),this.indoorMapObjects_=null,this.outdoorMapObjects_=null,this.createRouteObjects_(e,n)}return o(t,[{key:"createRouteObjects_",value:function(e,n){var i=this,r=void 0===(e=e.sections)?[]:e,o=1<arguments.length&&void 0!==n?n:on;this.indoorMapObjects_={},this.outdoorMapObjects_=new H.map.Group;for(var s=function(e){var n=r[e],s=(f=n.departure.place,f.id),a=f.type,c=H.util.flexiblePolyline.decode(n.polyline).polyline,u=void 0,h=void 0,f=o(e,r,t.ObjectType.SEGMENT_START_MARKER);f&&(u=new H.map.Marker(n.departure.place.location,{icon:f})),f=o(e,r,t.ObjectType.SEGMENT_FINISH_MARKER),f&&(h=new H.map.Marker(n.arrival.place.location,{icon:f}));var p,d=o(e,r,t.ObjectType.SEGMENT_POLYLINE);"indoor"===a?(a=function(t){t=0<arguments.length&&void 0!==t?t:[];var e=new Map,n=new H.geo.LineString,i=v(t[0],3)[2];return e.set(i,[n]),t.forEach((function(t){t[2]!==i&&(i=t[2],n=new H.geo.LineString,e.has(i)?e.get(i).push(n):e.set(i,[n])),n.pushLatLngAlt.apply(n,y(t))})),e}(c),p=Array.from(a.keys()).reduce((function(t,e){return t[e]||(t[e]=new H.map.Group),t}),{}),d&&a.forEach((function(t,e){t.forEach((function(t){1<t.getPointCount()&&(t=new H.map.Polyline(t,{style:d}),p[e].addObject(t))}))})),u&&p[n.departure.place.location.lvl].addObject(u),h&&p[n.arrival.place.location.lvl].addObject(h),i.indoorMapObjects_[s]=l(l({},i.indoorMapObjects_[s]||{}),p)):(d&&(c=new H.geo.LineString(c.flatMap((function(t){return[t[0],t[1],0]}))),c=new H.map.Polyline(c,{style:d}),i.outdoorMapObjects_.addObject(c)),u&&i.outdoorMapObjects_.addObject(u),h&&i.outdoorMapObjects_.addObject(h))},a=0;a<r.length;a++)s(a)}},{key:"getIndoorObjects",value:function(){return this.indoorMapObjects_}},{key:"getOutdoorObjects",value:function(){return this.outdoorMapObjects_}}]),t}();mn.ObjectType={SEGMENT_START_MARKER:1,SEGMENT_FINISH_MARKER:2,SEGMENT_POLYLINE:3};var vn=function(){c(e,H.service.Service);var t=g(e);function e(n){var r;i(this,e),r=t.call(this,e,n);var o={apiKey:n.apikey,baseUrl:n.baseUrl&&n.baseUrl.getHost(),token:n.token},s={apiKey:o.apiKey,token:o.token};o.apiKey||(o.apiKey=r.getUrl().getQuery().apikey);var a=n.useLegacy||!1;return r.venueService_=new tn(o,a),s.apiKey||(s.apiKey=r.getUrl().getQuery().apikey),n.routingBaseUrl&&(s.baseUrl=n.routingBaseUrl),r.routingService_=new nn(s),r}return o(e,[{key:"loadVenue",value:function(t,e){return e=1<arguments.length&&void 0!==e?e:{},this.venueService_.load(t,e).then((function(t){return new rn(t)}))}},{key:"calculateRoute",value:function(t){return this.routingService_.calculateRoute(t)}}]),e}();return vn.CONFIG_KEY="venues",H.service.Platform.prototype.getVenuesService=function(t){return this.createService(vn,t)},ke=function(){c(e,H.ui.Control);var t=g(e);function e(n){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return i(this,e),(r=t.call(this)).provider_=null,r.levelSelectorUI_=null,r.setAlignment(o&&o.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),r.addClass("venues-ui"),n instanceof rn&&r.setVenue(n),r}return o(e,[{key:"renderInternal",value:function(t,n){m(u(e.prototype),"renderInternal",this).call(this,t,n),this.createLevelSelectorUI_(t),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(t){t instanceof rn&&(this.removeEventListeners_(),this.venue=t,this.provider_=t.getParentEventTarget(),this.update_(),this.addEventListeners_())}},{key:"createLevelSelectorUI_",value:function(t){var e=this;t.innerHTML="",this.levelSelectorUI_=null,this.levelSelectorUI_=new Wt(t,null,null,(function(t){return e.venue.setActiveLevelIndex(t)}))}},{key:"update_",value:function(){var t,e;this.levelSelectorUI_&&(t=this.venue.getActiveDrawing().getData(),e=this.venue.getData().getDisplaySettings(),this.levelSelectorUI_.update(t,e),this.levelChangeHandler_())}},{key:"addEventListeners_",value:function(){this.venue&&(this.venue.addEventListener(rn.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.addEventListener(rn.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.addEventListener(rn.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&(this.venue.removeEventListener(rn.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.removeEventListener(rn.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.removeEventListener(rn.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"levelChangeHandler_",value:function(){this.levelSelectorUI_.switch(this.venue.getActiveLevelIndex())}},{key:"drawingChangeHandler_",value:function(){this.update_()}},{key:"activeVenueChangeHandler_",value:function(t){this.setVenue(t.newValue)}}]),e}(),Ct=function(){c(e,H.ui.Control);var t=g(e);function e(n){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return i(this,e),(r=t.call(this)).provider_=null,r.drawingSelectorUI_=null,r.addClass("venues-ui"),r.setAlignment(o&&o.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),n instanceof rn&&r.setVenue(n),r}return o(e,[{key:"renderInternal",value:function(t,n){m(u(e.prototype),"renderInternal",this).call(this,t,n),this.createDrawingSelectorUI_(t),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(t){t instanceof rn&&(this.removeEventListeners_(),this.venue=t,this.provider_=t.getParentEventTarget(),this.drawingSelectorUI_&&this.drawingSelectorUI_.update(t.getData()),this.addEventListeners_())}},{key:"createDrawingSelectorUI_",value:function(t){var e=this;t.innerHTML="",this.drawingSelectorUI_=null,this.drawingSelectorUI_=new Ft(t,null,(function(t){return e.venue.setActiveDrawing(t)}))}},{key:"addEventListeners_",value:function(){this.venue&&this.venue.addEventListener(rn.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.addEventListener(rn.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&this.venue.removeEventListener(rn.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.removeEventListener(rn.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"drawingChangeHandler_",value:function(){this.drawingSelectorUI_.switch(this.venue.getActiveDrawing().id)}},{key:"activeVenueChangeHandler_",value:function(t){this.setVenue(t.newValue)}}]),e}(),ke=Object.freeze({__proto__:null,DrawingControl:Ct,LevelControl:ke}),e(".venues-ui * {\n  font-family: 'Fira Sans', 'Helvetica Neue', Helvetica, sans-serif;\n  color: #0F1621; }\n\n.venues-ui .arrow {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center; }\n  .venues-ui .arrow--up {\n    background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-426.000000, -584.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls-Copy' transform='translate(417.753906, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(15.000000, 16.499023) rotate(-180.000000) translate(-15.000000, -16.499023) translate(9.000000, 12.749023)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\"); }\n  .venues-ui .arrow--down {\n    background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-347.000000, -704.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls' transform='translate(338.251953, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(9.000000, 132.746094)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\"); }\n\n.venues-ui .venues-ui-button {\n  display: block;\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n  font-weight: 600;\n  background-color: #fff;\n  border: none;\n  border-bottom: 1px solid #9FA2A6;\n  cursor: pointer;\n  overflow: hidden;\n  color: #6e737a;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap; }\n  .venues-ui .venues-ui-button:hover, .venues-ui .venues-ui-button--active {\n    background-color: #f0f0f0;\n    color: #0F1621; }\n\n@keyframes fade {\n  0% {\n    opacity: 0; }\n  100% {\n    opacity: 1; } }\n\n.venues-ui__drawings .drawings {\n  position: absolute;\n  top: 0;\n  right: 45px;\n  display: none;\n  opacity: 0;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6); }\n  .venues-ui__drawings .drawings--open {\n    display: block;\n    opacity: 1;\n    animation: fade 1s; }\n  .venues-ui__drawings .drawings .venues-ui-button {\n    width: auto;\n    padding: 0 10px; }\n    .venues-ui__drawings .drawings .venues-ui-button:first-of-type {\n      border-top-left-radius: 5px;\n      border-top-right-radius: 5px; }\n    .venues-ui__drawings .drawings .venues-ui-button:last-of-type {\n      border-bottom-left-radius: 5px;\n      border-bottom-right-radius: 5px; }\n\n.venues-ui__drawings .trigger {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6); }\n  .venues-ui__drawings .trigger .arrow {\n    transform: rotate(0);\n    transition: 0.4s; }\n  .venues-ui__drawings .trigger.venues-ui-button--active .arrow {\n    transform: rotate(90deg);\n    transition: 0.4s; }\n\n.venues-ui__levels {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6); }\n  .venues-ui__levels .levels {\n    overflow: hidden; }\n  .venues-ui__levels .venues-ui-button--up + .levels .venues-ui-button {\n    border-radius: 0; }\n  .venues-ui__levels .venues-ui-button:first-of-type {\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px; }\n  .venues-ui__levels .venues-ui-button:last-of-type {\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px; }\n  .venues-ui__levels .venues-ui-button[disabled=disabled] .arrow {\n    opacity: 0.5; }\n\n.venues-ui__directory {\n  position: absolute;\n  top: 10px;\n  right: 60px;\n  bottom: calc(100% - 45px);\n  width: 350px;\n  overflow: hidden;\n  background: white;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6); }\n  .venues-ui__directory.active {\n    bottom: 10px; }\n  .venues-ui__directory .directory__list {\n    top: 80px;\n    bottom: 20px;\n    position: absolute;\n    overflow-y: scroll;\n    right: 10px;\n    left: 10px;\n    font-size: 12px; }\n    .venues-ui__directory .directory__list svg {\n      width: 25px;\n      height: 25px; }\n  .venues-ui__directory .directory__heading {\n    margin: 8px;\n    font-size: 15px;\n    font-weight: normal;\n    cursor: pointer; }\n  .venues-ui__directory .directory__input {\n    margin: 10px; }\n    .venues-ui__directory .directory__input input {\n      width: 100%;\n      padding: 5px 0; }\n  .venues-ui__directory .directory__trigger {\n    position: absolute;\n    right: 10px;\n    top: 15px;\n    width: 10px;\n    height: 10px; }\n    .venues-ui__directory .directory__trigger .arrow {\n      transform: rotate(0);\n      transition: 0.4s; }\n    .venues-ui__directory .directory__trigger--active .arrow {\n      transform: rotate(-180deg);\n      transition: 0.4s; }\n"),t.Drawing=x,t.Geometry=w,t.Level=k,t.Provider=Pe,t.Route=mn,t.Service=vn,t.Venue=rn,t.ui=ke,Object.defineProperty(t,"__esModule",{value:!0}),t}({})}).call(self),__webpack_exports__.a=H}).call(this,__webpack_require__(5),__webpack_require__(27)(module))},function(t,e,n){"use strict";(function(t){var i=n(7),r=n(0),o=n.n(r),s=n(19),a=n.n(s),l=n(20),c=n(21),u=n(13),h=n(10),f=n.n(h);function p(){return(p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var d=function(t,e){for(var n=[t[0]],i=0,r=e.length;i<r;i+=1)n.push(e[i],t[i+1]);return n},g=function(t){return null!==t&&"object"==typeof t&&"[object Object]"===(t.toString?t.toString():Object.prototype.toString.call(t))&&!Object(i.typeOf)(t)},m=Object.freeze([]),v=Object.freeze({});function y(t){return"function"==typeof t}function b(t){return t.displayName||t.name||"Component"}function _(t){return t&&"string"==typeof t.styledComponentId}var w="undefined"!=typeof t&&(Object({NODE_ENV:"production",PUBLIC_URL:"/geojson-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SC_ATTR||Object({NODE_ENV:"production",PUBLIC_URL:"/geojson-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SC_ATTR)||"data-styled",x="undefined"!=typeof window&&"HTMLElement"in window,k=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof t&&void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/geojson-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SC_DISABLE_SPEEDY&&""!==Object({NODE_ENV:"production",PUBLIC_URL:"/geojson-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SC_DISABLE_SPEEDY?"false"!==Object({NODE_ENV:"production",PUBLIC_URL:"/geojson-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SC_DISABLE_SPEEDY&&Object({NODE_ENV:"production",PUBLIC_URL:"/geojson-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof t&&void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/geojson-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SC_DISABLE_SPEEDY&&""!==Object({NODE_ENV:"production",PUBLIC_URL:"/geojson-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SC_DISABLE_SPEEDY&&("false"!==Object({NODE_ENV:"production",PUBLIC_URL:"/geojson-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SC_DISABLE_SPEEDY&&Object({NODE_ENV:"production",PUBLIC_URL:"/geojson-editor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SC_DISABLE_SPEEDY));function S(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var A=function(){function t(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}var e=t.prototype;return e.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},e.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,r=i;t>=r;)(r<<=1)<0&&S(16,""+t);this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var o=i;o<r;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(t+1),a=0,l=e.length;a<l;a++)this.tag.insertRule(s,e[a])&&(this.groupSizes[t]++,s++)},e.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),i=n+e;this.groupSizes[t]=0;for(var r=n;r<i;r++)this.tag.deleteRule(n)}},e.getGroup=function(t){var e="";if(t>=this.length||0===this.groupSizes[t])return e;for(var n=this.groupSizes[t],i=this.indexOfGroup(t),r=i+n,o=i;o<r;o++)e+=this.tag.getRule(o)+"/*!sc*/\n";return e},t}(),E=new Map,T=new Map,C=1,M=function(t){if(E.has(t))return E.get(t);for(;T.has(C);)C++;var e=C++;return E.set(t,e),T.set(e,t),e},L=function(t){return T.get(t)},R=function(t,e){E.set(t,e),T.set(e,t)},O="style["+w+'][data-styled-version="5.3.0"]',I=new RegExp("^"+w+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),P=function(t,e,n){for(var i,r=n.split(","),o=0,s=r.length;o<s;o++)(i=r[o])&&t.registerName(e,i)},N=function(t,e){for(var n=e.innerHTML.split("/*!sc*/\n"),i=[],r=0,o=n.length;r<o;r++){var s=n[r].trim();if(s){var a=s.match(I);if(a){var l=0|parseInt(a[1],10),c=a[2];0!==l&&(R(c,l),P(t,c,a[3]),t.getTag().insertRules(l,i)),i.length=0}else i.push(s)}}},D=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},j=function(t){var e=document.head,n=t||e,i=document.createElement("style"),r=function(t){for(var e=t.childNodes,n=e.length;n>=0;n--){var i=e[n];if(i&&1===i.nodeType&&i.hasAttribute(w))return i}}(n),o=void 0!==r?r.nextSibling:null;i.setAttribute(w,"active"),i.setAttribute("data-styled-version","5.3.0");var s=D();return s&&i.setAttribute("nonce",s),n.insertBefore(i,o),i},z=function(){function t(t){var e=this.element=j(t);e.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var e=document.styleSheets,n=0,i=e.length;n<i;n++){var r=e[n];if(r.ownerNode===t)return r}S(17)}(e),this.length=0}var e=t.prototype;return e.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch(t){return!1}},e.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.getRule=function(t){var e=this.sheet.cssRules[t];return void 0!==e&&"string"==typeof e.cssText?e.cssText:""},t}(),$=function(){function t(t){var e=this.element=j(t);this.nodes=e.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e),i=this.nodes[t];return this.element.insertBefore(n,i||null),this.length++,!0}return!1},e.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},t}(),F=function(){function t(t){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},e.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.getRule=function(t){return t<this.length?this.rules[t]:""},t}(),B=x,H={isServer:!x,useCSSOMInjection:!k},U=function(){function t(t,e,n){void 0===t&&(t=v),void 0===e&&(e={}),this.options=p({},H,{},t),this.gs=e,this.names=new Map(n),!this.options.isServer&&x&&B&&(B=!1,function(t){for(var e=document.querySelectorAll(O),n=0,i=e.length;n<i;n++){var r=e[n];r&&"active"!==r.getAttribute(w)&&(N(t,r),r.parentNode&&r.parentNode.removeChild(r))}}(this))}t.registerId=function(t){return M(t)};var e=t.prototype;return e.reconstructWithOptions=function(e,n){return void 0===n&&(n=!0),new t(p({},this.options,{},e),this.gs,n&&this.names||void 0)},e.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.getTag=function(){return this.tag||(this.tag=(n=(e=this.options).isServer,i=e.useCSSOMInjection,r=e.target,t=n?new F(r):i?new z(r):new $(r),new A(t)));var t,e,n,i,r},e.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},e.registerName=function(t,e){if(M(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},e.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(M(t),n)},e.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.clearRules=function(t){this.getTag().clearGroup(M(t)),this.clearNames(t)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(t){for(var e=t.getTag(),n=e.length,i="",r=0;r<n;r++){var o=L(r);if(void 0!==o){var s=t.names.get(o),a=e.getGroup(r);if(void 0!==s&&0!==a.length){var l=w+".g"+r+'[id="'+o+'"]',c="";void 0!==s&&s.forEach((function(t){t.length>0&&(c+=t+",")})),i+=""+a+l+'{content:"'+c+'"}/*!sc*/\n'}}}return i}(this)},t}(),G=/(a)(d)/gi,V=function(t){return String.fromCharCode(t+(t>25?39:97))};function W(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=V(e%52)+n;return(V(e%52)+n).replace(G,"$1-$2")}var q=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},K=function(t){return q(5381,t)};function Y(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(y(n)&&!_(n))return!1}return!0}var X=K("5.3.0"),Z=function(){function t(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Y(t),this.componentId=e,this.baseHash=q(X,e),this.baseStyle=n,U.registerId(e)}return t.prototype.generateAndInjectStyles=function(t,e,n){var i=this.componentId,r=[];if(this.baseStyle&&r.push(this.baseStyle.generateAndInjectStyles(t,e,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(i,this.staticRulesId))r.push(this.staticRulesId);else{var o=gt(this.rules,t,e,n).join(""),s=W(q(this.baseHash,o.length)>>>0);if(!e.hasNameForId(i,s)){var a=n(o,"."+s,void 0,i);e.insertRules(i,s,a)}r.push(s),this.staticRulesId=s}else{for(var l=this.rules.length,c=q(this.baseHash,n.hash),u="",h=0;h<l;h++){var f=this.rules[h];if("string"==typeof f)u+=f;else if(f){var p=gt(f,t,e,n),d=Array.isArray(p)?p.join(""):p;c=q(c,d+h),u+=d}}if(u){var g=W(c>>>0);if(!e.hasNameForId(i,g)){var m=n(u,"."+g,void 0,i);e.insertRules(i,g,m)}r.push(g)}}return r.join(" ")},t}(),J=/^\s*\/\/.*$/gm,Q=[":","[",".","#"];function tt(t){var e,n,i,r,o=void 0===t?v:t,s=o.options,a=void 0===s?v:s,c=o.plugins,u=void 0===c?m:c,h=new l.a(a),f=[],p=function(t){function e(e){if(e)try{t(e+"}")}catch(t){}}return function(n,i,r,o,s,a,l,c,u,h){switch(n){case 1:if(0===u&&64===i.charCodeAt(0))return t(i+";"),"";break;case 2:if(0===c)return i+"/*|*/";break;case 3:switch(c){case 102:case 112:return t(r[0]+i),"";default:return i+(0===h?"/*|*/":"")}case-2:i.split("/*|*/}").forEach(e)}}}((function(t){f.push(t)})),d=function(t,i,o){return 0===i&&-1!==Q.indexOf(o[n.length])||o.match(r)?t:"."+e};function g(t,o,s,a){void 0===a&&(a="&");var l=t.replace(J,""),c=o&&s?s+" "+o+" { "+l+" }":l;return e=a,n=o,i=new RegExp("\\"+n+"\\b","g"),r=new RegExp("(\\"+n+"\\b){2,}"),h(s||!o?"":o,c)}return h.use([].concat(u,[function(t,e,r){2===t&&r.length&&r[0].lastIndexOf(n)>0&&(r[0]=r[0].replace(i,d))},p,function(t){if(-2===t){var e=f;return f=[],e}}])),g.hash=u.length?u.reduce((function(t,e){return e.name||S(15),q(t,e.name)}),5381).toString():"",g}var et=o.a.createContext(),nt=(et.Consumer,o.a.createContext()),it=(nt.Consumer,new U),rt=tt();function ot(){return Object(r.useContext)(et)||it}function st(){return Object(r.useContext)(nt)||rt}function at(t){var e=Object(r.useState)(t.stylisPlugins),n=e[0],i=e[1],s=ot(),l=Object(r.useMemo)((function(){var e=s;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[t.disableCSSOMInjection,t.sheet,t.target]),c=Object(r.useMemo)((function(){return tt({options:{prefix:!t.disableVendorPrefixes},plugins:n})}),[t.disableVendorPrefixes,n]);return Object(r.useEffect)((function(){a()(n,t.stylisPlugins)||i(t.stylisPlugins)}),[t.stylisPlugins]),o.a.createElement(et.Provider,{value:l},o.a.createElement(nt.Provider,{value:c},t.children))}var lt=function(){function t(t,e){var n=this;this.inject=function(t,e){void 0===e&&(e=rt);var i=n.name+e.hash;t.hasNameForId(n.id,i)||t.insertRules(n.id,i,e(n.rules,i,"@keyframes"))},this.toString=function(){return S(12,String(n.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=e}return t.prototype.getName=function(t){return void 0===t&&(t=rt),this.name+t.hash},t}(),ct=/([A-Z])/,ut=/([A-Z])/g,ht=/^ms-/,ft=function(t){return"-"+t.toLowerCase()};function pt(t){return ct.test(t)?t.replace(ut,ft).replace(ht,"-ms-"):t}var dt=function(t){return null==t||!1===t||""===t};function gt(t,e,n,i){if(Array.isArray(t)){for(var r,o=[],s=0,a=t.length;s<a;s+=1)""!==(r=gt(t[s],e,n,i))&&(Array.isArray(r)?o.push.apply(o,r):o.push(r));return o}return dt(t)?"":_(t)?"."+t.styledComponentId:y(t)?"function"!=typeof(l=t)||l.prototype&&l.prototype.isReactComponent||!e?t:gt(t(e),e,n,i):t instanceof lt?n?(t.inject(n,i),t.getName(i)):t:g(t)?function t(e,n){var i,r,o=[];for(var s in e)e.hasOwnProperty(s)&&!dt(e[s])&&(g(e[s])?o.push.apply(o,t(e[s],s)):y(e[s])?o.push(pt(s)+":",e[s],";"):o.push(pt(s)+": "+(i=s,(null==(r=e[s])||"boolean"==typeof r||""===r?"":"number"!=typeof r||0===r||i in c.a?String(r).trim():r+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(t):t.toString();var l}function mt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return y(t)||g(t)?gt(d(m,[t].concat(n))):0===n.length&&1===t.length&&"string"==typeof t[0]?t:gt(d(t,n))}new Set;var vt=function(t,e,n){return void 0===n&&(n=v),t.theme!==n.theme&&t.theme||e||n.theme},yt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,bt=/(^-|-$)/g;function _t(t){return t.replace(yt,"-").replace(bt,"")}var wt=function(t){return W(K(t)>>>0)};function xt(t){return"string"==typeof t&&!0}var kt=function(t){return"function"==typeof t||"object"==typeof t&&null!==t&&!Array.isArray(t)},St=function(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t};function At(t,e,n){var i=t[n];kt(e)&&kt(i)?Et(i,e):t[n]=e}function Et(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var r=0,o=n;r<o.length;r++){var s=o[r];if(kt(s))for(var a in s)St(a)&&At(t,s[a],a)}return t}var Tt=o.a.createContext();Tt.Consumer;var Ct={};function Mt(t,e,n){var i=_(t),s=!xt(t),a=e.attrs,l=void 0===a?m:a,c=e.componentId,h=void 0===c?function(t,e){var n="string"!=typeof t?"sc":_t(t);Ct[n]=(Ct[n]||0)+1;var i=n+"-"+wt("5.3.0"+n+Ct[n]);return e?e+"-"+i:i}(e.displayName,e.parentComponentId):c,d=e.displayName,g=void 0===d?function(t){return xt(t)?"styled."+t:"Styled("+b(t)+")"}(t):d,w=e.displayName&&e.componentId?_t(e.displayName)+"-"+e.componentId:e.componentId||h,x=i&&t.attrs?Array.prototype.concat(t.attrs,l).filter(Boolean):l,k=e.shouldForwardProp;i&&t.shouldForwardProp&&(k=e.shouldForwardProp?function(n,i,r){return t.shouldForwardProp(n,i,r)&&e.shouldForwardProp(n,i,r)}:t.shouldForwardProp);var S,A=new Z(n,w,i?t.componentStyle:void 0),E=A.isStatic&&0===l.length,T=function(t,e){return function(t,e,n,i){var o=t.attrs,s=t.componentStyle,a=t.defaultProps,l=t.foldedComponentIds,c=t.shouldForwardProp,h=t.styledComponentId,f=t.target,d=function(t,e,n){void 0===t&&(t=v);var i=p({},e,{theme:t}),r={};return n.forEach((function(t){var e,n,o,s=t;for(e in y(s)&&(s=s(i)),s)i[e]=r[e]="className"===e?(n=r[e],o=s[e],n&&o?n+" "+o:n||o):s[e]})),[i,r]}(vt(e,Object(r.useContext)(Tt),a)||v,e,o),g=d[0],m=d[1],b=function(t,e,n,i){var r=ot(),o=st();return e?t.generateAndInjectStyles(v,r,o):t.generateAndInjectStyles(n,r,o)}(s,i,g),_=n,w=m.$as||e.$as||m.as||e.as||f,x=xt(w),k=m!==e?p({},e,{},m):e,S={};for(var A in k)"$"!==A[0]&&"as"!==A&&("forwardedAs"===A?S.as=k[A]:(c?c(A,u.a,w):!x||Object(u.a)(A))&&(S[A]=k[A]));return e.style&&m.style!==e.style&&(S.style=p({},e.style,{},m.style)),S.className=Array.prototype.concat(l,h,b!==h?b:null,e.className,m.className).filter(Boolean).join(" "),S.ref=_,Object(r.createElement)(w,S)}(S,t,e,E)};return T.displayName=g,(S=o.a.forwardRef(T)).attrs=x,S.componentStyle=A,S.displayName=g,S.shouldForwardProp=k,S.foldedComponentIds=i?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):m,S.styledComponentId=w,S.target=i?t.target:t,S.withComponent=function(t){var i=e.componentId,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(e,["componentId"]),o=i&&i+"-"+(xt(t)?t:_t(b(t)));return Mt(t,p({},r,{attrs:x,componentId:o}),n)},Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?Et({},t.defaultProps,e):e}}),S.toString=function(){return"."+S.styledComponentId},s&&f()(S,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),S}var Lt=function(t){return function t(e,n,r){if(void 0===r&&(r=v),!Object(i.isValidElementType)(n))return S(1,String(n));var o=function(){return e(n,r,mt.apply(void 0,arguments))};return o.withConfig=function(i){return t(e,n,p({},r,{},i))},o.attrs=function(i){return t(e,n,p({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},o}(Mt,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(t){Lt[t]=Lt(t)}));!function(){function t(t,e){this.rules=t,this.componentId=e,this.isStatic=Y(t),U.registerId(this.componentId+1)}var e=t.prototype;e.createStyles=function(t,e,n,i){var r=i(gt(this.rules,e,n,i).join(""),""),o=this.componentId+t;n.insertRules(o,o,r)},e.removeStyles=function(t,e){e.clearRules(this.componentId+t)},e.renderStyles=function(t,e,n,i){t>2&&U.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,i)}}();!function(){function t(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString(),n=D();return"<style "+[n&&'nonce="'+n+'"',w+'="true"','data-styled-version="5.3.0"'].filter(Boolean).join(" ")+">"+e+"</style>"},this.getStyleTags=function(){return t.sealed?S(2):t._emitSheetCSS()},this.getStyleElement=function(){var e;if(t.sealed)return S(2);var n=((e={})[w]="",e["data-styled-version"]="5.3.0",e.dangerouslySetInnerHTML={__html:t.instance.toString()},e),i=D();return i&&(n.nonce=i),[o.a.createElement("style",p({},n,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new U({isServer:!0}),this.sealed=!1}var e=t.prototype;e.collectStyles=function(t){return this.sealed?S(2):o.a.createElement(at,{sheet:this.instance},t)},e.interleaveWithNodeStream=function(t){return S(3)}}();e.a=Lt}).call(this,n(28))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(t){!function(){var t=function(){return this}();t||"undefined"==typeof window||(t=window);var e=function t(e,n,i){"string"===typeof e?(2==arguments.length&&(i=n),t.modules[e]||(t.payloads[e]=i,t.modules[e]=null)):t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};e.modules={},e.payloads={};var n=function(t,e,n){if("string"===typeof e){var r=o(t,e);if(void 0!=r)return n&&n(),r}else if("[object Array]"===Object.prototype.toString.call(e)){for(var s=[],a=0,l=e.length;a<l;++a){var c=o(t,e[a]);if(void 0==c&&i.original)return;s.push(c)}return n&&n.apply(null,s)||!0}},i=function t(e,i){var r=n("",e,i);return void 0==r&&t.original?t.original.apply(this,arguments):r},r=function t(e,n){if(-1!==n.indexOf("!")){var i=n.split("!");return t(e,i[0])+"!"+t(e,i[1])}if("."==n.charAt(0))for(n=e.split("/").slice(0,-1).join("/")+"/"+n;-1!==n.indexOf(".")&&r!=n;){var r=n;n=n.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return n},o=function(t,i){i=r(t,i);var o=e.modules[i];if(!o){if("function"===typeof(o=e.payloads[i])){var s={},a={id:i,uri:"",exports:s,packaged:!0};s=o((function(t,e){return n(i,t,e)}),s,a)||a.exports,e.modules[i]=s,delete e.payloads[i]}o=e.modules[i]=s||o}return o};!function(n){var r=t;n&&(t[n]||(t[n]={}),r=t[n]),r.define&&r.define.packaged||(e.original=r.define,r.define=e,r.define.packaged=!0),r.require&&r.require.packaged||(i.original=r.require,r.require=i,r.require.packaged=!0)}("ace")}(),ace.define("ace/lib/fixoldbrowsers",["require","exports","module"],(function(t,e,n){"use strict";"undefined"==typeof Element||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),ace.define("ace/lib/useragent",["require","exports","module"],(function(t,e,n){"use strict";e.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},e.getOS=function(){return e.isMac?e.OS.MAC:e.isLinux?e.OS.LINUX:e.OS.WINDOWS};var i="object"==typeof navigator?navigator:{},r=(/mac|win|linux/i.exec(i.platform)||["other"])[0].toLowerCase(),o=i.userAgent||"",s=i.appName||"";e.isWin="win"==r,e.isMac="mac"==r,e.isLinux="linux"==r,e.isIE="Microsoft Internet Explorer"==s||s.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),e.isOldIE=e.isIE&&e.isIE<9,e.isGecko=e.isMozilla=o.match(/ Gecko\/\d+/),e.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),e.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,e.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,e.isEdge=parseFloat(o.split(" Edge/")[1])||void 0,e.isAIR=o.indexOf("AdobeAIR")>=0,e.isAndroid=o.indexOf("Android")>=0,e.isChromeOS=o.indexOf(" CrOS ")>=0,e.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,e.isIOS&&(e.isMac=!0),e.isMobile=e.isIOS||e.isAndroid})),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("./useragent");if(e.buildDom=function t(e,n,i){if("string"==typeof e&&e){var r=document.createTextNode(e);return n&&n.appendChild(r),r}if(!Array.isArray(e))return e&&e.appendChild&&n&&n.appendChild(e),e;if("string"!=typeof e[0]||!e[0]){for(var o=[],s=0;s<e.length;s++){var a=t(e[s],n,i);a&&o.push(a)}return o}var l=document.createElement(e[0]),c=e[1],u=1;c&&"object"==typeof c&&!Array.isArray(c)&&(u=2);for(s=u;s<e.length;s++)t(e[s],l,i);return 2==u&&Object.keys(c).forEach((function(t){var e=c[t];"class"===t?l.className=Array.isArray(e)?e.join(" "):e:"function"==typeof e||"value"==t||"$"==t[0]?l[t]=e:"ref"===t?i&&(i[e]=l):null!=e&&l.setAttribute(t,e)})),n&&n.appendChild(l),l},e.getDocumentHead=function(t){return t||(t=document),t.head||t.getElementsByTagName("head")[0]||t.documentElement},e.createElement=function(t,e){return document.createElementNS?document.createElementNS(e||"http://www.w3.org/1999/xhtml",t):document.createElement(t)},e.removeChildren=function(t){t.innerHTML=""},e.createTextNode=function(t,e){return(e?e.ownerDocument:document).createTextNode(t)},e.createFragment=function(t){return(t?t.ownerDocument:document).createDocumentFragment()},e.hasCssClass=function(t,e){return-1!==(t.className+"").split(/\s+/g).indexOf(e)},e.addCssClass=function(t,n){e.hasCssClass(t,n)||(t.className+=" "+n)},e.removeCssClass=function(t,e){for(var n=t.className.split(/\s+/g);;){var i=n.indexOf(e);if(-1==i)break;n.splice(i,1)}t.className=n.join(" ")},e.toggleCssClass=function(t,e){for(var n=t.className.split(/\s+/g),i=!0;;){var r=n.indexOf(e);if(-1==r)break;i=!1,n.splice(r,1)}return i&&n.push(e),t.className=n.join(" "),i},e.setCssClass=function(t,n,i){i?e.addCssClass(t,n):e.removeCssClass(t,n)},e.hasCssString=function(t,e){var n,i=0;if(n=(e=e||document).querySelectorAll("style"))for(;i<n.length;)if(n[i++].id===t)return!0},e.importCssString=function(t,n,i){var r=i;i&&i.getRootNode&&(r=i.getRootNode())&&r!=i||(r=document);var o=r.ownerDocument||r;if(n&&e.hasCssString(n,r))return null;n&&(t+="\n/*# sourceURL=ace/css/"+n+" */");var s=e.createElement("style");s.appendChild(o.createTextNode(t)),n&&(s.id=n),r==o&&(r=e.getDocumentHead(o)),r.insertBefore(s,r.firstChild)},e.importCssStylsheet=function(t,n){e.buildDom(["link",{rel:"stylesheet",href:t}],e.getDocumentHead(n))},e.scrollbarWidth=function(t){var n=e.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var i=e.createElement("ace_outer"),r=i.style;r.position="absolute",r.left="-10000px",r.overflow="hidden",r.width="200px",r.minWidth="0px",r.height="150px",r.display="block",i.appendChild(n);var o=t.documentElement;o.appendChild(i);var s=n.offsetWidth;r.overflow="scroll";var a=n.offsetWidth;return s==a&&(a=i.clientWidth),o.removeChild(i),s-a},"undefined"==typeof document&&(e.importCssString=function(){}),e.computedStyle=function(t,e){return window.getComputedStyle(t,"")||{}},e.setStyle=function(t,e,n){t[e]!==n&&(t[e]=n)},e.HAS_CSS_ANIMATION=!1,e.HAS_CSS_TRANSFORMS=!1,e.HI_DPI=!i.isWin||"undefined"!==typeof window&&window.devicePixelRatio>=1.5,"undefined"!==typeof document){var r=document.createElement("div");e.HI_DPI&&void 0!==r.style.transform&&(e.HAS_CSS_TRANSFORMS=!0),i.isEdge||"undefined"===typeof r.style.animationName||(e.HAS_CSS_ANIMATION=!0),r=null}e.HAS_CSS_TRANSFORMS?e.translate=function(t,e,n){t.style.transform="translate("+Math.round(e)+"px, "+Math.round(n)+"px)"}:e.translate=function(t,e,n){t.style.top=Math.round(n)+"px",t.style.left=Math.round(e)+"px"}})),ace.define("ace/lib/oop",["require","exports","module"],(function(t,e,n){"use strict";e.inherits=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},e.mixin=function(t,e){for(var n in e)t[n]=e[n];return t},e.implement=function(t,n){e.mixin(t,n)}})),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],(function(t,e,n){"use strict";var i=t("./oop"),r=function(){var t,e,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(e in n.FUNCTION_KEYS)t=n.FUNCTION_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);for(e in n.PRINTABLE_KEYS)t=n.PRINTABLE_KEYS[e].toLowerCase(),n[t]=parseInt(e,10);return i.mixin(n,n.MODIFIER_KEYS),i.mixin(n,n.PRINTABLE_KEYS),i.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],e=Math.pow(2,t.length);e--;)n.KEY_MODS[e]=t.filter((function(t){return e&n.KEY_MODS[t]})).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();i.mixin(e,r),e.keyCodeToString=function(t){var e=r[t];return"string"!=typeof e&&(e=String.fromCharCode(t)),e.toLowerCase()}})),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(t,e,n){"use strict";var i,r=t("./keys"),o=t("./useragent"),s=null,a=0;function l(){return void 0==i&&function(){i=!1;try{document.createComment("").addEventListener("test",(function(){}),{get passive(){i={passive:!1}}})}catch(t){}}(),i}function c(t,e,n){this.elem=t,this.type=e,this.callback=n}c.prototype.destroy=function(){h(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var u=e.addListener=function(t,e,n,i){t.addEventListener(e,n,l()),i&&i.$toDestroy.push(new c(t,e,n))},h=e.removeListener=function(t,e,n){t.removeEventListener(e,n,l())};e.stopEvent=function(t){return e.stopPropagation(t),e.preventDefault(t),!1},e.stopPropagation=function(t){t.stopPropagation&&t.stopPropagation()},e.preventDefault=function(t){t.preventDefault&&t.preventDefault()},e.getButton=function(t){return"dblclick"==t.type?0:"contextmenu"==t.type||o.isMac&&t.ctrlKey&&!t.altKey&&!t.shiftKey?2:t.button},e.capture=function(t,e,n){var i=t&&t.ownerDocument||document;function r(t){e&&e(t),n&&n(t),h(i,"mousemove",e),h(i,"mouseup",r),h(i,"dragstart",r)}return u(i,"mousemove",e),u(i,"mouseup",r),u(i,"dragstart",r),r},e.addMouseWheelListener=function(t,e,n){"onmousewheel"in t?u(t,"mousewheel",(function(t){void 0!==t.wheelDeltaX?(t.wheelX=-t.wheelDeltaX/8,t.wheelY=-t.wheelDeltaY/8):(t.wheelX=0,t.wheelY=-t.wheelDelta/8),e(t)}),n):"onwheel"in t?u(t,"wheel",(function(t){switch(t.deltaMode){case t.DOM_DELTA_PIXEL:t.wheelX=.35*t.deltaX||0,t.wheelY=.35*t.deltaY||0;break;case t.DOM_DELTA_LINE:case t.DOM_DELTA_PAGE:t.wheelX=5*(t.deltaX||0),t.wheelY=5*(t.deltaY||0)}e(t)}),n):u(t,"DOMMouseScroll",(function(t){t.axis&&t.axis==t.HORIZONTAL_AXIS?(t.wheelX=5*(t.detail||0),t.wheelY=0):(t.wheelX=0,t.wheelY=5*(t.detail||0)),e(t)}),n)},e.addMultiMouseDownListener=function(t,n,i,r,s){var a,l,c,h=0,f={2:"dblclick",3:"tripleclick",4:"quadclick"};function p(t){if(0!==e.getButton(t)?h=0:t.detail>1?++h>4&&(h=1):h=1,o.isIE){var s=Math.abs(t.clientX-a)>5||Math.abs(t.clientY-l)>5;c&&!s||(h=1),c&&clearTimeout(c),c=setTimeout((function(){c=null}),n[h-1]||600),1==h&&(a=t.clientX,l=t.clientY)}if(t._clicks=h,i[r]("mousedown",t),h>4)h=0;else if(h>1)return i[r](f[h],t)}Array.isArray(t)||(t=[t]),t.forEach((function(t){u(t,"mousedown",p,s)}))};var f=function(t){return 0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0)};function p(t,e,n){var i=f(e);if(!o.isMac&&s){if(e.getModifierState&&(e.getModifierState("OS")||e.getModifierState("Win"))&&(i|=8),s.altGr){if(3==(3&i))return;s.altGr=0}if(18===n||17===n){var l="location"in e?e.location:e.keyLocation;if(17===n&&1===l)1==s[n]&&(a=e.timeStamp);else if(18===n&&3===i&&2===l){e.timeStamp-a<50&&(s.altGr=!0)}}}if((n in r.MODIFIER_KEYS&&(n=-1),!i&&13===n)&&(3===(l="location"in e?e.location:e.keyLocation)&&(t(e,i,-n),e.defaultPrevented)))return;if(o.isChromeOS&&8&i){if(t(e,i,n),e.defaultPrevented)return;i&=-9}return!!(i||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS)&&t(e,i,n)}function d(){s=Object.create(null)}if(e.getModifierString=function(t){return r.KEY_MODS[f(t)]},e.addCommandKeyListener=function(t,n,i){if(o.isOldGecko||o.isOpera&&!("KeyboardEvent"in window)){var r=null;u(t,"keydown",(function(t){r=t.keyCode}),i),u(t,"keypress",(function(t){return p(n,t,r)}),i)}else{var a=null;u(t,"keydown",(function(t){s[t.keyCode]=(s[t.keyCode]||0)+1;var e=p(n,t,t.keyCode);return a=t.defaultPrevented,e}),i),u(t,"keypress",(function(t){a&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)&&(e.stopEvent(t),a=null)}),i),u(t,"keyup",(function(t){s[t.keyCode]=null}),i),s||(d(),u(window,"focus",d))}},"object"==typeof window&&window.postMessage&&!o.isOldIE){var g=1;e.nextTick=function(t,n){n=n||window;var i="zero-timeout-message-"+g++;u(n,"message",(function r(o){o.data==i&&(e.stopPropagation(o),h(n,"message",r),t())})),n.postMessage(i,"*")}}e.$idleBlocked=!1,e.onIdle=function(t,n){return setTimeout((function n(){e.$idleBlocked?setTimeout(n,100):t()}),n)},e.$idleBlockId=null,e.blockIdle=function(t){e.$idleBlockId&&clearTimeout(e.$idleBlockId),e.$idleBlocked=!0,e.$idleBlockId=setTimeout((function(){e.$idleBlocked=!1}),t||100)},e.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),e.nextFrame?e.nextFrame=e.nextFrame.bind(window):e.nextFrame=function(t){setTimeout(t,17)}})),ace.define("ace/range",["require","exports","module"],(function(t,e,n){"use strict";var i=function(t,e,n,i){this.start={row:t,column:e},this.end={row:n,column:i}};(function(){this.isEqual=function(t){return this.start.row===t.start.row&&this.end.row===t.end.row&&this.start.column===t.start.column&&this.end.column===t.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(t,e){return 0==this.compare(t,e)},this.compareRange=function(t){var e,n=t.end,i=t.start;return 1==(e=this.compare(n.row,n.column))?1==(e=this.compare(i.row,i.column))?2:0==e?1:0:-1==e?-2:-1==(e=this.compare(i.row,i.column))?-1:1==e?42:0},this.comparePoint=function(t){return this.compare(t.row,t.column)},this.containsRange=function(t){return 0==this.comparePoint(t.start)&&0==this.comparePoint(t.end)},this.intersects=function(t){var e=this.compareRange(t);return-1==e||0==e||1==e},this.isEnd=function(t,e){return this.end.row==t&&this.end.column==e},this.isStart=function(t,e){return this.start.row==t&&this.start.column==e},this.setStart=function(t,e){"object"==typeof t?(this.start.column=t.column,this.start.row=t.row):(this.start.row=t,this.start.column=e)},this.setEnd=function(t,e){"object"==typeof t?(this.end.column=t.column,this.end.row=t.row):(this.end.row=t,this.end.column=e)},this.inside=function(t,e){return 0==this.compare(t,e)&&(!this.isEnd(t,e)&&!this.isStart(t,e))},this.insideStart=function(t,e){return 0==this.compare(t,e)&&!this.isEnd(t,e)},this.insideEnd=function(t,e){return 0==this.compare(t,e)&&!this.isStart(t,e)},this.compare=function(t,e){return this.isMultiLine()||t!==this.start.row?t<this.start.row?-1:t>this.end.row?1:this.start.row===t?e>=this.start.column?0:-1:this.end.row===t?e<=this.end.column?0:1:0:e<this.start.column?-1:e>this.end.column?1:0},this.compareStart=function(t,e){return this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.compareEnd=function(t,e){return this.end.row==t&&this.end.column==e?1:this.compare(t,e)},this.compareInside=function(t,e){return this.end.row==t&&this.end.column==e?1:this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.clipRows=function(t,e){if(this.end.row>e)var n={row:e+1,column:0};else if(this.end.row<t)n={row:t,column:0};if(this.start.row>e)var r={row:e+1,column:0};else if(this.start.row<t)r={row:t,column:0};return i.fromPoints(r||this.start,n||this.end)},this.extend=function(t,e){var n=this.compare(t,e);if(0==n)return this;if(-1==n)var r={row:t,column:e};else var o={row:t,column:e};return i.fromPoints(r||this.start,o||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(t){var e=t.documentToScreenPosition(this.start),n=t.documentToScreenPosition(this.end);return new i(e.row,e.column,n.row,n.column)},this.moveBy=function(t,e){this.start.row+=t,this.start.column+=e,this.end.row+=t,this.end.column+=e}}).call(i.prototype),i.fromPoints=function(t,e){return new i(t.row,t.column,e.row,e.column)},i.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},i.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},e.Range=i})),ace.define("ace/lib/lang",["require","exports","module"],(function(t,e,n){"use strict";e.last=function(t){return t[t.length-1]},e.stringReverse=function(t){return t.split("").reverse().join("")},e.stringRepeat=function(t,e){for(var n="";e>0;)1&e&&(n+=t),(e>>=1)&&(t+=t);return n};var i=/^\s\s*/,r=/\s\s*$/;e.stringTrimLeft=function(t){return t.replace(i,"")},e.stringTrimRight=function(t){return t.replace(r,"")},e.copyObject=function(t){var e={};for(var n in t)e[n]=t[n];return e},e.copyArray=function(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n]&&"object"==typeof t[n]?e[n]=this.copyObject(t[n]):e[n]=t[n];return e},e.deepCopy=function t(e){if("object"!==typeof e||!e)return e;var n;if(Array.isArray(e)){n=[];for(var i=0;i<e.length;i++)n[i]=t(e[i]);return n}if("[object Object]"!==Object.prototype.toString.call(e))return e;for(var i in n={},e)n[i]=t(e[i]);return n},e.arrayToMap=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=1;return e},e.createMap=function(t){var e=Object.create(null);for(var n in t)e[n]=t[n];return e},e.arrayRemove=function(t,e){for(var n=0;n<=t.length;n++)e===t[n]&&t.splice(n,1)},e.escapeRegExp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},e.escapeHTML=function(t){return(""+t).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},e.getMatchOffsets=function(t,e){var n=[];return t.replace(e,(function(t){n.push({offset:arguments[arguments.length-2],length:t.length})})),n},e.deferredCall=function(t){var e=null,n=function(){e=null,t()},i=function t(i){return t.cancel(),e=setTimeout(n,i||0),t};return i.schedule=i,i.call=function(){return this.cancel(),t(),i},i.cancel=function(){return clearTimeout(e),e=null,i},i.isPending=function(){return e},i},e.delayedCall=function(t,e){var n=null,i=function(){n=null,t()},r=function(t){null==n&&(n=setTimeout(i,t||e))};return r.delay=function(t){n&&clearTimeout(n),n=setTimeout(i,t||e)},r.schedule=r,r.call=function(){this.cancel(),t()},r.cancel=function(){n&&clearTimeout(n),n=null},r.isPending=function(){return n},r}})),ace.define("ace/clipboard",["require","exports","module"],(function(t,e,n){"use strict";var i;n.exports={lineMode:!1,pasteCancelled:function(){return!!(i&&i>Date.now()-50)||(i=!1)},cancel:function(){i=Date.now()}}})),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],(function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=t("../lib/dom"),s=t("../lib/lang"),a=t("../clipboard"),l=r.isChrome<18,c=r.isIE,u=r.isChrome>63,h=400,f=t("../lib/keys"),p=f.KEY_MODS,d=r.isIOS,g=d?/\s/:/\n/,m=r.isMobile;e.TextInput=function(t,e){var n=o.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",t.insertBefore(n,t.firstChild);var v=!1,y=!1,b=!1,_=!1,w="";m||(n.style.fontSize="1px");var x=!1,k=!1,S="",A=0,E=0,T=0;try{var C=document.activeElement===n}catch(W){}i.addListener(n,"blur",(function(t){k||(e.onBlur(t),C=!1)}),e),i.addListener(n,"focus",(function(t){if(!k){if(C=!0,r.isEdge)try{if(!document.hasFocus())return}catch(t){}e.onFocus(t),r.isEdge?setTimeout(M):M()}}),e),this.$focusScroll=!1,this.focus=function(){if(w||u||"browser"==this.$focusScroll)return n.focus({preventScroll:!0});var t=n.style.top;n.style.position="fixed",n.style.top="0px";try{var e=0!=n.getBoundingClientRect().top}catch(W){return}var i=[];if(e)for(var r=n.parentElement;r&&1==r.nodeType;)i.push(r),r.setAttribute("ace_nocontext",!0),r=!r.parentElement&&r.getRootNode?r.getRootNode().host:r.parentElement;n.focus({preventScroll:!0}),e&&i.forEach((function(t){t.removeAttribute("ace_nocontext")})),setTimeout((function(){n.style.position="","0px"==n.style.top&&(n.style.top=t)}),0)},this.blur=function(){n.blur()},this.isFocused=function(){return C},e.on("beforeEndOperation",(function(){var t=e.curOp,i=t&&t.command&&t.command.name;if("insertstring"!=i){var r=i&&(t.docChanged||t.selectionChanged);b&&r&&(S=n.value="",F()),M()}}));var M=d?function(t){if(C&&(!v||t)&&!_){t||(t="");var i="\n ab"+t+"cde fg\n";i!=n.value&&(n.value=S=i);var r=4+(t.length||(e.selection.isEmpty()?0:1));4==A&&E==r||n.setSelectionRange(4,r),A=4,E=r}}:function(){if(!b&&!_&&(C||R)){b=!0;var t=0,i=0,r="";if(e.session){var o=e.selection,s=o.getRange(),a=o.cursor.row;if(t=s.start.column,i=s.end.column,r=e.session.getLine(a),s.start.row!=a){var l=e.session.getLine(a-1);t=s.start.row<a-1?0:t,i+=l.length+1,r=l+"\n"+r}else if(s.end.row!=a){var c=e.session.getLine(a+1);i=s.end.row>a+1?c.length:i,i+=r.length+1,r=r+"\n"+c}else m&&a>0&&(r="\n"+r,i+=1,t+=1);r.length>h&&(t<h&&i<h?r=r.slice(0,h):(r="\n",t==i?t=i=0:(t=0,i=1)))}var u=r+"\n\n";if(u!=S&&(n.value=S=u,A=E=u.length),R&&(A=n.selectionStart,E=n.selectionEnd),E!=i||A!=t||n.selectionEnd!=E)try{n.setSelectionRange(t,i),A=t,E=i}catch(W){}b=!1}};this.resetSelection=M,C&&e.onFocus();var L=null;this.setInputHandler=function(t){L=t},this.getInputHandler=function(){return L};var R=!1,O=function(t,i){if(R&&(R=!1),y)return M(),t&&e.onPaste(t),y=!1,"";for(var o=n.selectionStart,s=n.selectionEnd,a=A,l=S.length-E,c=t,u=t.length-o,h=t.length-s,f=0;a>0&&S[f]==t[f];)f++,a--;for(c=c.slice(f),f=1;l>0&&S.length-f>A-1&&S[S.length-f]==t[t.length-f];)f++,l--;u-=f-1,h-=f-1;var p=c.length-f+1;if(p<0&&(a=-p,p=0),c=c.slice(0,p),!i&&!c&&!u&&!a&&!l&&!h)return"";_=!0;var d=!1;return r.isAndroid&&". "==c&&(c="  ",d=!0),c&&!a&&!l&&!u&&!h||x?e.onTextInput(c):e.onTextInput(c,{extendLeft:a,extendRight:l,restoreStart:u,restoreEnd:h}),_=!1,S=t,A=o,E=s,T=h,d?"\n":c},I=function(t){if(b)return $();if(t&&t.inputType){if("historyUndo"==t.inputType)return e.execCommand("undo");if("historyRedo"==t.inputType)return e.execCommand("redo")}var i=n.value,r=O(i,!0);(i.length>500||g.test(r)||m&&A<1&&A==E)&&M()},P=function t(e,n,i){var r=e.clipboardData||window.clipboardData;if(r&&!l){var o=c||i?"Text":"text/plain";try{return n?!1!==r.setData(o,n):r.getData(o)}catch(e){if(!i)return t(e,n,!0)}}},N=function(t,r){var o=e.getCopyText();if(!o)return i.preventDefault(t);P(t,o)?(d&&(M(o),v=o,setTimeout((function(){v=!1}),10)),r?e.onCut():e.onCopy(),i.preventDefault(t)):(v=!0,n.value=o,n.select(),setTimeout((function(){v=!1,M(),r?e.onCut():e.onCopy()})))},D=function(t){N(t,!0)},j=function(t){N(t,!1)},z=function(t){var o=P(t);a.pasteCancelled()||("string"==typeof o?(o&&e.onPaste(o,t),r.isIE&&setTimeout(M),i.preventDefault(t)):(n.value="",y=!0))};i.addCommandKeyListener(n,e.onCommandKey.bind(e),e),i.addListener(n,"select",(function(t){b||(v?v=!1:!function(t){return 0===t.selectionStart&&t.selectionEnd>=S.length&&t.value===S&&S&&t.selectionEnd!==E}(n)?m&&n.selectionStart!=A&&M():(e.selectAll(),M()))}),e),i.addListener(n,"input",I,e),i.addListener(n,"cut",D,e),i.addListener(n,"copy",j,e),i.addListener(n,"paste",z,e),"oncut"in n&&"oncopy"in n&&"onpaste"in n||i.addListener(t,"keydown",(function(t){if((!r.isMac||t.metaKey)&&t.ctrlKey)switch(t.keyCode){case 67:j(t);break;case 86:z(t);break;case 88:D(t)}}),e);var $=function(){if(b&&e.onCompositionUpdate&&!e.$readOnly){if(x)return B();if(b.useTextareaForIME)e.onCompositionUpdate(n.value);else{var t=n.value;O(t),b.markerRange&&(b.context&&(b.markerRange.start.column=b.selectionStart=b.context.compositionStartOffset),b.markerRange.end.column=b.markerRange.start.column+E-b.selectionStart+T)}}},F=function(t){e.onCompositionEnd&&!e.$readOnly&&(b=!1,e.onCompositionEnd(),e.off("mousedown",B),t&&I())};function B(){k=!0,n.blur(),n.focus(),k=!1}var H,U=s.delayedCall($,50).schedule.bind(null,null);function G(){clearTimeout(H),H=setTimeout((function(){w&&(n.style.cssText=w,w=""),e.renderer.$isMousePressed=!1,e.renderer.$keepTextAreaAtCursor&&e.renderer.$moveTextAreaToCursor()}),0)}i.addListener(n,"compositionstart",(function(t){if(!b&&e.onCompositionStart&&!e.$readOnly&&(b={},!x)){t.data&&(b.useTextareaForIME=!1),setTimeout($,0),e._signal("compositionStart"),e.on("mousedown",B);var i=e.getSelectionRange();i.end.row=i.start.row,i.end.column=i.start.column,b.markerRange=i,b.selectionStart=A,e.onCompositionStart(b),b.useTextareaForIME?(S=n.value="",A=0,E=0):(n.msGetInputContext&&(b.context=n.msGetInputContext()),n.getInputContext&&(b.context=n.getInputContext()))}}),e),i.addListener(n,"compositionupdate",$,e),i.addListener(n,"keyup",(function(t){27==t.keyCode&&n.value.length<n.selectionStart&&(b||(S=n.value),A=E=-1,M()),U()}),e),i.addListener(n,"keydown",U,e),i.addListener(n,"compositionend",F,e),this.getElement=function(){return n},this.setCommandMode=function(t){x=t,n.readOnly=!1},this.setReadOnly=function(t){x||(n.readOnly=t)},this.setCopyWithEmptySelection=function(t){},this.onContextMenu=function(t){R=!0,M(),e._emit("nativecontextmenu",{target:e,domEvent:t}),this.moveToMouse(t,!0)},this.moveToMouse=function(t,s){w||(w=n.style.cssText),n.style.cssText=(s?"z-index:100000;":"")+(r.isIE?"opacity:0.1;":"")+"text-indent: -"+(A+E)*e.renderer.characterWidth*.5+"px;";var a=e.container.getBoundingClientRect(),l=o.computedStyle(e.container),c=a.top+(parseInt(l.borderTopWidth)||0),u=a.left+(parseInt(a.borderLeftWidth)||0),h=a.bottom-c-n.clientHeight-2,f=function(t){o.translate(n,t.clientX-u-2,Math.min(t.clientY-c-2,h))};f(t),"mousedown"==t.type&&(e.renderer.$isMousePressed=!0,clearTimeout(H),r.isWin&&i.capture(e.container,f,G))},this.onContextMenuClose=G;var V=function(t){e.textInput.onContextMenu(t),G()};i.addListener(n,"mouseup",V,e),i.addListener(n,"mousedown",(function(t){t.preventDefault(),G()}),e),i.addListener(e.renderer.scroller,"contextmenu",V,e),i.addListener(n,"contextmenu",V,e),d&&function(t,e,n){var i=null,r=!1;n.addEventListener("keydown",(function(t){i&&clearTimeout(i),r=!0}),!0),n.addEventListener("keyup",(function(t){i=setTimeout((function(){r=!1}),100)}),!0);var o=function(t){if(document.activeElement===n&&!(r||b||e.$mouseHandler.isMousePressed)&&!v){var i=n.selectionStart,o=n.selectionEnd,s=null,a=0;if(0==i?s=f.up:1==i?s=f.home:o>E&&"\n"==S[o]?s=f.end:i<A&&" "==S[i-1]?(s=f.left,a=p.option):i<A||i==A&&E!=A&&i==o?s=f.left:o>E&&S.slice(0,o).split("\n").length>2?s=f.down:o>E&&" "==S[o-1]?(s=f.right,a=p.option):(o>E||o==E&&E!=A&&i==o)&&(s=f.right),i!==o&&(a|=p.shift),s){if(!e.onCommandKey({},a,s)&&e.commands){s=f.keyCodeToString(s);var l=e.commands.findKeyCommand(a,s);l&&e.execCommand(l)}A=i,E=o,M("")}}};document.addEventListener("selectionchange",o),e.on("destroy",(function(){document.removeEventListener("selectionchange",o)}))}(0,e,n)},e.$setUserAgentForTests=function(t,e){m=t,d=e}})),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("../lib/useragent");function r(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),e.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(e){t[e]=this[e]}),this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}function o(t,e){if(t.start.row==t.end.row)var n=2*e.column-t.start.column-t.end.column;else if(t.start.row!=t.end.row-1||t.start.column||t.end.column)n=2*e.row-t.start.row-t.end.row;else var n=e.column-4;return n<0?{cursor:t.start,anchor:t.end}:{cursor:t.end,anchor:t.start}}(function(){this.onMouseDown=function(t){var e=t.inSelection(),n=t.getDocumentPosition();this.mousedownEvent=t;var r=this.editor,o=t.getButton();return 0!==o?((r.getSelectionRange().isEmpty()||1==o)&&r.selection.moveToPosition(n),void(2==o&&(r.textInput.onContextMenu(t.domEvent),i.isMozilla||t.preventDefault()))):(this.mousedownEvent.time=Date.now(),!e||r.isFocused()||(r.focus(),!this.$focusTimeout||this.$clickSelection||r.inMultiSelectMode)?(this.captureMouse(t),this.startSelect(n,t.domEvent._clicks>1),t.preventDefault()):(this.setState("focusWait"),void this.captureMouse(t)))},this.startSelect=function(t,e){t=t||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(t):e||n.selection.moveToPosition(t),e||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var t,e=this.editor,n=e.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(-1==i)t=this.$clickSelection.end;else if(1==i)t=this.$clickSelection.start;else{var r=o(this.$clickSelection,n);n=r.cursor,t=r.anchor}e.selection.setSelectionAnchor(t.row,t.column)}e.selection.selectToPosition(n),e.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(t){var e,n=this.editor,i=n.renderer.screenToTextCoordinates(this.x,this.y),r=n.selection[t](i.row,i.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(r.start),a=this.$clickSelection.comparePoint(r.end);if(-1==s&&a<=0)e=this.$clickSelection.end,r.end.row==i.row&&r.end.column==i.column||(i=r.start);else if(1==a&&s>=0)e=this.$clickSelection.start,r.start.row==i.row&&r.start.column==i.column||(i=r.end);else if(-1==s&&1==a)i=r.end,e=r.start;else{var l=o(this.$clickSelection,i);i=l.cursor,e=l.anchor}n.selection.setSelectionAnchor(e.row,e.column)}n.selection.selectToPosition(i),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var t,e,n,i,r=(t=this.mousedownEvent.x,e=this.mousedownEvent.y,n=this.x,i=this.y,Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))),o=Date.now();(r>0||o-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(t){var e=t.getDocumentPosition(),n=this.editor,i=n.session.getBracketRange(e);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(e.row,e.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(t){var e=t.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();i.isMultiLine()&&i.contains(e.row,e.column)?(this.$clickSelection=n.selection.getLineRange(i.start.row),this.$clickSelection.end=n.selection.getLineRange(i.end.row).end):this.$clickSelection=n.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(t){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(t){if(!t.getAccelKey()){t.getShiftKey()&&t.wheelY&&!t.wheelX&&(t.wheelX=t.wheelY,t.wheelY=0);var e=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,i=t.domEvent.timeStamp,r=i-n.t,o=r?t.wheelX/r:n.vx,s=r?t.wheelY/r:n.vy;r<550&&(o=(o+n.vx)/2,s=(s+n.vy)/2);var a=Math.abs(o/s),l=!1;if(a>=1&&e.renderer.isScrollableBy(t.wheelX*t.speed,0)&&(l=!0),a<=1&&e.renderer.isScrollableBy(0,t.wheelY*t.speed)&&(l=!0),l)n.allowed=i;else if(i-n.allowed<550){Math.abs(o)<=1.5*Math.abs(n.vx)&&Math.abs(s)<=1.5*Math.abs(n.vy)?(l=!0,n.allowed=i):n.allowed=0}return n.t=i,n.vx=o,n.vy=s,l?(e.renderer.scrollBy(t.wheelX*t.speed,t.wheelY*t.speed),t.stop()):void 0}}}).call(r.prototype),e.DefaultHandlers=r})),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],(function(t,e,n){"use strict";t("./lib/oop");var i=t("./lib/dom");function r(t){this.isOpen=!1,this.$element=null,this.$parentNode=t}(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(t){this.getElement().textContent=t},this.setHtml=function(t){this.getElement().innerHTML=t},this.setPosition=function(t,e){this.getElement().style.left=t+"px",this.getElement().style.top=e+"px"},this.setClassName=function(t){i.addCssClass(this.getElement(),t)},this.show=function(t,e,n){null!=t&&this.setText(t),null!=e&&null!=n&&this.setPosition(e,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(r.prototype),e.Tooltip=r})),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],(function(t,e,n){"use strict";var i=t("../lib/dom"),r=t("../lib/oop"),o=t("../lib/event"),s=t("../tooltip").Tooltip;function a(t){s.call(this,t)}r.inherits(a,s),function(){this.setPosition=function(t,e){var n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,r=this.getWidth(),o=this.getHeight();(t+=15)+r>n&&(t-=t+r-n),(e+=15)+o>i&&(e-=20+o),s.prototype.setPosition.call(this,t,e)}}.call(a.prototype),e.GutterHandler=function(t){var e,n,r,s=t.editor,l=s.renderer.$gutterLayer,c=new a(s.container);function u(){e&&(e=clearTimeout(e)),r&&(c.hide(),r=null,s._signal("hideGutterTooltip",c),s.off("mousewheel",u))}function h(t){c.setPosition(t.x,t.y)}t.editor.setDefaultHandler("guttermousedown",(function(e){if(s.isFocused()&&0==e.getButton()&&"foldWidgets"!=l.getRegion(e)){var n=e.getDocumentPosition().row,i=s.session.selection;if(e.getShiftKey())i.selectTo(n,0);else{if(2==e.domEvent.detail)return s.selectAll(),e.preventDefault();t.$clickSelection=s.selection.getLineRange(n)}return t.setState("selectByLines"),t.captureMouse(e),e.preventDefault()}})),t.editor.setDefaultHandler("guttermousemove",(function(o){var a=o.domEvent.target||o.domEvent.srcElement;if(i.hasCssClass(a,"ace_fold-widget"))return u();r&&t.$tooltipFollowsMouse&&h(o),n=o,e||(e=setTimeout((function(){e=null,n&&!t.isMousePressed?function(){var e=n.getDocumentPosition().row,i=l.$annotations[e];if(!i)return u();if(e==s.session.getLength()){var o=s.renderer.pixelToScreenCoordinates(0,n.y).row,a=n.$pos;if(o>s.session.documentToScreenRow(a.row,a.column))return u()}if(r!=i)if(r=i.text.join("<br/>"),c.setHtml(r),c.show(),s._signal("showGutterTooltip",c),s.on("mousewheel",u),t.$tooltipFollowsMouse)h(n);else{var f=n.domEvent.target.getBoundingClientRect(),p=c.getElement().style;p.left=f.right+"px",p.top=f.bottom+"px"}}():u()}),50))})),o.addListener(s.renderer.$gutter,"mouseout",(function(t){n=null,r&&!e&&(e=setTimeout((function(){e=null,u()}),50))}),s),s.on("changeSession",u)}})),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=e.MouseEvent=function(t,e){this.domEvent=t,this.editor=e,this.x=this.clientX=t.clientX,this.y=this.clientY=t.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var t=this.editor.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var e=this.getDocumentPosition();this.$inSelection=t.contains(e.row,e.column)}return this.$inSelection},this.getButton=function(){return i.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=r.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(o.prototype)})),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("../lib/dom"),r=t("../lib/event"),o=t("../lib/useragent");function s(t){var e=t.editor,n=i.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",o.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(e){t[e]=this[e]}),this),e.on("mousedown",this.onMouseDown.bind(t));var s,l,c,u,h,f,p,d,g,m,v,y=e.container,b=0;function _(){var t=f;(function(t,n){var i=Date.now(),r=!n||t.row!=n.row,o=!n||t.column!=n.column;!m||r||o?(e.moveCursorToPosition(t),m=i,v={x:l,y:c}):a(v.x,v.y,l,c)>5?m=null:i-m>=200&&(e.renderer.scrollCursorIntoView(),m=null)})(f=e.renderer.screenToTextCoordinates(l,c),t),function(t,n){var i=Date.now(),r=e.renderer.layerConfig.lineHeight,o=e.renderer.layerConfig.characterWidth,s=e.renderer.scroller.getBoundingClientRect(),a={x:{left:l-s.left,right:s.right-l},y:{top:c-s.top,bottom:s.bottom-c}},u=Math.min(a.x.left,a.x.right),h=Math.min(a.y.top,a.y.bottom),f={row:t.row,column:t.column};u/o<=2&&(f.column+=a.x.left<a.x.right?-3:2),h/r<=1&&(f.row+=a.y.top<a.y.bottom?-1:1);var p=t.row!=f.row,d=t.column!=f.column,m=!n||t.row!=n.row;p||d&&!m?g?i-g>=200&&e.renderer.scrollCursorIntoView(f):g=i:g=null}(f,t)}function w(){h=e.selection.toOrientedRange(),s=e.session.addMarker(h,"ace_selection",e.getSelectionStyle()),e.clearSelection(),e.isFocused()&&e.renderer.$cursorLayer.setBlinking(!1),clearInterval(u),_(),u=setInterval(_,20),b=0,r.addListener(document,"mousemove",S)}function x(){clearInterval(u),e.session.removeMarker(s),s=null,e.selection.fromOrientedRange(h),e.isFocused()&&!d&&e.$resetCursorStyle(),h=null,f=null,b=0,g=null,m=null,r.removeListener(document,"mousemove",S)}this.onDragStart=function(t){if(this.cancelDrag||!y.draggable){var i=this;return setTimeout((function(){i.startSelect(),i.captureMouse(t)}),0),t.preventDefault()}h=e.getSelectionRange();var r=t.dataTransfer;r.effectAllowed=e.getReadOnly()?"copy":"copyMove",o.isOpera&&(e.container.appendChild(n),n.scrollTop=0),r.setDragImage&&r.setDragImage(n,0,0),o.isOpera&&e.container.removeChild(n),r.clearData(),r.setData("Text",e.session.getTextRange()),d=!0,this.setState("drag")},this.onDragEnd=function(t){if(y.draggable=!1,d=!1,this.setState(null),!e.getReadOnly()){var n=t.dataTransfer.dropEffect;p||"move"!=n||e.session.remove(e.getSelectionRange()),e.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(t){if(!e.getReadOnly()&&A(t.dataTransfer))return l=t.clientX,c=t.clientY,s||w(),b++,t.dataTransfer.dropEffect=p=E(t),r.preventDefault(t)},this.onDragOver=function(t){if(!e.getReadOnly()&&A(t.dataTransfer))return l=t.clientX,c=t.clientY,s||(w(),b++),null!==k&&(k=null),t.dataTransfer.dropEffect=p=E(t),r.preventDefault(t)},this.onDragLeave=function(t){if(--b<=0&&s)return x(),p=null,r.preventDefault(t)},this.onDrop=function(t){if(f){var n=t.dataTransfer;if(d)switch(p){case"move":h=h.contains(f.row,f.column)?{start:f,end:f}:e.moveText(h,f);break;case"copy":h=e.moveText(h,f,!0)}else{var i=n.getData("Text");h={start:f,end:e.session.insert(f,i)},e.focus(),p=null}return x(),r.preventDefault(t)}},r.addListener(y,"dragstart",this.onDragStart.bind(t),e),r.addListener(y,"dragend",this.onDragEnd.bind(t),e),r.addListener(y,"dragenter",this.onDragEnter.bind(t),e),r.addListener(y,"dragover",this.onDragOver.bind(t),e),r.addListener(y,"dragleave",this.onDragLeave.bind(t),e),r.addListener(y,"drop",this.onDrop.bind(t),e);var k=null;function S(){null==k&&(k=setTimeout((function(){null!=k&&s&&x()}),20))}function A(t){var e=t.types;return!e||Array.prototype.some.call(e,(function(t){return"text/plain"==t||"Text"==t}))}function E(t){var e=["copy","copymove","all","uninitialized"],n=o.isMac?t.altKey:t.ctrlKey,i="uninitialized";try{i=t.dataTransfer.effectAllowed.toLowerCase()}catch(t){}var r="none";return n&&e.indexOf(i)>=0?r="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(i)>=0?r="move":e.indexOf(i)>=0&&(r="copy"),r}}function a(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(t){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var t=this.editor;t.container.draggable=!0,t.renderer.$cursorLayer.setBlinking(!1),t.setStyle("ace_dragging");var e=o.isWin?"default":"move";t.renderer.setCursorStyle(e),this.setState("dragReady")},this.onMouseDrag=function(t){var e=this.editor.container;o.isIE&&"dragReady"==this.state&&(a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&e.dragDrop());"dragWait"===this.state&&(a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition())))},this.onMouseDown=function(t){if(this.$dragEnabled){this.mousedownEvent=t;var e=this.editor,n=t.inSelection(),i=t.getButton();if(1===(t.domEvent.detail||1)&&0===i&&n){if(t.editor.inMultiSelectMode&&(t.getAccelKey()||t.getShiftKey()))return;this.mousedownEvent.time=Date.now();var r=t.domEvent.target||t.domEvent.srcElement;if("unselectable"in r&&(r.unselectable="on"),e.getDragDelay()){if(o.isWebKit)this.cancelDrag=!0,e.container.draggable=!0;this.setState("dragWait")}else this.startDrag();this.captureMouse(t,this.onMouseDrag.bind(this)),t.defaultPrevented=!0}}}}).call(s.prototype),e.DragdropHandler=s})),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("./mouse_event").MouseEvent,r=t("../lib/event"),o=t("../lib/dom");e.addTouchListeners=function(t,e){var n,s,a,l,c,u,h,f,p,d="scroll",g=0,m=0,v=0,y=0;function b(){var t=window.navigator&&window.navigator.clipboard,n=!1,i=function(i){var r=i.target.getAttribute("action");if("more"==r||!n)return n=!n,function(){var i=e.getCopyText(),r=e.session.getUndoManager().hasUndo();p.replaceChild(o.buildDom(n?["span",!i&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],i&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],i&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],t&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],r&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),p.firstChild)}();"paste"==r?t.readText().then((function(t){e.execCommand(r,t)})):r&&("cut"!=r&&"copy"!=r||(t?t.writeText(e.getCopyText()):document.execCommand("copy")),e.execCommand(r)),p.firstChild.style.display="none",n=!1,"openCommandPallete"!=r&&e.focus()};p=o.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(t){d="menu",t.stopPropagation(),t.preventDefault(),e.textInput.focus()},ontouchend:function(t){t.stopPropagation(),t.preventDefault(),i(t)},onclick:i},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],e.container)}function _(){p||b();var t=e.selection.cursor,n=e.renderer.textToScreenCoordinates(t.row,t.column),i=e.renderer.textToScreenCoordinates(0,0).pageX,r=e.renderer.scrollLeft,o=e.container.getBoundingClientRect();p.style.top=n.pageY-o.top-3+"px",n.pageX-o.left<o.width-70?(p.style.left="",p.style.right="10px"):(p.style.right="",p.style.left=i+r-o.left+"px"),p.style.display="",p.firstChild.style.display="none",e.on("input",w)}function w(t){p&&(p.style.display="none"),e.off("input",w)}function x(){c=null,clearTimeout(c);var t=e.selection.getRange(),n=t.contains(h.row,h.column);!t.isEmpty()&&n||(e.selection.moveToPosition(h),e.selection.selectWord()),d="wait",_()}r.addListener(t,"contextmenu",(function(t){f&&e.textInput.getElement().focus()}),e),r.addListener(t,"touchstart",(function(t){var r=t.touches;if(c||r.length>1)return clearTimeout(c),c=null,a=-1,void(d="zoom");f=e.$mouseHandler.isMousePressed=!0;var o=e.renderer.layerConfig.lineHeight,u=e.renderer.layerConfig.lineHeight,p=t.timeStamp;l=p;var b=r[0],_=b.clientX,w=b.clientY;Math.abs(n-_)+Math.abs(s-w)>o&&(a=-1),n=t.clientX=_,s=t.clientY=w,v=y=0;var k=new i(t,e);if(h=k.getDocumentPosition(),p-a<500&&1==r.length&&!g)m++,t.preventDefault(),t.button=0,function(){c=null,clearTimeout(c),e.selection.moveToPosition(h);var t=m>=2?e.selection.getLineRange(h.row):e.session.getBracketRange(h);t&&!t.isEmpty()?e.selection.setRange(t):e.selection.selectWord(),d="wait"}();else{m=0;var S=e.selection.cursor,A=e.selection.isEmpty()?S:e.selection.anchor,E=e.renderer.$cursorLayer.getPixelPosition(S,!0),T=e.renderer.$cursorLayer.getPixelPosition(A,!0),C=e.renderer.scroller.getBoundingClientRect(),M=e.renderer.layerConfig.offset,L=e.renderer.scrollLeft,R=function(t,e){return(t/=u)*t+(e=e/o-.75)*e};if(t.clientX<C.left)return void(d="zoom");var O=R(t.clientX-C.left-E.left+L,t.clientY-C.top-E.top+M),I=R(t.clientX-C.left-T.left+L,t.clientY-C.top-T.top+M);O<3.5&&I<3.5&&(d=O>I?"cursor":"anchor"),d=I<3.5?"anchor":O<3.5?"cursor":"scroll",c=setTimeout(x,450)}a=p}),e),r.addListener(t,"touchend",(function(t){f=e.$mouseHandler.isMousePressed=!1,u&&clearInterval(u),"zoom"==d?(d="",g=0):c?(e.selection.moveToPosition(h),g=0,_()):"scroll"==d?(g+=60,u=setInterval((function(){g--<=0&&(clearInterval(u),u=null),Math.abs(v)<.01&&(v=0),Math.abs(y)<.01&&(y=0),g<20&&(v*=.9),g<20&&(y*=.9);var t=e.session.getScrollTop();e.renderer.scrollBy(10*v,10*y),t==e.session.getScrollTop()&&(g=0)}),10),w()):_(),clearTimeout(c),c=null}),e),r.addListener(t,"touchmove",(function(t){c&&(clearTimeout(c),c=null);var r=t.touches;if(!(r.length>1||"zoom"==d)){var o=r[0],a=n-o.clientX,u=s-o.clientY;if("wait"==d){if(!(a*a+u*u>4))return t.preventDefault();d="cursor"}n=o.clientX,s=o.clientY,t.clientX=o.clientX,t.clientY=o.clientY;var h=t.timeStamp,f=h-l;if(l=h,"scroll"==d){var p=new i(t,e);p.speed=1,p.wheelX=a,p.wheelY=u,10*Math.abs(a)<Math.abs(u)&&(a=0),10*Math.abs(u)<Math.abs(a)&&(u=0),0!=f&&(v=a/f,y=u/f),e._emit("mousewheel",p),p.propagationStopped||(v=y=0)}else{var g=new i(t,e).getDocumentPosition();"cursor"==d?e.selection.moveCursorToPosition(g):"anchor"==d&&e.selection.setSelectionAnchor(g.row,g.column),e.renderer.scrollCursorIntoView(g),t.preventDefault()}}}),e)}})),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("./dom");e.get=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.responseText)},n.send(null)},e.loadScript=function(t,e){var n=i.getDocumentHead(),r=document.createElement("script");r.src=t,n.appendChild(r),r.onload=r.onreadystatechange=function(t,n){!n&&r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(r=r.onload=r.onreadystatechange=null,n||e())}},e.qualifyURL=function(t){var e=document.createElement("a");return e.href=t,e.href}})),ace.define("ace/lib/event_emitter",["require","exports","module"],(function(t,e,n){"use strict";var i={},r=function(){this.propagationStopped=!0},o=function(){this.defaultPrevented=!0};i._emit=i._dispatchEvent=function(t,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[t]||[],i=this._defaultHandlers[t];if(n.length||i){"object"==typeof e&&e||(e={}),e.type||(e.type=t),e.stopPropagation||(e.stopPropagation=r),e.preventDefault||(e.preventDefault=o),n=n.slice();for(var s=0;s<n.length&&(n[s](e,this),!e.propagationStopped);s++);return i&&!e.defaultPrevented?i(e,this):void 0}},i._signal=function(t,e){var n=(this._eventRegistry||{})[t];if(n){n=n.slice();for(var i=0;i<n.length;i++)n[i](e,this)}},i.once=function(t,e){var n=this;if(this.on(t,(function i(){n.off(t,i),e.apply(null,arguments)})),!e)return new Promise((function(t){e=t}))},i.setDefaultHandler=function(t,e){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[t]){var i=n[t],r=n._disabled_[t];r||(n._disabled_[t]=r=[]),r.push(i);var o=r.indexOf(e);-1!=o&&r.splice(o,1)}n[t]=e},i.removeDefaultHandler=function(t,e){var n=this._defaultHandlers;if(n){var i=n._disabled_[t];if(n[t]==e)i&&this.setDefaultHandler(t,i.pop());else if(i){var r=i.indexOf(e);-1!=r&&i.splice(r,1)}}},i.on=i.addEventListener=function(t,e,n){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[t];return i||(i=this._eventRegistry[t]=[]),-1==i.indexOf(e)&&i[n?"unshift":"push"](e),e},i.off=i.removeListener=i.removeEventListener=function(t,e){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[t];if(n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}},i.removeAllListeners=function(t){t||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[t]=void 0),this._defaultHandlers&&(this._defaultHandlers[t]=void 0)},e.EventEmitter=i})),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,n){var i=t("./oop"),r=t("./event_emitter").EventEmitter,o={setOptions:function(t){Object.keys(t).forEach((function(e){this.setOption(e,t[e])}),this)},getOptions:function(t){var e={};if(t)Array.isArray(t)||(e=t,t=Object.keys(e));else{var n=this.$options;t=Object.keys(n).filter((function(t){return!n[t].hidden}))}return t.forEach((function(t){e[t]=this.getOption(t)}),this),e},setOption:function(t,e){if(this["$"+t]!==e){var n=this.$options[t];if(!n)return s('misspelled option "'+t+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(t,e);n.handlesSet||(this["$"+t]=e),n&&n.set&&n.set.call(this,e)}},getOption:function(t){var e=this.$options[t];return e?e.forwardTo?this[e.forwardTo]&&this[e.forwardTo].getOption(t):e&&e.get?e.get.call(this):this["$"+t]:s('misspelled option "'+t+'"')}};function s(t){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function a(t,e){var n=new Error(t);n.data=e,"object"==typeof console&&console.error&&console.error(n),setTimeout((function(){throw n}))}var l=function(){this.$defaultOptions={}};(function(){i.implement(this,r),this.defineOptions=function(t,e,n){return t.$options||(this.$defaultOptions[e]=t.$options={}),Object.keys(n).forEach((function(e){var i=n[e];"string"==typeof i&&(i={forwardTo:i}),i.name||(i.name=e),t.$options[i.name]=i,"initialValue"in i&&(t["$"+i.name]=i.initialValue)})),i.implement(t,o),this},this.resetOptions=function(t){Object.keys(t.$options).forEach((function(e){var n=t.$options[e];"value"in n&&t.setOption(e,n.value)}))},this.setDefaultValue=function(t,e,n){if(!t){for(t in this.$defaultOptions)if(this.$defaultOptions[t][e])break;if(!this.$defaultOptions[t][e])return!1}var i=this.$defaultOptions[t]||(this.$defaultOptions[t]={});i[e]&&(i.forwardTo?this.setDefaultValue(i.forwardTo,e,n):i[e].value=n)},this.setDefaultValues=function(t,e){Object.keys(e).forEach((function(n){this.setDefaultValue(t,n,e[n])}),this)},this.warn=s,this.reportError=a}).call(l.prototype),e.AppConfig=l})),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],(function(t,e,i){var r=t("./lib/lang"),o=(t("./lib/oop"),t("./lib/net")),s=t("./lib/app_config").AppConfig;i.exports=e=new s;var a=function(){return this||"undefined"!=typeof window&&window}(),l={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};e.get=function(t){if(!l.hasOwnProperty(t))throw new Error("Unknown config key: "+t);return l[t]},e.set=function(t,e){if(l.hasOwnProperty(t))l[t]=e;else if(0==this.setDefaultValue("",t,e))throw new Error("Unknown config key: "+t)},e.all=function(){return r.copyObject(l)},e.$modes={},e.moduleUrl=function(t,e){if(l.$moduleUrls[t])return l.$moduleUrls[t];var n=t.split("/"),i="snippets"==(e=e||n[n.length-2]||"")?"/":"-",r=n[n.length-1];if("worker"==e&&"-"==i){var o=new RegExp("^"+e+"[\\-_]|[\\-_]"+e+"$","g");r=r.replace(o,"")}(!r||r==e)&&n.length>1&&(r=n[n.length-2]);var s=l[e+"Path"];return null==s?s=l.basePath:"/"==i&&(e=i=""),s&&"/"!=s.slice(-1)&&(s+="/"),s+e+i+r+this.get("suffix")},e.setModuleUrl=function(t,e){return l.$moduleUrls[t]=e},e.$loading={},e.loadModule=function(n,i){var r,s;Array.isArray(n)&&(s=n[0],n=n[1]);try{r=t(n)}catch(l){}if(r&&!e.$loading[n])return i&&i(r);if(e.$loading[n]||(e.$loading[n]=[]),e.$loading[n].push(i),!(e.$loading[n].length>1)){var a=function(){t([n],(function(t){e._emit("load.module",{name:n,module:t});var i=e.$loading[n];e.$loading[n]=null,i.forEach((function(e){e&&e(t)}))}))};if(!e.get("packaged"))return a();o.loadScript(e.moduleUrl(n,s),a),c()}};var c=function(){l.basePath||l.workerPath||l.modePath||l.themePath||Object.keys(l.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),c=function(){})};function u(r){if(a&&a.document){l.packaged=r||t.packaged||i.packaged||a.define&&n(14).packaged;for(var o,s={},c="",u=document.currentScript||document._currentScript,h=(u&&u.ownerDocument||document).getElementsByTagName("script"),f=0;f<h.length;f++){var p=h[f],d=p.src||p.getAttribute("src");if(d){for(var g=p.attributes,m=0,v=g.length;m<v;m++){var y=g[m];0===y.name.indexOf("data-ace-")&&(s[(o=y.name.replace(/^data-ace-/,""),o.replace(/-(.)/g,(function(t,e){return e.toUpperCase()})))]=y.value)}var b=d.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(c=b[1])}}for(var _ in c&&(s.base=s.base||c,s.packaged=!0),s.basePath=s.base,s.workerPath=s.workerPath||s.base,s.modePath=s.modePath||s.base,s.themePath=s.themePath||s.base,delete s.base,s)"undefined"!==typeof s[_]&&e.set(_,s[_])}}u(!0),e.init=u,e.version="1.4.12"})),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],(function(t,e,n){"use strict";var i=t("../lib/event"),r=t("../lib/useragent"),o=t("./default_handlers").DefaultHandlers,s=t("./default_gutter_handler").GutterHandler,a=t("./mouse_event").MouseEvent,l=t("./dragdrop_handler").DragdropHandler,c=t("./touch_handler").addTouchListeners,u=t("../config"),h=function(t){var e=this;this.editor=t,new o(this),new s(this),new l(this);var n=function(e){(!document.hasFocus||!document.hasFocus()||!t.isFocused()&&document.activeElement==(t.textInput&&t.textInput.getElement()))&&window.focus(),t.focus()},a=t.renderer.getMouseEventTarget();i.addListener(a,"click",this.onMouseEvent.bind(this,"click"),t),i.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove"),t),i.addMultiMouseDownListener([a,t.renderer.scrollBarV&&t.renderer.scrollBarV.inner,t.renderer.scrollBarH&&t.renderer.scrollBarH.inner,t.textInput&&t.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",t),i.addMouseWheelListener(t.container,this.onMouseWheel.bind(this,"mousewheel"),t),c(t.container,t);var u=t.renderer.$gutter;i.addListener(u,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),t),i.addListener(u,"click",this.onMouseEvent.bind(this,"gutterclick"),t),i.addListener(u,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),t),i.addListener(u,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),t),i.addListener(a,"mousedown",n,t),i.addListener(u,"mousedown",n,t),r.isIE&&t.renderer.scrollBarV&&(i.addListener(t.renderer.scrollBarV.element,"mousedown",n,t),i.addListener(t.renderer.scrollBarH.element,"mousedown",n,t)),t.on("mousemove",(function(n){if(!e.state&&!e.$dragDelay&&e.$dragEnabled){var i=t.renderer.screenToTextCoordinates(n.x,n.y),r=t.session.selection.getRange(),o=t.renderer;!r.isEmpty()&&r.insideStart(i.row,i.column)?o.setCursorStyle("default"):o.setCursorStyle("")}}),t)};(function(){this.onMouseEvent=function(t,e){this.editor._emit(t,new a(e,this.editor))},this.onMouseMove=function(t,e){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(t,new a(e,this.editor))},this.onMouseWheel=function(t,e){var n=new a(e,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=e.wheelX,n.wheelY=e.wheelY,this.editor._emit(t,n)},this.setState=function(t){this.state=t},this.captureMouse=function(t,e){this.x=t.x,this.y=t.y,this.isMousePressed=!0;var n=this.editor,o=this.editor.renderer;o.$isMousePressed=!0;var s=this,l=function(t){if(t){if(r.isWebKit&&!t.which&&s.releaseMouse)return s.releaseMouse();s.x=t.clientX,s.y=t.clientY,e&&e(t),s.mouseEvent=new a(t,s.editor),s.$mouseMoved=!0}},c=function(t){n.off("beforeEndOperation",h),clearInterval(f),u(),s[s.state+"End"]&&s[s.state+"End"](t),s.state="",s.isMousePressed=o.$isMousePressed=!1,o.$keepTextAreaAtCursor&&o.$moveTextAreaToCursor(),s.$onCaptureMouseMove=s.releaseMouse=null,t&&s.onMouseEvent("mouseup",t),n.endOperation()},u=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(r.isOldIE&&"dblclick"==t.domEvent.type)return setTimeout((function(){c(t)}));var h=function(t){s.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(s[s.state+"End"]&&s[s.state+"End"](),s.state="",s.releaseMouse())};n.on("beforeEndOperation",h),n.startOperation({command:{name:"mouse"}}),s.$onCaptureMouseMove=l,s.releaseMouse=i.capture(this.editor.container,l,c);var f=setInterval(u,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var t=function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",t),e&&e.domEvent&&i.stopEvent(e.domEvent))}.bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(h.prototype),u.defineOptions(h.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:r.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),e.MouseHandler=h})),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("../lib/dom");e.FoldHandler=function(t){t.on("click",(function(e){var n=e.getDocumentPosition(),r=t.session,o=r.getFoldAt(n.row,n.column,1);o&&(e.getAccelKey()?r.removeFold(o):r.expandFold(o),e.stop());var s=e.domEvent&&e.domEvent.target;s&&i.hasCssClass(s,"ace_inline_button")&&i.hasCssClass(s,"ace_toggle_wrap")&&(r.setOption("wrap",!r.getUseWrapMode()),t.renderer.scrollCursorIntoView())})),t.on("gutterclick",(function(e){if("foldWidgets"==t.renderer.$gutterLayer.getRegion(e)){var n=e.getDocumentPosition().row,i=t.session;i.foldWidgets&&i.foldWidgets[n]&&t.session.onFoldWidgetClick(n,e),t.isFocused()||t.focus(),e.stop()}})),t.on("gutterdblclick",(function(e){if("foldWidgets"==t.renderer.$gutterLayer.getRegion(e)){var n=e.getDocumentPosition().row,i=t.session,r=i.getParentFoldRangeData(n,!0),o=r.range||r.firstRange;if(o){n=o.start.row;var s=i.getFoldAt(n,i.getLine(n).length,1);s?i.removeFold(s):(i.addFold("...",o),t.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}e.stop()}}))}})),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],(function(t,e,n){"use strict";var i=t("../lib/keys"),r=t("../lib/event"),o=function(t){this.$editor=t,this.$data={editor:t},this.$handlers=[],this.setDefaultHandler(t.commands)};(function(){this.setDefaultHandler=function(t){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=t,this.addKeyboardHandler(t,0)},this.setKeyboardHandler=function(t){var e=this.$handlers;if(e[e.length-1]!=t){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(t,1)}},this.addKeyboardHandler=function(t,e){if(t){"function"!=typeof t||t.handleKeyboard||(t.handleKeyboard=t);var n=this.$handlers.indexOf(t);-1!=n&&this.$handlers.splice(n,1),void 0==e?this.$handlers.push(t):this.$handlers.splice(e,0,t),-1==n&&t.attach&&t.attach(this.$editor)}},this.removeKeyboardHandler=function(t){var e=this.$handlers.indexOf(t);return-1!=e&&(this.$handlers.splice(e,1),t.detach&&t.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,e=t.editor;return this.$handlers.map((function(n){return n.getStatusText&&n.getStatusText(e,t)||""})).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(t,e,n,i){for(var o,s=!1,a=this.$editor.commands,l=this.$handlers.length;l--&&!((o=this.$handlers[l].handleKeyboard(this.$data,t,e,n,i))&&o.command&&((s="null"==o.command||a.exec(o.command,this.$editor,o.args,i))&&i&&-1!=t&&1!=o.passEvent&&1!=o.command.passEvent&&r.stopEvent(i),s)););return s||-1!=t||(o={command:"insertstring"},s=a.exec("insertstring",this.$editor,e)),s&&this.$editor._signal&&this.$editor._signal("keyboardActivity",o),s},this.onCommandKey=function(t,e,n){var r=i.keyCodeToString(n);return this.$callKeyboardHandlers(e,r,n,t)},this.onTextInput=function(t){return this.$callKeyboardHandlers(-1,t)}}).call(o.prototype),e.KeyBinding=o})),ace.define("ace/lib/bidiutil",["require","exports","module"],(function(t,e,n){"use strict";var i=0,r=0,o=!1,s=!1,a=!1,l=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],u=11,h=18,f=[h,h,h,h,h,h,h,h,h,6,5,6,8,5,h,h,h,h,h,h,h,h,h,h,h,h,h,h,5,5,5,6,8,4,4,u,u,u,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,h,h,h,h,h,h,5,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,9,4,u,u,u,u,4,4,4,4,0,4,4,h,4,4,u,u,2,2,4,0,4,4,4,2,0,4,4,4,4,4],p=[8,8,8,8,8,8,8,8,8,8,8,h,h,h,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,u,u,u,u,u,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8];function d(t,e,n){if(!(r<t))if(1!=t||1!=i||s)for(var o,a,l,c,u=n.length,h=0;h<u;){if(e[h]>=t){for(o=h+1;o<u&&e[o]>=t;)o++;for(a=h,l=o-1;a<l;a++,l--)c=n[a],n[a]=n[l],n[l]=c;h=o}h++}else n.reverse()}function g(t,e,n,r){var l,c,f,p,d=e[r];switch(d){case 0:case 1:o=!1;case 4:case 3:return d;case 2:return o?3:2;case 7:return o=!0,!0,1;case 8:return 4;case 9:return r<1||r+1>=e.length||2!=(l=n[r-1])&&3!=l||2!=(c=e[r+1])&&3!=c?4:(o&&(c=3),c==l?c:4);case 10:return 2==(l=r>0?n[r-1]:5)&&r+1<e.length&&2==e[r+1]?2:4;case u:if(r>0&&2==n[r-1])return 2;if(o)return 4;for(p=r+1,f=e.length;p<f&&e[p]==u;)p++;return p<f&&2==e[p]?2:4;case 12:for(f=e.length,p=r+1;p<f&&12==e[p];)p++;if(p<f){var g=t[r],m=g>=1425&&g<=2303||64286==g;if(l=e[p],m&&(1==l||7==l))return 1}return r<1||5==(l=e[r-1])?4:n[r-1];case 5:return o=!1,s=!0,i;case 6:return a=!0,4;case 13:case 14:case 16:case 17:case 15:o=!1;case h:return 4}}function m(t){var e=t.charCodeAt(0),n=e>>8;return 0==n?e>191?0:f[e]:5==n?/[\u0591-\u05f4]/.test(t)?1:0:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(t)?12:/[\u0660-\u0669\u066b-\u066c]/.test(t)?3:1642==e?u:/[\u06f0-\u06f9]/.test(t)?2:7:32==n&&e<=8287?p[255&e]:254==n&&e>=65136?7:4}e.L=0,e.R=1,e.EN=2,e.ON_R=3,e.AN=4,e.R_H=5,e.B=6,e.RLE=7,e.DOT="\xb7",e.doBidiReorder=function(t,n,u){if(t.length<2)return{};var f=t.split(""),p=new Array(f.length),v=new Array(f.length),y=[];i=u?1:0,function(t,e,n,u){var h=i?c:l,f=null,p=null,d=null,v=0,y=null,b=-1,_=null,w=null,x=[];if(!u)for(_=0,u=[];_<n;_++)u[_]=m(t[_]);for(r=i,o=!1,!1,s=!1,a=!1,w=0;w<n;w++){if(f=v,x[w]=p=g(t,u,x,w),y=240&(v=h[f][p]),v&=15,e[w]=d=h[v][5],y>0)if(16==y){for(_=b;_<w;_++)e[_]=1;b=-1}else b=-1;if(h[v][6])-1==b&&(b=w);else if(b>-1){for(_=b;_<w;_++)e[_]=d;b=-1}5==u[w]&&(e[w]=0),r|=d}if(a)for(_=0;_<n;_++)if(6==u[_]){e[_]=i;for(var k=_-1;k>=0&&8==u[k];k--)e[k]=i}}(f,y,f.length,n);for(var b=0;b<p.length;p[b]=b,b++);d(2,y,p),d(1,y,p);for(b=0;b<p.length-1;b++)3===n[b]?y[b]=e.AN:1===y[b]&&(n[b]>7&&n[b]<13||4===n[b]||n[b]===h)?y[b]=e.ON_R:b>0&&"\u0644"===f[b-1]&&/\u0622|\u0623|\u0625|\u0627/.test(f[b])&&(y[b-1]=y[b]=e.R_H,b++);f[f.length-1]===e.DOT&&(y[f.length-1]=e.B),"\u202b"===f[0]&&(y[0]=e.RLE);for(b=0;b<p.length;b++)v[b]=y[p[b]];return{logicalFromVisual:p,bidiLevels:v}},e.hasBidiCharacters=function(t,e){for(var n=!1,i=0;i<t.length;i++)e[i]=m(t.charAt(i)),n||1!=e[i]&&7!=e[i]&&3!=e[i]||(n=!0);return n},e.getVisualFromLogicalIdx=function(t,e){for(var n=0;n<e.logicalFromVisual.length;n++)if(e.logicalFromVisual[n]==t)return n;return 0}})),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],(function(t,e,n){"use strict";var i=t("./lib/bidiutil"),r=t("./lib/lang"),o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,s=function(t){this.session=t,this.bidiMap={},this.currentRow=null,this.bidiUtil=i,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xb6",this.RLE="\u202b",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=o.test(t.getValue())};(function(){this.isBidiRow=function(t,e,n){return!!this.seenBidi&&(t!==this.currentRow&&(this.currentRow=t,this.updateRowLine(e,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(t){this.seenBidi?this.currentRow=null:"insert"==t.action&&o.test(t.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var t=0,e=this.session.$screenRowCache;if(e.length){var n=this.session.$getRowCacheIndex(e,this.currentRow);n>=0&&(t=this.session.$docRowCache[n])}return t},this.getSplitIndex=function(){var t=0,e=this.session.$screenRowCache;if(e.length)for(var n,i=this.session.$getRowCacheIndex(e,this.currentRow);this.currentRow-t>0&&(n=this.session.$getRowCacheIndex(e,this.currentRow-t-1))===i;)i=n,t++;else t=this.currentRow;return t},this.updateRowLine=function(t,e){void 0===t&&(t=this.getDocumentRow());var n=t===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(t),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var o=this.session.$wrapData[t];o&&(void 0===e&&(e=this.getSplitIndex()),e>0&&o.length?(this.wrapIndent=o.indent,this.wrapOffset=this.wrapIndent*this.charWidths[i.L],this.line=e<o.length?this.line.substring(o[e-1],o[e]):this.line.substring(o[o.length-1])):this.line=this.line.substring(0,o[e])),e==o.length&&(this.line+=this.showInvisibles?n:i.DOT)}else this.line+=this.showInvisibles?n:i.DOT;var s,a=this.session,l=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(t,e){return"\t"===t||a.isFullWidth(t.charCodeAt(0))?(s="\t"===t?a.getScreenTabSize(e+l):2,l+=s-1,r.stringRepeat(i.DOT,s)):t})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==i.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var t=[];i.hasBidiCharacters(this.line,t)||this.isRtlDir?this.bidiMap=i.doBidiReorder(this.line,t,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(t){if(this.characterWidth!==t.$characterSize.width){this.fontMetrics=t;var e=this.characterWidth=t.$characterSize.width,n=t.$measureCharWidth("\u05d4");this.charWidths[i.L]=this.charWidths[i.EN]=this.charWidths[i.ON_R]=e,this.charWidths[i.R]=this.charWidths[i.AN]=n,this.charWidths[i.R_H]=.45*n,this.charWidths[i.B]=this.charWidths[i.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(t){this.showInvisibles=t,this.currentRow=null},this.setEolChar=function(t){this.EOL=t},this.setContentWidth=function(t){this.contentWidth=t},this.isRtlLine=function(t){return!!this.$isRtl||(void 0!=t?this.session.getLine(t).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(t,e){for(var n=t.getCursorPosition(),i=t.selection.getSelectionAnchor().row;i<=n.row;i++)e||t.session.getLine(i).charAt(0)!==t.session.$bidiHandler.RLE?e&&t.session.getLine(i).charAt(0)!==t.session.$bidiHandler.RLE&&t.session.doc.insert({column:0,row:i},t.session.$bidiHandler.RLE):t.session.doc.removeInLine(i,0,1)},this.getPosLeft=function(t){t-=this.wrapIndent;var e=this.line.charAt(0)===this.RLE?1:0,n=t>e?this.session.getOverwrite()?t:t-1:e,r=i.getVisualFromLogicalIdx(n,this.bidiMap),o=this.bidiMap.bidiLevels,s=0;!this.session.getOverwrite()&&t<=e&&o[r]%2!==0&&r++;for(var a=0;a<r;a++)s+=this.charWidths[o[a]];return!this.session.getOverwrite()&&t>e&&o[r]%2===0&&(s+=this.charWidths[o[r]]),this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(s+=this.rtlLineOffset),s},this.getSelections=function(t,e){var n,i=this.bidiMap,r=i.bidiLevels,o=[],s=0,a=Math.min(t,e)-this.wrapIndent,l=Math.max(t,e)-this.wrapIndent,c=!1,u=!1,h=0;this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var f,p=0;p<r.length;p++)f=i.logicalFromVisual[p],n=r[p],(c=f>=a&&f<l)&&!u?h=s:!c&&u&&o.push({left:h,width:s-h}),s+=this.charWidths[n],u=c;if(c&&p===r.length&&o.push({left:h,width:s-h}),this.isRtlDir)for(var d=0;d<o.length;d++)o[d].left+=this.rtlLineOffset;return o},this.offsetToCol=function(t){this.isRtlDir&&(t-=this.rtlLineOffset);var e=0,n=(t=Math.max(t,0),0),i=0,r=this.bidiMap.bidiLevels,o=this.charWidths[r[i]];for(this.wrapIndent&&(t-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);t>n+o/2;){if(n+=o,i===r.length-1){o=0;break}o=this.charWidths[r[++i]]}return i>0&&r[i-1]%2!==0&&r[i]%2===0?(t<n&&i--,e=this.bidiMap.logicalFromVisual[i]):i>0&&r[i-1]%2===0&&r[i]%2!==0?e=1+(t>n?this.bidiMap.logicalFromVisual[i]:this.bidiMap.logicalFromVisual[i-1]):this.isRtlDir&&i===r.length-1&&0===o&&r[i-1]%2===0||!this.isRtlDir&&0===i&&r[i]%2!==0?e=1+this.bidiMap.logicalFromVisual[i]:(i>0&&r[i-1]%2!==0&&0!==o&&i--,e=this.bidiMap.logicalFromVisual[i]),0===e&&this.isRtlDir&&e++,e+this.wrapIndent}}).call(s.prototype),e.BidiHandler=s})),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/lang"),o=t("./lib/event_emitter").EventEmitter,s=t("./range").Range,a=function(t){this.session=t,this.doc=t.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var e=this;this.cursor.on("change",(function(t){e.$cursorChanged=!0,e.$silent||e._emit("changeCursor"),e.$isEmpty||e.$silent||e._emit("changeSelection"),e.$keepDesiredColumnOnChange||t.old.column==t.value.column||(e.$desiredColumn=null)})),this.anchor.on("change",(function(){e.$anchorChanged=!0,e.$isEmpty||e.$silent||e._emit("changeSelection")}))};(function(){i.implement(this,o),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(t,e){this.$isEmpty=!1,this.anchor.setPosition(t,e)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var t=this.anchor,e=this.lead;return t.row>e.row||t.row==e.row&&t.column>e.column},this.getRange=function(){var t=this.anchor,e=this.lead;return this.$isEmpty?s.fromPoints(e,e):this.isBackwards()?s.fromPoints(e,t):s.fromPoints(t,e)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(t,e){var n=e?t.end:t.start,i=e?t.start:t.end;this.$setSelection(n.row,n.column,i.row,i.column)},this.$setSelection=function(t,e,n,i){if(!this.$silent){var r=this.$isEmpty,o=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(t,e),this.cursor.setPosition(n,i),this.$isEmpty=!s.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||r!=this.$isEmpty||o)&&this._emit("changeSelection")}},this.$moveSelection=function(t){var e=this.lead;this.$isEmpty&&this.setSelectionAnchor(e.row,e.column),t.call(this)},this.selectTo=function(t,e){this.$moveSelection((function(){this.moveCursorTo(t,e)}))},this.selectToPosition=function(t){this.$moveSelection((function(){this.moveCursorToPosition(t)}))},this.moveTo=function(t,e){this.clearSelection(),this.moveCursorTo(t,e)},this.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(t,e){if("undefined"==typeof e){var n=t||this.lead;t=n.row,e=n.column}return this.session.getWordRange(t,e)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var t=this.getCursor(),e=this.session.getAWordRange(t.row,t.column);this.setSelectionRange(e)},this.getLineRange=function(t,e){var n,i="number"==typeof t?t:this.lead.row,r=this.session.getFoldLine(i);return r?(i=r.start.row,n=r.end.row):n=i,!0===e?new s(i,0,n,this.session.getLine(n).length):new s(i,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(t,e,n){var i=t.column,r=t.column+e;return n<0&&(i=t.column-e,r=t.column),this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(i,r).split(" ").length-1==e},this.moveCursorLeft=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===e.column)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(e,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize();e=this.lead;this.wouldMoveIntoSoftTab(e,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var t=this.lead.row,e=this.lead.column,n=this.session.documentToScreenRow(t,e),i=this.session.screenToDocumentPosition(n,0),r=this.session.getDisplayLine(t,null,i.row,i.column).match(/^\s*/);r[0].length==e||this.session.$useEmacsStyleLineStart||(i.column+=r[0].length),this.moveCursorToPosition(i)},this.moveCursorLineEnd=function(){var t=this.lead,e=this.session.getDocumentLastRowColumnPosition(t.row,t.column);if(this.lead.column==e.column){var n=this.session.getLine(e.row);if(e.column==n.length){var i=n.search(/\s+$/);i>0&&(e.column=i)}}this.moveCursorTo(e.row,e.column)},this.moveCursorFileEnd=function(){var t=this.doc.getLength()-1,e=this.doc.getLine(t).length;this.moveCursorTo(t,e)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),i=n.substring(e);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var r=this.session.getFoldAt(t,e,1);if(r)this.moveCursorTo(r.end.row,r.end.column);else{if(this.session.nonTokenRe.exec(i)&&(e+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,i=n.substring(e)),e>=n.length)return this.moveCursorTo(t,n.length),this.moveCursorRight(),void(t<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(i)&&(e+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,e)}},this.moveCursorLongWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))this.moveCursorTo(t.start.row,t.start.column);else{var i=this.session.getFoldStringAt(e,n,-1);null==i&&(i=this.doc.getLine(e).substring(0,n));var o=r.stringReverse(i);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(o)&&(n-=this.session.nonTokenRe.lastIndex,o=o.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(e,0),this.moveCursorLeft(),void(e>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(o)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,n)}},this.$shortWordEndIndex=function(t){var e,n=0,i=/\s/,r=this.session.tokenRe;if(r.lastIndex=0,this.session.tokenRe.exec(t))n=this.session.tokenRe.lastIndex;else{for(;(e=t[n])&&i.test(e);)n++;if(n<1)for(r.lastIndex=0;(e=t[n])&&!r.test(e);)if(r.lastIndex=0,n++,i.test(e)){if(n>2){n--;break}for(;(e=t[n])&&i.test(e);)n++;if(n>2)break}}return r.lastIndex=0,n},this.moveCursorShortWordRight=function(){var t=this.lead.row,e=this.lead.column,n=this.doc.getLine(t),i=n.substring(e),r=this.session.getFoldAt(t,e,1);if(r)return this.moveCursorTo(r.end.row,r.end.column);if(e==n.length){var o=this.doc.getLength();do{t++,i=this.doc.getLine(t)}while(t<o&&/^\s*$/.test(i));/^\s+/.test(i)||(i=""),e=0}var s=this.$shortWordEndIndex(i);this.moveCursorTo(t,e+s)},this.moveCursorShortWordLeft=function(){var t,e=this.lead.row,n=this.lead.column;if(t=this.session.getFoldAt(e,n,-1))return this.moveCursorTo(t.start.row,t.start.column);var i=this.session.getLine(e).substring(0,n);if(0===n){do{e--,i=this.doc.getLine(e)}while(e>0&&/^\s*$/.test(i));n=i.length,/\s+$/.test(i)||(i="")}var o=r.stringReverse(i),s=this.$shortWordEndIndex(o);return this.moveCursorTo(e,n-s)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(t,e){var n,i=this.session.documentToScreenPosition(this.lead.row,this.lead.column);if(0===e&&(0!==t&&(this.session.$bidiHandler.isBidiRow(i.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(i.column),i.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=i.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column),0!=t&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var r=this.session.lineWidgets[this.lead.row];t<0?t-=r.rowsAbove||0:t>0&&(t+=r.rowCount-(r.rowsAbove||0))}var o=this.session.screenToDocumentPosition(i.row+t,i.column,n);0!==t&&0===e&&o.row===this.lead.row&&(o.column,this.lead.column),this.moveCursorTo(o.row,o.column+e,0===e)},this.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},this.moveCursorTo=function(t,e,n){var i=this.session.getFoldAt(t,e,1);i&&(t=i.start.row,e=i.start.column),this.$keepDesiredColumnOnChange=!0;var r=this.session.getLine(t);/[\uDC00-\uDFFF]/.test(r.charAt(e))&&r.charAt(e-1)&&(this.lead.row==t&&this.lead.column==e+1?e-=1:e+=1),this.lead.setPosition(t,e),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(t,e,n){var i=this.session.screenToDocumentPosition(t,e);this.moveCursorTo(i.row,i.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(t){var e=this.getRange();return t?(t.start.column=e.start.column,t.start.row=e.start.row,t.end.column=e.end.column,t.end.row=e.end.row):t=e,t.cursor=this.isBackwards()?t.start:t.end,t.desiredColumn=this.$desiredColumn,t},this.getRangeOfMovements=function(t){var e=this.getCursor();try{t(this);var n=this.getCursor();return s.fromPoints(e,n)}catch(i){return s.fromPoints(e,e)}finally{this.moveCursorToPosition(e)}},this.toJSON=function(){if(this.rangeCount)var t=this.ranges.map((function(t){var e=t.clone();return e.isBackwards=t.cursor==t.start,e}));else(t=this.getRange()).isBackwards=this.isBackwards();return t},this.fromJSON=function(t){if(void 0==t.start){if(this.rangeList&&t.length>1){this.toSingleRange(t[0]);for(var e=t.length;e--;){var n=s.fromPoints(t[e].start,t[e].end);t[e].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}t=t[0]}this.rangeList&&this.toSingleRange(t),this.setSelectionRange(t,t.isBackwards)},this.isEqual=function(t){if((t.length||this.rangeCount)&&t.length!=this.rangeCount)return!1;if(!t.length||!this.ranges)return this.getRange().isEqual(t);for(var e=this.ranges.length;e--;)if(!this.ranges[e].isEqual(t[e]))return!1;return!0}}).call(a.prototype),e.Selection=a})),ace.define("ace/tokenizer",["require","exports","module","ace/config"],(function(t,e,n){"use strict";var i=t("./config"),r=2e3,o=function(t){for(var e in this.states=t,this.regExps={},this.matchMappings={},this.states){for(var n=this.states[e],i=[],r=0,o=this.matchMappings[e]={defaultToken:"text"},s="g",a=[],l=0;l<n.length;l++){var c=n[l];if(c.defaultToken&&(o.defaultToken=c.defaultToken),c.caseInsensitive&&(s="gi"),null!=c.regex){c.regex instanceof RegExp&&(c.regex=c.regex.toString().slice(1,-1));var u=c.regex,h=new RegExp("(?:("+u+")|(.))").exec("a").length-2;Array.isArray(c.token)?1==c.token.length||1==h?c.token=c.token[0]:h-1!=c.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:c,groupCount:h-1}),c.token=c.token[0]):(c.tokenArray=c.token,c.token=null,c.onMatch=this.$arrayTokens):"function"!=typeof c.token||c.onMatch||(c.onMatch=h>1?this.$applyToken:c.token),h>1&&(/\\\d/.test(c.regex)?u=c.regex.replace(/\\([0-9]+)/g,(function(t,e){return"\\"+(parseInt(e,10)+r+1)})):(h=1,u=this.removeCapturingGroups(c.regex)),c.splitRegex||"string"==typeof c.token||a.push(c)),o[r]=l,r+=h,i.push(u),c.onMatch||(c.onMatch=null)}}i.length||(o[0]=0,i.push("$")),a.forEach((function(t){t.splitRegex=this.createSplitterRegexp(t.regex,s)}),this),this.regExps[e]=new RegExp("("+i.join(")|(")+")|($)",s)}};(function(){this.$setMaxTokenCount=function(t){r=0|t},this.$applyToken=function(t){var e=this.splitRegex.exec(t).slice(1),n=this.token.apply(this,e);if("string"===typeof n)return[{type:n,value:t}];for(var i=[],r=0,o=n.length;r<o;r++)e[r]&&(i[i.length]={type:n[r],value:e[r]});return i},this.$arrayTokens=function(t){if(!t)return[];var e=this.splitRegex.exec(t);if(!e)return"text";for(var n=[],i=this.tokenArray,r=0,o=i.length;r<o;r++)e[r+1]&&(n[n.length]={type:i[r],value:e[r+1]});return n},this.removeCapturingGroups=function(t){return t.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,(function(t,e){return e?"(?:":t}))},this.createSplitterRegexp=function(t,e){if(-1!=t.indexOf("(?=")){var n=0,i=!1,r={};t.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(t,e,o,s,a,l){return i?i="]"!=a:a?i=!0:s?(n==r.stack&&(r.end=l+1,r.stack=-1),n--):o&&(n++,1!=o.length&&(r.stack=n,r.start=l)),t})),null!=r.end&&/^\)*$/.test(t.substr(r.end))&&(t=t.substring(0,r.start)+t.substr(r.end))}return"^"!=t.charAt(0)&&(t="^"+t),"$"!=t.charAt(t.length-1)&&(t+="$"),new RegExp(t,(e||"").replace("g",""))},this.getLineTokens=function(t,e){if(e&&"string"!=typeof e){var n=e.slice(0);"#tmp"===(e=n[0])&&(n.shift(),e=n.shift())}else n=[];var i=e||"start",o=this.states[i];o||(i="start",o=this.states[i]);var s=this.matchMappings[i],a=this.regExps[i];a.lastIndex=0;for(var l,c=[],u=0,h=0,f={type:null,value:""};l=a.exec(t);){var p=s.defaultToken,d=null,g=l[0],m=a.lastIndex;if(m-g.length>u){var v=t.substring(u,m-g.length);f.type==p?f.value+=v:(f.type&&c.push(f),f={type:p,value:v})}for(var y=0;y<l.length-2;y++)if(void 0!==l[y+1]){p=(d=o[s[y]]).onMatch?d.onMatch(g,i,n,t):d.token,d.next&&(i="string"==typeof d.next?d.next:d.next(i,n),(o=this.states[i])||(this.reportError("state doesn't exist",i),i="start",o=this.states[i]),s=this.matchMappings[i],u=m,(a=this.regExps[i]).lastIndex=m),d.consumeLineEnd&&(u=m);break}if(g)if("string"===typeof p)d&&!1===d.merge||f.type!==p?(f.type&&c.push(f),f={type:p,value:g}):f.value+=g;else if(p){f.type&&c.push(f),f={type:null,value:""};for(y=0;y<p.length;y++)c.push(p[y])}if(u==t.length)break;if(u=m,h++>r){for(h>2*t.length&&this.reportError("infinite loop with in ace tokenizer",{startState:e,line:t});u<t.length;)f.type&&c.push(f),f={value:t.substring(u,u+=500),type:"overflow"};i="start",n=[];break}}return f.type&&c.push(f),n.length>1&&n[0]!==i&&n.unshift("#tmp",i),{tokens:c,state:n.length?n:i}},this.reportError=i.reportError}).call(o.prototype),e.Tokenizer=o})),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],(function(t,e,n){"use strict";var i=t("../lib/lang"),r=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(t,e){if(e)for(var n in t){for(var i=t[n],r=0;r<i.length;r++){var o=i[r];(o.next||o.onMatch)&&("string"==typeof o.next&&0!==o.next.indexOf(e)&&(o.next=e+o.next),o.nextState&&0!==o.nextState.indexOf(e)&&(o.nextState=e+o.nextState))}this.$rules[e+n]=i}else for(var n in t)this.$rules[n]=t[n]},this.getRules=function(){return this.$rules},this.embedRules=function(t,e,n,r,o){var s="function"==typeof t?(new t).getRules():t;if(r)for(var a=0;a<r.length;a++)r[a]=e+r[a];else for(var l in r=[],s)r.push(e+l);if(this.addRules(s,e),n){var c=Array.prototype[o?"push":"unshift"];for(a=0;a<r.length;a++)c.apply(this.$rules[r[a]],i.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(e)},this.getEmbeds=function(){return this.$embeds};var t=function(t,e){return("start"!=t||e.length)&&e.unshift(this.nextState,t),this.nextState},e=function(t,e){return e.shift(),e.shift()||"start"};this.normalizeRules=function(){var n=0,i=this.$rules;Object.keys(i).forEach((function r(o){var s=i[o];s.processed=!0;for(var a=0;a<s.length;a++){var l=s[a],c=null;Array.isArray(l)&&(c=l,l={}),!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var u=l.next||l.push;if(u&&Array.isArray(u)){var h=l.stateName;h||("string"!=typeof(h=l.token)&&(h=h[0]||""),i[h]&&(h+=n++)),i[h]=u,l.next=h,r(h)}else"pop"==u&&(l.next=e);if(l.push&&(l.nextState=l.next||l.push,l.next=t,delete l.push),l.rules)for(var f in l.rules)i[f]?i[f].push&&i[f].push.apply(i[f],l.rules[f]):i[f]=l.rules[f];var p="string"==typeof l?l:l.include;if(p&&(c=Array.isArray(p)?p.map((function(t){return i[t]})):i[p]),c){var d=[a,1].concat(c);l.noEscape&&(d=d.filter((function(t){return!t.next}))),s.splice.apply(s,d),a--}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}),this)},this.createKeywordMapper=function(t,e,n,i){var r=Object.create(null);return this.$keywordList=[],Object.keys(t).forEach((function(e){for(var o=t[e].split(i||"|"),s=o.length;s--;){var a=o[s];this.$keywordList.push(a),n&&(a=a.toLowerCase()),r[a]=e}}),this),t=null,n?function(t){return r[t.toLowerCase()]||e}:function(t){return r[t]||e}},this.getKeywords=function(){return this.$keywords}}).call(r.prototype),e.TextHighlightRules=r})),ace.define("ace/mode/behaviour",["require","exports","module"],(function(t,e,n){"use strict";var i=function(){this.$behaviours={}};(function(){this.add=function(t,e,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[t]:this.$behaviours[t]={}}this.$behaviours[t][e]=n},this.addBehaviours=function(t){for(var e in t)for(var n in t[e])this.add(e,n,t[e][n])},this.remove=function(t){this.$behaviours&&this.$behaviours[t]&&delete this.$behaviours[t]},this.inherit=function(t,e){if("function"===typeof t)var n=(new t).getBehaviours(e);else n=t.getBehaviours(e);this.addBehaviours(n)},this.getBehaviours=function(t){if(t){for(var e={},n=0;n<t.length;n++)this.$behaviours[t[n]]&&(e[t[n]]=this.$behaviours[t[n]]);return e}return this.$behaviours}}).call(i.prototype),e.Behaviour=i})),ace.define("ace/token_iterator",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=t("./range").Range,r=function(t,e,n){this.$session=t,this.$row=e,this.$rowTokens=t.getTokens(e);var i=t.getTokenAt(e,n);this.$tokenIndex=i?i.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var t;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,t||(t=this.$session.getLength()),this.$row>=t)return this.$row=t-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var t=this.$rowTokens,e=this.$tokenIndex,n=t[e].start;if(void 0!==n)return n;for(n=0;e>0;)n+=t[e-=1].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var t=this.$rowTokens[this.$tokenIndex],e=this.getCurrentTokenColumn();return new i(this.$row,e,this.$row,e+t.value.length)}}).call(r.prototype),e.TokenIterator=r})),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(t,e,n){"use strict";var i,r=t("../../lib/oop"),o=t("../behaviour").Behaviour,s=t("../../token_iterator").TokenIterator,a=t("../../lib/lang"),l=["text","paren.rparen","rparen","paren","punctuation.operator"],c=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],u={},h={'"':'"',"'":"'"},f=function(t){var e=-1;if(t.multiSelect&&(e=t.selection.index,u.rangeCount!=t.multiSelect.rangeCount&&(u={rangeCount:t.multiSelect.rangeCount})),u[e])return i=u[e];i=u[e]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},p=function(t,e,n,i){var r=t.end.row-t.start.row;return{text:n+e+i,selection:[0,t.start.column+1,r,t.end.column+(r?0:1)]}},d=function t(e){this.add("braces","insertion",(function(n,r,o,s,l){var c=o.getCursorPosition(),u=s.doc.getLine(c.row);if("{"==l){f(o);var h=o.getSelectionRange(),d=s.doc.getTextRange(h);if(""!==d&&"{"!==d&&o.getWrapBehavioursEnabled())return p(h,d,"{","}");if(t.isSaneInsertion(o,s))return/[\]\}\)]/.test(u[c.column])||o.inMultiSelectMode||e&&e.braces?(t.recordAutoInsert(o,s,"}"),{text:"{}",selection:[1,1]}):(t.recordMaybeInsert(o,s,"{"),{text:"{",selection:[1,1]})}else if("}"==l){if(f(o),"}"==u.substring(c.column,c.column+1))if(null!==s.$findOpeningBracket("}",{column:c.column+1,row:c.row})&&t.isAutoInsertedClosing(c,u,l))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==l||"\r\n"==l){f(o);var g="";if(t.isMaybeInsertedClosing(c,u)&&(g=a.stringRepeat("}",i.maybeInsertedBrackets),t.clearMaybeInsertedClosing()),"}"===u.substring(c.column,c.column+1)){var m=s.findMatchingBracket({row:c.row,column:c.column+1},"}");if(!m)return null;var v=this.$getIndent(s.getLine(m.row))}else{if(!g)return void t.clearMaybeInsertedClosing();v=this.$getIndent(u)}var y=v+s.getTabString();return{text:"\n"+y+"\n"+v+g,selection:[1,y.length,1,y.length]}}t.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(t,e,n,r,o){var s=r.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==s){if(f(n),"}"==r.doc.getLine(o.start.row).substring(o.end.column,o.end.column+1))return o.end.column++,o;i.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(e,n,i,r,o){if("("==o){f(i);var s=i.getSelectionRange(),a=r.doc.getTextRange(s);if(""!==a&&i.getWrapBehavioursEnabled())return p(s,a,"(",")");if(t.isSaneInsertion(i,r))return t.recordAutoInsert(i,r,")"),{text:"()",selection:[1,1]}}else if(")"==o){f(i);var l=i.getCursorPosition(),c=r.doc.getLine(l.row);if(")"==c.substring(l.column,l.column+1))if(null!==r.$findOpeningBracket(")",{column:l.column+1,row:l.row})&&t.isAutoInsertedClosing(l,c,o))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("parens","deletion",(function(t,e,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"("==o&&(f(n),")"==i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)))return r.end.column++,r})),this.add("brackets","insertion",(function(e,n,i,r,o){if("["==o){f(i);var s=i.getSelectionRange(),a=r.doc.getTextRange(s);if(""!==a&&i.getWrapBehavioursEnabled())return p(s,a,"[","]");if(t.isSaneInsertion(i,r))return t.recordAutoInsert(i,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==o){f(i);var l=i.getCursorPosition(),c=r.doc.getLine(l.row);if("]"==c.substring(l.column,l.column+1))if(null!==r.$findOpeningBracket("]",{column:l.column+1,row:l.row})&&t.isAutoInsertedClosing(l,c,o))return t.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("brackets","deletion",(function(t,e,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"["==o&&(f(n),"]"==i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)))return r.end.column++,r})),this.add("string_dquotes","insertion",(function(t,e,n,i,r){var o=i.$mode.$quotes||h;if(1==r.length&&o[r]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(r))return;f(n);var s=r,a=n.getSelectionRange(),l=i.doc.getTextRange(a);if(!(""===l||1==l.length&&o[l])&&n.getWrapBehavioursEnabled())return p(a,l,s,s);if(!l){var c=n.getCursorPosition(),u=i.doc.getLine(c.row),d=u.substring(c.column-1,c.column),g=u.substring(c.column,c.column+1),m=i.getTokenAt(c.row,c.column),v=i.getTokenAt(c.row,c.column+1);if("\\"==d&&m&&/escape/.test(m.type))return null;var y,b=m&&/string|escape/.test(m.type),_=!v||/string|escape/.test(v.type);if(g==s)(y=b!==_)&&/string\.end/.test(v.type)&&(y=!1);else{if(b&&!_)return null;if(b&&_)return null;var w=i.$mode.tokenRe;w.lastIndex=0;var x=w.test(d);w.lastIndex=0;var k=w.test(d);if(x||k)return null;if(g&&!/[\s;,.})\]\\]/.test(g))return null;var S=u[c.column-2];if(d==s&&(S==s||w.test(S)))return null;y=!0}return{text:y?s+s:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(t,e,n,i,r){var o=i.$mode.$quotes||h,s=i.doc.getTextRange(r);if(!r.isMultiLine()&&o.hasOwnProperty(s)&&(f(n),i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)==s))return r.end.column++,r}))};d.isSaneInsertion=function(t,e){var n=t.getCursorPosition(),i=new s(e,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",l)){if(/[)}\]]/.test(t.session.getLine(n.row)[n.column]))return!0;var r=new s(e,n.row,n.column+1);if(!this.$matchTokenType(r.getCurrentToken()||"text",l))return!1}return i.stepForward(),i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",c)},d.$matchTokenType=function(t,e){return e.indexOf(t.type||t)>-1},d.recordAutoInsert=function(t,e,n){var r=t.getCursorPosition(),o=e.doc.getLine(r.row);this.isAutoInsertedClosing(r,o,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=r.row,i.autoInsertedLineEnd=n+o.substr(r.column),i.autoInsertedBrackets++},d.recordMaybeInsert=function(t,e,n){var r=t.getCursorPosition(),o=e.doc.getLine(r.row);this.isMaybeInsertedClosing(r,o)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=r.row,i.maybeInsertedLineStart=o.substr(0,r.column)+n,i.maybeInsertedLineEnd=o.substr(r.column),i.maybeInsertedBrackets++},d.isAutoInsertedClosing=function(t,e,n){return i.autoInsertedBrackets>0&&t.row===i.autoInsertedRow&&n===i.autoInsertedLineEnd[0]&&e.substr(t.column)===i.autoInsertedLineEnd},d.isMaybeInsertedClosing=function(t,e){return i.maybeInsertedBrackets>0&&t.row===i.maybeInsertedRow&&e.substr(t.column)===i.maybeInsertedLineEnd&&e.substr(0,t.column)==i.maybeInsertedLineStart},d.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},d.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},r.inherits(d,o),e.CstyleBehaviour=d})),ace.define("ace/unicode",["require","exports","module"],(function(t,e,n){"use strict";for(var i=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],r=0,o=[],s=0;s<i.length;s+=2)o.push(r+=i[s]),i[s+1]&&o.push(45,r+=i[s+1]);e.wordChars=String.fromCharCode.apply(null,o)})),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],(function(t,e,n){"use strict";var i=t("../config"),r=t("../tokenizer").Tokenizer,o=t("./text_highlight_rules").TextHighlightRules,s=t("./behaviour/cstyle").CstyleBehaviour,a=t("../unicode"),l=t("../lib/lang"),c=t("../token_iterator").TokenIterator,u=t("../range").Range,h=function(){this.HighlightRules=o};(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+a.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+a.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new r(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(t,e,n,i){var r=e.doc,o=!0,s=!0,a=1/0,c=e.getTabSize(),u=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))g=this.lineCommentStart.map(l.escapeRegExp).join("|"),p=this.lineCommentStart[0];else g=l.escapeRegExp(this.lineCommentStart),p=this.lineCommentStart;g=new RegExp("^(\\s*)(?:"+g+") ?"),u=e.getUseSoftTabs();y=function(t,e){var n=t.match(g);if(n){var i=n[1].length,o=n[0].length;f(t,i,o)||" "!=n[0][o-1]||o--,r.removeInLine(e,i,o)}};var h=p+" ",f=(v=function(t,e){o&&!/\S/.test(t)||(f(t,a,a)?r.insertInLine({row:e,column:a},h):r.insertInLine({row:e,column:a},p))},b=function(t,e){return g.test(t)},function(t,e,n){for(var i=0;e--&&" "==t.charAt(e);)i++;if(i%c!=0)return!1;for(i=0;" "==t.charAt(n++);)i++;return c>2?i%c!=c-1:i%c==0})}else{if(!this.blockComment)return!1;var p=this.blockComment.start,d=this.blockComment.end,g=new RegExp("^(\\s*)(?:"+l.escapeRegExp(p)+")"),m=new RegExp("(?:"+l.escapeRegExp(d)+")\\s*$"),v=function(t,e){b(t,e)||o&&!/\S/.test(t)||(r.insertInLine({row:e,column:t.length},d),r.insertInLine({row:e,column:a},p))},y=function(t,e){var n;(n=t.match(m))&&r.removeInLine(e,t.length-n[0].length,t.length),(n=t.match(g))&&r.removeInLine(e,n[1].length,n[0].length)},b=function(t,n){if(g.test(t))return!0;for(var i=e.getTokens(n),r=0;r<i.length;r++)if("comment"===i[r].type)return!0}}function _(t){for(var e=n;e<=i;e++)t(r.getLine(e),e)}var w=1/0;_((function(t,e){var n=t.search(/\S/);-1!==n?(n<a&&(a=n),s&&!b(t,e)&&(s=!1)):w>t.length&&(w=t.length)})),a==1/0&&(a=w,o=!1,s=!1),u&&a%c!=0&&(a=Math.floor(a/c)*c),_(s?y:v)},this.toggleBlockComment=function(t,e,n,i){var r=this.blockComment;if(r){!r.start&&r[0]&&(r=r[0]);var o,s,a=(g=new c(e,i.row,i.column)).getCurrentToken(),l=(e.selection,e.selection.toOrientedRange());if(a&&/comment/.test(a.type)){for(var h,f;a&&/comment/.test(a.type);){if(-1!=(m=a.value.indexOf(r.start))){var p=g.getCurrentTokenRow(),d=g.getCurrentTokenColumn()+m;h=new u(p,d,p,d+r.start.length);break}a=g.stepBackward()}var g;for(a=(g=new c(e,i.row,i.column)).getCurrentToken();a&&/comment/.test(a.type);){var m;if(-1!=(m=a.value.indexOf(r.end))){p=g.getCurrentTokenRow(),d=g.getCurrentTokenColumn()+m;f=new u(p,d,p,d+r.end.length);break}a=g.stepForward()}f&&e.remove(f),h&&(e.remove(h),o=h.start.row,s=-r.start.length)}else s=r.start.length,o=n.start.row,e.insert(n.end,r.end),e.insert(n.start,r.start);l.start.row==o&&(l.start.column+=s),l.end.row==o&&(l.end.column+=s),e.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(t,e,n){return this.$getIndent(e)},this.checkOutdent=function(t,e,n){return!1},this.autoOutdent=function(t,e,n){},this.$getIndent=function(t){return t.match(/^\s*/)[0]},this.createWorker=function(t){return null},this.createModeDelegates=function(t){for(var e in this.$embeds=[],this.$modes={},t)if(t[e]){var n=t[e],r=n.prototype.$id,o=i.$modes[r];o||(i.$modes[r]=o=new n),i.$modes[e]||(i.$modes[e]=o),this.$embeds.push(e),this.$modes[e]=o}var s=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(e=0;e<s.length;e++)!function(t){var n=s[e],i=t[n];t[s[e]]=function(){return this.$delegator(n,arguments,i)}}(this)},this.$delegator=function(t,e,n){var i=e[0]||"start";if("string"!=typeof i){if(Array.isArray(i[2])){var r=i[2][i[2].length-1];if(s=this.$modes[r])return s[t].apply(s,[i[1]].concat([].slice.call(e,1)))}i=i[0]||"start"}for(var o=0;o<this.$embeds.length;o++)if(this.$modes[this.$embeds[o]]){var s,a=i.split(this.$embeds[o]);if(!a[0]&&a[1])return e[0]=a[1],(s=this.$modes[this.$embeds[o]])[t].apply(s,e)}var l=n.apply(this,e);return n?l:void 0},this.transformAction=function(t,e,n,i,r){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var s in o)if(o[s][e]){var a=o[s][e].apply(this,arguments);if(a)return a}}},this.getKeywords=function(t){if(!this.completionKeywords){var e=this.$tokenizer.rules,n=[];for(var i in e)for(var r=e[i],o=0,s=r.length;o<s;o++)if("string"===typeof r[o].token)/keyword|support|storage/.test(r[o].token)&&n.push(r[o].regex);else if("object"===typeof r[o].token)for(var a=0,l=r[o].token.length;a<l;a++)if(/keyword|support|storage/.test(r[o].token[a])){i=r[o].regex.match(/\(.+?\)/g)[a];n.push(i.substr(1,i.length-2))}this.completionKeywords=n}return t?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(t,e,n,i){return(this.$keywordList||this.$createKeywordList()).map((function(t){return{name:t,value:t,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call(h.prototype),e.Mode=h})),ace.define("ace/apply_delta",["require","exports","module"],(function(t,e,n){"use strict";e.applyDelta=function(t,e,n){var i=e.start.row,r=e.start.column,o=t[i]||"";switch(e.action){case"insert":if(1===e.lines.length)t[i]=o.substring(0,r)+e.lines[0]+o.substring(r);else{var s=[i,1].concat(e.lines);t.splice.apply(t,s),t[i]=o.substring(0,r)+t[i],t[i+e.lines.length-1]+=o.substring(r)}break;case"remove":var a=e.end.column,l=e.end.row;i===l?t[i]=o.substring(0,r)+o.substring(a):t.splice(i,l-i+1,o.substring(0,r)+t[l].substring(a))}}})),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/event_emitter").EventEmitter,o=e.Anchor=function(t,e,n){this.$onChange=this.onChange.bind(this),this.attach(t),"undefined"==typeof n?this.setPosition(e.row,e.column):this.setPosition(e,n)};(function(){function t(t,e,n){var i=n?t.column<=e.column:t.column<e.column;return t.row<e.row||t.row==e.row&&i}i.implement(this,r),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if((e.start.row!=e.end.row||e.start.row==this.row)&&!(e.start.row>this.row)){var n=function(e,n,i){var r="insert"==e.action,o=(r?1:-1)*(e.end.row-e.start.row),s=(r?1:-1)*(e.end.column-e.start.column),a=e.start,l=r?a:e.end;if(t(n,a,i))return{row:n.row,column:n.column};if(t(l,n,!i))return{row:n.row+o,column:n.column+(n.row==l.row?s:0)};return{row:a.row,column:a.column}}(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(t,e,n){var i;if(i=n?{row:t,column:e}:this.$clipPositionToDocument(t,e),this.row!=i.row||this.column!=i.column){var r={row:this.row,column:this.column};this.row=i.row,this.column=i.column,this._signal("change",{old:r,value:i})}},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(t){this.document=t||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(t,e){var n={};return t>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):t<0?(n.row=0,n.column=0):(n.row=t,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,e))),e<0&&(n.column=0),n}}).call(o.prototype)})),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./apply_delta").applyDelta,o=t("./lib/event_emitter").EventEmitter,s=t("./range").Range,a=t("./anchor").Anchor,l=function(t){this.$lines=[""],0===t.length?this.$lines=[""]:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)};(function(){i.implement(this,o),this.setValue=function(t){var e=this.getLength()-1;this.remove(new s(0,0,e,this.getLine(e).length)),this.insert({row:0,column:0},t)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(t,e){return new a(this,t,e)},0==="aaa".split(/a/).length?this.$split=function(t){return t.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return"\r\n"==t||"\r"==t||"\n"==t},this.getLine=function(t){return this.$lines[t]||""},this.getLines=function(t,e){return this.$lines.slice(t,e+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(t){var e;if(t.start.row===t.end.row)e=[this.getLine(t.start.row).substring(t.start.column,t.end.column)];else{(e=this.getLines(t.start.row,t.end.row))[0]=(e[0]||"").substring(t.start.column);var n=e.length-1;t.end.row-t.start.row==n&&(e[n]=e[n].substring(0,t.end.column))}return e},this.insertLines=function(t,e){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(t,e)},this.removeLines=function(t,e){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(t,e)},this.insertNewLine=function(t){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(t,["",""])},this.insert=function(t,e){return this.getLength()<=1&&this.$detectNewLine(e),this.insertMergedLines(t,this.$split(e))},this.insertInLine=function(t,e){var n=this.clippedPos(t.row,t.column),i=this.pos(t.row,t.column+e.length);return this.applyDelta({start:n,end:i,action:"insert",lines:[e]},!0),this.clonePos(i)},this.clippedPos=function(t,e){var n=this.getLength();void 0===t?t=n:t<0?t=0:t>=n&&(t=n-1,e=void 0);var i=this.getLine(t);return void 0==e&&(e=i.length),{row:t,column:e=Math.min(Math.max(e,0),i.length)}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(t,e){return{row:t,column:e}},this.$clipPosition=function(t){var e=this.getLength();return t.row>=e?(t.row=Math.max(0,e-1),t.column=this.getLine(e-1).length):(t.row=Math.max(0,t.row),t.column=Math.min(Math.max(t.column,0),this.getLine(t.row).length)),t},this.insertFullLines=function(t,e){var n=0;(t=Math.min(Math.max(t,0),this.getLength()))<this.getLength()?(e=e.concat([""]),n=0):(e=[""].concat(e),t--,n=this.$lines[t].length),this.insertMergedLines({row:t,column:n},e)},this.insertMergedLines=function(t,e){var n=this.clippedPos(t.row,t.column),i={row:n.row+e.length-1,column:(1==e.length?n.column:0)+e[e.length-1].length};return this.applyDelta({start:n,end:i,action:"insert",lines:e}),this.clonePos(i)},this.remove=function(t){var e=this.clippedPos(t.start.row,t.start.column),n=this.clippedPos(t.end.row,t.end.column);return this.applyDelta({start:e,end:n,action:"remove",lines:this.getLinesForRange({start:e,end:n})}),this.clonePos(e)},this.removeInLine=function(t,e,n){var i=this.clippedPos(t,e),r=this.clippedPos(t,n);return this.applyDelta({start:i,end:r,action:"remove",lines:this.getLinesForRange({start:i,end:r})},!0),this.clonePos(i)},this.removeFullLines=function(t,e){t=Math.min(Math.max(0,t),this.getLength()-1);var n=(e=Math.min(Math.max(0,e),this.getLength()-1))==this.getLength()-1&&t>0,i=e<this.getLength()-1,r=n?t-1:t,o=n?this.getLine(r).length:0,a=i?e+1:e,l=i?0:this.getLine(a).length,c=new s(r,o,a,l),u=this.$lines.slice(t,e+1);return this.applyDelta({start:c.start,end:c.end,action:"remove",lines:this.getLinesForRange(c)}),u},this.removeNewLine=function(t){t<this.getLength()-1&&t>=0&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:"remove",lines:["",""]})},this.replace=function(t,e){return t instanceof s||(t=s.fromPoints(t.start,t.end)),0===e.length&&t.isEmpty()?t.start:e==this.getTextRange(t)?t.end:(this.remove(t),e?this.insert(t.start,e):t.start)},this.applyDeltas=function(t){for(var e=0;e<t.length;e++)this.applyDelta(t[e])},this.revertDeltas=function(t){for(var e=t.length-1;e>=0;e--)this.revertDelta(t[e])},this.applyDelta=function(t,e){var n="insert"==t.action;(n?t.lines.length<=1&&!t.lines[0]:!s.comparePoints(t.start,t.end))||(n&&t.lines.length>2e4?this.$splitAndapplyLargeDelta(t,2e4):(r(this.$lines,t,e),this._signal("change",t)))},this.$safeApplyDelta=function(t){var e=this.$lines.length;("remove"==t.action&&t.start.row<e&&t.end.row<e||"insert"==t.action&&t.start.row<=e)&&this.applyDelta(t)},this.$splitAndapplyLargeDelta=function(t,e){for(var n=t.lines,i=n.length-e+1,r=t.start.row,o=t.start.column,s=0,a=0;s<i;s=a){a+=e-1;var l=n.slice(s,a);l.push(""),this.applyDelta({start:this.pos(r+s,o),end:this.pos(r+a,o=0),action:t.action,lines:l},!0)}t.lines=n.slice(s),t.start.row=r+s,t.start.column=o,this.applyDelta(t,!0)},this.revertDelta=function(t){this.$safeApplyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:"insert"==t.action?"remove":"insert",lines:t.lines.slice()})},this.indexToPosition=function(t,e){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=e||0,o=n.length;r<o;r++)if((t-=n[r].length+i)<0)return{row:r,column:t+n[r].length+i};return{row:o-1,column:t+n[o-1].length+i}},this.positionToIndex=function(t,e){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=0,o=Math.min(t.row,n.length),s=e||0;s<o;++s)r+=n[s].length+i;return r+t.column}}).call(l.prototype),e.Document=l})),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/event_emitter").EventEmitter,o=function(t,e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=t;var n=this;this.$worker=function(){if(n.running){for(var t=new Date,e=n.currentLine,i=-1,r=n.doc,o=e;n.lines[e];)e++;var s=r.getLength(),a=0;for(n.running=!1;e<s;){n.$tokenizeRow(e),i=e;do{e++}while(n.lines[e]);if(++a%5===0&&new Date-t>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=e,-1==i&&(i=e),o<=i&&n.fireUpdateEvent(o,i)}}};(function(){i.implement(this,r),this.setTokenizer=function(t){this.tokenizer=t,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(t){this.doc=t,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(t,e){var n={first:t,last:e};this._signal("update",{data:n})},this.start=function(t){this.currentLine=Math.min(t||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(t){var e=t.start.row,n=t.end.row-e;if(0===n)this.lines[e]=null;else if("remove"==t.action)this.lines.splice(e,n+1,null),this.states.splice(e,n+1,null);else{var i=Array(n+1);i.unshift(e,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(e,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(t){return this.lines[t]||this.$tokenizeRow(t)},this.getState=function(t){return this.currentLine==t&&this.$tokenizeRow(t),this.states[t]||"start"},this.$tokenizeRow=function(t){var e=this.doc.getLine(t),n=this.states[t-1],i=this.tokenizer.getLineTokens(e,n,t);return this.states[t]+""!==i.state+""?(this.states[t]=i.state,this.lines[t+1]=null,this.currentLine>t+1&&(this.currentLine=t+1)):this.currentLine==t&&(this.currentLine=t+1),this.lines[t]=i.tokens}}).call(o.prototype),e.BackgroundTokenizer=o})),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(t,e,n){"use strict";var i=t("./lib/lang"),r=(t("./lib/oop"),t("./range").Range),o=function(t,e,n){this.setRegexp(t),this.clazz=e,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(t){this.regExp+""!=t+""&&(this.regExp=t,this.cache=[])},this.update=function(t,e,n,o){if(this.regExp)for(var s=o.firstRow,a=o.lastRow,l=s;l<=a;l++){var c=this.cache[l];null==c&&((c=i.getMatchOffsets(n.getLine(l),this.regExp)).length>this.MAX_RANGES&&(c=c.slice(0,this.MAX_RANGES)),c=c.map((function(t){return new r(l,t.offset,l,t.offset+t.length)})),this.cache[l]=c.length?c:"");for(var u=c.length;u--;)e.drawSingleLineMarker(t,c[u].toScreenRange(n),this.clazz,o)}}}).call(o.prototype),e.SearchHighlight=o})),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=t("../range").Range;function r(t,e){this.foldData=t,Array.isArray(e)?this.folds=e:e=this.folds=[e];var n=e[e.length-1];this.range=new i(e[0].start.row,e[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(t){t.setFoldLine(this)}),this)}(function(){this.shiftRow=function(t){this.start.row+=t,this.end.row+=t,this.folds.forEach((function(e){e.start.row+=t,e.end.row+=t}))},this.addFold=function(t){if(t.sameRow){if(t.start.row<this.startRow||t.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(t),this.folds.sort((function(t,e){return-t.range.compareEnd(e.start.row,e.start.column)})),this.range.compareEnd(t.start.row,t.start.column)>0?(this.end.row=t.end.row,this.end.column=t.end.column):this.range.compareStart(t.end.row,t.end.column)<0&&(this.start.row=t.start.row,this.start.column=t.start.column)}else if(t.start.row==this.end.row)this.folds.push(t),this.end.row=t.end.row,this.end.column=t.end.column;else{if(t.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(t),this.start.row=t.start.row,this.start.column=t.start.column}t.foldLine=this},this.containsRow=function(t){return t>=this.start.row&&t<=this.end.row},this.walk=function(t,e,n){var i,r,o=0,s=this.folds,a=!0;null==e&&(e=this.end.row,n=this.end.column);for(var l=0;l<s.length;l++){if(-1==(r=(i=s[l]).range.compareStart(e,n)))return void t(null,e,n,o,a);if(!t(null,i.start.row,i.start.column,o,a)&&t(i.placeholder,i.start.row,i.start.column,o)||0===r)return;a=!i.sameRow,o=i.end.column}t(null,e,n,o,a)},this.getNextFoldTo=function(t,e){for(var n,i,r=0;r<this.folds.length;r++){if(-1==(i=(n=this.folds[r]).range.compareEnd(t,e)))return{fold:n,kind:"after"};if(0===i)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(t,e,n){var i,r,o=this.getNextFoldTo(t,e);if(o)if(i=o.fold,"inside"==o.kind&&i.start.column!=e&&i.start.row!=t)window.console&&window.console.log(t,e,i);else if(i.start.row==t){var s=(r=this.folds).indexOf(i);for(0===s&&(this.start.column+=n);s<r.length;s++){if((i=r[s]).start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(t,e){var n=this.getNextFoldTo(t,e);if(!n||"inside"==n.kind)return null;var i=n.fold,o=this.folds,s=this.foldData,a=o.indexOf(i),l=o[a-1];this.end.row=l.end.row,this.end.column=l.end.column;var c=new r(s,o=o.splice(a,o.length-a));return s.splice(s.indexOf(this)+1,0,c),c},this.merge=function(t){for(var e=t.folds,n=0;n<e.length;n++)this.addFold(e[n]);var i=this.foldData;i.splice(i.indexOf(t),1)},this.toString=function(){var t=[this.range.toString()+": ["];return this.folds.forEach((function(e){t.push("  "+e.toString())})),t.push("]"),t.join("\n")},this.idxToPosition=function(t){for(var e=0,n=0;n<this.folds.length;n++){var i=this.folds[n];if((t-=i.start.column-e)<0)return{row:i.start.row,column:i.start.column+t};if((t-=i.placeholder.length)<0)return i.start;e=i.end.column}return{row:this.end.row,column:this.end.column+t}}}).call(r.prototype),e.FoldLine=r})),ace.define("ace/range_list",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=t("./range").Range.comparePoints,r=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=i,this.pointIndex=function(t,e,n){for(var r=this.ranges,o=n||0;o<r.length;o++){var s=r[o],a=i(t,s.end);if(!(a>0)){var l=i(t,s.start);return 0===a?e&&0!==l?-o-2:o:l>0||0===l&&!e?o:-o-1}}return-o-1},this.add=function(t){var e=!t.isEmpty(),n=this.pointIndex(t.start,e);n<0&&(n=-n-1);var i=this.pointIndex(t.end,e,n);return i<0?i=-i-1:i++,this.ranges.splice(n,i-n,t)},this.addList=function(t){for(var e=[],n=t.length;n--;)e.push.apply(e,this.add(t[n]));return e},this.substractPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges.splice(e,1)},this.merge=function(){for(var t,e=[],n=this.ranges,r=(n=n.sort((function(t,e){return i(t.start,e.start)})))[0],o=1;o<n.length;o++){t=r,r=n[o];var s=i(t.end,r.start);s<0||(0!=s||t.isEmpty()||r.isEmpty())&&(i(t.end,r.end)<0&&(t.end.row=r.end.row,t.end.column=r.end.column),n.splice(o,1),e.push(r),r=t,o--)}return this.ranges=n,e},this.contains=function(t,e){return this.pointIndex({row:t,column:e})>=0},this.containsPoint=function(t){return this.pointIndex(t)>=0},this.rangeAtPoint=function(t){var e=this.pointIndex(t);if(e>=0)return this.ranges[e]},this.clipRows=function(t,e){var n=this.ranges;if(n[0].start.row>e||n[n.length-1].start.row<t)return[];var i=this.pointIndex({row:t,column:0});i<0&&(i=-i-1);var r=this.pointIndex({row:e,column:0},i);r<0&&(r=-r-1);for(var o=[],s=i;s<r;s++)o.push(n[s]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(t){this.session&&this.detach(),this.session=t,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(t){for(var e=t.start,n=t.end,i=e.row,r=n.row,o=this.ranges,s=0,a=o.length;s<a;s++){if((u=o[s]).end.row>=i)break}if("insert"==t.action)for(var l=r-i,c=-e.column+n.column;s<a;s++){if((u=o[s]).start.row>i)break;if(u.start.row==i&&u.start.column>=e.column&&(u.start.column==e.column&&this.$bias<=0||(u.start.column+=c,u.start.row+=l)),u.end.row==i&&u.end.column>=e.column){if(u.end.column==e.column&&this.$bias<0)continue;u.end.column==e.column&&c>0&&s<a-1&&u.end.column>u.start.column&&u.end.column==o[s+1].start.column&&(u.end.column-=c),u.end.column+=c,u.end.row+=l}}else for(l=i-r,c=e.column-n.column;s<a;s++){if((u=o[s]).start.row>r)break;u.end.row<r&&(i<u.end.row||i==u.end.row&&e.column<u.end.column)?(u.end.row=i,u.end.column=e.column):u.end.row==r?u.end.column<=n.column?(l||u.end.column>e.column)&&(u.end.column=e.column,u.end.row=e.row):(u.end.column+=c,u.end.row+=l):u.end.row>r&&(u.end.row+=l),u.start.row<r&&(i<u.start.row||i==u.start.row&&e.column<u.start.column)?(u.start.row=i,u.start.column=e.column):u.start.row==r?u.start.column<=n.column?(l||u.start.column>e.column)&&(u.start.column=e.column,u.start.row=e.row):(u.start.column+=c,u.start.row+=l):u.start.row>r&&(u.start.row+=l)}if(0!=l&&s<a)for(;s<a;s++){var u;(u=o[s]).start.row+=l,u.end.row+=l}}}).call(r.prototype),e.RangeList=r})),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],(function(t,e,n){"use strict";var i=t("../range_list").RangeList,r=t("../lib/oop"),o=e.Fold=function(t,e){this.foldLine=null,this.placeholder=e,this.range=t,this.start=t.start,this.end=t.end,this.sameRow=t.start.row==t.end.row,this.subFolds=this.ranges=[]};function s(t,e){t.row-=e.row,0==t.row&&(t.column-=e.column)}function a(t,e){0==t.row&&(t.column+=e.column),t.row+=e.row}r.inherits(o,i),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach((function(e){e.setFoldLine(t)}))},this.clone=function(){var t=this.range.clone(),e=new o(t,this.placeholder);return this.subFolds.forEach((function(t){e.subFolds.push(t.clone())})),e.collapseChildren=this.collapseChildren,e},this.addSubFold=function(t){if(!this.range.isEqual(t)){var e,n;e=t,n=this.start,s(e.start,n),s(e.end,n);for(var i=t.start.row,r=t.start.column,o=0,a=-1;o<this.subFolds.length&&1==(a=this.subFolds[o].range.compare(i,r));o++);var l=this.subFolds[o],c=0;if(0==a){if(l.range.containsRange(t))return l.addSubFold(t);c=1}i=t.range.end.row,r=t.range.end.column;var u=o;for(a=-1;u<this.subFolds.length&&1==(a=this.subFolds[u].range.compare(i,r));u++);0==a&&u++;for(var h=this.subFolds.splice(o,u-o,t),f=0==a?h.length-1:h.length,p=c;p<f;p++)t.addSubFold(h[p]);return t.setFoldLine(this.foldLine),t}},this.restoreRange=function(t){return function(t,e){a(t.start,e),a(t.end,e)}(t,this.start)}}.call(o.prototype)})),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],(function(t,e,n){"use strict";var i=t("../range").Range,r=t("./fold_line").FoldLine,o=t("./fold").Fold,s=t("../token_iterator").TokenIterator;e.Folding=function(){this.getFoldAt=function(t,e,n){var i=this.getFoldLine(t);if(!i)return null;for(var r=i.folds,o=0;o<r.length;o++){var s=r[o].range;if(s.contains(t,e)){if(1==n&&s.isEnd(t,e)&&!s.isEmpty())continue;if(-1==n&&s.isStart(t,e)&&!s.isEmpty())continue;return r[o]}}},this.getFoldsInRange=function(t){var e=t.start,n=t.end,i=this.$foldData,r=[];e.column+=1,n.column-=1;for(var o=0;o<i.length;o++){var s=i[o].range.compareRange(t);if(2!=s){if(-2==s)break;for(var a=i[o].folds,l=0;l<a.length;l++){var c=a[l];if(-2==(s=c.range.compareRange(t)))break;if(2!=s){if(42==s)break;r.push(c)}}}}return e.column-=1,n.column+=1,r},this.getFoldsInRangeList=function(t){if(Array.isArray(t)){var e=[];t.forEach((function(t){e=e.concat(this.getFoldsInRange(t))}),this)}else e=this.getFoldsInRange(t);return e},this.getAllFolds=function(){for(var t=[],e=this.$foldData,n=0;n<e.length;n++)for(var i=0;i<e[n].folds.length;i++)t.push(e[n].folds[i]);return t},this.getFoldStringAt=function(t,e,n,i){if(!(i=i||this.getFoldLine(t)))return null;for(var r,o,s={end:{column:0}},a=0;a<i.folds.length;a++){var l=(o=i.folds[a]).range.compareEnd(t,e);if(-1==l){r=this.getLine(o.start.row).substring(s.end.column,o.start.column);break}if(0===l)return null;s=o}return r||(r=this.getLine(o.start.row).substring(s.end.column)),-1==n?r.substring(0,e-s.end.column):1==n?r.substring(e-s.end.column):r},this.getFoldLine=function(t,e){var n=this.$foldData,i=0;for(e&&(i=n.indexOf(e)),-1==i&&(i=0);i<n.length;i++){var r=n[i];if(r.start.row<=t&&r.end.row>=t)return r;if(r.end.row>t)return null}return null},this.getNextFoldLine=function(t,e){var n=this.$foldData,i=0;for(e&&(i=n.indexOf(e)),-1==i&&(i=0);i<n.length;i++){var r=n[i];if(r.end.row>=t)return r}return null},this.getFoldedRowCount=function(t,e){for(var n=this.$foldData,i=e-t+1,r=0;r<n.length;r++){var o=n[r],s=o.end.row,a=o.start.row;if(s>=e){a<e&&(a>=t?i-=e-a:i=0);break}s>=t&&(i-=a>=t?s-a:s-t+1)}return i},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort((function(t,e){return t.start.row-e.start.row})),t},this.addFold=function(t,e){var n,i=this.$foldData,s=!1;t instanceof o?n=t:(n=new o(e,t)).collapseChildren=e.collapseChildren,this.$clipRangeToDocument(n.range);var a=n.start.row,l=n.start.column,c=n.end.row,u=n.end.column,h=this.getFoldAt(a,l,1),f=this.getFoldAt(c,u,-1);if(h&&f==h)return h.addSubFold(n);h&&!h.range.isStart(a,l)&&this.removeFold(h),f&&!f.range.isEnd(c,u)&&this.removeFold(f);var p=this.getFoldsInRange(n.range);p.length>0&&(this.removeFolds(p),n.collapseChildren||p.forEach((function(t){n.addSubFold(t)})));for(var d=0;d<i.length;d++){var g=i[d];if(c==g.start.row){g.addFold(n),s=!0;break}if(a==g.end.row){if(g.addFold(n),s=!0,!n.sameRow){var m=i[d+1];if(m&&m.start.row==c){g.merge(m);break}}break}if(c<=g.start.row)break}return s||(g=this.$addFoldLine(new r(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(t){t.forEach((function(t){this.addFold(t)}),this)},this.removeFold=function(t){var e=t.foldLine,n=e.start.row,i=e.end.row,r=this.$foldData,o=e.folds;if(1==o.length)r.splice(r.indexOf(e),1);else if(e.range.isEnd(t.end.row,t.end.column))o.pop(),e.end.row=o[o.length-1].end.row,e.end.column=o[o.length-1].end.column;else if(e.range.isStart(t.start.row,t.start.column))o.shift(),e.start.row=o[0].start.row,e.start.column=o[0].start.column;else if(t.sameRow)o.splice(o.indexOf(t),1);else{var s=e.split(t.start.row,t.start.column);(o=s.folds).shift(),s.start.row=o[0].start.row,s.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,i):this.$updateRowLengthCache(n,i)),this.$modified=!0,this._signal("changeFold",{data:t,action:"remove"})},this.removeFolds=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);e.forEach((function(t){this.removeFold(t)}),this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach((function(e){t.restoreRange(e),this.addFold(e)}),this),t.collapseChildren>0&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(t){t.forEach((function(t){this.expandFold(t)}),this)},this.unfold=function(t,e){var n,r;if(null==t?(n=new i(0,0,this.getLength(),0),null==e&&(e=!0)):n="number"==typeof t?new i(t,0,t,this.getLine(t).length):"row"in t?i.fromPoints(t,t):t,r=this.getFoldsInRangeList(n),0!=e?this.removeFolds(r):this.expandFolds(r),r.length)return r},this.isRowFolded=function(t,e){return!!this.getFoldLine(t,e)},this.getRowFoldEnd=function(t,e){var n=this.getFoldLine(t,e);return n?n.end.row:t},this.getRowFoldStart=function(t,e){var n=this.getFoldLine(t,e);return n?n.start.row:t},this.getFoldDisplayLine=function(t,e,n,i,r){null==i&&(i=t.start.row),null==r&&(r=0),null==e&&(e=t.end.row),null==n&&(n=this.getLine(e).length);var o=this.doc,s="";return t.walk((function(t,e,n,a){if(!(e<i)){if(e==i){if(n<r)return;a=Math.max(r,a)}s+=null!=t?t:o.getLine(e).substring(a,n)}}),e,n),s},this.getDisplayLine=function(t,e,n,i){var r,o=this.getFoldLine(t);return o?this.getFoldDisplayLine(o,t,e,n,i):(r=this.doc.getLine(t)).substring(i||0,e||r.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map((function(e){var n=e.folds.map((function(t){return t.clone()}));return new r(t,n)}))},this.toggleFold=function(t){var e,n,i=this.selection.getRange();if(i.isEmpty()){var r=i.start;if(e=this.getFoldAt(r.row,r.column))return void this.expandFold(e);(n=this.findMatchingBracket(r))?1==i.comparePoint(n)?i.end=n:(i.start=n,i.start.column++,i.end.column--):(n=this.findMatchingBracket({row:r.row,column:r.column+1}))?(1==i.comparePoint(n)?i.end=n:i.start=n,i.start.column++):i=this.getCommentFoldRange(r.row,r.column)||i}else{var o=this.getFoldsInRange(i);if(t&&o.length)return void this.expandFolds(o);1==o.length&&(e=o[0])}if(e||(e=this.getFoldAt(i.start.row,i.start.column)),e&&e.range.toString()==i.toString())this.expandFold(e);else{var s="...";if(!i.isMultiLine()){if((s=this.getTextRange(i)).length<4)return;s=s.trim().substring(0,2)+".."}this.addFold(s,i)}},this.getCommentFoldRange=function(t,e,n){var r=new s(this,t,e),o=r.getCurrentToken(),a=o&&o.type;if(o&&/^comment|string/.test(a)){"comment"==(a=a.match(/comment|string/)[0])&&(a+="|doc-start");var l=new RegExp(a),c=new i;if(1!=n){do{o=r.stepBackward()}while(o&&l.test(o.type));r.stepForward()}if(c.start.row=r.getCurrentTokenRow(),c.start.column=r.getCurrentTokenColumn()+2,r=new s(this,t,e),-1!=n){var u=-1;do{if(o=r.stepForward(),-1==u){var h=this.getState(r.$row);l.test(h)||(u=r.$row)}else if(r.$row>u)break}while(o&&l.test(o.type));o=r.stepBackward()}else o=r.getCurrentToken();return c.end.row=r.getCurrentTokenRow(),c.end.column=r.getCurrentTokenColumn()+o.value.length-2,c}},this.foldAll=function(t,e,n,i){void 0==n&&(n=1e5);var r=this.foldWidgets;if(r){e=e||this.getLength();for(var o=t=t||0;o<e;o++)if(null==r[o]&&(r[o]=this.getFoldWidget(o)),"start"==r[o]&&(!i||i(o))){var s=this.getFoldWidgetRange(o);s&&s.isMultiLine()&&s.end.row<=e&&s.start.row>=t&&(o=s.end.row,s.collapseChildren=n,this.addFold("...",s))}}},this.foldToLevel=function(t){for(this.foldAll();t-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var t=this;this.foldAll(null,null,null,(function(e){for(var n=t.getTokens(e),i=0;i<n.length;i++){var r=n[i];if("text"!=r.type||!/^\s+$/.test(r.value))return!!/comment/.test(r.type)}}))},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(t){if(!this.$foldStyles[t])throw new Error("invalid fold style: "+t+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=t){this.$foldStyle=t,"manual"==t&&this.unfold();var e=this.$foldMode;this.$setFolding(null),this.$setFolding(e)}},this.$setFolding=function(t){this.$foldMode!=t&&(this.$foldMode=t,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),t&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(t,e){var n=this.foldWidgets;if(!n||e&&n[t])return{};for(var i,r=t-1;r>=0;){var o=n[r];if(null==o&&(o=n[r]=this.getFoldWidget(r)),"start"==o){var s=this.getFoldWidgetRange(r);if(i||(i=s),s&&s.end.row>=t)break}r--}return{range:-1!==r&&s,firstRange:i}},this.onFoldWidgetClick=function(t,e){var n={children:(e=e.domEvent).shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey};if(!this.$toggleFoldWidget(t,n)){var i=e.target||e.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(t,e){if(this.getFoldWidget){var n=this.getFoldWidget(t),i=this.getLine(t),r="end"===n?-1:1,o=this.getFoldAt(t,-1===r?0:i.length,r);if(o)return e.children||e.all?this.removeFold(o):this.expandFold(o),o;var s=this.getFoldWidgetRange(t,!0);if(s&&!s.isMultiLine()&&(o=this.getFoldAt(s.start.row,s.start.column,1))&&s.isEqual(o.range))return this.removeFold(o),o;if(e.siblings){var a=this.getParentFoldRangeData(t);if(a.range)var l=a.range.start.row+1,c=a.range.end.row;this.foldAll(l,c,e.all?1e4:0)}else e.children?(c=s?s.end.row:this.getLength(),this.foldAll(t+1,c,e.all?1e4:0)):s&&(e.all&&(s.collapseChildren=1e4),this.addFold("...",s));return s}},this.toggleFoldWidget=function(t){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var n=this.$toggleFoldWidget(e,{});if(!n){var i=this.getParentFoldRangeData(e,!0);if(n=i.range||i.firstRange){e=n.start.row;var r=this.getFoldAt(e,this.getLine(e).length,1);r?this.removeFold(r):this.addFold("...",n)}}},this.updateFoldWidgets=function(t){var e=t.start.row,n=t.end.row-e;if(0===n)this.foldWidgets[e]=null;else if("remove"==t.action)this.foldWidgets.splice(e,n+1,null);else{var i=Array(n+1);i.unshift(e,1),this.foldWidgets.splice.apply(this.foldWidgets,i)}},this.tokenizerUpdateFoldWidgets=function(t){var e=t.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],(function(t,e,n){"use strict";var i=t("../token_iterator").TokenIterator,r=t("../range").Range;e.BracketMatch=function(){this.findMatchingBracket=function(t,e){if(0==t.column)return null;var n=e||this.getLine(t.row).charAt(t.column-1);if(""==n)return null;var i=n.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],t):this.$findOpeningBracket(i[2],t):null},this.getBracketRange=function(t){var e,n=this.getLine(t.row),i=!0,o=n.charAt(t.column-1),s=o&&o.match(/([\(\[\{])|([\)\]\}])/);if(s||(o=n.charAt(t.column),t={row:t.row,column:t.column+1},s=o&&o.match(/([\(\[\{])|([\)\]\}])/),i=!1),!s)return null;if(s[1]){if(!(a=this.$findClosingBracket(s[1],t)))return null;e=r.fromPoints(t,a),i||(e.end.column++,e.start.column--),e.cursor=e.end}else{var a;if(!(a=this.$findOpeningBracket(s[2],t)))return null;e=r.fromPoints(a,t),i||(e.start.column++,e.end.column--),e.cursor=e.start}return e},this.getMatchingBracketRanges=function(t){var e=this.getLine(t.row),n=e.charAt(t.column-1),i=n&&n.match(/([\(\[\{])|([\)\]\}])/);if(i||(n=e.charAt(t.column),t={row:t.row,column:t.column+1},i=n&&n.match(/([\(\[\{])|([\)\]\}])/)),!i)return null;var o=new r(t.row,t.column-1,t.row,t.column),s=i[1]?this.$findClosingBracket(i[1],t):this.$findOpeningBracket(i[2],t);return s?[o,new r(s.row,s.column,s.row,s.column+1)]:[o]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(t,e,n){var r=this.$brackets[t],o=1,s=new i(this,e.row,e.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var l=e.column-s.getCurrentTokenColumn()-2,c=a.value;;){for(;l>=0;){var u=c.charAt(l);if(u==r){if(0==(o-=1))return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else u==t&&(o+=1);l-=1}do{a=s.stepBackward()}while(a&&!n.test(a.type));if(null==a)break;l=(c=a.value).length-1}return null}},this.$findClosingBracket=function(t,e,n){var r=this.$brackets[t],o=1,s=new i(this,e.row,e.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var l=e.column-s.getCurrentTokenColumn();;){for(var c=a.value,u=c.length;l<u;){var h=c.charAt(l);if(h==r){if(0==(o-=1))return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else h==t&&(o+=1);l+=1}do{a=s.stepForward()}while(a&&!n.test(a.type));if(null==a)break;l=0}return null}}}})),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/lang"),o=t("./bidihandler").BidiHandler,s=t("./config"),a=t("./lib/event_emitter").EventEmitter,l=t("./selection").Selection,c=t("./mode/text").Mode,u=t("./range").Range,h=t("./document").Document,f=t("./background_tokenizer").BackgroundTokenizer,p=t("./search_highlight").SearchHighlight,d=function t(e,n){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++t.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new h(e)),this.setDocument(e),this.selection=new l(this),this.$bidiHandler=new o(this),s.resetOptions(this),this.setMode(n),s._signal("session",this)};d.$uid=0,function(){i.implement(this,a),this.setDocument=function(t){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=t,t.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(t){if(!t)return this.$docRowCache=[],void(this.$screenRowCache=[]);var e=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,t)+1;e>n&&(this.$docRowCache.splice(n,e),this.$screenRowCache.splice(n,e))},this.$getRowCacheIndex=function(t,e){for(var n=0,i=t.length-1;n<=i;){var r=n+i>>1,o=t[r];if(e>o)n=r+1;else{if(!(e<o))return r;i=r-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(t){var e=t.data;this.$resetRowCache(e.start.row)},this.onChange=function(t){this.$modified=!0,this.$bidiHandler.onChange(t),this.$resetRowCache(t.start.row);var e=this.$updateInternalDataOnChange(t);!this.$fromUndo&&this.$undoManager&&(e&&e.length&&(this.$undoManager.add({action:"removeFolds",folds:e},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(t,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(t),this._signal("change",t)},this.setValue=function(t){this.doc.setValue(t),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(t){return this.bgTokenizer.getState(t)},this.getTokens=function(t){return this.bgTokenizer.getTokens(t)},this.getTokenAt=function(t,e){var n,i=this.bgTokenizer.getTokens(t),r=0;if(null==e){var o=i.length-1;r=this.getLine(t).length}else for(o=0;o<i.length&&!((r+=i[o].value.length)>=e);o++);return(n=i[o])?(n.index=o,n.start=r-n.value.length,n):null},this.setUndoManager=function(t){if(this.$undoManager=t,this.$informUndoManager&&this.$informUndoManager.cancel(),t){var e=this;t.addSession(this),this.$syncInformUndoManager=function(){e.$informUndoManager.cancel(),e.mergeUndoDeltas=!1},this.$informUndoManager=r.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?r.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(t){this.setOption("useSoftTabs",t)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(t){this.setOption("tabSize",t)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(t){return this.$useSoftTabs&&t.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(t){this.setOption("navigateWithinSoftTabs",t)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(t){this.setOption("overwrite",t)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(t,e){this.$decorations[t]||(this.$decorations[t]=""),this.$decorations[t]+=" "+e,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(t,e){this.$decorations[t]=(this.$decorations[t]||"").replace(" "+e,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(t){this.$breakpoints=[];for(var e=0;e<t.length;e++)this.$breakpoints[t[e]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(t,e){void 0===e&&(e="ace_breakpoint"),e?this.$breakpoints[t]=e:delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(t){delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.addMarker=function(t,e,n,i){var r=this.$markerId++,o={range:t,type:n||"line",renderer:"function"==typeof n?n:null,clazz:e,inFront:!!i,id:r};return i?(this.$frontMarkers[r]=o,this._signal("changeFrontMarker")):(this.$backMarkers[r]=o,this._signal("changeBackMarker")),r},this.addDynamicMarker=function(t,e){if(t.update){var n=this.$markerId++;return t.id=n,t.inFront=!!e,e?(this.$frontMarkers[n]=t,this._signal("changeFrontMarker")):(this.$backMarkers[n]=t,this._signal("changeBackMarker")),t}},this.removeMarker=function(t){var e=this.$frontMarkers[t]||this.$backMarkers[t];e&&(delete(e.inFront?this.$frontMarkers:this.$backMarkers)[t],this._signal(e.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(t){return t?this.$frontMarkers:this.$backMarkers},this.highlight=function(t){if(!this.$searchHighlight){var e=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(e)}this.$searchHighlight.setRegexp(t)},this.highlightLines=function(t,e,n,i){"number"!=typeof e&&(n=e,e=t),n||(n="ace_step");var r=new u(t,0,e,1/0);return r.id=this.addMarker(r,n,"fullLine",i),r},this.setAnnotations=function(t){this.$annotations=t,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r?\n)/m);this.$autoNewLine=e?e[1]:"\n"},this.getWordRange=function(t,e){var n=this.getLine(t),i=!1;if(e>0&&(i=!!n.charAt(e-1).match(this.tokenRe)),i||(i=!!n.charAt(e).match(this.tokenRe)),i)var r=this.tokenRe;else if(/^\s+$/.test(n.slice(e-1,e+1)))r=/\s/;else r=this.nonTokenRe;var o=e;if(o>0){do{o--}while(o>=0&&n.charAt(o).match(r));o++}for(var s=e;s<n.length&&n.charAt(s).match(r);)s++;return new u(t,o,t,s)},this.getAWordRange=function(t,e){for(var n=this.getWordRange(t,e),i=this.getLine(n.end.row);i.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(t){this.doc.setNewLineMode(t)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(t){this.setOption("useWorker",t)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(t){var e=t.data;this.bgTokenizer.start(e.first),this._signal("tokenizerUpdate",t)},this.$modes=s.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(t,e){if(t&&"object"===typeof t){if(t.getTokenizer)return this.$onChangeMode(t);var n=t,i=n.path}else i=t||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c),this.$modes[i]&&!n)return this.$onChangeMode(this.$modes[i]),void(e&&e());this.$modeId=i,s.loadModule(["mode",i],function(t){if(this.$modeId!==i)return e&&e();this.$modes[i]&&!n?this.$onChangeMode(this.$modes[i]):t&&t.Mode&&(t=new t.Mode(n),n||(this.$modes[i]=t,t.$id=i),this.$onChangeMode(t)),e&&e()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(t,e){if(e||(this.$modeId=t.$id),this.$mode!==t){var n=this.$mode;this.$mode=t,this.$stopWorker(),this.$useWorker&&this.$startWorker();var i=t.getTokenizer();if(void 0!==i.on){var r=this.onReloadTokenizer.bind(this);i.on("update",r)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(i);else{this.bgTokenizer=new f(i);var o=this;this.bgTokenizer.on("update",(function(t){o._signal("tokenizerUpdate",t)}))}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=t.tokenRe,this.nonTokenRe=t.nonTokenRe,e||(t.attachToSession&&t.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(t.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:n,mode:t}))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(t){s.warn("Could not load worker",t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(t){this.$scrollTop===t||isNaN(t)||(this.$scrollTop=t,this._signal("changeScrollTop",t))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(t){this.$scrollLeft===t||isNaN(t)||(this.$scrollLeft=t,this._signal("changeScrollLeft",t))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var t=0;return this.lineWidgets.forEach((function(e){e&&e.screenWidth>t&&(t=e.screenWidth)})),this.lineWidgetWidth=t},this.$computeWidth=function(t){if(this.$modified||t){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var e=this.doc.getAllLines(),n=this.$rowLengthCache,i=0,r=0,o=this.$foldData[r],s=o?o.start.row:1/0,a=e.length,l=0;l<a;l++){if(l>s){if((l=o.end.row+1)>=a)break;s=(o=this.$foldData[r++])?o.start.row:1/0}null==n[l]&&(n[l]=this.$getStringScreenWidth(e[l])[0]),n[l]>i&&(i=n[l])}this.screenWidth=i}},this.getLine=function(t){return this.doc.getLine(t)},this.getLines=function(t,e){return this.doc.getLines(t,e)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(t){return this.doc.getTextRange(t||this.selection.getRange())},this.insert=function(t,e){return this.doc.insert(t,e)},this.remove=function(t){return this.doc.remove(t)},this.removeFullLines=function(t,e){return this.doc.removeFullLines(t,e)},this.undoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=t.length-1;-1!=n;n--){var i=t[n];"insert"==i.action||"remove"==i.action?this.doc.revertDelta(i):i.folds&&this.addFolds(i.folds)}!e&&this.$undoSelect&&(t.selectionBefore?this.selection.fromJSON(t.selectionBefore):this.selection.setRange(this.$getUndoSelection(t,!0))),this.$fromUndo=!1}},this.redoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var n=0;n<t.length;n++){var i=t[n];"insert"!=i.action&&"remove"!=i.action||this.doc.$safeApplyDelta(i)}!e&&this.$undoSelect&&(t.selectionAfter?this.selection.fromJSON(t.selectionAfter):this.selection.setRange(this.$getUndoSelection(t,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(t){this.$undoSelect=t},this.$getUndoSelection=function(t,e){function n(t){return e?"insert"!==t.action:"insert"===t.action}for(var i,r,o=0;o<t.length;o++){var s=t[o];s.start&&(i?n(s)?(r=s.start,-1==i.compare(r.row,r.column)&&i.setStart(r),r=s.end,1==i.compare(r.row,r.column)&&i.setEnd(r)):(r=s.start,-1==i.compare(r.row,r.column)&&(i=u.fromPoints(s.start,s.start))):i=n(s)?u.fromPoints(s.start,s.end):u.fromPoints(s.start,s.start))}return i},this.replace=function(t,e){return this.doc.replace(t,e)},this.moveText=function(t,e,n){var i=this.getTextRange(t),r=this.getFoldsInRange(t),o=u.fromPoints(e,e);if(!n){this.remove(t);var s=t.start.row-t.end.row;(c=s?-t.end.column:t.start.column-t.end.column)&&(o.start.row==t.end.row&&o.start.column>t.end.column&&(o.start.column+=c),o.end.row==t.end.row&&o.end.column>t.end.column&&(o.end.column+=c)),s&&o.start.row>=t.end.row&&(o.start.row+=s,o.end.row+=s)}if(o.end=this.insert(o.start,i),r.length){var a=t.start,l=o.start,c=(s=l.row-a.row,l.column-a.column);this.addFolds(r.map((function(t){return(t=t.clone()).start.row==a.row&&(t.start.column+=c),t.end.row==a.row&&(t.end.column+=c),t.start.row+=s,t.end.row+=s,t})))}return o},this.indentRows=function(t,e,n){n=n.replace(/\t/g,this.getTabString());for(var i=t;i<=e;i++)this.doc.insertInLine({row:i,column:0},n)},this.outdentRows=function(t){for(var e=t.collapseRows(),n=new u(0,0,0,0),i=this.getTabSize(),r=e.start.row;r<=e.end.row;++r){var o=this.getLine(r);n.start.row=r,n.end.row=r;for(var s=0;s<i&&" "==o.charAt(s);++s);s<i&&"\t"==o.charAt(s)?(n.start.column=s,n.end.column=s+1):(n.start.column=0,n.end.column=s),this.remove(n)}},this.$moveLines=function(t,e,n){if(t=this.getRowFoldStart(t),e=this.getRowFoldEnd(e),n<0){if((r=this.getRowFoldStart(t+n))<0)return 0;var i=r-t}else if(n>0){var r;if((r=this.getRowFoldEnd(e+n))>this.doc.getLength()-1)return 0;i=r-e}else{t=this.$clipRowToDocument(t);i=(e=this.$clipRowToDocument(e))-t+1}var o=new u(t,0,e,Number.MAX_VALUE),s=this.getFoldsInRange(o).map((function(t){return(t=t.clone()).start.row+=i,t.end.row+=i,t})),a=0==n?this.doc.getLines(t,e):this.doc.removeFullLines(t,e);return this.doc.insertFullLines(t+i,a),s.length&&this.addFolds(s),i},this.moveLinesUp=function(t,e){return this.$moveLines(t,e,-1)},this.moveLinesDown=function(t,e){return this.$moveLines(t,e,1)},this.duplicateLines=function(t,e){return this.$moveLines(t,e,0)},this.$clipRowToDocument=function(t){return Math.max(0,Math.min(t,this.doc.getLength()-1))},this.$clipColumnToRow=function(t,e){return e<0?0:Math.min(this.doc.getLine(t).length,e)},this.$clipPositionToDocument=function(t,e){if(e=Math.max(0,e),t<0)t=0,e=0;else{var n=this.doc.getLength();t>=n?(t=n-1,e=this.doc.getLine(n-1).length):e=Math.min(this.doc.getLine(t).length,e)}return{row:t,column:e}},this.$clipRangeToDocument=function(t){t.start.row<0?(t.start.row=0,t.start.column=0):t.start.column=this.$clipColumnToRow(t.start.row,t.start.column);var e=this.doc.getLength()-1;return t.end.row>e?(t.end.row=e,t.end.column=this.doc.getLine(e).length):t.end.column=this.$clipColumnToRow(t.end.row,t.end.column),t},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(t){if(t!=this.$useWrapMode){if(this.$useWrapMode=t,this.$modified=!0,this.$resetRowCache(0),t){var e=this.getLength();this.$wrapData=Array(e),this.$updateWrapData(0,e-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(t,e){this.$wrapLimitRange.min===t&&this.$wrapLimitRange.max===e||(this.$wrapLimitRange={min:t,max:e},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(t,e){var n=this.$wrapLimitRange;n.max<0&&(n={min:e,max:e});var i=this.$constrainWrapLimit(t,n.min,n.max);return i!=this.$wrapLimit&&i>1&&(this.$wrapLimit=i,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(t,e,n){return e&&(t=Math.max(e,t)),n&&(t=Math.min(n,t)),t},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(t){this.setWrapLimitRange(t,t)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(t){var e=this.$useWrapMode,n=t.action,i=t.start,r=t.end,o=i.row,s=r.row,a=s-o,l=null;if(this.$updating=!0,0!=a)if("remove"===n){this[e?"$wrapData":"$rowLengthCache"].splice(o,a);var c=this.$foldData;l=this.getFoldsInRange(t),this.removeFolds(l);var u=0;if(g=this.getFoldLine(r.row)){g.addRemoveChars(r.row,r.column,i.column-r.column),g.shiftRow(-a);var h=this.getFoldLine(o);h&&h!==g&&(h.merge(g),g=h),u=c.indexOf(g)+1}for(;u<c.length;u++){(g=c[u]).start.row>=r.row&&g.shiftRow(-a)}s=o}else{var f=Array(a);f.unshift(o,0);var p=e?this.$wrapData:this.$rowLengthCache;p.splice.apply(p,f);c=this.$foldData,u=0;if(g=this.getFoldLine(o)){var d=g.range.compareInside(i.row,i.column);0==d?(g=g.split(i.row,i.column))&&(g.shiftRow(a),g.addRemoveChars(s,0,r.column-i.column)):-1==d&&(g.addRemoveChars(o,0,r.column-i.column),g.shiftRow(a)),u=c.indexOf(g)+1}for(;u<c.length;u++){var g;(g=c[u]).start.row>=o&&g.shiftRow(a)}}else a=Math.abs(t.start.column-t.end.column),"remove"===n&&(l=this.getFoldsInRange(t),this.removeFolds(l),a=-a),(g=this.getFoldLine(o))&&g.addRemoveChars(o,i.column,a);return e&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,e?this.$updateWrapData(o,s):this.$updateRowLengthCache(o,s),l},this.$updateRowLengthCache=function(t,e,n){this.$rowLengthCache[t]=null,this.$rowLengthCache[e]=null},this.$updateWrapData=function(n,i){var r,o,s=this.doc.getAllLines(),a=this.getTabSize(),l=this.$wrapData,c=this.$wrapLimit,u=n;for(i=Math.min(i,s.length-1);u<=i;)(o=this.getFoldLine(u,o))?(r=[],o.walk(function(n,i,o,a){var l;if(null!=n){(l=this.$getDisplayTokens(n,r.length))[0]=t;for(var c=1;c<l.length;c++)l[c]=e}else l=this.$getDisplayTokens(s[i].substring(a,o),r.length);r=r.concat(l)}.bind(this),o.end.row,s[o.end.row].length+1),l[o.start.row]=this.$computeWrapSplits(r,c,a),u=o.end.row+1):(r=this.$getDisplayTokens(s[u]),l[u]=this.$computeWrapSplits(r,c,a),u++)};var t=3,e=4;function n(t){return!(t<4352)&&(t>=4352&&t<=4447||t>=4515&&t<=4519||t>=4602&&t<=4607||t>=9001&&t<=9002||t>=11904&&t<=11929||t>=11931&&t<=12019||t>=12032&&t<=12245||t>=12272&&t<=12283||t>=12288&&t<=12350||t>=12353&&t<=12438||t>=12441&&t<=12543||t>=12549&&t<=12589||t>=12593&&t<=12686||t>=12688&&t<=12730||t>=12736&&t<=12771||t>=12784&&t<=12830||t>=12832&&t<=12871||t>=12880&&t<=13054||t>=13056&&t<=19903||t>=19968&&t<=42124||t>=42128&&t<=42182||t>=43360&&t<=43388||t>=44032&&t<=55203||t>=55216&&t<=55238||t>=55243&&t<=55291||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65106||t>=65108&&t<=65126||t>=65128&&t<=65131||t>=65281&&t<=65376||t>=65504&&t<=65510)}this.$computeWrapSplits=function(n,i,r){if(0==n.length)return[];var o=[],s=n.length,a=0,l=0,c=this.$wrapAsCode,u=this.$indentedSoftWrap,h=i<=Math.max(2*r,8)||!1===u?0:Math.floor(i/2);function f(t){for(var e=t-a,i=a;i<t;i++){var s=n[i];12!==s&&2!==s||(e-=1)}o.length||(p=function(){var t=0;if(0===h)return t;if(u)for(var e=0;e<n.length;e++){var i=n[e];if(10==i)t+=1;else{if(11!=i){if(12==i)continue;break}t+=r}}return c&&!1!==u&&(t+=r),Math.min(t,h)}(),o.indent=p),l+=e,o.push(l),a=t}for(var p=0;s-a>i-p;){var d=a+i-p;if(n[d-1]>=10&&n[d]>=10)f(d);else if(n[d]!=t&&n[d]!=e){for(var g=Math.max(d-(i-(i>>2)),a-1);d>g&&n[d]<t;)d--;if(c){for(;d>g&&n[d]<t;)d--;for(;d>g&&9==n[d];)d--}else for(;d>g&&n[d]<10;)d--;d>g?f(++d):(2==n[d=a+i]&&d--,f(d-p))}else{for(;d!=a-1&&n[d]!=t;d--);if(d>a){f(d);continue}for(d=a+i;d<n.length&&n[d]==e;d++);if(d==n.length)break;f(d)}}return o},this.$getDisplayTokens=function(t,e){var i,r=[];e=e||0;for(var o=0;o<t.length;o++){var s=t.charCodeAt(o);if(9==s){i=this.getScreenTabSize(r.length+e),r.push(11);for(var a=1;a<i;a++)r.push(12)}else 32==s?r.push(10):s>39&&s<48||s>57&&s<64?r.push(9):s>=4352&&n(s)?r.push(1,2):r.push(1)}return r},this.$getStringScreenWidth=function(t,e,i){if(0==e)return[0,0];var r,o;for(null==e&&(e=1/0),i=i||0,o=0;o<t.length&&(9==(r=t.charCodeAt(o))?i+=this.getScreenTabSize(i):r>=4352&&n(r)?i+=2:i+=1,!(i>e));o++);return[i,o]},this.lineWidgets=null,this.getRowLength=function(t){var e=1;return this.lineWidgets&&(e+=this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0),this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+e:e},this.getRowLineCount=function(t){return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1:1},this.getRowWrapIndent=function(t){if(this.$useWrapMode){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE),n=this.$wrapData[e.row];return n.length&&n[0]<e.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(t){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(t,e){var n=this.documentToScreenRow(t,e);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(t,e){var n=this.documentToScreenRow(t,e);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(t){return this.$useWrapMode?this.$wrapData[t]:void 0},this.getScreenTabSize=function(t){return this.$tabSize-(t%this.$tabSize|0)},this.screenToDocumentRow=function(t,e){return this.screenToDocumentPosition(t,e).row},this.screenToDocumentColumn=function(t,e){return this.screenToDocumentPosition(t,e).column},this.screenToDocumentPosition=function(t,e,n){if(t<0)return{row:0,column:0};var i,r,o=0,s=0,a=0,l=0,c=this.$screenRowCache,u=this.$getRowCacheIndex(c,t),h=c.length;if(h&&u>=0){a=c[u],o=this.$docRowCache[u];var f=t>c[h-1]}else f=!h;for(var p=this.getLength()-1,d=this.getNextFoldLine(o),g=d?d.start.row:1/0;a<=t&&!(a+(l=this.getRowLength(o))>t||o>=p);)a+=l,++o>g&&(o=d.end.row+1,g=(d=this.getNextFoldLine(o,d))?d.start.row:1/0),f&&(this.$docRowCache.push(o),this.$screenRowCache.push(a));if(d&&d.start.row<=o)i=this.getFoldDisplayLine(d),o=d.start.row;else{if(a+l<=t||o>p)return{row:p,column:this.getLine(p).length};i=this.getLine(o),d=null}var m=0,v=Math.floor(t-a);if(this.$useWrapMode){var y=this.$wrapData[o];y&&(r=y[v],v>0&&y.length&&(m=y.indent,s=y[v-1]||y[y.length-1],i=i.substring(s)))}return void 0!==n&&this.$bidiHandler.isBidiRow(a+v,o,v)&&(e=this.$bidiHandler.offsetToCol(n)),s+=this.$getStringScreenWidth(i,e-m)[1],this.$useWrapMode&&s>=r&&(s=r-1),d?d.idxToPosition(s):{row:o,column:s}},this.documentToScreenPosition=function(t,e){if("undefined"===typeof e)var n=this.$clipPositionToDocument(t.row,t.column);else n=this.$clipPositionToDocument(t,e);t=n.row,e=n.column;var i,r=0,o=null;(i=this.getFoldAt(t,e,1))&&(t=i.start.row,e=i.start.column);var s,a=0,l=this.$docRowCache,c=this.$getRowCacheIndex(l,t),u=l.length;if(u&&c>=0){a=l[c],r=this.$screenRowCache[c];var h=t>l[u-1]}else h=!u;for(var f=this.getNextFoldLine(a),p=f?f.start.row:1/0;a<t;){if(a>=p){if((s=f.end.row+1)>t)break;p=(f=this.getNextFoldLine(s,f))?f.start.row:1/0}else s=a+1;r+=this.getRowLength(a),a=s,h&&(this.$docRowCache.push(a),this.$screenRowCache.push(r))}var d="";f&&a>=p?(d=this.getFoldDisplayLine(f,t,e),o=f.start.row):(d=this.getLine(t).substring(0,e),o=t);var g=0;if(this.$useWrapMode){var m=this.$wrapData[o];if(m){for(var v=0;d.length>=m[v];)r++,v++;d=d.substring(m[v-1]||0,d.length),g=v>0?m.indent:0}}return this.lineWidgets&&this.lineWidgets[a]&&this.lineWidgets[a].rowsAbove&&(r+=this.lineWidgets[a].rowsAbove),{row:r,column:g+this.$getStringScreenWidth(d)[0]}},this.documentToScreenColumn=function(t,e){return this.documentToScreenPosition(t,e).column},this.documentToScreenRow=function(t,e){return this.documentToScreenPosition(t,e).row},this.getScreenLength=function(){var t=0,e=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,i=0,r=(a=0,(e=this.$foldData[a++])?e.start.row:1/0);i<n;){var o=this.$wrapData[i];t+=o?o.length+1:1,++i>r&&(i=e.end.row+1,r=(e=this.$foldData[a++])?e.start.row:1/0)}else{t=this.getLength();for(var s=this.$foldData,a=0;a<s.length;a++)t-=(e=s[a]).end.row-e.start.row}return this.lineWidgets&&(t+=this.$getWidgetScreenLength()),t},this.$setFontMetrics=function(t){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,n,i){if(0===n)return[0,0];var r,o;for(n||(n=1/0),i=i||0,o=0;o<e.length&&!((i+="\t"===(r=e.charAt(o))?this.getScreenTabSize(i):t.getCharacterWidth(r))>n);o++);return[i,o]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker(),this.removeAllListeners(),this.selection.detach()},this.isFullWidth=n}.call(d.prototype),t("./edit_session/folding").Folding.call(d.prototype),t("./edit_session/bracket_match").BracketMatch.call(d.prototype),s.defineOptions(d.prototype,"session",{wrap:{set:function(t){if(t&&"off"!=t?"free"==t?t=!0:"printMargin"==t?t=-1:"string"==typeof t&&(t=parseInt(t,10)||!1):t=!1,this.$wrap!=t)if(this.$wrap=t,t){var e="number"==typeof t?t:null;this.setWrapLimitRange(e,e),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(t){(t="auto"==t?"text"!=this.$mode.type:"text"!=t)!=this.$wrapAsCode&&(this.$wrapAsCode=t,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(t){this.$useWorker=t,this.$stopWorker(),t&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(t){(t=parseInt(t))>0&&this.$tabSize!==t&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=t,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(t){this.setFoldStyle(t)},handlesSet:!0},overwrite:{set:function(t){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(t){this.doc.setNewLineMode(t)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(t){this.setMode(t)},get:function(){return this.$modeId},handlesSet:!0}}),e.EditSession=d})),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(t,e,n){"use strict";var i=t("./lib/lang"),r=t("./lib/oop"),o=t("./range").Range,s=function(){this.$options={}};(function(){this.set=function(t){return r.mixin(this.$options,t),this},this.getOptions=function(){return i.copyObject(this.$options)},this.setOptions=function(t){this.$options=t},this.find=function(t){var e=this.$options,n=this.$matchIterator(t,e);if(!n)return!1;var i=null;return n.forEach((function(t,n,r,s){return i=new o(t,n,r,s),!(n==s&&e.start&&e.start.start&&0!=e.skipCurrent&&i.isEqual(e.start))||(i=null,!1)})),i},this.findAll=function(t){var e=this.$options;if(!e.needle)return[];this.$assembleRegExp(e);var n=e.range,r=n?t.getLines(n.start.row,n.end.row):t.doc.getAllLines(),s=[],a=e.re;if(e.$isMultiLine){var l,c=a.length,u=r.length-c;t:for(var h=a.offset||0;h<=u;h++){for(var f=0;f<c;f++)if(-1==r[h+f].search(a[f]))continue t;var p=r[h],d=r[h+c-1],g=p.length-p.match(a[0])[0].length,m=d.match(a[c-1])[0].length;l&&l.end.row===h&&l.end.column>g||(s.push(l=new o(h,g,h+c-1,m)),c>2&&(h=h+c-2))}}else for(var v=0;v<r.length;v++){var y=i.getMatchOffsets(r[v],a);for(f=0;f<y.length;f++){var b=y[f];s.push(new o(v,b.offset,v,b.offset+b.length))}}if(n){var _=n.start.column,w=n.start.column;for(v=0,f=s.length-1;v<f&&s[v].start.column<_&&s[v].start.row==n.start.row;)v++;for(;v<f&&s[f].end.column>w&&s[f].end.row==n.end.row;)f--;for(s=s.slice(v,f+1),v=0,f=s.length;v<f;v++)s[v].start.row+=n.start.row,s[v].end.row+=n.start.row}return s},this.replace=function(t,e){var n=this.$options,i=this.$assembleRegExp(n);if(n.$isMultiLine)return e;if(i){var r=i.exec(t);if(!r||r[0].length!=t.length)return null;if(e=t.replace(i,e),n.preserveCase){e=e.split("");for(var o=Math.min(t.length,t.length);o--;){var s=t[o];s&&s.toLowerCase()!=s?e[o]=e[o].toUpperCase():e[o]=e[o].toLowerCase()}e=e.join("")}return e}},this.$assembleRegExp=function(t,e){if(t.needle instanceof RegExp)return t.re=t.needle;var n=t.needle;if(!t.needle)return t.re=!1;t.regExp||(n=i.escapeRegExp(n)),t.wholeWord&&(n=function(t,e){function n(t){return/\w/.test(t)||e.regExp?"\\b":""}return n(t[0])+t+n(t[t.length-1])}(n,t));var r=t.caseSensitive?"gm":"gmi";if(t.$isMultiLine=!e&&/[\n\r]/.test(n),t.$isMultiLine)return t.re=this.$assembleMultilineRegExp(n,r);try{var o=new RegExp(n,r)}catch(s){o=!1}return t.re=o},this.$assembleMultilineRegExp=function(t,e){for(var n=t.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),i=[],r=0;r<n.length;r++)try{i.push(new RegExp(n[r],e))}catch(o){return!1}return i},this.$matchIterator=function(t,e){var n=this.$assembleRegExp(e);if(!n)return!1;var i=1==e.backwards,r=0!=e.skipCurrent,o=e.range,s=e.start;s||(s=o?o[i?"end":"start"]:t.selection.getRange()),s.start&&(s=s[r!=i?"end":"start"]);var a=o?o.start.row:0,l=o?o.end.row:t.getLength()-1;if(i)var c=function(t){var n=s.row;if(!h(n,s.column,t)){for(n--;n>=a;n--)if(h(n,Number.MAX_VALUE,t))return;if(0!=e.wrap)for(n=l,a=s.row;n>=a;n--)if(h(n,Number.MAX_VALUE,t))return}};else c=function(t){var n=s.row;if(!h(n,s.column,t)){for(n+=1;n<=l;n++)if(h(n,0,t))return;if(0!=e.wrap)for(n=a,l=s.row;n<=l;n++)if(h(n,0,t))return}};if(e.$isMultiLine)var u=n.length,h=function(e,r,o){var s=i?e-u+1:e;if(!(s<0)){var a=t.getLine(s),l=a.search(n[0]);if(!(!i&&l<r||-1===l)){for(var c=1;c<u;c++)if(-1==(a=t.getLine(s+c)).search(n[c]))return;var h=a.match(n[u-1])[0].length;if(!(i&&h>r))return!!o(s,l,s+u-1,h)||void 0}}};else if(i)h=function(e,i,r){var o,s=t.getLine(e),a=[],l=0;for(n.lastIndex=0;o=n.exec(s);){var c=o[0].length;if(l=o.index,!c){if(l>=s.length)break;n.lastIndex=l+=1}if(o.index+c>i)break;a.push(o.index,c)}for(var u=a.length-1;u>=0;u-=2){var h=a[u-1];if(r(e,h,e,h+(c=a[u])))return!0}};else h=function(e,i,r){var o,s,a=t.getLine(e);for(n.lastIndex=i;s=n.exec(a);){var l=s[0].length;if(r(e,o=s.index,e,o+l))return!0;if(!l&&(n.lastIndex=o+=1,o>=a.length))return!1}};return{forEach:c}}}).call(s.prototype),e.Search=s})),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("../lib/keys"),r=t("../lib/useragent"),o=i.KEY_MODS;function s(t,e){this.platform=e||(r.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(t),this.$singleCommand=!0}function a(t,e){s.call(this,t,e),this.$singleCommand=!1}a.prototype=s.prototype,function(){function t(t){return"object"==typeof t&&t.bindKey&&t.bindKey.position||(t.isDefault?-100:0)}this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},this.removeCommand=function(t,e){var n=t&&("string"===typeof t?t:t.name);t=this.commands[n],e||delete this.commands[n];var i=this.commandKeyBinding;for(var r in i){var o=i[r];if(o==t)delete i[r];else if(Array.isArray(o)){var s=o.indexOf(t);-1!=s&&(o.splice(s,1),1==o.length&&(i[r]=o[0]))}}},this.bindKey=function(t,e,n){if("object"==typeof t&&t&&(void 0==n&&(n=t.position),t=t[this.platform]),t)return"function"==typeof e?this.addCommand({exec:e,bindKey:t,name:e.name||t}):void t.split("|").forEach((function(t){var i="";if(-1!=t.indexOf(" ")){var r=t.split(/\s+/);t=r.pop(),r.forEach((function(t){var e=this.parseKeys(t),n=o[e.hashId]+e.key;i+=(i?" ":"")+n,this._addCommandToBinding(i,"chainKeys")}),this),i+=" "}var s=this.parseKeys(t),a=o[s.hashId]+s.key;this._addCommandToBinding(i+a,e,n)}),this)},this._addCommandToBinding=function(e,n,i){var r,o=this.commandKeyBinding;if(n)if(!o[e]||this.$singleCommand)o[e]=n;else{Array.isArray(o[e])?-1!=(r=o[e].indexOf(n))&&o[e].splice(r,1):o[e]=[o[e]],"number"!=typeof i&&(i=t(n));var s=o[e];for(r=0;r<s.length;r++){if(t(s[r])>i)break}s.splice(r,0,n)}else delete o[e]},this.addCommands=function(t){t&&Object.keys(t).forEach((function(e){var n=t[e];if(n){if("string"===typeof n)return this.bindKey(n,e);"function"===typeof n&&(n={exec:n}),"object"===typeof n&&(n.name||(n.name=e),this.addCommand(n))}}),this)},this.removeCommands=function(t){Object.keys(t).forEach((function(e){this.removeCommand(t[e])}),this)},this.bindKeys=function(t){Object.keys(t).forEach((function(e){this.bindKey(e,t[e])}),this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(t){var e=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(t){return t})),n=e.pop(),r=i[n];if(i.FUNCTION_KEYS[r])n=i.FUNCTION_KEYS[r].toLowerCase();else{if(!e.length)return{key:n,hashId:-1};if(1==e.length&&"shift"==e[0])return{key:n.toUpperCase(),hashId:-1}}for(var o=0,s=e.length;s--;){var a=i.KEY_MODS[e[s]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+e[s]+" in "+t),!1;o|=a}return{key:n,hashId:o}},this.findKeyCommand=function(t,e){var n=o[t]+e;return this.commandKeyBinding[n]},this.handleKeyboard=function(t,e,n,i){if(!(i<0)){var r=o[e]+n,s=this.commandKeyBinding[r];return t.$keyChain&&(t.$keyChain+=" "+r,s=this.commandKeyBinding[t.$keyChain]||s),!s||"chainKeys"!=s&&"chainKeys"!=s[s.length-1]?(t.$keyChain&&(e&&4!=e||1!=n.length?(-1==e||i>0)&&(t.$keyChain=""):t.$keyChain=t.$keyChain.slice(0,-r.length-1)),{command:s}):(t.$keyChain=t.$keyChain||r,{command:"null"})}},this.getStatusText=function(t,e){return e.$keyChain||""}}.call(s.prototype),e.HashHandler=s,e.MultiHashHandler=a})),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],(function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("../keyboard/hash_handler").MultiHashHandler,o=t("../lib/event_emitter").EventEmitter,s=function(t,e){r.call(this,e,t),this.byName=this.commands,this.setDefaultHandler("exec",(function(t){return t.command.exec(t.editor,t.args||{})}))};i.inherits(s,r),function(){i.implement(this,o),this.exec=function(t,e,n){if(Array.isArray(t)){for(var i=t.length;i--;)if(this.exec(t[i],e,n))return!0;return!1}if("string"===typeof t&&(t=this.commands[t]),!t)return!1;if(e&&e.$readOnly&&!t.readOnly)return!1;if(0!=this.$checkCommandState&&t.isAvailable&&!t.isAvailable(e))return!1;var r={editor:e,command:t,args:n};return r.returnValue=this._emit("exec",r),this._signal("afterExec",r),!1!==r.returnValue},this.toggleRecording=function(t){if(!this.$inReplay)return t&&t._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(t){this.macro.push([t.command,t.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(t){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(t);try{this.$inReplay=!0,this.macro.forEach((function(e){"string"==typeof e?this.exec(e,t):this.exec(e[0],t,e[1])}),this)}finally{this.$inReplay=!1}}},this.trimMacro=function(t){return t.map((function(t){return"string"!=typeof t[0]&&(t[0]=t[0].name),t[1]||(t=t[0]),t}))}}.call(s.prototype),e.CommandManager=s})),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],(function(t,e,n){"use strict";var i=t("../lib/lang"),r=t("../config"),o=t("../range").Range;function s(t,e){return{win:t,mac:e}}e.commands=[{name:"showSettingsMenu",bindKey:s("Ctrl-,","Command-,"),exec:function(t){r.loadModule("ace/ext/settings_menu",(function(e){e.init(t),t.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",bindKey:s("Alt-E","F4"),exec:function(t){r.loadModule("./ext/error_marker",(function(e){e.showErrorMarker(t,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:s("Alt-Shift-E","Shift-F4"),exec:function(t){r.loadModule("./ext/error_marker",(function(e){e.showErrorMarker(t,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:s("Ctrl-A","Command-A"),exec:function(t){t.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:s(null,"Ctrl-L"),exec:function(t){t.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:s("Ctrl-L","Command-L"),exec:function(t,e){"number"!==typeof e||isNaN(e)||t.gotoLine(e),t.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(t){t.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(t){t.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:s("F2","F2"),exec:function(t){t.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:s("Alt-F2","Alt-F2"),exec:function(t){t.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:s("Alt-0","Command-Option-0"),exec:function(t){t.session.foldAll(),t.session.unfold(t.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(t){t.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:s("Ctrl-K","Command-G"),exec:function(t){t.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(t){t.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:s("Alt-K","Ctrl-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:s("Alt-Shift-K","Ctrl-Shift-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:s("Ctrl-F","Command-F"),exec:function(t){r.loadModule("ace/ext/searchbox",(function(e){e.Search(t)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(t){t.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:s("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(t){t.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(t){t.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:s("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(t){t.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:s("Up","Up|Ctrl-P"),exec:function(t,e){t.navigateUp(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:s("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(t){t.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(t){t.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:s("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(t){t.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:s("Down","Down|Ctrl-N"),exec:function(t,e){t.navigateDown(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(t){t.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:s("Ctrl-Left","Option-Left"),exec:function(t){t.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:s("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(t){t.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:s("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(t){t.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:s("Left","Left|Ctrl-B"),exec:function(t,e){t.navigateLeft(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(t){t.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:s("Ctrl-Right","Option-Right"),exec:function(t){t.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:s("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(t){t.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:s("Shift-Right","Shift-Right"),exec:function(t){t.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:s("Right","Right|Ctrl-F"),exec:function(t,e){t.navigateRight(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(t){t.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:s(null,"Option-PageDown"),exec:function(t){t.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(t){t.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(t){t.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:s(null,"Option-PageUp"),exec:function(t){t.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(t){t.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:s("Ctrl-Up",null),exec:function(t){t.renderer.scrollBy(0,-2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:s("Ctrl-Down",null),exec:function(t){t.renderer.scrollBy(0,2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(t){t.commands.toggleRecording(t)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(t){t.commands.replay(t)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:s("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(t){t.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:s("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(t){t.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:s("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(t){t.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:s(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(t){},readOnly:!0},{name:"cut",description:"Cut",exec:function(t){var e=t.$copyWithEmptySelection&&t.selection.isEmpty()?t.selection.getLineRange():t.selection.getRange();t._emit("cut",e),e.isEmpty()||t.session.remove(e),t.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(t,e){t.$handlePaste(e)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:s("Ctrl-D","Command-D"),exec:function(t){t.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(t){t.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(t){t.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:s("Ctrl-/","Command-/"),exec:function(t){t.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(t){t.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(t){t.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(t){t.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(t){r.loadModule("ace/ext/searchbox",(function(e){e.Search(t,!0)}))}},{name:"undo",description:"Undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(t){t.undo()}},{name:"redo",description:"Redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(t){t.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(t){t.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:s("Alt-Up","Option-Up"),exec:function(t){t.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(t){t.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:s("Alt-Down","Option-Down"),exec:function(t){t.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:s("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(t){t.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(t){t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:s("Shift-Delete",null),exec:function(t){if(!t.selection.isEmpty())return!1;t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(t){t.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:s("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(t){t.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:s("Ctrl-Shift-Backspace",null),exec:function(t){var e=t.selection.getRange();e.start.column=0,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:s("Ctrl-Shift-Delete",null),exec:function(t){var e=t.selection.getRange();e.end.column=Number.MAX_VALUE,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(t){t.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(t){t.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(t){t.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:s("Tab","Tab"),exec:function(t){t.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(t){t.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(t){t.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(t,e){t.insert(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(t,e){t.insert(i.stringRepeat(e.text||"",e.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:s(null,"Ctrl-O"),exec:function(t){t.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:s("Alt-Shift-X","Ctrl-T"),exec:function(t){t.transposeLetters()},multiSelectAction:function(t){t.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(t){t.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(t){t.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:s(null,null),exec:function(t){t.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:s("Ctrl-Shift-L","Command-Shift-L"),exec:function(t){var e=t.selection.getRange();e.start.column=e.end.column=0,e.end.row++,t.selection.setRange(e,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:s(null,null),exec:function(t){for(var e=t.selection.isBackwards(),n=e?t.selection.getSelectionLead():t.selection.getSelectionAnchor(),r=e?t.selection.getSelectionAnchor():t.selection.getSelectionLead(),s=t.session.doc.getLine(n.row).length,a=t.session.doc.getTextRange(t.selection.getRange()).replace(/\n\s*/," ").length,l=t.session.doc.getLine(n.row),c=n.row+1;c<=r.row+1;c++){var u=i.stringTrimLeft(i.stringTrimRight(t.session.doc.getLine(c)));0!==u.length&&(u=" "+u),l+=u}r.row+1<t.session.doc.getLength()-1&&(l+=t.session.doc.getNewLineCharacter()),t.clearSelection(),t.session.doc.replace(new o(n.row,0,r.row+2,0),l),a>0?(t.selection.moveCursorTo(n.row,n.column),t.selection.selectTo(n.row,n.column+a)):(s=t.session.doc.getLine(n.row).length>s?s+1:s,t.selection.moveCursorTo(n.row,s))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:s(null,null),exec:function(t){var e=t.session.doc.getLength()-1,n=t.session.doc.getLine(e).length,i=t.selection.rangeList.ranges,r=[];i.length<1&&(i=[t.selection.getRange()]);for(var s=0;s<i.length;s++)s==i.length-1&&(i[s].end.row===e&&i[s].end.column===n||r.push(new o(i[s].end.row,i[s].end.column,e,n))),0===s?0===i[s].start.row&&0===i[s].start.column||r.push(new o(0,0,i[s].start.row,i[s].start.column)):r.push(new o(i[s-1].end.row,i[s-1].end.column,i[s].start.row,i[s].start.column));t.exitMultiSelectMode(),t.clearSelection();for(s=0;s<r.length;s++)t.selection.addRange(r[s],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",exec:function(t){t.selection.clearSelection(),t.navigateLineEnd(),t.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",exec:function(t){t.selection.clearSelection();var e=t.getCursorPosition();t.selection.moveTo(e.row-1,Number.MAX_VALUE),t.insert("\n"),0===e.row&&t.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:s("F1","F1"),exec:function(t){t.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:s(null,null),exec:function(t){t.prompt({$type:"modes"})},readOnly:!0}];for(var a=1;a<9;a++)e.commands.push({name:"foldToLevel"+a,description:"Fold To Level "+a,level:a,exec:function(t){t.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})})),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],(function(t,e,n){"use strict";t("./lib/fixoldbrowsers");var i=t("./lib/oop"),r=t("./lib/dom"),o=t("./lib/lang"),s=t("./lib/useragent"),a=t("./keyboard/textinput").TextInput,l=t("./mouse/mouse_handler").MouseHandler,c=t("./mouse/fold_handler").FoldHandler,u=t("./keyboard/keybinding").KeyBinding,h=t("./edit_session").EditSession,f=t("./search").Search,p=t("./range").Range,d=t("./lib/event_emitter").EventEmitter,g=t("./commands/command_manager").CommandManager,m=t("./commands/default_commands").commands,v=t("./config"),y=t("./token_iterator").TokenIterator,b=t("./clipboard"),_=function t(e,n,i){this.$toDestroy=[];var r=e.getContainerElement();this.container=r,this.renderer=e,this.id="editor"+ ++t.$uid,this.commands=new g(s.isMac?"mac":"win",m),"object"==typeof document&&(this.textInput=new a(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new l(this),new c(this)),this.keyBinding=new u(this),this.$search=(new f).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",(function(t,e){e._$emitInputEvent.schedule(31)})),this.setSession(n||i&&i.session||new h("")),v.resetOptions(this),i&&this.setOptions(i),v._signal("editor",this)};_.$uid=0,function(){i.implement(this,d),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=o.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(t){if(this.curOp){if(!t||this.curOp.command)return;this.prevOp=this.curOp}t||(this.previousCommand=null,t={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:t.command||{},args:t.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(t){if(this.curOp&&this.session){if(t&&!1===t.returnValue||!this.session)return this.curOp=null;if(1==t&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var e=this.curOp.command,n=e&&e.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),r=this.renderer.layerConfig;(i.start.row>=r.lastRow||i.end.row<=r.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}var o=this.selection.toJSON();this.curOp.selectionAfter=o,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(o),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(t){if(this.$mergeUndoDeltas){var e=this.prevOp,n=this.$mergeableCommands,i=e.command&&t.command.name==e.command.name;if("insertstring"==t.command.name){var r=t.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),i=i&&this.mergeNextCommand&&(!/\s/.test(r)||/\s/.test(e.args)),this.mergeNextCommand=!0}else i=i&&-1!==n.indexOf(t.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(i=!1),i?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(t.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(t,e){if(t&&"string"===typeof t&&"ace"!=t){this.$keybindingId=t;var n=this;v.loadModule(["keybinding",t],(function(i){n.$keybindingId==t&&n.keyBinding.setKeyboardHandler(i&&i.handler),e&&e()}))}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(t),e&&e()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(t){if(this.session!=t){this.curOp&&this.endOperation(),this.curOp={};var e=this.session;if(e){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=t,t?(this.$onDocumentChange=this.onDocumentChange.bind(this),t.on("change",this.$onDocumentChange),this.renderer.setSession(t),this.$onChangeMode=this.onChangeMode.bind(this),t.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),t.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),t.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),t.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),t.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),t.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=t.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(t)),this._signal("changeSession",{session:t,oldSession:e}),this.curOp=null,e&&e._signal("changeEditor",{oldEditor:this}),t&&t._signal("changeEditor",{editor:this}),t&&t.bgTokenizer&&t.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(t,e){return this.session.doc.setValue(t),e?1==e?this.navigateFileEnd():-1==e&&this.navigateFileStart():this.selectAll(),t},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(t){this.renderer.onResize(t)},this.setTheme=function(t,e){this.renderer.setTheme(t,e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(t){this.renderer.setStyle(t)},this.unsetStyle=function(t){this.renderer.unsetStyle(t)},this.getFontSize=function(){return this.getOption("fontSize")||r.computedStyle(this.container).fontSize},this.setFontSize=function(t){this.setOption("fontSize",t)},this.$highlightBrackets=function(){if(!this.$highlightPending){var t=this;this.$highlightPending=!0,setTimeout((function(){t.$highlightPending=!1;var e=t.session;if(e&&e.bgTokenizer){e.$bracketHighlight&&(e.$bracketHighlight.markerIds.forEach((function(t){e.removeMarker(t)})),e.$bracketHighlight=null);var n=e.getMatchingBracketRanges(t.getCursorPosition());if(!n&&e.$mode.getMatching&&(n=e.$mode.getMatching(t.session)),n){var i="ace_bracket";Array.isArray(n)?1==n.length&&(i="ace_error_bracket"):n=[n],2==n.length&&(0==p.comparePoints(n[0].end,n[1].start)?n=[p.fromPoints(n[0].start,n[1].end)]:0==p.comparePoints(n[0].start,n[1].end)&&(n=[p.fromPoints(n[1].start,n[0].end)])),e.$bracketHighlight={ranges:n,markerIds:n.map((function(t){return e.addMarker(t,i,"text")}))}}}}),50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var t=this;this.$highlightTagPending=!0,setTimeout((function(){t.$highlightTagPending=!1;var e=t.session;if(e&&e.bgTokenizer){var n=t.getCursorPosition(),i=new y(t.session,n.row,n.column),r=i.getCurrentToken();if(!r||!/\b(?:tag-open|tag-name)/.test(r.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);if(-1===r.type.indexOf("tag-open")||(r=i.stepForward())){var o=r.value,s=r.value,a=0,l=i.stepBackward();if("<"===l.value)do{l=r,(r=i.stepForward())&&(-1!==r.type.indexOf("tag-name")?o===(s=r.value)&&("<"===l.value?a++:"</"===l.value&&a--):o===s&&"/>"===r.value&&a--)}while(r&&a>=0);else{do{if(r=l,l=i.stepBackward(),r)if(-1!==r.type.indexOf("tag-name"))o===r.value&&("<"===l.value?a++:"</"===l.value&&a--);else if("/>"===r.value){for(var c=0,u=l;u;){if(-1!==u.type.indexOf("tag-name")&&u.value===o){a--;break}if("<"===u.value)break;u=i.stepBackward(),c++}for(var h=0;h<c;h++)i.stepForward()}}while(l&&a<=0);i.stepForward()}if(!r)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var f=i.getCurrentTokenRow(),d=i.getCurrentTokenColumn(),g=new p(f,d,f,d+r.value.length),m=e.$backMarkers[e.$tagHighlight];e.$tagHighlight&&void 0!=m&&0!==g.compareRange(m.range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),e.$tagHighlight||(e.$tagHighlight=e.addMarker(g,"ace_bracket","text"))}}}),50)}},this.focus=function(){var t=this;setTimeout((function(){t.isFocused()||t.textInput.focus()})),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(t){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",t))},this.onBlur=function(t){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",t))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(t){var e=this.session.$useWrapMode,n=t.start.row==t.end.row?t.end.row:1/0;this.renderer.updateLines(t.start.row,n,e),this._signal("change",t),this.$cursorChange()},this.onTokenizerUpdate=function(t){var e=t.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var t,e=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(t=!1),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(t=!1)),e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,1/0);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(t){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),i=this.getSelectionStyle();e.$selectionMarker=e.addMarker(n,"ace_selection",i)}var r=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(r),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var t=this.session,e=this.getSelectionRange();if(!e.isEmpty()&&!e.isMultiLine()){var n=e.start.column,i=e.end.column,r=t.getLine(e.start.row),o=r.substring(n,i);if(!(o.length>5e3)&&/[\w\d]/.test(o)){var s=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o}),a=r.substring(n-1,i+1);if(s.test(a))return s}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(t){this.renderer.updateText(),this._emit("changeMode",t)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var t=this.getSelectedText(),e=this.session.doc.getNewLineCharacter(),n=!1;if(!t&&this.$copyWithEmptySelection){n=!0;for(var i=this.selection.getAllRanges(),r=0;r<i.length;r++){var o=i[r];r&&i[r-1].start.row==o.start.row||(t+=this.session.getLine(o.start.row)+e)}}var s={text:t};return this._signal("copy",s),b.lineMode=n?s.text:"",s.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(t,e){var n={text:t,event:e};this.commands.exec("paste",this,n)},this.$handlePaste=function(t){"string"==typeof t&&(t={text:t}),this._signal("paste",t);var e=t.text,n=e==b.lineMode,i=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?i.insert({row:this.selection.lead.row,column:0},e):this.insert(e);else if(n)this.selection.rangeList.ranges.forEach((function(t){i.insert({row:t.start.row,column:0},e)}));else{var r=e.split(/\r\n|\r|\n/),o=this.selection.rangeList.ranges,s=2==r.length&&(!r[0]||!r[1]);if(r.length!=o.length||s)return this.commands.exec("insertstring",this,e);for(var a=o.length;a--;){var l=o[a];l.isEmpty()||i.remove(l),i.insert(l.start,r[a])}}},this.execCommand=function(t,e){return this.commands.exec(t,this,e)},this.insert=function(t,e){var n=this.session,i=n.getMode(),r=this.getCursorPosition();if(this.getBehavioursEnabled()&&!e){var o=i.transformAction(n.getState(r.row),"insertion",this,n,t);o&&(t!==o.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),t=o.text)}if("\t"==t&&(t=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==t.indexOf("\n")){(s=new p.fromPoints(r,r)).end.column+=t.length,this.session.remove(s)}}else{var s=this.getSelectionRange();r=this.session.remove(s),this.clearSelection()}if("\n"==t||"\r\n"==t){var a=n.getLine(r.row);if(r.column>a.search(/\S|$/)){var l=a.substr(r.column).search(/\S|$/);n.doc.removeInLine(r.row,r.column,r.column+l)}}this.clearSelection();var c=r.column,u=n.getState(r.row),h=(a=n.getLine(r.row),i.checkOutdent(u,a,t));if(n.insert(r,t),o&&o.selection&&(2==o.selection.length?this.selection.setSelectionRange(new p(r.row,c+o.selection[0],r.row,c+o.selection[1])):this.selection.setSelectionRange(new p(r.row+o.selection[0],o.selection[1],r.row+o.selection[2],o.selection[3]))),this.$enableAutoIndent){if(n.getDocument().isNewLine(t)){var f=i.getNextLineIndent(u,a.slice(0,r.column),n.getTabString());n.insert({row:r.row+1,column:0},f)}h&&i.autoOutdent(u,n,r.row)}},this.autoIndent=function(){var t,e,n=this.session,i=n.getMode();if(this.selection.isEmpty())t=0,e=n.doc.getLength()-1;else{var r=this.getSelectionRange();t=r.start.row,e=r.end.row}for(var o,s,a,l="",c="",u="",h=n.getTabString(),f=t;f<=e;f++)f>0&&(l=n.getState(f-1),c=n.getLine(f-1),u=i.getNextLineIndent(l,c,h)),o=n.getLine(f),u!==(s=i.$getIndent(o))&&(s.length>0&&(a=new p(f,0,f,s.length),n.remove(a)),u.length>0&&n.insert({row:f,column:0},u)),i.autoOutdent(l,n,f)},this.onTextInput=function(t,e){if(!e)return this.keyBinding.onTextInput(t);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,t,e);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(t,e){var n;(e.extendLeft||e.extendRight)&&((n=this.selection.getRange()).start.column-=e.extendLeft,n.end.column+=e.extendRight,n.start.column<0&&(n.start.row--,n.start.column+=this.session.getLine(n.start.row).length+1),this.selection.setRange(n),t||n.isEmpty()||this.remove());(!t&&this.selection.isEmpty()||this.insert(t,!0),e.restoreStart||e.restoreEnd)&&((n=this.selection.getRange()).start.column-=e.restoreStart,n.end.column-=e.restoreEnd,this.selection.setRange(n))},this.onCommandKey=function(t,e,n){return this.keyBinding.onCommandKey(t,e,n)},this.setOverwrite=function(t){this.session.setOverwrite(t)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(t){this.setOption("scrollSpeed",t)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(t){this.setOption("dragDelay",t)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(t){this.setOption("selectionStyle",t)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(t){this.setOption("highlightActiveLine",t)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(t){this.setOption("highlightSelectedWord",t)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(t){this.renderer.setAnimatedScroll(t)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(t){this.renderer.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(t){this.renderer.setDisplayIndentGuides(t)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(t){this.renderer.setShowPrintMargin(t)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(t){this.renderer.setPrintMarginColumn(t)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(t){this.setOption("readOnly",t)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(t){this.setOption("behavioursEnabled",t)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(t){this.setOption("wrapBehavioursEnabled",t)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(t){this.setOption("showFoldWidgets",t)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(t){this.selection.isEmpty()&&("left"==t?this.selection.selectLeft():this.selection.selectRight());var e=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,i=n.getState(e.start.row),r=n.getMode().transformAction(i,"deletion",this,n,e);if(0===e.end.column){var o=n.getTextRange(e);if("\n"==o[o.length-1]){var s=n.getLine(e.end.row);/^\s+$/.test(s)&&(e.end.column=s.length)}}r&&(e=r)}this.session.remove(e),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var t=this.getSelectionRange();t.start.column==t.end.column&&t.start.row==t.end.row&&(t.end.column=0,t.end.row++),this.session.remove(t),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var t=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(t)},this.transposeLetters=function(){if(this.selection.isEmpty()){var t=this.getCursorPosition(),e=t.column;if(0!==e){var n,i,r=this.session.getLine(t.row);e<r.length?(n=r.charAt(e)+r.charAt(e-1),i=new p(t.row,e-1,t.row,e+1)):(n=r.charAt(e-1)+r.charAt(e-2),i=new p(t.row,e-2,t.row,e)),this.session.replace(i,n),this.session.selection.moveToPosition(i.end)}}},this.toLowerCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toLowerCase()),this.selection.setSelectionRange(t)},this.toUpperCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),n=this.session.getTextRange(e);this.session.replace(e,n.toUpperCase()),this.selection.setSelectionRange(t)},this.indent=function(){var t=this.session,e=this.getSelectionRange();if(!(e.start.row<e.end.row)){if(e.start.column<e.end.column){var n=t.getTextRange(e);if(!/^\s+$/.test(n)){u=this.$getSelectedRows();return void t.indentRows(u.first,u.last,"\t")}}var i=t.getLine(e.start.row),r=e.start,s=t.getTabSize(),a=t.documentToScreenColumn(r.row,r.column);if(this.session.getUseSoftTabs())var l=s-a%s,c=o.stringRepeat(" ",l);else{for(l=a%s;" "==i[e.start.column-1]&&l;)e.start.column--,l--;this.selection.setSelectionRange(e),c="\t"}return this.insert(c)}var u=this.$getSelectedRows();t.indentRows(u.first,u.last,"\t")},this.blockIndent=function(){var t=this.$getSelectedRows();this.session.indentRows(t.first,t.last,"\t")},this.blockOutdent=function(){var t=this.session.getSelection();this.session.outdentRows(t.getRange())},this.sortLines=function(){for(var t=this.$getSelectedRows(),e=this.session,n=[],i=t.first;i<=t.last;i++)n.push(e.getLine(i));n.sort((function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0}));var r=new p(0,0,0,0);for(i=t.first;i<=t.last;i++){var o=e.getLine(i);r.start.row=i,r.end.row=i,r.end.column=o.length,e.replace(r,n[i-t.first])}},this.toggleCommentLines=function(){var t=this.session.getState(this.getCursorPosition().row),e=this.$getSelectedRows();this.session.getMode().toggleCommentLines(t,this.session,e.first,e.last)},this.toggleBlockComment=function(){var t=this.getCursorPosition(),e=this.session.getState(t.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(e,this.session,n,t)},this.getNumberAt=function(t,e){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var i=this.session.getLine(t);n.lastIndex<e;){var r=n.exec(i);if(r.index<=e&&r.index+r[0].length>=e)return{value:r[0],start:r.index,end:r.index+r[0].length}}return null},this.modifyNumber=function(t){var e=this.selection.getCursor().row,n=this.selection.getCursor().column,i=new p(e,n-1,e,n),r=this.session.getTextRange(i);if(!isNaN(parseFloat(r))&&isFinite(r)){var o=this.getNumberAt(e,n);if(o){var s=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,a=o.start+o.value.length-s,l=parseFloat(o.value);l*=Math.pow(10,a),s!==o.end&&n<s?t*=Math.pow(10,o.end-n-1):t*=Math.pow(10,o.end-n),l+=t;var c=(l/=Math.pow(10,a)).toFixed(a),u=new p(e,o.start,e,o.end);this.session.replace(u,c),this.moveCursorTo(e,Math.max(o.start+1,n+c.length-o.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var t=this.selection.getCursor().row,e=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),i=this.selection.getWordRange().start.column,r=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),s=e-i-1;s<0&&(s=0);var a=0,l=0,c=this;n.match(/[A-Za-z0-9_]+/)&&r.forEach((function(e,r){l=a+e.length,s>=a&&s<=l&&(n=e,c.selection.clearSelection(),c.moveCursorTo(t,a+i),c.selection.selectTo(t,l+i)),a=l}));for(var u,h=this.$toggleWordPairs,f=0;f<h.length;f++)for(var p=h[f],d=0;d<=1;d++){var g=+!d,m=n.match(new RegExp("^\\s?_?("+o.escapeRegExp(p[d])+")\\s?$","i"));if(m)n.match(new RegExp("([_]|^|\\s)("+o.escapeRegExp(m[1])+")($|\\s)","g"))&&(u=n.replace(new RegExp(o.escapeRegExp(p[d]),"i"),(function(t){var e=p[g];return t.toUpperCase()==t?e=e.toUpperCase():t.charAt(0).toUpperCase()==t.charAt(0)&&(e=e.substr(0,0)+p[g].charAt(0).toUpperCase()+e.substr(1)),e})),this.insert(u),u="")}},this.removeLines=function(){var t=this.$getSelectedRows();this.session.removeFullLines(t.first,t.last),this.clearSelection()},this.duplicateSelection=function(){var t=this.selection,e=this.session,n=t.getRange(),i=t.isBackwards();if(n.isEmpty()){var r=n.start.row;e.duplicateLines(r,r)}else{var o=i?n.start:n.end,s=e.insert(o,e.getTextRange(n),!1);n.start=o,n.end=s,t.setSelectionRange(n,i)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(t,e,n){return this.session.moveText(t,e,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(t,e){var n,i,r=this.selection;if(!r.inMultiSelectMode||this.inVirtualSelectionMode){var o=r.toOrientedRange();n=this.$getSelectedRows(o),i=this.session.$moveLines(n.first,n.last,e?0:t),e&&-1==t&&(i=0),o.moveBy(i,0),r.fromOrientedRange(o)}else{var s=r.rangeList.ranges;r.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,l=0,c=s.length,u=0;u<c;u++){var h=u;s[u].moveBy(a,0);for(var f=(n=this.$getSelectedRows(s[u])).first,p=n.last;++u<c;){l&&s[u].moveBy(l,0);var d=this.$getSelectedRows(s[u]);if(e&&d.first!=p)break;if(!e&&d.first>p+1)break;p=d.last}for(u--,a=this.session.$moveLines(f,p,e?0:t),e&&-1==t&&(h=u+1);h<=u;)s[h].moveBy(a,0),h++;e||(a=0),l+=a}r.fromOrientedRange(r.ranges[0]),r.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(t){return t=(t||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(t.start.row),last:this.session.getRowFoldEnd(t.end.row)}},this.onCompositionStart=function(t){this.renderer.showComposition(t)},this.onCompositionUpdate=function(t){this.renderer.setCompositionText(t)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(t){return t>=this.getFirstVisibleRow()&&t<=this.getLastVisibleRow()},this.isRowFullyVisible=function(t){return t>=this.renderer.getFirstFullyVisibleRow()&&t<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(t,e){var n=this.renderer,i=this.renderer.layerConfig,r=t*Math.floor(i.height/i.lineHeight);!0===e?this.selection.$moveSelection((function(){this.moveCursorBy(r,0)})):!1===e&&(this.selection.moveCursorBy(r,0),this.selection.clearSelection());var o=n.scrollTop;n.scrollBy(0,r*i.lineHeight),null!=e&&n.scrollCursorIntoView(null,.5),n.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(t){this.renderer.scrollToRow(t)},this.scrollToLine=function(t,e,n,i){this.renderer.scrollToLine(t,e,n,i)},this.centerSelection=function(){var t=this.getSelectionRange(),e={row:Math.floor(t.start.row+(t.end.row-t.start.row)/2),column:Math.floor(t.start.column+(t.end.column-t.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(t,e){this.selection.moveCursorTo(t,e)},this.moveCursorToPosition=function(t){this.selection.moveCursorToPosition(t)},this.jumpToMatching=function(t,e){var n=this.getCursorPosition(),i=new y(this.session,n.row,n.column),r=i.getCurrentToken(),o=r||i.stepForward();if(o){var s,a,l=!1,c={},u=n.column-o.start,h={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;u<o.value.length&&!l;u++)if(h[o.value[u]])switch(a=h[o.value[u]]+"."+o.type.replace("rparen","lparen"),isNaN(c[a])&&(c[a]=0),o.value[u]){case"(":case"[":case"{":c[a]++;break;case")":case"]":case"}":c[a]--,-1===c[a]&&(s="bracket",l=!0)}}else-1!==o.type.indexOf("tag-name")&&(isNaN(c[o.value])&&(c[o.value]=0),"<"===r.value?c[o.value]++:"</"===r.value&&c[o.value]--,-1===c[o.value]&&(s="tag",l=!0));l||(r=o,o=i.stepForward(),u=0)}while(o&&!l);if(s){var f,d;if("bracket"===s)(f=this.session.getBracketRange(n))||(d=(f=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1,i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1)).start,(e||d.row===n.row&&Math.abs(d.column-n.column)<2)&&(f=this.session.getBracketRange(d)));else if("tag"===s){if(!o||-1===o.type.indexOf("tag-name"))return;var g=o.value;if(0===(f=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2,i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2)).compare(n.row,n.column)){l=!1;do{o=r,(r=i.stepBackward())&&(-1!==r.type.indexOf("tag-close")&&f.setEnd(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1),o.value===g&&-1!==o.type.indexOf("tag-name")&&("<"===r.value?c[g]++:"</"===r.value&&c[g]--,0===c[g]&&(l=!0)))}while(r&&!l)}o&&o.type.indexOf("tag-name")&&(d=f.start).row==n.row&&Math.abs(d.column-n.column)<2&&(d=f.end)}(d=f&&f.cursor||d)&&(t?f&&e?this.selection.setRange(f):f&&f.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(d.row,d.column):this.selection.moveTo(d.row,d.column))}}},this.gotoLine=function(t,e,n){this.selection.clearSelection(),this.session.unfold({row:t-1,column:e||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(t-1,e||0),this.isRowFullyVisible(t-1)||this.scrollToLine(t-1,!0,n)},this.navigateTo=function(t,e){this.selection.moveTo(t,e)},this.navigateUp=function(t){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(-t||-1,0)},this.navigateDown=function(t){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(t||1,0)},this.navigateLeft=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorLeft();else{var e=this.getSelectionRange().start;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateRight=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorRight();else{var e=this.getSelectionRange().end;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(t,e){e&&this.$search.set(e);var n=this.$search.find(this.session),i=0;return n?(this.$tryReplace(n,t)&&(i=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),i):i},this.replaceAll=function(t,e){e&&this.$search.set(e);var n=this.$search.findAll(this.session),i=0;if(!n.length)return i;var r=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=n.length-1;o>=0;--o)this.$tryReplace(n[o],t)&&i++;return this.selection.setSelectionRange(r),i},this.$tryReplace=function(t,e){var n=this.session.getTextRange(t);return null!==(e=this.$search.replace(n,e))?(t.end=this.session.replace(t,e),t):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(t,e,n){e||(e={}),"string"==typeof t||t instanceof RegExp?e.needle=t:"object"==typeof t&&i.mixin(e,t);var r=this.selection.getRange();null==e.needle&&((t=this.session.getTextRange(r)||this.$search.$options.needle)||(r=this.session.getWordRange(r.start.row,r.start.column),t=this.session.getTextRange(r)),this.$search.set({needle:t})),this.$search.set(e),e.start||this.$search.set({start:r});var o=this.$search.find(this.session);return e.preventScroll?o:o?(this.revealRange(o,n),o):(e.backwards?r.start=r.end:r.end=r.start,void this.selection.setRange(r))},this.findNext=function(t,e){this.find({skipCurrent:!0,backwards:!1},t,e)},this.findPrevious=function(t,e){this.find(t,{skipCurrent:!0,backwards:!0},e)},this.revealRange=function(t,e){this.session.unfold(t),this.selection.setSelectionRange(t);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(t.start,t.end,.5),!1!==e&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach((function(t){t.destroy()})),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(t){if(t){var e,n=this,i=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var r=this.$scrollAnchor;r.style.cssText="position:absolute",this.container.insertBefore(r,this.container.firstChild);var o=this.on("changeSelection",(function(){i=!0})),s=this.renderer.on("beforeRender",(function(){i&&(e=n.renderer.container.getBoundingClientRect())})),a=this.renderer.on("afterRender",(function(){if(i&&e&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var t=n.renderer,o=t.$cursorLayer.$pixelPos,s=t.layerConfig,a=o.top-s.offset;null!=(i=o.top>=0&&a+e.top<0||!(o.top<s.height&&o.top+e.top+s.lineHeight>window.innerHeight)&&null)&&(r.style.top=a+"px",r.style.left=o.left+"px",r.style.height=s.lineHeight+"px",r.scrollIntoView(i)),i=e=null}}));this.setAutoScrollEditorIntoView=function(t){t||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",o),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",s))}}},this.$resetCursorStyle=function(){var t=this.$cursorStyle||"ace",e=this.renderer.$cursorLayer;e&&(e.setSmoothBlinking(/smooth/.test(t)),e.isBlinking=!this.$readOnly&&"wide"!=t,r.setCssClass(e.element,"ace_slim-cursors",/slim/.test(t)))},this.prompt=function(t,e,n){var i=this;v.loadModule("./ext/prompt",(function(r){r.prompt(i,t,e,n)}))}}.call(_.prototype),v.defineOptions(_.prototype,"editor",{selectionStyle:{set:function(t){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:t})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(t){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(t){this.textInput.setReadOnly(t),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(t){this.textInput.setCopyWithEmptySelection(t)},initialValue:!1},cursorStyle:{set:function(t){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(t){this.setAutoScrollEditorIntoView(t)}},keyboardHandler:{set:function(t){this.setKeyboardHandler(t)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(t){this.session.setValue(t)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(t){this.setSession(t)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(t){this.renderer.$gutterLayer.setShowLineNumbers(t),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),t&&this.$relativeLineNumbers?w.attach(this):w.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(t){this.$showLineNumbers&&t?w.attach(this):w.detach(this)}},placeholder:{set:function(t){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var t=this.session&&(this.renderer.$composition||this.getValue());if(t&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),r.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(t||this.renderer.placeholderNode)!t&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"");else{this.renderer.on("afterRender",this.$updatePlaceholder),r.addCssClass(this.container,"ace_hasPlaceholder");var e=r.createElement("div");e.className="ace_placeholder",e.textContent=this.$placeholder||"",this.renderer.placeholderNode=e,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var w={getText:function(t,e){return(Math.abs(t.selection.lead.row-e)||e+1+(e<9?"\xb7":""))+""},getWidth:function(t,e,n){return Math.max(e.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(t,e){e.renderer.$loop.schedule(e.renderer.CHANGE_GUTTER)},attach:function(t){t.renderer.$gutterLayer.$renderer=this,t.on("changeSelection",this.update),this.update(null,t)},detach:function(t){t.renderer.$gutterLayer.$renderer==this&&(t.renderer.$gutterLayer.$renderer=null),t.off("changeSelection",this.update),this.update(null,t)}};e.Editor=_})),ace.define("ace/undomanager",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(t){this.$session=t},this.add=function(t,e,n){this.$fromUndo||t!=this.$lastDelta&&(this.$keepRedoStack||(this.$redoStack.length=0),!1!==e&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),t.id=this.$rev=++this.$maxRev),"remove"!=t.action&&"insert"!=t.action||(this.$lastDelta=t),this.lastDeltas.push(t))},this.addSelection=function(t,e){this.selections.push({value:t,rev:e||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(t,e){null==e&&(e=this.$rev+1);for(var n=this.$undoStack,i=n.length;i--;){var r=n[i][0];if(r.id<=t)break;r.id<e&&(r.ignore=!0)}this.lastDeltas=null},this.getSelection=function(t,e){for(var n=this.selections,i=n.length;i--;){var r=n[i];if(r.rev<t)return e&&(r=n[i+1]),r}},this.getRevision=function(){return this.$rev},this.getDeltas=function(t,e){null==e&&(e=this.$rev+1);for(var n=this.$undoStack,i=null,r=0,o=n.length;o--;){var s=n[o][0];if(s.id<e&&!i&&(i=o+1),s.id<=t){r=o+1;break}}return n.slice(r,i)},this.getChangedRanges=function(t,e){null==e&&(e=this.$rev+1)},this.getChangedLines=function(t,e){null==e&&(e=this.$rev+1)},this.undo=function(t,e){this.lastDeltas=null;var n=this.$undoStack;if(function(t,e){for(var n=e;n--;){var i=t[n];if(i&&!i[0].ignore){for(;n<e-1;){var r=u(t[n],t[n+1]);t[n]=r[0],t[n+1]=r[1],n++}return!0}}}(n,n.length)){t||(t=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var i=n.pop(),r=null;return i&&(r=t.undoChanges(i,e),this.$redoStack.push(i),this.$syncRev()),this.$fromUndo=!1,r}},this.redo=function(t,e){if(this.lastDeltas=null,t||(t=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);!function(t,e){for(var n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.length;r++)g(t,i[r])}(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(t){t[0].id=++this.$maxRev}),this)}var i=this.$redoStack.pop(),r=null;return i&&(r=t.redoChanges(i,e),this.$undoStack.push(i),this.$syncRev()),this.$fromUndo=!1,r},this.$syncRev=function(){var t=this.$undoStack,e=t[t.length-1],n=e&&e[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(t){void 0==t&&(t=this.$rev),this.mark=t},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(t){return t?a(t):a(this.$undoStack)+"\n---\n"+a(this.$redoStack)}}).call(i.prototype);var r=t("./range").Range,o=r.comparePoints;r.comparePoints;function s(t){return{row:t.row,column:t.column}}function a(t){if(t=t||this,Array.isArray(t))return t.map(a).join("\n");var e="";return t.action?(e="insert"==t.action?"+":"-",e+="["+t.lines+"]"):t.value&&(e=Array.isArray(t.value)?t.value.map(l).join("\n"):l(t.value)),t.start&&(e+=l(t)),(t.id||t.rev)&&(e+="\t("+(t.id||t.rev)+")"),e}function l(t){return t.start.row+":"+t.start.column+"=>"+t.end.row+":"+t.end.column}function c(t,e){var n="insert"==t.action,i="insert"==e.action;if(n&&i)if(o(e.start,t.end)>=0)f(e,t,-1);else{if(!(o(e.start,t.start)<=0))return null;f(t,e,1)}else if(n&&!i)if(o(e.start,t.end)>=0)f(e,t,-1);else{if(!(o(e.end,t.start)<=0))return null;f(t,e,-1)}else if(!n&&i)if(o(e.start,t.start)>=0)f(e,t,1);else{if(!(o(e.start,t.start)<=0))return null;f(t,e,1)}else if(!n&&!i)if(o(e.start,t.start)>=0)f(e,t,1);else{if(!(o(e.end,t.start)<=0))return null;f(t,e,-1)}return[e,t]}function u(t,e){for(var n=t.length;n--;)for(var i=0;i<e.length;i++)if(!c(t[n],e[i])){for(;n<t.length;){for(;i--;)c(e[i],t[n]);i=e.length,n++}return[t,e]}return t.selectionBefore=e.selectionBefore=t.selectionAfter=e.selectionAfter=null,[e,t]}function h(t,e){var n="insert"==t.action,i="insert"==e.action;if(n&&i)o(t.start,e.start)<0?f(e,t,1):f(t,e,1);else if(n&&!i)o(t.start,e.end)>=0?f(t,e,-1):(o(t.start,e.start)<=0||f(t,r.fromPoints(e.start,t.start),-1),f(e,t,1));else if(!n&&i)o(e.start,t.end)>=0?f(e,t,-1):(o(e.start,t.start)<=0||f(e,r.fromPoints(t.start,e.start),-1),f(t,e,1));else if(!n&&!i)if(o(e.start,t.end)>=0)f(e,t,-1);else{var s,a;if(!(o(e.end,t.start)<=0))return o(t.start,e.start)<0&&(s=t,t=d(t,e.start)),o(t.end,e.end)>0&&(a=d(t,e.end)),p(e.end,t.start,t.end,-1),a&&!s&&(t.lines=a.lines,t.start=a.start,t.end=a.end,a=t),[e,s,a].filter(Boolean);f(t,e,-1)}return[e,t]}function f(t,e,n){p(t.start,e.start,e.end,n),p(t.end,e.start,e.end,n)}function p(t,e,n,i){t.row==(1==i?e:n).row&&(t.column+=i*(n.column-e.column)),t.row+=i*(n.row-e.row)}function d(t,e){var n=t.lines,i=t.end;t.end=s(e);var r=t.end.row-t.start.row,o=n.splice(r,n.length),a=r?e.column:e.column-t.start.column;return n.push(o[0].substring(0,a)),o[0]=o[0].substr(a),{start:s(e),end:i,lines:o,action:t.action}}function g(t,e){e=function(t){return{start:s(t.start),end:s(t.end),action:t.action,lines:t.lines.slice()}}(e);for(var n=t.length;n--;){for(var i=t[n],r=0;r<i.length;r++){var o=h(i[r],e);e=o[0],2!=o.length&&(o[2]?(i.splice(r+1,1,o[1],o[2]),r++):o[1]||(i.splice(r,1),r--))}i.length||t.splice(n,1)}return t}e.UndoManager=i})),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("../lib/dom"),r=function(t,e){this.element=t,this.canvasHeight=e||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(t){i.translate(this.element,0,-t.firstRowScreen*t.lineHeight%this.canvasHeight-t.offset*this.$offsetCoefficient)},this.pageChanged=function(t,e){return Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)!==Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)},this.computeLineTop=function(t,e,n){var i=e.firstRowScreen*e.lineHeight,r=Math.floor(i/this.canvasHeight);return n.documentToScreenRow(t,0)*e.lineHeight-r*this.canvasHeight},this.computeLineHeight=function(t,e,n){return e.lineHeight*n.getRowLineCount(t)},this.getLength=function(){return this.cells.length},this.get=function(t){return this.cells[t]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(t){if(Array.isArray(t)){this.cells.push.apply(this.cells,t);for(var e=i.createFragment(this.element),n=0;n<t.length;n++)e.appendChild(t[n].element);this.element.appendChild(e)}else this.cells.push(t),this.element.appendChild(t.element)},this.unshift=function(t){if(Array.isArray(t)){this.cells.unshift.apply(this.cells,t);for(var e=i.createFragment(this.element),n=0;n<t.length;n++)e.appendChild(t[n].element);this.element.firstChild?this.element.insertBefore(e,this.element.firstChild):this.element.appendChild(e)}else this.cells.unshift(t),this.element.insertAdjacentElement("afterbegin",t.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(t){t&&(t.element.remove(),this.cellCache.push(t))},this.createCell=function(t,e,n,r){var o=this.cellCache.pop();if(!o){var s=i.createElement("div");r&&r(s),this.element.appendChild(s),o={element:s,text:"",row:t}}return o.row=t,o}}).call(r.prototype),e.Lines=r})),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],(function(t,e,n){"use strict";var i=t("../lib/dom"),r=t("../lib/oop"),o=t("../lib/lang"),s=t("../lib/event_emitter").EventEmitter,a=t("./lines").Lines,l=function(t){this.element=i.createElement("div"),this.element.className="ace_layer ace_gutter-layer",t.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new a(this.element),this.$lines.$offsetCoefficient=1};function c(t){var e=document.createTextNode("");t.appendChild(e);var n=i.createElement("span");return t.appendChild(n),t}(function(){r.implement(this,s),this.setSession=function(t){this.session&&this.session.off("change",this.$updateAnnotations),this.session=t,t&&t.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(t,e)},this.setAnnotations=function(t){this.$annotations=[];for(var e=0;e<t.length;e++){var n=t[e],i=n.row,r=this.$annotations[i];r||(r=this.$annotations[i]={text:[]});var s=n.text;s=s?o.escapeHTML(s):n.html||"",-1===r.text.indexOf(s)&&r.text.push(s);var a=n.type;"error"==a?r.className=" ace_error":"warning"==a&&" ace_error"!=r.className?r.className=" ace_warning":"info"!=a||r.className||(r.className=" ace_info")}},this.$updateAnnotations=function(t){if(this.$annotations.length){var e=t.start.row,n=t.end.row-e;if(0===n);else if("remove"==t.action)this.$annotations.splice(e,n+1,null);else{var i=new Array(n+1);i.unshift(e,1),this.$annotations.splice.apply(this.$annotations,i)}}},this.update=function(t){this.config=t;var e=this.session,n=t.firstRow,i=Math.min(t.lastRow+t.gutterOffset,e.getLength()-1);this.oldLastRow=i,this.config=t,this.$lines.moveContainer(t),this.$updateCursorRow();for(var r=e.getNextFoldLine(n),o=r?r.start.row:1/0,s=null,a=-1,l=n;;){if(l>o&&(l=r.end.row+1,o=(r=e.getNextFoldLine(l,r))?r.start.row:1/0),l>i){for(;this.$lines.getLength()>a+1;)this.$lines.pop();break}(s=this.$lines.get(++a))?s.row=l:(s=this.$lines.createCell(l,t,this.session,c),this.$lines.push(s)),this.$renderCell(s,t,r,l),l++}this._signal("afterRender"),this.$updateGutterWidth(t)},this.$updateGutterWidth=function(t){var e=this.session,n=e.gutterRenderer||this.$renderer,i=e.$firstLineNumber,r=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||e.$useWrapMode)&&(r=e.getLength()+i-1);var o=n?n.getWidth(e,r,t):r.toString().length*t.characterWidth,s=this.$padding||this.$computePadding();(o+=s.left+s.right)===this.gutterWidth||isNaN(o)||(this.gutterWidth=o,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",o))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var t=this.session.selection.getCursor();this.$cursorRow!==t.row&&(this.$cursorRow=t.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var t=this.session.selection.cursor.row;if(this.$cursorRow=t,!this.$cursorCell||this.$cursorCell.row!=t){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var e=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<e.length;n++){var i=e[n];if(i.row>=this.$cursorRow){if(i.row>this.$cursorRow){var r=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&r&&r.start.row==e[n-1].row))break;i=e[n-1]}i.element.className="ace_gutter-active-line "+i.element.className,this.$cursorCell=i;break}}}}},this.scrollLines=function(t){var e=this.config;if(this.config=t,this.$updateCursorRow(),this.$lines.pageChanged(e,t))return this.update(t);this.$lines.moveContainer(t);var n=Math.min(t.lastRow+t.gutterOffset,this.session.getLength()-1),i=this.oldLastRow;if(this.oldLastRow=n,!e||i<t.firstRow)return this.update(t);if(n<e.firstRow)return this.update(t);if(e.firstRow<t.firstRow)for(var r=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);r>0;r--)this.$lines.shift();if(i>n)for(r=this.session.getFoldedRowCount(n+1,i);r>0;r--)this.$lines.pop();t.firstRow<e.firstRow&&this.$lines.unshift(this.$renderLines(t,t.firstRow,e.firstRow-1)),n>i&&this.$lines.push(this.$renderLines(t,i+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(t)},this.$renderLines=function(t,e,n){for(var i=[],r=e,o=this.session.getNextFoldLine(r),s=o?o.start.row:1/0;r>s&&(r=o.end.row+1,s=(o=this.session.getNextFoldLine(r,o))?o.start.row:1/0),!(r>n);){var a=this.$lines.createCell(r,t,this.session,c);this.$renderCell(a,t,o,r),i.push(a),r++}return i},this.$renderCell=function(t,e,n,r){var o=t.element,s=this.session,a=o.childNodes[0],l=o.childNodes[1],c=s.$firstLineNumber,u=s.$breakpoints,h=s.$decorations,f=s.gutterRenderer||this.$renderer,p=this.$showFoldWidgets&&s.foldWidgets,d=n?n.start.row:Number.MAX_VALUE,g="ace_gutter-cell ";if(this.$highlightGutterLine&&(r==this.$cursorRow||n&&r<this.$cursorRow&&r>=d&&this.$cursorRow<=n.end.row)&&(g+="ace_gutter-active-line ",this.$cursorCell!=t&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=t)),u[r]&&(g+=u[r]),h[r]&&(g+=h[r]),this.$annotations[r]&&(g+=this.$annotations[r].className),o.className!=g&&(o.className=g),p){var m=p[r];null==m&&(m=p[r]=s.getFoldWidget(r))}if(m){g="ace_fold-widget ace_"+m;"start"==m&&r==d&&r<n.end.row?g+=" ace_closed":g+=" ace_open",l.className!=g&&(l.className=g);var v=e.lineHeight+"px";i.setStyle(l.style,"height",v),i.setStyle(l.style,"display","inline-block")}else l&&i.setStyle(l.style,"display","none");var y=(f?f.getText(s,r):r+c).toString();return y!==a.data&&(a.data=y),i.setStyle(t.element.style,"height",this.$lines.computeLineHeight(r,e,s)+"px"),i.setStyle(t.element.style,"top",this.$lines.computeLineTop(r,e,s)+"px"),t.text=y,t},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(t){this.$highlightGutterLine=t},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(t){this.$renderer=!t&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(t){t?i.addCssClass(this.element,"ace_folding-enabled"):i.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=t,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var t=i.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(t.borderLeftWidth)||0)+(parseInt(t.paddingLeft)||0)+1,this.$padding.right=(parseInt(t.borderRightWidth)||0)+(parseInt(t.paddingRight)||0),this.$padding},this.getRegion=function(t){var e=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return t.x<e.left+n.left?"markers":this.$showFoldWidgets&&t.x>n.right-e.right?"foldWidgets":void 0}}).call(l.prototype),e.Gutter=l})),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("../range").Range,r=t("../lib/dom"),o=function(t){this.element=r.createElement("div"),this.element.className="ace_layer ace_marker-layer",t.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setMarkers=function(t){this.markers=t},this.elt=function(t,e){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=e,n.className=t},this.update=function(t){if(t){var e;for(var n in this.config=t,this.i=0,this.markers){var i=this.markers[n];if(i.range){var r=i.range.clipRows(t.firstRow,t.lastRow);if(!r.isEmpty())if(r=r.toScreenRange(this.session),i.renderer){var o=this.$getTop(r.start.row,t),s=this.$padding+r.start.column*t.characterWidth;i.renderer(e,r,s,o,t)}else"fullLine"==i.type?this.drawFullLineMarker(e,r,i.clazz,t):"screenLine"==i.type?this.drawScreenLineMarker(e,r,i.clazz,t):r.isMultiLine()?"text"==i.type?this.drawTextMarker(e,r,i.clazz,t):this.drawMultiLineMarker(e,r,i.clazz,t):this.drawSingleLineMarker(e,r,i.clazz+" ace_start ace_br15",t)}else i.update(e,this,this.session,t)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(t,e){return(t-e.firstRowScreen)*e.lineHeight},this.drawTextMarker=function(t,e,n,r,o){for(var s=this.session,a=e.start.row,l=e.end.row,c=a,u=0,h=0,f=s.getScreenLastRowColumn(c),p=new i(c,e.start.column,c,h);c<=l;c++)p.start.row=p.end.row=c,p.start.column=c==a?e.start.column:s.getRowWrapIndent(c),p.end.column=f,u=h,h=f,f=c+1<l?s.getScreenLastRowColumn(c+1):c==l?0:e.end.column,this.drawSingleLineMarker(t,p,n+(c==a?" ace_start":"")+" ace_br"+((c==a||c==a+1&&e.start.column?1:0)|(u<h?2:0)|(h>f?4:0)|(c==l?8:0)),r,c==l?0:1,o)},this.drawMultiLineMarker=function(t,e,n,i,r){var o=this.$padding,s=i.lineHeight,a=this.$getTop(e.start.row,i),l=o+e.start.column*i.characterWidth;(r=r||"",this.session.$bidiHandler.isBidiRow(e.start.row))?((c=e.clone()).end.row=c.start.row,c.end.column=this.session.getLine(c.start.row).length,this.drawBidiSingleLineMarker(t,c,n+" ace_br1 ace_start",i,null,r)):this.elt(n+" ace_br1 ace_start","height:"+s+"px;right:0;top:"+a+"px;left:"+l+"px;"+(r||""));if(this.session.$bidiHandler.isBidiRow(e.end.row)){var c;(c=e.clone()).start.row=c.end.row,c.start.column=0,this.drawBidiSingleLineMarker(t,c,n+" ace_br12",i,null,r)}else{a=this.$getTop(e.end.row,i);var u=e.end.column*i.characterWidth;this.elt(n+" ace_br12","height:"+s+"px;width:"+u+"px;top:"+a+"px;left:"+o+"px;"+(r||""))}if(!((s=(e.end.row-e.start.row-1)*i.lineHeight)<=0)){a=this.$getTop(e.start.row+1,i);var h=(e.start.column?1:0)|(e.end.column?0:8);this.elt(n+(h?" ace_br"+h:""),"height:"+s+"px;right:0;top:"+a+"px;left:"+o+"px;"+(r||""))}},this.drawSingleLineMarker=function(t,e,n,i,r,o){if(this.session.$bidiHandler.isBidiRow(e.start.row))return this.drawBidiSingleLineMarker(t,e,n,i,r,o);var s=i.lineHeight,a=(e.end.column+(r||0)-e.start.column)*i.characterWidth,l=this.$getTop(e.start.row,i),c=this.$padding+e.start.column*i.characterWidth;this.elt(n,"height:"+s+"px;width:"+a+"px;top:"+l+"px;left:"+c+"px;"+(o||""))},this.drawBidiSingleLineMarker=function(t,e,n,i,r,o){var s=i.lineHeight,a=this.$getTop(e.start.row,i),l=this.$padding;this.session.$bidiHandler.getSelections(e.start.column,e.end.column).forEach((function(t){this.elt(n,"height:"+s+"px;width:"+t.width+(r||0)+"px;top:"+a+"px;left:"+(l+t.left)+"px;"+(o||""))}),this)},this.drawFullLineMarker=function(t,e,n,i,r){var o=this.$getTop(e.start.row,i),s=i.lineHeight;e.start.row!=e.end.row&&(s+=this.$getTop(e.end.row,i)-o),this.elt(n,"height:"+s+"px;top:"+o+"px;left:0;right:0;"+(r||""))},this.drawScreenLineMarker=function(t,e,n,i,r){var o=this.$getTop(e.start.row,i),s=i.lineHeight;this.elt(n,"height:"+s+"px;top:"+o+"px;left:0;right:0;"+(r||""))}}).call(o.prototype),e.Marker=o})),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],(function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("../lib/dom"),o=t("../lib/lang"),s=t("./lines").Lines,a=t("../lib/event_emitter").EventEmitter,l=function(t){this.dom=r,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new s(this.element)};(function(){i.implement(this,a),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xb7",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var t=this.session.doc,e="\n"==t.getNewLineCharacter()&&"windows"!=t.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e)return this.EOL_CHAR=e,!0},this.setPadding=function(t){this.$padding=t,this.element.style.margin="0 "+t+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on("changeCharacterSize",function(t){this._signal("changeCharacterSize",t)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){this.session=t,t&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(t){return this.showInvisibles!=t&&(this.showInvisibles=t,"string"==typeof t?(this.showSpaces=/tab/i.test(t),this.showTabs=/space/i.test(t),this.showEOL=/eol/i.test(t)):this.showSpaces=this.showTabs=this.showEOL=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides!=t&&(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var t=this.session.getTabSize();this.tabSize=t;for(var e=this.$tabStrings=[0],n=1;n<t+1;n++){if(this.showTabs)(i=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",i.textContent=o.stringRepeat(this.TAB_CHAR,n),e.push(i);else e.push(this.dom.createTextNode(o.stringRepeat(" ",n),this.element))}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i,r="ace_indent-guide",s=this.showSpaces?" ace_invisible ace_invisible_space":"",a=this.showSpaces?o.stringRepeat(this.SPACE_CHAR,this.tabSize):o.stringRepeat(" ",this.tabSize),l=this.showTabs?" ace_invisible ace_invisible_tab":"",c=this.showTabs?o.stringRepeat(this.TAB_CHAR,this.tabSize):a;(i=this.dom.createElement("span")).className=r+s,i.textContent=a,this.$tabStrings[" "]=i,(i=this.dom.createElement("span")).className=r+l,i.textContent=c,this.$tabStrings["\t"]=i}},this.updateLines=function(t,e,n){if(this.config.lastRow!=t.lastRow||this.config.firstRow!=t.firstRow)return this.update(t);this.config=t;for(var i=Math.max(e,t.firstRow),r=Math.min(n,t.lastRow),o=this.element.childNodes,s=0,a=t.firstRow;a<i;a++){if(l=this.session.getFoldLine(a)){if(l.containsRow(i)){i=l.start.row;break}a=l.end.row}s++}for(var l,c=!1,u=(a=i,(l=this.session.getNextFoldLine(a))?l.start.row:1/0);a>u&&(a=l.end.row+1,u=(l=this.session.getNextFoldLine(a,l))?l.start.row:1/0),!(a>r);){var h=o[s++];if(h){this.dom.removeChildren(h),this.$renderLine(h,a,a==u&&l),c&&(h.style.top=this.$lines.computeLineTop(a,t,this.session)+"px");var f=t.lineHeight*this.session.getRowLength(a)+"px";h.style.height!=f&&(c=!0,h.style.height=f)}a++}if(c)for(;s<this.$lines.cells.length;){var p=this.$lines.cells[s++];p.element.style.top=this.$lines.computeLineTop(p.row,t,this.session)+"px"}},this.scrollLines=function(t){var e=this.config;if(this.config=t,this.$lines.pageChanged(e,t))return this.update(t);this.$lines.moveContainer(t);var n=t.lastRow,i=e?e.lastRow:-1;if(!e||i<t.firstRow)return this.update(t);if(n<e.firstRow)return this.update(t);if(!e||e.lastRow<t.firstRow)return this.update(t);if(t.lastRow<e.firstRow)return this.update(t);if(e.firstRow<t.firstRow)for(var r=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);r>0;r--)this.$lines.shift();if(e.lastRow>t.lastRow)for(r=this.session.getFoldedRowCount(t.lastRow+1,e.lastRow);r>0;r--)this.$lines.pop();t.firstRow<e.firstRow&&this.$lines.unshift(this.$renderLinesFragment(t,t.firstRow,e.firstRow-1)),t.lastRow>e.lastRow&&this.$lines.push(this.$renderLinesFragment(t,e.lastRow+1,t.lastRow))},this.$renderLinesFragment=function(t,e,n){for(var i=[],o=e,s=this.session.getNextFoldLine(o),a=s?s.start.row:1/0;o>a&&(o=s.end.row+1,a=(s=this.session.getNextFoldLine(o,s))?s.start.row:1/0),!(o>n);){var l=this.$lines.createCell(o,t,this.session),c=l.element;this.dom.removeChildren(c),r.setStyle(c.style,"height",this.$lines.computeLineHeight(o,t,this.session)+"px"),r.setStyle(c.style,"top",this.$lines.computeLineTop(o,t,this.session)+"px"),this.$renderLine(c,o,o==a&&s),this.$useLineGroups()?c.className="ace_line_group":c.className="ace_line",i.push(l),o++}return i},this.update=function(t){this.$lines.moveContainer(t),this.config=t;for(var e=t.firstRow,n=t.lastRow,i=this.$lines;i.getLength();)i.pop();i.push(this.$renderLinesFragment(t,e,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(t,e,n,i){for(var r,s=this,a=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,l=this.dom.createFragment(this.element),c=0;r=a.exec(i);){var u=r[1],h=r[2],f=r[3],p=r[4],d=r[5];if(s.showSpaces||!h){var g=c!=r.index?i.slice(c,r.index):"";if(c=r.index+r[0].length,g&&l.appendChild(this.dom.createTextNode(g,this.element)),u){var m=s.session.getScreenTabSize(e+r.index);l.appendChild(s.$tabStrings[m].cloneNode(!0)),e+=m-1}else if(h){if(s.showSpaces)(y=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",y.textContent=o.stringRepeat(s.SPACE_CHAR,h.length),l.appendChild(y);else l.appendChild(this.com.createTextNode(h,this.element))}else if(f){(y=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",y.textContent=o.stringRepeat(s.SPACE_CHAR,f.length),l.appendChild(y)}else if(p){e+=1,(y=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",y.className=s.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",y.textContent=s.showSpaces?s.SPACE_CHAR:p,l.appendChild(y)}else if(d){e+=1,(y=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",y.className="ace_cjk",y.textContent=d,l.appendChild(y)}}}if(l.appendChild(this.dom.createTextNode(c?i.slice(c):i,this.element)),this.$textToken[n.type])t.appendChild(l);else{var v="ace_"+n.type.replace(/\./g," ace_"),y=this.dom.createElement("span");"fold"==n.type&&(y.style.width=n.value.length*this.config.characterWidth+"px"),y.className=v,y.appendChild(l),t.appendChild(y)}return e+i.length},this.renderIndentGuide=function(t,e,n){var i=e.search(this.$indentGuideRe);if(i<=0||i>=n)return e;if(" "==e[0]){for(var r=(i-=i%this.tabSize)/this.tabSize,o=0;o<r;o++)t.appendChild(this.$tabStrings[" "].cloneNode(!0));return e.substr(i)}if("\t"==e[0]){for(o=0;o<i;o++)t.appendChild(this.$tabStrings["\t"].cloneNode(!0));return e.substr(i)}return e},this.$createLineElement=function(t){var e=this.dom.createElement("div");return e.className="ace_line",e.style.height=this.config.lineHeight+"px",e},this.$renderWrappedLine=function(t,e,n){var i=0,r=0,s=n[0],a=0,l=this.$createLineElement();t.appendChild(l);for(var c=0;c<e.length;c++){var u=e[c],h=u.value;if(0==c&&this.displayIndentGuides){if(i=h.length,!(h=this.renderIndentGuide(l,h,s)))continue;i-=h.length}if(i+h.length<s)a=this.$renderToken(l,a,u,h),i+=h.length;else{for(;i+h.length>=s;)a=this.$renderToken(l,a,u,h.substring(0,s-i)),h=h.substring(s-i),i=s,l=this.$createLineElement(),t.appendChild(l),l.appendChild(this.dom.createTextNode(o.stringRepeat("\xa0",n.indent),this.element)),a=0,s=n[++r]||Number.MAX_VALUE;0!=h.length&&(i+=h.length,a=this.$renderToken(l,a,u,h))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(l,a,null,"",!0)},this.$renderSimpleLine=function(t,e){var n=0,i=e[0],r=i.value;this.displayIndentGuides&&(r=this.renderIndentGuide(t,r)),r&&(n=this.$renderToken(t,n,i,r));for(var o=1;o<e.length;o++){if(n+(r=(i=e[o]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(t,n,i,r);n=this.$renderToken(t,n,i,r)}},this.$renderOverflowMessage=function(t,e,n,i,r){n&&this.$renderToken(t,e,n,i.slice(0,this.MAX_LINE_LENGTH-e));var o=this.dom.createElement("span");o.className="ace_inline_button ace_keyword ace_toggle_wrap",o.textContent=r?"<hide>":"<click to see more...>",t.appendChild(o)},this.$renderLine=function(t,e,n){if(n||0==n||(n=this.session.getFoldLine(e)),n)var i=this.$getFoldLineTokens(e,n);else i=this.session.getTokens(e);var r=t;if(i.length){var o=this.session.getRowSplitData(e);if(o&&o.length){this.$renderWrappedLine(t,i,o);r=t.lastChild}else{r=t;this.$useLineGroups()&&(r=this.$createLineElement(),t.appendChild(r)),this.$renderSimpleLine(r,i)}}else this.$useLineGroups()&&(r=this.$createLineElement(),t.appendChild(r));if(this.showEOL&&r){n&&(e=n.end.row);var s=this.dom.createElement("span");s.className="ace_invisible ace_invisible_eol",s.textContent=e==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,r.appendChild(s)}},this.$getFoldLineTokens=function(t,e){var n=this.session,i=[];var r=n.getTokens(t);return e.walk((function(t,e,o,s,a){null!=t?i.push({type:"fold",value:t}):(a&&(r=n.getTokens(e)),r.length&&function(t,e,n){for(var r=0,o=0;o+t[r].value.length<e;)if(o+=t[r].value.length,++r==t.length)return;for(o!=e&&((s=t[r].value.substring(e-o)).length>n-e&&(s=s.substring(0,n-e)),i.push({type:t[r].type,value:s}),o=e+s.length,r+=1);o<n&&r<t.length;){var s;(s=t[r].value).length+o>n?i.push({type:t[r].type,value:s.substring(0,n-o)}):i.push(t[r]),o+=s.length,r+=1}}(r,s,o))}),e.end.row,this.session.getLine(e.end.row).length),i},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(l.prototype),e.Text=l})),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("../lib/dom"),r=function(t){this.element=i.createElement("div"),this.element.className="ace_layer ace_cursor-layer",t.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),i.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(t){for(var e=this.cursors,n=e.length;n--;)i.setStyle(e[n].style,"opacity",t?"":"0")},this.$startCssAnimation=function(){for(var t=this.cursors,e=t.length;e--;)t[e].style.animationDuration=this.blinkInterval+"ms";setTimeout(function(){i.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){i.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setBlinking=function(t){t!=this.isBlinking&&(this.isBlinking=t,this.restartTimer())},this.setBlinkInterval=function(t){t!=this.blinkInterval&&(this.blinkInterval=t,this.restartTimer())},this.setSmoothBlinking=function(t){t!=this.smoothBlinking&&(this.smoothBlinking=t,i.setCssClass(this.element,"ace_smooth-blinking",t),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var t=i.createElement("div");return t.className="ace_cursor",this.element.appendChild(t),this.cursors.push(t),t},this.removeCursor=function(){if(this.cursors.length>1){var t=this.cursors.pop();return t.parentNode.removeChild(t),t}},this.hideCursor=function(){this.isVisible=!1,i.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,i.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var t=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&i.removeCssClass(this.element,"ace_smooth-blinking"),t(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&setTimeout(function(){i.addCssClass(this.element,"ace_smooth-blinking")}.bind(this)),i.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var e=function(){this.timeoutId=setTimeout((function(){t(!1)}),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval((function(){t(!0),e()}),this.blinkInterval),e()}else this.$stopCssAnimation()},this.getPixelPosition=function(t,e){if(!this.config||!this.session)return{left:0,top:0};t||(t=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(t);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,t.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(e?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(t,e){return t.top>=0&&t.top<e.maxHeight},this.update=function(t){this.config=t;var e=this.session.$selectionMarkers,n=0,r=0;void 0!==e&&0!==e.length||(e=[{cursor:null}]);n=0;for(var o=e.length;n<o;n++){var s=this.getPixelPosition(e[n].cursor,!0);if(!((s.top>t.height+t.offset||s.top<0)&&n>1)){var a=this.cursors[r++]||this.addCursor(),l=a.style;this.drawCursor?this.drawCursor(a,s,t,e[n],this.session):this.isCursorInView(s,t)?(i.setStyle(l,"display","block"),i.translate(a,s.left,s.top),i.setStyle(l,"width",Math.round(t.characterWidth)+"px"),i.setStyle(l,"height",t.lineHeight+"px")):i.setStyle(l,"display","none")}}for(;this.cursors.length>r;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=s,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(t){t!=this.overwrite&&(this.overwrite=t,t?i.addCssClass(this.element,"ace_overwrite-cursors"):i.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(r.prototype),e.Cursor=r})),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/dom"),o=t("./lib/event"),s=t("./lib/event_emitter").EventEmitter,a=32768,l=function(t){this.element=r.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=r.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xa0",this.element.appendChild(this.inner),t.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)};(function(){i.implement(this,s),this.setVisible=function(t){this.element.style.display=t?"":"none",this.isVisible=t,this.coeff=1}}).call(l.prototype);var c=function(t,e){l.call(this,t),this.scrollTop=0,this.scrollHeight=0,e.$scrollbarWidth=this.width=r.scrollbarWidth(t.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};i.inherits(c,l),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var t=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-t)/(this.coeff-t)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(t){this.element.style.height=t+"px"},this.setInnerHeight=this.setScrollHeight=function(t){this.scrollHeight=t,t>a?(this.coeff=a/t,t=a):1!=this.coeff&&(this.coeff=1),this.inner.style.height=t+"px"},this.setScrollTop=function(t){this.scrollTop!=t&&(this.skipEvent=!0,this.scrollTop=t,this.element.scrollTop=t*this.coeff)}}.call(c.prototype);var u=function(t,e){l.call(this,t),this.scrollLeft=0,this.height=e.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(u,l),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(t){this.element.style.width=t+"px"},this.setInnerWidth=function(t){this.inner.style.width=t+"px"},this.setScrollWidth=function(t){this.inner.style.width=t+"px"},this.setScrollLeft=function(t){this.scrollLeft!=t&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=t)}}.call(u.prototype),e.ScrollBar=c,e.ScrollBarV=c,e.ScrollBarH=u,e.VScrollBar=c,e.HScrollBar=u})),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],(function(t,e,n){"use strict";var i=t("./lib/event"),r=function(t,e){this.onRender=t,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=e||window;var n=this;this._flush=function(t){n.pending=!1;var e=n.changes;if(e&&(i.blockIdle(100),n.changes=0,n.onRender(e)),n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(t){this.changes=this.changes|t,this.changes&&!this.pending&&(i.nextFrame(this._flush),this.pending=!0)},this.clear=function(t){var e=this.changes;return this.changes=0,e}}).call(r.prototype),e.RenderLoop=r})),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],(function(t,e,n){var i=t("../lib/oop"),r=t("../lib/dom"),o=t("../lib/lang"),s=t("../lib/event"),a=t("../lib/useragent"),l=t("../lib/event_emitter").EventEmitter,c=256,u="function"==typeof ResizeObserver,h=200,f=e.FontMetrics=function(t){this.el=r.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=r.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=r.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),t.appendChild(this.el),this.$measureNode.textContent=o.stringRepeat("X",c),this.$characterSize={width:0,height:0},u?this.$addObserver():this.checkForSizeChanges()};(function(){i.implement(this,l),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(t,e){t.width=t.height="auto",t.left=t.top="0px",t.visibility="hidden",t.position="absolute",t.whiteSpace="pre",a.isIE<8?t["font-family"]="inherit":t.font="inherit",t.overflow=e?"hidden":"visible"},this.checkForSizeChanges=function(t){if(void 0===t&&(t=this.$measureSizes()),t&&(this.$characterSize.width!==t.width||this.$characterSize.height!==t.height)){this.$measureNode.style.fontWeight="bold";var e=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=t,this.charSizes=Object.create(null),this.allowBoldFonts=e&&e.width===t.width&&e.height===t.height,this._emit("changeCharacterSize",{data:t})}},this.$addObserver=function(){var t=this;this.$observer=new window.ResizeObserver((function(e){t.checkForSizeChanges()})),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=s.onIdle((function e(){t.checkForSizeChanges(),s.onIdle(e,500)}),500)},this.setPolling=function(t){t?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(t){var e={height:(t||this.$measureNode).clientHeight,width:(t||this.$measureNode).clientWidth/c};return 0===e.width||0===e.height?null:e},this.$measureCharWidth=function(t){return this.$main.textContent=o.stringRepeat(t,c),this.$main.getBoundingClientRect().width/c},this.getCharacterWidth=function(t){var e=this.charSizes[t];return void 0===e&&(e=this.charSizes[t]=this.$measureCharWidth(t)/this.$characterSize.width),e},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function t(e){return e&&e.parentElement?(window.getComputedStyle(e).zoom||1)*t(e.parentElement):1},this.$initTransformMeasureNodes=function(){var t=function(t,e){return["div",{style:"position: absolute;top:"+t+"px;left:"+e+"px;"}]};this.els=r.buildDom([t(0,0),t(h,0),t(0,h),t(h,h)],this.el)},this.transformCoordinates=function(t,e){t&&(t=o(1/this.$getZoom(this.el),t));function n(t,e,n){var i=t[1]*e[0]-t[0]*e[1];return[(-e[1]*n[0]+e[0]*n[1])/i,(+t[1]*n[0]-t[0]*n[1])/i]}function i(t,e){return[t[0]-e[0],t[1]-e[1]]}function r(t,e){return[t[0]+e[0],t[1]+e[1]]}function o(t,e){return[t*e[0],t*e[1]]}function s(t){var e=t.getBoundingClientRect();return[e.left,e.top]}this.els||this.$initTransformMeasureNodes();var a=s(this.els[0]),l=s(this.els[1]),c=s(this.els[2]),u=s(this.els[3]),f=n(i(u,l),i(u,c),i(r(l,c),r(u,a))),p=o(1+f[0],i(l,a)),d=o(1+f[1],i(c,a));if(e){var g=e,m=f[0]*g[0]/h+f[1]*g[1]/h+1,v=r(o(g[0],p),o(g[1],d));return r(o(1/m/h,v),a)}var y=i(t,a),b=n(i(p,o(f[0],y)),i(d,o(f[1],y)),y);return o(h,b)}}).call(f.prototype)})),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=t("./lib/dom"),o=t("./config"),s=t("./layer/gutter").Gutter,a=t("./layer/marker").Marker,l=t("./layer/text").Text,c=t("./layer/cursor").Cursor,u=t("./scrollbar").HScrollBar,h=t("./scrollbar").VScrollBar,f=t("./renderloop").RenderLoop,p=t("./layer/font_metrics").FontMetrics,d=t("./lib/event_emitter").EventEmitter,g='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;padding: 0;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}',m=t("./lib/useragent"),v=m.isIE;r.importCssString(g,"ace_editor.css");var y=function(t,e){var n=this;this.container=t||r.createElement("div"),r.addCssClass(this.container,"ace_editor"),r.HI_DPI&&r.addCssClass(this.container,"ace_hidpi"),this.setTheme(e),this.$gutter=r.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=r.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=r.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new s(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var i=this.$textLayer=new l(this.content);this.canvas=i.element,this.$markerFront=new a(this.content),this.$cursorLayer=new c(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new u(this.container,this),this.scrollBarV.on("scroll",(function(t){n.$scrollAnimation||n.session.setScrollTop(t.data-n.scrollMargin.top)})),this.scrollBarH.on("scroll",(function(t){n.$scrollAnimation||n.session.setScrollLeft(t.data-n.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",(function(t){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",t)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!m.isIOS,this.$loop=new f(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),o.resetOptions(this),o._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,i.implement(this,d),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),r.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(t){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=t,t&&this.scrollMargin.top&&t.getScrollTop()<=0&&t.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(t),this.$markerBack.setSession(t),this.$markerFront.setSession(t),this.$gutterLayer.setSession(t),this.$textLayer.setSession(t),t&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(t,e,n){if(void 0===e&&(e=1/0),this.$changedLines?(this.$changedLines.firstRow>t&&(this.$changedLines.firstRow=t),this.$changedLines.lastRow<e&&(this.$changedLines.lastRow=e)):this.$changedLines={firstRow:t,lastRow:e},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(t){t?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(t,e,n,i){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=t?1:0;var r=this.container;i||(i=r.clientHeight||r.scrollHeight),n||(n=r.clientWidth||r.scrollWidth);var o=this.$updateCachedSize(t,e,n,i);if(!this.$size.scrollerHeight||!n&&!i)return this.resizing=0;t&&(this.$gutterLayer.$padding=null),t?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(t,e,n,i){i-=this.$extraHeight||0;var o=0,s=this.$size,a={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth};if(i&&(t||s.height!=i)&&(s.height=i,o|=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",o|=this.CHANGE_SCROLL),n&&(t||s.width!=n)){o|=this.CHANGE_SIZE,s.width=n,null==e&&(e=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=e,r.setStyle(this.scrollBarH.element.style,"left",e+"px"),r.setStyle(this.scroller.style,"left",e+this.margin.left+"px"),s.scrollerWidth=Math.max(0,n-e-this.scrollBarV.getWidth()-this.margin.h),r.setStyle(this.$gutter.style,"left",this.margin.left+"px");var l=this.scrollBarV.getWidth()+"px";r.setStyle(this.scrollBarH.element.style,"right",l),r.setStyle(this.scroller.style,"right",l),r.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||t)&&(o|=this.CHANGE_FULL)}return s.$dirty=!n||!i,o&&this._signal("resize",a),o},this.onGutterResize=function(t){var e=this.$showGutter?t:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var t=this.$size.scrollerWidth-2*this.$padding,e=Math.floor(t/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(t){this.setOption("animatedScroll",t)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(t){this.setOption("showInvisibles",t),this.session.$bidiHandler.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(t){this.setOption("displayIndentGuides",t)},this.setShowPrintMargin=function(t){this.setOption("showPrintMargin",t)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(t){this.setOption("printMarginColumn",t)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(t){return this.setOption("showGutter",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var t=r.createElement("div");t.className="ace_layer ace_print-margin-layer",this.$printMarginEl=r.createElement("div"),this.$printMarginEl.className="ace_print-margin",t.appendChild(this.$printMarginEl),this.content.insertBefore(t,this.content.firstChild)}var e=this.$printMarginEl.style;e.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",e.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var t=this.textarea.style,e=this.$composition;if(this.$keepTextAreaAtCursor||e){var n=this.$cursorLayer.$pixelPos;if(n){e&&e.markerRange&&(n=this.$cursorLayer.getPixelPosition(e.markerRange.start,!0));var i=this.layerConfig,o=n.top,s=n.left;o-=i.offset;var a=e&&e.useTextareaForIME?this.lineHeight:v?0:1;if(o<0||o>i.height-a)r.translate(this.textarea,0,0);else{var l=1,c=this.$size.height-a;if(e)if(e.useTextareaForIME){var u=this.textarea.value;l=this.characterWidth*this.session.$getStringScreenWidth(u)[0]}else o+=this.lineHeight+2;else o+=this.lineHeight;(s-=this.scrollLeft)>this.$size.scrollerWidth-l&&(s=this.$size.scrollerWidth-l),s+=this.gutterWidth+this.margin.left,r.setStyle(t,"height",a+"px"),r.setStyle(t,"width",l+"px"),r.translate(this.textarea,Math.min(s,this.$size.scrollerWidth-l),Math.min(o,c))}}}else r.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var t=this.layerConfig,e=t.lastRow;return this.session.documentToScreenRow(e,0)*t.lineHeight-this.session.getScrollTop()>t.height-t.lineHeight?e-1:e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(t){this.$padding=t,this.$textLayer.setPadding(t),this.$cursorLayer.setPadding(t),this.$markerFront.setPadding(t),this.$markerBack.setPadding(t),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(t,e,n,i){var r=this.scrollMargin;r.top=0|t,r.bottom=0|e,r.right=0|i,r.left=0|n,r.v=r.top+r.bottom,r.h=r.left+r.right,r.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-r.top),this.updateFull()},this.setMargin=function(t,e,n,i){var r=this.margin;r.top=0|t,r.bottom=0|e,r.right=0|i,r.left=0|n,r.v=r.top+r.bottom,r.h=r.left+r.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(t){this.setOption("hScrollBarAlwaysVisible",t)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(t){this.setOption("vScrollBarAlwaysVisible",t)},this.$updateScrollBarV=function(){var t=this.layerConfig.maxHeight,e=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(t-=(e-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>t-e&&(t=this.scrollTop+e,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(t+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(t,e){if(this.$changes&&(t|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(t||e)){if(this.$size.$dirty)return this.$changes|=t,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",t),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(t&this.CHANGE_FULL||t&this.CHANGE_SIZE||t&this.CHANGE_TEXT||t&this.CHANGE_LINES||t&this.CHANGE_SCROLL||t&this.CHANGE_H_SCROLL){if(t|=this.$computeLayerConfig()|this.$loop.clear(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var i=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;i>0&&(this.scrollTop=i,t|=this.CHANGE_SCROLL,t|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),t&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),r.translate(this.content,-this.scrollLeft,-n.offset);var o=n.width+2*this.$padding+"px",s=n.minHeight+"px";r.setStyle(this.content.style,"width",o),r.setStyle(this.content.style,"height",s)}if(t&this.CHANGE_H_SCROLL&&(r.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),t&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",t);if(t&this.CHANGE_SCROLL)return this.$changedLines=null,t&this.CHANGE_TEXT||t&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(t&this.CHANGE_GUTTER||t&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",t);t&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):t&this.CHANGE_LINES?(this.$updateLines()||t&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):t&this.CHANGE_TEXT||t&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(n):t&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),t&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender",t)}else this.$changes|=t},this.$autosize=function(){var t=this.session.getScreenLength()*this.lineHeight,e=this.$maxLines*this.lineHeight,n=Math.min(e,Math.max((this.$minLines||1)*this.lineHeight,t))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var i=!(n<=2*this.lineHeight)&&t>e;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var r=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,r,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var t=this.session,e=this.$size,n=e.height<=2*this.lineHeight,i=this.session.getScreenLength()*this.lineHeight,r=this.$getLongestLine(),o=!n&&(this.$hScrollBarAlwaysVisible||e.scrollerWidth-r-2*this.$padding<0),s=this.$horizScroll!==o;s&&(this.$horizScroll=o,this.scrollBarH.setVisible(o));var a=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var l=e.scrollerHeight+this.lineHeight,c=!this.$maxLines&&this.$scrollPastEnd?(e.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=c;var u=this.scrollMargin;this.session.setScrollTop(Math.max(-u.top,Math.min(this.scrollTop,i-e.scrollerHeight+u.bottom))),this.session.setScrollLeft(Math.max(-u.left,Math.min(this.scrollLeft,r+2*this.$padding-e.scrollerWidth+u.right)));var h=!n&&(this.$vScrollBarAlwaysVisible||e.scrollerHeight-i+c<0||this.scrollTop>u.top),f=a!==h;f&&(this.$vScroll=h,this.scrollBarV.setVisible(h));var p,d,g=this.scrollTop%this.lineHeight,m=Math.ceil(l/this.lineHeight)-1,v=Math.max(0,Math.round((this.scrollTop-g)/this.lineHeight)),y=v+m,b=this.lineHeight;v=t.screenToDocumentRow(v,0);var _=t.getFoldLine(v);_&&(v=_.start.row),p=t.documentToScreenRow(v,0),d=t.getRowLength(v)*b,y=Math.min(t.screenToDocumentRow(y,0),t.getLength()-1),l=e.scrollerHeight+t.getRowLength(y)*b+d,g=this.scrollTop-p*b;var w=0;return(this.layerConfig.width!=r||s)&&(w=this.CHANGE_H_SCROLL),(s||f)&&(w|=this.$updateCachedSize(!0,this.gutterWidth,e.width,e.height),this._signal("scrollbarVisibilityChanged"),f&&(r=this.$getLongestLine())),this.layerConfig={width:r,padding:this.$padding,firstRow:v,firstRowScreen:p,lastRow:y,lineHeight:b,characterWidth:this.characterWidth,minHeight:l,maxHeight:i,offset:g,gutterOffset:b?Math.max(0,Math.ceil((g+e.height-e.scrollerHeight)/b)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(r-this.$padding),w},this.$updateLines=function(){if(this.$changedLines){var t=this.$changedLines.firstRow,e=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(t>n.lastRow+1)&&!(e<n.firstRow))return e===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,t,e),!0)}},this.$getLongestLine=function(){var t=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(t+=1),this.$textLayer&&t>this.$textLayer.MAX_LINE_LENGTH&&(t=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(t*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(t,e){this.$gutterLayer.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){this.$gutterLayer.removeGutterDecoration(t,e)},this.updateBreakpoints=function(t){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(t){this.$gutterLayer.setAnnotations(t),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(t,e,n){this.scrollCursorIntoView(t,n),this.scrollCursorIntoView(e,n)},this.scrollCursorIntoView=function(t,e,n){if(0!==this.$size.scrollerHeight){var i=this.$cursorLayer.getPixelPosition(t),r=i.left,o=i.top,s=n&&n.top||0,a=n&&n.bottom||0,l=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;l+s>o?(e&&l+s>o+this.lineHeight&&(o-=e*this.$size.scrollerHeight),0===o&&(o=-this.scrollMargin.top),this.session.setScrollTop(o)):l+this.$size.scrollerHeight-a<o+this.lineHeight&&(e&&l+this.$size.scrollerHeight-a<o-this.lineHeight&&(o+=e*this.$size.scrollerHeight),this.session.setScrollTop(o+this.lineHeight+a-this.$size.scrollerHeight));var c=this.scrollLeft;c>r?(r<this.$padding+2*this.layerConfig.characterWidth&&(r=-this.scrollMargin.left),this.session.setScrollLeft(r)):c+this.$size.scrollerWidth<r+this.characterWidth?this.session.setScrollLeft(Math.round(r+this.characterWidth-this.$size.scrollerWidth)):c<=this.$padding&&r-c<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(t){this.session.setScrollTop(t*this.lineHeight)},this.alignCursor=function(t,e){"number"==typeof t&&(t={row:t,column:0});var n=this.$cursorLayer.getPixelPosition(t),i=this.$size.scrollerHeight-this.lineHeight,r=n.top-i*(e||0);return this.session.setScrollTop(r),r},this.STEPS=8,this.$calcSteps=function(t,e){var n,i,r=0,o=this.STEPS,s=[];for(r=0;r<o;++r)s.push((n=r/this.STEPS,i=t,(e-t)*(Math.pow(n-1,3)+1)+i));return s},this.scrollToLine=function(t,e,n,i){var r=this.$cursorLayer.getPixelPosition({row:t,column:0}).top;e&&(r-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(r),!1!==n&&this.animateScrolling(o,i)},this.animateScrolling=function(t,e){var n=this.scrollTop;if(this.$animatedScroll){var i=this;if(t!=n){if(this.$scrollAnimation){var r=this.$scrollAnimation.steps;if(r.length&&(t=r[0])==n)return}var o=i.$calcSteps(t,n);this.$scrollAnimation={from:t,to:n,steps:o},clearInterval(this.$timer),i.session.setScrollTop(o.shift()),i.session.$scrollTop=n,this.$timer=setInterval((function(){if(!i.session)return clearInterval(i.$timer);o.length?(i.session.setScrollTop(o.shift()),i.session.$scrollTop=n):null!=n?(i.session.$scrollTop=-1,i.session.setScrollTop(n),n=null):(i.$timer=clearInterval(i.$timer),i.$scrollAnimation=null,e&&e())}),10)}}},this.scrollToY=function(t){this.scrollTop!==t&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=t)},this.scrollToX=function(t){this.scrollLeft!==t&&(this.scrollLeft=t),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(t,e){this.session.setScrollTop(e),this.session.setScrollLeft(e)},this.scrollBy=function(t,e){e&&this.session.setScrollTop(this.session.getScrollTop()+e),t&&this.session.setScrollLeft(this.session.getScrollLeft()+t)},this.isScrollableBy=function(t,e){return e<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(e>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(t<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(t>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(t,e){var n;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([t,e]);t=i[1]-this.gutterWidth-this.margin.left,e=i[0]}else n=this.scroller.getBoundingClientRect();var r=t+this.scrollLeft-n.left-this.$padding,o=r/this.characterWidth,s=Math.floor((e+this.scrollTop-n.top)/this.lineHeight),a=this.$blockCursor?Math.floor(o):Math.round(o);return{row:s,column:a,side:o-a>0?1:-1,offsetX:r}},this.screenToTextCoordinates=function(t,e){var n;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([t,e]);t=i[1]-this.gutterWidth-this.margin.left,e=i[0]}else n=this.scroller.getBoundingClientRect();var r=t+this.scrollLeft-n.left-this.$padding,o=r/this.characterWidth,s=this.$blockCursor?Math.floor(o):Math.round(o),a=Math.floor((e+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(a,Math.max(s,0),r)},this.textToScreenCoordinates=function(t,e){var n=this.scroller.getBoundingClientRect(),i=this.session.documentToScreenPosition(t,e),r=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,t)?this.session.$bidiHandler.getPosLeft(i.column):Math.round(i.column*this.characterWidth)),o=i.row*this.lineHeight;return{pageX:n.left+r-this.scrollLeft,pageY:n.top+o-this.scrollTop}},this.visualizeFocus=function(){r.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){r.removeCssClass(this.container,"ace_focus")},this.showComposition=function(t){this.$composition=t,t.cssText||(t.cssText=this.textarea.style.cssText),void 0==t.useTextareaForIME&&(t.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(r.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):t.markerId=this.session.addMarker(t.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(t){var e=this.session.selection.cursor;this.addToken(t,"composition_placeholder",e.row,e.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),r.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var t=this.session.selection.cursor;this.removeExtraToken(t.row,t.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},this.addToken=function(t,e,n,i){var r=this.session;r.bgTokenizer.lines[n]=null;var o={type:e,value:t},s=r.getTokens(n);if(null==i)s.push(o);else for(var a=0,l=0;l<s.length;l++){var c=s[l];if(i<=(a+=c.value.length)){var u=c.value.length-(a-i),h=c.value.slice(0,u),f=c.value.slice(u);s.splice(l,1,{type:c.type,value:h},o,{type:c.type,value:f});break}}this.updateLines(n,n)},this.removeExtraToken=function(t,e){this.updateLines(t,t)},this.setTheme=function(t,e){var n=this;if(this.$themeId=t,n._dispatchEvent("themeChange",{theme:t}),t&&"string"!=typeof t)s(t);else{var i=t||this.$options.theme.initialValue;o.loadModule(["theme",i],s)}function s(i){if(n.$themeId!=t)return e&&e();if(!i||!i.cssClass)throw new Error("couldn't load module "+t+" or it didn't call define");i.$id&&(n.$themeId=i.$id),r.importCssString(i.cssText,i.cssClass,n.container),n.theme&&r.removeCssClass(n.container,n.theme.cssClass);var o="padding"in i?i.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&o!=n.$padding&&n.setPadding(o),n.$theme=i.cssClass,n.theme=i,r.addCssClass(n.container,i.cssClass),r.setCssClass(n.container,"ace_dark",i.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:i}),e&&e()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(t,e){r.setCssClass(this.container,t,!1!==e)},this.unsetStyle=function(t){r.removeCssClass(this.container,t)},this.setCursorStyle=function(t){r.setStyle(this.scroller.style,"cursor",t)},this.setMouseCursor=function(t){r.setStyle(this.scroller.style,"cursor",t)},this.attachToShadowRoot=function(){r.importCssString(g,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}).call(y.prototype),o.defineOptions(y.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(t){this.$textLayer.setShowInvisibles(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(t){"number"==typeof t&&(this.$printMarginColumn=t),this.$showPrintMargin=!!t,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(t){this.$gutter.style.display=t?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(t){r.setCssClass(this.$gutter,"ace_fade-fold-widgets",t)},initialValue:!1},showFoldWidgets:{set:function(t){this.$gutterLayer.setShowFoldWidgets(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(t){this.$textLayer.setDisplayIndentGuides(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(t){this.$gutterLayer.setHighlightGutterLine(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(t){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(t){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(t){"number"==typeof t&&(t+="px"),this.container.style.fontSize=t,this.updateFontSize()},initialValue:12},fontFamily:{set:function(t){this.container.style.fontFamily=t,this.updateFontSize()}},maxLines:{set:function(t){this.updateFull()}},minLines:{set:function(t){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(t){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(t){t=+t||0,this.$scrollPastEnd!=t&&(this.$scrollPastEnd=t,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(t){this.$gutterLayer.$fixedWidth=!!t,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(t){this.setTheme(t)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!m.isMobile&&!m.isIE}}),e.VirtualRenderer=y})),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],(function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("../lib/net"),o=t("../lib/event_emitter").EventEmitter,s=t("../config");function a(t){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(s.get("loadWorkerFromBlob")){var e=function(t){var e="importScripts('"+r.qualifyURL(t)+"');";try{return new Blob([e],{type:"application/javascript"})}catch(i){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return n.append(e),n.getBlob("application/javascript")}}(t),n=(window.URL||window.webkitURL).createObjectURL(e);return new Worker(n)}return new Worker(t)}var l=function(t){t.postMessage||(t=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=t,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){i.implement(this,o),this.$createWorkerFromOldConfig=function(e,n,i,r,o){if(t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),s.get("packaged")||!t.toUrl)r=r||s.moduleUrl(n,"worker");else{var l=this.$normalizePath;r=r||l(t.toUrl("ace/worker/worker.js",null,"_"));var c={};e.forEach((function(e){c[e]=l(t.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}return this.$worker=a(r),o&&this.send("importScripts",o),this.$worker.postMessage({init:!0,tlns:c,module:n,classname:i}),this.$worker},this.onMessage=function(t){var e=t.data;switch(e.type){case"event":this._signal(e.name,{data:e.data});break;case"call":var n=this.callbacks[e.id];n&&(n(e.data),delete this.callbacks[e.id]);break;case"error":this.reportError(e.data);break;case"log":window.console&&console.log&&console.log.apply(console,e.data)}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return r.qualifyURL(t)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(t,e){this.$worker.postMessage({command:t,args:e})},this.call=function(t,e,n){if(n){var i=this.callbackId++;this.callbacks[i]=n,e.push(i)}this.send(t,e)},this.emit=function(t,e){try{e.data&&e.data.err&&(e.data.err={message:e.data.err.message,stack:e.data.err.stack,code:e.data.err.code}),this.$worker.postMessage({event:t,data:{data:e.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call("setValue",[t.getValue()]),t.on("change",this.changeListener)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==t.action?this.deltaQueue.push(t.start,t.lines):this.deltaQueue.push(t.start,t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,t.length>50&&t.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:t}))}}).call(l.prototype);e.UIWorkerClient=function(t,e,n){var i=null,r=!1,a=Object.create(o),c=[],u=new l({messageBuffer:c,terminate:function(){},postMessage:function(t){c.push(t),i&&(r?setTimeout(h):h())}});u.setEmitSync=function(t){r=t};var h=function(){var t=c.shift();t.command?i[t.command].apply(i,t.args):t.event&&a._signal(t.event,t.data)};return a.postMessage=function(t){u.onMessage({data:t})},a.callback=function(t,e){this.postMessage({type:"call",id:e,data:t})},a.emit=function(t,e){this.postMessage({type:"event",name:t,data:e})},s.loadModule(["worker",e],(function(t){for(i=new t[n](a);c.length;)h()})),u},e.WorkerClient=l,e.createWorker=a})),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],(function(t,e,n){"use strict";var i=t("./range").Range,r=t("./lib/event_emitter").EventEmitter,o=t("./lib/oop"),s=function(t,e,n,i,r,o){var s=this;this.length=e,this.session=t,this.doc=t.getDocument(),this.mainClass=r,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=i,this.$onCursorChange=function(){setTimeout((function(){s.onCursorChange()}))},this.$pos=n;var a=t.getUndoManager().$undoStack||t.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),t.selection.on("changeCursor",this.$onCursorChange)};(function(){o.implement(this,r),this.setup=function(){var t=this,e=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=e.createAnchor(this.$pos.row,this.$pos.column);var r=this.pos;r.$insertRight=!0,r.detach(),r.markerId=n.addMarker(new i(r.row,r.column,r.row,r.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(n){var i=e.createAnchor(n.row,n.column);i.$insertRight=!0,i.detach(),t.others.push(i)})),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var t=this.session,e=this;this.othersActive=!0,this.others.forEach((function(n){n.markerId=t.addMarker(new i(n.row,n.column,n.row,n.column+e.length),e.othersClass,null,!1)}))}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var t=0;t<this.others.length;t++)this.session.removeMarker(this.others[t].markerId)}},this.onUpdate=function(t){if(this.$updating)return this.updateAnchors(t);var e=t;if(e.start.row===e.end.row&&e.start.row===this.pos.row){this.$updating=!0;var n="insert"===t.action?e.end.column-e.start.column:e.start.column-e.end.column,r=e.start.column>=this.pos.column&&e.start.column<=this.pos.column+this.length+1,o=e.start.column-this.pos.column;if(this.updateAnchors(t),r&&(this.length+=n),r&&!this.session.$fromUndo)if("insert"===t.action)for(var s=this.others.length-1;s>=0;s--){var a={row:(l=this.others[s]).row,column:l.column+o};this.doc.insertMergedLines(a,t.lines)}else if("remove"===t.action)for(s=this.others.length-1;s>=0;s--){var l;a={row:(l=this.others[s]).row,column:l.column+o};this.doc.remove(new i(a.row,a.column,a.row,a.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(t){this.pos.onChange(t);for(var e=this.others.length;e--;)this.others[e].onChange(t);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var t=this,e=this.session,n=function(n,r){e.removeMarker(n.markerId),n.markerId=e.addMarker(new i(n.row,n.column,n.row,n.column+t.length),r,null,!1)};n(this.pos,this.mainClass);for(var r=this.others.length;r--;)n(this.others[r],this.othersClass)}},this.onCursorChange=function(t){if(!this.$updating&&this.session){var e=this.session.selection.getCursor();e.row===this.pos.row&&e.column>=this.pos.column&&e.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",t)):(this.hideOtherMarkers(),this._emit("cursorLeave",t))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var t=this.session.getUndoManager(),e=(t.$undoStack||t.$undostack).length-this.$undoStackDepth,n=0;n<e;n++)t.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(s.prototype),e.PlaceHolder=s})),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(t,e,n){var i=t("../lib/event"),r=t("../lib/useragent");function o(t,e){return t.row==e.row&&t.column==e.column}e.onMouseDown=function(t){var e=t.domEvent,n=e.altKey,s=e.shiftKey,a=e.ctrlKey,l=t.getAccelKey(),c=t.getButton();if(a&&r.isMac&&(c=e.button),t.editor.inMultiSelectMode&&2==c)t.editor.textInput.onContextMenu(t.domEvent);else if(a||n||l){if(0===c){var u,h=t.editor,f=h.selection,p=h.inMultiSelectMode,d=t.getDocumentPosition(),g=f.getCursor(),m=t.inSelection()||f.isEmpty()&&o(d,g),v=t.x,y=t.y,b=h.session,_=h.renderer.pixelToScreenCoordinates(v,y),w=_;if(h.$mouseHandler.$enableJumpToDef)a&&n||l&&n?u=s?"block":"add":n&&h.$blockSelectEnabled&&(u="block");else if(l&&!n){if(u="add",!p&&s)return}else n&&h.$blockSelectEnabled&&(u="block");if(u&&r.isMac&&e.ctrlKey&&h.$mouseHandler.cancelContextMenu(),"add"==u){if(!p&&m)return;if(!p){var x=f.toOrientedRange();h.addSelectionMarker(x)}var k=f.rangeList.rangeAtPoint(d);h.inVirtualSelectionMode=!0,s&&(k=null,x=f.ranges[0]||x,h.removeSelectionMarker(x)),h.once("mouseup",(function(){var t=f.toOrientedRange();k&&t.isEmpty()&&o(k.cursor,t.cursor)?f.substractPoint(t.cursor):(s?f.substractPoint(x.cursor):x&&(h.removeSelectionMarker(x),f.addRange(x)),f.addRange(t)),h.inVirtualSelectionMode=!1}))}else if("block"==u){var S;t.stop(),h.inVirtualSelectionMode=!0;var A=[],E=function(){var t=h.renderer.pixelToScreenCoordinates(v,y),e=b.screenToDocumentPosition(t.row,t.column,t.offsetX);o(w,t)&&o(e,f.lead)||(w=t,h.selection.moveToPosition(e),h.renderer.scrollCursorIntoView(),h.removeSelectionMarkers(A),A=f.rectangularRangeBlock(w,_),h.$mouseHandler.$clickSelection&&1==A.length&&A[0].isEmpty()&&(A[0]=h.$mouseHandler.$clickSelection.clone()),A.forEach(h.addSelectionMarker,h),h.updateSelectionMarkers())};p&&!l?f.toSingleRange():!p&&l&&(S=f.toOrientedRange(),h.addSelectionMarker(S)),s?_=b.documentToScreenPosition(f.lead):f.moveToPosition(d),w={row:-1,column:-1};var T=E;i.capture(h.container,(function(t){v=t.clientX,y=t.clientY}),(function(t){E(),clearInterval(C),h.removeSelectionMarkers(A),A.length||(A=[f.toOrientedRange()]),S&&(h.removeSelectionMarker(S),f.toSingleRange(S));for(var e=0;e<A.length;e++)f.addRange(A[e]);h.inVirtualSelectionMode=!1,h.$mouseHandler.$clickSelection=null}));var C=setInterval((function(){T()}),20);return t.preventDefault()}}}else 0===c&&t.editor.inMultiSelectMode&&t.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],(function(t,e,n){e.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(t){t.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(t){t.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(t){t.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(t){t.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(t){t.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(t){t.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(t){t.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(t){t.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(t){t.multiSelect.rangeCount>1?t.multiSelect.joinSelections():t.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(t){t.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(t){t.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(t){t.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],e.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(t){t.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(t){return t&&t.inMultiSelectMode}}];var i=t("../keyboard/hash_handler").HashHandler;e.keyboardHandler=new i(e.multiSelectCommands)})),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],(function(t,e,n){var i=t("./range_list").RangeList,r=t("./range").Range,o=t("./selection").Selection,s=t("./mouse/multi_select_handler").onMouseDown,a=t("./lib/event"),l=t("./lib/lang"),c=t("./commands/multi_select_commands");e.commands=c.defaultCommands.concat(c.multiSelectCommands);var u=new(0,t("./search").Search);var h=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(h.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(t,e){if(t){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(t),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),e||this.fromOrientedRange(t);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}t.cursor||(t.cursor=t.end);var i=this.rangeList.add(t);return this.$onAddRange(t),i.length&&this.$onRemoveRange(i),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),e||this.fromOrientedRange(t)}},this.toSingleRange=function(t){t=t||this.ranges[0];var e=this.rangeList.removeAll();e.length&&this.$onRemoveRange(e),t&&this.fromOrientedRange(t)},this.substractPoint=function(t){var e=this.rangeList.substractPoint(t);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var t=this.rangeList.merge();t.length&&this.$onRemoveRange(t)},this.$onAddRange=function(t){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(t),this._signal("addRange",{range:t})},this.$onRemoveRange=function(t){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var e=this.rangeList.ranges.pop();t.push(e),this.rangeCount=0}for(var n=t.length;n--;){var i=this.ranges.indexOf(t[n]);this.ranges.splice(i,1)}this._signal("removeRange",{ranges:t}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(e=e||this.ranges[0])&&!e.isEqual(this.getRange())&&this.fromOrientedRange(e)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new i,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var t=this.ranges.length?this.ranges:[this.getRange()],e=[],n=0;n<t.length;n++){var i=t[n],o=i.start.row,s=i.end.row;if(o===s)e.push(i.clone());else{for(e.push(new r(o,i.start.column,o,this.session.getLine(o).length));++o<s;)e.push(this.getLineRange(o,!0));e.push(new r(s,0,s,i.end.column))}0!=n||this.isBackwards()||(e=e.reverse())}this.toSingleRange();for(n=e.length;n--;)this.addRange(e[n])},this.joinSelections=function(){var t=this.rangeList.ranges,e=t[t.length-1],n=r.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],n=r.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(n,e.cursor==e.start)}else{var i=this.session.documentToScreenPosition(this.cursor),o=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(i,o).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(t,e,n){var i=[],o=t.column<e.column;if(o)var s=t.column,a=e.column,l=t.offsetX,c=e.offsetX;else s=e.column,a=t.column,l=e.offsetX,c=t.offsetX;var u,h,f,p=t.row<e.row;if(p)var d=t.row,g=e.row;else d=e.row,g=t.row;s<0&&(s=0),d<0&&(d=0),d==g&&(n=!0);for(var m=d;m<=g;m++){var v=r.fromPoints(this.session.screenToDocumentPosition(m,s,l),this.session.screenToDocumentPosition(m,a,c));if(v.isEmpty()){if(u&&(h=v.end,f=u,h.row==f.row&&h.column==f.column))break;u=v.end}v.cursor=o?v.start:v.end,i.push(v)}if(p&&i.reverse(),!n){for(var y=i.length-1;i[y].isEmpty()&&y>0;)y--;if(y>0)for(var b=0;i[b].isEmpty();)b++;for(var _=y;_>=b;_--)i[_].isEmpty()&&i.splice(_,1)}return i}}.call(o.prototype);var f=t("./editor").Editor;function p(t){t.$multiselectOnSessionChange||(t.$onAddRange=t.$onAddRange.bind(t),t.$onRemoveRange=t.$onRemoveRange.bind(t),t.$onMultiSelect=t.$onMultiSelect.bind(t),t.$onSingleSelect=t.$onSingleSelect.bind(t),t.$multiselectOnSessionChange=e.onSessionChange.bind(t),t.$checkMultiselectChange=t.$checkMultiselectChange.bind(t),t.$multiselectOnSessionChange(t),t.on("changeSession",t.$multiselectOnSessionChange),t.on("mousedown",s),t.commands.addCommands(c.defaultCommands),function(t){if(!t.textInput)return;var e=t.textInput.getElement(),n=!1;function i(e){n&&(t.renderer.setMouseCursor(""),n=!1)}a.addListener(e,"keydown",(function(e){var r=18==e.keyCode&&!(e.ctrlKey||e.shiftKey||e.metaKey);t.$blockSelectEnabled&&r?n||(t.renderer.setMouseCursor("crosshair"),n=!0):n&&i()}),t),a.addListener(e,"keyup",i,t),a.addListener(e,"blur",i,t)}(t))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(t){t.cursor||(t.cursor=t.end);var e=this.getSelectionStyle();return t.marker=this.session.addMarker(t,"ace_selection",e),this.session.$selectionMarkers.push(t),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,t},this.removeSelectionMarker=function(t){if(t.marker){this.session.removeMarker(t.marker);var e=this.session.$selectionMarkers.indexOf(t);-1!=e&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(t){for(var e=this.session.$selectionMarkers,n=t.length;n--;){var i=t[n];if(i.marker){this.session.removeMarker(i.marker);var r=e.indexOf(i);-1!=r&&e.splice(r,1)}}this.session.selectionMarkerCount=e.length},this.$onAddRange=function(t){this.addSelectionMarker(t.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(t){this.removeSelectionMarkers(t.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(t){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(c.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(t){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(c.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(t){var e=t.command,n=t.editor;if(n.multiSelect){if(e.multiSelectAction)"forEach"==e.multiSelectAction?i=n.forEachSelection(e,t.args):"forEachLine"==e.multiSelectAction?i=n.forEachSelection(e,t.args,!0):"single"==e.multiSelectAction?(n.exitMultiSelectMode(),i=e.exec(n,t.args||{})):i=e.multiSelectAction(n,t.args||{});else{var i=e.exec(n,t.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return i}},this.forEachSelection=function(t,e,n){if(!this.inVirtualSelectionMode){var i,r=n&&n.keepOrder,s=1==n||n&&n.$byLines,a=this.session,l=this.selection,c=l.rangeList,u=(r?l:c).ranges;if(!u.length)return t.exec?t.exec(this,e||{}):t(this,e||{});var h=l._eventRegistry;l._eventRegistry={};var f=new o(a);this.inVirtualSelectionMode=!0;for(var p=u.length;p--;){if(s)for(;p>0&&u[p].start.row==u[p-1].end.row;)p--;f.fromOrientedRange(u[p]),f.index=p,this.selection=a.selection=f;var d=t.exec?t.exec(this,e||{}):t(this,e||{});i||void 0===d||(i=d),f.toOrientedRange(u[p])}f.detach(),this.selection=a.selection=l,this.inVirtualSelectionMode=!1,l._eventRegistry=h,l.mergeOverlappingRanges(),l.ranges[0]&&l.fromOrientedRange(l.ranges[0]);var g=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),g&&g.from==g.to&&this.renderer.animateScrolling(g.from),i}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var t="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var e=this.multiSelect.rangeList.ranges,n=[],i=0;i<e.length;i++)n.push(this.session.getTextRange(e[i]));var r=this.session.getDocument().getNewLineCharacter();(t=n.join(r)).length==(n.length-1)*r.length&&(t="")}else this.selection.isEmpty()||(t=this.session.getTextRange(this.getSelectionRange()));return t},this.$checkMultiselectChange=function(t,e){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&e==this.multiSelect.anchor)return;var i=e==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;i.row!=e.row||this.session.$clipPositionToDocument(i.row,i.column).column!=e.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(t,e,n){if((e=e||{}).needle=t||e.needle,void 0==e.needle){var i=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();e.needle=this.session.getTextRange(i)}this.$search.set(e);var r=this.$search.findAll(this.session);if(!r.length)return 0;var o=this.multiSelect;n||o.toSingleRange(r[0]);for(var s=r.length;s--;)o.addRange(r[s],!0);return i&&o.rangeList.rangeAtPoint(i.start)&&o.addRange(i,!0),r.length},this.selectMoreLines=function(t,e){var n=this.selection.toOrientedRange(),i=n.cursor==n.end,o=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(o.column=this.selection.$desiredColumn);var s,a=this.session.screenToDocumentPosition(o.row+t,o.column);if(n.isEmpty())c=a;else var l=this.session.documentToScreenPosition(i?n.end:n.start),c=this.session.screenToDocumentPosition(l.row+t,l.column);i?(s=r.fromPoints(a,c)).cursor=s.start:(s=r.fromPoints(c,a)).cursor=s.end;if(s.desiredColumn=o.column,this.selection.inMultiSelectMode){if(e)var u=n.cursor}else this.selection.addRange(n);this.selection.addRange(s),u&&this.selection.substractPoint(u)},this.transposeSelections=function(t){for(var e=this.session,n=e.multiSelect,i=n.ranges,r=i.length;r--;){if((a=i[r]).isEmpty()){var o=e.getWordRange(a.start.row,a.start.column);a.start.row=o.start.row,a.start.column=o.start.column,a.end.row=o.end.row,a.end.column=o.end.column}}n.mergeOverlappingRanges();var s=[];for(r=i.length;r--;){var a=i[r];s.unshift(e.getTextRange(a))}t<0?s.unshift(s.pop()):s.push(s.shift());for(r=i.length;r--;){o=(a=i[r]).clone();e.replace(a,s[r]),a.start.row=o.start.row,a.start.column=o.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(t,e,n){var i=this.session,r=i.multiSelect.toOrientedRange();if(!r.isEmpty()||((r=i.getWordRange(r.start.row,r.start.column)).cursor=-1==t?r.start:r.end,this.multiSelect.addRange(r),!n)){var o=i.getTextRange(r),s=function(t,e,n){return u.$options.wrap=!0,u.$options.needle=e,u.$options.backwards=-1==n,u.find(t)}(i,o,t);s&&(s.cursor=-1==t?s.start:s.end,this.session.unfold(s),this.multiSelect.addRange(s),this.renderer.scrollCursorIntoView(null,.5)),e&&this.multiSelect.substractPoint(r.cursor)}},this.alignCursors=function(){var t=this.session,e=t.multiSelect,n=e.ranges,i=-1,o=n.filter((function(t){if(t.cursor.row==i)return!0;i=t.cursor.row}));if(n.length&&o.length!=n.length-1){o.forEach((function(t){e.substractPoint(t.cursor)}));var s=0,a=1/0,c=n.map((function(e){var n=e.cursor,i=t.getLine(n.row).substr(n.column).search(/\S/g);return-1==i&&(i=0),n.column>s&&(s=n.column),i<a&&(a=i),i}));n.forEach((function(e,n){var i=e.cursor,o=s-i.column,u=c[n]-a;o>u?t.insert(i,l.stringRepeat(" ",o-u)):t.remove(new r(i.row,i.column,i.row,i.column-o+u)),e.start.column=e.end.column=s,e.start.row=e.end.row=i.row,e.cursor=e.end})),e.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var u=this.selection.getRange(),h=u.start.row,f=u.end.row,p=h==f;if(p){var d,g=this.session.getLength();do{d=this.session.getLine(f)}while(/[=:]/.test(d)&&++f<g);do{d=this.session.getLine(h)}while(/[=:]/.test(d)&&--h>0);h<0&&(h=0),f>=g&&(f=g-1)}var m=this.session.removeFullLines(h,f);m=this.$reAlignText(m,p),this.session.insert({row:h,column:0},m.join("\n")+"\n"),p||(u.start.column=0,u.end.column=m[m.length-1].length),this.selection.setRange(u)}},this.$reAlignText=function(t,e){var n,i,r,o=!0,s=!0;return t.map((function(t){var e=t.match(/(\s*)(.*?)(\s*)([=:].*)/);return e?null==n?(n=e[1].length,i=e[2].length,r=e[3].length,e):(n+i+r!=e[1].length+e[2].length+e[3].length&&(s=!1),n!=e[1].length&&(o=!1),n>e[1].length&&(n=e[1].length),i<e[2].length&&(i=e[2].length),r>e[3].length&&(r=e[3].length),e):[t]})).map(e?c:o?s?function(t){return t[2]?a(n+i-t[2].length)+t[2]+a(r)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}:c:function(t){return t[2]?a(n)+t[2]+a(r)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]});function a(t){return l.stringRepeat(" ",t)}function c(t){return t[2]?a(n)+t[2]+a(i-t[2].length+r)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}}}).call(f.prototype),e.onSessionChange=function(t){var e=t.session;e&&!e.multiSelect&&(e.$selectionMarkers=[],e.selection.$initRangeList(),e.multiSelect=e.selection),this.multiSelect=e&&e.multiSelect;var n=t.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),e&&(e.multiSelect.on("addRange",this.$onAddRange),e.multiSelect.on("removeRange",this.$onRemoveRange),e.multiSelect.on("multiSelect",this.$onMultiSelect),e.multiSelect.on("singleSelect",this.$onSingleSelect),e.multiSelect.lead.on("change",this.$checkMultiselectChange),e.multiSelect.anchor.on("change",this.$checkMultiselectChange)),e&&this.inMultiSelectMode!=e.selection.inMultiSelectMode&&(e.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},e.MultiSelect=p,t("./config").defineOptions(f.prototype,"editor",{enableMultiselect:{set:function(t){p(this),t?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",s)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",s))},value:!0},enableBlockSelect:{set:function(t){this.$blockSelectEnabled=t},value:!0}})})),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=t("../../range").Range,r=e.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(t,e,n){var i=t.getLine(n);return this.foldingStartMarker.test(i)?"start":"markbeginend"==e&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(t,e,n){return null},this.indentationBlock=function(t,e,n){var r=/\S/,o=t.getLine(e),s=o.search(r);if(-1!=s){for(var a=n||o.length,l=t.getLength(),c=e,u=e;++e<l;){var h=t.getLine(e).search(r);if(-1!=h){if(h<=s){var f=t.getTokenAt(e,0);if(!f||"string"!==f.type)break}u=e}}if(u>c){var p=t.getLine(u).length;return new i(c,a,u,p)}}},this.openingBracketBlock=function(t,e,n,r,o){var s={row:n,column:r+1},a=t.$findClosingBracket(e,s,o);if(a){var l=t.foldWidgets[a.row];return null==l&&(l=t.getFoldWidget(a.row)),"start"==l&&a.row>s.row&&(a.row--,a.column=t.getLine(a.row).length),i.fromPoints(s,a)}},this.closingBracketBlock=function(t,e,n,r,o){var s={row:n,column:r},a=t.$findOpeningBracket(e,s);if(a)return a.column++,s.column--,i.fromPoints(a,s)}}).call(r.prototype)})),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";e.isDark=!1,e.cssClass="ace-tm",e.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',e.$id="ace/theme/textmate",t("../lib/dom").importCssString(e.cssText,e.cssClass)})),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],(function(t,e,n){"use strict";var i=t("./lib/dom");function r(t){this.session=t,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(t){var e;return e=this.lineWidgets&&this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0,this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.$getWidgetScreenLength=function(){var t=0;return this.lineWidgets.forEach((function(e){e&&e.rowCount&&!e.hidden&&(t+=e.rowCount)})),t},this.$onChangeEditor=function(t){this.attach(t.editor)},this.attach=function(t){t&&t.widgetManager&&t.widgetManager!=this&&t.widgetManager.detach(),this.editor!=t&&(this.detach(),this.editor=t,t&&(t.widgetManager=this,t.renderer.on("beforeRender",this.measureWidgets),t.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(t){var e=this.editor;if(e){this.editor=null,e.widgetManager=null,e.renderer.off("beforeRender",this.measureWidgets),e.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach((function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))}))}},this.updateOnFold=function(t,e){var n=e.lineWidgets;if(n&&t.action){for(var i=t.data,r=i.start.row,o=i.end.row,s="add"==t.action,a=r+1;a<o;a++)n[a]&&(n[a].hidden=s);n[o]&&(s?n[r]?n[o].hidden=s:n[r]=n[o]:(n[r]==n[o]&&(n[r]=void 0),n[o].hidden=s))}},this.updateOnChange=function(t){var e=this.session.lineWidgets;if(e){var n=t.start.row,i=t.end.row-n;if(0===i);else if("remove"==t.action){var r=e.splice(n+1,i);!e[n]&&r[r.length-1]&&(e[n]=r.pop()),r.forEach((function(t){t&&this.removeLineWidget(t)}),this),this.$updateRows()}else{var o=new Array(i);e[n]&&null!=e[n].column&&t.start.column>e[n].column&&n++,o.unshift(n,0),e.splice.apply(e,o),this.$updateRows()}}},this.$updateRows=function(){var t=this.session.lineWidgets;if(t){var e=!0;t.forEach((function(t,n){if(t)for(e=!1,t.row=n;t.$oldWidget;)t.$oldWidget.row=n,t=t.$oldWidget})),e&&(this.session.lineWidgets=null)}},this.$registerLineWidget=function(t){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var e=this.session.lineWidgets[t.row];return e&&(t.$oldWidget=e,e.el&&e.el.parentNode&&(e.el.parentNode.removeChild(e.el),e._inDocument=!1)),this.session.lineWidgets[t.row]=t,t},this.addLineWidget=function(t){if(this.$registerLineWidget(t),t.session=this.session,!this.editor)return t;var e=this.editor.renderer;t.html&&!t.el&&(t.el=i.createElement("div"),t.el.innerHTML=t.html),t.el&&(i.addCssClass(t.el,"ace_lineWidgetContainer"),t.el.style.position="absolute",t.el.style.zIndex=5,e.container.appendChild(t.el),t._inDocument=!0,t.coverGutter||(t.el.style.zIndex=3),null==t.pixelHeight&&(t.pixelHeight=t.el.offsetHeight)),null==t.rowCount&&(t.rowCount=t.pixelHeight/e.layerConfig.lineHeight);var n=this.session.getFoldAt(t.row,0);if(t.$fold=n,n){var r=this.session.lineWidgets;t.row!=n.end.row||r[n.start.row]?t.hidden=!0:r[n.start.row]=t}return this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows(),this.renderWidgets(null,e),this.onWidgetChanged(t),t},this.removeLineWidget=function(t){if(t._inDocument=!1,t.session=null,t.el&&t.el.parentNode&&t.el.parentNode.removeChild(t.el),t.editor&&t.editor.destroy)try{t.editor.destroy()}catch(n){}if(this.session.lineWidgets){var e=this.session.lineWidgets[t.row];if(e==t)this.session.lineWidgets[t.row]=t.$oldWidget,t.$oldWidget&&this.onWidgetChanged(t.$oldWidget);else for(;e;){if(e.$oldWidget==t){e.$oldWidget=t.$oldWidget;break}e=e.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(t){for(var e=this.session.lineWidgets,n=e&&e[t],i=[];n;)i.push(n),n=n.$oldWidget;return i},this.onWidgetChanged=function(t){this.session._changedWidgets.push(t),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(t,e){var n=this.session._changedWidgets,i=e.layerConfig;if(n&&n.length){for(var r=1/0,o=0;o<n.length;o++){var s=n[o];if(s&&s.el&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,e.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/i.characterWidth));var a=s.h/i.lineHeight;s.coverLine&&(a-=this.session.getRowLineCount(s.row))<0&&(a=0),s.rowCount!=a&&(s.rowCount=a,s.row<r&&(r=s.row))}}r!=1/0&&(this.session._emit("changeFold",{data:{start:{row:r}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(t,e){var n=e.layerConfig,i=this.session.lineWidgets;if(i){for(var r=Math.min(this.firstRow,n.firstRow),o=Math.max(this.lastRow,n.lastRow,i.length);r>0&&!i[r];)r--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,e.$cursorLayer.config=n;for(var s=r;s<=o;s++){var a=i[s];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,e.container.appendChild(a.el));var l=e.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;a.coverLine||(l+=n.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=l-n.offset+"px";var c=a.coverGutter?0:e.gutterWidth;a.fixedWidth||(c-=e.scrollLeft),a.el.style.left=c+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=n.width+2*n.padding+"px"),a.fixedWidth?a.el.style.right=e.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}).call(r.prototype),e.LineWidgets=r})),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],(function(t,e,n){"use strict";var i=t("../line_widgets").LineWidgets,r=t("../lib/dom"),o=t("../range").Range;e.showErrorMarker=function(t,e){var n=t.session;n.widgetManager||(n.widgetManager=new i(n),n.widgetManager.attach(t));var s=t.getCursorPosition(),a=s.row,l=n.widgetManager.getWidgetsAtRow(a).filter((function(t){return"errorMarker"==t.type}))[0];l?l.destroy():a-=e;var c,u=function(t,e,n){var i=t.getAnnotations().sort(o.comparePoints);if(i.length){var r=function(t,e,n){for(var i=0,r=t.length-1;i<=r;){var o=i+r>>1,s=n(e,t[o]);if(s>0)i=o+1;else{if(!(s<0))return o;r=o-1}}return-(i+1)}(i,{row:e,column:-1},o.comparePoints);r<0&&(r=-r-1),r>=i.length?r=n>0?0:i.length-1:0===r&&n<0&&(r=i.length-1);var s=i[r];if(s&&n){if(s.row===e){do{s=i[r+=n]}while(s&&s.row===e);if(!s)return i.slice()}var a=[];e=s.row;do{a[n<0?"unshift":"push"](s),s=i[r+=n]}while(s&&s.row==e);return a.length&&a}}}(n,a,e);if(u){var h=u[0];s.column=(h.pos&&"number"!=typeof h.column?h.pos.sc:h.column)||0,s.row=h.row,c=t.renderer.$gutterLayer.$annotations[s.row]}else{if(l)return;c={text:["Looks good!"],className:"ace_ok"}}t.session.unfold(s.row),t.selection.moveToPosition(s);var f={row:s.row,fixedWidth:!0,coverGutter:!0,el:r.createElement("div"),type:"errorMarker"},p=f.el.appendChild(r.createElement("div")),d=f.el.appendChild(r.createElement("div"));d.className="error_widget_arrow "+c.className;var g=t.renderer.$cursorLayer.getPixelPosition(s).left;d.style.left=g+t.renderer.gutterWidth-5+"px",f.el.className="error_widget_wrapper",p.className="error_widget "+c.className,p.innerHTML=c.text.join("<br>"),p.appendChild(r.createElement("div"));var m=function(t,e,n){if(0===e&&("esc"===n||"return"===n))return f.destroy(),{command:"null"}};f.destroy=function(){t.$mouseHandler.isMousePressed||(t.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(f),t.off("changeSelection",f.destroy),t.off("changeSession",f.destroy),t.off("mouseup",f.destroy),t.off("change",f.destroy))},t.keyBinding.addKeyboardHandler(m),t.on("changeSelection",f.destroy),t.on("changeSession",f.destroy),t.on("mouseup",f.destroy),t.on("change",f.destroy),t.session.widgetManager.addLineWidget(f),f.el.onmousedown=t.focus.bind(t),t.renderer.scrollCursorIntoView(null,.5,{bottom:f.el.offsetHeight})},r.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")})),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],(function(t,e,i){"use strict";t("./lib/fixoldbrowsers");var r=t("./lib/dom"),o=t("./lib/event"),s=t("./range").Range,a=t("./editor").Editor,l=t("./edit_session").EditSession,c=t("./undomanager").UndoManager,u=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),e.config=t("./config"),e.require=t,e.define=n(14),e.edit=function(t,n){if("string"==typeof t){var i=t;if(!(t=document.getElementById(i)))throw new Error("ace.edit can't find div #"+i)}if(t&&t.env&&t.env.editor instanceof a)return t.env.editor;var s="";if(t&&/input|textarea/i.test(t.tagName)){var l=t;s=l.value,t=r.createElement("pre"),l.parentNode.replaceChild(t,l)}else t&&(s=t.textContent,t.innerHTML="");var c=e.createEditSession(s),h=new a(new u(t),c,n),f={document:c,editor:h,onResize:h.resize.bind(h,null)};return l&&(f.textarea=l),o.addListener(window,"resize",f.onResize),h.on("destroy",(function(){o.removeListener(window,"resize",f.onResize),f.editor.container.env=null})),h.container.env=h.env=f,h},e.createEditSession=function(t,e){var n=new l(t,e);return n.setUndoManager(new c),n},e.Range=s,e.Editor=a,e.EditSession=l,e.UndoManager=c,e.VirtualRenderer=u,e.version=e.config.version})),ace.require(["ace/ace"],(function(e){for(var n in e&&(e.config.init(!0),e.define=ace.define),window.ace||(window.ace=e),e)e.hasOwnProperty(n)&&(window.ace[n]=e[n]);window.ace.default=window.ace,t&&(t.exports=window.ace)}))}).call(this,n(4)(t))},function(t,e,n){"use strict";t.exports=n(29)},function(t,e,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(t,e){for(var n,a,l=s(t),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))r.call(n,u)&&(l[u]=n[u]);if(i){a=i(n);for(var h=0;h<a.length;h++)o.call(n,a[h])&&(l[a[h]]=n[a[h]])}}return l}},function(t,e,n){t.exports=n(32)()},function(t,e,n){"use strict";var i=n(7),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return i.isMemo(t)?s:a[t.$$typeof]||r}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[i.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,n,i){if("string"!==typeof n){if(d){var r=p(n);r&&r!==d&&t(e,r,i)}var s=u(n);h&&(s=s.concat(h(n)));for(var a=l(e),g=l(n),m=0;m<s.length;++m){var v=s[m];if(!o[v]&&(!i||!i[v])&&(!g||!g[v])&&(!a||!a[v])){var y=f(n,v);try{c(e,v,y)}catch(b){}}}}return e}},function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(l){r=!0,o=l}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return p}));var i=n(0),r=n.n(i),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=r.a.createContext&&r.a.createContext(o),a=function(){return(a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},l=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};function c(t){return t&&t.map((function(t,e){return r.a.createElement(t.tag,a({key:e},t.attr),c(t.child))}))}function u(t){return function(e){return r.a.createElement(h,a({attr:a({},t.attr)},e),c(t.child))}}function h(t){var e=function(e){var n,i=t.attr,o=t.size,s=t.title,c=l(t,["attr","size","title"]),u=o||e.size||"1em";return e.className&&(n=e.className),t.className&&(n=(n?n+" ":"")+t.className),r.a.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,c,{className:n,style:a(a({color:t.color||e.color},e.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),s&&r.a.createElement("title",null,s),t.children)};return void 0!==s?r.a.createElement(s.Consumer,null,(function(t){return e(t)})):e(o)}function f(t){return u({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M327.71 130.93L184 39 32 144v336l152.29-98.93L328 473l152-105V32zM312 421l-112-72V91l112 72z"}}]})(t)}function p(t){return u({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 428L339.92 303.9a160.48 160.48 0 0030.72-94.58C370.64 120.37 298.27 48 209.32 48S48 120.37 48 209.32s72.37 161.32 161.32 161.32a160.48 160.48 0 0094.58-30.72L428 464zM209.32 319.69a110.38 110.38 0 11110.37-110.37 110.5 110.5 0 01-110.37 110.37z"}}]})(t)}},function(t,e,n){"use strict";var i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,r=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){return i.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}));e.a=r},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){(function(t,n){var i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",h="[object Map]",f="[object Number]",p="[object Object]",d="[object Promise]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object Symbol]",b="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",x=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[o]=S[s]=S[_]=S[a]=S[w]=S[l]=S[c]=S[u]=S[h]=S[f]=S[p]=S[g]=S[m]=S[v]=S[b]=!1;var A="object"==typeof t&&t&&t.Object===Object&&t,E="object"==typeof self&&self&&self.Object===Object&&self,T=A||E||Function("return this")(),C=e&&!e.nodeType&&e,M=C&&"object"==typeof n&&n&&!n.nodeType&&n,L=M&&M.exports===C,R=L&&A.process,O=function(){try{return R&&R.binding&&R.binding("util")}catch(t){}}(),I=O&&O.isTypedArray;function P(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function N(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function D(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var j,z,$=Array.prototype,F=Function.prototype,B=Object.prototype,H=T["__core-js_shared__"],U=F.toString,G=B.hasOwnProperty,V=function(){var t=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),W=B.toString,q=RegExp("^"+U.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=L?T.Buffer:void 0,Y=T.Symbol,X=T.Uint8Array,Z=B.propertyIsEnumerable,J=$.splice,Q=Y?Y.toStringTag:void 0,tt=Object.getOwnPropertySymbols,et=K?K.isBuffer:void 0,nt=(j=Object.keys,z=Object,function(t){return j(z(t))}),it=Rt(T,"DataView"),rt=Rt(T,"Map"),ot=Rt(T,"Promise"),st=Rt(T,"Set"),at=Rt(T,"WeakMap"),lt=Rt(Object,"create"),ct=Nt(it),ut=Nt(rt),ht=Nt(ot),ft=Nt(st),pt=Nt(at),dt=Y?Y.prototype:void 0,gt=dt?dt.valueOf:void 0;function mt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function vt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function yt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function bt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new yt;++e<n;)this.add(t[e])}function _t(t){var e=this.__data__=new vt(t);this.size=e.size}function wt(t,e){var n=zt(t),i=!n&&jt(t),r=!n&&!i&&$t(t),o=!n&&!i&&!r&&Gt(t),s=n||i||r||o,a=s?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=a.length;for(var c in t)!e&&!G.call(t,c)||s&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Pt(c,l))||a.push(c);return a}function xt(t,e){for(var n=t.length;n--;)if(Dt(t[n][0],e))return n;return-1}function kt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Q&&Q in Object(t)?function(t){var e=G.call(t,Q),n=t[Q];try{t[Q]=void 0;var i=!0}catch(o){}var r=W.call(t);i&&(e?t[Q]=n:delete t[Q]);return r}(t):function(t){return W.call(t)}(t)}function St(t){return Ut(t)&&kt(t)==o}function At(t,e,n,i,r){return t===e||(null==t||null==e||!Ut(t)&&!Ut(e)?t!==t&&e!==e:function(t,e,n,i,r,u){var d=zt(t),b=zt(e),x=d?s:It(t),k=b?s:It(e),S=(x=x==o?p:x)==p,A=(k=k==o?p:k)==p,E=x==k;if(E&&$t(t)){if(!$t(e))return!1;d=!0,S=!1}if(E&&!S)return u||(u=new _t),d||Gt(t)?Ct(t,e,n,i,r,u):function(t,e,n,i,r,o,s){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!o(new X(t),new X(e)));case a:case l:case f:return Dt(+t,+e);case c:return t.name==e.name&&t.message==e.message;case g:case v:return t==e+"";case h:var u=N;case m:var p=1&i;if(u||(u=D),t.size!=e.size&&!p)return!1;var d=s.get(t);if(d)return d==e;i|=2,s.set(t,e);var b=Ct(u(t),u(e),i,r,o,s);return s.delete(t),b;case y:if(gt)return gt.call(t)==gt.call(e)}return!1}(t,e,x,n,i,r,u);if(!(1&n)){var T=S&&G.call(t,"__wrapped__"),C=A&&G.call(e,"__wrapped__");if(T||C){var M=T?t.value():t,L=C?e.value():e;return u||(u=new _t),r(M,L,n,i,u)}}if(!E)return!1;return u||(u=new _t),function(t,e,n,i,r,o){var s=1&n,a=Mt(t),l=a.length,c=Mt(e).length;if(l!=c&&!s)return!1;var u=l;for(;u--;){var h=a[u];if(!(s?h in e:G.call(e,h)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var p=!0;o.set(t,e),o.set(e,t);var d=s;for(;++u<l;){var g=t[h=a[u]],m=e[h];if(i)var v=s?i(m,g,h,e,t,o):i(g,m,h,t,e,o);if(!(void 0===v?g===m||r(g,m,n,i,o):v)){p=!1;break}d||(d="constructor"==h)}if(p&&!d){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,i,r,u)}(t,e,n,i,At,r))}function Et(t){return!(!Ht(t)||function(t){return!!V&&V in t}(t))&&(Ft(t)?q:x).test(Nt(t))}function Tt(t){if(!function(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||B;return t===n}(t))return nt(t);var e=[];for(var n in Object(t))G.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ct(t,e,n,i,r,o){var s=1&n,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var u=-1,h=!0,f=2&n?new bt:void 0;for(o.set(t,e),o.set(e,t);++u<a;){var p=t[u],d=e[u];if(i)var g=s?i(d,p,u,e,t,o):i(p,d,u,t,e,o);if(void 0!==g){if(g)continue;h=!1;break}if(f){if(!P(e,(function(t,e){if(s=e,!f.has(s)&&(p===t||r(p,t,n,i,o)))return f.push(e);var s}))){h=!1;break}}else if(p!==d&&!r(p,d,n,i,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function Mt(t){return function(t,e,n){var i=e(t);return zt(t)?i:function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}(i,n(t))}(t,Vt,Ot)}function Lt(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Rt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Et(n)?n:void 0}mt.prototype.clear=function(){this.__data__=lt?lt(null):{},this.size=0},mt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mt.prototype.get=function(t){var e=this.__data__;if(lt){var n=e[t];return n===i?void 0:n}return G.call(e,t)?e[t]:void 0},mt.prototype.has=function(t){var e=this.__data__;return lt?void 0!==e[t]:G.call(e,t)},mt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=lt&&void 0===e?i:e,this},vt.prototype.clear=function(){this.__data__=[],this.size=0},vt.prototype.delete=function(t){var e=this.__data__,n=xt(e,t);return!(n<0)&&(n==e.length-1?e.pop():J.call(e,n,1),--this.size,!0)},vt.prototype.get=function(t){var e=this.__data__,n=xt(e,t);return n<0?void 0:e[n][1]},vt.prototype.has=function(t){return xt(this.__data__,t)>-1},vt.prototype.set=function(t,e){var n=this.__data__,i=xt(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},yt.prototype.clear=function(){this.size=0,this.__data__={hash:new mt,map:new(rt||vt),string:new mt}},yt.prototype.delete=function(t){var e=Lt(this,t).delete(t);return this.size-=e?1:0,e},yt.prototype.get=function(t){return Lt(this,t).get(t)},yt.prototype.has=function(t){return Lt(this,t).has(t)},yt.prototype.set=function(t,e){var n=Lt(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},bt.prototype.add=bt.prototype.push=function(t){return this.__data__.set(t,i),this},bt.prototype.has=function(t){return this.__data__.has(t)},_t.prototype.clear=function(){this.__data__=new vt,this.size=0},_t.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},_t.prototype.get=function(t){return this.__data__.get(t)},_t.prototype.has=function(t){return this.__data__.has(t)},_t.prototype.set=function(t,e){var n=this.__data__;if(n instanceof vt){var i=n.__data__;if(!rt||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new yt(i)}return n.set(t,e),this.size=n.size,this};var Ot=tt?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}(tt(t),(function(e){return Z.call(t,e)})))}:function(){return[]},It=kt;function Pt(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||k.test(t))&&t>-1&&t%1==0&&t<e}function Nt(t){if(null!=t){try{return U.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Dt(t,e){return t===e||t!==t&&e!==e}(it&&It(new it(new ArrayBuffer(1)))!=w||rt&&It(new rt)!=h||ot&&It(ot.resolve())!=d||st&&It(new st)!=m||at&&It(new at)!=b)&&(It=function(t){var e=kt(t),n=e==p?t.constructor:void 0,i=n?Nt(n):"";if(i)switch(i){case ct:return w;case ut:return h;case ht:return d;case ft:return m;case pt:return b}return e});var jt=St(function(){return arguments}())?St:function(t){return Ut(t)&&G.call(t,"callee")&&!Z.call(t,"callee")},zt=Array.isArray;var $t=et||function(){return!1};function Ft(t){if(!Ht(t))return!1;var e=kt(t);return e==u||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Bt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}function Ht(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ut(t){return null!=t&&"object"==typeof t}var Gt=I?function(t){return function(e){return t(e)}}(I):function(t){return Ut(t)&&Bt(t.length)&&!!S[kt(t)]};function Vt(t){return null!=(e=t)&&Bt(e.length)&&!Ft(e)?wt(t):Tt(t);var e}n.exports=function(t,e){return At(t,e)}}).call(this,n(5),n(4)(t))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.getAceInstance=e.debounce=e.editorEvents=e.editorOptions=void 0;e.editorOptions=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"];e.editorEvents=["onChange","onFocus","onInput","onBlur","onCopy","onPaste","onSelectionChange","onCursorChange","onScroll","handleOptions","updateRef"];e.getAceInstance=function(){var e;return"undefined"===typeof window?(t.window={},e=n(6),delete t.window):window.ace?(e=window.ace).acequire=window.ace.require||window.ace.acequire:e=n(6),e};e.debounce=function(t,e){var n=null;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout((function(){t.apply(i,r)}),e)}}}).call(this,n(5))},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(16),s=o.getAceInstance(),a=n(6),l=n(35),c=n(9),u=n(0),h=n(15),f=n(36),p=function(t){function e(e){var n=t.call(this,e)||this;return o.editorEvents.forEach((function(t){n[t]=n[t].bind(n)})),n.debounce=o.debounce,n}return i(e,t),e.prototype.isInShadow=function(t){for(var e=t&&t.parentNode;e;){if("[object ShadowRoot]"===e.toString())return!0;e=e.parentNode}return!1},e.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.className,i=e.onBeforeLoad,r=e.mode,a=e.focus,c=e.theme,u=e.fontSize,h=e.value,p=e.defaultValue,d=e.cursorStart,g=e.showGutter,m=e.wrapEnabled,v=e.showPrintMargin,y=e.scrollMargin,b=void 0===y?[0,0,0,0]:y,_=e.keyboardHandler,w=e.onLoad,x=e.commands,k=e.annotations,S=e.markers,A=e.splits;this.editor=s.edit(this.refEditor),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.setTheme("ace/theme/"+c),i&&i(s);var E=Object.keys(this.props.editorProps),T=new l.Split(this.editor.container,"ace/theme/"+c,A);this.editor.env.split=T,this.splitEditor=T.getEditor(0),this.split=T,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);var C=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),T.forEach((function(e,n){for(var i=0;i<E.length;i++)e[E[i]]=t.props.editorProps[E[i]];var a=f(p,n),l=f(h,n,"");e.session.setUndoManager(new s.UndoManager),e.setTheme("ace/theme/"+c),e.renderer.setScrollMargin(b[0],b[1],b[2],b[3]),e.getSession().setMode("ace/mode/"+r),e.setFontSize(u),e.renderer.setShowGutter(g),e.getSession().setUseWrapMode(m),e.setShowPrintMargin(v),e.on("focus",t.onFocus),e.on("blur",t.onBlur),e.on("input",t.onInput),e.on("copy",t.onCopy),e.on("paste",t.onPaste),e.on("change",t.onChange),e.getSession().selection.on("changeSelection",t.onSelectionChange),e.getSession().selection.on("changeCursor",t.onCursorChange),e.session.on("changeScrollTop",t.onScroll),e.setValue(void 0===a?l:a,d);var y=f(k,n,[]),w=f(S,n,[]);e.getSession().setAnnotations(y),w&&w.length>0&&t.handleMarkers(w,e);for(i=0;i<o.editorOptions.length;i++){var A=o.editorOptions[i];C.hasOwnProperty(A)?e.setOption(A,t.props[A]):t.props[A]&&console.warn("ReaceAce: editor option "+A+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")}t.handleOptions(t.props,e),Array.isArray(x)&&x.forEach((function(t){"string"===typeof t.exec?e.commands.bindKey(t.bindKey,t.exec):e.commands.addCommand(t)})),_&&e.setKeyboardHandler("ace/keyboard/"+_)})),n&&(this.refEditor.className+=" "+n),a&&this.splitEditor.focus();var M=this.editor.env.split;M.setOrientation("below"===this.props.orientation?M.BELOW:M.BESIDE),M.resize(!0),w&&w(M)},e.prototype.componentDidUpdate=function(t){var e=this,n=t,i=this.props,r=this.editor.env.split;if(i.splits!==n.splits&&r.setSplits(i.splits),i.orientation!==n.orientation&&r.setOrientation("below"===i.orientation?r.BELOW:r.BESIDE),r.forEach((function(t,r){i.mode!==n.mode&&t.getSession().setMode("ace/mode/"+i.mode),i.keyboardHandler!==n.keyboardHandler&&(i.keyboardHandler?t.setKeyboardHandler("ace/keyboard/"+i.keyboardHandler):t.setKeyboardHandler(null)),i.fontSize!==n.fontSize&&t.setFontSize(i.fontSize),i.wrapEnabled!==n.wrapEnabled&&t.getSession().setUseWrapMode(i.wrapEnabled),i.showPrintMargin!==n.showPrintMargin&&t.setShowPrintMargin(i.showPrintMargin),i.showGutter!==n.showGutter&&t.renderer.setShowGutter(i.showGutter);for(var s=0;s<o.editorOptions.length;s++){var a=o.editorOptions[s];i[a]!==n[a]&&t.setOption(a,i[a])}h(i.setOptions,n.setOptions)||e.handleOptions(i,t);var l=f(i.value,r,"");if(t.getValue()!==l){e.silent=!0;var c=t.session.selection.toJSON();t.setValue(l,i.cursorStart),t.session.selection.fromJSON(c),e.silent=!1}var u=f(i.annotations,r,[]),p=f(n.annotations,r,[]);h(u,p)||t.getSession().setAnnotations(u);var d=f(i.markers,r,[]),g=f(n.markers,r,[]);!h(d,g)&&Array.isArray(d)&&e.handleMarkers(d,t)})),i.className!==n.className){var s=this.refEditor.className.trim().split(" ");n.className.trim().split(" ").forEach((function(t){var e=s.indexOf(t);s.splice(e,1)})),this.refEditor.className=" "+i.className+" "+s.join(" ")}i.theme!==n.theme&&r.setTheme("ace/theme/"+i.theme),i.focus&&!n.focus&&this.splitEditor.focus(),i.height===this.props.height&&i.width===this.props.width||this.editor.resize()},e.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},e.prototype.onChange=function(t){if(this.props.onChange&&!this.silent){var e=[];this.editor.env.split.forEach((function(t){e.push(t.getValue())})),this.props.onChange(e,t)}},e.prototype.onSelectionChange=function(t){if(this.props.onSelectionChange){var e=[];this.editor.env.split.forEach((function(t){e.push(t.getSelection())})),this.props.onSelectionChange(e,t)}},e.prototype.onCursorChange=function(t){if(this.props.onCursorChange){var e=[];this.editor.env.split.forEach((function(t){e.push(t.getSelection())})),this.props.onCursorChange(e,t)}},e.prototype.onFocus=function(t){this.props.onFocus&&this.props.onFocus(t)},e.prototype.onInput=function(t){this.props.onInput&&this.props.onInput(t)},e.prototype.onBlur=function(t){this.props.onBlur&&this.props.onBlur(t)},e.prototype.onCopy=function(t){this.props.onCopy&&this.props.onCopy(t)},e.prototype.onPaste=function(t){this.props.onPaste&&this.props.onPaste(t)},e.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},e.prototype.handleOptions=function(t,e){for(var n=Object.keys(t.setOptions),i=0;i<n.length;i++)e.setOption(n[i],t.setOptions[n[i]])},e.prototype.handleMarkers=function(t,e){var n=e.getSession().getMarkers(!0);for(var i in n)n.hasOwnProperty(i)&&e.getSession().removeMarker(n[i].id);for(var i in n=e.getSession().getMarkers(!1))n.hasOwnProperty(i)&&e.getSession().removeMarker(n[i].id);t.forEach((function(t){var n=t.startRow,i=t.startCol,r=t.endRow,o=t.endCol,s=t.className,l=t.type,c=t.inFront,u=void 0!==c&&c,h=new a.Range(n,i,r,o);e.getSession().addMarker(h,s,l,u)}))},e.prototype.updateRef=function(t){this.refEditor=t},e.prototype.render=function(){var t=this.props,e=t.name,n=t.width,i=t.height,o=t.style,s=r({width:n,height:i},o);return u.createElement("div",{ref:this.updateRef,id:e,style:s})},e.propTypes={className:c.string,debounceChangePeriod:c.number,defaultValue:c.arrayOf(c.string),focus:c.bool,fontSize:c.oneOfType([c.number,c.string]),height:c.string,mode:c.string,name:c.string,onBlur:c.func,onChange:c.func,onCopy:c.func,onFocus:c.func,onInput:c.func,onLoad:c.func,onPaste:c.func,onScroll:c.func,orientation:c.string,showGutter:c.bool,splits:c.number,theme:c.string,value:c.arrayOf(c.string),width:c.string,onSelectionChange:c.func,onCursorChange:c.func,onBeforeLoad:c.func,minLines:c.number,maxLines:c.number,readOnly:c.bool,highlightActiveLine:c.bool,tabSize:c.number,showPrintMargin:c.bool,cursorStart:c.number,editorProps:c.object,setOptions:c.object,style:c.object,scrollMargin:c.array,annotations:c.array,markers:c.array,keyboardHandler:c.string,wrapEnabled:c.bool,enableBasicAutocompletion:c.oneOfType([c.bool,c.array]),enableLiveAutocompletion:c.oneOfType([c.bool,c.array]),commands:c.array},e.defaultProps={name:"ace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1},e}(u.Component);e.default=p},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(24)},function(t,e){t.exports=function(t,e,n,i){var r=n?n.call(i,t,e):void 0;if(void 0!==r)return!!r;if(t===e)return!0;if("object"!==typeof t||!t||"object"!==typeof e||!e)return!1;var o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(e),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=t[c],h=e[c];if(!1===(r=n?n.call(i,u,h,c):void 0)||void 0===r&&u!==h)return!1}return!0}},function(t,e,n){"use strict";e.a=function(t){function e(t,i,l,c,f){for(var p,d,g,m,_,x=0,k=0,S=0,A=0,E=0,O=0,P=g=p=0,D=0,j=0,z=0,$=0,F=l.length,B=F-1,H="",U="",G="",V="";D<F;){if(d=l.charCodeAt(D),D===B&&0!==k+A+S+x&&(0!==k&&(d=47===k?10:47),A=S=x=0,F++,B++),0===k+A+S+x){if(D===B&&(0<j&&(H=H.replace(h,"")),0<H.trim().length)){switch(d){case 32:case 9:case 59:case 13:case 10:break;default:H+=l.charAt(D)}d=59}switch(d){case 123:for(p=(H=H.trim()).charCodeAt(0),g=1,$=++D;D<F;){switch(d=l.charCodeAt(D)){case 123:g++;break;case 125:g--;break;case 47:switch(d=l.charCodeAt(D+1)){case 42:case 47:t:{for(P=D+1;P<B;++P)switch(l.charCodeAt(P)){case 47:if(42===d&&42===l.charCodeAt(P-1)&&D+2!==P){D=P+1;break t}break;case 10:if(47===d){D=P+1;break t}}D=P}}break;case 91:d++;case 40:d++;case 34:case 39:for(;D++<B&&l.charCodeAt(D)!==d;);}if(0===g)break;D++}switch(g=l.substring($,D),0===p&&(p=(H=H.replace(u,"").trim()).charCodeAt(0)),p){case 64:switch(0<j&&(H=H.replace(h,"")),d=H.charCodeAt(1)){case 100:case 109:case 115:case 45:j=i;break;default:j=R}if($=(g=e(i,j,g,d,f+1)).length,0<I&&(_=a(3,g,j=n(R,H,z),i,C,T,$,d,f,c),H=j.join(""),void 0!==_&&0===($=(g=_.trim()).length)&&(d=0,g="")),0<$)switch(d){case 115:H=H.replace(w,s);case 100:case 109:case 45:g=H+"{"+g+"}";break;case 107:g=(H=H.replace(v,"$1 $2"))+"{"+g+"}",g=1===L||2===L&&o("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=H+g,112===c&&(U+=g,g="")}else g="";break;default:g=e(i,n(i,H,z),g,c,f+1)}G+=g,g=z=j=P=p=0,H="",d=l.charCodeAt(++D);break;case 125:case 59:if(1<($=(H=(0<j?H.replace(h,""):H).trim()).length))switch(0===P&&(p=H.charCodeAt(0),45===p||96<p&&123>p)&&($=(H=H.replace(" ",":")).length),0<I&&void 0!==(_=a(1,H,i,t,C,T,U.length,c,f,c))&&0===($=(H=_.trim()).length)&&(H="\0\0"),p=H.charCodeAt(0),d=H.charCodeAt(1),p){case 0:break;case 64:if(105===d||99===d){V+=H+l.charAt(D);break}default:58!==H.charCodeAt($-1)&&(U+=r(H,p,d,H.charCodeAt(2)))}z=j=P=p=0,H="",d=l.charCodeAt(++D)}}switch(d){case 13:case 10:47===k?k=0:0===1+p&&107!==c&&0<H.length&&(j=1,H+="\0"),0<I*N&&a(0,H,i,t,C,T,U.length,c,f,c),T=1,C++;break;case 59:case 125:if(0===k+A+S+x){T++;break}default:switch(T++,m=l.charAt(D),d){case 9:case 32:if(0===A+x+k)switch(E){case 44:case 58:case 9:case 32:m="";break;default:32!==d&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===A+k+x&&(j=z=1,m="\f"+m);break;case 108:if(0===A+k+x+M&&0<P)switch(D-P){case 2:112===E&&58===l.charCodeAt(D-3)&&(M=E);case 8:111===O&&(M=O)}break;case 58:0===A+k+x&&(P=D);break;case 44:0===k+S+A+x&&(j=1,m+="\r");break;case 34:case 39:0===k&&(A=A===d?0:0===A?d:A);break;case 91:0===A+k+S&&x++;break;case 93:0===A+k+S&&x--;break;case 41:0===A+k+x&&S--;break;case 40:if(0===A+k+x){if(0===p)switch(2*E+3*O){case 533:break;default:p=1}S++}break;case 64:0===k+S+A+x+P+g&&(g=1);break;case 42:case 47:if(!(0<A+x+S))switch(k){case 0:switch(2*d+3*l.charCodeAt(D+1)){case 235:k=47;break;case 220:$=D,k=42}break;case 42:47===d&&42===E&&$+2!==D&&(33===l.charCodeAt($+2)&&(U+=l.substring($,D+1)),m="",k=0)}}0===k&&(H+=m)}O=E,E=d,D++}if(0<($=U.length)){if(j=i,0<I&&(void 0!==(_=a(2,U,j,t,C,T,$,c,f,c))&&0===(U=_).length))return V+U+G;if(U=j.join(",")+"{"+U+"}",0!==L*M){switch(2!==L||o(U,2)||(M=0),M){case 111:U=U.replace(b,":-moz-$1")+U;break;case 112:U=U.replace(y,"::-webkit-input-$1")+U.replace(y,"::-moz-$1")+U.replace(y,":-ms-input-$1")+U}M=0}}return V+U+G}function n(t,e,n){var r=e.trim().split(g);e=r;var o=r.length,s=t.length;switch(s){case 0:case 1:var a=0;for(t=0===s?"":t[0]+" ";a<o;++a)e[a]=i(t,e[a],n).trim();break;default:var l=a=0;for(e=[];a<o;++a)for(var c=0;c<s;++c)e[l++]=i(t[c]+" ",r[a],n).trim()}return e}function i(t,e,n){var i=e.charCodeAt(0);switch(33>i&&(i=(e=e.trim()).charCodeAt(0)),i){case 38:return e.replace(m,"$1"+t.trim());case 58:return t.trim()+e.replace(m,"$1"+t.trim());default:if(0<1*n&&0<e.indexOf("\f"))return e.replace(m,(58===t.charCodeAt(0)?"":"$1")+t.trim())}return t+e}function r(t,e,n,i){var s=t+";",a=2*e+3*n+4*i;if(944===a){t=s.indexOf(":",9)+1;var l=s.substring(t,s.length-1).trim();return l=s.substring(0,t).trim()+l+";",1===L||2===L&&o(l,1)?"-webkit-"+l+l:l}if(0===L||2===L&&!o(s,1))return s;switch(a){case 1015:return 97===s.charCodeAt(10)?"-webkit-"+s+s:s;case 951:return 116===s.charCodeAt(3)?"-webkit-"+s+s:s;case 963:return 110===s.charCodeAt(5)?"-webkit-"+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:if(45===s.charCodeAt(8))return"-webkit-"+s+s;if(0<s.indexOf("image-set(",11))return s.replace(E,"$1-webkit-$2")+s;break;case 932:if(45===s.charCodeAt(4))switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return"-webkit-box-pack"+(l=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+s+"-ms-flex-pack"+l+s;case 1005:return p.test(s)?s.replace(f,":-webkit-")+s.replace(f,":-moz-")+s:s;case 1e3:switch(e=(l=s.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(e)){case 226:l=s.replace(_,"tb");break;case 232:l=s.replace(_,"tb-rl");break;case 220:l=s.replace(_,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+l+s;case 1017:if(-1===s.indexOf("sticky",9))break;case 975:switch(e=(s=t).length-10,a=(l=(33===s.charCodeAt(e)?s.substring(0,e):s).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:s=s.replace(l,"-webkit-"+l)+";"+s;break;case 207:case 102:s=s.replace(l,"-webkit-"+(102<a?"inline-":"")+"box")+";"+s.replace(l,"-webkit-"+l)+";"+s.replace(l,"-ms-"+l+"box")+";"+s}return s+";";case 938:if(45===s.charCodeAt(5))switch(s.charCodeAt(6)){case 105:return l=s.replace("-items",""),"-webkit-"+s+"-webkit-box-"+l+"-ms-flex-"+l+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(k,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(k,"")+s}break;case 973:case 989:if(45!==s.charCodeAt(3)||122===s.charCodeAt(4))break;case 931:case 953:if(!0===A.test(t))return 115===(l=t.substring(t.indexOf(":")+1)).charCodeAt(0)?r(t.replace("stretch","fill-available"),e,n,i).replace(":fill-available",":stretch"):s.replace(l,"-webkit-"+l)+s.replace(l,"-moz-"+l.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(102===s.charCodeAt(5)?"-ms-"+s:"")+s,211===n+i&&105===s.charCodeAt(13)&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(d,"$1-webkit-$2")+s}return s}function o(t,e){var n=t.indexOf(1===e?":":"{"),i=t.substring(0,3!==e?n:10);return n=t.substring(n+1,t.length-1),P(2!==e?i:i.replace(S,"$1"),n,e)}function s(t,e){var n=r(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return n!==e+";"?n.replace(x," or ($1)").substring(4):"("+e+")"}function a(t,e,n,i,r,o,s,a,l,u){for(var h,f=0,p=e;f<I;++f)switch(h=O[f].call(c,t,p,n,i,r,o,s,a,l,u)){case void 0:case!1:case!0:case null:break;default:p=h}if(p!==e)return p}function l(t){return void 0!==(t=t.prefix)&&(P=null,t?"function"!==typeof t?L=1:(L=2,P=t):L=0),l}function c(t,n){var i=t;if(33>i.charCodeAt(0)&&(i=i.trim()),i=[i],0<I){var r=a(-1,n,i,i,C,T,0,0,0,0);void 0!==r&&"string"===typeof r&&(n=r)}var o=e(R,i,n,0,0);return 0<I&&(void 0!==(r=a(-2,o,i,i,C,T,o.length,0,0,0))&&(o=r)),"",M=0,T=C=1,o}var u=/^\0+/g,h=/[\0\r\f]/g,f=/: */g,p=/zoo|gra/,d=/([,: ])(transform)/g,g=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,k=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,A=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,T=1,C=1,M=0,L=1,R=[],O=[],I=0,P=null,N=0;return c.use=function t(e){switch(e){case void 0:case null:I=O.length=0;break;default:if("function"===typeof e)O[I++]=e;else if("object"===typeof e)for(var n=0,i=e.length;n<i;++n)t(e[n]);else N=0|!!e}return t},c.set=l,void 0!==t&&l(t),c}},function(t,e,n){"use strict";e.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.diff=e.split=void 0;var i=n(31),r=n(34);e.diff=r.default;var o=n(17);e.split=o.default,e.default=i.default},function(t,e,n){"use strict";var i=n(8),r=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var s=60109,a=60110,l=60112;e.Suspense=60113;var c=60115,u=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;r=h("react.element"),o=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),s=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),e.Suspense=h("react.suspense"),c=h("react.memo"),u=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function p(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function m(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||d}function v(){}function y(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||d}m.prototype.isReactComponent={},m.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(p(85));this.updater.enqueueSetState(this,t,e,"setState")},m.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=m.prototype;var b=y.prototype=new v;b.constructor=y,i(b,m.prototype),b.isPureReactComponent=!0;var _={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,n){var i,o={},s=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)w.call(e,i)&&!x.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:r,type:t,key:s,ref:a,props:o,_owner:_.current}}function S(t){return"object"===typeof t&&null!==t&&t.$$typeof===r}var A=/\/+/g;function E(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function T(t,e,n,i,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case r:case o:l=!0}}if(l)return s=s(l=t),t=""===i?"."+E(l,0):i,Array.isArray(s)?(n="",null!=t&&(n=t.replace(A,"$&/")+"/"),T(s,e,n,"",(function(t){return t}))):null!=s&&(S(s)&&(s=function(t,e){return{$$typeof:r,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=""===i?".":i+":",Array.isArray(t))for(var c=0;c<t.length;c++){var u=i+E(a=t[c],c);l+=T(a,e,n,u,s)}else if("function"===typeof(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t)))for(t=u.call(t),c=0;!(a=t.next()).done;)l+=T(a=a.value,e,n,u=i+E(a,c++),s);else if("object"===a)throw e=""+t,Error(p(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return l}function C(t,e,n){if(null==t)return t;var i=[],r=0;return T(t,i,"","",(function(t){return e.call(n,t,r++)})),i}function M(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var L={current:null};function R(){var t=L.current;if(null===t)throw Error(p(321));return t}var O={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:i};e.Children={map:C,forEach:function(t,e,n){C(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return C(t,(function(){e++})),e},toArray:function(t){return C(t,(function(t){return t}))||[]},only:function(t){if(!S(t))throw Error(p(143));return t}},e.Component=m,e.PureComponent=y,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(p(267,t));var o=i({},t.props),s=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=_.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)w.call(e,u)&&!x.hasOwnProperty(u)&&(o[u]=void 0===e[u]&&void 0!==c?c[u]:e[u])}var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:r,type:t.type,key:s,ref:a,props:o,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:a,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=k,e.createFactory=function(t){var e=k.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=S,e.lazy=function(t){return{$$typeof:u,_payload:{_status:-1,_result:t},_init:M}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return R().useCallback(t,e)},e.useContext=function(t,e){return R().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return R().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return R().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return R().useLayoutEffect(t,e)},e.useMemo=function(t,e){return R().useMemo(t,e)},e.useReducer=function(t,e,n){return R().useReducer(t,e,n)},e.useRef=function(t){return R().useRef(t)},e.useState=function(t){return R().useState(t)},e.version="17.0.2"},function(t,e,n){"use strict";var i=n(0),r=n(8),o=n(25);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(s(227));var a=new Set,l={};function c(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(l[t]=e,t=0;t<e.length;t++)a.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,d={},g={};function m(t,e,n,i,r,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){v[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];v[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){v[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){v[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){v[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){v[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){v[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){v[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){v[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(t){return t[1].toUpperCase()}function _(t,e,n,i){var r=v.hasOwnProperty(e)?v[e]:null;(null!==r?0===r.type:!i&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!p.call(g,t)||!p.call(d,t)&&(f.test(t)?g[t]=!0:(d[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,b);v[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,b);v[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,b);v[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){v[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){v[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,k=60106,S=60107,A=60108,E=60114,T=60109,C=60110,M=60112,L=60113,R=60120,O=60115,I=60116,P=60121,N=60128,D=60129,j=60130,z=60131;if("function"===typeof Symbol&&Symbol.for){var $=Symbol.for;x=$("react.element"),k=$("react.portal"),S=$("react.fragment"),A=$("react.strict_mode"),E=$("react.profiler"),T=$("react.provider"),C=$("react.context"),M=$("react.forward_ref"),L=$("react.suspense"),R=$("react.suspense_list"),O=$("react.memo"),I=$("react.lazy"),P=$("react.block"),$("react.scope"),N=$("react.opaque.id"),D=$("react.debug_trace_mode"),j=$("react.offscreen"),z=$("react.legacy_hidden")}var F,B="function"===typeof Symbol&&Symbol.iterator;function H(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=B&&t[B]||t["@@iterator"])?t:null}function U(t){if(void 0===F)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);F=e&&e[1]||""}return"\n"+F+t}var G=!1;function V(t,e){if(!t||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var i=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){i=l}t.call(e.prototype)}else{try{throw Error()}catch(l){i=l}t()}}catch(l){if(l&&i&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a])return"\n"+r[s].replace(" at new "," at ")}while(1<=s&&0<=a);break}}}finally{G=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?U(t):""}function W(t){switch(t.tag){case 5:return U(t.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return t=V(t.type,!1);case 11:return t=V(t.type.render,!1);case 22:return t=V(t.type._render,!1);case 1:return t=V(t.type,!0);default:return""}}function q(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case k:return"Portal";case E:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case R:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case M:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case O:return q(t.type);case P:return q(t._render);case I:e=t._payload,t=t._init;try{return q(t(e))}catch(n){}}return null}function K(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Y(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function X(t){t._valueTracker||(t._valueTracker=function(t){var e=Y(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Z(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Y(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function J(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Q(t,e){var n=e.checked;return r({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=K(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&_(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=K(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?rt(t,e.type,n):e.hasOwnProperty("defaultValue")&&rt(t,e.type,K(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function it(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function rt(t,e,n){"number"===e&&J(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function ot(t,e){return t=r({children:void 0},e),(e=function(t){var e="";return i.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function st(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+K(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function at(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return r({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:K(n)}}function ct(t,e){var n=K(e.value),i=K(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function ut(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",ft="http://www.w3.org/2000/svg";function pt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?pt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var gt,mt,vt=(mt=function(t,e){if(t.namespaceURI!==ft||"innerHTML"in t)t.innerHTML=e;else{for((gt=gt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction((function(){return mt(t,e)}))}:mt);function yt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var bt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_t=["Webkit","ms","Moz","O"];function wt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||bt.hasOwnProperty(t)&&bt[t]?(""+e).trim():e+"px"}function xt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=wt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(bt).forEach((function(t){_t.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bt[e]=bt[t]}))}));var kt=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function St(t,e){if(e){if(kt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function At(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Et(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Tt=null,Ct=null,Mt=null;function Lt(t){if(t=tr(t)){if("function"!==typeof Tt)throw Error(s(280));var e=t.stateNode;e&&(e=nr(e),Tt(t.stateNode,t.type,e))}}function Rt(t){Ct?Mt?Mt.push(t):Mt=[t]:Ct=t}function Ot(){if(Ct){var t=Ct,e=Mt;if(Mt=Ct=null,Lt(t),e)for(t=0;t<e.length;t++)Lt(e[t])}}function It(t,e){return t(e)}function Pt(t,e,n,i,r){return t(e,n,i,r)}function Nt(){}var Dt=It,jt=!1,zt=!1;function $t(){null===Ct&&null===Mt||(Nt(),Ot())}function Ft(t,e){var n=t.stateNode;if(null===n)return null;var i=nr(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Bt=!1;if(h)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(mt){Bt=!1}function Ut(t,e,n,i,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Gt=!1,Vt=null,Wt=!1,qt=null,Kt={onError:function(t){Gt=!0,Vt=t}};function Yt(t,e,n,i,r,o,s,a,l){Gt=!1,Vt=null,Ut.apply(Kt,arguments)}function Xt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Zt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Jt(t){if(Xt(t)!==t)throw Error(s(188))}function Qt(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Xt(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Jt(r),t;if(o===i)return Jt(r),e;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var ee,ne,ie,re,oe=!1,se=[],ae=null,le=null,ce=null,ue=new Map,he=new Map,fe=[],pe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function de(t,e,n,i,r){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:r,targetContainers:[i]}}function ge(t,e){switch(t){case"focusin":case"focusout":ae=null;break;case"dragenter":case"dragleave":le=null;break;case"mouseover":case"mouseout":ce=null;break;case"pointerover":case"pointerout":ue.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":he.delete(e.pointerId)}}function me(t,e,n,i,r,o){return null===t||t.nativeEvent!==o?(t=de(e,n,i,r,o),null!==e&&(null!==(e=tr(e))&&ne(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function ve(t){var e=Qi(t.target);if(null!==e){var n=Xt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Zt(n)))return t.blockedOn=e,void re(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){ie(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ye(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=tr(n))&&ne(e),t.blockedOn=n,!1;e.shift()}return!0}function be(t,e,n){ye(t)&&n.delete(e)}function _e(){for(oe=!1;0<se.length;){var t=se[0];if(null!==t.blockedOn){null!==(t=tr(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var n=Qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&se.shift()}null!==ae&&ye(ae)&&(ae=null),null!==le&&ye(le)&&(le=null),null!==ce&&ye(ce)&&(ce=null),ue.forEach(be),he.forEach(be)}function we(t,e){t.blockedOn===e&&(t.blockedOn=null,oe||(oe=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,_e)))}function xe(t){function e(e){return we(e,t)}if(0<se.length){we(se[0],t);for(var n=1;n<se.length;n++){var i=se[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==ae&&we(ae,t),null!==le&&we(le,t),null!==ce&&we(ce,t),ue.forEach(e),he.forEach(e),n=0;n<fe.length;n++)(i=fe[n]).blockedOn===t&&(i.blockedOn=null);for(;0<fe.length&&null===(n=fe[0]).blockedOn;)ve(n),null===n.blockedOn&&fe.shift()}function ke(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Se={animationend:ke("Animation","AnimationEnd"),animationiteration:ke("Animation","AnimationIteration"),animationstart:ke("Animation","AnimationStart"),transitionend:ke("Transition","TransitionEnd")},Ae={},Ee={};function Te(t){if(Ae[t])return Ae[t];if(!Se[t])return t;var e,n=Se[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ee)return Ae[t]=n[e];return t}h&&(Ee=document.createElement("div").style,"AnimationEvent"in window||(delete Se.animationend.animation,delete Se.animationiteration.animation,delete Se.animationstart.animation),"TransitionEvent"in window||delete Se.transitionend.transition);var Ce=Te("animationend"),Me=Te("animationiteration"),Le=Te("animationstart"),Re=Te("transitionend"),Oe=new Map,Ie=new Map,Pe=["abort","abort",Ce,"animationEnd",Me,"animationIteration",Le,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Re,"transitionEnd","waiting","waiting"];function Ne(t,e){for(var n=0;n<t.length;n+=2){var i=t[n],r=t[n+1];r="on"+(r[0].toUpperCase()+r.slice(1)),Ie.set(i,e),Oe.set(i,r),c(r,[i])}}(0,o.unstable_now)();var De=8;function je(t){if(0!==(1&t))return De=15,1;if(0!==(2&t))return De=14,2;if(0!==(4&t))return De=13,4;var e=24&t;return 0!==e?(De=12,e):0!==(32&t)?(De=11,32):0!==(e=192&t)?(De=10,e):0!==(256&t)?(De=9,256):0!==(e=3584&t)?(De=8,e):0!==(4096&t)?(De=7,4096):0!==(e=4186112&t)?(De=6,e):0!==(e=62914560&t)?(De=5,e):67108864&t?(De=4,67108864):0!==(134217728&t)?(De=3,134217728):0!==(e=805306368&t)?(De=2,e):0!==(1073741824&t)?(De=1,1073741824):(De=8,t)}function ze(t,e){var n=t.pendingLanes;if(0===n)return De=0;var i=0,r=0,o=t.expiredLanes,s=t.suspendedLanes,a=t.pingedLanes;if(0!==o)i=o,r=De=15;else if(0!==(o=134217727&n)){var l=o&~s;0!==l?(i=je(l),r=De):0!==(a&=o)&&(i=je(a),r=De)}else 0!==(o=n&~s)?(i=je(o),r=De):0!==a&&(i=je(a),r=De);if(0===i)return 0;if(i=n&((0>(i=31-Ge(i))?0:1<<i)<<1)-1,0!==e&&e!==i&&0===(e&s)){if(je(e),r<=De)return e;De=r}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-Ge(e)),i|=t[n],e&=~r;return i}function $e(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Fe(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=Be(24&~e))?Fe(10,e):t;case 10:return 0===(t=Be(192&~e))?Fe(8,e):t;case 8:return 0===(t=Be(3584&~e))&&(0===(t=Be(4186112&~e))&&(t=512)),t;case 2:return 0===(e=Be(805306368&~e))&&(e=268435456),e}throw Error(s(358,t))}function Be(t){return t&-t}function He(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ue(t,e,n){t.pendingLanes|=e;var i=e-1;t.suspendedLanes&=i,t.pingedLanes&=i,(t=t.eventTimes)[e=31-Ge(e)]=n}var Ge=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(Ve(t)/We|0)|0},Ve=Math.log,We=Math.LN2;var qe=o.unstable_UserBlockingPriority,Ke=o.unstable_runWithPriority,Ye=!0;function Xe(t,e,n,i){jt||Nt();var r=Je,o=jt;jt=!0;try{Pt(r,t,e,n,i)}finally{(jt=o)||$t()}}function Ze(t,e,n,i){Ke(qe,Je.bind(null,t,e,n,i))}function Je(t,e,n,i){var r;if(Ye)if((r=0===(4&e))&&0<se.length&&-1<pe.indexOf(t))t=de(null,t,e,n,i),se.push(t);else{var o=Qe(t,e,n,i);if(null===o)r&&ge(t,i);else{if(r){if(-1<pe.indexOf(t))return t=de(o,t,e,n,i),void se.push(t);if(function(t,e,n,i,r){switch(e){case"focusin":return ae=me(ae,t,e,n,i,r),!0;case"dragenter":return le=me(le,t,e,n,i,r),!0;case"mouseover":return ce=me(ce,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return ue.set(o,me(ue.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,he.set(o,me(he.get(o)||null,t,e,n,i,r)),!0}return!1}(o,t,e,n,i))return;ge(t,i)}Oi(t,e,i,null,n)}}}function Qe(t,e,n,i){var r=Et(i);if(null!==(r=Qi(r))){var o=Xt(r);if(null===o)r=null;else{var s=o.tag;if(13===s){if(null!==(r=Zt(o)))return r;r=null}else if(3===s){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Oi(t,e,i,r,n),null}var tn=null,en=null,nn=null;function rn(){if(nn)return nn;var t,e,n=en,i=n.length,r="value"in tn?tn.value:tn.textContent,o=r.length;for(t=0;t<i&&n[t]===r[t];t++);var s=i-t;for(e=1;e<=s&&n[i-e]===r[o-e];e++);return nn=r.slice(t,1<e?1-e:void 0)}function on(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function sn(){return!0}function an(){return!1}function ln(t){function e(e,n,i,r,o){for(var s in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?sn:an,this.isPropagationStopped=an,this}return r(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),e}var cn,un,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=ln(fn),dn=r({},fn,{view:0,detail:0}),gn=ln(dn),mn=r({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hn&&(hn&&"mousemove"===t.type?(cn=t.screenX-hn.screenX,un=t.screenY-hn.screenY):un=cn=0,hn=t),cn)},movementY:function(t){return"movementY"in t?t.movementY:un}}),vn=ln(mn),yn=ln(r({},mn,{dataTransfer:0})),bn=ln(r({},dn,{relatedTarget:0})),_n=ln(r({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=ln(r({},fn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),xn=ln(r({},fn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=An[t])&&!!e[t]}function Tn(){return En}var Cn=ln(r({},dn,{key:function(t){if(t.key){var e=kn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=on(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Sn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(t){return"keypress"===t.type?on(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?on(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),Mn=ln(r({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=ln(r({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Rn=ln(r({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=ln(r({},mn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),In=[9,13,27,32],Pn=h&&"CompositionEvent"in window,Nn=null;h&&"documentMode"in document&&(Nn=document.documentMode);var Dn=h&&"TextEvent"in window&&!Nn,jn=h&&(!Pn||Nn&&8<Nn&&11>=Nn),zn=String.fromCharCode(32),$n=!1;function Fn(t,e){switch(t){case"keyup":return-1!==In.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Hn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Un[t.type]:"textarea"===e}function Vn(t,e,n,i){Rt(i),0<(e=Pi(e,"onChange")).length&&(n=new pn("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Wn=null,qn=null;function Kn(t){Ei(t,0)}function Yn(t){if(Z(er(t)))return t}function Xn(t,e){if("change"===t)return e}var Zn=!1;if(h){var Jn;if(h){var Qn="oninput"in document;if(!Qn){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),Qn="function"===typeof ti.oninput}Jn=Qn}else Jn=!1;Zn=Jn&&(!document.documentMode||9<document.documentMode)}function ei(){Wn&&(Wn.detachEvent("onpropertychange",ni),qn=Wn=null)}function ni(t){if("value"===t.propertyName&&Yn(qn)){var e=[];if(Vn(e,qn,t,Et(t)),t=Kn,jt)t(e);else{jt=!0;try{It(t,e)}finally{jt=!1,$t()}}}}function ii(t,e,n){"focusin"===t?(ei(),qn=n,(Wn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(qn)}function oi(t,e){if("click"===t)return Yn(e)}function si(t,e){if("input"===t||"change"===t)return Yn(e)}var ai="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},li=Object.prototype.hasOwnProperty;function ci(t,e){if(ai(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!li.call(e,n[i])||!ai(t[n[i]],e[n[i]]))return!1;return!0}function ui(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hi(t,e){var n,i=ui(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ui(i)}}function fi(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?fi(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pi(){for(var t=window,e=J();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=J((t=e.contentWindow).document)}return e}function di(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var gi=h&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,yi=null,bi=!1;function _i(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==J(i)||("selectionStart"in(i=mi)&&di(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&ci(yi,i)||(yi=i,0<(i=Pi(vi,"onSelect")).length&&(e=new pn("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mi)))}Ne("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ne("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ne(Pe,2);for(var wi="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),xi=0;xi<wi.length;xi++)Ie.set(wi[xi],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Si=new Set("cancel close invalid load scroll toggle".split(" ").concat(ki));function Ai(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,o,a,l,c){if(Yt.apply(this,arguments),Gt){if(!Gt)throw Error(s(198));var u=Vt;Gt=!1,Vt=null,Wt||(Wt=!0,qt=u)}}(i,e,void 0,t),t.currentTarget=null}function Ei(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break t;Ai(r,a,c),o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break t;Ai(r,a,c),o=l}}}if(Wt)throw t=qt,Wt=!1,qt=null,t}function Ti(t,e){var n=ir(e),i=t+"__bubble";n.has(i)||(Ri(e,t,2,!1),n.add(i))}var Ci="_reactListening"+Math.random().toString(36).slice(2);function Mi(t){t[Ci]||(t[Ci]=!0,a.forEach((function(e){Si.has(e)||Li(e,!1,t,null),Li(e,!0,t,null)})))}function Li(t,e,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===t&&9!==n.nodeType&&(o=n.ownerDocument),null!==i&&!e&&Si.has(t)){if("scroll"!==t)return;r|=2,o=i}var s=ir(o),a=t+"__"+(e?"capture":"bubble");s.has(a)||(e&&(r|=4),Ri(o,t,r,e),s.add(a))}function Ri(t,e,n,i){var r=Ie.get(e);switch(void 0===r?2:r){case 0:r=Xe;break;case 1:r=Ze;break;default:r=Je}n=r.bind(null,e,n,t),r=void 0,!Bt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Oi(t,e,n,i,r){var o=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=Qi(a)))return;if(5===(l=s.tag)||6===l){i=o=s;continue t}a=a.parentNode}}i=i.return}!function(t,e,n){if(zt)return t(e,n);zt=!0;try{Dt(t,e,n)}finally{zt=!1,$t()}}((function(){var i=o,r=Et(n),s=[];t:{var a=Oe.get(t);if(void 0!==a){var l=pn,c=t;switch(t){case"keypress":if(0===on(n))break t;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=bn;break;case"focusout":c="blur",l=bn;break;case"beforeblur":case"afterblur":l=bn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ln;break;case Ce:case Me:case Le:l=_n;break;case Re:l=Rn;break;case"scroll":l=gn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=0!==(4&e),h=!u&&"scroll"===t,f=u?null!==a?a+"Capture":null:a;u=[];for(var p,d=i;null!==d;){var g=(p=d).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==f&&(null!=(g=Ft(d,f))&&u.push(Ii(d,g,p)))),h)break;d=d.return}0<u.length&&(a=new l(a,c,null,n,r),s.push({event:a,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(c=n.relatedTarget||n.fromElement)||!Qi(c)&&!c[Zi])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?Qi(c):null)&&(c!==(h=Xt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=vn,g="onMouseLeave",f="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(u=Mn,g="onPointerLeave",f="onPointerEnter",d="pointer"),h=null==l?a:er(l),p=null==c?a:er(c),(a=new u(g,d+"leave",l,n,r)).target=h,a.relatedTarget=p,g=null,Qi(r)===i&&((u=new u(f,d+"enter",c,n,r)).target=p,u.relatedTarget=h,g=u),h=g,l&&c)t:{for(f=c,d=0,p=u=l;p;p=Ni(p))d++;for(p=0,g=f;g;g=Ni(g))p++;for(;0<d-p;)u=Ni(u),d--;for(;0<p-d;)f=Ni(f),p--;for(;d--;){if(u===f||null!==f&&u===f.alternate)break t;u=Ni(u),f=Ni(f)}u=null}else u=null;null!==l&&Di(s,a,l,u,!1),null!==c&&null!==h&&Di(s,h,c,u,!0)}if("select"===(l=(a=i?er(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Xn;else if(Gn(a))if(Zn)m=si;else{m=ri;var v=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=oi);switch(m&&(m=m(t,i))?Vn(s,m,n,r):(v&&v(t,a,i),"focusout"===t&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&rt(a,"number",a.value)),v=i?er(i):window,t){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(mi=v,vi=i,yi=null);break;case"focusout":yi=vi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,_i(s,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":_i(s,n,r)}var y;if(Pn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Hn?Fn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=rn()):(en="value"in(tn=r)?tn.value:tn.textContent,Hn=!0)),0<(v=Pi(i,b)).length&&(b=new xn(b,t,null,n,r),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Bn(n))&&(b.data=y))),(y=Dn?function(t,e){switch(t){case"compositionend":return Bn(e);case"keypress":return 32!==e.which?null:($n=!0,zn);case"textInput":return(t=e.data)===zn&&$n?null:t;default:return null}}(t,n):function(t,e){if(Hn)return"compositionend"===t||!Pn&&Fn(t,e)?(t=rn(),nn=en=tn=null,Hn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jn&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))&&(0<(i=Pi(i,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=y))}Ei(s,e)}))}function Ii(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Ft(t,n))&&i.unshift(Ii(t,o,r)),null!=(o=Ft(t,e))&&i.push(Ii(t,o,r))),t=t.return}return i}function Ni(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Di(t,e,n,i,r){for(var o=e._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Ft(n,o))&&s.unshift(Ii(n,l,a)):r||null!=(l=Ft(n,o))&&s.push(Ii(n,l,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}function ji(){}var zi=null,$i=null;function Fi(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Bi(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Hi="function"===typeof setTimeout?setTimeout:void 0,Ui="function"===typeof clearTimeout?clearTimeout:void 0;function Gi(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function Vi(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Wi(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var qi=0;var Ki=Math.random().toString(36).slice(2),Yi="__reactFiber$"+Ki,Xi="__reactProps$"+Ki,Zi="__reactContainer$"+Ki,Ji="__reactEvents$"+Ki;function Qi(t){var e=t[Yi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zi]||n[Yi]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Wi(t);null!==t;){if(n=t[Yi])return n;t=Wi(t)}return e}n=(t=n).parentNode}return null}function tr(t){return!(t=t[Yi]||t[Zi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function er(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function nr(t){return t[Xi]||null}function ir(t){var e=t[Ji];return void 0===e&&(e=t[Ji]=new Set),e}var rr=[],or=-1;function sr(t){return{current:t}}function ar(t){0>or||(t.current=rr[or],rr[or]=null,or--)}function lr(t,e){or++,rr[or]=t.current,t.current=e}var cr={},ur=sr(cr),hr=sr(!1),fr=cr;function pr(t,e){var n=t.type.contextTypes;if(!n)return cr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function dr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function gr(){ar(hr),ar(ur)}function mr(t,e,n){if(ur.current!==cr)throw Error(s(168));lr(ur,e),lr(hr,n)}function vr(t,e,n){var i=t.stateNode;if(t=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var o in i=i.getChildContext())if(!(o in t))throw Error(s(108,q(e)||"Unknown",o));return r({},n,i)}function yr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cr,fr=ur.current,lr(ur,t),lr(hr,hr.current),!0}function br(t,e,n){var i=t.stateNode;if(!i)throw Error(s(169));n?(t=vr(t,e,fr),i.__reactInternalMemoizedMergedChildContext=t,ar(hr),ar(ur),lr(ur,t)):ar(hr),lr(hr,n)}var _r=null,wr=null,xr=o.unstable_runWithPriority,kr=o.unstable_scheduleCallback,Sr=o.unstable_cancelCallback,Ar=o.unstable_shouldYield,Er=o.unstable_requestPaint,Tr=o.unstable_now,Cr=o.unstable_getCurrentPriorityLevel,Mr=o.unstable_ImmediatePriority,Lr=o.unstable_UserBlockingPriority,Rr=o.unstable_NormalPriority,Or=o.unstable_LowPriority,Ir=o.unstable_IdlePriority,Pr={},Nr=void 0!==Er?Er:function(){},Dr=null,jr=null,zr=!1,$r=Tr(),Fr=1e4>$r?Tr:function(){return Tr()-$r};function Br(){switch(Cr()){case Mr:return 99;case Lr:return 98;case Rr:return 97;case Or:return 96;case Ir:return 95;default:throw Error(s(332))}}function Hr(t){switch(t){case 99:return Mr;case 98:return Lr;case 97:return Rr;case 96:return Or;case 95:return Ir;default:throw Error(s(332))}}function Ur(t,e){return t=Hr(t),xr(t,e)}function Gr(t,e,n){return t=Hr(t),kr(t,e,n)}function Vr(){if(null!==jr){var t=jr;jr=null,Sr(t)}Wr()}function Wr(){if(!zr&&null!==Dr){zr=!0;var t=0;try{var e=Dr;Ur(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Dr=null}catch(n){throw null!==Dr&&(Dr=Dr.slice(t+1)),kr(Mr,Vr),n}finally{zr=!1}}}var qr=w.ReactCurrentBatchConfig;function Kr(t,e){if(t&&t.defaultProps){for(var n in e=r({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Yr=sr(null),Xr=null,Zr=null,Jr=null;function Qr(){Jr=Zr=Xr=null}function to(t){var e=Yr.current;ar(Yr),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function no(t,e){Xr=t,Jr=Zr=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Ps=!0),t.firstContext=null)}function io(t,e){if(Jr!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Jr=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Zr){if(null===Xr)throw Error(s(308));Zr=e,Xr.dependencies={lanes:0,firstContext:e,responders:null}}else Zr=Zr.next=e;return t._currentValue}var ro=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function so(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ao(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function co(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=e:o=o.next=e}else r=o=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uo(t,e,n,i){var o=t.updateQueue;ro=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var c=l,u=c.next;c.next=null,null===a?s=u:a.next=u,a=c;var h=t.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==a&&(null===f?h.firstBaseUpdate=u:f.next=u,h.lastBaseUpdate=c)}}if(null!==s){for(f=o.baseState,a=0,h=u=c=null;;){l=s.lane;var p=s.eventTime;if((i&l)===l){null!==h&&(h=h.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var d=t,g=s;switch(l=e,p=n,g.tag){case 1:if("function"===typeof(d=g.payload)){f=d.call(p,f,l);break t}f=d;break t;case 3:d.flags=-4097&d.flags|64;case 0:if(null===(l="function"===typeof(d=g.payload)?d.call(p,f,l):d)||void 0===l)break t;f=r({},f,l);break t;case 2:ro=!0}}null!==s.callback&&(t.flags|=32,null===(l=o.effects)?o.effects=[s]:l.push(s))}else p={eventTime:p,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===h?(u=h=p,c=f):h=h.next=p,a|=l;if(null===(s=s.next)){if(null===(l=o.shared.pending))break;s=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===h&&(c=f),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=h,za|=a,t.lanes=a,t.memoizedState=f}}function ho(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var fo=(new i.Component).refs;function po(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:r({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var go={isMounted:function(t){return!!(t=t._reactInternals)&&Xt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=cl(),r=ul(t),o=ao(i,r);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),lo(t,o),hl(t,r,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=cl(),r=ul(t),o=ao(i,r);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),lo(t,o),hl(t,r,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=cl(),i=ul(t),r=ao(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),lo(t,r),hl(t,i,n)}};function mo(t,e,n,i,r,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!ci(n,i)||!ci(r,o))}function vo(t,e,n){var i=!1,r=cr,o=e.contextType;return"object"===typeof o&&null!==o?o=io(o):(r=dr(e)?fr:ur.current,o=(i=null!==(i=e.contextTypes)&&void 0!==i)?pr(t,r):cr),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=go,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function yo(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&go.enqueueReplaceState(e,e.state,null)}function bo(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=fo,oo(t);var o=e.contextType;"object"===typeof o&&null!==o?r.context=io(o):(o=dr(e)?fr:ur.current,r.context=pr(t,o)),uo(t,n,r,i),r.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(po(t,e,o,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&go.enqueueReplaceState(r,r.state,null),uo(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4)}var _o=Array.isArray;function wo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,t));var r=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===r?e.ref:((e=function(t){var e=i.refs;e===fo&&(e=i.refs={}),null===t?delete e[r]:e[r]=t})._stringRef=r,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function xo(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function ko(t){function e(e,n){if(t){var i=e.lastEffect;null!==i?(i.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Ul(t,e)).index=0,t.sibling=null,t}function o(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags=2,n):i:(e.flags=2,n):n}function a(e){return t&&null===e.alternate&&(e.flags=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=ql(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){return null!==e&&e.elementType===n.type?((i=r(e,n.props)).ref=wo(t,e,n),i.return=t,i):((i=Gl(n.type,n.key,n.props,null,t.mode,i)).ref=wo(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Kl(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,o){return null===e||7!==e.tag?((e=Vl(n,t.mode,i,o)).return=t,e):((e=r(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=ql(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(n=Gl(e.type,e.key,e.props,null,t.mode,n)).ref=wo(t,null,e),n.return=t,n;case k:return(e=Kl(e,t.mode,n)).return=t,e}if(_o(e)||H(e))return(e=Vl(e,t.mode,n,null)).return=t,e;xo(t,e)}return null}function p(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?n.type===S?h(t,e,n.props.children,i,r):c(t,e,n,i):null;case k:return n.key===r?u(t,e,n,i):null}if(_o(n)||H(n))return null!==r?null:h(t,e,n,i,null);xo(t,n)}return null}function d(t,e,n,i,r){if("string"===typeof i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return t=t.get(null===i.key?n:i.key)||null,i.type===S?h(e,t,i.props.children,r,i.key):c(e,t,i,r);case k:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r)}if(_o(i)||H(i))return h(e,t=t.get(n)||null,i,r,null);xo(e,i)}return null}function g(r,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=p(r,h,a[g],l);if(null===v){null===h&&(h=m);break}t&&h&&null===v.alternate&&e(r,h),s=o(v,s,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===a.length)return n(r,h),c;if(null===h){for(;g<a.length;g++)null!==(h=f(r,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return c}for(h=i(r,h);g<a.length;g++)null!==(m=d(h,r,g,a[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach((function(t){return e(r,t)})),c}function m(r,a,l,c){var u=H(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=p(r,g,y.value,c);if(null===b){null===g&&(g=v);break}t&&g&&null===b.alternate&&e(r,g),a=o(b,a,m),null===h?u=b:h.sibling=b,h=b,g=v}if(y.done)return n(r,g),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=f(r,y.value,c))&&(a=o(y,a,m),null===h?u=y:h.sibling=y,h=y);return u}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=d(g,r,m,y.value,c))&&(t&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?u=y:h.sibling=y,h=y);return t&&g.forEach((function(t){return e(r,t)})),u}return function(t,i,o,l){var c="object"===typeof o&&null!==o&&o.type===S&&null===o.key;c&&(o=o.props.children);var u="object"===typeof o&&null!==o;if(u)switch(o.$$typeof){case x:t:{for(u=o.key,c=i;null!==c;){if(c.key===u){switch(c.tag){case 7:if(o.type===S){n(t,c.sibling),(i=r(c,o.props.children)).return=t,t=i;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(i=r(c,o.props)).ref=wo(t,c,o),i.return=t,t=i;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===S?((i=Vl(o.props.children,t.mode,l,o.key)).return=t,t=i):((l=Gl(o.type,o.key,o.props,null,t.mode,l)).ref=wo(t,i,o),l.return=t,t=l)}return a(t);case k:t:{for(c=o.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(t,i.sibling),(i=r(i,o.children||[])).return=t,t=i;break t}n(t,i);break}e(t,i),i=i.sibling}(i=Kl(o,t.mode,l)).return=t,t=i}return a(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==i&&6===i.tag?(n(t,i.sibling),(i=r(i,o)).return=t,t=i):(n(t,i),(i=ql(o,t.mode,l)).return=t,t=i),a(t);if(_o(o))return g(t,i,o,l);if(H(o))return m(t,i,o,l);if(u&&xo(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,q(t.type)||"Component"))}return n(t,i)}}var So=ko(!0),Ao=ko(!1),Eo={},To=sr(Eo),Co=sr(Eo),Mo=sr(Eo);function Lo(t){if(t===Eo)throw Error(s(174));return t}function Ro(t,e){switch(lr(Mo,e),lr(Co,t),lr(To,Eo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dt(null,"");break;default:e=dt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ar(To),lr(To,e)}function Oo(){ar(To),ar(Co),ar(Mo)}function Io(t){Lo(Mo.current);var e=Lo(To.current),n=dt(e,t.type);e!==n&&(lr(Co,t),lr(To,n))}function Po(t){Co.current===t&&(ar(To),ar(Co))}var No=sr(0);function Do(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jo=null,zo=null,$o=!1;function Fo(t,e){var n=Bl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Bo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Ho(t){if($o){var e=zo;if(e){var n=e;if(!Bo(t,e)){if(!(e=Vi(n.nextSibling))||!Bo(t,e))return t.flags=-1025&t.flags|2,$o=!1,void(jo=t);Fo(jo,n)}jo=t,zo=Vi(e.firstChild)}else t.flags=-1025&t.flags|2,$o=!1,jo=t}}function Uo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;jo=t}function Go(t){if(t!==jo)return!1;if(!$o)return Uo(t),$o=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Bi(e,t.memoizedProps))for(e=zo;e;)Fo(t,e),e=Vi(e.nextSibling);if(Uo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){zo=Vi(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}zo=null}}else zo=jo?Vi(t.stateNode.nextSibling):null;return!0}function Vo(){zo=jo=null,$o=!1}var Wo=[];function qo(){for(var t=0;t<Wo.length;t++)Wo[t]._workInProgressVersionPrimary=null;Wo.length=0}var Ko=w.ReactCurrentDispatcher,Yo=w.ReactCurrentBatchConfig,Xo=0,Zo=null,Jo=null,Qo=null,ts=!1,es=!1;function ns(){throw Error(s(321))}function is(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function rs(t,e,n,i,r,o){if(Xo=o,Zo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ko.current=null===t||null===t.memoizedState?Ls:Rs,t=n(i,r),es){o=0;do{if(es=!1,!(25>o))throw Error(s(301));o+=1,Qo=Jo=null,e.updateQueue=null,Ko.current=Os,t=n(i,r)}while(es)}if(Ko.current=Ms,e=null!==Jo&&null!==Jo.next,Xo=0,Qo=Jo=Zo=null,ts=!1,e)throw Error(s(300));return t}function os(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Qo?Zo.memoizedState=Qo=t:Qo=Qo.next=t,Qo}function ss(){if(null===Jo){var t=Zo.alternate;t=null!==t?t.memoizedState:null}else t=Jo.next;var e=null===Qo?Zo.memoizedState:Qo.next;if(null!==e)Qo=e,Jo=t;else{if(null===t)throw Error(s(310));t={memoizedState:(Jo=t).memoizedState,baseState:Jo.baseState,baseQueue:Jo.baseQueue,queue:Jo.queue,next:null},null===Qo?Zo.memoizedState=Qo=t:Qo=Qo.next=t}return Qo}function as(t,e){return"function"===typeof e?e(t):e}function ls(t){var e=ss(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=Jo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){r=r.next,i=i.baseState;var l=a=o=null,c=r;do{var u=c.lane;if((Xo&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),i=c.eagerReducer===t?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=h,o=i):l=l.next=h,Zo.lanes|=u,za|=u}c=c.next}while(null!==c&&c!==r);null===l?o=i:l.next=a,ai(i,e.memoizedState)||(Ps=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}return[e.memoizedState,n.dispatch]}function cs(t){var e=ss(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=t(o,a.action),a=a.next}while(a!==r);ai(o,e.memoizedState)||(Ps=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function us(t,e,n){var i=e._getVersion;i=i(e._source);var r=e._workInProgressVersionPrimary;if(null!==r?t=r===i:(t=t.mutableReadLanes,(t=(Xo&t)===t)&&(e._workInProgressVersionPrimary=i,Wo.push(e))),t)return n(e._source);throw Wo.push(e),Error(s(350))}function hs(t,e,n,i){var r=La;if(null===r)throw Error(s(349));var o=e._getVersion,a=o(e._source),l=Ko.current,c=l.useState((function(){return us(r,e,n)})),u=c[1],h=c[0];c=Qo;var f=t.memoizedState,p=f.refs,d=p.getSnapshot,g=f.source;f=f.subscribe;var m=Zo;return t.memoizedState={refs:p,source:e,subscribe:i},l.useEffect((function(){p.getSnapshot=n,p.setSnapshot=u;var t=o(e._source);if(!ai(a,t)){t=n(e._source),ai(h,t)||(u(t),t=ul(m),r.mutableReadLanes|=t&r.pendingLanes),t=r.mutableReadLanes,r.entangledLanes|=t;for(var i=r.entanglements,s=t;0<s;){var l=31-Ge(s),c=1<<l;i[l]|=t,s&=~c}}}),[n,e,i]),l.useEffect((function(){return i(e._source,(function(){var t=p.getSnapshot,n=p.setSnapshot;try{n(t(e._source));var i=ul(m);r.mutableReadLanes|=i&r.pendingLanes}catch(o){n((function(){throw o}))}}))}),[e,i]),ai(d,n)&&ai(g,e)&&ai(f,i)||((t={pending:null,dispatch:null,lastRenderedReducer:as,lastRenderedState:h}).dispatch=u=Cs.bind(null,Zo,t),c.queue=t,c.baseQueue=null,h=us(r,e,n),c.memoizedState=c.baseState=h),h}function fs(t,e,n){return hs(ss(),t,e,n)}function ps(t){var e=os();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:as,lastRenderedState:t}).dispatch=Cs.bind(null,Zo,t),[e.memoizedState,t]}function ds(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=Zo.updateQueue)?(e={lastEffect:null},Zo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function gs(t){return t={current:t},os().memoizedState=t}function ms(){return ss().memoizedState}function vs(t,e,n,i){var r=os();Zo.flags|=t,r.memoizedState=ds(1|e,n,void 0,void 0===i?null:i)}function ys(t,e,n,i){var r=ss();i=void 0===i?null:i;var o=void 0;if(null!==Jo){var s=Jo.memoizedState;if(o=s.destroy,null!==i&&is(i,s.deps))return void ds(e,n,o,i)}Zo.flags|=t,r.memoizedState=ds(1|e,n,o,i)}function bs(t,e){return vs(516,4,t,e)}function _s(t,e){return ys(516,4,t,e)}function ws(t,e){return ys(4,2,t,e)}function xs(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ks(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ys(4,2,xs.bind(null,e,t),n)}function Ss(){}function As(t,e){var n=ss();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&is(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Es(t,e){var n=ss();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&is(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Ts(t,e){var n=Br();Ur(98>n?98:n,(function(){t(!0)})),Ur(97<n?97:n,(function(){var n=Yo.transition;Yo.transition=1;try{t(!1),e()}finally{Yo.transition=n}}))}function Cs(t,e,n){var i=cl(),r=ul(t),o={lane:r,action:n,eagerReducer:null,eagerState:null,next:null},s=e.pending;if(null===s?o.next=o:(o.next=s.next,s.next=o),e.pending=o,s=t.alternate,t===Zo||null!==s&&s===Zo)es=ts=!0;else{if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,l=s(a,n);if(o.eagerReducer=s,o.eagerState=l,ai(l,a))return}catch(c){}hl(t,r,i)}}var Ms={readContext:io,useCallback:ns,useContext:ns,useEffect:ns,useImperativeHandle:ns,useLayoutEffect:ns,useMemo:ns,useReducer:ns,useRef:ns,useState:ns,useDebugValue:ns,useDeferredValue:ns,useTransition:ns,useMutableSource:ns,useOpaqueIdentifier:ns,unstable_isNewReconciler:!1},Ls={readContext:io,useCallback:function(t,e){return os().memoizedState=[t,void 0===e?null:e],t},useContext:io,useEffect:bs,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,vs(4,2,xs.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vs(4,2,t,e)},useMemo:function(t,e){var n=os();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=os();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t=(t=i.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Cs.bind(null,Zo,t),[i.memoizedState,t]},useRef:gs,useState:ps,useDebugValue:Ss,useDeferredValue:function(t){var e=ps(t),n=e[0],i=e[1];return bs((function(){var e=Yo.transition;Yo.transition=1;try{i(t)}finally{Yo.transition=e}}),[t]),n},useTransition:function(){var t=ps(!1),e=t[0];return gs(t=Ts.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var i=os();return i.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},hs(i,t,e,n)},useOpaqueIdentifier:function(){if($o){var t=!1,e=function(t){return{$$typeof:N,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+(qi++).toString(36))),Error(s(355))})),n=ps(e)[1];return 0===(2&Zo.mode)&&(Zo.flags|=516,ds(5,(function(){n("r:"+(qi++).toString(36))}),void 0,null)),e}return ps(e="r:"+(qi++).toString(36)),e},unstable_isNewReconciler:!1},Rs={readContext:io,useCallback:As,useContext:io,useEffect:_s,useImperativeHandle:ks,useLayoutEffect:ws,useMemo:Es,useReducer:ls,useRef:ms,useState:function(){return ls(as)},useDebugValue:Ss,useDeferredValue:function(t){var e=ls(as),n=e[0],i=e[1];return _s((function(){var e=Yo.transition;Yo.transition=1;try{i(t)}finally{Yo.transition=e}}),[t]),n},useTransition:function(){var t=ls(as)[0];return[ms().current,t]},useMutableSource:fs,useOpaqueIdentifier:function(){return ls(as)[0]},unstable_isNewReconciler:!1},Os={readContext:io,useCallback:As,useContext:io,useEffect:_s,useImperativeHandle:ks,useLayoutEffect:ws,useMemo:Es,useReducer:cs,useRef:ms,useState:function(){return cs(as)},useDebugValue:Ss,useDeferredValue:function(t){var e=cs(as),n=e[0],i=e[1];return _s((function(){var e=Yo.transition;Yo.transition=1;try{i(t)}finally{Yo.transition=e}}),[t]),n},useTransition:function(){var t=cs(as)[0];return[ms().current,t]},useMutableSource:fs,useOpaqueIdentifier:function(){return cs(as)[0]},unstable_isNewReconciler:!1},Is=w.ReactCurrentOwner,Ps=!1;function Ns(t,e,n,i){e.child=null===t?Ao(e,null,n,i):So(e,t.child,n,i)}function Ds(t,e,n,i,r){n=n.render;var o=e.ref;return no(e,r),i=rs(t,e,n,i,o,r),null===t||Ps?(e.flags|=1,Ns(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~r,na(t,e,r))}function js(t,e,n,i,r,o){if(null===t){var s=n.type;return"function"!==typeof s||Hl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Gl(n.type,null,i,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,zs(t,e,s,i,r,o))}return s=t.child,0===(r&o)&&(r=s.memoizedProps,(n=null!==(n=n.compare)?n:ci)(r,i)&&t.ref===e.ref)?na(t,e,o):(e.flags|=1,(t=Ul(s,i)).ref=e.ref,t.return=e,e.child=t)}function zs(t,e,n,i,r,o){if(null!==t&&ci(t.memoizedProps,i)&&t.ref===e.ref){if(Ps=!1,0===(o&r))return e.lanes=t.lanes,na(t,e,o);0!==(16384&t.flags)&&(Ps=!0)}return Bs(t,e,n,i,o)}function $s(t,e,n){var i=e.pendingProps,r=i.children,o=null!==t?t.memoizedState:null;if("hidden"===i.mode||"unstable-defer-without-hiding"===i.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},bl(e,n);else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},bl(e,t),null;e.memoizedState={baseLanes:0},bl(e,null!==o?o.baseLanes:n)}else null!==o?(i=o.baseLanes|n,e.memoizedState=null):i=n,bl(e,i);return Ns(t,e,r,n),e.child}function Fs(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function Bs(t,e,n,i,r){var o=dr(n)?fr:ur.current;return o=pr(e,o),no(e,r),n=rs(t,e,n,i,o,r),null===t||Ps?(e.flags|=1,Ns(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~r,na(t,e,r))}function Hs(t,e,n,i,r){if(dr(n)){var o=!0;yr(e)}else o=!1;if(no(e,r),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),vo(e,n,i),bo(e,n,i,r),i=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=io(c):c=pr(e,c=dr(n)?fr:ur.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==c)&&yo(e,s,i,c),ro=!1;var f=e.memoizedState;s.state=f,uo(e,i,s,r),l=e.memoizedState,a!==i||f!==l||hr.current||ro?("function"===typeof u&&(po(e,n,u,i),l=e.memoizedState),(a=ro||mo(e,n,a,i,f,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4)):("function"===typeof s.componentDidMount&&(e.flags|=4),e.memoizedProps=i,e.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):("function"===typeof s.componentDidMount&&(e.flags|=4),i=!1)}else{s=e.stateNode,so(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Kr(e.type,a),s.props=c,h=e.pendingProps,f=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=io(l):l=pr(e,l=dr(n)?fr:ur.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||f!==l)&&yo(e,s,i,l),ro=!1,f=e.memoizedState,s.state=f,uo(e,i,s,r);var d=e.memoizedState;a!==h||f!==d||hr.current||ro?("function"===typeof p&&(po(e,n,p,i),d=e.memoizedState),(c=ro||mo(e,n,c,i,f,d,l))?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,d,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,d,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=i,e.memoizedState=d),s.props=i,s.state=d,s.context=l,i=c):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),i=!1)}return Us(t,e,n,i,o,r)}function Us(t,e,n,i,r,o){Fs(t,e);var s=0!==(64&e.flags);if(!i&&!s)return r&&br(e,n,!1),na(t,e,o);i=e.stateNode,Is.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&s?(e.child=So(e,t.child,null,o),e.child=So(e,null,a,o)):Ns(t,e,a,o),e.memoizedState=i.state,r&&br(e,n,!0),e.child}function Gs(t){var e=t.stateNode;e.pendingContext?mr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&mr(0,e.context,!1),Ro(t,e.containerInfo)}var Vs,Ws,qs,Ks={dehydrated:null,retryLane:0};function Ys(t,e,n){var i,r=e.pendingProps,o=No.current,s=!1;return(i=0!==(64&e.flags))||(i=(null===t||null!==t.memoizedState)&&0!==(2&o)),i?(s=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(o|=1),lr(No,1&o),null===t?(void 0!==r.fallback&&Ho(e),t=r.children,o=r.fallback,s?(t=Xs(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ks,t):"number"===typeof r.unstable_expectedLoadTime?(t=Xs(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ks,e.lanes=33554432,t):((n=Wl({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,s?(r=Js(t,e,r.children,r.fallback,n),s=e.child,o=t.child.memoizedState,s.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=Ks,r):(n=Zs(t,e,r.children,n),e.memoizedState=null,n))}function Xs(t,e,n,i){var r=t.mode,o=t.child;return e={mode:"hidden",children:e},0===(2&r)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Wl(e,r,0,null),n=Vl(n,r,i,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function Zs(t,e,n,i){var r=t.child;return t=r.sibling,n=Ul(r,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=i),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function Js(t,e,n,i,r){var o=e.mode,s=t.child;t=s.sibling;var a={mode:"hidden",children:n};return 0===(2&o)&&e.child!==s?((n=e.child).childLanes=0,n.pendingProps=a,null!==(s=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=s,s.nextEffect=null):e.firstEffect=e.lastEffect=null):n=Ul(s,a),null!==t?i=Ul(t,i):(i=Vl(i,o,r,null)).flags|=2,i.return=e,n.return=e,n.sibling=i,e.child=n,i}function Qs(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),eo(t.return,e)}function ta(t,e,n,i,r,o){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r,s.lastEffect=o)}function ea(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Ns(t,e,i.children,n),0!==(2&(i=No.current)))i=1&i|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Qs(t,n);else if(19===t.tag)Qs(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(lr(No,i),0===(2&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===Do(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ta(e,!1,r,n,o,e.lastEffect);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===Do(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ta(e,!0,n,null,o,e.lastEffect);break;case"together":ta(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function na(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),za|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Ul(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Ul(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function ia(t,e){if(!$o)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ra(t,e,n){var i=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return dr(e.type)&&gr(),null;case 3:return Oo(),ar(hr),ar(ur),qo(),(i=e.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(Go(e)?e.flags|=4:i.hydrate||(e.flags|=256)),null;case 5:Po(e);var o=Lo(Mo.current);if(n=e.type,null!==t&&null!=e.stateNode)Ws(t,e,n,i),t.ref!==e.ref&&(e.flags|=128);else{if(!i){if(null===e.stateNode)throw Error(s(166));return null}if(t=Lo(To.current),Go(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[Yi]=e,i[Xi]=a,n){case"dialog":Ti("cancel",i),Ti("close",i);break;case"iframe":case"object":case"embed":Ti("load",i);break;case"video":case"audio":for(t=0;t<ki.length;t++)Ti(ki[t],i);break;case"source":Ti("error",i);break;case"img":case"image":case"link":Ti("error",i),Ti("load",i);break;case"details":Ti("toggle",i);break;case"input":tt(i,a),Ti("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Ti("invalid",i);break;case"textarea":lt(i,a),Ti("invalid",i)}for(var c in St(n,a),t=null,a)a.hasOwnProperty(c)&&(o=a[c],"children"===c?"string"===typeof o?i.textContent!==o&&(t=["children",o]):"number"===typeof o&&i.textContent!==""+o&&(t=["children",""+o]):l.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Ti("scroll",i));switch(n){case"input":X(i),it(i,a,!0);break;case"textarea":X(i),ut(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=ji)}i=t,e.updateQueue=i,null!==i&&(e.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,t===ht&&(t=pt(n)),t===ht?"script"===n?((t=c.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=c.createElement(n,{is:i.is}):(t=c.createElement(n),"select"===n&&(c=t,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):t=c.createElementNS(t,n),t[Yi]=e,t[Xi]=i,Vs(t,e),e.stateNode=t,c=At(n,i),n){case"dialog":Ti("cancel",t),Ti("close",t),o=i;break;case"iframe":case"object":case"embed":Ti("load",t),o=i;break;case"video":case"audio":for(o=0;o<ki.length;o++)Ti(ki[o],t);o=i;break;case"source":Ti("error",t),o=i;break;case"img":case"image":case"link":Ti("error",t),Ti("load",t),o=i;break;case"details":Ti("toggle",t),o=i;break;case"input":tt(t,i),o=Q(t,i),Ti("invalid",t);break;case"option":o=ot(t,i);break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=r({},i,{value:void 0}),Ti("invalid",t);break;case"textarea":lt(t,i),o=at(t,i),Ti("invalid",t);break;default:o=i}St(n,o);var u=o;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?xt(t,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&vt(t,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&yt(t,h):"number"===typeof h&&yt(t,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Ti("scroll",t):null!=h&&_(t,a,h,c))}switch(n){case"input":X(t),it(t,i,!1);break;case"textarea":X(t),ut(t);break;case"option":null!=i.value&&t.setAttribute("value",""+K(i.value));break;case"select":t.multiple=!!i.multiple,null!=(a=i.value)?st(t,!!i.multiple,a,!1):null!=i.defaultValue&&st(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=ji)}Fi(n,i)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)qs(0,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(s(166));n=Lo(Mo.current),Lo(To.current),Go(e)?(i=e.stateNode,n=e.memoizedProps,i[Yi]=e,i.nodeValue!==n&&(e.flags|=4)):((i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[Yi]=e,e.stateNode=i)}return null;case 13:return ar(No),i=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(i=null!==i,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Go(e):n=null!==t.memoizedState,i&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&No.current)?0===Na&&(Na=3):(0!==Na&&3!==Na||(Na=4),null===La||0===(134217727&za)&&0===(134217727&$a)||gl(La,Oa))),(i||n)&&(e.flags|=4),null);case 4:return Oo(),null===t&&Mi(e.stateNode.containerInfo),null;case 10:return to(e),null;case 17:return dr(e.type)&&gr(),null;case 19:if(ar(No),null===(i=e.memoizedState))return null;if(a=0!==(64&e.flags),null===(c=i.rendering))if(a)ia(i,!1);else{if(0!==Na||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(c=Do(t))){for(e.flags|=64,ia(i,!1),null!==(a=c.updateQueue)&&(e.updateQueue=a,e.flags|=4),null===i.lastEffect&&(e.firstEffect=null),e.lastEffect=i.lastEffect,i=n,n=e.child;null!==n;)t=i,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,t=c.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lr(No,1&No.current|2),e.child}t=t.sibling}null!==i.tail&&Fr()>Ua&&(e.flags|=64,a=!0,ia(i,!1),e.lanes=33554432)}else{if(!a)if(null!==(t=Do(c))){if(e.flags|=64,a=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),ia(i,!0),null===i.tail&&"hidden"===i.tailMode&&!c.alternate&&!$o)return null!==(e=e.lastEffect=i.lastEffect)&&(e.nextEffect=null),null}else 2*Fr()-i.renderingStartTime>Ua&&1073741824!==n&&(e.flags|=64,a=!0,ia(i,!1),e.lanes=33554432);i.isBackwards?(c.sibling=e.child,e.child=c):(null!==(n=i.last)?n.sibling=c:e.child=c,i.last=c)}return null!==i.tail?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=e.lastEffect,i.renderingStartTime=Fr(),n.sibling=null,e=No.current,lr(No,a?1&e|2:1&e),n):null;case 23:case 24:return _l(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==i.mode&&(e.flags|=4),null}throw Error(s(156,e.tag))}function oa(t){switch(t.tag){case 1:dr(t.type)&&gr();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Oo(),ar(hr),ar(ur),qo(),0!==(64&(e=t.flags)))throw Error(s(285));return t.flags=-4097&e|64,t;case 5:return Po(t),null;case 13:return ar(No),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return ar(No),null;case 4:return Oo(),null;case 10:return to(t),null;case 23:case 24:return _l(),null;default:return null}}function sa(t,e){try{var n="",i=e;do{n+=W(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:r}}function aa(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}Vs=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ws=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,Lo(To.current);var s,a=null;switch(n){case"input":o=Q(t,o),i=Q(t,i),a=[];break;case"option":o=ot(t,o),i=ot(t,i),a=[];break;case"select":o=r({},o,{value:void 0}),i=r({},i,{value:void 0}),a=[];break;case"textarea":o=at(t,o),i=at(t,i),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof i.onClick&&(t.onclick=ji)}for(h in St(n,i),n=null,o)if(!i.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var c=o[h];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in i){var u=i[h];if(c=null!=o?o[h]:void 0,i.hasOwnProperty(h)&&u!==c&&(null!=u||null!=c))if("style"===h)if(c){for(s in c)!c.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&c[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(a||(a=[]),a.push(h,n)),n=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(a=a||[]).push(h,u)):"children"===h?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Ti("scroll",t),a||c===u||(a=[])):"object"===typeof u&&null!==u&&u.$$typeof===N?u.toString():(a=a||[]).push(h,u))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}},qs=function(t,e,n,i){n!==i&&(e.flags|=4)};var la="function"===typeof WeakMap?WeakMap:Map;function ca(t,e,n){(n=ao(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){qa||(qa=!0,Ka=i),aa(0,e)},n}function ua(t,e,n){(n=ao(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return aa(0,e),i(r)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof i&&(null===Ya?Ya=new Set([this]):Ya.add(this),aa(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var ha="function"===typeof WeakSet?WeakSet:Set;function fa(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){jl(t,n)}else e.current=null}function pa(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,i=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Kr(e.type,n),i),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Gi(e.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function da(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var r=t;i=r.next,0!==(4&(r=r.tag))&&0!==(1&r)&&(Pl(n,t),Il(n,t)),t=i}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(i=n.elementType===n.type?e.memoizedProps:Kr(n.type,e.memoizedProps),t.componentDidUpdate(i,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&ho(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ho(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&Fi(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xe(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function ga(t,e){for(var n=t;;){if(5===n.tag){var i=n.stateNode;if(e)"function"===typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{i=n.stateNode;var r=n.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,i.style.display=wt("display",r)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ma(t,e){if(wr&&"function"===typeof wr.onCommitFiberUnmount)try{wr.onCommitFiberUnmount(_r,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var i=n,r=i.destroy;if(i=i.tag,void 0!==r)if(0!==(4&i))Pl(e,n);else{i=e;try{r()}catch(o){jl(i,o)}}n=n.next}while(n!==t)}break;case 1:if(fa(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){jl(e,o)}break;case 5:fa(e);break;case 4:xa(t,e)}}function va(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function ya(t){return 5===t.tag||3===t.tag||4===t.tag}function ba(t){t:{for(var e=t.return;null!==e;){if(ya(e))break t;e=e.return}throw Error(s(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:e=e.containerInfo,i=!0;break;default:throw Error(s(161))}16&n.flags&&(yt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ya(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}i?_a(t,n,e):wa(t,n,e)}function _a(t,e,n){var i=t.tag,r=5===i||6===i;if(r)t=r?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=ji));else if(4!==i&&null!==(t=t.child))for(_a(t,e,n),t=t.sibling;null!==t;)_a(t,e,n),t=t.sibling}function wa(t,e,n){var i=t.tag,r=5===i||6===i;if(r)t=r?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(wa(t,e,n),t=t.sibling;null!==t;)wa(t,e,n),t=t.sibling}function xa(t,e){for(var n,i,r=e,o=!1;;){if(!o){o=r.return;t:for(;;){if(null===o)throw Error(s(160));switch(n=o.stateNode,o.tag){case 5:i=!1;break t;case 3:case 4:n=n.containerInfo,i=!0;break t}o=o.return}o=!0}if(5===r.tag||6===r.tag){t:for(var a=t,l=r,c=l;;)if(ma(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break t;for(;null===c.sibling;){if(null===c.return||c.return===l)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}i?(a=n,l=r.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){n=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(ma(t,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;4===(r=r.return).tag&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function ka(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{3===(3&i.tag)&&(t=i.destroy,i.destroy=void 0,void 0!==t&&t()),i=i.next}while(i!==n)}return;case 1:return;case 5:if(null!=(n=e.stateNode)){i=e.memoizedProps;var r=null!==t?t.memoizedProps:i;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Xi]=i,"input"===t&&"radio"===i.type&&null!=i.name&&et(n,i),At(t,r),e=At(t,i),r=0;r<o.length;r+=2){var a=o[r],l=o[r+1];"style"===a?xt(n,l):"dangerouslySetInnerHTML"===a?vt(n,l):"children"===a?yt(n,l):_(n,a,l,e)}switch(t){case"input":nt(n,i);break;case"textarea":ct(n,i);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(o=i.value)?st(n,!!i.multiple,o,!1):t!==!!i.multiple&&(null!=i.defaultValue?st(n,!!i.multiple,i.defaultValue,!0):st(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(s(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,xe(n.containerInfo)));case 12:return;case 13:return null!==e.memoizedState&&(Ha=Fr(),ga(e.child,!0)),void Sa(e);case 19:return void Sa(e);case 17:return;case 23:case 24:return void ga(e,null!==e.memoizedState)}throw Error(s(163))}function Sa(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new ha),e.forEach((function(e){var i=$l.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function Aa(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Ea=Math.ceil,Ta=w.ReactCurrentDispatcher,Ca=w.ReactCurrentOwner,Ma=0,La=null,Ra=null,Oa=0,Ia=0,Pa=sr(0),Na=0,Da=null,ja=0,za=0,$a=0,Fa=0,Ba=null,Ha=0,Ua=1/0;function Ga(){Ua=Fr()+500}var Va,Wa=null,qa=!1,Ka=null,Ya=null,Xa=!1,Za=null,Ja=90,Qa=[],tl=[],el=null,nl=0,il=null,rl=-1,ol=0,sl=0,al=null,ll=!1;function cl(){return 0!==(48&Ma)?Fr():-1!==rl?rl:rl=Fr()}function ul(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===Br()?1:2;if(0===ol&&(ol=ja),0!==qr.transition){0!==sl&&(sl=null!==Ba?Ba.pendingLanes:0),t=ol;var e=4186112&~sl;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=Br(),0!==(4&Ma)&&98===t?t=Fe(12,ol):t=Fe(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),ol),t}function hl(t,e,n){if(50<nl)throw nl=0,il=null,Error(s(185));if(null===(t=fl(t,e)))return null;Ue(t,e,n),t===La&&($a|=e,4===Na&&gl(t,Oa));var i=Br();1===e?0!==(8&Ma)&&0===(48&Ma)?ml(t):(pl(t,n),0===Ma&&(Ga(),Vr())):(0===(4&Ma)||98!==i&&99!==i||(null===el?el=new Set([t]):el.add(t)),pl(t,n)),Ba=t}function fl(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function pl(t,e){for(var n=t.callbackNode,i=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Ge(a),c=1<<l,u=o[l];if(-1===u){if(0===(c&i)||0!==(c&r)){u=e,je(c);var h=De;o[l]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=e&&(t.expiredLanes|=c);a&=~c}if(i=ze(t,t===La?Oa:0),e=De,0===i)null!==n&&(n!==Pr&&Sr(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Pr&&Sr(n)}15===e?(n=ml.bind(null,t),null===Dr?(Dr=[n],jr=kr(Mr,Wr)):Dr.push(n),n=Pr):14===e?n=Gr(99,ml.bind(null,t)):n=Gr(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,t))}}(e),dl.bind(null,t)),t.callbackPriority=e,t.callbackNode=n}}function dl(t){if(rl=-1,sl=ol=0,0!==(48&Ma))throw Error(s(327));var e=t.callbackNode;if(Ol()&&t.callbackNode!==e)return null;var n=ze(t,t===La?Oa:0);if(0===n)return null;var i=n,r=Ma;Ma|=16;var o=kl();for(La===t&&Oa===i||(Ga(),wl(t,i));;)try{El();break}catch(l){xl(t,l)}if(Qr(),Ta.current=o,Ma=r,null!==Ra?i=0:(La=null,Oa=0,i=Na),0!==(ja&$a))wl(t,0);else if(0!==i){if(2===i&&(Ma|=64,t.hydrate&&(t.hydrate=!1,Gi(t.containerInfo)),0!==(n=$e(t))&&(i=Sl(t,n))),1===i)throw e=Da,wl(t,0),gl(t,n),pl(t,Fr()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,i){case 0:case 1:throw Error(s(345));case 2:Ml(t);break;case 3:if(gl(t,n),(62914560&n)===n&&10<(i=Ha+500-Fr())){if(0!==ze(t,0))break;if(((r=t.suspendedLanes)&n)!==n){cl(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Hi(Ml.bind(null,t),i);break}Ml(t);break;case 4:if(gl(t,n),(4186112&n)===n)break;for(i=t.eventTimes,r=-1;0<n;){var a=31-Ge(n);o=1<<a,(a=i[a])>r&&(r=a),n&=~o}if(n=r,10<(n=(120>(n=Fr()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ea(n/1960))-n)){t.timeoutHandle=Hi(Ml.bind(null,t),n);break}Ml(t);break;case 5:Ml(t);break;default:throw Error(s(329))}}return pl(t,Fr()),t.callbackNode===e?dl.bind(null,t):null}function gl(t,e){for(e&=~Fa,e&=~$a,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ge(e),i=1<<n;t[n]=-1,e&=~i}}function ml(t){if(0!==(48&Ma))throw Error(s(327));if(Ol(),t===La&&0!==(t.expiredLanes&Oa)){var e=Oa,n=Sl(t,e);0!==(ja&$a)&&(n=Sl(t,e=ze(t,e)))}else n=Sl(t,e=ze(t,0));if(0!==t.tag&&2===n&&(Ma|=64,t.hydrate&&(t.hydrate=!1,Gi(t.containerInfo)),0!==(e=$e(t))&&(n=Sl(t,e))),1===n)throw n=Da,wl(t,0),gl(t,e),pl(t,Fr()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ml(t),pl(t,Fr()),null}function vl(t,e){var n=Ma;Ma|=1;try{return t(e)}finally{0===(Ma=n)&&(Ga(),Vr())}}function yl(t,e){var n=Ma;Ma&=-2,Ma|=8;try{return t(e)}finally{0===(Ma=n)&&(Ga(),Vr())}}function bl(t,e){lr(Pa,Ia),Ia|=e,ja|=e}function _l(){Ia=Pa.current,ar(Pa)}function wl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Ui(n)),null!==Ra)for(n=Ra.return;null!==n;){var i=n;switch(i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&gr();break;case 3:Oo(),ar(hr),ar(ur),qo();break;case 5:Po(i);break;case 4:Oo();break;case 13:case 19:ar(No);break;case 10:to(i);break;case 23:case 24:_l()}n=n.return}La=t,Ra=Ul(t.current,null),Oa=Ia=ja=e,Na=0,Da=null,Fa=$a=za=0}function xl(t,e){for(;;){var n=Ra;try{if(Qr(),Ko.current=Ms,ts){for(var i=Zo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ts=!1}if(Xo=0,Qo=Jo=Zo=null,es=!1,Ca.current=null,null===n||null===n.return){Na=1,Da=e,Ra=null;break}t:{var o=t,s=n.return,a=n,l=e;if(e=Oa,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l;if(0===(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!==(1&No.current),f=s;do{var p;if(p=13===f.tag){var d=f.memoizedState;if(null!==d)p=null!==d.dehydrated;else{var g=f.memoizedProps;p=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!h)}}if(p){var m=f.updateQueue;if(null===m){var v=new Set;v.add(c),f.updateQueue=v}else m.add(c);if(0===(2&f.mode)){if(f.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=ao(-1,1);y.tag=2,lo(a,y)}a.lanes|=1;break t}l=void 0,a=e;var b=o.pingCache;if(null===b?(b=o.pingCache=new la,l=new Set,b.set(c,l)):void 0===(l=b.get(c))&&(l=new Set,b.set(c,l)),!l.has(a)){l.add(a);var _=zl.bind(null,o,c,a);c.then(_,_)}f.flags|=4096,f.lanes=e;break t}f=f.return}while(null!==f);l=Error((q(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Na&&(Na=2),l=sa(l,a),f=s;do{switch(f.tag){case 3:o=l,f.flags|=4096,e&=-e,f.lanes|=e,co(f,ca(0,o,e));break t;case 1:o=l;var w=f.type,x=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Ya||!Ya.has(x)))){f.flags|=4096,e&=-e,f.lanes|=e,co(f,ua(f,o,e));break t}}f=f.return}while(null!==f)}Cl(n)}catch(k){e=k,Ra===n&&null!==n&&(Ra=n=n.return);continue}break}}function kl(){var t=Ta.current;return Ta.current=Ms,null===t?Ms:t}function Sl(t,e){var n=Ma;Ma|=16;var i=kl();for(La===t&&Oa===e||wl(t,e);;)try{Al();break}catch(r){xl(t,r)}if(Qr(),Ma=n,Ta.current=i,null!==Ra)throw Error(s(261));return La=null,Oa=0,Na}function Al(){for(;null!==Ra;)Tl(Ra)}function El(){for(;null!==Ra&&!Ar();)Tl(Ra)}function Tl(t){var e=Va(t.alternate,t,Ia);t.memoizedProps=t.pendingProps,null===e?Cl(t):Ra=e,Ca.current=null}function Cl(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=ra(n,e,Ia)))return void(Ra=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ia)||0===(4&n.mode)){for(var i=0,r=n.child;null!==r;)i|=r.lanes|r.childLanes,r=r.sibling;n.childLanes=i}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=oa(e)))return n.flags&=2047,void(Ra=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Ra=e);Ra=e=t}while(null!==e);0===Na&&(Na=5)}function Ml(t){var e=Br();return Ur(99,Ll.bind(null,t,e)),null}function Ll(t,e){do{Ol()}while(null!==Za);if(0!==(48&Ma))throw Error(s(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null;var i=n.lanes|n.childLanes,r=i,o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;for(var a=t.eventTimes,l=t.expirationTimes;0<o;){var c=31-Ge(o),u=1<<c;r[c]=0,a[c]=-1,l[c]=-1,o&=~u}if(null!==el&&0===(24&i)&&el.has(t)&&el.delete(t),t===La&&(Ra=La=null,Oa=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){if(r=Ma,Ma|=32,Ca.current=null,zi=Ye,di(a=pi())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else t:if(l=(l=a.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,o=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(E){l=null;break t}var h=0,f=-1,p=-1,d=0,g=0,m=a,v=null;e:for(;;){for(var y;m!==l||0!==o&&3!==m.nodeType||(f=h+o),m!==c||0!==u&&3!==m.nodeType||(p=h+u),3===m.nodeType&&(h+=m.nodeValue.length),null!==(y=m.firstChild);)v=m,m=y;for(;;){if(m===a)break e;if(v===l&&++d===o&&(f=h),v===c&&++g===u&&(p=h),null!==(y=m.nextSibling))break;v=(m=v).parentNode}m=y}l=-1===f||-1===p?null:{start:f,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;$i={focusedElem:a,selectionRange:l},Ye=!1,al=null,ll=!1,Wa=i;do{try{Rl()}catch(E){if(null===Wa)throw Error(s(330));jl(Wa,E),Wa=Wa.nextEffect}}while(null!==Wa);al=null,Wa=i;do{try{for(a=t;null!==Wa;){var b=Wa.flags;if(16&b&&yt(Wa.stateNode,""),128&b){var _=Wa.alternate;if(null!==_){var w=_.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&b){case 2:ba(Wa),Wa.flags&=-3;break;case 6:ba(Wa),Wa.flags&=-3,ka(Wa.alternate,Wa);break;case 1024:Wa.flags&=-1025;break;case 1028:Wa.flags&=-1025,ka(Wa.alternate,Wa);break;case 4:ka(Wa.alternate,Wa);break;case 8:xa(a,l=Wa);var x=l.alternate;va(l),null!==x&&va(x)}Wa=Wa.nextEffect}}catch(E){if(null===Wa)throw Error(s(330));jl(Wa,E),Wa=Wa.nextEffect}}while(null!==Wa);if(w=$i,_=pi(),b=w.focusedElem,a=w.selectionRange,_!==b&&b&&b.ownerDocument&&fi(b.ownerDocument.documentElement,b)){null!==a&&di(b)&&(_=a.start,void 0===(w=a.end)&&(w=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(w,b.value.length)):(w=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),l=b.textContent.length,x=Math.min(a.start,l),a=void 0===a.end?x:Math.min(a.end,l),!w.extend&&x>a&&(l=a,a=x,x=l),l=hi(b,x),o=hi(b,a),l&&o&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==o.node||w.focusOffset!==o.offset)&&((_=_.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),x>a?(w.addRange(_),w.extend(o.node,o.offset)):(_.setEnd(o.node,o.offset),w.addRange(_))))),_=[];for(w=b;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(w=_[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Ye=!!zi,$i=zi=null,t.current=n,Wa=i;do{try{for(b=t;null!==Wa;){var k=Wa.flags;if(36&k&&da(b,Wa.alternate,Wa),128&k){_=void 0;var S=Wa.ref;if(null!==S){var A=Wa.stateNode;switch(Wa.tag){case 5:_=A;break;default:_=A}"function"===typeof S?S(_):S.current=_}}Wa=Wa.nextEffect}}catch(E){if(null===Wa)throw Error(s(330));jl(Wa,E),Wa=Wa.nextEffect}}while(null!==Wa);Wa=null,Nr(),Ma=r}else t.current=n;if(Xa)Xa=!1,Za=t,Ja=e;else for(Wa=i;null!==Wa;)e=Wa.nextEffect,Wa.nextEffect=null,8&Wa.flags&&((k=Wa).sibling=null,k.stateNode=null),Wa=e;if(0===(i=t.pendingLanes)&&(Ya=null),1===i?t===il?nl++:(nl=0,il=t):nl=0,n=n.stateNode,wr&&"function"===typeof wr.onCommitFiberRoot)try{wr.onCommitFiberRoot(_r,n,void 0,64===(64&n.current.flags))}catch(E){}if(pl(t,Fr()),qa)throw qa=!1,t=Ka,Ka=null,t;return 0!==(8&Ma)||Vr(),null}function Rl(){for(;null!==Wa;){var t=Wa.alternate;ll||null===al||(0!==(8&Wa.flags)?te(Wa,al)&&(ll=!0):13===Wa.tag&&Aa(t,Wa)&&te(Wa,al)&&(ll=!0));var e=Wa.flags;0!==(256&e)&&pa(t,Wa),0===(512&e)||Xa||(Xa=!0,Gr(97,(function(){return Ol(),null}))),Wa=Wa.nextEffect}}function Ol(){if(90!==Ja){var t=97<Ja?97:Ja;return Ja=90,Ur(t,Nl)}return!1}function Il(t,e){Qa.push(e,t),Xa||(Xa=!0,Gr(97,(function(){return Ol(),null})))}function Pl(t,e){tl.push(e,t),Xa||(Xa=!0,Gr(97,(function(){return Ol(),null})))}function Nl(){if(null===Za)return!1;var t=Za;if(Za=null,0!==(48&Ma))throw Error(s(331));var e=Ma;Ma|=32;var n=tl;tl=[];for(var i=0;i<n.length;i+=2){var r=n[i],o=n[i+1],a=r.destroy;if(r.destroy=void 0,"function"===typeof a)try{a()}catch(c){if(null===o)throw Error(s(330));jl(o,c)}}for(n=Qa,Qa=[],i=0;i<n.length;i+=2){r=n[i],o=n[i+1];try{var l=r.create;r.destroy=l()}catch(c){if(null===o)throw Error(s(330));jl(o,c)}}for(l=t.current.firstEffect;null!==l;)t=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=t;return Ma=e,Vr(),!0}function Dl(t,e,n){lo(t,e=ca(0,e=sa(n,e),1)),e=cl(),null!==(t=fl(t,1))&&(Ue(t,1,e),pl(t,e))}function jl(t,e){if(3===t.tag)Dl(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Dl(n,t,e);break}if(1===n.tag){var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Ya||!Ya.has(i))){var r=ua(n,t=sa(e,t),1);if(lo(n,r),r=cl(),null!==(n=fl(n,1)))Ue(n,1,r),pl(n,r);else if("function"===typeof i.componentDidCatch&&(null===Ya||!Ya.has(i)))try{i.componentDidCatch(e,t)}catch(o){}break}}n=n.return}}function zl(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=cl(),t.pingedLanes|=t.suspendedLanes&n,La===t&&(Oa&n)===n&&(4===Na||3===Na&&(62914560&Oa)===Oa&&500>Fr()-Ha?wl(t,0):Fa|=n),pl(t,e)}function $l(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===Br()?1:2:(0===ol&&(ol=ja),0===(e=Be(62914560&~ol))&&(e=4194304))),n=cl(),null!==(t=fl(t,e))&&(Ue(t,e,n),pl(t,n))}function Fl(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Bl(t,e,n,i){return new Fl(t,e,n,i)}function Hl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Ul(t,e){var n=t.alternate;return null===n?((n=Bl(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gl(t,e,n,i,r,o){var a=2;if(i=t,"function"===typeof t)Hl(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case S:return Vl(n.children,r,o,e);case D:a=8,r|=16;break;case A:a=8,r|=1;break;case E:return(t=Bl(12,n,e,8|r)).elementType=E,t.type=E,t.lanes=o,t;case L:return(t=Bl(13,n,e,r)).type=L,t.elementType=L,t.lanes=o,t;case R:return(t=Bl(19,n,e,r)).elementType=R,t.lanes=o,t;case j:return Wl(n,r,o,e);case z:return(t=Bl(24,n,e,r)).elementType=z,t.lanes=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case T:a=10;break t;case C:a=9;break t;case M:a=11;break t;case O:a=14;break t;case I:a=16,i=null;break t;case P:a=22;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Bl(a,n,e,r)).elementType=t,e.type=i,e.lanes=o,e}function Vl(t,e,n,i){return(t=Bl(7,t,i,e)).lanes=n,t}function Wl(t,e,n,i){return(t=Bl(23,t,i,e)).elementType=j,t.lanes=n,t}function ql(t,e,n){return(t=Bl(6,t,null,e)).lanes=n,t}function Kl(t,e,n){return(e=Bl(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yl(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=He(0),this.expirationTimes=He(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=He(0),this.mutableSourceEagerHydrationData=null}function Xl(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}function Zl(t,e,n,i){var r=e.current,o=cl(),a=ul(r);t:if(n){e:{if(Xt(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(dr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var c=n.type;if(dr(c)){n=vr(n,c,l);break t}}n=l}else n=cr;return null===e.context?e.context=n:e.pendingContext=n,(e=ao(o,a)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),lo(r,e),hl(r,a,o),a}function Jl(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Ql(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function tc(t,e){Ql(t,e),(t=t.alternate)&&Ql(t,e)}function ec(t,e,n){var i=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Yl(t,e,null!=n&&!0===n.hydrate),e=Bl(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,oo(e),t[Zi]=n.current,Mi(8===t.nodeType?t.parentNode:t),i)for(t=0;t<i.length;t++){var r=(e=i[t])._getVersion;r=r(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,r]:n.mutableSourceEagerHydrationData.push(e,r)}this._internalRoot=n}function nc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function ic(t,e,n,i,r){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof r){var a=r;r=function(){var t=Jl(s);a.call(t)}}Zl(e,s,t,r)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new ec(t,0,e?{hydrate:!0}:void 0)}(n,i),s=o._internalRoot,"function"===typeof r){var l=r;r=function(){var t=Jl(s);l.call(t)}}yl((function(){Zl(e,s,t,r)}))}return Jl(s)}function rc(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nc(e))throw Error(s(200));return Xl(t,e,null,n)}Va=function(t,e,n){var i=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||hr.current)Ps=!0;else{if(0===(n&i)){switch(Ps=!1,e.tag){case 3:Gs(e),Vo();break;case 5:Io(e);break;case 1:dr(e.type)&&yr(e);break;case 4:Ro(e,e.stateNode.containerInfo);break;case 10:i=e.memoizedProps.value;var r=e.type._context;lr(Yr,r._currentValue),r._currentValue=i;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Ys(t,e,n):(lr(No,1&No.current),null!==(e=na(t,e,n))?e.sibling:null);lr(No,1&No.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(64&t.flags)){if(i)return ea(t,e,n);e.flags|=64}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),lr(No,No.current),i)break;return null;case 23:case 24:return e.lanes=0,$s(t,e,n)}return na(t,e,n)}Ps=0!==(16384&t.flags)}else Ps=!1;switch(e.lanes=0,e.tag){case 2:if(i=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=pr(e,ur.current),no(e,n),r=rs(null,e,i,t,r,n),e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,dr(i)){var o=!0;yr(e)}else o=!1;e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,oo(e);var a=i.getDerivedStateFromProps;"function"===typeof a&&po(e,i,a,t),r.updater=go,e.stateNode=r,r._reactInternals=e,bo(e,i,t,n),e=Us(null,e,i,!0,o,n)}else e.tag=0,Ns(null,e,r,n),e=e.child;return e;case 16:r=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=(o=r._init)(r._payload),e.type=r,o=e.tag=function(t){if("function"===typeof t)return Hl(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===M)return 11;if(t===O)return 14}return 2}(r),t=Kr(r,t),o){case 0:e=Bs(null,e,r,t,n);break t;case 1:e=Hs(null,e,r,t,n);break t;case 11:e=Ds(null,e,r,t,n);break t;case 14:e=js(null,e,r,Kr(r.type,t),i,n);break t}throw Error(s(306,r,""))}return e;case 0:return i=e.type,r=e.pendingProps,Bs(t,e,i,r=e.elementType===i?r:Kr(i,r),n);case 1:return i=e.type,r=e.pendingProps,Hs(t,e,i,r=e.elementType===i?r:Kr(i,r),n);case 3:if(Gs(e),i=e.updateQueue,null===t||null===i)throw Error(s(282));if(i=e.pendingProps,r=null!==(r=e.memoizedState)?r.element:null,so(t,e),uo(e,i,null,n),(i=e.memoizedState.element)===r)Vo(),e=na(t,e,n);else{if((o=(r=e.stateNode).hydrate)&&(zo=Vi(e.stateNode.containerInfo.firstChild),jo=e,o=$o=!0),o){if(null!=(t=r.mutableSourceEagerHydrationData))for(r=0;r<t.length;r+=2)(o=t[r])._workInProgressVersionPrimary=t[r+1],Wo.push(o);for(n=Ao(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ns(t,e,i,n),Vo();e=e.child}return e;case 5:return Io(e),null===t&&Ho(e),i=e.type,r=e.pendingProps,o=null!==t?t.memoizedProps:null,a=r.children,Bi(i,r)?a=null:null!==o&&Bi(i,o)&&(e.flags|=16),Fs(t,e),Ns(t,e,a,n),e.child;case 6:return null===t&&Ho(e),null;case 13:return Ys(t,e,n);case 4:return Ro(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=So(e,null,i,n):Ns(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,Ds(t,e,i,r=e.elementType===i?r:Kr(i,r),n);case 7:return Ns(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ns(t,e,e.pendingProps.children,n),e.child;case 10:t:{i=e.type._context,r=e.pendingProps,a=e.memoizedProps,o=r.value;var l=e.type._context;if(lr(Yr,l._currentValue),l._currentValue=o,null!==a)if(l=a.value,0===(o=ai(l,o)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(l,o):1073741823))){if(a.children===r.children&&!hr.current){e=na(t,e,n);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===i&&0!==(u.observedBits&o)){1===l.tag&&((u=ao(-1,n&-n)).tag=2,lo(l,u)),l.lanes|=n,null!==(u=l.alternate)&&(u.lanes|=n),eo(l.return,n),c.lanes|=n;break}u=u.next}}else a=10===l.tag&&l.type===e.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===e){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Ns(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=(o=e.pendingProps).children,no(e,n),i=i(r=io(r,o.unstable_observedBits)),e.flags|=1,Ns(t,e,i,n),e.child;case 14:return o=Kr(r=e.type,e.pendingProps),js(t,e,r,o=Kr(r.type,o),i,n);case 15:return zs(t,e,e.type,e.pendingProps,i,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Kr(i,r),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,dr(i)?(t=!0,yr(e)):t=!1,no(e,n),vo(e,i,r),bo(e,i,r,n),Us(null,e,i,!0,t,n);case 19:return ea(t,e,n);case 23:case 24:return $s(t,e,n)}throw Error(s(156,e.tag))},ec.prototype.render=function(t){Zl(t,this._internalRoot,null,null)},ec.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Zl(null,t,null,(function(){e[Zi]=null}))},ee=function(t){13===t.tag&&(hl(t,4,cl()),tc(t,4))},ne=function(t){13===t.tag&&(hl(t,67108864,cl()),tc(t,67108864))},ie=function(t){if(13===t.tag){var e=cl(),n=ul(t);hl(t,n,e),tc(t,n)}},re=function(t,e){return e()},Tt=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=nr(i);if(!r)throw Error(s(90));Z(i),nt(i,r)}}}break;case"textarea":ct(t,n);break;case"select":null!=(e=n.value)&&st(t,!!n.multiple,e,!1)}},It=vl,Pt=function(t,e,n,i,r){var o=Ma;Ma|=4;try{return Ur(98,t.bind(null,e,n,i,r))}finally{0===(Ma=o)&&(Ga(),Vr())}},Nt=function(){0===(49&Ma)&&(function(){if(null!==el){var t=el;el=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,pl(t,Fr())}))}Vr()}(),Ol())},Dt=function(t,e){var n=Ma;Ma|=2;try{return t(e)}finally{0===(Ma=n)&&(Ga(),Vr())}};var oc={Events:[tr,er,nr,Rt,Ot,Ol,{current:!1}]},sc={findFiberByHostInstance:Qi,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},ac={bundleType:sc.bundleType,version:sc.version,rendererPackageName:sc.rendererPackageName,rendererConfig:sc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Qt(t))?null:t.stateNode},findFiberByHostInstance:sc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{_r=lc.inject(ac),wr=lc}catch(mt){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,e.createPortal=rc,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return t=null===(t=Qt(e))?null:t.stateNode},e.flushSync=function(t,e){var n=Ma;if(0!==(48&n))return t(e);Ma|=1;try{if(t)return Ur(99,t.bind(null,e))}finally{Ma=n,Vr()}},e.hydrate=function(t,e,n){if(!nc(e))throw Error(s(200));return ic(null,t,e,!0,n)},e.render=function(t,e,n){if(!nc(e))throw Error(s(200));return ic(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!nc(t))throw Error(s(40));return!!t._reactRootContainer&&(yl((function(){ic(null,null,t,!1,(function(){t._reactRootContainer=null,t[Zi]=null}))})),!0)},e.unstable_batchedUpdates=vl,e.unstable_createPortal=function(t,e){return rc(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!nc(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return ic(t,e,n,!1,i)},e.version="17.0.2"},function(t,e,n){"use strict";t.exports=n(26)},function(t,e,n){"use strict";var i,r,o,s;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,h=null,f=function t(){if(null!==u)try{var n=e.unstable_now();u(!0,n),u=null}catch(i){throw setTimeout(t,0),i}};i=function(t){null!==u?setTimeout(i,0,t):(u=t,setTimeout(f,0))},r=function(t,e){h=setTimeout(t,e)},o=function(){clearTimeout(h)},e.unstable_shouldYield=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,v=null,y=-1,b=5,_=0;e.unstable_shouldYield=function(){return e.unstable_now()>=_},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<t?Math.floor(1e3/t):5};var w=new MessageChannel,x=w.port2;w.port1.onmessage=function(){if(null!==v){var t=e.unstable_now();_=t+b;try{v(!0,t)?x.postMessage(null):(m=!1,v=null)}catch(n){throw x.postMessage(null),n}}else m=!1},i=function(t){v=t,m||(m=!0,x.postMessage(null))},r=function(t,n){y=p((function(){t(e.unstable_now())}),n)},o=function(){d(y),y=-1}}function k(t,e){var n=t.length;t.push(e);t:for(;;){var i=n-1>>>1,r=t[i];if(!(void 0!==r&&0<E(r,e)))break t;t[i]=e,t[n]=r,n=i}}function S(t){return void 0===(t=t[0])?null:t}function A(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length;i<r;){var o=2*(i+1)-1,s=t[o],a=o+1,l=t[a];if(void 0!==s&&0>E(s,n))void 0!==l&&0>E(l,s)?(t[i]=l,t[a]=n,i=a):(t[i]=s,t[o]=n,i=o);else{if(!(void 0!==l&&0>E(l,n)))break t;t[i]=l,t[a]=n,i=a}}}return e}return null}function E(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var T=[],C=[],M=1,L=null,R=3,O=!1,I=!1,P=!1;function N(t){for(var e=S(C);null!==e;){if(null===e.callback)A(C);else{if(!(e.startTime<=t))break;A(C),e.sortIndex=e.expirationTime,k(T,e)}e=S(C)}}function D(t){if(P=!1,N(t),!I)if(null!==S(T))I=!0,i(j);else{var e=S(C);null!==e&&r(D,e.startTime-t)}}function j(t,n){I=!1,P&&(P=!1,o()),O=!0;var i=R;try{for(N(n),L=S(T);null!==L&&(!(L.expirationTime>n)||t&&!e.unstable_shouldYield());){var s=L.callback;if("function"===typeof s){L.callback=null,R=L.priorityLevel;var a=s(L.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?L.callback=a:L===S(T)&&A(T),N(n)}else A(T);L=S(T)}if(null!==L)var l=!0;else{var c=S(C);null!==c&&r(D,c.startTime-n),l=!1}return l}finally{L=null,R=i,O=!1}}var z=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){I||O||(I=!0,i(j))},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return S(T)},e.unstable_next=function(t){switch(R){case 1:case 2:case 3:var e=3;break;default:e=R}var n=R;R=e;try{return t()}finally{R=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=z,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=R;R=t;try{return e()}finally{R=n}},e.unstable_scheduleCallback=function(t,n,s){var a=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,t){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return t={id:M++,callback:n,priorityLevel:t,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>a?(t.sortIndex=s,k(C,t),null===S(T)&&t===S(C)&&(P?o():P=!0,r(D,s-a))):(t.sortIndex=l,k(T,t),I||O||(I=!0,i(j))),t},e.unstable_wrapCallback=function(t){var e=R;return function(){var n=R;R=e;try{return t.apply(this,arguments)}finally{R=n}}}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"===typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var l,c=[],u=!1,h=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&p())}function p(){if(!u){var t=a(f);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||u||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";var i="function"===typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,a=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,u=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,f=i?Symbol.for("react.concurrent_mode"):60111,p=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,g=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,y=i?Symbol.for("react.block"):60121,b=i?Symbol.for("react.fundamental"):60117,_=i?Symbol.for("react.responder"):60118,w=i?Symbol.for("react.scope"):60119;function x(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case h:case f:case s:case l:case a:case d:return t;default:switch(t=t&&t.$$typeof){case u:case p:case v:case m:case c:return t;default:return e}}case o:return e}}}function k(t){return x(t)===f}e.AsyncMode=h,e.ConcurrentMode=f,e.ContextConsumer=u,e.ContextProvider=c,e.Element=r,e.ForwardRef=p,e.Fragment=s,e.Lazy=v,e.Memo=m,e.Portal=o,e.Profiler=l,e.StrictMode=a,e.Suspense=d,e.isAsyncMode=function(t){return k(t)||x(t)===h},e.isConcurrentMode=k,e.isContextConsumer=function(t){return x(t)===u},e.isContextProvider=function(t){return x(t)===c},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return x(t)===p},e.isFragment=function(t){return x(t)===s},e.isLazy=function(t){return x(t)===v},e.isMemo=function(t){return x(t)===m},e.isPortal=function(t){return x(t)===o},e.isProfiler=function(t){return x(t)===l},e.isStrictMode=function(t){return x(t)===a},e.isSuspense=function(t){return x(t)===d},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===s||t===f||t===l||t===a||t===d||t===g||"object"===typeof t&&null!==t&&(t.$$typeof===v||t.$$typeof===m||t.$$typeof===c||t.$$typeof===u||t.$$typeof===p||t.$$typeof===b||t.$$typeof===_||t.$$typeof===w||t.$$typeof===y)},e.typeOf=x},function(t,e,n){"use strict";n(8);var i=n(0),r=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;r=o("react.element"),e.Fragment=o("react.fragment")}var s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,o={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,i)&&!l.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===o[i]&&(o[i]=e[i]);return{$$typeof:r,type:t,key:c,ref:u,props:o,_owner:s.current}}e.jsx=c,e.jsxs=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),s=n(9),a=n(0),l=n(15),c=n(16),u=c.getAceInstance(),h=function(t){function e(e){var n=t.call(this,e)||this;return c.editorEvents.forEach((function(t){n[t]=n[t].bind(n)})),n.debounce=c.debounce,n}return i(e,t),e.prototype.isInShadow=function(t){for(var e=t&&t.parentNode;e;){if("[object ShadowRoot]"===e.toString())return!0;e=e.parentNode}return!1},e.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.className,i=e.onBeforeLoad,r=e.onValidate,o=e.mode,s=e.focus,a=e.theme,l=e.fontSize,h=e.value,f=e.defaultValue,p=e.showGutter,d=e.wrapEnabled,g=e.showPrintMargin,m=e.scrollMargin,v=void 0===m?[0,0,0,0]:m,y=e.keyboardHandler,b=e.onLoad,_=e.commands,w=e.annotations,x=e.markers,k=e.placeholder;this.editor=u.edit(this.refEditor),i&&i(u);for(var S=Object.keys(this.props.editorProps),A=0;A<S.length;A++)this.editor[S[A]]=this.props.editorProps[S[A]];this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),this.editor.renderer.setScrollMargin(v[0],v[1],v[2],v[3]),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.getSession().setMode("string"===typeof o?"ace/mode/"+o:o),a&&""!==a&&this.editor.setTheme("ace/theme/"+a),this.editor.setFontSize("number"===typeof l?l+"px":l),this.editor.getSession().setValue(f||(h||"")),this.props.navigateToFileEnd&&this.editor.navigateFileEnd(),this.editor.renderer.setShowGutter(p),this.editor.getSession().setUseWrapMode(d),this.editor.setShowPrintMargin(g),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("copy",this.onCopy),this.editor.on("paste",this.onPaste),this.editor.on("change",this.onChange),this.editor.on("input",this.onInput),k&&this.updatePlaceholder(),this.editor.getSession().selection.on("changeSelection",this.onSelectionChange),this.editor.getSession().selection.on("changeCursor",this.onCursorChange),r&&this.editor.getSession().on("changeAnnotation",(function(){var e=t.editor.getSession().getAnnotations();t.props.onValidate(e)})),this.editor.session.on("changeScrollTop",this.onScroll),this.editor.getSession().setAnnotations(w||[]),x&&x.length>0&&this.handleMarkers(x);var E=this.editor.$options;c.editorOptions.forEach((function(e){E.hasOwnProperty(e)?t.editor.setOption(e,t.props[e]):t.props[e]&&console.warn("ReactAce: editor option "+e+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")})),this.handleOptions(this.props),Array.isArray(_)&&_.forEach((function(e){"string"===typeof e.exec?t.editor.commands.bindKey(e.bindKey,e.exec):t.editor.commands.addCommand(e)})),y&&this.editor.setKeyboardHandler("ace/keyboard/"+y),n&&(this.refEditor.className+=" "+n),b&&b(this.editor),this.editor.resize(),s&&this.editor.focus()},e.prototype.componentDidUpdate=function(t){for(var e=t,n=this.props,i=0;i<c.editorOptions.length;i++){var r=c.editorOptions[i];n[r]!==e[r]&&this.editor.setOption(r,n[r])}if(n.className!==e.className){var o=this.refEditor.className.trim().split(" ");e.className.trim().split(" ").forEach((function(t){var e=o.indexOf(t);o.splice(e,1)})),this.refEditor.className=" "+n.className+" "+o.join(" ")}if(this.editor&&null!=n.value&&this.editor.getValue()!==n.value){this.silent=!0;var s=this.editor.session.selection.toJSON();this.editor.setValue(n.value,n.cursorStart),this.editor.session.selection.fromJSON(s),this.silent=!1}n.placeholder!==e.placeholder&&this.updatePlaceholder(),n.mode!==e.mode&&this.editor.getSession().setMode("string"===typeof n.mode?"ace/mode/"+n.mode:n.mode),n.theme!==e.theme&&this.editor.setTheme("ace/theme/"+n.theme),n.keyboardHandler!==e.keyboardHandler&&(n.keyboardHandler?this.editor.setKeyboardHandler("ace/keyboard/"+n.keyboardHandler):this.editor.setKeyboardHandler(null)),n.fontSize!==e.fontSize&&this.editor.setFontSize("number"===typeof n.fontSize?n.fontSize+"px":n.fontSize),n.wrapEnabled!==e.wrapEnabled&&this.editor.getSession().setUseWrapMode(n.wrapEnabled),n.showPrintMargin!==e.showPrintMargin&&this.editor.setShowPrintMargin(n.showPrintMargin),n.showGutter!==e.showGutter&&this.editor.renderer.setShowGutter(n.showGutter),l(n.setOptions,e.setOptions)||this.handleOptions(n),l(n.annotations,e.annotations)||this.editor.getSession().setAnnotations(n.annotations||[]),!l(n.markers,e.markers)&&Array.isArray(n.markers)&&this.handleMarkers(n.markers),l(n.scrollMargin,e.scrollMargin)||this.handleScrollMargins(n.scrollMargin),t.height===this.props.height&&t.width===this.props.width||this.editor.resize(),this.props.focus&&!t.focus&&this.editor.focus()},e.prototype.handleScrollMargins=function(t){void 0===t&&(t=[0,0,0,0]),this.editor.renderer.setScrollMargin(t[0],t[1],t[2],t[3])},e.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},e.prototype.onChange=function(t){if(this.props.onChange&&!this.silent){var e=this.editor.getValue();this.props.onChange(e,t)}},e.prototype.onSelectionChange=function(t){if(this.props.onSelectionChange){var e=this.editor.getSelection();this.props.onSelectionChange(e,t)}},e.prototype.onCursorChange=function(t){if(this.props.onCursorChange){var e=this.editor.getSelection();this.props.onCursorChange(e,t)}},e.prototype.onInput=function(t){this.props.onInput&&this.props.onInput(t),this.props.placeholder&&this.updatePlaceholder()},e.prototype.onFocus=function(t){this.props.onFocus&&this.props.onFocus(t,this.editor)},e.prototype.onBlur=function(t){this.props.onBlur&&this.props.onBlur(t,this.editor)},e.prototype.onCopy=function(t){var e=t.text;this.props.onCopy&&this.props.onCopy(e)},e.prototype.onPaste=function(t){var e=t.text;this.props.onPaste&&this.props.onPaste(e)},e.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},e.prototype.handleOptions=function(t){for(var e=Object.keys(t.setOptions),n=0;n<e.length;n++)this.editor.setOption(e[n],t.setOptions[e[n]])},e.prototype.handleMarkers=function(t){var e=this,n=this.editor.getSession().getMarkers(!0);for(var i in n)n.hasOwnProperty(i)&&this.editor.getSession().removeMarker(n[i].id);for(var i in n=this.editor.getSession().getMarkers(!1))n.hasOwnProperty(i)&&"ace_active-line"!==n[i].clazz&&"ace_selected-word"!==n[i].clazz&&this.editor.getSession().removeMarker(n[i].id);t.forEach((function(t){var n=t.startRow,i=t.startCol,r=t.endRow,s=t.endCol,a=t.className,l=t.type,c=t.inFront,u=void 0!==c&&c,h=new o.Range(n,i,r,s);e.editor.getSession().addMarker(h,a,l,u)}))},e.prototype.updatePlaceholder=function(){var t=this.editor,e=this.props.placeholder,n=!t.session.getValue().length,i=t.renderer.placeholderNode;!n&&i?(t.renderer.scroller.removeChild(t.renderer.placeholderNode),t.renderer.placeholderNode=null):n&&!i?((i=t.renderer.placeholderNode=document.createElement("div")).textContent=e||"",i.className="ace_comment ace_placeholder",i.style.padding="0 9px",i.style.position="absolute",i.style.zIndex="3",t.renderer.scroller.appendChild(i)):n&&i&&(i.textContent=e)},e.prototype.updateRef=function(t){this.refEditor=t},e.prototype.render=function(){var t=this.props,e=t.name,n=t.width,i=t.height,o=t.style,s=r({width:n,height:i},o);return a.createElement("div",{ref:this.updateRef,id:e,style:s})},e.propTypes={mode:s.oneOfType([s.string,s.object]),focus:s.bool,theme:s.string,name:s.string,className:s.string,height:s.string,width:s.string,fontSize:s.oneOfType([s.number,s.string]),showGutter:s.bool,onChange:s.func,onCopy:s.func,onPaste:s.func,onFocus:s.func,onInput:s.func,onBlur:s.func,onScroll:s.func,value:s.string,defaultValue:s.string,onLoad:s.func,onSelectionChange:s.func,onCursorChange:s.func,onBeforeLoad:s.func,onValidate:s.func,minLines:s.number,maxLines:s.number,readOnly:s.bool,highlightActiveLine:s.bool,tabSize:s.number,showPrintMargin:s.bool,cursorStart:s.number,debounceChangePeriod:s.number,editorProps:s.object,setOptions:s.object,style:s.object,scrollMargin:s.array,annotations:s.array,markers:s.array,keyboardHandler:s.string,wrapEnabled:s.bool,enableSnippets:s.bool,enableBasicAutocompletion:s.oneOfType([s.bool,s.array]),enableLiveAutocompletion:s.oneOfType([s.bool,s.array]),navigateToFileEnd:s.bool,commands:s.array,placeholder:s.string},e.defaultProps={name:"ace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",fontSize:12,enableSnippets:!1,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,placeholder:null,navigateToFileEnd:!0},e}(a.Component);e.default=h},function(t,e,n){"use strict";var i=n(33);function r(){}function o(){}o.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,o,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),o=n(0),s=n(17),a=n(37),l=function(t){function e(e){var n=t.call(this,e)||this;return n.state={value:n.props.value},n.onChange=n.onChange.bind(n),n.diff=n.diff.bind(n),n}return i(e,t),e.prototype.componentDidUpdate=function(){var t=this.props.value;t!==this.state.value&&this.setState({value:t})},e.prototype.onChange=function(t){this.setState({value:t}),this.props.onChange&&this.props.onChange(t)},e.prototype.diff=function(){var t=new a,e=this.state.value[0],n=this.state.value[1];if(0===e.length&&0===n.length)return[];var i=t.diff_main(e,n);t.diff_cleanupSemantic(i);var r=this.generateDiffedLines(i);return this.setCodeMarkers(r)},e.prototype.generateDiffedLines=function(t){var e=0,n=-1,i=1,r={left:[],right:[]},o={left:1,right:1};return t.forEach((function(t){var s=t[0],a=t[1],l=a.split("\n").length-1;if(0!==a.length){var c=a[0],u=a[a.length-1],h=0;switch(s){case e:o.left+=l,o.right+=l;break;case n:"\n"===c&&(o.left++,l--),0===(h=l)&&r.right.push({startLine:o.right,endLine:o.right}),"\n"===u&&(h-=1),r.left.push({startLine:o.left,endLine:o.left+h}),o.left+=l;break;case i:"\n"===c&&(o.right++,l--),0===(h=l)&&r.left.push({startLine:o.left,endLine:o.left}),"\n"===u&&(h-=1),r.right.push({startLine:o.right,endLine:o.right+h}),o.right+=l;break;default:throw new Error("Diff type was not defined.")}}})),r},e.prototype.setCodeMarkers=function(t){void 0===t&&(t={left:[],right:[]});for(var e=[],n={left:[],right:[]},i=0;i<t.left.length;i++){var r={startRow:t.left[i].startLine-1,endRow:t.left[i].endLine,type:"text",className:"codeMarker"};n.left.push(r)}for(i=0;i<t.right.length;i++){r={startRow:t.right[i].startLine-1,endRow:t.right[i].endLine,type:"text",className:"codeMarker"};n.right.push(r)}return e[0]=n.left,e[1]=n.right,e},e.prototype.render=function(){var t=this.diff();return o.createElement(s.default,{name:this.props.name,className:this.props.className,focus:this.props.focus,orientation:this.props.orientation,splits:this.props.splits,mode:this.props.mode,theme:this.props.theme,height:this.props.height,width:this.props.width,fontSize:this.props.fontSize,showGutter:this.props.showGutter,onChange:this.onChange,onPaste:this.props.onPaste,onLoad:this.props.onLoad,onScroll:this.props.onScroll,minLines:this.props.minLines,maxLines:this.props.maxLines,readOnly:this.props.readOnly,highlightActiveLine:this.props.highlightActiveLine,showPrintMargin:this.props.showPrintMargin,tabSize:this.props.tabSize,cursorStart:this.props.cursorStart,editorProps:this.props.editorProps,style:this.props.style,scrollMargin:this.props.scrollMargin,setOptions:this.props.setOptions,wrapEnabled:this.props.wrapEnabled,enableBasicAutocompletion:this.props.enableBasicAutocompletion,enableLiveAutocompletion:this.props.enableLiveAutocompletion,value:this.state.value,markers:t})},e.propTypes={cursorStart:r.number,editorProps:r.object,enableBasicAutocompletion:r.bool,enableLiveAutocompletion:r.bool,focus:r.bool,fontSize:r.number,height:r.string,highlightActiveLine:r.bool,maxLines:r.number,minLines:r.number,mode:r.string,name:r.string,className:r.string,onLoad:r.func,onPaste:r.func,onScroll:r.func,onChange:r.func,orientation:r.string,readOnly:r.bool,scrollMargin:r.array,setOptions:r.object,showGutter:r.bool,showPrintMargin:r.bool,splits:r.number,style:r.object,tabSize:r.number,theme:r.string,value:r.array,width:r.string,wrapEnabled:r.bool},e.defaultProps={cursorStart:1,editorProps:{},enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,focus:!1,fontSize:12,height:"500px",highlightActiveLine:!0,maxLines:null,minLines:null,mode:"",name:"ace-editor",onLoad:null,onScroll:null,onPaste:null,onChange:null,orientation:"beside",readOnly:!1,scrollMargin:[0,0,0,0],setOptions:{},showGutter:!0,showPrintMargin:!0,splits:2,style:{},tabSize:4,theme:"github",value:["",""],width:"500px",wrapEnabled:!0},e}(o.Component);e.default=l},function(t,e,n){(function(t){ace.define("ace/split",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/editor","ace/virtual_renderer","ace/edit_session"],(function(t,e,n){"use strict";var i=t("./lib/oop"),r=(t("./lib/lang"),t("./lib/event_emitter").EventEmitter),o=t("./editor").Editor,s=t("./virtual_renderer").VirtualRenderer,a=t("./edit_session").EditSession,l=function(t,e,n){this.BELOW=1,this.BESIDE=0,this.$container=t,this.$theme=e,this.$splits=0,this.$editorCSS="",this.$editors=[],this.$orientation=this.BESIDE,this.setSplits(n||1),this.$cEditor=this.$editors[0],this.on("focus",function(t){this.$cEditor=t}.bind(this))};(function(){i.implement(this,r),this.$createEditor=function(){var t=document.createElement("div");t.className=this.$editorCSS,t.style.cssText="position: absolute; top:0px; bottom:0px",this.$container.appendChild(t);var e=new o(new s(t,this.$theme));return e.on("focus",function(){this._emit("focus",e)}.bind(this)),this.$editors.push(e),e.setFontSize(this.$fontSize),e},this.setSplits=function(t){var e;if(t<1)throw"The number of splits have to be > 0!";if(t!=this.$splits){if(t>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<t;)e=this.$editors[this.$splits],this.$container.appendChild(e.container),e.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<t;)this.$createEditor(),this.$splits++}else for(;this.$splits>t;)e=this.$editors[this.$splits-1],this.$container.removeChild(e.container),this.$splits--;this.resize()}},this.getSplits=function(){return this.$splits},this.getEditor=function(t){return this.$editors[t]},this.getCurrentEditor=function(){return this.$cEditor},this.focus=function(){this.$cEditor.focus()},this.blur=function(){this.$cEditor.blur()},this.setTheme=function(t){this.$editors.forEach((function(e){e.setTheme(t)}))},this.setKeyboardHandler=function(t){this.$editors.forEach((function(e){e.setKeyboardHandler(t)}))},this.forEach=function(t,e){this.$editors.forEach(t,e)},this.$fontSize="",this.setFontSize=function(t){this.$fontSize=t,this.forEach((function(e){e.setFontSize(t)}))},this.$cloneSession=function(t){var e=new a(t.getDocument(),t.getMode()),n=t.getUndoManager();return e.setUndoManager(n),e.setTabSize(t.getTabSize()),e.setUseSoftTabs(t.getUseSoftTabs()),e.setOverwrite(t.getOverwrite()),e.setBreakpoints(t.getBreakpoints()),e.setUseWrapMode(t.getUseWrapMode()),e.setUseWorker(t.getUseWorker()),e.setWrapLimitRange(t.$wrapLimitRange.min,t.$wrapLimitRange.max),e.$foldData=t.$cloneFoldData(),e},this.setSession=function(t,e){var n;return n=null==e?this.$cEditor:this.$editors[e],this.$editors.some((function(e){return e.session===t}))&&(t=this.$cloneSession(t)),n.setSession(t),t},this.getOrientation=function(){return this.$orientation},this.setOrientation=function(t){this.$orientation!=t&&(this.$orientation=t,this.resize())},this.resize=function(){var t,e=this.$container.clientWidth,n=this.$container.clientHeight;if(this.$orientation==this.BESIDE)for(var i=e/this.$splits,r=0;r<this.$splits;r++)(t=this.$editors[r]).container.style.width=i+"px",t.container.style.top="0px",t.container.style.left=r*i+"px",t.container.style.height=n+"px",t.resize();else{var o=n/this.$splits;for(r=0;r<this.$splits;r++)(t=this.$editors[r]).container.style.width=e+"px",t.container.style.top=r*o+"px",t.container.style.left="0px",t.container.style.height=o+"px",t.resize()}}}).call(l.prototype),e.Split=l})),ace.define("ace/ext/split",["require","exports","module","ace/split"],(function(t,e,n){"use strict";n.exports=t("../split")})),ace.require(["ace/ext/split"],(function(e){t&&(t.exports=e)}))}).call(this,n(4)(t))},function(t,e,n){(function(e){var n="__lodash_hash_undefined__",i="[object Function]",r="[object GeneratorFunction]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,a=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,u=/^\[object .+?Constructor\]$/,h="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,p=h||f||Function("return this")();var d=Array.prototype,g=Function.prototype,m=Object.prototype,v=p["__core-js_shared__"],y=function(){var t=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),b=g.toString,_=m.hasOwnProperty,w=m.toString,x=RegExp("^"+b.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=p.Symbol,S=d.splice,A=D(p,"Map"),E=D(Object,"create"),T=k?k.prototype:void 0,C=T?T.toString:void 0;function M(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function L(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function R(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function O(t,e){for(var n,i,r=t.length;r--;)if((n=t[r][0])===(i=e)||n!==n&&i!==i)return r;return-1}function I(t,e){for(var n,i=0,r=(e=function(t,e){if(F(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||H(t))return!0;return s.test(t)||!o.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:F(n=e)?n:j(n)).length;null!=t&&i<r;)t=t[z(e[i++])];return i&&i==r?t:void 0}function P(t){return!(!B(t)||(e=t,y&&y in e))&&(function(t){var e=B(t)?w.call(t):"";return e==i||e==r}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}(t)?x:u).test(function(t){if(null!=t){try{return b.call(t)}catch(e){}try{return t+""}catch(e){}}return""}(t));var e}function N(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function D(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return P(n)?n:void 0}M.prototype.clear=function(){this.__data__=E?E(null):{}},M.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},M.prototype.get=function(t){var e=this.__data__;if(E){var i=e[t];return i===n?void 0:i}return _.call(e,t)?e[t]:void 0},M.prototype.has=function(t){var e=this.__data__;return E?void 0!==e[t]:_.call(e,t)},M.prototype.set=function(t,e){return this.__data__[t]=E&&void 0===e?n:e,this},L.prototype.clear=function(){this.__data__=[]},L.prototype.delete=function(t){var e=this.__data__,n=O(e,t);return!(n<0)&&(n==e.length-1?e.pop():S.call(e,n,1),!0)},L.prototype.get=function(t){var e=this.__data__,n=O(e,t);return n<0?void 0:e[n][1]},L.prototype.has=function(t){return O(this.__data__,t)>-1},L.prototype.set=function(t,e){var n=this.__data__,i=O(n,t);return i<0?n.push([t,e]):n[i][1]=e,this},R.prototype.clear=function(){this.__data__={hash:new M,map:new(A||L),string:new M}},R.prototype.delete=function(t){return N(this,t).delete(t)},R.prototype.get=function(t){return N(this,t).get(t)},R.prototype.has=function(t){return N(this,t).has(t)},R.prototype.set=function(t,e){return N(this,t).set(t,e),this};var j=$((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(H(t))return C?C.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var n=[];return a.test(t)&&n.push(""),t.replace(l,(function(t,e,i,r){n.push(i?r.replace(c,"$1"):e||t)})),n}));function z(t){if("string"==typeof t||H(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function $(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new($.Cache||R),n}$.Cache=R;var F=Array.isArray;function B(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function H(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==w.call(t)}t.exports=function(t,e,n){var i=null==t?void 0:I(t,e);return void 0===i?n:i}}).call(this,n(5))},function(t,e){var n=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},i=-1;n.Diff=function(t,e){return[t,e]},n.prototype.diff_main=function(t,e,i,r){"undefined"==typeof r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[new n.Diff(0,t)]:[];"undefined"==typeof i&&(i=!0);var s=i,a=this.diff_commonPrefix(t,e),l=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var c=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var u=this.diff_compute_(t,e,s,o);return l&&u.unshift(new n.Diff(0,l)),c&&u.push(new n.Diff(0,c)),this.diff_cleanupMerge(u),u},n.prototype.diff_compute_=function(t,e,r,o){var s;if(!t)return[new n.Diff(1,e)];if(!e)return[new n.Diff(i,t)];var a=t.length>e.length?t:e,l=t.length>e.length?e:t,c=a.indexOf(l);if(-1!=c)return s=[new n.Diff(1,a.substring(0,c)),new n.Diff(0,l),new n.Diff(1,a.substring(c+l.length))],t.length>e.length&&(s[0][0]=s[2][0]=i),s;if(1==l.length)return[new n.Diff(i,t),new n.Diff(1,e)];var u=this.diff_halfMatch_(t,e);if(u){var h=u[0],f=u[1],p=u[2],d=u[3],g=u[4],m=this.diff_main(h,p,r,o),v=this.diff_main(f,d,r,o);return m.concat([new n.Diff(0,g)],v)}return r&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,o):this.diff_bisect_(t,e,o)},n.prototype.diff_lineMode_=function(t,e,r){var o=this.diff_linesToChars_(t,e);t=o.chars1,e=o.chars2;var s=o.lineArray,a=this.diff_main(t,e,!1,r);this.diff_charsToLines_(a,s),this.diff_cleanupSemantic(a),a.push(new n.Diff(0,""));for(var l=0,c=0,u=0,h="",f="";l<a.length;){switch(a[l][0]){case 1:u++,f+=a[l][1];break;case i:c++,h+=a[l][1];break;case 0:if(c>=1&&u>=1){a.splice(l-c-u,c+u),l=l-c-u;for(var p=this.diff_main(h,f,!1,r),d=p.length-1;d>=0;d--)a.splice(l,0,p[d]);l+=p.length}u=0,c=0,h="",f=""}l++}return a.pop(),a},n.prototype.diff_bisect_=function(t,e,r){for(var o=t.length,s=e.length,a=Math.ceil((o+s)/2),l=a,c=2*a,u=new Array(c),h=new Array(c),f=0;f<c;f++)u[f]=-1,h[f]=-1;u[l+1]=0,h[l+1]=0;for(var p=o-s,d=p%2!=0,g=0,m=0,v=0,y=0,b=0;b<a&&!((new Date).getTime()>r);b++){for(var _=-b+g;_<=b-m;_+=2){for(var w=l+_,x=(T=_==-b||_!=b&&u[w-1]<u[w+1]?u[w+1]:u[w-1]+1)-_;T<o&&x<s&&t.charAt(T)==e.charAt(x);)T++,x++;if(u[w]=T,T>o)m+=2;else if(x>s)g+=2;else if(d){if((A=l+p-_)>=0&&A<c&&-1!=h[A])if(T>=(S=o-h[A]))return this.diff_bisectSplit_(t,e,T,x,r)}}for(var k=-b+v;k<=b-y;k+=2){for(var S,A=l+k,E=(S=k==-b||k!=b&&h[A-1]<h[A+1]?h[A+1]:h[A-1]+1)-k;S<o&&E<s&&t.charAt(o-S-1)==e.charAt(s-E-1);)S++,E++;if(h[A]=S,S>o)y+=2;else if(E>s)v+=2;else if(!d){if((w=l+p-k)>=0&&w<c&&-1!=u[w]){var T;x=l+(T=u[w])-w;if(T>=(S=o-S))return this.diff_bisectSplit_(t,e,T,x,r)}}}}return[new n.Diff(i,t),new n.Diff(1,e)]},n.prototype.diff_bisectSplit_=function(t,e,n,i,r){var o=t.substring(0,n),s=e.substring(0,i),a=t.substring(n),l=e.substring(i),c=this.diff_main(o,s,!1,r),u=this.diff_main(a,l,!1,r);return c.concat(u)},n.prototype.diff_linesToChars_=function(t,e){var n=[],i={};function r(t){for(var e="",r=0,s=-1,a=n.length;s<t.length-1;){-1==(s=t.indexOf("\n",r))&&(s=t.length-1);var l=t.substring(r,s+1);(i.hasOwnProperty?i.hasOwnProperty(l):void 0!==i[l])?e+=String.fromCharCode(i[l]):(a==o&&(l=t.substring(r),s=t.length),e+=String.fromCharCode(a),i[l]=a,n[a++]=l),r=s+1}return e}n[0]="";var o=4e4,s=r(t);return o=65535,{chars1:s,chars2:r(e),lineArray:n}},n.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],r=[],o=0;o<i.length;o++)r[o]=e[i.charCodeAt(o)];t[n][1]=r.join("")}},n.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},n.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},n.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var r=Math.min(n,i);if(t==e)return r;for(var o=0,s=1;;){var a=t.substring(r-s),l=e.indexOf(a);if(-1==l)return o;s+=l,0!=l&&t.substring(r-s)!=e.substring(0,s)||(o=s,s++)}},n.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;var r=this;function o(t,e,n){for(var i,o,s,a,l=t.substring(n,n+Math.floor(t.length/4)),c=-1,u="";-1!=(c=e.indexOf(l,c+1));){var h=r.diff_commonPrefix(t.substring(n),e.substring(c)),f=r.diff_commonSuffix(t.substring(0,n),e.substring(0,c));u.length<f+h&&(u=e.substring(c-f,c)+e.substring(c,c+h),i=t.substring(0,n-f),o=t.substring(n+h),s=e.substring(0,c-f),a=e.substring(c+h))}return 2*u.length>=t.length?[i,o,s,a,u]:null}var s,a,l,c,u,h=o(n,i,Math.ceil(n.length/4)),f=o(n,i,Math.ceil(n.length/2));return h||f?(s=f?h&&h[4].length>f[4].length?h:f:h,t.length>e.length?(a=s[0],l=s[1],c=s[2],u=s[3]):(c=s[0],u=s[1],a=s[2],l=s[3]),[a,l,c,u,s[4]]):null},n.prototype.diff_cleanupSemantic=function(t){for(var e=!1,r=[],o=0,s=null,a=0,l=0,c=0,u=0,h=0;a<t.length;)0==t[a][0]?(r[o++]=a,l=u,c=h,u=0,h=0,s=t[a][1]):(1==t[a][0]?u+=t[a][1].length:h+=t[a][1].length,s&&s.length<=Math.max(l,c)&&s.length<=Math.max(u,h)&&(t.splice(r[o-1],0,new n.Diff(i,s)),t[r[o-1]+1][0]=1,o--,a=--o>0?r[o-1]:-1,l=0,c=0,u=0,h=0,s=null,e=!0)),a++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;a<t.length;){if(t[a-1][0]==i&&1==t[a][0]){var f=t[a-1][1],p=t[a][1],d=this.diff_commonOverlap_(f,p),g=this.diff_commonOverlap_(p,f);d>=g?(d>=f.length/2||d>=p.length/2)&&(t.splice(a,0,new n.Diff(0,p.substring(0,d))),t[a-1][1]=f.substring(0,f.length-d),t[a+1][1]=p.substring(d),a++):(g>=f.length/2||g>=p.length/2)&&(t.splice(a,0,new n.Diff(0,f.substring(0,g))),t[a-1][0]=1,t[a-1][1]=p.substring(0,p.length-g),t[a+1][0]=i,t[a+1][1]=f.substring(g),a++),a++}a++}},n.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var i=t.charAt(t.length-1),r=e.charAt(0),o=i.match(n.nonAlphaNumericRegex_),s=r.match(n.nonAlphaNumericRegex_),a=o&&i.match(n.whitespaceRegex_),l=s&&r.match(n.whitespaceRegex_),c=a&&i.match(n.linebreakRegex_),u=l&&r.match(n.linebreakRegex_),h=c&&t.match(n.blanklineEndRegex_),f=u&&e.match(n.blanklineStartRegex_);return h||f?5:c||u?4:o&&!a&&l?3:a||l?2:o||s?1:0}for(var i=1;i<t.length-1;){if(0==t[i-1][0]&&0==t[i+1][0]){var r=t[i-1][1],o=t[i][1],s=t[i+1][1],a=this.diff_commonSuffix(r,o);if(a){var l=o.substring(o.length-a);r=r.substring(0,r.length-a),o=l+o.substring(0,o.length-a),s=l+s}for(var c=r,u=o,h=s,f=e(r,o)+e(o,s);o.charAt(0)===s.charAt(0);){r+=o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1);var p=e(r,o)+e(o,s);p>=f&&(f=p,c=r,u=o,h=s)}t[i-1][1]!=c&&(c?t[i-1][1]=c:(t.splice(i-1,1),i--),t[i][1]=u,h?t[i+1][1]=h:(t.splice(i+1,1),i--))}i++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,r=[],o=0,s=null,a=0,l=!1,c=!1,u=!1,h=!1;a<t.length;)0==t[a][0]?(t[a][1].length<this.Diff_EditCost&&(u||h)?(r[o++]=a,l=u,c=h,s=t[a][1]):(o=0,s=null),u=h=!1):(t[a][0]==i?h=!0:u=!0,s&&(l&&c&&u&&h||s.length<this.Diff_EditCost/2&&l+c+u+h==3)&&(t.splice(r[o-1],0,new n.Diff(i,s)),t[r[o-1]+1][0]=1,o--,s=null,l&&c?(u=h=!0,o=0):(a=--o>0?r[o-1]:-1,u=h=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},n.prototype.diff_cleanupMerge=function(t){t.push(new n.Diff(0,""));for(var e,r=0,o=0,s=0,a="",l="";r<t.length;)switch(t[r][0]){case 1:s++,l+=t[r][1],r++;break;case i:o++,a+=t[r][1],r++;break;case 0:o+s>1?(0!==o&&0!==s&&(0!==(e=this.diff_commonPrefix(l,a))&&(r-o-s>0&&0==t[r-o-s-1][0]?t[r-o-s-1][1]+=l.substring(0,e):(t.splice(0,0,new n.Diff(0,l.substring(0,e))),r++),l=l.substring(e),a=a.substring(e)),0!==(e=this.diff_commonSuffix(l,a))&&(t[r][1]=l.substring(l.length-e)+t[r][1],l=l.substring(0,l.length-e),a=a.substring(0,a.length-e))),r-=o+s,t.splice(r,o+s),a.length&&(t.splice(r,0,new n.Diff(i,a)),r++),l.length&&(t.splice(r,0,new n.Diff(1,l)),r++),r++):0!==r&&0==t[r-1][0]?(t[r-1][1]+=t[r][1],t.splice(r,1)):r++,s=0,o=0,a="",l=""}""===t[t.length-1][1]&&t.pop();var c=!1;for(r=1;r<t.length-1;)0==t[r-1][0]&&0==t[r+1][0]&&(t[r][1].substring(t[r][1].length-t[r-1][1].length)==t[r-1][1]?(t[r][1]=t[r-1][1]+t[r][1].substring(0,t[r][1].length-t[r-1][1].length),t[r+1][1]=t[r-1][1]+t[r+1][1],t.splice(r-1,1),c=!0):t[r][1].substring(0,t[r+1][1].length)==t[r+1][1]&&(t[r-1][1]+=t[r+1][1],t[r][1]=t[r][1].substring(t[r+1][1].length)+t[r+1][1],t.splice(r+1,1),c=!0)),r++;c&&this.diff_cleanupMerge(t)},n.prototype.diff_xIndex=function(t,e){var n,r=0,o=0,s=0,a=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),t[n][0]!==i&&(o+=t[n][1].length),!(r>e));n++)s=r,a=o;return t.length!=n&&t[n][0]===i?a:a+(e-s)},n.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,o=/>/g,s=/\n/g,a=0;a<t.length;a++){var l=t[a][0],c=t[a][1].replace(n,"&amp;").replace(r,"&lt;").replace(o,"&gt;").replace(s,"&para;<br>");switch(l){case 1:e[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case i:e[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:e[a]="<span>"+c+"</span>"}}return e.join("")},n.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},n.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==i&&(e[n]=t[n][1]);return e.join("")},n.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,o=0;o<t.length;o++){var s=t[o][0],a=t[o][1];switch(s){case 1:n+=a.length;break;case i:r+=a.length;break;case 0:e+=Math.max(n,r),n=0,r=0}}return e+=Math.max(n,r)},n.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case i:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(t,e){for(var r=[],o=0,s=0,a=e.split(/\t/g),l=0;l<a.length;l++){var c=a[l].substring(1);switch(a[l].charAt(0)){case"+":try{r[o++]=new n.Diff(1,decodeURI(c))}catch(f){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var u=parseInt(c,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+c);var h=t.substring(s,s+=u);"="==a[l].charAt(0)?r[o++]=new n.Diff(0,h):r[o++]=new n.Diff(i,h);break;default:if(a[l])throw new Error("Invalid diff operation in diff_fromDelta: "+a[l])}}if(s!=t.length)throw new Error("Delta length ("+s+") does not equal source text length ("+t.length+").");return r},n.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},n.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),r=this;function o(t,i){var o=t/e.length,s=Math.abs(n-i);return r.Match_Distance?o+s/r.Match_Distance:s?1:o}var s=this.Match_Threshold,a=t.indexOf(e,n);-1!=a&&(s=Math.min(o(0,a),s),-1!=(a=t.lastIndexOf(e,n+e.length))&&(s=Math.min(o(0,a),s)));var l,c,u=1<<e.length-1;a=-1;for(var h,f=e.length+t.length,p=0;p<e.length;p++){for(l=0,c=f;l<c;)o(p,n+c)<=s?l=c:f=c,c=Math.floor((f-l)/2+l);f=c;var d=Math.max(1,n-c+1),g=Math.min(n+c,t.length)+e.length,m=Array(g+2);m[g+1]=(1<<p)-1;for(var v=g;v>=d;v--){var y=i[t.charAt(v-1)];if(m[v]=0===p?(m[v+1]<<1|1)&y:(m[v+1]<<1|1)&y|(h[v+1]|h[v])<<1|1|h[v+1],m[v]&u){var b=o(p,v-1);if(b<=s){if(s=b,!((a=v-1)>n))break;d=Math.max(1,2*n-a)}}}if(o(p+1,n)>s)break;h=m}return a},n.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},n.prototype.patch_addContext_=function(t,e){if(0!=e.length){if(null===t.start2)throw Error("patch not initialized");for(var i=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(i)!=e.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,i=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var o=e.substring(t.start2-r,t.start2);o&&t.diffs.unshift(new n.Diff(0,o));var s=e.substring(t.start2+t.length1,t.start2+t.length1+r);s&&t.diffs.push(new n.Diff(0,s)),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+s.length,t.length2+=o.length+s.length}},n.prototype.patch_make=function(t,e,r){var o,s;if("string"==typeof t&&"string"==typeof e&&"undefined"==typeof r)o=t,(s=this.diff_main(o,e,!0)).length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(t&&"object"==typeof t&&"undefined"==typeof e&&"undefined"==typeof r)s=t,o=this.diff_text1(s);else if("string"==typeof t&&e&&"object"==typeof e&&"undefined"==typeof r)o=t,s=e;else{if("string"!=typeof t||"string"!=typeof e||!r||"object"!=typeof r)throw new Error("Unknown call format to patch_make.");o=t,s=r}if(0===s.length)return[];for(var a=[],l=new n.patch_obj,c=0,u=0,h=0,f=o,p=o,d=0;d<s.length;d++){var g=s[d][0],m=s[d][1];switch(c||0===g||(l.start1=u,l.start2=h),g){case 1:l.diffs[c++]=s[d],l.length2+=m.length,p=p.substring(0,h)+m+p.substring(h);break;case i:l.length1+=m.length,l.diffs[c++]=s[d],p=p.substring(0,h)+p.substring(h+m.length);break;case 0:m.length<=2*this.Patch_Margin&&c&&s.length!=d+1?(l.diffs[c++]=s[d],l.length1+=m.length,l.length2+=m.length):m.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,f),a.push(l),l=new n.patch_obj,c=0,f=p,u=h)}1!==g&&(u+=m.length),g!==i&&(h+=m.length)}return c&&(this.patch_addContext_(l,f),a.push(l)),a},n.prototype.patch_deepCopy=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i],o=new n.patch_obj;o.diffs=[];for(var s=0;s<r.diffs.length;s++)o.diffs[s]=new n.Diff(r.diffs[s][0],r.diffs[s][1]);o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,e[i]=o}return e},n.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,o=[],s=0;s<t.length;s++){var a,l,c=t[s].start2+r,u=this.diff_text1(t[s].diffs),h=-1;if(u.length>this.Match_MaxBits?-1!=(a=this.match_main(e,u.substring(0,this.Match_MaxBits),c))&&(-1==(h=this.match_main(e,u.substring(u.length-this.Match_MaxBits),c+u.length-this.Match_MaxBits))||a>=h)&&(a=-1):a=this.match_main(e,u,c),-1==a)o[s]=!1,r-=t[s].length2-t[s].length1;else if(o[s]=!0,r=a-c,u==(l=-1==h?e.substring(a,a+u.length):e.substring(a,h+this.Match_MaxBits)))e=e.substring(0,a)+this.diff_text2(t[s].diffs)+e.substring(a+u.length);else{var f=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(f)/u.length>this.Patch_DeleteThreshold)o[s]=!1;else{this.diff_cleanupSemanticLossless(f);for(var p,d=0,g=0;g<t[s].diffs.length;g++){var m=t[s].diffs[g];0!==m[0]&&(p=this.diff_xIndex(f,d)),1===m[0]?e=e.substring(0,a+p)+m[1]+e.substring(a+p):m[0]===i&&(e=e.substring(0,a+p)+e.substring(a+this.diff_xIndex(f,d+m[1].length))),m[0]!==i&&(d+=m[1].length)}}}}return[e=e.substring(n.length,e.length-n.length),o]},n.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,i="",r=1;r<=e;r++)i+=String.fromCharCode(r);for(r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var o=t[0],s=o.diffs;if(0==s.length||0!=s[0][0])s.unshift(new n.Diff(0,i)),o.start1-=e,o.start2-=e,o.length1+=e,o.length2+=e;else if(e>s[0][1].length){var a=e-s[0][1].length;s[0][1]=i.substring(s[0][1].length)+s[0][1],o.start1-=a,o.start2-=a,o.length1+=a,o.length2+=a}if(0==(s=(o=t[t.length-1]).diffs).length||0!=s[s.length-1][0])s.push(new n.Diff(0,i)),o.length1+=e,o.length2+=e;else if(e>s[s.length-1][1].length){a=e-s[s.length-1][1].length;s[s.length-1][1]+=i.substring(0,a),o.length1+=a,o.length2+=a}return i},n.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,r=0;r<t.length;r++)if(!(t[r].length1<=e)){var o=t[r];t.splice(r--,1);for(var s=o.start1,a=o.start2,l="";0!==o.diffs.length;){var c=new n.patch_obj,u=!0;for(c.start1=s-l.length,c.start2=a-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push(new n.Diff(0,l)));0!==o.diffs.length&&c.length1<e-this.Patch_Margin;){var h=o.diffs[0][0],f=o.diffs[0][1];1===h?(c.length2+=f.length,a+=f.length,c.diffs.push(o.diffs.shift()),u=!1):h===i&&1==c.diffs.length&&0==c.diffs[0][0]&&f.length>2*e?(c.length1+=f.length,s+=f.length,u=!1,c.diffs.push(new n.Diff(h,f)),o.diffs.shift()):(f=f.substring(0,e-c.length1-this.Patch_Margin),c.length1+=f.length,s+=f.length,0===h?(c.length2+=f.length,a+=f.length):u=!1,c.diffs.push(new n.Diff(h,f)),f==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(f.length))}l=(l=this.diff_text2(c.diffs)).substring(l.length-this.Patch_Margin);var p=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==p&&(c.length1+=p.length,c.length2+=p.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=p:c.diffs.push(new n.Diff(0,p))),u||t.splice(++r,0,c)}}},n.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},n.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var r=t.split("\n"),o=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<r.length;){var a=r[o].match(s);if(!a)throw new Error("Invalid patch string: "+r[o]);var l=new n.patch_obj;for(e.push(l),l.start1=parseInt(a[1],10),""===a[2]?(l.start1--,l.length1=1):"0"==a[2]?l.length1=0:(l.start1--,l.length1=parseInt(a[2],10)),l.start2=parseInt(a[3],10),""===a[4]?(l.start2--,l.length2=1):"0"==a[4]?l.length2=0:(l.start2--,l.length2=parseInt(a[4],10)),o++;o<r.length;){var c=r[o].charAt(0);try{var u=decodeURI(r[o].substring(1))}catch(h){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==c)l.diffs.push(new n.Diff(i,u));else if("+"==c)l.diffs.push(new n.Diff(1,u));else if(" "==c)l.diffs.push(new n.Diff(0,u));else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+u)}o++}}return e},(n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:t="+";break;case i:t="-";break;case 0:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},t.exports=n,t.exports.diff_match_patch=n,t.exports.DIFF_DELETE=i,t.exports.DIFF_INSERT=1,t.exports.DIFF_EQUAL=0},function(t,e,n){(function(t){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("./text_highlight_rules").TextHighlightRules,o=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};i.inherits(o,r),e.JsonHighlightRules=o})),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(t,e,n){"use strict";var i=t("../range").Range,r=function(){};(function(){this.checkOutdent=function(t,e){return!!/^\s+$/.test(t)&&/^\s*\}/.test(e)},this.autoOutdent=function(t,e){var n=t.getLine(e).match(/^(\s*\})/);if(!n)return 0;var r=n[1].length,o=t.findMatchingBracket({row:e,column:r});if(!o||o.row==e)return 0;var s=this.$getIndent(t.getLine(o.row));t.replace(new i(e,0,e,r-1),s)},this.$getIndent=function(t){return t.match(/^\s*/)[0]}}).call(r.prototype),e.MatchingBraceOutdent=r})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(t,e,n){"use strict";var i=t("../../lib/oop"),r=t("../../range").Range,o=t("./fold_mode").FoldMode,s=e.FoldMode=function(t){t&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+t.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+t.end)))};i.inherits(s,o),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(t,e,n){var i=t.getLine(n);if(this.singleLineBlockCommentRe.test(i)&&!this.startRegionRe.test(i)&&!this.tripleStarBlockCommentRe.test(i))return"";var r=this._getFoldWidgetBase(t,e,n);return!r&&this.startRegionRe.test(i)?"start":r},this.getFoldWidgetRange=function(t,e,n,i){var r,o=t.getLine(n);if(this.startRegionRe.test(o))return this.getCommentRegionBlock(t,o,n);if(r=o.match(this.foldingStartMarker)){var s=r.index;if(r[1])return this.openingBracketBlock(t,r[1],n,s);var a=t.getCommentFoldRange(n,s+r[0].length,1);return a&&!a.isMultiLine()&&(i?a=this.getSectionRange(t,n):"all"!=e&&(a=null)),a}if("markbegin"!==e&&(r=o.match(this.foldingStopMarker))){s=r.index+r[0].length;return r[1]?this.closingBracketBlock(t,r[1],n,s):t.getCommentFoldRange(n,s,-1)}},this.getSectionRange=function(t,e){for(var n=t.getLine(e),i=n.search(/\S/),o=e,s=n.length,a=e+=1,l=t.getLength();++e<l;){var c=(n=t.getLine(e)).search(/\S/);if(-1!==c){if(i>c)break;var u=this.getFoldWidgetRange(t,"all",e);if(u){if(u.start.row<=o)break;if(u.isMultiLine())e=u.end.row;else if(i==c)break}a=e}}return new r(o,s,a,t.getLine(a).length)},this.getCommentRegionBlock=function(t,e,n){for(var i=e.search(/\s*$/),o=t.getLength(),s=n,a=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++n<o;){e=t.getLine(n);var c=a.exec(e);if(c&&(c[1]?l--:l++,!l))break}if(n>s)return new r(s,i,n,e.length)}}.call(s.prototype)})),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],(function(t,e,n){"use strict";var i=t("../lib/oop"),r=t("./text").Mode,o=t("./json_highlight_rules").JsonHighlightRules,s=t("./matching_brace_outdent").MatchingBraceOutdent,a=t("./behaviour/cstyle").CstyleBehaviour,l=t("./folding/cstyle").FoldMode,c=t("../worker/worker_client").WorkerClient,u=function(){this.HighlightRules=o,this.$outdent=new s,this.$behaviour=new a,this.foldingRules=new l};i.inherits(u,r),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(t,e,n){var i=this.$getIndent(e);"start"==t&&(e.match(/^.*[\{\(\[]\s*$/)&&(i+=n));return i},this.checkOutdent=function(t,e,n){return this.$outdent.checkOutdent(e,n)},this.autoOutdent=function(t,e,n){this.$outdent.autoOutdent(e,n)},this.createWorker=function(t){var e=new c(["ace"],"ace/mode/json_worker","JsonWorker");return e.attachToDocument(t.getDocument()),e.on("annotate",(function(e){t.setAnnotations(e.data)})),e.on("terminate",(function(){t.clearAnnotations()})),e},this.$id="ace/mode/json"}.call(u.prototype),e.Mode=u})),ace.require(["ace/mode/json"],(function(e){t&&(t.exports=e)}))}).call(this,n(4)(t))},function(t,e,n){(function(t){ace.define("ace/theme/tomorrow",["require","exports","module","ace/lib/dom"],(function(t,e,n){e.isDark=!1,e.cssClass="ace-tomorrow",e.cssText=".ace-tomorrow .ace_gutter {background: #f6f6f6;color: #4D4D4C}.ace-tomorrow .ace_print-margin {width: 1px;background: #f6f6f6}.ace-tomorrow {background-color: #FFFFFF;color: #4D4D4C}.ace-tomorrow .ace_cursor {color: #AEAFAD}.ace-tomorrow .ace_marker-layer .ace_selection {background: #D6D6D6}.ace-tomorrow.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #FFFFFF;}.ace-tomorrow .ace_marker-layer .ace_step {background: rgb(255, 255, 0)}.ace-tomorrow .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #D1D1D1}.ace-tomorrow .ace_marker-layer .ace_active-line {background: #EFEFEF}.ace-tomorrow .ace_gutter-active-line {background-color : #dcdcdc}.ace-tomorrow .ace_marker-layer .ace_selected-word {border: 1px solid #D6D6D6}.ace-tomorrow .ace_invisible {color: #D1D1D1}.ace-tomorrow .ace_keyword,.ace-tomorrow .ace_meta,.ace-tomorrow .ace_storage,.ace-tomorrow .ace_storage.ace_type,.ace-tomorrow .ace_support.ace_type {color: #8959A8}.ace-tomorrow .ace_keyword.ace_operator {color: #3E999F}.ace-tomorrow .ace_constant.ace_character,.ace-tomorrow .ace_constant.ace_language,.ace-tomorrow .ace_constant.ace_numeric,.ace-tomorrow .ace_keyword.ace_other.ace_unit,.ace-tomorrow .ace_support.ace_constant,.ace-tomorrow .ace_variable.ace_parameter {color: #F5871F}.ace-tomorrow .ace_constant.ace_other {color: #666969}.ace-tomorrow .ace_invalid {color: #FFFFFF;background-color: #C82829}.ace-tomorrow .ace_invalid.ace_deprecated {color: #FFFFFF;background-color: #8959A8}.ace-tomorrow .ace_fold {background-color: #4271AE;border-color: #4D4D4C}.ace-tomorrow .ace_entity.ace_name.ace_function,.ace-tomorrow .ace_support.ace_function,.ace-tomorrow .ace_variable {color: #4271AE}.ace-tomorrow .ace_support.ace_class,.ace-tomorrow .ace_support.ace_type {color: #C99E00}.ace-tomorrow .ace_heading,.ace-tomorrow .ace_markup.ace_heading,.ace-tomorrow .ace_string {color: #718C00}.ace-tomorrow .ace_entity.ace_name.ace_tag,.ace-tomorrow .ace_entity.ace_other.ace_attribute-name,.ace-tomorrow .ace_meta.ace_tag,.ace-tomorrow .ace_string.ace_regexp,.ace-tomorrow .ace_variable {color: #C82829}.ace-tomorrow .ace_comment {color: #8E908C}.ace-tomorrow .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bdu3f/BwAlfgctduB85QAAAABJRU5ErkJggg==) right repeat-y}",t("../lib/dom").importCssString(e.cssText,e.cssClass)})),ace.require(["ace/theme/tomorrow"],(function(e){t&&(t.exports=e)}))}).call(this,n(4)(t))}]]);
//# sourceMappingURL=2.bd9d93f3.chunk.js.map